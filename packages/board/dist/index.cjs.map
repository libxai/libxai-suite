{"version":3,"sources":["../src/views/KanbanViewAdapter.tsx","../../../node_modules/@dnd-kit/utilities/src/execution-context/canUseDOM.ts","../../../node_modules/@dnd-kit/utilities/src/css.ts","../src/utils/cn.ts","../src/utils/positioning.ts","../src/utils/performance.ts","../src/utils/retry.ts","../src/utils/logger.ts","../src/utils/export.ts","../src/utils/import.ts","../src/components/Gantt/GanttThemeContext.tsx","../src/components/Board/KanbanThemeContext.tsx","../src/components/Portal/Portal.tsx","../src/components/Card/PrioritySelector.tsx","../src/components/Card/DateRangePicker.tsx","../src/components/Card/UserAssignmentSelector.tsx","../src/components/Card/DependenciesSelector.tsx","../src/components/Card/Card.tsx","../src/components/Column/ColumnMenu.tsx","../src/components/Column/Column.tsx","../src/components/Column/EditableColumnTitle.tsx","../src/hooks/useDragState.ts","../src/components/Board/Board.tsx","../src/components/ErrorBoundary/ErrorBoundary.tsx","../src/components/CommandPalette/CommandPalette.tsx","../src/components/Attachments/AttachmentUploader.tsx","../src/components/CardDetailModal/CardDetailModal.tsx","../src/components/CardDetailModal/CardDetailModalV2.tsx","../src/components/Charts/VelocityChart.tsx","../src/components/Charts/BurnDownChart.tsx","../src/components/Charts/DistributionCharts.tsx","../src/components/BulkOperations/BulkOperationsToolbar.tsx","../src/components/Swimlanes/SwimlaneBoardView.tsx","../src/components/Swimlanes/GroupBySelector.tsx","../src/hooks/keyboard/useKeyboardShortcuts.ts","../src/components/KeyboardShortcuts/KeyboardShortcutsHelp.tsx","../src/components/Templates/CardTemplateSelector.tsx","../src/components/ExportImport/ExportImportModal.tsx","../src/components/FilterBar/FilterBar.tsx","../src/components/ConfigMenu/ConfigMenu.tsx","../src/theme/themes.ts","../src/theme/ThemeProvider.tsx","../src/components/ThemeModal/ThemeModal.tsx","../src/components/Gantt/themes.ts","../src/components/Gantt/deriveThemeFromCSS.ts","../src/components/Gantt/i18n.ts","../src/components/Gantt/GanttI18nContext.tsx","../src/components/Gantt/GanttToolbar.tsx","../src/components/Gantt/ColumnManager.tsx","../src/components/Gantt/ContextMenu.tsx","../src/components/Gantt/useGanttKeyboard.ts","../src/components/Gantt/useGanttSelection.ts","../src/components/Gantt/hierarchyUtils.ts","../src/components/Card/StatusSelector.tsx","../src/components/Gantt/TaskGrid.tsx","../src/components/Gantt/hooks/useDragState.ts","../src/components/Gantt/TaskBar.tsx","../src/components/Gantt/DependencyLine.tsx","../src/components/Gantt/Milestone.tsx","../src/components/Gantt/ganttUtils.ts","../src/components/Gantt/Timeline.tsx","../src/components/Gantt/ColorPicker.tsx","../src/components/Gantt/TaskFormModal.tsx","../src/components/Gantt/GanttAIAssistant.tsx","../src/components/Gantt/useUndoRedo.ts","../src/components/Gantt/useGanttUndoRedoKeys.ts","../src/components/Gantt/defaultTemplates.ts","../src/components/Gantt/GanttBoard.tsx","../src/components/Gantt/aiCommandParser.ts","../src/components/Gantt/adapters.ts","../src/components/ListView/i18n.ts","../src/components/ListView/ListView.tsx","../src/components/ListView/themes.ts","../src/components/Calendar/i18n.ts","../src/components/Calendar/CalendarBoard.tsx","../src/components/Calendar/themes.ts","../src/components/CardStack/CardStack.tsx","../src/types/card-history.ts","../src/components/CardHistory/CardHistoryTimeline.tsx","../src/components/CardHistory/CardHistoryReplay.tsx","../src/types/card-relationships.ts","../src/components/CardRelationships/CardRelationshipsGraph.tsx","../src/components/AI/GeneratePlanModal.tsx","../src/lib/ai/config.ts","../src/lib/ai/costs.ts","../src/components/AI/AIUsageDashboard.tsx","../src/components/AI/GenerateGanttTasksDialog.tsx","../src/hooks/useKanbanState.ts","../src/hooks/useBoard.ts","../src/hooks/useFilters.ts","../src/hooks/useAI.ts","../src/hooks/useSelectionState.ts","../src/hooks/useMultiSelect.ts","../src/types/card-stack.ts","../src/hooks/useCardStacking.ts","../src/adapters/react/BoardProvider.tsx","../src/adapters/react/useBoard.ts","../src/adapters/react/useFilteredCards.ts","../src/plugins/PluginManager.ts","../src/components/VirtualList/VirtualList.tsx","../src/components/VirtualGrid/VirtualGrid.tsx","../src/tokens/design-tokens.ts","../src/tokens/css-generator.ts","../src/theme/ThemeSwitcher.tsx"],"names":["CSS","Object","freeze","Translate","toString","transform","x","y","Math","round","Scale","scaleX","scaleY","Transform","join","Transition","_ref","property","duration","easing","cn","inputs","twMerge","clsx","calculatePosition","before","after","generateInitialPositions","count","_","i","calculateDropPosition","columnCards","dropIndex","shouldVirtualize","itemCount","threshold","defaultShouldRetry","error","status","calculateDelay","attempt","initialDelay","backoffMultiplier","maxDelay","delay","jitter","retryWithBackoff","fn","options","maxAttempts","shouldRetry","onRetry","lastError","attempts","callbackError","resolve","retrySyncOperation","createRetryWrapper","args","CircuitBreaker","resetTimeout","result","LogLevel","_Logger","entry","timestamp","level","message","component","rest","prefix","hasContext","isDev","componentName","context","action","Timer","Logger","onEnd","enabled","logger","exportToJSON","board","_options","data","exportToCSV","headers","rows","card","column","col","escapeCSV","row","exportToPDF","boardElement","element","boardEl","canvas","html2canvas","imgData","pdfWidth","pdfHeight","imgAspect","imgWidth","imgHeight","doc","jsPDF","xOffset","yPosition","lines","metadata","dates","value","exportBoard","format","downloadExport","content","filename","defaultFilename","finalFilename","mimeTypes","blob","url","link","importFromJSON","jsonString","importFromCSV","csvString","parseCSVLine","cards","columnsMap","errors","values","cardData","header","index","columnTitle","line","current","inQuotes","char","nextChar","importBoard","readFile","file","reject","reader","event","GanttThemeContext","createContext","useGanttTheme","useContext","KanbanThemeContext","KanbanThemeProvider","children","themeName","jsx","useKanbanTheme","Portal","container","mounted","setMounted","useState","ganttTheme","kanbanTheme","useEffect","target","theme","themeStyles","createPortal","PRIORITY_CONFIG","CLEAR_COLOR","PriorityIcon","color","jsxs","PrioritySelector","priority","onChange","className","isOpen","setIsOpen","menuPosition","setMenuPosition","menuRef","useRef","buttonRef","rect","handleClickOutside","handleEscape","e","handleSelect","newPriority","currentConfig","flagColor","key","config","QUICK_OPTIONS","DateRangePicker","startDate","endDate","isDark","handleQuickSelect","days","now","formatLocalDate","date","year","month","day","todayStr","endStr","formatDateRange","parseLocalDate","dateStr","parts","p","start","end","monthNames","hasDateSet","overdue","today","option","UserAssignmentSelector","assignedUsers","availableUsers","maxVisibleAvatars","searchQuery","setSearchQuery","handleToggleUser","user","isAssigned","u","filteredUsers","visibleUsers","overflowCount","wouldCreateCircularDependency","allCards","fromCardId","toCardId","dependencyMap","deps","d","depObj","existingDeps","visited","recStack","hasCycle","cardId","depId","DependenciesSelector","currentCardId","dependencies","availableTasks","validateCircular","onCircularDependencyError","hasDependencies","setHasDependencies","circularError","setCircularError","handleToggleDependency","taskId","isDependency","targetTask","t","newDeps","id","errorMsg","handleToggleHasDependencies","newValue","filteredTasks","task","linkColor","Fragment","Card","memo","render","onClick","isSelected","disableDrag","onUpdate","attributes","listeners","setNodeRef","transition","isDragging","useSortable","style","users","label","prevProps","nextProps","ColumnMenu","onRename","isRenaming","setIsRenaming","newTitle","setNewTitle","inputRef","handleRenameClick","handleRenameSubmit","trimmedTitle","handleRenameKeyDown","Column","renderColumn","renderCard","renderHeader","renderEmptyState","onCardClick","onCardUpdate","enableVirtualization","cardHeight","isCollapsed","onToggleCollapse","onColumnRename","isOver","useDroppable","parentRef","useVirtualization","virtualizer","useVirtualizer","wipStatus","percentage","isOverWipLimit","getWipBadgeClasses","SortableContext","verticalListSortingStrategy","virtualItem","EditableColumnTitle","title","onSave","isEditing","setIsEditing","editValue","setEditValue","handleSave","trimmed","handleKeyDown","useDragState","state","setState","dragStore","newState","setDragState","useCallback","KanbanBoard","callbacks","renderProps","isLoading","dragState","themeClass","handleCardUpdate","updates","handleColumnRename","columnId","sensors","useSensors","useSensor","PointerSensor","KeyboardSensor","sortableKeyboardCoordinates","cardsByColumn","useMemo","map","a","b","handleDragStart","active","c","handleDragOver","over","targetColumnId","handleDragEnd","activeCard","targetPosition","targetColumnCards","overCard","overIndex","targetColumn","handleCardClick","LoadingSkeleton","DndContext","closestCorners","DragOverlay","columnCount","KanbanViewAdapter","BaseViewAdapter","createRoot","cell","createKanbanView","ErrorBoundary","Component","props","errorInfo","onError","handlerError","hasError","fallback","withErrorBoundary","errorBoundaryProps","WrappedComponent","CommandPalette","onCreateCard","onNavigateToCard","onSearch","onChangePriority","onAssignUser","onGeneratePlan","onPredictRisks","onOpenAIUsage","shortcut","search","setSearch","page","setPage","selectedColumn","setSelectedColumn","selectedCard","setSelectedCard","open","handleClose","handleSelectCommand","param","handleCreateCard","Command","formatFileSize","bytes","k","sizes","getFileIcon","type","isImage","AttachmentUploader","attachments","onUpload","onDelete","maxSizeMB","allowedTypes","maxFiles","setIsDragging","isUploading","setIsUploading","setError","fileInputRef","validateFiles","files","valid","handleUpload","err","handleDragEnter","handleDragLeave","handleDrop","handleFileInputChange","handleClick","handleDelete","attachmentId","attachment","CardDetailModal","onClose","comments","activities","aiInsights","onAddComment","onDeleteComment","onUploadAttachments","onDeleteAttachment","onSuggestAssignee","onGenerateSubtasks","onEstimateEffort","currentUserId","activeTab","setActiveTab","editedCard","setEditedCard","newComment","setNewComment","aiLoading","setAiLoading","aiSuggestions","setAiSuggestions","handleAddComment","handleSuggestAssignee","suggestions","prev","handleGenerateSubtasks","subtasks","handleEstimateEffort","effort","currentCard","selected","dep","comment","author","activity","suggestion","subtask","insight","PRIORITY_OPTIONS","STATUS_OPTIONS","CardDetailModalV2","_onDelete","_onDeleteComment","currentUser","_onAIGenerateDescription","_onAICreateSubtasks","_onAIFindSimilar","availableColumns","availableLabels","_onUploadCoverImage","_unsplashAccessKey","onSubtasksChange","localCard","setLocalCard","isEditingDescription","setIsEditingDescription","setSubtasks","isAddingSubtask","setIsAddingSubtask","newSubtaskTitle","setNewSubtaskTitle","commentText","setCommentText","activityFilter","setActivityFilter","showStatusMenu","setShowStatusMenu","showPriorityMenu","setShowPriorityMenu","showAssigneeMenu","setShowAssigneeMenu","showLabelMenu","setShowLabelMenu","showDatePicker","setShowDatePicker","showTimePicker","setShowTimePicker","titleRef","descriptionRef","commentRef","statusMenuRef","priorityMenuRef","assigneeMenuRef","labelMenuRef","datePickerRef","isTyping","isMod","handleTitleChange","updated","handleTitleKeyDown","handleDescriptionBlur","handleStatusChange","handlePriorityChange","handleToggleAssignee","userId","currentAssignees","newAssignees","handleToggleLabel","currentLabels","newLabels","l","handleDateChange","newDate","handleTimeChange","hours","handleAddSubtask","newSubtask","updatedSubtasks","handleToggleSubtask","st","handleDeleteSubtask","handleSendComment","handleCommentKeyDown","renderMarkdown","text","ReactMarkdown","remarkGfm","rehypeSanitize","node","filteredActivity","displayCard","completedSubtasksCount","s","CustomTooltip","payload","VelocityChart","height","showAverage","showPlanned","dataWithAverage","point","sum","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Line","BurnDownChart","totalTasks","useArea","total","currentRemaining","idealRemaining","progress","isOnTrack","AreaChart","Area","PRIORITY_COLORS","DEFAULT_COLORS","renderPieLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","radius","DistributionCharts","showPercentages","dataWithTotal","colors","PieChart","Pie","Cell","legendEntry","BarChart","Bar","max","BulkOperationsToolbar","selectedCards","onClearSelection","columns","showMoveMenu","setShowMoveMenu","showUserMenu","setShowUserMenu","cardIds","handleUpdatePriority","handleMove","handleAssignUsers","userIds","handleAddLabels","labels","existingLabels","allLabels","generateSwimlanes","groupBy","laneMap","groupValue","laneId","laneTitle","laneColor","laneIcon","assignedUserIds","SwimlaneBoardView","swimlaneConfig","collapsedLanes","setCollapsedLanes","swimlanes","toggleLaneCollapse","next","lane","laneCards","laneBoard","GROUP_BY_OPTIONS","GroupBySelector","currentOption","opt","DEFAULT_SHORTCUTS","matchesShortcut","modifiers","ctrlMatch","shiftMatch","altMatch","metaMatch","useKeyboardShortcuts","shortcuts","preventDefault","shortcutsRef","enabledRef","registerShortcut","unregisterShortcut","customEvent","formatKey","formatModifiers","isMac","getShortcutDisplay","keys","groupShortcuts","groups","KeyboardShortcutsHelp","isMounted","setIsMounted","category","categoryShortcuts","DEFAULT_TEMPLATES","CardTemplateSelector","templates","onSelectTemplate","template","groupedTemplates","acc","categoryTemplates","ExportImportModal","onImport","boardElementRef","selectedFormat","setSelectedFormat","importResult","setImportResult","handleExport","handleFileSelect","SORT_OPTIONS","GROUPBY_OPTIONS","FilterBar","filters","sort","onFiltersChange","onSortChange","onReset","onFilterMyTasks","onFilterOverdue","onFilterHighPriority","_availableColumns","showQuickFilters","compact","onGroupByChange","setIsCollapsed","handleSearchChange","handleDateFilterChange","handleSortChange","handleSortOrderToggle","hasActiveFilters","ConfigMenu","onOpenExport","onOpenThemes","onOpenShortcuts","viewMode","onExportGanttPDF","onExportGanttExcel","onExportGanttPNG","onExportGanttCSV","handleItemClick","darkTheme","lightTheme","neutralTheme","themes","defaultTheme","ThemeContext","STORAGE_KEY","ThemeProvider","initialTheme","storageKey","setThemeState","stored","setTheme","newTheme","root","currentTheme","camelToKebab","themeKey","cssVar","useTheme","str","ThemeModal","themeData","deriveThemeFromCSS","styles","getVar","varName","en","es","translations","getTranslations","locale","mergeTranslations","customTranslations","base","GanttI18nContext","useGanttI18n","ExportDropdown","onExportPNG","onExportPDF","onExportExcel","onExportCSV","onExportJSON","onExportMSProject","isExporting","setIsExporting","dropdownRef","exportOptions","FileImage","FileText","FileSpreadsheet","FileJson","FolderKanban","handler","motion","Download","ChevronDown","AnimatePresence","SegmentedControl","layoutId","isActive","MinimalTabs","DensityDropdown","densityOptions","currentLabel","Rows3","Check","GanttToolbar","timeScale","onTimeScaleChange","zoom","onZoomChange","onThemeChange","rowDensity","onRowDensityChange","showThemeSelector","showCreateTaskButton","createTaskLabel","onCreateTask","hasExport","timeScaleOptions","themeOptions","Moon","Sun","Palette","val","ZoomOut","ZoomIn","Plus","ColumnManager","onToggleColumn","ContextMenu","items","item","ChevronRight","MenuIcons","Edit3","Pencil","Trash2","Minus","Link2","BarChart3","ArrowUpDown","ArrowUp","ArrowDown","EyeOff","Eye","Settings","Scissors","Circle","PlayCircle","CheckCircle2","useGanttKeyboard","tasks","selectedTaskIds","onTaskSelect","onTaskCreate","onTaskDelete","onTaskDuplicate","onTaskMove","onTaskIndent","onTaskOutdent","onTaskRename","onTaskToggleExpand","onOpenTaskModal","enableKeyboard","isEditingRef","editing","flattenTasks","traverse","getFirstSelectedTask","flatTasks","handleNavigation","direction","multiSelect","selectedTask","currentIndex","nextIndex","nextTask","ctrlOrCmd","selectedIds","useGanttSelection","setSelectedTaskIds","lastSelectedId","setLastSelectedId","selectTask","toggleTaskSelection","selectTaskRange","flatTaskIds","lastIndex","rangeIds","handleTaskClick","shift","handleKeyboardSelection","clearSelection","isTaskSelected","parentId","findParentTask","childId","found","indentTasks","taskIds","firstTaskId","taskIndex","targetParent","removeTasks","ids","removed","addAsChildren","idsSet","filtered","outdentTasks","parent","grandparent","removeFromParent","insertAfterTask","afterId","moveTasks","moveInArray","newIndex","deleteTasks","filterTasks","duplicateTasks","duplicateTask","original","copy","duplicateSubtasks","createTask","afterTaskId","weekFromNow","newTask","insertTask","insertIndex","renameTask","newName","toggleTaskExpansion","createSubtask","parentTaskId","findParent","parentTask","addSubtask","STATUS_CONFIG","StatusIcon","icon","StatusSelector","newStatus","statusColor","TaskGrid","ROW_HEIGHT","_templates","onTaskClick","onTaskDblClick","onTaskContextMenu","onTaskToggle","_scrollTop","onColumnResize","onTaskUpdate","onMultiTaskDelete","onCreateSubtask","hoveredTaskId","setHoveredTaskId","showKeyboardHelp","setShowKeyboardHelp","editingTaskId","setEditingTaskId","editingTaskName","setEditingTaskName","keyboardHelpRef","editInputRef","resizingColumn","setResizingColumn","resizeStartX","setResizeStartX","resizeStartWidth","setResizeStartWidth","contextMenu","setContextMenu","handleMouseMove","deltaX","newWidth","handleMouseUp","handleSelectionClick","handleRenameStart","HEADER_HEIGHT","getDuration","handleRenameSave","handleRenameCancel","handleCreateSubtaskClick","renderCellContent","isHovered","startDateValue","endDateValue","taskAssignedUsers","getHeaderContextMenuItems","getTaskContextMenuItems","visibleColumns","colIndex","Keyboard","initialX","initialWidth","dragMode","setDragMode","dragOffset","setDragOffset","ghostX","setGhostX","ghostWidth","setGhostWidth","connectionLine","setConnectionLine","activeZone","setActiveZone","draggedSegmentIndex","setDraggedSegmentIndex","draggedSegmentStartX","setDraggedSegmentStartX","segmentDragOffsetX","setSegmentDragOffsetX","hoveredSegmentIndex","setHoveredSegmentIndex","setIsHovered","width","TaskBar","dayWidth","onDoubleClick","onContextMenu","onDateChange","onDependencyCreate","allTaskPositions","onDragMove","svgRef","isResizing","isConnecting","resetDragState","borderRadius","isOverdue","isAtRisk","isNeutralTheme","RESIZE_ZONE","barWidth","isSmallBar","isVerySmallBar","formatDate","snapToDay","pixelX","pixelToDate","findTaskAtPoint","pointX","pointY","taskPos","padding","handleMouseDown","mode","segmentX","svgElement","svgPoint","effectiveX","actualMode","relativeX","targetTaskId","rawNewX","snappedX","daysDelta","segmentOffset","rawNewStart","snappedStart","rawNewEnd","taskDuration","newStartDate","newEndDate","isValid","dayOffset","updatedSegments","seg","idx","newSegStart","newSegEnd","allDates","newTaskStart","newTaskEnd","handleGlobalMouseMove","handleGlobalMouseUp","displayX","displayWidth","tooltipContent","tooltipText","customClass","segment","segmentStartX","segmentWidth","isThisSegmentDragging","isThisSegmentHovered","displaySegmentX","labelText","truncated","DependencyLine","x1","y1","x2","y2","dx","dy","midX","path","arrowSize","angle","arrowX","arrowY","arrowX2","arrowY2","lineColor","Milestone","size","ganttUtils","durationDays","diffMs","dayOfWeek","workingDays","daysAdded","fromTaskId","toTaskId","buildMap","taskList","flatten","parents","currentId","json","parsed","flat","dateString","tasksWithDates","task1","task2","ascending","diff","newId","autoTable","XLSX","worksheet","columnWidths","workbook","projectName","taskUIDMap","formatMSDate","projectStart","projectEnd","xmlTasks","uid","predecessorLinks","xml","earlyDates","calculateEarlyDates","depTask","depEF","ef","lateDates","calculateLateDates","successors","lf","successor","succLS","ls","criticalPath","early","late","slack","dependents","daysToEnd","earliestDepStart","changedTaskId","changedTask","updatedTasks","dependent","updateTaskRec","draggedTaskId","timelineStartDate","scaledDayWidth","rowHeight","headerHeight","previews","rangeStart","msPerDay","draggedTask","getAffectedTasks","parentDelta","rowIndex","taskStart","originalX","previewX","splitDate","gapDays","firstSegmentEnd","secondSegmentStart","segments","tasksList","Timeline","onTaskDateChange","onDependencyDelete","cascadePreviews","setCascadePreviews","totalDays","timelineWidth","getWeekNumber","dayNum","yearStart","isWeekend","handleTimelineClick","clickedDate","calculateParentDates","subtasksWithDates","startDates","endDates","earliestStart","latestEnd","tasksWithCalculatedDates","getTaskPosition","taskEnd","daysFromStart","minWidth","taskPositions","handleTaskDragMove","weekNum","todayX","contentHeight","nextX","isWeekendDay","hasTaskBar","toIndex","fromIndex","fromPos","toPos","isContainer","preview","TASK_COLORS","ColorPicker","disabled","TaskFormModal","onSubmit","themeColors","inputStyle","labelStyle","formData","setFormData","setErrors","validate","newErrors","handleSubmit","handleChange","field","progressValue","X","AlertCircle","Calendar","Clock","MilestoneIcon","Users","n","DEFAULT_SUGGESTIONS","AIIcon","SendIcon","CloseIcon","MinimizeIcon","LoadingDots","GanttAIAssistant","_onTasksUpdate","isMinimized","setIsMinimized","messages","setMessages","inputValue","setInputValue","setIsLoading","showSuggestions","setShowSuggestions","messagesEndRef","chatContainerRef","placeholder","position","onCommand","maxHistory","applyCommandResult","handleSendCommand","command","userMessage","loadingMessage","withoutLoading","m","assistantMessage","handleSuggestionClick","positionClasses","useUndoRedo","initialState","maxHistorySize","history","setHistory","isApplyingHistory","newStateOrUpdater","addToHistory","currentHistory","resolvedNewState","newPast","undo","previous","redo","newFuture","clearHistory","useGanttUndoRedoKeys","canUndo","canRedo","ctrlKey","defaultTemplates","assigneeNames","classes","mergeTemplates","userTemplates","getRowHeight","density","GanttBoard","forwardRef","onTasksChange","ref","initialTimeScale","initialRowDensity","showExportButton","enableAutoCriticalPath","aiAssistant","onProgressChange","onTaskEdit","onTaskAddSubtask","onTaskMarkIncomplete","onTaskSetInProgress","onBeforeTaskAdd","onAfterTaskAdd","onBeforeTaskUpdate","onAfterTaskUpdate","onBeforeTaskDelete","onAfterTaskDelete","globalTheme","setCurrentTheme","setTimeScale","setRowDensity","setZoom","scrollTop","setScrollTop","setIsResizing","gridWidthOverride","setGridWidthOverride","editingTask","setEditingTask","handleThemeChange","localTasks","setLocalTasks","prevTasksRef","isInitialMount","prevJson","currentJson","getDefaultColumns","setColumns","calculatedGridWidth","gridWidth","gridScrollRef","timelineScrollRef","ganttContainerRef","ganttThemeContextValue","mergedTemplates","tasksWithCriticalPath","criticalPathIds","markCritical","useImperativeHandle","addToParent","update","remove","newTasks","expand","collapse","expandAll","collapseAll","imported","handleToggleColumn","handleColumnResize","minW","maxW","clampedWidth","handleTaskToggle","handleTaskUpdate","oldProgress","updateTask","updatedTask","handleTaskIndent","handleTaskOutdent","handleTaskMove","handleMultiTaskDelete","allowedTaskIds","handleTaskDuplicate","handleTaskCreate","handleTaskRename","handleCreateSubtask","handleTaskDateChange","newStart","newEnd","updateTaskDates","handleTaskContextMenu","handleSplitTask","handleTaskDblClickInternal","handleDependencyCreate","fromTask","updateTaskDependencies","handleDependencyDelete","dependencyId","removeTaskDependency","minDate","maxDate","handleExportPNG","handleExportPDF","handleExportExcel","handleExportCSV","csv","handleExportJSON","handleExportMSProject","timelineScroll","gridContainer","taskGridContent","handleTimelineScroll","scrollY","containerLeft","maxWidth","startTime","endTime","midTime","GANTT_AI_SYSTEM_PROMPT","generateTasksContext","findTaskByName","name","normalizedName","exact","partial","words","taskName","word","parseNaturalDate","referenceDate","normalized","dayMatch","targetDay","currentDay","daysToAdd","inMatch","amount","unit","dateMatch","spanishMonths","spanishDateMatch","englishMonths","englishDateMatch","parseNaturalDuration","match","parseProgress","parseStatus","parseLocalCommand","moveMatch","dateText","extendMatch","durationText","progressMatch","progressText","renameMatch","oldName","linkMatch","fromName","toName","toTask","deleteMatch","validateAIResponse","response","r","mapCardStatusToTaskStatus","mapTaskStatusToCardStatus","cardToGanttTask","assignees","parseDate","isMilestone","ganttTaskToCardUpdate","assignee","cardsToGanttTasks","listViewTranslations","getListViewTranslations","mergeListViewTranslations","flattenTasksWithLevel","ListView","showSearch","showHierarchy","expandedTasks","setExpandedTasks","sortField","setSortField","sortOrder","setSortOrder","parentIds","findParents","toggleExpand","handleSort","displayTasks","query","visibleTasks","isVisible","aVal","bVal","List","Search","isExpanded","listViewThemes","getListViewTheme","calendarTranslations","getCalendarTranslations","mergeCalendarTranslations","getMonthNames","getWeekdayNames","firstDayOfWeek","short","weekdays","isDateInTaskRange","dateOnly","startOnly","endOnly","CalendarBoard","initialDate","currentDate","setCurrentDate","setSelectedTask","goToPreviousMonth","goToNextMonth","goToToday","calendarDays","firstDayOfMonth","lastDayOfMonth","startDay","daysInMonth","flatTaskList","prevMonthDays","prevMonthLastDay","isToday","remainingDays","dayNames","monthName","newProgress","ChevronLeft","calendarThemes","getCalendarTheme","CardStack","stack","onToggleExpand","onUnstack","onDeleteStack","stackCards","stats","totalCards","uniqueAssignees","priorities","handleToggle","DEFAULT_TIMELINE_CONFIG","formatEventDescription","getEventIcon","getEventColor","CardHistoryTimeline","events","filter","onFilterChange","onClearFilter","onEventClick","selectedEventId","customConfig","expandedEvents","setExpandedEvents","timelineRef","groupedEvents","dateKey","group","uniqueUsers","uniqueTypes","types","toggleEvent","eventId","formatRelativeTime","diffMins","diffHours","diffDays","activeFilterCount","eventIndex","eventColor","change","CardHistoryReplay","replayState","onStartReplay","onStopReplay","onTogglePlayback","onPrevious","onNext","onGoToEvent","onSpeedChange","speeds","currentEvent","speed","getRelationshipColor","getRelationshipLabel","getRelationshipIcon","isDirectionalRelationship","runForceSimulation","nodes","edges","iterations","simNodes","nodeMap","iter","alpha","centerX","centerY","other","distance","force","edge","source","CardRelationshipsGraph","_filter","_onFilterChange","onInteraction","simulatedNodes","setSimulatedNodes","draggingNode","setDraggingNode","hoveredNode","setHoveredNode","hoveredEdge","setHoveredEdge","pan","setPan","simulated","handleNodeMouseDown","nodeId","handleNodeClick","handleEdgeClick","getNodePosition","getNodeColor","z","sourcePos","targetPos","isDirectional","isCritical","GeneratePlanModal","onPlanGenerated","externalLoading","prompt","setPrompt","isGenerating","setIsGenerating","generatedPlan","setGeneratedPlan","handleGenerate","plan","handleApplyPlan","example","AI_MODELS","RATE_LIMITS","AI_FEATURES","calculateCost","model","inputTokens","outputTokens","modelInfo","inputCost","outputCost","formatCost","cost","AIUsageTracker","operation","fullOperation","listener","timeRange","operations","op","totalOperations","totalCost","totalInputTokens","totalOutputTokens","successfulOps","totalDuration","operationsByFeature","costsByFeature","limit","planTier","period","periodOperations","remaining","percentUsed","aiUsageTracker","AIUsageDashboard","setStats","setLimit","interval","recentOps","feature","GenerateGanttTasksDialog","onTasksGenerated","onGenerateTasks","setStartDate","setEndDate","generatedTasks","setGeneratedTasks","responseMetadata","setResponseMetadata","handleApplyTasks","similarity","useKanbanState","initialBoard","onPersist","setBoard","persistBoard","updatedBoard","handleCardMove","sourceColumnId","updatedCard","updatedCards","updatedColumns","targetCards","handleCardCreate","newCardId","newCard","handleCardDelete","handleColumnCreate","newColumnId","newColumn","handleColumnUpdate","handleColumnDelete","addCard","addColumn","clearBoard","useBoard","initialData","helpers","utils","maxPosition","DEFAULT_FILTERS","DEFAULT_SORT","useFilters","initialFilters","initialSort","setFiltersState","setSortState","setFilters","newFilters","setSort","newSort","resetFilters","filterMyTasks","filterOverdue","filterHighPriority","applyFilters","todayString","dueDate","dueDateString","todayDate","cardDueDate","due","comparison","aCreated","bCreated","priorityOrder","aPriority","bPriority","aDue","bDue","aTime","bTime","aEst","bEst","generateObject","generateText","aiSDK","useAI","isAvailable","_boardState","useSelectionState","selectionStore","setSelectionState","useMultiSelect","selectionState","isCardSelected","selectCard","isCtrlOrCmd","isShift","lastCard","startIndex","endIndex","minIndex","maxIndex","rangeCardIds","newSelection","deselectCard","selectAll","toggleCard","getSelectedCards","DEFAULT_STACKING_CONFIG","useCardStacking","userConfig","aiService","stacks","setStacks","createStack","strategy","newStack","deleteStack","stackId","toggleStack","addToStack","removeFromStack","newCardIds","getStacksForColumn","getSuggestions","byLabels","byAssignee","byPriority","priorityEmoji","highSimilarity","avgConfidence","applySuggestion","topSuggestion","BoardContext","BoardProvider","onStateChange","storeRef","cardsMap","colData","Board","BoardStore","store","_event","useBoardStore","setCards","updateBoard","changes","columnData","updateColumn","deleteColumn","getColumn","updateCard","deleteCard","moveCard","toColumnId","newPosition","getCard","getCardsByColumn","useFilteredCards","matchesTitle","matchesDesc","useSortedCards","sortBy","PluginManager","plugin","pluginId","hookName","defaultValue","hook","hookResult","promises","pluginManager","VirtualList","estimateSize","renderItem","overscan","horizontal","gap","getItemKey","virtualItems","containerStyle","innerStyle","itemStyle","useVirtualList","VirtualGrid","estimateColumnWidth","columnVirtualizer","virtualColumns","virtualColumn","columnStyle","useVirtualGrid","shouldVirtualizeGrid","spacing","fontSize","fontWeight","lineHeight","zIndex","shadows","opacity","kanban","gantt","designTokens","getToken","tokens","flattenTokens","obj","newKey","formatCSSValue","generateCSSVariables","flatTokens","cssVars","varValue","generateThemeVariables","flatColors","generateCompleteCSS","tokenVars","themeVars","exportTokensToCSS","ThemeIcon","ThemeSwitcher","showLabels"],"mappings":"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","file":"index.cjs","sourcesContent":["/**\r\n * KanbanViewAdapter - ViewAdapter implementation for Kanban board\r\n * @module views/KanbanViewAdapter\r\n *\r\n * Implements the ViewAdapter interface from @libxai/core to enable\r\n * the Kanban board to work with AsakaaRuntime and ViewRegistry.\r\n */\r\n\r\nimport { createRoot, type Root } from 'react-dom/client'\r\nimport { BaseViewAdapter, type ViewBoardData, type ViewOptions, type ExportFormat } from '@libxai/core'\r\nimport { KanbanBoard } from '../components/Board'\r\nimport type { KanbanBoardProps } from '../types'\r\nimport type { Card, Column } from '../types'\r\n\r\n/**\r\n * Kanban view configuration\r\n */\r\nexport interface KanbanViewConfig {\r\n  /**\r\n   * Board callbacks\r\n   */\r\n  callbacks?: KanbanBoardProps['callbacks']\r\n\r\n  /**\r\n   * Card click handler\r\n   */\r\n  onCardClick?: KanbanBoardProps['onCardClick']\r\n\r\n  /**\r\n   * Custom render props\r\n   */\r\n  renderProps?: KanbanBoardProps['renderProps']\r\n\r\n  /**\r\n   * Board configuration\r\n   */\r\n  config?: KanbanBoardProps['config']\r\n\r\n  /**\r\n   * Available users for assignment\r\n   */\r\n  availableUsers?: KanbanBoardProps['availableUsers']\r\n\r\n  /**\r\n   * Custom class name\r\n   */\r\n  className?: string\r\n\r\n  /**\r\n   * Custom inline styles (React.CSSProperties)\r\n   */\r\n  style?: React.CSSProperties\r\n\r\n  /**\r\n   * View options\r\n   */\r\n  viewOptions?: ViewOptions\r\n}\r\n\r\n/**\r\n * KanbanViewAdapter\r\n *\r\n * React-based ViewAdapter implementation that wraps the KanbanBoard component.\r\n * This allows the Kanban board to be used as a view in the ViewRegistry and\r\n * work seamlessly with AsakaaRuntime.\r\n *\r\n * @example\r\n * ```typescript\r\n * import { KanbanViewAdapter } from '@libxai/board'\r\n * import { ViewRegistry } from '@libxai/core'\r\n *\r\n * const registry = new ViewRegistry()\r\n * const kanbanView = new KanbanViewAdapter({\r\n *   callbacks: {\r\n *     onCardMove: (cardId, columnId) => { ... },\r\n *     onCardUpdate: (cardId, updates) => { ... }\r\n *   }\r\n * })\r\n *\r\n * registry.register(kanbanView)\r\n * await registry.activate('kanban', container, data)\r\n * ```\r\n */\r\nexport class KanbanViewAdapter extends BaseViewAdapter<ViewBoardData> {\r\n  readonly id = 'kanban'\r\n  readonly name = 'Kanban Board'\r\n  readonly version = '1.0.0'\r\n  readonly description = ''\r\n  readonly icon = ''\r\n  readonly supportedExports: ExportFormat[] = ['json', 'csv', 'pdf', 'png']\r\n\r\n  private root: Root | null = null\r\n  private kanbanConfig: KanbanViewConfig\r\n\r\n  constructor(config: KanbanViewConfig = {}) {\r\n    super()\r\n\r\n    // Set description and icon after construction\r\n    ;(this as any).description = 'Interactive Kanban board with drag & drop, filters, and real-time updates'\r\n    ;(this as any).icon = ''\r\n\r\n    this.kanbanConfig = config\r\n    this.options = {\r\n      animations: config.viewOptions?.animations ?? true,\r\n      virtualScrolling: config.viewOptions?.virtualScrolling ?? false,\r\n      theme: config.viewOptions?.theme ?? 'dark',\r\n      readonly: config.viewOptions?.readonly ?? false,\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // LIFECYCLE\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Mount the Kanban view\r\n   *\r\n   * @param container - DOM element to mount into\r\n   * @param data - Initial board data\r\n   */\r\n  mount(container: HTMLElement, data: ViewBoardData): void {\r\n    if (this.isMounted()) {\r\n      console.warn('[KanbanViewAdapter] Already mounted, unmounting first')\r\n      this.unmount()\r\n    }\r\n\r\n    // Store references\r\n    this.container = container\r\n    this.data = data\r\n\r\n    // Create React root\r\n    this.root = createRoot(container)\r\n\r\n    // Render Kanban board\r\n    this.render()\r\n\r\n    // Emit mounted event\r\n    this.emit('view:mounted', { viewId: this.id, timestamp: Date.now() })\r\n  }\r\n\r\n  /**\r\n   * Unmount the Kanban view\r\n   */\r\n  unmount(): void {\r\n    if (!this.isMounted()) {\r\n      return\r\n    }\r\n\r\n    // Emit unmounted event BEFORE cleanup\r\n    this.emit('view:unmounted', { viewId: this.id, timestamp: Date.now() })\r\n\r\n    // Unmount React\r\n    if (this.root) {\r\n      this.root.unmount()\r\n      this.root = null\r\n    }\r\n\r\n    // Clear references\r\n    if (this.container) {\r\n      this.container.innerHTML = ''\r\n      this.container = null\r\n    }\r\n\r\n    this.data = null\r\n  }\r\n\r\n  /**\r\n   * Update the view with new data\r\n   *\r\n   * @param data - New board data\r\n   */\r\n  update(data: ViewBoardData): void {\r\n    if (!this.isMounted()) {\r\n      console.warn('[KanbanViewAdapter] Not mounted, cannot update')\r\n      return\r\n    }\r\n\r\n    this.data = data\r\n    this.render()\r\n\r\n    this.emit('view:updated', { viewId: this.id, data })\r\n  }\r\n\r\n  /**\r\n   * Configure the view\r\n   *\r\n   * @param options - View options\r\n   */\r\n  configure(options: ViewOptions): void {\r\n    this.options = { ...this.options, ...options }\r\n\r\n    // Re-render if mounted\r\n    if (this.isMounted()) {\r\n      this.render()\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // EXPORT\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Export the view to a specific format\r\n   *\r\n   * @param format - Export format\r\n   * @returns Promise resolving to exported data\r\n   */\r\n  async export(format: 'json' | 'csv' | 'pdf' | 'png'): Promise<string | Blob> {\r\n    if (!this.data) {\r\n      throw new Error('No data to export')\r\n    }\r\n\r\n    switch (format) {\r\n      case 'json':\r\n        return JSON.stringify(this.data, null, 2)\r\n\r\n      case 'csv':\r\n        return this.exportToCSV()\r\n\r\n      case 'pdf':\r\n        return this.exportToPDF()\r\n\r\n      case 'png':\r\n        return this.exportToPNG()\r\n\r\n      default:\r\n        throw new Error(`Unsupported export format: ${format}`)\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // PRIVATE METHODS\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Render the Kanban board\r\n   */\r\n  private render(): void {\r\n    if (!this.root || !this.data) {\r\n      return\r\n    }\r\n\r\n    // Convert ViewBoardData to KanbanBoard props format\r\n    const board = {\r\n      id: this.data.board?.id || 'board-1',\r\n      title: this.data.board?.title || 'Untitled Board',\r\n      columns: this.data.columns,\r\n      cards: this.data.cards,\r\n    }\r\n\r\n    // Render React component\r\n    this.root.render(\r\n      <KanbanBoard\r\n        board={board}\r\n        callbacks={this.kanbanConfig.callbacks || {}}\r\n        onCardClick={this.kanbanConfig.onCardClick}\r\n        renderProps={this.kanbanConfig.renderProps}\r\n        config={this.kanbanConfig.config}\r\n        availableUsers={this.kanbanConfig.availableUsers}\r\n        className={this.kanbanConfig.className}\r\n        style={this.kanbanConfig.style}\r\n      />\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Export board data to CSV format\r\n   */\r\n  private exportToCSV(): string {\r\n    if (!this.data) return ''\r\n\r\n    const rows: string[][] = [\r\n      ['Card ID', 'Title', 'Column', 'Description', 'Labels', 'Assignees', 'Due Date', 'Position'],\r\n    ]\r\n\r\n    this.data.cards.forEach((card: Card) => {\r\n      const column = this.data!.columns.find((col: Column) => col.id === card.columnId)\r\n      rows.push([\r\n        card.id,\r\n        card.title,\r\n        column?.title || '',\r\n        card.description || '',\r\n        card.labels?.join(', ') || '',\r\n        card.assignedUserIds?.join(', ') || card.assigneeId || '',\r\n        card.dueDate?.toString() || '',\r\n        card.position.toString(),\r\n      ])\r\n    })\r\n\r\n    return rows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\r\n  }\r\n\r\n  /**\r\n   * Export board to PDF\r\n   * Uses the PDF export functionality from the Board component\r\n   */\r\n  private async exportToPDF(): Promise<Blob> {\r\n    // TODO: Integrate with PDF export from CardDetailModal/PDFExport\r\n    // For now, return a simple PDF placeholder\r\n    throw new Error('PDF export not yet implemented in ViewAdapter')\r\n  }\r\n\r\n  /**\r\n   * Export board to PNG image\r\n   * Uses html2canvas to capture the board\r\n   */\r\n  private async exportToPNG(): Promise<Blob> {\r\n    if (!this.container) {\r\n      throw new Error('View not mounted')\r\n    }\r\n\r\n    // Dynamic import to avoid bundling if not used\r\n    const html2canvas = await import('html2canvas')\r\n\r\n    const canvas = await html2canvas.default(this.container, {\r\n      backgroundColor: this.options.theme === 'dark' ? '#1a1a1a' : '#ffffff',\r\n      scale: 2, // Higher resolution\r\n    })\r\n\r\n    return new Promise((resolve, reject) => {\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          resolve(blob)\r\n        } else {\r\n          reject(new Error('Failed to create PNG blob'))\r\n        }\r\n      }, 'image/png')\r\n    })\r\n  }\r\n}\r\n\r\n// ========================================================================\r\n// FACTORY FUNCTION\r\n// ========================================================================\r\n\r\n/**\r\n * Create a new Kanban view adapter\r\n *\r\n * @param config - View configuration\r\n * @returns KanbanViewAdapter instance\r\n *\r\n * @example\r\n * ```typescript\r\n * const kanbanView = createKanbanView({\r\n *   callbacks: {\r\n *     onCardMove: (cardId, columnId) => console.log('Card moved'),\r\n *   },\r\n *   theme: 'dark',\r\n * })\r\n * ```\r\n */\r\nexport function createKanbanView(config: KanbanViewConfig = {}): KanbanViewAdapter {\r\n  return new KanbanViewAdapter(config)\r\n}\r\n","// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const canUseDOM =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined';\n","export type Transform = {\n  x: number;\n  y: number;\n  scaleX: number;\n  scaleY: number;\n};\n\nexport interface Transition {\n  property: string;\n  easing: string;\n  duration: number;\n}\n\nexport const CSS = Object.freeze({\n  Translate: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {x, y} = transform;\n\n      return `translate3d(${x ? Math.round(x) : 0}px, ${\n        y ? Math.round(y) : 0\n      }px, 0)`;\n    },\n  },\n  Scale: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {scaleX, scaleY} = transform;\n\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    },\n  },\n  Transform: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      return [\n        CSS.Translate.toString(transform),\n        CSS.Scale.toString(transform),\n      ].join(' ');\n    },\n  },\n  Transition: {\n    toString({property, duration, easing}: Transition) {\n      return `${property} ${duration}ms ${easing}`;\n    },\n  },\n});\n","/**\r\n * Class name utility (cn)\r\n * Combines clsx and tailwind-merge for optimal Tailwind class handling\r\n */\r\n\r\nimport { type ClassValue, clsx } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\n/**\r\n * Merge class names intelligently\r\n * Handles Tailwind class conflicts properly\r\n *\r\n * @example\r\n * cn('px-2 py-1', 'px-4') // => 'py-1 px-4'\r\n * cn('text-red-500', condition && 'text-blue-500') // => 'text-blue-500' if condition is true\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","/**\r\n * Lexicographic positioning utilities\r\n * Uses fractional indexing for efficient reordering without touching all items\r\n * @module utils/positioning\r\n */\r\n\r\n/**\r\n * Calculate position between two items\r\n * Uses lexicographic ordering (fractional indexing)\r\n *\r\n * @param before - Position of item before (or null if first)\r\n * @param after - Position of item after (or null if last)\r\n * @returns New position value\r\n *\r\n * @example\r\n * calculatePosition(null, 1000) // => 500 (before first item)\r\n * calculatePosition(1000, 2000) // => 1500 (between two items)\r\n * calculatePosition(1000, null) // => 2000 (after last item)\r\n */\r\nexport function calculatePosition(\r\n  before: number | null,\r\n  after: number | null\r\n): number {\r\n  // First item\r\n  if (before === null && after === null) {\r\n    return 1000\r\n  }\r\n\r\n  // Insert at beginning\r\n  if (before === null && after !== null) {\r\n    return after / 2\r\n  }\r\n\r\n  // Insert at end\r\n  if (before !== null && after === null) {\r\n    return before + 1000\r\n  }\r\n\r\n  // Insert between\r\n  if (before !== null && after !== null) {\r\n    return (before + after) / 2\r\n  }\r\n\r\n  return 1000\r\n}\r\n\r\n/**\r\n * Generate initial positions for an array of items\r\n * Spaces them 1000 apart for room to insert\r\n *\r\n * @param count - Number of items\r\n * @returns Array of position values\r\n */\r\nexport function generateInitialPositions(count: number): number[] {\r\n  return Array.from({ length: count }, (_, i) => (i + 1) * 1000)\r\n}\r\n\r\n/**\r\n * Rebalance positions when they get too close\r\n * Call this periodically to maintain clean spacing\r\n *\r\n * @param positions - Current positions (sorted)\r\n * @returns Rebalanced positions\r\n */\r\nexport function rebalancePositions(positions: number[]): number[] {\r\n  if (positions.length === 0) return []\r\n  if (positions.length === 1) return [1000]\r\n\r\n  const sorted = [...positions].sort((a, b) => a - b)\r\n  return sorted.map((_, i) => (i + 1) * 1000)\r\n}\r\n\r\n/**\r\n * Check if positions need rebalancing\r\n * Returns true if any two positions are < 1 apart\r\n */\r\nexport function needsRebalancing(positions: number[]): boolean {\r\n  const sorted = [...positions].sort((a, b) => a - b)\r\n\r\n  for (let i = 0; i < sorted.length - 1; i++) {\r\n    if (sorted[i + 1]! - sorted[i]! < 1) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Find position for dropping a card\r\n *\r\n * @param columnCards - Cards in target column (sorted by position)\r\n * @param dropIndex - Index where card is dropped\r\n * @returns New position value\r\n */\r\nexport function calculateDropPosition(\r\n  columnCards: { position: number }[],\r\n  dropIndex: number\r\n): number {\r\n  // Empty column\r\n  if (columnCards.length === 0) {\r\n    return 1000\r\n  }\r\n\r\n  // Drop at beginning\r\n  if (dropIndex === 0) {\r\n    return calculatePosition(null, columnCards[0]!.position)\r\n  }\r\n\r\n  // Drop at end\r\n  if (dropIndex >= columnCards.length) {\r\n    return calculatePosition(\r\n      columnCards[columnCards.length - 1]!.position,\r\n      null\r\n    )\r\n  }\r\n\r\n  // Drop between items\r\n  return calculatePosition(\r\n    columnCards[dropIndex - 1]!.position,\r\n    columnCards[dropIndex]!.position\r\n  )\r\n}\r\n","/**\r\n * Performance utilities\r\n * @module utils/performance\r\n */\r\n\r\nimport { useEffect, useRef } from 'react'\r\n\r\n/**\r\n * Debounce function calls\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null\r\n\r\n  return function executedFunction(...args: Parameters<T>) {\r\n    const later = () => {\r\n      timeout = null\r\n      func(...args)\r\n    }\r\n\r\n    if (timeout) {\r\n      clearTimeout(timeout)\r\n    }\r\n    timeout = setTimeout(later, wait)\r\n  }\r\n}\r\n\r\n/**\r\n * Throttle function calls\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean\r\n  let lastResult: ReturnType<T>\r\n\r\n  return function executedFunction(...args: Parameters<T>) {\r\n    if (!inThrottle) {\r\n      inThrottle = true\r\n      setTimeout(() => (inThrottle = false), limit)\r\n      lastResult = func(...args)\r\n    }\r\n    return lastResult\r\n  }\r\n}\r\n\r\n/**\r\n * Custom hook for measuring render performance\r\n * Only active in development\r\n */\r\nexport function useRenderPerformance(componentName: string) {\r\n  const renderCount = useRef(0)\r\n  const lastRenderTime = useRef<number>(0)\r\n\r\n  if (process.env.NODE_ENV === 'development') {\r\n    const start = performance.now()\r\n\r\n    useEffect(() => {\r\n      const end = performance.now()\r\n      renderCount.current++\r\n      const renderTime = end - start\r\n\r\n      if (renderTime > 16) {\r\n        // > 1 frame at 60fps\r\n        console.warn(\r\n          `[Performance] ${componentName} render #${renderCount.current} took ${renderTime.toFixed(2)}ms`\r\n        )\r\n      }\r\n\r\n      lastRenderTime.current = renderTime\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * Check if virtualization should be enabled\r\n */\r\nexport function shouldVirtualize(itemCount: number, threshold = 100): boolean {\r\n  return itemCount > threshold\r\n}\r\n\r\n/**\r\n * Request idle callback wrapper with fallback\r\n */\r\nexport const requestIdleCallback =\r\n  typeof window !== 'undefined' && 'requestIdleCallback' in window\r\n    ? window.requestIdleCallback\r\n    : (cb: IdleRequestCallback) => setTimeout(cb, 1)\r\n\r\n/**\r\n * Cancel idle callback wrapper with fallback\r\n */\r\nexport const cancelIdleCallback =\r\n  typeof window !== 'undefined' && 'cancelIdleCallback' in window\r\n    ? window.cancelIdleCallback\r\n    : (id: number) => clearTimeout(id)\r\n\r\n/**\r\n * Memoization helper for expensive computations\r\n */\r\nexport function memoize<T extends (...args: any[]) => any>(fn: T): T {\r\n  const cache = new Map<string, ReturnType<T>>()\r\n\r\n  return ((...args: Parameters<T>) => {\r\n    const key = JSON.stringify(args)\r\n    if (cache.has(key)) {\r\n      return cache.get(key)!\r\n    }\r\n    const result = fn(...args)\r\n    cache.set(key, result)\r\n    return result\r\n  }) as T\r\n}\r\n","/**\r\n * Retry utilities with exponential backoff\r\n * For resilient API calls and persistence operations\r\n * @module utils/retry\r\n */\r\n\r\nexport interface RetryOptions {\r\n  /** Maximum number of retry attempts (default: 3) */\r\n  maxAttempts?: number\r\n  /** Initial delay in ms (default: 1000) */\r\n  initialDelay?: number\r\n  /** Multiplier for exponential backoff (default: 2) */\r\n  backoffMultiplier?: number\r\n  /** Maximum delay in ms (default: 10000) */\r\n  maxDelay?: number\r\n  /** Function to determine if error should be retried */\r\n  shouldRetry?: (error: Error, attempt: number) => boolean\r\n  /** Callback when retry is attempted */\r\n  onRetry?: (error: Error, attempt: number, delay: number) => void\r\n}\r\n\r\nexport interface RetryResult<T> {\r\n  data?: T\r\n  error?: Error\r\n  attempts: number\r\n  success: boolean\r\n}\r\n\r\n/**\r\n * Default retry logic - retries on network errors\r\n */\r\nconst defaultShouldRetry = (error: Error): boolean => {\r\n  // Retry on network errors\r\n  if (error.message.includes('network') || error.message.includes('fetch')) {\r\n    return true\r\n  }\r\n\r\n  // Retry on specific error codes\r\n  if ('status' in error) {\r\n    const status = (error as any).status\r\n    // Retry on server errors (5xx) and rate limiting (429)\r\n    return status >= 500 || status === 429\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Calculate delay with exponential backoff\r\n */\r\nfunction calculateDelay(\r\n  attempt: number,\r\n  initialDelay: number,\r\n  backoffMultiplier: number,\r\n  maxDelay: number\r\n): number {\r\n  const delay = initialDelay * Math.pow(backoffMultiplier, attempt - 1)\r\n  // Add jitter (random variation) to prevent thundering herd\r\n  const jitter = delay * 0.2 * Math.random()\r\n  return Math.min(delay + jitter, maxDelay)\r\n}\r\n\r\n/**\r\n * Retry a function with exponential backoff\r\n *\r\n * @example\r\n * ```ts\r\n * const result = await retryWithBackoff(\r\n *   () => api.updateBoard(board),\r\n *   {\r\n *     maxAttempts: 3,\r\n *     onRetry: (error, attempt) => {\r\n *       console.log(`Retry attempt ${attempt}: ${error.message}`)\r\n *     }\r\n *   }\r\n * )\r\n * ```\r\n */\r\nexport async function retryWithBackoff<T>(\r\n  fn: () => Promise<T>,\r\n  options: RetryOptions = {}\r\n): Promise<RetryResult<T>> {\r\n  const {\r\n    maxAttempts = 3,\r\n    initialDelay = 1000,\r\n    backoffMultiplier = 2,\r\n    maxDelay = 10000,\r\n    shouldRetry = defaultShouldRetry,\r\n    onRetry,\r\n  } = options\r\n\r\n  let lastError: Error | undefined\r\n  let attempts = 0\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    attempts = attempt\r\n\r\n    try {\r\n      const data = await fn()\r\n      return {\r\n        data,\r\n        attempts,\r\n        success: true,\r\n      }\r\n    } catch (error) {\r\n      lastError = error as Error\r\n\r\n      // Check if we should retry\r\n      const isLastAttempt = attempt === maxAttempts\r\n      if (isLastAttempt || !shouldRetry(lastError, attempt)) {\r\n        return {\r\n          error: lastError,\r\n          attempts,\r\n          success: false,\r\n        }\r\n      }\r\n\r\n      // Calculate delay for next attempt\r\n      const delay = calculateDelay(attempt, initialDelay, backoffMultiplier, maxDelay)\r\n\r\n      // Call retry callback\r\n      if (onRetry) {\r\n        try {\r\n          onRetry(lastError, attempt, delay)\r\n        } catch (callbackError) {\r\n          console.error('Error in retry callback:', callbackError)\r\n        }\r\n      }\r\n\r\n      // Wait before retrying\r\n      await new Promise((resolve) => setTimeout(resolve, delay))\r\n    }\r\n  }\r\n\r\n  // This should never be reached, but TypeScript doesn't know that\r\n  return {\r\n    error: lastError || new Error('Unknown error'),\r\n    attempts,\r\n    success: false,\r\n  }\r\n}\r\n\r\n/**\r\n * Retry a function synchronously (for non-async operations)\r\n * No backoff, just immediate retries\r\n */\r\nexport function retrySyncOperation<T>(\r\n  fn: () => T,\r\n  maxAttempts: number = 3\r\n): { data?: T; error?: Error; success: boolean } {\r\n  let lastError: Error | undefined\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    try {\r\n      const data = fn()\r\n      return { data, success: true }\r\n    } catch (error) {\r\n      lastError = error as Error\r\n\r\n      if (attempt === maxAttempts) {\r\n        return { error: lastError, success: false }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { error: lastError || new Error('Unknown error'), success: false }\r\n}\r\n\r\n/**\r\n * Create a retry wrapper function\r\n * Returns a function that automatically retries on failure\r\n *\r\n * @example\r\n * ```ts\r\n * const saveBoard = createRetryWrapper(\r\n *   api.saveBoard,\r\n *   { maxAttempts: 3 }\r\n * )\r\n *\r\n * const result = await saveBoard(boardData)\r\n * ```\r\n */\r\nexport function createRetryWrapper<TArgs extends any[], TReturn>(\r\n  fn: (...args: TArgs) => Promise<TReturn>,\r\n  options: RetryOptions = {}\r\n): (...args: TArgs) => Promise<RetryResult<TReturn>> {\r\n  return async (...args: TArgs) => {\r\n    return retryWithBackoff(() => fn(...args), options)\r\n  }\r\n}\r\n\r\n/**\r\n * Retry with circuit breaker pattern\r\n * Stops retrying if too many failures occur\r\n */\r\nexport class CircuitBreaker {\r\n  private failures: number = 0\r\n  private lastFailureTime: number = 0\r\n  private isOpen: boolean = false\r\n\r\n  constructor(\r\n    private threshold: number = 5,\r\n    private resetTimeout: number = 60000 // 1 minute\r\n  ) {}\r\n\r\n  async execute<T>(fn: () => Promise<T>): Promise<T> {\r\n    // Check if circuit is open\r\n    if (this.isOpen) {\r\n      const timeSinceLastFailure = Date.now() - this.lastFailureTime\r\n\r\n      // Try to close circuit after reset timeout\r\n      if (timeSinceLastFailure >= this.resetTimeout) {\r\n        this.reset()\r\n      } else {\r\n        throw new Error('Circuit breaker is open - too many failures')\r\n      }\r\n    }\r\n\r\n    try {\r\n      const result = await fn()\r\n      this.onSuccess()\r\n      return result\r\n    } catch (error) {\r\n      this.onFailure()\r\n      throw error\r\n    }\r\n  }\r\n\r\n  private onSuccess(): void {\r\n    this.failures = 0\r\n    this.isOpen = false\r\n  }\r\n\r\n  private onFailure(): void {\r\n    this.failures++\r\n    this.lastFailureTime = Date.now()\r\n\r\n    if (this.failures >= this.threshold) {\r\n      this.isOpen = true\r\n    }\r\n  }\r\n\r\n  private reset(): void {\r\n    this.failures = 0\r\n    this.isOpen = false\r\n  }\r\n\r\n  getStatus(): { failures: number; isOpen: boolean } {\r\n    return {\r\n      failures: this.failures,\r\n      isOpen: this.isOpen,\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Structured Logger for ASAKAA\r\n * Lightweight, browser-compatible logging system\r\n * @module utils/logger\r\n */\r\n\r\nexport enum LogLevel {\r\n  DEBUG = 0,\r\n  INFO = 1,\r\n  WARN = 2,\r\n  ERROR = 3,\r\n  NONE = 4,\r\n}\r\n\r\nexport interface LogContext {\r\n  [key: string]: any\r\n}\r\n\r\nexport interface LogEntry {\r\n  timestamp: string\r\n  level: string\r\n  message: string\r\n  context?: LogContext\r\n  component?: string\r\n  action?: string\r\n  duration?: number\r\n  error?: {\r\n    message: string\r\n    stack?: string\r\n    name: string\r\n  }\r\n}\r\n\r\nexport interface LoggerOptions {\r\n  /** Minimum log level (default: INFO in production, DEBUG in development) */\r\n  minLevel?: LogLevel\r\n  /** Enable/disable logging (default: true) */\r\n  enabled?: boolean\r\n  /** Custom log handler for sending logs to external service */\r\n  onLog?: (entry: LogEntry) => void\r\n  /** Enable performance timing (default: true) */\r\n  enableTiming?: boolean\r\n  /** Component name prefix */\r\n  componentName?: string\r\n}\r\n\r\n/**\r\n * Structured Logger Class\r\n *\r\n * @example\r\n * ```ts\r\n * const logger = new Logger({ componentName: 'KanbanBoard' })\r\n *\r\n * logger.info('Board loaded', { boardId: 'abc-123', cardCount: 42 })\r\n * logger.warn('Slow operation detected', { duration: 1500 })\r\n * logger.error('Failed to save', { error: err })\r\n *\r\n * // With timing\r\n * const timer = logger.startTimer('drag-operation')\r\n * // ... do work\r\n * timer.end({ cardId: 'card-1' })\r\n * ```\r\n */\r\nexport class Logger {\r\n  private options: Required<LoggerOptions>\r\n  private static globalOptions: Partial<LoggerOptions> = {}\r\n\r\n  constructor(options: LoggerOptions = {}) {\r\n    const isDev = process.env.NODE_ENV === 'development'\r\n\r\n    this.options = {\r\n      minLevel: options.minLevel ?? (isDev ? LogLevel.DEBUG : LogLevel.INFO),\r\n      enabled: options.enabled ?? true,\r\n      onLog: options.onLog ?? this.defaultLogHandler,\r\n      enableTiming: options.enableTiming ?? true,\r\n      componentName: options.componentName ?? 'ASAKAA',\r\n      ...Logger.globalOptions,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set global logger configuration\r\n   * Applies to all logger instances\r\n   */\r\n  static configure(options: Partial<LoggerOptions>): void {\r\n    Logger.globalOptions = { ...Logger.globalOptions, ...options }\r\n  }\r\n\r\n  /**\r\n   * Create child logger with component name\r\n   */\r\n  child(componentName: string): Logger {\r\n    return new Logger({\r\n      ...this.options,\r\n      componentName: `${this.options.componentName}:${componentName}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Log debug message\r\n   */\r\n  debug(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.DEBUG, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log info message\r\n   */\r\n  info(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.INFO, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log warning message\r\n   */\r\n  warn(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.WARN, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log error message\r\n   */\r\n  error(message: string, error?: Error, context?: LogContext): void {\r\n    this.log(LogLevel.ERROR, message, {\r\n      ...context,\r\n      error: error\r\n        ? {\r\n            message: error.message,\r\n            stack: error.stack,\r\n            name: error.name,\r\n          }\r\n        : undefined,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Start a timer for performance tracking\r\n   */\r\n  startTimer(action: string): Timer {\r\n    if (!this.options.enableTiming) {\r\n      return new Timer(() => {}, false)\r\n    }\r\n\r\n    return new Timer(\r\n      (duration: number, context?: LogContext) => {\r\n        this.log(LogLevel.DEBUG, `${action} completed`, {\r\n          ...context,\r\n          action,\r\n          duration,\r\n        })\r\n      },\r\n      true\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Core logging method\r\n   */\r\n  private log(level: LogLevel, message: string, context?: LogContext): void {\r\n    if (!this.options.enabled || level < this.options.minLevel) {\r\n      return\r\n    }\r\n\r\n    const entry: LogEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      level: LogLevel[level],\r\n      message,\r\n      component: this.options.componentName,\r\n      ...context,\r\n    }\r\n\r\n    this.options.onLog(entry)\r\n  }\r\n\r\n  /**\r\n   * Default log handler (console)\r\n   */\r\n  private defaultLogHandler = (entry: LogEntry): void => {\r\n    const { timestamp, level, message, component, ...rest } = entry\r\n\r\n    const prefix = `[${timestamp}] [${level}] [${component}]`\r\n    const hasContext = Object.keys(rest).length > 0\r\n\r\n    switch (level) {\r\n      case 'DEBUG':\r\n        console.debug(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'INFO':\r\n        console.info(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'WARN':\r\n        console.warn(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'ERROR':\r\n        console.error(prefix, message, hasContext ? rest : '')\r\n        if (entry.error?.stack) {\r\n          console.error(entry.error.stack)\r\n        }\r\n        break\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Timer for performance tracking\r\n */\r\nclass Timer {\r\n  private startTime: number\r\n\r\n  constructor(\r\n    private onEnd: (duration: number, context?: LogContext) => void,\r\n    private enabled: boolean\r\n  ) {\r\n    this.startTime = enabled ? performance.now() : 0\r\n  }\r\n\r\n  /**\r\n   * End timer and log duration\r\n   */\r\n  end(context?: LogContext): number {\r\n    if (!this.enabled) {\r\n      return 0\r\n    }\r\n\r\n    const duration = Math.round(performance.now() - this.startTime)\r\n    this.onEnd(duration, context)\r\n    return duration\r\n  }\r\n\r\n  /**\r\n   * Get elapsed time without ending timer\r\n   */\r\n  elapsed(): number {\r\n    if (!this.enabled) {\r\n      return 0\r\n    }\r\n    return Math.round(performance.now() - this.startTime)\r\n  }\r\n}\r\n\r\n/**\r\n * Global logger instance\r\n */\r\nexport const logger = new Logger()\r\n\r\n/**\r\n * Create a scoped logger for a component\r\n */\r\nexport function createLogger(componentName: string, options?: LoggerOptions): Logger {\r\n  return new Logger({\r\n    ...options,\r\n    componentName,\r\n  })\r\n}\r\n","import { jsPDF } from 'jspdf'\r\nimport html2canvas from 'html2canvas'\r\nimport type { Board, ExportOptions, ExportFormat } from '../types'\r\n\r\nexport function exportToJSON(board: Board, _options?: ExportOptions): string {\r\n  const data = {\r\n    board: {\r\n      id: board.id,\r\n      title: board.title,\r\n      metadata: board.metadata,\r\n      exportedAt: new Date().toISOString(),\r\n    },\r\n    columns: board.columns,\r\n    cards: board.cards,\r\n    options: _options,\r\n  }\r\n\r\n  return JSON.stringify(data, null, 2)\r\n}\r\n\r\nexport function exportToCSV(board: Board, _options?: ExportOptions): string {\r\n  const headers = [\r\n    'Card ID',\r\n    'Title',\r\n    'Description',\r\n    'Column',\r\n    'Priority',\r\n    'Labels',\r\n    'Assigned Users',\r\n    'Start Date',\r\n    'End Date',\r\n    'Created At',\r\n    'Updated At',\r\n  ]\r\n\r\n  const rows = board.cards.map((card) => {\r\n    const column = board.columns.find((col) => col.id === card.columnId)\r\n\r\n    return [\r\n      card.id,\r\n      escapeCSV(card.title),\r\n      escapeCSV(card.description || ''),\r\n      escapeCSV(column?.title || ''),\r\n      card.priority || '',\r\n      (card.labels || []).join(';'),\r\n      (card.assignedUserIds || []).join(';'),\r\n      card.startDate || '',\r\n      card.endDate || '',\r\n      card.createdAt || '',\r\n      card.updatedAt || '',\r\n    ]\r\n  })\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...rows.map((row) => row.join(',')),\r\n  ].join('\\n')\r\n\r\n  return csvContent\r\n}\r\n\r\nexport async function exportToPDF(\r\n  board: Board,\r\n  boardElement?: HTMLElement,\r\n  _options?: ExportOptions\r\n): Promise<jsPDF> {\r\n  // Try to find board element automatically if not provided\r\n  let element = boardElement\r\n\r\n  if (!element) {\r\n    // Look for the board element in the DOM\r\n    const boardEl = document.querySelector<HTMLElement>('.asakaa-board')\r\n    if (boardEl) {\r\n      element = boardEl.parentElement || boardEl\r\n    }\r\n  }\r\n\r\n  // If board element is available, capture it visually\r\n  if (element) {\r\n    try {\r\n      const canvas = await html2canvas(element, {\r\n        backgroundColor: '#0a0a0a',\r\n        scale: 1.5, // Balance between quality and performance\r\n        logging: false,\r\n        useCORS: true,\r\n        allowTaint: true,\r\n        windowWidth: element.scrollWidth,\r\n        windowHeight: element.scrollHeight,\r\n      })\r\n\r\n      const imgData = canvas.toDataURL('image/png')\r\n\r\n      // Calculate dimensions for landscape PDF\r\n      const pdfWidth = 297 // A4 landscape width in mm\r\n      const pdfHeight = 210 // A4 landscape height in mm\r\n      const imgAspect = canvas.width / canvas.height\r\n\r\n      let imgWidth = pdfWidth - 20 // margins\r\n      let imgHeight = imgWidth / imgAspect\r\n\r\n      // If image is too tall, scale to fit height\r\n      if (imgHeight > pdfHeight - 20) {\r\n        imgHeight = pdfHeight - 20\r\n        imgWidth = imgHeight * imgAspect\r\n      }\r\n\r\n      const doc = new jsPDF({\r\n        orientation: 'landscape',\r\n        unit: 'mm',\r\n        format: 'a4',\r\n      })\r\n\r\n      // Add title\r\n      doc.setFontSize(16)\r\n      doc.setTextColor(255, 255, 255)\r\n      doc.setFillColor(10, 10, 10)\r\n      doc.rect(0, 0, pdfWidth, 15, 'F')\r\n      doc.text(board.title || 'Kanban Board', 10, 10)\r\n\r\n      // Add board image\r\n      const xOffset = (pdfWidth - imgWidth) / 2\r\n      doc.addImage(imgData, 'PNG', xOffset, 20, imgWidth, imgHeight)\r\n\r\n      return doc\r\n    } catch (error) {\r\n      console.error('Error capturing board:', error)\r\n      // Fall back to text-based export\r\n    }\r\n  }\r\n\r\n  // Fallback: Text-based PDF export\r\n  const doc = new jsPDF()\r\n  let yPosition = 20\r\n\r\n  doc.setFontSize(20)\r\n  doc.text(board.title || 'Kanban Board', 20, yPosition)\r\n  yPosition += 10\r\n\r\n  doc.setFontSize(10)\r\n  doc.setTextColor(128, 128, 128)\r\n  doc.text(`Exported on ${new Date().toLocaleString()}`, 20, yPosition)\r\n  yPosition += 15\r\n\r\n  doc.setTextColor(0, 0, 0)\r\n\r\n  board.columns.forEach((column) => {\r\n    const columnCards = board.cards.filter((card) => card.columnId === column.id)\r\n\r\n    if (yPosition > 250) {\r\n      doc.addPage()\r\n      yPosition = 20\r\n    }\r\n\r\n    doc.setFontSize(16)\r\n    doc.setFont('helvetica', 'bold')\r\n    doc.text(column.title, 20, yPosition)\r\n    yPosition += 8\r\n\r\n    if (columnCards.length === 0) {\r\n      doc.setFontSize(10)\r\n      doc.setFont('helvetica', 'italic')\r\n      doc.setTextColor(128, 128, 128)\r\n      doc.text('No cards in this column', 20, yPosition)\r\n      doc.setTextColor(0, 0, 0)\r\n      yPosition += 10\r\n    } else {\r\n      columnCards.forEach((card) => {\r\n        if (yPosition > 260) {\r\n          doc.addPage()\r\n          yPosition = 20\r\n        }\r\n\r\n        doc.setFontSize(12)\r\n        doc.setFont('helvetica', 'bold')\r\n        doc.text(card.title, 25, yPosition)\r\n        yPosition += 6\r\n\r\n        if (card.description) {\r\n          doc.setFontSize(9)\r\n          doc.setFont('helvetica', 'normal')\r\n          const lines = doc.splitTextToSize(card.description, 160)\r\n          doc.text(lines, 25, yPosition)\r\n          yPosition += lines.length * 5\r\n        }\r\n\r\n        const metadata: string[] = []\r\n        if (card.priority) metadata.push(`Priority: ${card.priority}`)\r\n        if (card.labels && card.labels.length > 0) {\r\n          metadata.push(`Labels: ${card.labels.join(', ')}`)\r\n        }\r\n        if (card.assignedUserIds && card.assignedUserIds.length > 0) {\r\n          metadata.push(`Assigned: ${card.assignedUserIds.length} user(s)`)\r\n        }\r\n        if (card.startDate || card.endDate) {\r\n          const dates = []\r\n          if (card.startDate) dates.push(`Start: ${card.startDate}`)\r\n          if (card.endDate) dates.push(`End: ${card.endDate}`)\r\n          metadata.push(dates.join('  '))\r\n        }\r\n\r\n        if (metadata.length > 0) {\r\n          doc.setFontSize(8)\r\n          doc.setTextColor(100, 100, 100)\r\n          doc.text(metadata.join('  '), 25, yPosition)\r\n          doc.setTextColor(0, 0, 0)\r\n          yPosition += 5\r\n        }\r\n\r\n        yPosition += 5\r\n      })\r\n    }\r\n\r\n    yPosition += 5\r\n  })\r\n\r\n  return doc\r\n}\r\n\r\nfunction escapeCSV(value: string): string {\r\n  if (value.includes(',') || value.includes('\"') || value.includes('\\n')) {\r\n    return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n  }\r\n  return value\r\n}\r\n\r\nexport async function exportBoard(\r\n  board: Board,\r\n  format: ExportFormat,\r\n  boardElement?: HTMLElement,\r\n  options?: ExportOptions\r\n): Promise<string | jsPDF> {\r\n  switch (format) {\r\n    case 'json':\r\n      return exportToJSON(board, options)\r\n    case 'csv':\r\n      return exportToCSV(board, options)\r\n    case 'pdf':\r\n      return await exportToPDF(board, boardElement, options)\r\n    default:\r\n      throw new Error(`Unsupported export format: ${format}`)\r\n  }\r\n}\r\n\r\nexport function downloadExport(\r\n  content: string | jsPDF,\r\n  format: ExportFormat,\r\n  filename?: string\r\n): void {\r\n  const defaultFilename = `board-export-${new Date().getTime()}`\r\n\r\n  // Check if content is a jsPDF object by checking for the save method\r\n  if (format === 'pdf' && typeof content === 'object' && content !== null && 'save' in content) {\r\n    const finalFilename = filename || `${defaultFilename}.pdf`\r\n    ;(content as jsPDF).save(finalFilename)\r\n    return\r\n  }\r\n\r\n  if (typeof content !== 'string') {\r\n    throw new Error('Invalid content type for non-PDF export')\r\n  }\r\n\r\n  const extensions: Record<ExportFormat, string> = {\r\n    json: 'json',\r\n    csv: 'csv',\r\n    pdf: 'pdf',\r\n  }\r\n\r\n  const finalFilename = filename || `${defaultFilename}.${extensions[format]}`\r\n\r\n  const mimeTypes: Record<ExportFormat, string> = {\r\n    json: 'application/json',\r\n    csv: 'text/csv',\r\n    pdf: 'application/pdf',\r\n  }\r\n\r\n  const blob = new Blob([content], { type: mimeTypes[format] })\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = finalFilename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n","/**\r\n * Import utility functions\r\n * @module utils/import\r\n */\r\n\r\nimport type { Board, Card, Column, ImportResult } from '../types'\r\n\r\n/**\r\n * Import board from JSON format\r\n */\r\nexport function importFromJSON(jsonString: string): ImportResult {\r\n  try {\r\n    const data = JSON.parse(jsonString)\r\n\r\n    if (!data.board || !data.columns || !data.cards) {\r\n      return {\r\n        success: false,\r\n        errors: ['Invalid JSON format: missing required fields (board, columns, cards)'],\r\n      }\r\n    }\r\n\r\n    const board: Board = {\r\n      id: data.board.id,\r\n      title: data.board.title,\r\n      columns: data.columns,\r\n      cards: data.cards,\r\n      metadata: data.board.metadata,\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      cardsImported: board.cards.length,\r\n      columnsImported: board.columns.length,\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      errors: [`Failed to parse JSON: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Import board from CSV format\r\n */\r\nexport function importFromCSV(csvString: string): ImportResult {\r\n  try {\r\n    const lines = csvString.trim().split('\\n')\r\n\r\n    if (lines.length < 1 || !lines[0]) {\r\n      return {\r\n        success: false,\r\n        errors: ['CSV file is empty or invalid'],\r\n      }\r\n    }\r\n\r\n    const headers = parseCSVLine(lines[0])\r\n    const cards: Card[] = []\r\n    const columnsMap = new Map<string, Column>()\r\n    const errors: string[] = []\r\n\r\n    for (let i = 1; i < lines.length; i++) {\r\n      try {\r\n        const values = parseCSVLine(lines[i] || '')\r\n\r\n        if (values.length > headers.length) {\r\n          errors.push(`Line ${i + 1}: Too many columns`)\r\n          continue\r\n        }\r\n\r\n        // If missing more than 3 columns, likely a malformed row\r\n        const missingColumns = headers.length - values.length\r\n        if (missingColumns > 3) {\r\n          errors.push(`Line ${i + 1}: Column count mismatch (expected ${headers.length}, got ${values.length})`)\r\n          continue\r\n        }\r\n\r\n        // Pad trailing empty columns\r\n        while (values.length < headers.length) {\r\n          values.push('')\r\n        }\r\n\r\n        const cardData: Record<string, string> = {}\r\n        headers.forEach((header, index) => {\r\n          cardData[header] = values[index] || ''\r\n        })\r\n\r\n        // Create column if it doesn't exist\r\n        const columnTitle = cardData['Column'] || 'Unnamed'\r\n        if (!columnsMap.has(columnTitle)) {\r\n          columnsMap.set(columnTitle, {\r\n            id: `col-${columnsMap.size + 1}`,\r\n            title: columnTitle,\r\n            position: columnsMap.size + 1,\r\n            cardIds: [],\r\n          })\r\n        }\r\n\r\n        const column = columnsMap.get(columnTitle)!\r\n\r\n        const card: Card = {\r\n          id: cardData['Card ID'] || `card-${i}`,\r\n          title: cardData['Title'] || 'Untitled',\r\n          description: cardData['Description'] ? cardData['Description'] : undefined,\r\n          columnId: column.id,\r\n          position: column.cardIds.length + 1,\r\n          priority: (cardData['Priority'] as any) || undefined,\r\n          labels: cardData['Labels'] ? cardData['Labels'].split(';').filter(Boolean) : undefined,\r\n          assignedUserIds: cardData['Assigned Users']\r\n            ? cardData['Assigned Users'].split(';').filter(Boolean)\r\n            : undefined,\r\n          startDate: cardData['Start Date'] ? (cardData['Start Date'] as any) : undefined,\r\n          endDate: cardData['End Date'] ? (cardData['End Date'] as any) : undefined,\r\n          createdAt: cardData['Created At'] ? (cardData['Created At'] as any) : undefined,\r\n          updatedAt: cardData['Updated At'] ? (cardData['Updated At'] as any) : undefined,\r\n        }\r\n\r\n        cards.push(card)\r\n        column.cardIds.push(card.id)\r\n      } catch (error) {\r\n        errors.push(\r\n          `Line ${i + 1}: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n        )\r\n      }\r\n    }\r\n\r\n    if (cards.length === 0) {\r\n      return {\r\n        success: false,\r\n        errors: ['No valid cards found in CSV', ...errors],\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      cardsImported: cards.length,\r\n      columnsImported: columnsMap.size,\r\n      errors: errors.length > 0 ? errors : undefined,\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      errors: [`Failed to parse CSV: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Parse a CSV line with proper quote handling\r\n */\r\nfunction parseCSVLine(line: string): string[] {\r\n  const result: string[] = []\r\n  let current = ''\r\n  let inQuotes = false\r\n\r\n  for (let i = 0; i < line.length; i++) {\r\n    const char = line[i]\r\n    const nextChar = line[i + 1]\r\n\r\n    if (char === '\"' && inQuotes && nextChar === '\"') {\r\n      current += '\"'\r\n      i++ // Skip next quote\r\n    } else if (char === '\"') {\r\n      inQuotes = !inQuotes\r\n    } else if (char === ',' && !inQuotes) {\r\n      result.push(current)\r\n      current = ''\r\n    } else {\r\n      current += char\r\n    }\r\n  }\r\n\r\n  result.push(current)\r\n  return result\r\n}\r\n\r\n/**\r\n * Main import function\r\n */\r\nexport function importBoard(content: string, format: 'json' | 'csv'): ImportResult {\r\n  switch (format) {\r\n    case 'json':\r\n      return importFromJSON(content)\r\n    case 'csv':\r\n      return importFromCSV(content)\r\n    default:\r\n      return {\r\n        success: false,\r\n        errors: [`Unsupported import format: ${format}`],\r\n      }\r\n  }\r\n}\r\n\r\n/**\r\n * Read file content\r\n */\r\nexport function readFile(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.onload = (event) => {\r\n      if (event.target?.result) {\r\n        resolve(event.target.result as string)\r\n      } else {\r\n        reject(new Error('Failed to read file'))\r\n      }\r\n    }\r\n    reader.onerror = () => reject(new Error('Failed to read file'))\r\n    reader.readAsText(file)\r\n  })\r\n}\r\n","/**\r\n * Gantt Theme Context\r\n * Provides derived theme to Portal components for consistent styling\r\n * @module components/Gantt/GanttThemeContext\r\n */\r\n\r\nimport { createContext, useContext } from 'react'\r\nimport type { GanttTheme } from './types'\r\n\r\nexport interface GanttThemeContextValue {\r\n  theme: GanttTheme\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport const GanttThemeContext = createContext<GanttThemeContextValue | null>(null)\r\n\r\n/**\r\n * Hook to access the Gantt theme context\r\n * Returns null if not within a GanttBoard\r\n */\r\nexport function useGanttTheme() {\r\n  return useContext(GanttThemeContext)\r\n}\r\n","/**\r\n * Kanban Theme Context\r\n * Provides theme information to Portal components within KanbanBoard\r\n */\r\n\r\nimport { createContext, useContext, type ReactNode } from 'react'\r\n\r\nexport interface KanbanThemeContextValue {\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport const KanbanThemeContext = createContext<KanbanThemeContextValue | null>(null)\r\n\r\nexport interface KanbanThemeProviderProps {\r\n  children: ReactNode\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport function KanbanThemeProvider({ children, themeName }: KanbanThemeProviderProps) {\r\n  return (\r\n    <KanbanThemeContext.Provider value={{ themeName }}>\r\n      {children}\r\n    </KanbanThemeContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useKanbanTheme(): KanbanThemeContextValue | null {\r\n  return useContext(KanbanThemeContext)\r\n}\r\n","/**\r\n * Portal Component\r\n * Renders children outside the parent DOM hierarchy\r\n * Solves z-index stacking context issues\r\n */\r\n\r\nimport { useEffect, useState, type ReactNode, type CSSProperties } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useGanttTheme } from '../Gantt/GanttThemeContext'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\n\r\nexport interface PortalProps {\r\n  children: ReactNode\r\n  /** Element to portal into (defaults to document.body) */\r\n  container?: HTMLElement\r\n}\r\n\r\n/**\r\n * Portal component that renders children at the root level\r\n * Perfect for modals, tooltips, dropdowns that need to escape stacking context\r\n * Automatically applies Gantt or Kanban theme when used within their respective boards\r\n */\r\nexport function Portal({ children, container }: PortalProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const ganttTheme = useGanttTheme()\r\n  const kanbanTheme = useKanbanTheme()\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    return () => setMounted(false)\r\n  }, [])\r\n\r\n  if (!mounted) {\r\n    return null\r\n  }\r\n\r\n  const target = container || (typeof document !== 'undefined' ? document.body : null)\r\n\r\n  if (!target) {\r\n    return null\r\n  }\r\n\r\n  // If we have a Gantt theme, wrap children in a themed container\r\n  if (ganttTheme) {\r\n    const { theme, themeName } = ganttTheme\r\n\r\n    // Generate CSS variables from the theme\r\n    const themeStyles: CSSProperties & Record<string, string> = {\r\n      // Background variables\r\n      '--asakaa-color-background-primary': theme.bgPrimary,\r\n      '--asakaa-color-background-secondary': theme.bgSecondary,\r\n      '--asakaa-color-background-card': theme.bgGrid,\r\n      '--asakaa-color-background-hover': theme.hoverBg,\r\n\r\n      // Text variables\r\n      '--asakaa-color-text-primary': theme.textPrimary,\r\n      '--asakaa-color-text-secondary': theme.textSecondary,\r\n      '--asakaa-color-text-tertiary': theme.textTertiary,\r\n      '--asakaa-color-text-inverse': theme.taskBarHandle || '#FFFFFF',\r\n\r\n      // Border variables\r\n      '--asakaa-color-border-default': theme.border,\r\n      '--asakaa-color-border-hover': theme.borderLight,\r\n      '--asakaa-color-border-subtle': theme.borderLight,\r\n\r\n      // Interactive variables\r\n      '--asakaa-color-interactive-primary': theme.accent,\r\n      '--asakaa-color-interactive-primaryHover': theme.accentHover,\r\n      '--asakaa-color-interactive-primaryBorder': `${theme.accent}4D`, // 30% opacity\r\n      '--asakaa-color-interactive-primaryBackground': `${theme.accent}1A`, // 10% opacity\r\n      '--asakaa-color-interactive-primaryBackgroundHover': `${theme.accent}33`, // 20% opacity\r\n\r\n      // Status colors\r\n      '--asakaa-color-status-success': theme.statusCompleted,\r\n      '--asakaa-color-status-warning': theme.milestone,\r\n      '--asakaa-color-status-error': theme.criticalPath,\r\n      '--asakaa-color-danger': theme.criticalPath,\r\n      '--asakaa-color-danger-border': `${theme.criticalPath}4D`,\r\n      '--asakaa-color-danger-background': `${theme.criticalPath}14`,\r\n      '--asakaa-color-danger-backgroundHover': `${theme.criticalPath}26`,\r\n    }\r\n\r\n    return createPortal(\r\n      <div\r\n        data-theme={themeName}\r\n        data-gantt-portal=\"true\"\r\n        style={themeStyles}\r\n      >\r\n        {children}\r\n      </div>,\r\n      target\r\n    )\r\n  }\r\n\r\n  // If we have a Kanban theme, wrap children with data-theme attribute\r\n  if (kanbanTheme) {\r\n    return createPortal(\r\n      <div\r\n        data-theme={kanbanTheme.themeName}\r\n        data-kanban-portal=\"true\"\r\n      >\r\n        {children}\r\n      </div>,\r\n      target\r\n    )\r\n  }\r\n\r\n  return createPortal(children, target)\r\n}\r\n","import { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { Priority } from '../../types'\r\n\r\nexport interface PrioritySelectorProps {\r\n  priority?: Priority\r\n  onChange: (priority?: Priority) => void\r\n  className?: string\r\n}\r\n\r\nconst PRIORITY_CONFIG = {\r\n  URGENT: { label: 'Urgent', color: '#E74C3C' },\r\n  HIGH: { label: 'High', color: '#E67E22' },\r\n  MEDIUM: { label: 'Normal', color: '#F1C40F' },\r\n  LOW: { label: 'Low', color: '#2ECC71' },\r\n} as const\r\n\r\nconst CLEAR_COLOR = '#BDC3C7'\r\n\r\nconst PriorityIcon = ({ color }: { color: string }) => (\r\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <circle cx=\"8\" cy=\"8\" r=\"6\" fill={color} opacity=\"0.9\" />\r\n    <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" opacity=\"0.3\" />\r\n  </svg>\r\n)\r\n\r\nexport function PrioritySelector({\r\n  priority,\r\n  onChange,\r\n  className,\r\n}: PrioritySelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') setIsOpen(false)\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (newPriority?: Priority) => {\r\n    onChange(newPriority)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const currentConfig = priority ? PRIORITY_CONFIG[priority] : null\r\n  const flagColor = currentConfig?.color || CLEAR_COLOR\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center justify-center w-8 h-8 rounded-lg transition-all hover:bg-white/15 hover:scale-110 active:scale-95\"\r\n        style={{\r\n          background: priority ? `${flagColor}10` : 'transparent',\r\n          boxShadow: priority ? `0 0 0 2px ${flagColor}30 inset` : 'none',\r\n        }}\r\n        title={currentConfig?.label || 'Set priority'}\r\n      >\r\n        <svg\r\n          width=\"20\"\r\n          height=\"20\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M3 2L3 14M3 2L13 6L3 8V2Z\"\r\n            stroke={flagColor}\r\n            strokeWidth=\"1.5\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            fill={flagColor}\r\n            fillOpacity={priority ? \"0.6\" : \"0.4\"}\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"priority-selector-menu\"\r\n            style={{\r\n              position: 'absolute',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              zIndex: 99999,\r\n              minWidth: '160px',\r\n              borderRadius: '8px',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n            }}\r\n          >\r\n          <div\r\n            className=\"px-3 py-1.5 border-b\"\r\n            style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n          >\r\n            <span\r\n              className=\"text-[10px] font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}\r\n            >\r\n              Priority\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {(Object.entries(PRIORITY_CONFIG) as [Priority, typeof PRIORITY_CONFIG[Priority]][]).map(\r\n              ([key, config]) => (\r\n                <button\r\n                  key={key}\r\n                  onClick={() => handleSelect(key)}\r\n                  className=\"w-full px-3 py-1.5 flex items-center gap-2 text-xs font-medium transition-all active:scale-[0.98] priority-option\"\r\n                  style={{\r\n                    color: config.color,\r\n                    background: 'transparent'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'transparent'\r\n                  }}\r\n                >\r\n                  <PriorityIcon color={config.color} />\r\n                  <span className=\"font-semibold text-sm\">{config.label}</span>\r\n                  {priority === key && (\r\n                    <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              )\r\n            )}\r\n\r\n            <div\r\n              className=\"mt-0.5 pt-0.5 border-t\"\r\n              style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n            >\r\n              <button\r\n                onClick={() => handleSelect(undefined)}\r\n                className=\"w-full px-3 py-1.5 flex items-center gap-2 text-xs font-medium transition-all active:scale-[0.98]\"\r\n                style={{\r\n                  color: 'var(--modal-v2-text-primary, #e5e5e5)',\r\n                  background: 'transparent'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                  <circle cx=\"8\" cy=\"8\" r=\"6\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeDasharray=\"2 2\" opacity=\"0.6\" />\r\n                </svg>\r\n                <span className=\"font-semibold text-sm\">Clear</span>\r\n                {!priority && (\r\n                  <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                    <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Date Range Picker Component\r\n * Quick selection buttons + interactive calendar\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\n\r\nexport interface DateRangePickerProps {\r\n  startDate?: string\r\n  endDate?: string\r\n  onChange: (startDate?: string, endDate?: string) => void\r\n  className?: string\r\n}\r\n\r\nconst QUICK_OPTIONS = [\r\n  { label: 'Today', days: 0 },\r\n  { label: 'Tomorrow', days: 1 },\r\n  { label: 'Next Week', days: 7 },\r\n  { label: '2 Weeks', days: 14 },\r\n  { label: '4 Weeks', days: 28 },\r\n  { label: '8 Weeks', days: 56 },\r\n]\r\n\r\nexport function DateRangePicker({\r\n  startDate,\r\n  endDate,\r\n  onChange,\r\n  className,\r\n}: DateRangePickerProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n  const kanbanTheme = useKanbanTheme()\r\n  const themeName = kanbanTheme?.themeName || 'dark'\r\n  // Only 'dark' theme uses dark colors, 'light' and 'neutral' use light colors\r\n  const isDark = themeName === 'dark'\r\n\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleQuickSelect = (days: number) => {\r\n    const now = new Date()\r\n\r\n    const formatLocalDate = (date: Date) => {\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    }\r\n\r\n    const todayStr = formatLocalDate(now)\r\n\r\n    const endDate = new Date(now)\r\n    endDate.setDate(endDate.getDate() + days)\r\n    const endStr = formatLocalDate(endDate)\r\n\r\n    onChange(todayStr, endStr)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const formatDateRange = () => {\r\n    if (!startDate || !endDate) return 'Set date'\r\n\r\n    const parseLocalDate = (dateStr: string | Date) => {\r\n      if (dateStr instanceof Date) return dateStr\r\n      if (typeof dateStr !== 'string' || !dateStr.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n        return null\r\n      }\r\n      const parts = dateStr.split('-').map(Number)\r\n      if (parts.length !== 3 || parts.some(p => isNaN(p))) {\r\n        return null\r\n      }\r\n      const year = parts[0]\r\n      const month = parts[1]\r\n      const day = parts[2]\r\n      if (year === undefined || month === undefined || day === undefined) {\r\n        return null\r\n      }\r\n      return new Date(year, month - 1, day)\r\n    }\r\n\r\n    const start = parseLocalDate(startDate)\r\n    const end = parseLocalDate(endDate)\r\n\r\n    if (!start || !end || isNaN(start.getTime()) || isNaN(end.getTime())) {\r\n      return 'Set date'\r\n    }\r\n\r\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n\r\n    return `${monthNames[start.getMonth()]} ${start.getDate()}  ${monthNames[end.getMonth()]} ${end.getDate()}`\r\n  }\r\n\r\n  const hasDateSet = startDate && endDate\r\n\r\n  const isOverdue = () => {\r\n    if (!endDate) return false\r\n    const end = typeof endDate === 'string' ? new Date(endDate) : endDate\r\n    const today = new Date()\r\n    today.setHours(0, 0, 0, 0)\r\n    return end < today\r\n  }\r\n\r\n  const overdue = isOverdue()\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className={`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs transition-all hover:bg-white/5 ${\r\n          overdue ? 'asakaa-date-overdue' : 'asakaa-date'\r\n        }`}\r\n        title={hasDateSet ? `${formatDateRange()}` : 'Set date range'}\r\n      >\r\n        <svg\r\n          width=\"14\"\r\n          height=\"14\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <rect\r\n            x=\"2\"\r\n            y=\"3\"\r\n            width=\"12\"\r\n            height=\"11\"\r\n            rx=\"2\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"1.5\"\r\n          />\r\n          <path d=\"M2 6H14\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\r\n          <path d=\"M5 2V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n          <path d=\"M11 2V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n        </svg>\r\n        {startDate && endDate && (\r\n          <span className=\"whitespace-nowrap\">{formatDateRange()}</span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"date-picker-menu absolute rounded-xl shadow-2xl border min-w-[320px]\"\r\n            style={{\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: isDark ? '#1A1D25' : '#FFFFFF',\r\n              border: `1px solid ${isDark ? 'rgba(255, 255, 255, 0.15)' : 'rgba(0, 0, 0, 0.12)'}`,\r\n              boxShadow: isDark\r\n                ? '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)'\r\n                : '0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.08)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n            <div className=\"p-4 border-b\" style={{ borderColor: isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.08)' }}>\r\n              <span\r\n                className=\"text-xs font-bold uppercase tracking-wider block mb-3\"\r\n                style={{ color: isDark ? 'rgba(255, 255, 255, 0.85)' : 'rgba(0, 0, 0, 0.7)' }}\r\n              >\r\n                Quick Select\r\n              </span>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {QUICK_OPTIONS.map((option) => (\r\n                  <button\r\n                    key={option.label}\r\n                    onClick={() => handleQuickSelect(option.days)}\r\n                    className=\"px-3 py-2.5 rounded-lg text-xs font-semibold transition-all active:scale-95\"\r\n                    style={{\r\n                      color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                      border: `1px solid ${isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)'}`,\r\n                      backgroundColor: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)'\r\n                      e.currentTarget.style.border = `1px solid ${isDark ? 'rgba(255, 255, 255, 0.4)' : 'rgba(0, 0, 0, 0.25)'}`\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)'\r\n                      e.currentTarget.style.border = `1px solid ${isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)'}`\r\n                    }}\r\n                  >\r\n                    {option.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-4\">\r\n              <span\r\n                className=\"text-xs font-bold uppercase tracking-wider block mb-3\"\r\n                style={{ color: isDark ? 'rgba(255, 255, 255, 0.85)' : 'rgba(0, 0, 0, 0.7)' }}\r\n              >\r\n                Custom Range\r\n              </span>\r\n              <div className=\"space-y-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate || ''}\r\n                  onChange={(e) => onChange(e.target.value, endDate)}\r\n                  className=\"w-full px-3 py-2.5 rounded-lg text-sm border focus:outline-none transition-all\"\r\n                  style={{\r\n                    background: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    borderColor: isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)',\r\n                    color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                    colorScheme: isDark ? 'dark' : 'light',\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate || ''}\r\n                  onChange={(e) => onChange(startDate, e.target.value)}\r\n                  className=\"w-full px-3 py-2.5 rounded-lg text-sm border focus:outline-none transition-all\"\r\n                  style={{\r\n                    background: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    borderColor: isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)',\r\n                    color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                    colorScheme: isDark ? 'dark' : 'light',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {(startDate || endDate) && (\r\n                <button\r\n                  onClick={() => {\r\n                    onChange(undefined, undefined)\r\n                    setIsOpen(false)\r\n                  }}\r\n                  className=\"mt-4 w-full px-3 py-2.5 rounded-lg text-sm font-semibold transition-all active:scale-95 border\"\r\n                  style={{\r\n                    color: '#ef4444',\r\n                    borderColor: 'rgba(239, 68, 68, 0.3)',\r\n                    background: 'rgba(239, 68, 68, 0.1)',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(239, 68, 68, 0.1)'\r\n                  }}\r\n                >\r\n                  Clear Dates\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * User Assignment Selector Component\r\n * Multi-select user assignment with avatar display\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface User {\r\n  id: string\r\n  name: string\r\n  avatar?: string\r\n  initials: string\r\n  color: string\r\n}\r\n\r\nexport interface UserAssignmentSelectorProps {\r\n  assignedUsers?: User[]\r\n  availableUsers: User[]\r\n  onChange: (users: User[]) => void\r\n  className?: string\r\n  maxVisibleAvatars?: number\r\n}\r\n\r\nexport function UserAssignmentSelector({\r\n  assignedUsers = [],\r\n  availableUsers,\r\n  onChange,\r\n  className,\r\n  maxVisibleAvatars = 3,\r\n}: UserAssignmentSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleToggleUser = (user: User) => {\r\n    const isAssigned = assignedUsers.some((u) => u.id === user.id)\r\n\r\n    if (isAssigned) {\r\n      onChange(assignedUsers.filter((u) => u.id !== user.id))\r\n    } else {\r\n      onChange([...assignedUsers, user])\r\n    }\r\n  }\r\n\r\n  const filteredUsers = availableUsers.filter((user) =>\r\n    user.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  )\r\n\r\n  const visibleUsers = assignedUsers.slice(0, maxVisibleAvatars)\r\n  const overflowCount = assignedUsers.length - maxVisibleAvatars\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Avatar display or add button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-1 p-0.5 rounded transition-all hover:bg-white/10 hover:scale-105 active:scale-95\"\r\n        title={assignedUsers.length > 0 ? `${assignedUsers.length} assigned` : 'Assign users'}\r\n      >\r\n        {assignedUsers.length > 0 ? (\r\n          <div className=\"asakaa-avatar-group\">\r\n            {visibleUsers.map((user) => (\r\n              <div\r\n                key={user.id}\r\n                className=\"asakaa-avatar\"\r\n                title={user.name}\r\n              >\r\n                {user.avatar ? (\r\n                  <img\r\n                    src={user.avatar}\r\n                    alt={user.name}\r\n                    className=\"asakaa-avatar-img\"\r\n                  />\r\n                ) : (\r\n                  user.initials\r\n                )}\r\n              </div>\r\n            ))}\r\n            {overflowCount > 0 && (\r\n              <div className=\"asakaa-avatar\">\r\n                +{overflowCount}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div\r\n            className=\"w-7 h-7 rounded-full flex items-center justify-center transition-all\"\r\n            style={{\r\n              background: 'rgba(96, 165, 250, 0.15)',\r\n              border: '1.5px solid rgba(96, 165, 250, 0.4)',\r\n              color: '#60a5fa',\r\n            }}\r\n          >\r\n            <svg\r\n              width=\"16\"\r\n              height=\"16\"\r\n              viewBox=\"0 0 16 16\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M8 8a3 3 0 100-6 3 3 0 000 6zM4 14c0-2.21 1.79-4 4-4s4 1.79 4 4\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n              <line\r\n                x1=\"13\"\r\n                y1=\"5\"\r\n                x2=\"13\"\r\n                y2=\"9\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n              <line\r\n                x1=\"11\"\r\n                y1=\"7\"\r\n                x2=\"15\"\r\n                y2=\"7\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </button>\r\n\r\n      {/* User selection menu - Using Portal to escape stacking context */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"user-selector-menu absolute rounded-xl shadow-2xl border min-w-[300px]\"\r\n            style={{\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n          {/* Header */}\r\n          <div className=\"px-4 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}>\r\n            <span className=\"text-xs font-bold uppercase tracking-wider\" style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.8))' }}>\r\n              Assign Users\r\n            </span>\r\n          </div>\r\n\r\n          {/* Search input */}\r\n          <div className=\"px-3 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              placeholder=\"Search users...\"\r\n              className=\"w-full px-3 py-2.5 rounded-lg text-sm border outline-none transition-all\"\r\n              style={{\r\n                background: 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))',\r\n                borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.2))',\r\n                color: 'var(--modal-v2-text-primary, #ffffff)',\r\n              }}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          {/* User list */}\r\n          <div className=\"py-2 max-h-[300px] overflow-y-auto\">\r\n            {filteredUsers.length === 0 ? (\r\n              <div className=\"px-4 py-3 text-sm text-center\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.6))' }}>\r\n                No users found\r\n              </div>\r\n            ) : (\r\n              filteredUsers.map((user) => {\r\n                const isAssigned = assignedUsers.some((u) => u.id === user.id)\r\n\r\n                return (\r\n                  <button\r\n                    key={user.id}\r\n                    onClick={() => handleToggleUser(user)}\r\n                    className=\"w-full px-4 py-2.5 flex items-center gap-3 text-sm transition-all active:scale-98\"\r\n                    style={{ background: 'transparent' }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.1))'\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = 'transparent'\r\n                    }}\r\n                  >\r\n                    {/* Avatar */}\r\n                    <div\r\n                      className=\"w-7 h-7 rounded-full flex items-center justify-center text-[11px] font-bold flex-shrink-0 shadow-sm\"\r\n                      style={{\r\n                        backgroundColor: user.color,\r\n                        color: '#fff',\r\n                      }}\r\n                    >\r\n                      {user.avatar ? (\r\n                        <img\r\n                          src={user.avatar}\r\n                          alt={user.name}\r\n                          className=\"w-full h-full rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        user.initials\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Name */}\r\n                    <span className=\"font-semibold flex-1 text-left\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.95))' }}>\r\n                      {user.name}\r\n                    </span>\r\n\r\n                    {/* Checkmark */}\r\n                    {isAssigned && (\r\n                      <span className=\"text-lg\" style={{ color: '#3b82f6' }}></span>\r\n                    )}\r\n                  </button>\r\n                )\r\n              })\r\n            )}\r\n          </div>\r\n\r\n          {/* Clear button */}\r\n          {assignedUsers.length > 0 && (\r\n            <div className=\"px-3 py-3 border-t border-white/10\">\r\n              <button\r\n                onClick={() => {\r\n                  onChange([])\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full px-3 py-2.5 rounded-lg text-sm font-semibold transition-all hover:bg-red-600/30 active:scale-95 border\"\r\n                style={{\r\n                  color: '#f87171',\r\n                  borderColor: 'rgba(248, 113, 113, 0.3)',\r\n                  background: 'rgba(248, 113, 113, 0.08)',\r\n                }}\r\n              >\r\n                Clear All\r\n              </button>\r\n            </div>\r\n          )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Dependencies Selector Component\r\n * Select task dependencies with link icon\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { Card } from '../../types'\r\n\r\n/**\r\n * Validate if adding a dependency would create a circular reference\r\n * Uses Depth-First Search (DFS) algorithm\r\n * @param allCards - All cards in the board\r\n * @param fromCardId - The card that would become a dependency (the task being depended on)\r\n * @param toCardId - The card that would depend on fromCardId\r\n * @returns True if adding this dependency would create a circular reference\r\n */\r\nexport function wouldCreateCircularDependency(\r\n  allCards: Card[],\r\n  fromCardId: string,\r\n  toCardId: string\r\n): boolean {\r\n  // Build dependency map from all cards\r\n  const dependencyMap = new Map<string, string[]>()\r\n  allCards.forEach((card) => {\r\n    if (card.dependencies && Array.isArray(card.dependencies)) {\r\n      // Handle both string[] and Dependency[] formats\r\n      // Dependency from @libxai/core has 'taskId', not 'targetId'\r\n      const deps = card.dependencies.map((d) => {\r\n        if (typeof d === 'string') return d\r\n        // Handle both possible formats\r\n        const depObj = d as { taskId?: string; targetId?: string }\r\n        return depObj.taskId || depObj.targetId || ''\r\n      }).filter(Boolean)\r\n      dependencyMap.set(card.id, deps)\r\n    }\r\n  })\r\n\r\n  // Simulate adding the new dependency (toCardId depends on fromCardId)\r\n  const existingDeps = dependencyMap.get(toCardId) || []\r\n  dependencyMap.set(toCardId, [...existingDeps, fromCardId])\r\n\r\n  // DFS to detect cycle\r\n  const visited = new Set<string>()\r\n  const recStack = new Set<string>()\r\n\r\n  const hasCycle = (cardId: string): boolean => {\r\n    if (!visited.has(cardId)) {\r\n      visited.add(cardId)\r\n      recStack.add(cardId)\r\n\r\n      const deps = dependencyMap.get(cardId) || []\r\n      for (const depId of deps) {\r\n        if (!visited.has(depId) && hasCycle(depId)) {\r\n          return true\r\n        } else if (recStack.has(depId)) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    recStack.delete(cardId)\r\n    return false\r\n  }\r\n\r\n  return hasCycle(toCardId)\r\n}\r\n\r\nexport interface DependenciesSelectorProps {\r\n  /** Current card (to exclude from dependencies) */\r\n  currentCardId: string\r\n  /** Currently selected dependencies */\r\n  dependencies?: string[]\r\n  /** All available tasks */\r\n  availableTasks: Card[]\r\n  /** Change handler */\r\n  onChange: (dependencies: string[]) => void\r\n  /** Custom className */\r\n  className?: string\r\n  /** Enable circular dependency validation (default: true) */\r\n  validateCircular?: boolean\r\n  /** Callback when circular dependency is detected */\r\n  onCircularDependencyError?: (targetCardId: string, targetCardTitle: string) => void\r\n}\r\n\r\nexport function DependenciesSelector({\r\n  currentCardId,\r\n  dependencies = [],\r\n  availableTasks,\r\n  onChange,\r\n  className,\r\n  validateCircular = true,\r\n  onCircularDependencyError,\r\n}: DependenciesSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [hasDependencies, setHasDependencies] = useState(dependencies.length > 0)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const [circularError, setCircularError] = useState<string | null>(null)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleToggleDependency = (taskId: string) => {\r\n    const isDependency = dependencies.includes(taskId)\r\n    const targetTask = availableTasks.find((t) => t.id === taskId)\r\n\r\n    // Clear any previous error\r\n    setCircularError(null)\r\n\r\n    if (isDependency) {\r\n      // Removing dependency - always allowed\r\n      const newDeps = dependencies.filter((id) => id !== taskId)\r\n      onChange(newDeps)\r\n      if (newDeps.length === 0) {\r\n        setHasDependencies(false)\r\n      }\r\n    } else {\r\n      // Adding dependency - validate for circular references\r\n      if (validateCircular) {\r\n        const wouldBeCircular = wouldCreateCircularDependency(\r\n          availableTasks,\r\n          taskId,\r\n          currentCardId\r\n        )\r\n\r\n        if (wouldBeCircular) {\r\n          const errorMsg = `Cannot add \"${targetTask?.title || taskId}\" as dependency - would create circular reference`\r\n          setCircularError(errorMsg)\r\n          onCircularDependencyError?.(taskId, targetTask?.title || taskId)\r\n          // Auto-clear error after 3 seconds\r\n          setTimeout(() => setCircularError(null), 3000)\r\n          return // Don't add the dependency\r\n        }\r\n      }\r\n\r\n      onChange([...dependencies, taskId])\r\n      setHasDependencies(true)\r\n    }\r\n  }\r\n\r\n  const handleToggleHasDependencies = () => {\r\n    const newValue = !hasDependencies\r\n    setHasDependencies(newValue)\r\n\r\n    if (!newValue) {\r\n      // Clear all dependencies\r\n      onChange([])\r\n    }\r\n  }\r\n\r\n  // Filter out current card and apply search\r\n  const filteredTasks = availableTasks\r\n    .filter((task) => task.id !== currentCardId)\r\n    .filter(\r\n      (task) =>\r\n        task.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        task.id.toLowerCase().includes(searchQuery.toLowerCase())\r\n    )\r\n\r\n  const linkColor = dependencies.length > 0 ? '#3B82F6' : '#BDC3C7'\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Link icon button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-1 px-2 py-1 rounded transition-all hover:bg-white/5\"\r\n        title={\r\n          dependencies.length > 0\r\n            ? `${dependencies.length} dependencies`\r\n            : 'Add dependencies'\r\n        }\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M7 9L9 7M11.5 3.5L10 2C8.89543 0.89543 7.10457 0.89543 6 2C4.89543 3.10457 4.89543 4.89543 6 6L7.5 7.5M4.5 12.5L6 14C7.10457 15.1046 8.89543 15.1046 10 14C11.1046 12.8954 11.1046 11.1046 10 10L8.5 8.5\"\r\n            stroke={linkColor}\r\n            strokeWidth=\"1.5\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          />\r\n        </svg>\r\n        {dependencies.length > 0 && (\r\n          <span className=\"text-xs font-medium\" style={{ color: linkColor }}>\r\n            {dependencies.length}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Dependencies menu - Using Portal to escape stacking context */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"dependencies-selector-menu absolute rounded-xl shadow-2xl border min-w-[300px]\"\r\n            style={{\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n          {/* Circular dependency error */}\r\n          {circularError && (\r\n            <div\r\n              className=\"px-4 py-3 flex items-center gap-2\"\r\n              style={{\r\n                background: 'rgba(239, 68, 68, 0.15)',\r\n                borderBottom: '1px solid rgba(239, 68, 68, 0.3)',\r\n              }}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M8 5V8M8 11H8.01M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z\"\r\n                  stroke=\"#ef4444\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n              <span className=\"text-xs font-medium\" style={{ color: '#ef4444' }}>\r\n                {circularError}\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Header */}\r\n          <div className=\"px-4 py-2 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n            <span className=\"text-xs font-semibold uppercase tracking-wide\" style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}>\r\n              Task Dependencies\r\n            </span>\r\n          </div>\r\n\r\n          {/* Has dependencies checkbox */}\r\n          <div className=\"px-4 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n            <label\r\n              className=\"flex items-center gap-2 cursor-pointer group\"\r\n              onClick={handleToggleHasDependencies}\r\n            >\r\n              <div\r\n                className=\"w-4 h-4 rounded border-2 flex items-center justify-center transition-all\"\r\n                style={{\r\n                  background: hasDependencies ? '#3b82f6' : 'transparent',\r\n                  borderColor: hasDependencies ? '#3b82f6' : 'var(--modal-v2-border, rgba(255, 255, 255, 0.3))',\r\n                }}\r\n              >\r\n                {hasDependencies && (\r\n                  <svg\r\n                    width=\"12\"\r\n                    height=\"12\"\r\n                    viewBox=\"0 0 12 12\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M2 6L5 9L10 3\"\r\n                      stroke=\"white\"\r\n                      strokeWidth=\"2\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n              </div>\r\n              <span className=\"text-sm font-medium\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.8))' }}>\r\n                Has dependencies\r\n              </span>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Task selection (only if hasDependencies is true) */}\r\n          {hasDependencies && (\r\n            <>\r\n              {/* Search input */}\r\n              <div className=\"px-3 py-2 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  placeholder=\"Search by name or ID...\"\r\n                  className=\"w-full px-3 py-2 rounded-md text-xs border outline-none transition-all\"\r\n                  style={{\r\n                    background: 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))',\r\n                    borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))',\r\n                    color: 'var(--modal-v2-text-primary, #ffffff)',\r\n                  }}\r\n                  autoFocus\r\n                />\r\n              </div>\r\n\r\n              {/* Task list */}\r\n              <div className=\"py-2 max-h-[280px] overflow-y-auto\">\r\n                {filteredTasks.length === 0 ? (\r\n                  <div className=\"px-4 py-3 text-xs text-center\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.5))' }}>\r\n                    No tasks found\r\n                  </div>\r\n                ) : (\r\n                  filteredTasks.map((task) => {\r\n                    const isDependency = dependencies.includes(task.id)\r\n\r\n                    return (\r\n                      <button\r\n                        key={task.id}\r\n                        onClick={() => handleToggleDependency(task.id)}\r\n                        className=\"w-full px-4 py-2 flex items-start gap-3 text-sm transition-colors\"\r\n                        style={{ background: 'transparent' }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.background = 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))'\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.background = 'transparent'\r\n                        }}\r\n                      >\r\n                        {/* Checkbox */}\r\n                        <div\r\n                          className=\"w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-all\"\r\n                          style={{\r\n                            background: isDependency ? '#3b82f6' : 'transparent',\r\n                            borderColor: isDependency ? '#3b82f6' : 'var(--modal-v2-border, rgba(255, 255, 255, 0.3))',\r\n                          }}\r\n                        >\r\n                          {isDependency && (\r\n                            <svg\r\n                              width=\"12\"\r\n                              height=\"12\"\r\n                              viewBox=\"0 0 12 12\"\r\n                              fill=\"none\"\r\n                              xmlns=\"http://www.w3.org/2000/svg\"\r\n                            >\r\n                              <path\r\n                                d=\"M2 6L5 9L10 3\"\r\n                                stroke=\"white\"\r\n                                strokeWidth=\"2\"\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                              />\r\n                            </svg>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Task info */}\r\n                        <div className=\"flex-1 text-left\">\r\n                          <div className=\"font-medium\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.9))' }}>\r\n                            {task.title}\r\n                          </div>\r\n                          <div className=\"text-xs mt-0.5\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.5))' }}>\r\n                            {task.id}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    )\r\n                  })\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* Clear button */}\r\n          {dependencies.length > 0 && (\r\n            <div className=\"px-3 py-2 border-t border-white/5\">\r\n              <button\r\n                onClick={() => {\r\n                  onChange([])\r\n                  setHasDependencies(false)\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full px-3 py-2 rounded-md text-xs font-medium transition-all hover:bg-red-600/20 border border-red-500/30\"\r\n                style={{ color: '#E74C3C' }}\r\n              >\r\n                Clear All Dependencies\r\n              </button>\r\n            </div>\r\n          )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Card Component\r\n * Individual task card in the Kanban board\r\n * @module components/Card\r\n */\r\n\r\nimport { memo } from 'react'\r\nimport { useSortable } from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\nimport type { Card as CardType } from '../../types'\r\nimport type { User } from './UserAssignmentSelector'\r\nimport { cn } from '../../utils'\r\nimport { PrioritySelector } from './PrioritySelector'\r\nimport { DateRangePicker } from './DateRangePicker'\r\nimport { UserAssignmentSelector } from './UserAssignmentSelector'\r\nimport { DependenciesSelector } from './DependenciesSelector'\r\n\r\nexport interface CardProps {\r\n  /** Card data */\r\n  card: CardType\r\n  /** Custom render function */\r\n  render?: (card: CardType) => React.ReactNode\r\n  /** Click handler */\r\n  onClick?: (card: CardType) => void\r\n  /** Is card selected */\r\n  isSelected?: boolean\r\n  /** Disable drag */\r\n  disableDrag?: boolean\r\n  /** Custom className */\r\n  className?: string\r\n  /** Card update handler */\r\n  onUpdate?: (cardId: string, updates: Partial<CardType>) => void\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** All cards (for dependencies) */\r\n  allCards?: CardType[]\r\n}\r\n\r\n/**\r\n * Default Card Component\r\n * Optimized with memo to prevent unnecessary re-renders\r\n */\r\nexport const Card = memo<CardProps>(\r\n  ({\r\n    card,\r\n    render,\r\n    onClick,\r\n    isSelected,\r\n    disableDrag,\r\n    className,\r\n    onUpdate,\r\n    availableUsers = [],\r\n    allCards = [],\r\n  }) => {\r\n    const {\r\n      attributes,\r\n      listeners,\r\n      setNodeRef,\r\n      transform,\r\n      transition,\r\n      isDragging,\r\n    } = useSortable({\r\n      id: card.id,\r\n      disabled: disableDrag,\r\n      data: {\r\n        type: 'card',\r\n        card,\r\n      },\r\n    })\r\n\r\n    const style = {\r\n      transform: CSS.Transform.toString(transform),\r\n      transition,\r\n    }\r\n\r\n    // If custom render provided, use it\r\n    if (render) {\r\n      return (\r\n        <div\r\n          ref={setNodeRef}\r\n          style={style}\r\n          {...attributes}\r\n          {...listeners}\r\n          onClick={() => onClick?.(card)}\r\n        >\r\n          {render(card)}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    // Get assigned users from IDs\r\n    const assignedUsers = availableUsers.filter((user) =>\r\n      card.assignedUserIds?.includes(user.id)\r\n    )\r\n\r\n    // Default card rendering\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        style={style}\r\n        className={cn(\r\n          'asakaa-card',\r\n          isDragging && 'asakaa-card-dragging',\r\n          isSelected && 'ring-2 ring-asakaa-accent-blue',\r\n          className\r\n        )}\r\n        {...attributes}\r\n        {...listeners}\r\n        onClick={(e) => {\r\n          // Prevent card click when interacting with configurables\r\n          if (\r\n            (e.target as HTMLElement).closest(\r\n              '.priority-selector, .date-picker, .user-selector, .dependencies-selector'\r\n            )\r\n          ) {\r\n            return\r\n          }\r\n          onClick?.(card)\r\n        }}\r\n      >\r\n        {/* Cover Image */}\r\n        {card.coverImage && (\r\n          <div className=\"asakaa-card-cover mb-3\">\r\n            <img\r\n              src={card.coverImage}\r\n              alt={`Cover for ${card.title}`}\r\n              className=\"w-full h-32 object-cover rounded-md\"\r\n              loading=\"lazy\"\r\n              onError={(e) => {\r\n                // Hide image if it fails to load\r\n                e.currentTarget.style.display = 'none'\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Title */}\r\n        <h3 className=\"asakaa-card-title mb-2\">{card.title}</h3>\r\n\r\n        {/* Description */}\r\n        {card.description && (\r\n          <p className=\"asakaa-card-description mb-3\">{card.description}</p>\r\n        )}\r\n\r\n        {/* Configurable properties row */}\r\n        <div className=\"flex items-center gap-3 mb-3 pt-1\">\r\n          {/* Priority selector */}\r\n          <div onClick={(e) => e.stopPropagation()} className=\"priority-selector\">\r\n            <PrioritySelector\r\n              priority={card.priority}\r\n              onChange={(priority) => onUpdate?.(card.id, { priority })}\r\n            />\r\n          </div>\r\n\r\n          {/* Date range picker */}\r\n          <div onClick={(e) => e.stopPropagation()} className=\"date-picker\">\r\n            <DateRangePicker\r\n              startDate={\r\n                card.startDate\r\n                  ? typeof card.startDate === 'string'\r\n                    ? card.startDate\r\n                    : card.startDate.toISOString().split('T')[0]\r\n                  : undefined\r\n              }\r\n              endDate={\r\n                card.endDate\r\n                  ? typeof card.endDate === 'string'\r\n                    ? card.endDate\r\n                    : card.endDate.toISOString().split('T')[0]\r\n                  : undefined\r\n              }\r\n              onChange={(startDate, endDate) =>\r\n                onUpdate?.(card.id, { startDate, endDate })\r\n              }\r\n            />\r\n          </div>\r\n\r\n          {/* User assignment */}\r\n          {availableUsers.length > 0 && (\r\n            <div onClick={(e) => e.stopPropagation()} className=\"user-selector\">\r\n              <UserAssignmentSelector\r\n                assignedUsers={assignedUsers}\r\n                availableUsers={availableUsers}\r\n                onChange={(users) =>\r\n                  onUpdate?.(card.id, {\r\n                    assignedUserIds: users.map((u) => u.id),\r\n                  })\r\n                }\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Dependencies */}\r\n          <div onClick={(e) => e.stopPropagation()} className=\"dependencies-selector\">\r\n            <DependenciesSelector\r\n              currentCardId={card.id}\r\n              dependencies={\r\n                Array.isArray(card.dependencies)\r\n                  ? card.dependencies.map((d) => (typeof d === 'string' ? d : d.taskId))\r\n                  : []\r\n              }\r\n              availableTasks={allCards}\r\n              onChange={(dependencies) => onUpdate?.(card.id, { dependencies })}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Labels */}\r\n        {card.labels && card.labels.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {card.labels.slice(0, 3).map((label) => (\r\n              <span key={label} className=\"asakaa-label\">\r\n                {label}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  },\r\n  // Custom comparison function for optimal performance\r\n  (prevProps, nextProps) => {\r\n    return (\r\n      prevProps.card.id === nextProps.card.id &&\r\n      prevProps.card.title === nextProps.card.title &&\r\n      prevProps.card.description === nextProps.card.description &&\r\n      prevProps.card.position === nextProps.card.position &&\r\n      prevProps.card.columnId === nextProps.card.columnId &&\r\n      prevProps.card.priority === nextProps.card.priority &&\r\n      prevProps.card.startDate === nextProps.card.startDate &&\r\n      prevProps.card.endDate === nextProps.card.endDate &&\r\n      prevProps.isSelected === nextProps.isSelected &&\r\n      JSON.stringify(prevProps.card.labels) ===\r\n        JSON.stringify(nextProps.card.labels) &&\r\n      JSON.stringify(prevProps.card.assignedUserIds) ===\r\n        JSON.stringify(nextProps.card.assignedUserIds) &&\r\n      JSON.stringify(prevProps.card.dependencies) ===\r\n        JSON.stringify(nextProps.card.dependencies)\r\n    )\r\n  }\r\n)\r\n\r\nCard.displayName = 'Card'\r\n","/**\r\n * Column Menu Component\r\n * Three-dot menu for column actions (rename, etc.)\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface ColumnMenuProps {\r\n  /** Current column title */\r\n  columnTitle: string\r\n  /** Rename handler */\r\n  onRename: (newTitle: string) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\nexport function ColumnMenu({\r\n  columnTitle,\r\n  onRename,\r\n  className,\r\n}: ColumnMenuProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isRenaming, setIsRenaming] = useState(false)\r\n  const [newTitle, setNewTitle] = useState(columnTitle)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Update menu position when opened\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Close menu when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setIsRenaming(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setIsRenaming(false)\r\n        setNewTitle(columnTitle)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, columnTitle])\r\n\r\n  // Focus input when renaming starts\r\n  useEffect(() => {\r\n    if (isRenaming && inputRef.current) {\r\n      inputRef.current.focus()\r\n      inputRef.current.select()\r\n    }\r\n  }, [isRenaming])\r\n\r\n  const handleRenameClick = () => {\r\n    setIsRenaming(true)\r\n    setNewTitle(columnTitle)\r\n  }\r\n\r\n  const handleRenameSubmit = () => {\r\n    const trimmedTitle = newTitle.trim()\r\n    if (trimmedTitle && trimmedTitle !== columnTitle) {\r\n      onRename(trimmedTitle)\r\n    }\r\n    setIsRenaming(false)\r\n    setIsOpen(false)\r\n    setNewTitle(columnTitle)\r\n  }\r\n\r\n  const handleRenameKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      handleRenameSubmit()\r\n    } else if (e.key === 'Escape') {\r\n      setIsRenaming(false)\r\n      setNewTitle(columnTitle)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Three-dot menu button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-white/10\"\r\n        title=\"Column options\"\r\n        aria-label=\"Column menu\"\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <circle cx=\"8\" cy=\"3\" r=\"1.5\" fill=\"currentColor\" />\r\n          <circle cx=\"8\" cy=\"8\" r=\"1.5\" fill=\"currentColor\" />\r\n          <circle cx=\"8\" cy=\"13\" r=\"1.5\" fill=\"currentColor\" />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Menu dropdown */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"fixed rounded-xl shadow-2xl border min-w-[200px]\"\r\n            style={{\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n              borderColor: 'rgba(255, 255, 255, 0.15)',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n            {isRenaming ? (\r\n              // Rename input\r\n              <div className=\"p-3\">\r\n                <label className=\"text-xs font-bold text-white/80 uppercase tracking-wider block mb-2\">\r\n                  Rename Column\r\n                </label>\r\n                <input\r\n                  ref={inputRef}\r\n                  type=\"text\"\r\n                  value={newTitle}\r\n                  onChange={(e) => setNewTitle(e.target.value)}\r\n                  onKeyDown={handleRenameKeyDown}\r\n                  onBlur={handleRenameSubmit}\r\n                  className=\"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/50 outline-none focus:border-blue-500/50 transition-all\"\r\n                  placeholder=\"Column name\"\r\n                  maxLength={50}\r\n                />\r\n              </div>\r\n            ) : (\r\n              // Menu options\r\n              <div className=\"py-1\">\r\n                <button\r\n                  onClick={handleRenameClick}\r\n                  className=\"w-full px-4 py-2.5 flex items-center gap-3 text-sm text-white/90 hover:bg-white/10 transition-all\"\r\n                >\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 16 16\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M11.5 1.5L14.5 4.5L5 14H2V11L11.5 1.5Z\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"1.5\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                  <span className=\"font-medium\">Rename</span>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Column Component\r\n * Vertical column containing cards\r\n * @module components/Column\r\n */\r\n\r\nimport { memo, useRef } from 'react'\r\nimport { useDroppable } from '@dnd-kit/core'\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\nimport type { Column as ColumnType, Card as CardType } from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { Card } from '../Card'\r\nimport { ColumnMenu } from './ColumnMenu'\r\nimport { cn, shouldVirtualize } from '../../utils'\r\n\r\nexport interface ColumnProps {\r\n  /** Column data */\r\n  column: ColumnType\r\n  /** Cards in this column */\r\n  cards: CardType[]\r\n  /** Custom column renderer */\r\n  renderColumn?: (column: ColumnType, cards: CardType[]) => React.ReactNode\r\n  /** Custom card renderer */\r\n  renderCard?: (card: CardType) => React.ReactNode\r\n  /** Custom header renderer */\r\n  renderHeader?: (column: ColumnType, cardCount: number) => React.ReactNode\r\n  /** Custom empty state */\r\n  renderEmptyState?: (column: ColumnType) => React.ReactNode\r\n  /** Card click handler */\r\n  onCardClick?: (card: CardType) => void\r\n  /** Card update handler */\r\n  onCardUpdate?: (cardId: string, updates: Partial<CardType>) => void\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** All cards (for dependencies) */\r\n  allCards?: CardType[]\r\n  /** Enable virtualization */\r\n  enableVirtualization?: boolean\r\n  /** Estimated card height for virtualization */\r\n  cardHeight?: number\r\n  /** Is column collapsed */\r\n  isCollapsed?: boolean\r\n  /** Toggle collapse */\r\n  onToggleCollapse?: () => void\r\n  /** Column rename handler */\r\n  onColumnRename?: (columnId: string, newTitle: string) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Column Component\r\n * Uses virtualization for large lists automatically\r\n */\r\nexport const Column = memo<ColumnProps>(\r\n  ({\r\n    column,\r\n    cards,\r\n    renderColumn,\r\n    renderCard,\r\n    renderHeader,\r\n    renderEmptyState,\r\n    onCardClick,\r\n    onCardUpdate,\r\n    availableUsers,\r\n    allCards,\r\n    enableVirtualization,\r\n    cardHeight = 120,\r\n    isCollapsed,\r\n    onToggleCollapse,\r\n    onColumnRename,\r\n    className,\r\n  }) => {\r\n    const { setNodeRef, isOver } = useDroppable({\r\n      id: column.id,\r\n      data: {\r\n        type: 'column',\r\n        column,\r\n      },\r\n    })\r\n\r\n    const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n    // Auto-enable virtualization for large lists\r\n    const useVirtualization =\r\n      enableVirtualization ?? shouldVirtualize(cards.length)\r\n\r\n    // Setup virtualizer\r\n    const virtualizer = useVirtualizer({\r\n      count: cards.length,\r\n      getScrollElement: () => parentRef.current,\r\n      estimateSize: () => cardHeight,\r\n      enabled: useVirtualization,\r\n    })\r\n\r\n    // Custom column renderer\r\n    if (renderColumn) {\r\n      return (\r\n        <div ref={setNodeRef} className={className}>\r\n          {renderColumn(column, cards)}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    // Calculate WIP limit status\r\n    const getWipLimitStatus = () => {\r\n      if (!column.wipLimit) return { state: 'none', percentage: 0 }\r\n\r\n      const percentage = (cards.length / column.wipLimit) * 100\r\n\r\n      if (cards.length > column.wipLimit) {\r\n        return { state: 'exceeded', percentage }\r\n      } else if (percentage >= 80) {\r\n        return { state: 'warning', percentage }\r\n      } else if (percentage >= 60) {\r\n        return { state: 'approaching', percentage }\r\n      } else {\r\n        return { state: 'ok', percentage }\r\n      }\r\n    }\r\n\r\n    const wipStatus = getWipLimitStatus()\r\n    const isOverWipLimit = wipStatus.state === 'exceeded'\r\n\r\n    // WIP limit badge styling - simplified without color backgrounds\r\n    const getWipBadgeClasses = () => {\r\n      // All WIP limits use the same base class for consistent, subtle display\r\n      return 'asakaa-column-count'\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        className={cn(\r\n          'asakaa-column',\r\n          isOver && 'ring-2 ring-asakaa-accent-blue',\r\n          isOverWipLimit && 'ring-2 ring-asakaa-accent-red',\r\n          className\r\n        )}\r\n      >\r\n        {/* Header */}\r\n        {renderHeader ? (\r\n          renderHeader(column, cards.length)\r\n        ) : (\r\n          <div className=\"asakaa-column-header group\">\r\n            <h2 className=\"asakaa-column-title\">{column.title}</h2>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className={cn(getWipBadgeClasses())}>\r\n                {cards.length}\r\n                {column.wipLimit && ` / ${column.wipLimit}`}\r\n              </span>\r\n              {/* WIP limit status indicator */}\r\n              {column.wipLimit && wipStatus.state !== 'none' && (\r\n                <span\r\n                  className=\"text-xs font-medium flex items-center\"\r\n                  title={`${wipStatus.percentage.toFixed(0)}% capacity${\r\n                    column.wipLimitType === 'hard'\r\n                      ? ' (Hard limit - blocks new cards)'\r\n                      : ' (Soft limit - shows warning)'\r\n                  }`}\r\n                >\r\n                  {wipStatus.state === 'exceeded' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <circle cx=\"8\" cy=\"8\" r=\"7\" fill=\"#EF4444\" opacity=\"0.9\" />\r\n                      <path d=\"M5 5L11 11M11 5L5 11\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'warning' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M8 1L15 14H1L8 1Z\" fill=\"#F59E0B\" opacity=\"0.9\" />\r\n                      <path d=\"M8 6V9M8 11V11.5\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'approaching' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M8 1L10 7H14L10 10L12 16L8 12L4 16L6 10L2 7H6L8 1Z\" fill=\"#FB923C\" opacity=\"0.9\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'ok' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <circle cx=\"8\" cy=\"8\" r=\"7\" fill=\"#10B981\" opacity=\"0.9\" />\r\n                      <path d=\"M5 8L7 10L11 6\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                </span>\r\n              )}\r\n              {onColumnRename && (\r\n                <ColumnMenu\r\n                  columnTitle={column.title}\r\n                  onRename={(newTitle) => onColumnRename(column.id, newTitle)}\r\n                />\r\n              )}\r\n              {onToggleCollapse && (\r\n                <button\r\n                  onClick={onToggleCollapse}\r\n                  className=\"text-asakaa-text-tertiary hover:text-asakaa-text-primary\"\r\n                  aria-label={isCollapsed ? 'Expand column' : 'Collapse column'}\r\n                >\r\n                  {isCollapsed ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cards */}\r\n        {!isCollapsed && (\r\n          <div\r\n            ref={parentRef}\r\n            className=\"asakaa-column-cards\"\r\n            style={{\r\n              maxHeight: useVirtualization ? '600px' : undefined,\r\n            }}\r\n          >\r\n            <SortableContext\r\n              items={cards.map((card) => card.id)}\r\n              strategy={verticalListSortingStrategy}\r\n            >\r\n              {cards.length === 0 ? (\r\n                // Empty state\r\n                renderEmptyState ? (\r\n                  renderEmptyState(column)\r\n                ) : (\r\n                  <div className=\"asakaa-drop-zone asakaa-empty\">\r\n                    <p>Drop cards here</p>\r\n                  </div>\r\n                )\r\n              ) : useVirtualization ? (\r\n                // Virtualized list\r\n                <div\r\n                  style={{\r\n                    height: `${virtualizer.getTotalSize()}px`,\r\n                    position: 'relative',\r\n                  }}\r\n                >\r\n                  {virtualizer.getVirtualItems().map((virtualItem) => {\r\n                    const card = cards[virtualItem.index]\r\n                    if (!card) return null\r\n\r\n                    return (\r\n                      <div\r\n                        key={card.id}\r\n                        style={{\r\n                          position: 'absolute',\r\n                          top: 0,\r\n                          left: 0,\r\n                          width: '100%',\r\n                          transform: `translateY(${virtualItem.start}px)`,\r\n                        }}\r\n                      >\r\n                        <Card\r\n                          card={card}\r\n                          render={renderCard}\r\n                          onClick={onCardClick}\r\n                          onUpdate={onCardUpdate}\r\n                          availableUsers={availableUsers}\r\n                          allCards={allCards}\r\n                        />\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                // Regular list\r\n                cards.map((card) => (\r\n                  <Card\r\n                    key={card.id}\r\n                    card={card}\r\n                    render={renderCard}\r\n                    onClick={onCardClick}\r\n                    onUpdate={onCardUpdate}\r\n                    availableUsers={availableUsers}\r\n                    allCards={allCards}\r\n                  />\r\n                ))\r\n              )}\r\n            </SortableContext>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n  // Memoization removed to allow card property updates to trigger re-renders\r\n  // The individual Card components are still memoized for performance\r\n)\r\n\r\nColumn.displayName = 'Column'\r\n","/**\r\n * Editable Column Title Component\r\n * Allows inline editing of column names\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface EditableColumnTitleProps {\r\n  title: string\r\n  onSave: (newTitle: string) => void\r\n  className?: string\r\n}\r\n\r\nexport function EditableColumnTitle({\r\n  title,\r\n  onSave,\r\n  className,\r\n}: EditableColumnTitleProps) {\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [editValue, setEditValue] = useState(title)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus()\r\n      inputRef.current.select()\r\n    }\r\n  }, [isEditing])\r\n\r\n  const handleSave = () => {\r\n    const trimmed = editValue.trim()\r\n    if (trimmed && trimmed !== title) {\r\n      onSave(trimmed)\r\n    } else {\r\n      setEditValue(title)\r\n    }\r\n    setIsEditing(false)\r\n  }\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSave()\r\n    } else if (e.key === 'Escape') {\r\n      setEditValue(title)\r\n      setIsEditing(false)\r\n    }\r\n  }\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={editValue}\r\n        onChange={(e) => setEditValue(e.target.value)}\r\n        onBlur={handleSave}\r\n        onKeyDown={handleKeyDown}\r\n        className={cn(\r\n          'asakaa-column-title bg-transparent border-b-2 border-blue-500',\r\n          'outline-none px-1 -ml-1',\r\n          className\r\n        )}\r\n        maxLength={50}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <h2\r\n      className={cn('asakaa-column-title cursor-pointer', className)}\r\n      onClick={() => setIsEditing(true)}\r\n      title=\"Click to edit\"\r\n    >\r\n      {title}\r\n    </h2>\r\n  )\r\n}\r\n","/**\r\n * useDragState - React hook for drag state management\r\n * @module hooks/useDragState\r\n *\r\n * Replacement for Jotai's useAtom(dragStateAtom)\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { dragStore, type DragState } from '@libxai/core'\r\n\r\n/**\r\n * Hook return type\r\n */\r\nexport type UseDragStateReturn = [\r\n  state: DragState,\r\n  setState: (state: DragState) => void\r\n]\r\n\r\n/**\r\n * React hook for drag state\r\n *\r\n * Drop-in replacement for `useAtom(dragStateAtom)`\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const [dragState, setDragState] = useDragState()\r\n *\r\n *   const handleDragStart = () => {\r\n *     setDragState({\r\n *       isDragging: true,\r\n *       draggedCardId: 'card-1',\r\n *       sourceColumnId: 'col-1',\r\n *       targetColumnId: 'col-1',\r\n *     })\r\n *   }\r\n *\r\n *   return <div>{dragState.isDragging ? 'Dragging...' : 'Idle'}</div>\r\n * }\r\n * ```\r\n */\r\nexport function useDragState(): UseDragStateReturn {\r\n  const [state, setState] = useState<DragState>(() => dragStore.getState())\r\n\r\n  useEffect(() => {\r\n    // Subscribe to store changes\r\n    const unsubscribe = dragStore.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [])\r\n\r\n  const setDragState = useCallback((newState: DragState) => {\r\n    dragStore.setState(newState)\r\n  }, [])\r\n\r\n  return [state, setDragState]\r\n}\r\n","import { useCallback, useMemo } from 'react'\r\nimport {\r\n  DndContext,\r\n  DragOverlay,\r\n  closestCorners,\r\n  PointerSensor,\r\n  KeyboardSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragStartEvent,\r\n  DragEndEvent,\r\n  DragOverEvent,\r\n} from '@dnd-kit/core'\r\nimport { sortableKeyboardCoordinates } from '@dnd-kit/sortable'\r\nimport type { KanbanBoardProps } from '../../types'\r\nimport { Column } from '../Column'\r\nimport { Card } from '../Card'\r\nimport { cn, calculateDropPosition } from '../../utils'\r\nimport { useDragState } from '../../hooks/useDragState'\r\nimport { KanbanThemeProvider } from './KanbanThemeContext'\r\n\r\nexport function KanbanBoard({\r\n  board,\r\n  callbacks,\r\n  onCardClick,\r\n  renderProps,\r\n  config,\r\n  availableUsers = [],\r\n  className,\r\n  style,\r\n  isLoading,\r\n  error,\r\n  children,\r\n}: KanbanBoardProps & { children?: React.ReactNode }) {\r\n  const [dragState, setDragState] = useDragState()\r\n\r\n  // Determine theme class - default to 'dark'\r\n  const themeName = config?.theme || 'dark'\r\n  const isDark = themeName === 'dark' || themeName === 'neutral'\r\n  const themeClass = isDark ? 'dark' : ''\r\n\r\n  const handleCardUpdate = useCallback(\r\n    (cardId: string, updates: Partial<typeof board.cards[0]>) => {\r\n      callbacks.onCardUpdate?.(cardId, updates)\r\n    },\r\n    [callbacks]\r\n  )\r\n\r\n  const handleColumnRename = useCallback(\r\n    (columnId: string, newTitle: string) => {\r\n      callbacks.onColumnUpdate?.(columnId, { title: newTitle })\r\n    },\r\n    [callbacks]\r\n  )\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8,\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  )\r\n\r\n  const cardsByColumn = useMemo(() => {\r\n    const map = new Map<string, typeof board.cards>()\r\n\r\n    board.columns.forEach((column) => {\r\n      const columnCards = column.cardIds\r\n        .map((cardId) => board.cards.find((card) => card.id === cardId))\r\n        .filter((card): card is NonNullable<typeof card> => card !== undefined)\r\n        .sort((a, b) => a.position - b.position)\r\n\r\n      map.set(column.id, columnCards)\r\n    })\r\n\r\n    return map\r\n  }, [board.cards, board.columns])\r\n\r\n  const handleDragStart = useCallback(\r\n    (event: DragStartEvent) => {\r\n      const { active } = event\r\n      const card = board.cards.find((c) => c.id === active.id)\r\n\r\n      if (card) {\r\n        setDragState({\r\n          isDragging: true,\r\n          draggedCardId: card.id,\r\n          sourceColumnId: card.columnId,\r\n          targetColumnId: card.columnId,\r\n        })\r\n      }\r\n    },\r\n    [board.cards, setDragState]\r\n  )\r\n\r\n  const handleDragOver = useCallback(\r\n    (event: DragOverEvent) => {\r\n      const { active, over } = event\r\n      if (!over) return\r\n\r\n      const activeCard = board.cards.find((c) => c.id === active.id)\r\n      if (!activeCard) return\r\n\r\n      let targetColumnId: string | null = null\r\n\r\n      if (over.data.current?.type === 'column') {\r\n        targetColumnId = over.id as string\r\n      } else if (over.data.current?.type === 'card') {\r\n        const overCard = board.cards.find((c) => c.id === over.id)\r\n        targetColumnId = overCard?.columnId || null\r\n      }\r\n\r\n      if (targetColumnId && targetColumnId !== dragState.targetColumnId) {\r\n        setDragState({\r\n          ...dragState,\r\n          targetColumnId,\r\n        })\r\n      }\r\n    },\r\n    [board.cards, dragState, setDragState]\r\n  )\r\n\r\n  const handleDragEnd = useCallback(\r\n    async (event: DragEndEvent) => {\r\n      const { active, over } = event\r\n\r\n      setDragState({\r\n        isDragging: false,\r\n        draggedCardId: null,\r\n        sourceColumnId: null,\r\n        targetColumnId: null,\r\n      })\r\n\r\n      if (!over) return\r\n\r\n      const activeCard = board.cards.find((c) => c.id === active.id)\r\n      if (!activeCard) return\r\n\r\n      let targetColumnId: string\r\n      let targetPosition: number\r\n\r\n      if (over.data.current?.type === 'column') {\r\n        targetColumnId = over.id as string\r\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\r\n        targetPosition = calculateDropPosition(targetColumnCards, 0)\r\n      } else {\r\n        const overCard = board.cards.find((c) => c.id === over.id)\r\n        if (!overCard) return\r\n\r\n        targetColumnId = overCard.columnId\r\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\r\n        const overIndex = targetColumnCards.findIndex((c) => c.id === over.id)\r\n\r\n        targetPosition = calculateDropPosition(targetColumnCards, overIndex)\r\n      }\r\n\r\n      const targetColumn = board.columns.find((col) => col.id === targetColumnId)\r\n      if (targetColumn && targetColumn.wipLimit && targetColumn.wipLimitType === 'hard') {\r\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\r\n\r\n        if (activeCard.columnId !== targetColumnId) {\r\n          if (targetColumnCards.length >= targetColumn.wipLimit) {\r\n            callbacks.onWipLimitExceeded?.(targetColumn, activeCard)\r\n            return\r\n          }\r\n        }\r\n      }\r\n\r\n      if (\r\n        activeCard.columnId !== targetColumnId ||\r\n        activeCard.position !== targetPosition\r\n      ) {\r\n        await callbacks.onCardMove?.(activeCard.id, targetColumnId, targetPosition)\r\n      }\r\n    },\r\n    [board.cards, board.columns, cardsByColumn, callbacks, setDragState]\r\n  )\r\n\r\n  const handleCardClick = useCallback(\r\n    (card: typeof board.cards[0]) => {\r\n      onCardClick?.(card)\r\n    },\r\n    [onCardClick]\r\n  )\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={cn('asakaa-board', themeClass, className)} style={style}>\r\n        <LoadingSkeleton columnCount={3} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={cn('asakaa-board', themeClass, className)} style={style}>\r\n        <div className=\"flex items-center justify-center w-full h-64\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-asakaa-accent-red text-lg font-semibold mb-2\">\r\n              Error loading board\r\n            </p>\r\n            <p className=\"text-asakaa-text-secondary text-sm\">\r\n              {typeof error === 'string' ? error : error.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <KanbanThemeProvider themeName={themeName}>\r\n      <DndContext\r\n        sensors={sensors}\r\n        collisionDetection={closestCorners}\r\n        onDragStart={handleDragStart}\r\n        onDragOver={handleDragOver}\r\n        onDragEnd={handleDragEnd}\r\n      >\r\n        <div className={cn('asakaa-board', themeClass, className)} style={style} data-theme={themeName}>\r\n          {board.columns\r\n            .sort((a, b) => a.position - b.position)\r\n            .map((column) => {\r\n              const cards = cardsByColumn.get(column.id) || []\r\n\r\n              return (\r\n                <Column\r\n                  key={column.id}\r\n                  column={column}\r\n                  cards={cards}\r\n                  renderCard={renderProps?.renderCard}\r\n                  renderColumn={renderProps?.renderColumn}\r\n                  renderHeader={renderProps?.renderColumnHeader}\r\n                  renderEmptyState={renderProps?.renderEmptyState}\r\n                  onCardClick={handleCardClick}\r\n                  onCardUpdate={handleCardUpdate}\r\n                  onColumnRename={handleColumnRename}\r\n                  availableUsers={availableUsers}\r\n                  allCards={board.cards}\r\n                  enableVirtualization={config?.enableVirtualization}\r\n                  cardHeight={config?.cardHeight}\r\n                />\r\n              )\r\n            })}\r\n          {children}\r\n        </div>\r\n\r\n        <DragOverlay>\r\n          {dragState.draggedCardId ? (\r\n            <Card\r\n              card={\r\n                board.cards.find((c) => c.id === dragState.draggedCardId)!\r\n              }\r\n              render={renderProps?.renderCardOverlay || renderProps?.renderCard}\r\n              disableDrag\r\n              className=\"opacity-90 rotate-3 shadow-2xl\"\r\n            />\r\n          ) : null}\r\n        </DragOverlay>\r\n      </DndContext>\r\n    </KanbanThemeProvider>\r\n  )\r\n}\r\n\r\nfunction LoadingSkeleton({ columnCount }: { columnCount: number }) {\r\n  return (\r\n    <>\r\n      {Array.from({ length: columnCount }).map((_, i) => (\r\n        <div key={i} className=\"asakaa-column\">\r\n          <div className=\"asakaa-skeleton h-8 mb-3\" />\r\n          <div className=\"flex flex-col gap-2\">\r\n            <div className=\"asakaa-skeleton h-24\" />\r\n            <div className=\"asakaa-skeleton h-32\" />\r\n            <div className=\"asakaa-skeleton h-28\" />\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n","/**\r\n * Error Boundary Component\r\n * Catches errors in child components and provides fallback UI\r\n * @module components/ErrorBoundary\r\n */\r\n\r\nimport React, { Component, ErrorInfo, ReactNode } from 'react'\r\n\r\nexport interface ErrorBoundaryProps {\r\n  /** Child components to wrap */\r\n  children: ReactNode\r\n  /** Custom fallback UI (receives error and reset callback) */\r\n  fallback?: (error: Error, reset: () => void) => ReactNode\r\n  /** Callback when error is caught */\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void\r\n  /** Component identifier for error tracking */\r\n  componentName?: string\r\n}\r\n\r\ninterface ErrorBoundaryState {\r\n  hasError: boolean\r\n  error: Error | null\r\n  errorInfo: ErrorInfo | null\r\n}\r\n\r\n/**\r\n * Error Boundary for catching React errors\r\n *\r\n * @example\r\n * ```tsx\r\n * <ErrorBoundary\r\n *   onError={(error) => console.error(error)}\r\n *   componentName=\"KanbanBoard\"\r\n * >\r\n *   <KanbanBoard {...props} />\r\n * </ErrorBoundary>\r\n * ```\r\n */\r\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\r\n    const { onError, componentName } = this.props\r\n\r\n    // Log error to console in development\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.error(`Error in ${componentName || 'Component'}:`, error)\r\n      console.error('Error Info:', errorInfo)\r\n    }\r\n\r\n    // Update state with error info\r\n    this.setState({\r\n      errorInfo,\r\n    })\r\n\r\n    // Call custom error handler\r\n    if (onError) {\r\n      try {\r\n        onError(error, errorInfo)\r\n      } catch (handlerError) {\r\n        console.error('Error in error handler:', handlerError)\r\n      }\r\n    }\r\n  }\r\n\r\n  resetError = (): void => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    })\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const { hasError, error } = this.state\r\n    const { children, fallback, componentName } = this.props\r\n\r\n    if (hasError && error) {\r\n      // Use custom fallback if provided\r\n      if (fallback) {\r\n        return fallback(error, this.resetError)\r\n      }\r\n\r\n      // Default fallback UI\r\n      return (\r\n        <div\r\n          className=\"p-6 rounded-lg border\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(239, 68, 68, 0.3)',\r\n          }}\r\n        >\r\n          <div className=\"flex items-start gap-3\">\r\n            {/* Error icon */}\r\n            <svg\r\n              width=\"24\"\r\n              height=\"24\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              className=\"flex-shrink-0\"\r\n            >\r\n              <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"#EF4444\" strokeWidth=\"2\" />\r\n              <path d=\"M12 8V12\" stroke=\"#EF4444\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n              <circle cx=\"12\" cy=\"16\" r=\"1\" fill=\"#EF4444\" />\r\n            </svg>\r\n\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"text-lg font-semibold text-red-400 mb-1\">\r\n                {componentName ? `Error in ${componentName}` : 'Something went wrong'}\r\n              </h3>\r\n              <p className=\"text-sm text-white/70 mb-3\">\r\n                {error.message || 'An unexpected error occurred'}\r\n              </p>\r\n\r\n              {process.env.NODE_ENV === 'development' && (\r\n                <details className=\"mb-3\">\r\n                  <summary className=\"text-xs text-white/50 cursor-pointer hover:text-white/70 mb-2\">\r\n                    Error Details (Development Only)\r\n                  </summary>\r\n                  <pre className=\"text-xs text-white/60 bg-black/30 p-3 rounded overflow-auto max-h-48\">\r\n                    {error.stack}\r\n                  </pre>\r\n                </details>\r\n              )}\r\n\r\n              <button\r\n                onClick={this.resetError}\r\n                className=\"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-600/20 border border-red-500/30\"\r\n                style={{ color: '#EF4444' }}\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return children\r\n  }\r\n}\r\n\r\n/**\r\n * Hook-based error boundary wrapper\r\n * Use this for functional components\r\n */\r\nexport function withErrorBoundary<P extends object>(\r\n  Component: React.ComponentType<P>,\r\n  errorBoundaryProps?: Omit<ErrorBoundaryProps, 'children'>\r\n) {\r\n  const WrappedComponent = (props: P) => (\r\n    <ErrorBoundary {...errorBoundaryProps}>\r\n      <Component {...props} />\r\n    </ErrorBoundary>\r\n  )\r\n\r\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name || 'Component'})`\r\n\r\n  return WrappedComponent\r\n}\r\n","/**\r\n * CommandPalette - Premium command palette (Cmd+K / Ctrl+K)\r\n * Quick access to all board actions, search, navigation, and AI features\r\n */\r\n\r\nimport { useEffect, useState, useCallback } from 'react'\r\nimport { Command } from 'cmdk'\r\nimport { Portal } from '../Portal'\r\nimport type { Board, Priority, User } from '../../types'\r\nimport './command-palette.css'\r\n\r\nexport interface CommandPaletteProps {\r\n  /** Current board state */\r\n  board: Board\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Callback to create a new card */\r\n  onCreateCard?: (columnId: string, title: string) => void\r\n\r\n  /** Callback to navigate to a card */\r\n  onNavigateToCard?: (cardId: string) => void\r\n\r\n  /** Callback to search and filter cards */\r\n  onSearch?: (query: string) => void\r\n\r\n  /** Callback to change card priority */\r\n  onChangePriority?: (cardId: string, priority: Priority) => void\r\n\r\n  /** Callback to assign user to card */\r\n  onAssignUser?: (cardId: string, userId: string) => void\r\n\r\n  /** AI Callbacks */\r\n  onGeneratePlan?: () => void\r\n  onPredictRisks?: () => void\r\n  onOpenAIUsage?: () => void\r\n\r\n  /** Custom keyboard shortcut (default: Cmd+K / Ctrl+K) */\r\n  shortcut?: string\r\n\r\n  /** Custom CSS class */\r\n  className?: string\r\n}\r\n\r\ntype CommandPage = 'home' | 'create-card' | 'navigate' | 'priority' | 'assign' | 'ai'\r\n\r\nexport function CommandPalette({\r\n  board,\r\n  onCreateCard,\r\n  onNavigateToCard,\r\n  onSearch,\r\n  onChangePriority,\r\n  onAssignUser,\r\n  onGeneratePlan,\r\n  onPredictRisks,\r\n  onOpenAIUsage,\r\n  shortcut = 'k',\r\n  className = '',\r\n}: CommandPaletteProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [search, setSearch] = useState('')\r\n  const [page, setPage] = useState<CommandPage>('home')\r\n  const [selectedColumn, setSelectedColumn] = useState<string>('')\r\n  const [selectedCard, setSelectedCard] = useState<string>('')\r\n\r\n  // Keyboard shortcut handler\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if ((e.metaKey || e.ctrlKey) && e.key === shortcut) {\r\n        e.preventDefault()\r\n        setIsOpen((open) => !open)\r\n      }\r\n\r\n      // Escape to close\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setPage('home')\r\n        setSearch('')\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKeyDown)\r\n    return () => document.removeEventListener('keydown', handleKeyDown)\r\n  }, [shortcut])\r\n\r\n  // Reset state when closed\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setPage('home')\r\n      setSearch('')\r\n      setSelectedColumn('')\r\n      setSelectedCard('')\r\n    }\r\n  }, [isOpen])\r\n\r\n  const handleClose = useCallback(() => {\r\n    setIsOpen(false)\r\n  }, [])\r\n\r\n  const handleSelectCommand = useCallback(\r\n    (value: string) => {\r\n      // Parse command value\r\n      const [action, param] = value.split(':')\r\n\r\n      switch (action) {\r\n        case 'create-card':\r\n          setPage('create-card')\r\n          break\r\n\r\n        case 'create-card-in':\r\n          setSelectedColumn(param || '')\r\n          // Focus on input to type card title\r\n          break\r\n\r\n        case 'navigate':\r\n          if (param) {\r\n            onNavigateToCard?.(param)\r\n            handleClose()\r\n          } else {\r\n            setPage('navigate')\r\n          }\r\n          break\r\n\r\n        case 'search':\r\n          onSearch?.(search)\r\n          handleClose()\r\n          break\r\n\r\n        case 'priority':\r\n          setPage('priority')\r\n          break\r\n\r\n        case 'set-priority':\r\n          if (selectedCard && param) {\r\n            onChangePriority?.(selectedCard, param as Priority)\r\n            handleClose()\r\n          }\r\n          break\r\n\r\n        case 'assign':\r\n          setPage('assign')\r\n          break\r\n\r\n        case 'assign-user':\r\n          if (selectedCard && param) {\r\n            onAssignUser?.(selectedCard, param)\r\n            handleClose()\r\n          }\r\n          break\r\n\r\n        case 'ai':\r\n          setPage('ai')\r\n          break\r\n\r\n        case 'ai-generate-plan':\r\n          onGeneratePlan?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'ai-predict-risks':\r\n          onPredictRisks?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'ai-usage':\r\n          onOpenAIUsage?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'back':\r\n          setPage('home')\r\n          break\r\n\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [\r\n      search,\r\n      selectedCard,\r\n      onCreateCard,\r\n      onNavigateToCard,\r\n      onSearch,\r\n      onChangePriority,\r\n      onAssignUser,\r\n      onGeneratePlan,\r\n      onPredictRisks,\r\n      onOpenAIUsage,\r\n      handleClose,\r\n    ]\r\n  )\r\n\r\n  const handleCreateCard = useCallback(() => {\r\n    if (selectedColumn && search.trim()) {\r\n      onCreateCard?.(selectedColumn, search.trim())\r\n      handleClose()\r\n    }\r\n  }, [selectedColumn, search, onCreateCard, handleClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"command-palette-overlay\" onClick={handleClose}>\r\n        <div\r\n          className={`command-palette ${className}`}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <Command value={search} onValueChange={setSearch} label=\"Command Menu\">\r\n            <div className=\"command-palette-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n                <path d=\"m21 21-4.35-4.35\" />\r\n              </svg>\r\n              <Command.Input\r\n                placeholder={\r\n                  page === 'create-card' && selectedColumn\r\n                    ? 'Type card title and press Enter...'\r\n                    : page === 'create-card'\r\n                    ? 'Select a column first...'\r\n                    : 'Type a command or search...'\r\n                }\r\n                className=\"command-palette-input\"\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && page === 'create-card' && selectedColumn) {\r\n                    handleCreateCard()\r\n                  }\r\n                }}\r\n              />\r\n              <div className=\"command-palette-shortcut\">\r\n                <kbd>{navigator.platform.includes('Mac') ? '' : 'Ctrl'}</kbd>\r\n                <kbd>K</kbd>\r\n              </div>\r\n            </div>\r\n\r\n            <Command.List className=\"command-palette-list\">\r\n              <Command.Empty className=\"command-palette-empty\">\r\n                No results found.\r\n              </Command.Empty>\r\n\r\n              {/* HOME PAGE */}\r\n              {page === 'home' && (\r\n                <>\r\n                  <Command.Group heading=\"Actions\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"create-card\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\r\n                        <path d=\"M12 8v8m-4-4h8\" />\r\n                      </svg>\r\n                      <span>Create Card</span>\r\n                      <div className=\"command-palette-item-shortcut\">C</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"navigate\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <polyline points=\"12 16 16 12 12 8\" />\r\n                        <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" />\r\n                      </svg>\r\n                      <span>Navigate to Card</span>\r\n                      <div className=\"command-palette-item-shortcut\">G</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"search\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n                        <path d=\"m21 21-4.35-4.35\" />\r\n                      </svg>\r\n                      <span>Search Cards</span>\r\n                      <div className=\"command-palette-item-shortcut\">/</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n\r\n                  <Command.Group heading=\"AI Features\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"ai\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <span>AI Commands</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n\r\n                  <Command.Group heading=\"Cards\" className=\"command-palette-group\">\r\n                    {board.cards.slice(0, 5).map((card) => (\r\n                      <Command.Item\r\n                        key={card.id}\r\n                        value={`navigate:${card.id}`}\r\n                        onSelect={handleSelectCommand}\r\n                        className=\"command-palette-item\"\r\n                      >\r\n                        <div\r\n                          className=\"command-palette-item-dot\"\r\n                          style={{\r\n                            background:\r\n                              card.priority === 'URGENT'\r\n                                ? '#EF4444'\r\n                                : card.priority === 'HIGH'\r\n                                ? '#F59E0B'\r\n                                : card.priority === 'MEDIUM'\r\n                                ? '#3B82F6'\r\n                                : '#6B7280',\r\n                          }}\r\n                        />\r\n                        <span>{card.title}</span>\r\n                        {card.labels && card.labels.length > 0 && (\r\n                          <div className=\"command-palette-item-labels\">\r\n                            {card.labels.slice(0, 2).map((label) => (\r\n                              <span key={label} className=\"command-palette-item-label\">\r\n                                {label}\r\n                              </span>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </Command.Item>\r\n                    ))}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* CREATE CARD PAGE */}\r\n              {page === 'create-card' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group\r\n                    heading=\"Select Column\"\r\n                    className=\"command-palette-group\"\r\n                  >\r\n                    {board.columns.map((column) => (\r\n                      <Command.Item\r\n                        key={column.id}\r\n                        value={`create-card-in:${column.id}`}\r\n                        onSelect={handleSelectCommand}\r\n                        className=\"command-palette-item\"\r\n                      >\r\n                        <svg\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <rect x=\"3\" y=\"3\" width=\"7\" height=\"18\" rx=\"1\" />\r\n                        </svg>\r\n                        <span>{column.title}</span>\r\n                        <div className=\"command-palette-item-count\">\r\n                          {column.cardIds.length} cards\r\n                        </div>\r\n                      </Command.Item>\r\n                    ))}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* NAVIGATE PAGE */}\r\n              {page === 'navigate' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group heading=\"All Cards\" className=\"command-palette-group\">\r\n                    {board.cards.map((card) => {\r\n                      const column = board.columns.find((c) => c.id === card.columnId)\r\n                      return (\r\n                        <Command.Item\r\n                          key={card.id}\r\n                          value={`navigate:${card.id}`}\r\n                          onSelect={handleSelectCommand}\r\n                          className=\"command-palette-item\"\r\n                          keywords={[card.title, card.description || '', ...(card.labels || [])]}\r\n                        >\r\n                          <div\r\n                            className=\"command-palette-item-dot\"\r\n                            style={{\r\n                              background:\r\n                                card.priority === 'URGENT'\r\n                                  ? '#EF4444'\r\n                                  : card.priority === 'HIGH'\r\n                                  ? '#F59E0B'\r\n                                  : card.priority === 'MEDIUM'\r\n                                  ? '#3B82F6'\r\n                                  : '#6B7280',\r\n                            }}\r\n                          />\r\n                          <div className=\"command-palette-item-content\">\r\n                            <div>{card.title}</div>\r\n                            <div className=\"command-palette-item-meta\">\r\n                              {column?.title}\r\n                            </div>\r\n                          </div>\r\n                          {card.labels && card.labels.length > 0 && (\r\n                            <div className=\"command-palette-item-labels\">\r\n                              {card.labels.slice(0, 2).map((label) => (\r\n                                <span key={label} className=\"command-palette-item-label\">\r\n                                  {label}\r\n                                </span>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </Command.Item>\r\n                      )\r\n                    })}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* AI PAGE */}\r\n              {page === 'ai' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group heading=\"AI Features\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"ai-generate-plan\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <span>Generate Project Plan</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"ai-predict-risks\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z\" />\r\n                        <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\r\n                        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\r\n                      </svg>\r\n                      <span>Predict Risks</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"ai-usage\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\" />\r\n                        <path d=\"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" />\r\n                      </svg>\r\n                      <span>AI Usage & Costs</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n            </Command.List>\r\n\r\n            <div className=\"command-palette-footer\">\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd></kbd>\r\n                <kbd></kbd>\r\n                <span>Navigate</span>\r\n              </div>\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd>Enter</kbd>\r\n                <span>Select</span>\r\n              </div>\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd>Esc</kbd>\r\n                <span>Close</span>\r\n              </div>\r\n            </div>\r\n          </Command>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * AttachmentUploader Component\r\n * Drag & drop file uploader with preview\r\n */\r\n\r\nimport { useState, useCallback, useRef } from 'react'\r\nimport type { Attachment } from '../../types'\r\nimport './attachments.css'\r\n\r\nexport interface AttachmentUploaderProps {\r\n  /** Card ID for attachments */\r\n  cardId: string\r\n  /** Existing attachments */\r\n  attachments?: Attachment[]\r\n  /** Callback when files are uploaded */\r\n  onUpload?: (files: File[]) => Promise<void> | void\r\n  /** Callback when attachment is deleted */\r\n  onDelete?: (attachmentId: string) => void\r\n  /** Current user ID */\r\n  currentUserId?: string\r\n  /** Max file size in MB */\r\n  maxSizeMB?: number\r\n  /** Allowed file types (MIME types) */\r\n  allowedTypes?: string[]\r\n  /** Max number of files */\r\n  maxFiles?: number\r\n}\r\n\r\n/**\r\n * Format file size to human readable string\r\n */\r\nfunction formatFileSize(bytes: number): string {\r\n  if (bytes === 0) return '0 Bytes'\r\n  const k = 1024\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\r\n}\r\n\r\n/**\r\n * Get file icon based on MIME type\r\n */\r\nfunction getFileIcon(type: string): string {\r\n  if (type.startsWith('image/')) return ''\r\n  if (type.startsWith('video/')) return ''\r\n  if (type.startsWith('audio/')) return ''\r\n  if (type.includes('pdf')) return ''\r\n  if (type.includes('word') || type.includes('document')) return ''\r\n  if (type.includes('sheet') || type.includes('excel')) return ''\r\n  if (type.includes('presentation') || type.includes('powerpoint')) return ''\r\n  if (type.includes('zip') || type.includes('rar') || type.includes('compressed')) return ''\r\n  if (type.includes('text')) return ''\r\n  return ''\r\n}\r\n\r\n/**\r\n * Check if file is an image\r\n */\r\nfunction isImage(type: string): boolean {\r\n  return type.startsWith('image/')\r\n}\r\n\r\nexport function AttachmentUploader({\r\n  attachments = [],\r\n  onUpload,\r\n  onDelete,\r\n  maxSizeMB = 10,\r\n  allowedTypes,\r\n  maxFiles = 10,\r\n}: AttachmentUploaderProps) {\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [isUploading, setIsUploading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Handle file validation\r\n  const validateFiles = useCallback(\r\n    (files: File[]): { valid: File[]; errors: string[] } => {\r\n      const valid: File[] = []\r\n      const errors: string[] = []\r\n\r\n      // Check max files\r\n      if (attachments.length + files.length > maxFiles) {\r\n        errors.push(`Maximum ${maxFiles} files allowed`)\r\n        return { valid, errors }\r\n      }\r\n\r\n      files.forEach((file) => {\r\n        // Check file size\r\n        const sizeMB = file.size / (1024 * 1024)\r\n        if (sizeMB > maxSizeMB) {\r\n          errors.push(`${file.name} is too large (max ${maxSizeMB}MB)`)\r\n          return\r\n        }\r\n\r\n        // Check file type\r\n        if (allowedTypes && !allowedTypes.some((type) => file.type.match(type))) {\r\n          errors.push(`${file.name} has invalid file type`)\r\n          return\r\n        }\r\n\r\n        valid.push(file)\r\n      })\r\n\r\n      return { valid, errors }\r\n    },\r\n    [attachments.length, maxFiles, maxSizeMB, allowedTypes]\r\n  )\r\n\r\n  // Handle file upload\r\n  const handleUpload = useCallback(\r\n    async (files: File[]) => {\r\n      const { valid, errors } = validateFiles(files)\r\n\r\n      if (errors.length > 0) {\r\n        setError(errors.join(', '))\r\n        setTimeout(() => setError(null), 5000)\r\n        return\r\n      }\r\n\r\n      if (valid.length === 0) return\r\n\r\n      setIsUploading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        await onUpload?.(valid)\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Upload failed')\r\n        setTimeout(() => setError(null), 5000)\r\n      } finally {\r\n        setIsUploading(false)\r\n      }\r\n    },\r\n    [validateFiles, onUpload]\r\n  )\r\n\r\n  // Handle drag events\r\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    setIsDragging(true)\r\n  }, [])\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    setIsDragging(false)\r\n  }, [])\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n  }, [])\r\n\r\n  const handleDrop = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      setIsDragging(false)\r\n\r\n      const files = Array.from(e.dataTransfer.files)\r\n      handleUpload(files)\r\n    },\r\n    [handleUpload]\r\n  )\r\n\r\n  // Handle file input change\r\n  const handleFileInputChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const files = e.target.files ? Array.from(e.target.files) : []\r\n      handleUpload(files)\r\n      // Reset input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = ''\r\n      }\r\n    },\r\n    [handleUpload]\r\n  )\r\n\r\n  // Handle click to open file dialog\r\n  const handleClick = useCallback(() => {\r\n    fileInputRef.current?.click()\r\n  }, [])\r\n\r\n  // Handle delete\r\n  const handleDelete = useCallback(\r\n    (attachmentId: string) => {\r\n      if (confirm('Are you sure you want to delete this attachment?')) {\r\n        onDelete?.(attachmentId)\r\n      }\r\n    },\r\n    [onDelete]\r\n  )\r\n\r\n  return (\r\n    <div className=\"attachment-uploader\">\r\n      {/* Drop zone */}\r\n      <div\r\n        className={`attachment-dropzone ${isDragging ? 'dragging' : ''} ${isUploading ? 'uploading' : ''}`}\r\n        onDragEnter={handleDragEnter}\r\n        onDragLeave={handleDragLeave}\r\n        onDragOver={handleDragOver}\r\n        onDrop={handleDrop}\r\n        onClick={handleClick}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          onChange={handleFileInputChange}\r\n          style={{ display: 'none' }}\r\n          accept={allowedTypes?.join(',')}\r\n        />\r\n\r\n        <div className=\"attachment-dropzone-content\">\r\n          {isUploading ? (\r\n            <>\r\n              <div className=\"attachment-spinner\" />\r\n              <p className=\"attachment-dropzone-text\">Uploading...</p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg\r\n                width=\"48\"\r\n                height=\"48\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"attachment-dropzone-icon\"\r\n              >\r\n                <path\r\n                  d=\"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M17 8L12 3L7 8\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M12 3V15\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n              <p className=\"attachment-dropzone-text\">\r\n                {isDragging ? 'Drop files here' : 'Drag & drop files here'}\r\n              </p>\r\n              <p className=\"attachment-dropzone-subtext\">or click to browse</p>\r\n              <p className=\"attachment-dropzone-info\">\r\n                Max {maxSizeMB}MB  {attachments.length}/{maxFiles} files\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error message */}\r\n      {error && (\r\n        <div className=\"attachment-error\">\r\n          <span className=\"attachment-error-icon\"></span>\r\n          <span className=\"attachment-error-text\">{error}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Attachment list */}\r\n      {attachments.length > 0 && (\r\n        <div className=\"attachment-list\">\r\n          {attachments.map((attachment) => (\r\n            <div key={attachment.id} className=\"attachment-item\">\r\n              <div className=\"attachment-preview\">\r\n                {isImage(attachment.type) && attachment.url ? (\r\n                  <img\r\n                    src={attachment.thumbnailUrl || attachment.url}\r\n                    alt={attachment.name}\r\n                    className=\"attachment-thumbnail\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"attachment-icon\">{getFileIcon(attachment.type)}</div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"attachment-info\">\r\n                <a\r\n                  href={attachment.url}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"attachment-name\"\r\n                  title={attachment.name}\r\n                >\r\n                  {attachment.name}\r\n                </a>\r\n                <div className=\"attachment-meta\">\r\n                  <span className=\"attachment-size\">{formatFileSize(attachment.size)}</span>\r\n                  <span className=\"attachment-separator\"></span>\r\n                  <span className=\"attachment-date\">\r\n                    {new Date(attachment.uploadedAt).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => handleDelete(attachment.id)}\r\n                className=\"attachment-delete\"\r\n                title=\"Delete attachment\"\r\n                type=\"button\"\r\n              >\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M18 6L6 18M6 6L18 18\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardDetailModal - Premium full-featured card detail modal\r\n * Features: Details tab, Comments, Activity log, AI suggestions\r\n */\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport { AttachmentUploader } from '../Attachments'\r\nimport type { Card, User, Comment, Activity, Insight, AssigneeSuggestion, Attachment } from '../../types'\r\nimport './card-detail-modal.css'\r\n\r\nexport interface CardDetailModalProps {\r\n  /** Card to display */\r\n  card: Card | null\r\n\r\n  /** Whether modal is open */\r\n  isOpen: boolean\r\n\r\n  /** Close callback */\r\n  onClose: () => void\r\n\r\n  /** Update card callback */\r\n  onUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n\r\n  /** Delete card callback */\r\n  onDelete?: (cardId: string) => void\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Comments for this card */\r\n  comments?: Comment[]\r\n\r\n  /** Activity log for this card */\r\n  activities?: Activity[]\r\n\r\n  /** AI insights for this card */\r\n  aiInsights?: Insight[]\r\n\r\n  /** Attachments for this card */\r\n  attachments?: Attachment[]\r\n\r\n  /** Add comment callback */\r\n  onAddComment?: (cardId: string, content: string) => void\r\n\r\n  /** Delete comment callback */\r\n  onDeleteComment?: (commentId: string) => void\r\n\r\n  /** Upload attachments callback */\r\n  onUploadAttachments?: (cardId: string, files: File[]) => Promise<void> | void\r\n\r\n  /** Delete attachment callback */\r\n  onDeleteAttachment?: (attachmentId: string) => void\r\n\r\n  /** Current user ID */\r\n  currentUserId?: string\r\n\r\n  /** AI: Suggest assignee */\r\n  onSuggestAssignee?: (card: Card) => Promise<AssigneeSuggestion[]>\r\n\r\n  /** AI: Generate subtasks */\r\n  onGenerateSubtasks?: (card: Card) => Promise<Omit<Card, 'id'>[]>\r\n\r\n  /** AI: Estimate effort */\r\n  onEstimateEffort?: (card: Card) => Promise<{ hours: number; confidence: number }>\r\n}\r\n\r\ntype TabType = 'details' | 'comments' | 'activity' | 'attachments' | 'ai'\r\n\r\nexport function CardDetailModal({\r\n  card,\r\n  isOpen,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete,\r\n  availableUsers = [],\r\n  comments = [],\r\n  activities = [],\r\n  aiInsights = [],\r\n  attachments = [],\r\n  onAddComment,\r\n  onDeleteComment,\r\n  onUploadAttachments,\r\n  onDeleteAttachment,\r\n  onSuggestAssignee,\r\n  onGenerateSubtasks,\r\n  onEstimateEffort,\r\n  currentUserId = 'user-1',\r\n}: CardDetailModalProps) {\r\n  const [activeTab, setActiveTab] = useState<TabType>('details')\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [editedCard, setEditedCard] = useState<Partial<Card>>({})\r\n  const [newComment, setNewComment] = useState('')\r\n  const [aiLoading, setAiLoading] = useState(false)\r\n  const [aiSuggestions, setAiSuggestions] = useState<{\r\n    assignees?: AssigneeSuggestion[]\r\n    subtasks?: Omit<Card, 'id'>[]\r\n    effort?: { hours: number; confidence: number }\r\n  }>({})\r\n\r\n  if (!isOpen || !card) return null\r\n\r\n  const handleClose = useCallback(() => {\r\n    setIsEditing(false)\r\n    setEditedCard({})\r\n    setActiveTab('details')\r\n    setNewComment('')\r\n    setAiSuggestions({})\r\n    onClose()\r\n  }, [onClose])\r\n\r\n  const handleSave = useCallback(() => {\r\n    if (onUpdate && Object.keys(editedCard).length > 0) {\r\n      onUpdate(card.id, editedCard)\r\n      setEditedCard({})\r\n      setIsEditing(false)\r\n    }\r\n  }, [card.id, editedCard, onUpdate])\r\n\r\n  const handleDelete = useCallback(() => {\r\n    if (\r\n      onDelete &&\r\n      window.confirm('Are you sure you want to delete this card?')\r\n    ) {\r\n      onDelete(card.id)\r\n      handleClose()\r\n    }\r\n  }, [card.id, onDelete, handleClose])\r\n\r\n  const handleAddComment = useCallback(() => {\r\n    if (onAddComment && newComment.trim()) {\r\n      onAddComment(card.id, newComment.trim())\r\n      setNewComment('')\r\n    }\r\n  }, [card.id, newComment, onAddComment])\r\n\r\n  const handleSuggestAssignee = useCallback(async () => {\r\n    if (!onSuggestAssignee) return\r\n    setAiLoading(true)\r\n    try {\r\n      const suggestions = await onSuggestAssignee(card)\r\n      setAiSuggestions((prev) => ({ ...prev, assignees: suggestions }))\r\n    } catch (error) {\r\n      console.error('Failed to suggest assignee:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onSuggestAssignee])\r\n\r\n  const handleGenerateSubtasks = useCallback(async () => {\r\n    if (!onGenerateSubtasks) return\r\n    setAiLoading(true)\r\n    try {\r\n      const subtasks = await onGenerateSubtasks(card)\r\n      setAiSuggestions((prev) => ({ ...prev, subtasks }))\r\n    } catch (error) {\r\n      console.error('Failed to generate subtasks:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onGenerateSubtasks])\r\n\r\n  const handleEstimateEffort = useCallback(async () => {\r\n    if (!onEstimateEffort) return\r\n    setAiLoading(true)\r\n    try {\r\n      const effort = await onEstimateEffort(card)\r\n      setAiSuggestions((prev) => ({ ...prev, effort }))\r\n    } catch (error) {\r\n      console.error('Failed to estimate effort:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onEstimateEffort])\r\n\r\n  const currentCard = { ...card, ...editedCard }\r\n\r\n  const assignedUsers = availableUsers.filter((user) =>\r\n    currentCard.assignedUserIds?.includes(user.id)\r\n  )\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"card-detail-overlay\" onClick={handleClose}>\r\n        <div\r\n          className=\"card-detail-modal\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"card-detail-header\">\r\n            <div className=\"card-detail-header-left\">\r\n              <div\r\n                className=\"card-detail-priority-dot\"\r\n                style={{\r\n                  background:\r\n                    currentCard.priority === 'URGENT'\r\n                      ? '#EF4444'\r\n                      : currentCard.priority === 'HIGH'\r\n                      ? '#F59E0B'\r\n                      : currentCard.priority === 'MEDIUM'\r\n                      ? '#3B82F6'\r\n                      : '#6B7280',\r\n                }}\r\n              />\r\n              {isEditing ? (\r\n                <input\r\n                  type=\"text\"\r\n                  value={editedCard.title ?? currentCard.title}\r\n                  onChange={(e) =>\r\n                    setEditedCard({ ...editedCard, title: e.target.value })\r\n                  }\r\n                  className=\"card-detail-title-input\"\r\n                  placeholder=\"Card title\"\r\n                />\r\n              ) : (\r\n                <h2 className=\"card-detail-title\">{currentCard.title}</h2>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"card-detail-header-actions\">\r\n              {isEditing ? (\r\n                <>\r\n                  <button\r\n                    onClick={handleSave}\r\n                    className=\"card-detail-btn card-detail-btn-primary\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsEditing(false)\r\n                      setEditedCard({})\r\n                    }}\r\n                    className=\"card-detail-btn\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={() => setIsEditing(true)}\r\n                  className=\"card-detail-btn\"\r\n                >\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\r\n                    <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                  </svg>\r\n                  Edit\r\n                </button>\r\n              )}\r\n\r\n              <button onClick={handleDelete} className=\"card-detail-btn card-detail-btn-danger\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <polyline points=\"3 6 5 6 21 6\" />\r\n                  <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                </svg>\r\n                Delete\r\n              </button>\r\n\r\n              <button onClick={handleClose} className=\"card-detail-btn-close\">\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"card-detail-tabs\">\r\n            <button\r\n              onClick={() => setActiveTab('details')}\r\n              className={`card-detail-tab ${activeTab === 'details' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z\" />\r\n                <polyline points=\"14 2 14 8 20 8\" />\r\n                <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                <polyline points=\"10 9 9 9 8 9\" />\r\n              </svg>\r\n              Details\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('comments')}\r\n              className={`card-detail-tab ${activeTab === 'comments' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n              </svg>\r\n              Comments\r\n              {comments.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{comments.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('activity')}\r\n              className={`card-detail-tab ${activeTab === 'activity' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\r\n              </svg>\r\n              Activity\r\n              {activities.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{activities.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('attachments')}\r\n              className={`card-detail-tab ${activeTab === 'attachments' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\r\n              </svg>\r\n              Attachments\r\n              {attachments.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{attachments.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('ai')}\r\n              className={`card-detail-tab ${activeTab === 'ai' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                <path d=\"M2 17L12 22L22 17\" />\r\n                <path d=\"M2 12L12 17L22 12\" />\r\n              </svg>\r\n              AI Insights\r\n              <span className=\"card-detail-tab-badge card-detail-tab-badge-ai\">\r\n                AI\r\n              </span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tab Content */}\r\n          <div className=\"card-detail-content\">\r\n            {/* DETAILS TAB */}\r\n            {activeTab === 'details' && (\r\n              <div className=\"card-detail-details\">\r\n                {/* Description */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Description</label>\r\n                  {isEditing ? (\r\n                    <textarea\r\n                      value={editedCard.description ?? currentCard.description ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({ ...editedCard, description: e.target.value })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      placeholder=\"Add a description...\"\r\n                      rows={4}\r\n                    />\r\n                  ) : (\r\n                    <p className=\"card-detail-text\">\r\n                      {currentCard.description || 'No description'}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Assignees */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Assigned To</label>\r\n                  {isEditing ? (\r\n                    <select\r\n                      multiple\r\n                      value={editedCard.assignedUserIds ?? currentCard.assignedUserIds ?? []}\r\n                      onChange={(e) => {\r\n                        const selected = Array.from(e.target.selectedOptions, (option) => option.value)\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          assignedUserIds: selected,\r\n                        })\r\n                      }}\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: '120px', padding: '8px 12px' }}\r\n                    >\r\n                      {availableUsers.map((user) => (\r\n                        <option key={user.id} value={user.id}>\r\n                          {user.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  ) : (\r\n                    <div className=\"card-detail-users\">\r\n                      {assignedUsers.length > 0 ? (\r\n                        assignedUsers.map((user) => (\r\n                          <div key={user.id} className=\"card-detail-user\">\r\n                            <div\r\n                              className=\"card-detail-user-avatar\"\r\n                              style={{ background: user.color }}\r\n                            >\r\n                              {user.initials}\r\n                            </div>\r\n                            <span>{user.name}</span>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <span className=\"card-detail-empty\">Unassigned</span>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Priority */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Priority</label>\r\n                  {isEditing ? (\r\n                    <select\r\n                      value={editedCard.priority ?? currentCard.priority ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          priority: (e.target.value || undefined) as any,\r\n                        })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: 'auto', padding: '8px 12px' }}\r\n                    >\r\n                      <option value=\"\">None</option>\r\n                      <option value=\"LOW\">LOW</option>\r\n                      <option value=\"MEDIUM\">MEDIUM</option>\r\n                      <option value=\"HIGH\">HIGH</option>\r\n                      <option value=\"URGENT\">URGENT</option>\r\n                    </select>\r\n                  ) : (\r\n                    <div className=\"card-detail-priority\">\r\n                      <div\r\n                        className=\"card-detail-priority-dot\"\r\n                        style={{\r\n                          background:\r\n                            currentCard.priority === 'URGENT'\r\n                              ? '#EF4444'\r\n                              : currentCard.priority === 'HIGH'\r\n                              ? '#F59E0B'\r\n                              : currentCard.priority === 'MEDIUM'\r\n                              ? '#3B82F6'\r\n                              : '#6B7280',\r\n                        }}\r\n                      />\r\n                      <span>{currentCard.priority || 'None'}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Labels */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Labels</label>\r\n                  <div className=\"card-detail-labels\">\r\n                    {currentCard.labels && currentCard.labels.length > 0 ? (\r\n                      currentCard.labels.map((label) => (\r\n                        <span key={label} className=\"card-detail-label-tag\">\r\n                          {label}\r\n                        </span>\r\n                      ))\r\n                    ) : (\r\n                      <span className=\"card-detail-empty\">No labels</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Dates */}\r\n                <div className=\"card-detail-section-row\">\r\n                  <div className=\"card-detail-section\">\r\n                    <label className=\"card-detail-label\">Start Date</label>\r\n                    {isEditing ? (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={\r\n                          editedCard.startDate\r\n                            ? new Date(editedCard.startDate).toISOString().split('T')[0]\r\n                            : currentCard.startDate\r\n                            ? new Date(currentCard.startDate).toISOString().split('T')[0]\r\n                            : ''\r\n                        }\r\n                        onChange={(e) =>\r\n                          setEditedCard({\r\n                            ...editedCard,\r\n                            startDate: e.target.value || undefined,\r\n                          })\r\n                        }\r\n                        className=\"card-detail-textarea\"\r\n                        style={{ height: 'auto', padding: '8px 12px' }}\r\n                      />\r\n                    ) : (\r\n                      <span className=\"card-detail-text\">\r\n                        {currentCard.startDate\r\n                          ? new Date(currentCard.startDate).toLocaleDateString()\r\n                          : 'Not set'}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"card-detail-section\">\r\n                    <label className=\"card-detail-label\">End Date</label>\r\n                    {isEditing ? (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={\r\n                          editedCard.endDate\r\n                            ? new Date(editedCard.endDate).toISOString().split('T')[0]\r\n                            : currentCard.endDate\r\n                            ? new Date(currentCard.endDate).toISOString().split('T')[0]\r\n                            : ''\r\n                        }\r\n                        onChange={(e) =>\r\n                          setEditedCard({\r\n                            ...editedCard,\r\n                            endDate: e.target.value || undefined,\r\n                          })\r\n                        }\r\n                        className=\"card-detail-textarea\"\r\n                        style={{ height: 'auto', padding: '8px 12px' }}\r\n                      />\r\n                    ) : (\r\n                      <span className=\"card-detail-text\">\r\n                        {currentCard.endDate\r\n                          ? new Date(currentCard.endDate).toLocaleDateString()\r\n                          : 'Not set'}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Estimated Time */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Estimated Hours</label>\r\n                  {isEditing ? (\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.5\"\r\n                      value={editedCard.estimatedTime ?? currentCard.estimatedTime ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          estimatedTime: e.target.value ? parseFloat(e.target.value) : undefined,\r\n                        })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: 'auto', padding: '8px 12px' }}\r\n                      placeholder=\"Enter hours\"\r\n                    />\r\n                  ) : (\r\n                    <span className=\"card-detail-text\">\r\n                      {currentCard.estimatedTime || 'Not estimated'}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Dependencies */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Dependencies</label>\r\n                  <div className=\"card-detail-dependencies\">\r\n                    {currentCard.dependencies && currentCard.dependencies.length > 0 ? (\r\n                      currentCard.dependencies.map((dep) => {\r\n                        const depId = typeof dep === 'string' ? dep : dep.taskId\r\n                        return (\r\n                          <span key={depId} className=\"card-detail-dependency\">\r\n                            Card #{depId.slice(-4)}\r\n                          </span>\r\n                        )\r\n                      })\r\n                    ) : (\r\n                      <span className=\"card-detail-empty\">No dependencies</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Metadata */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Created</label>\r\n                  <span className=\"card-detail-text\">\r\n                    {currentCard.createdAt\r\n                      ? new Date(currentCard.createdAt).toLocaleString()\r\n                      : 'Unknown'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* COMMENTS TAB */}\r\n            {activeTab === 'comments' && (\r\n              <div className=\"card-detail-comments\">\r\n                {/* New Comment */}\r\n                <div className=\"card-detail-comment-form\">\r\n                  <textarea\r\n                    value={newComment}\r\n                    onChange={(e) => setNewComment(e.target.value)}\r\n                    className=\"card-detail-comment-textarea\"\r\n                    placeholder=\"Write a comment...\"\r\n                    rows={3}\r\n                  />\r\n                  <button\r\n                    onClick={handleAddComment}\r\n                    disabled={!newComment.trim()}\r\n                    className=\"card-detail-btn card-detail-btn-primary\"\r\n                  >\r\n                    Add Comment\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Comments List */}\r\n                <div className=\"card-detail-comments-list\">\r\n                  {comments.length > 0 ? (\r\n                    comments.map((comment) => {\r\n                      const author = availableUsers.find((u) => u.id === comment.authorId)\r\n                      return (\r\n                        <div key={comment.id} className=\"card-detail-comment\">\r\n                          <div className=\"card-detail-comment-header\">\r\n                            <div className=\"card-detail-comment-author\">\r\n                              {author && (\r\n                                <div\r\n                                  className=\"card-detail-user-avatar\"\r\n                                  style={{ background: author.color }}\r\n                                >\r\n                                  {author.initials}\r\n                                </div>\r\n                              )}\r\n                              <div>\r\n                                <div className=\"card-detail-comment-author-name\">\r\n                                  {author?.name || 'Unknown'}\r\n                                </div>\r\n                                <div className=\"card-detail-comment-time\">\r\n                                  {new Date(comment.createdAt).toLocaleString()}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {onDeleteComment && (\r\n                              <button\r\n                                onClick={() => onDeleteComment(comment.id)}\r\n                                className=\"card-detail-comment-delete\"\r\n                              >\r\n                                <svg\r\n                                  width=\"14\"\r\n                                  height=\"14\"\r\n                                  viewBox=\"0 0 24 24\"\r\n                                  fill=\"none\"\r\n                                  stroke=\"currentColor\"\r\n                                  strokeWidth=\"2\"\r\n                                >\r\n                                  <polyline points=\"3 6 5 6 21 6\" />\r\n                                  <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                                </svg>\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"card-detail-comment-content\">{comment.content}</p>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  ) : (\r\n                    <div className=\"card-detail-empty-state\">\r\n                      <svg\r\n                        width=\"48\"\r\n                        height=\"48\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"1.5\"\r\n                      >\r\n                        <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n                      </svg>\r\n                      <p>No comments yet</p>\r\n                      <span>Be the first to comment</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ACTIVITY TAB */}\r\n            {activeTab === 'activity' && (\r\n              <div className=\"card-detail-activity\">\r\n                {activities.length > 0 ? (\r\n                  <div className=\"card-detail-activity-list\">\r\n                    {activities.map((activity) => {\r\n                      const user = availableUsers.find((u) => u.id === activity.userId)\r\n                      return (\r\n                        <div key={activity.id} className=\"card-detail-activity-item\">\r\n                          <div className=\"card-detail-activity-icon\">\r\n                            {activity.type.includes('CREATED') && ''}\r\n                            {activity.type.includes('UPDATED') && ''}\r\n                            {activity.type.includes('MOVED') && ''}\r\n                            {activity.type.includes('DELETED') && ''}\r\n                            {activity.type.includes('COMMENT') && ''}\r\n                            {activity.type.includes('ASSIGNED') && ''}\r\n                            {activity.type.includes('PRIORITY') && ''}\r\n                            {activity.type.includes('LABEL') && ''}\r\n                            {activity.type.includes('ATTACHMENT') && ''}\r\n                          </div>\r\n                          <div className=\"card-detail-activity-content\">\r\n                            <div className=\"card-detail-activity-text\">\r\n                              <strong>{user?.name || 'Unknown'}</strong>{' '}\r\n                              {activity.type.replace(/_/g, ' ').toLowerCase()}\r\n                              {activity.newValue && (\r\n                                <span className=\"card-detail-activity-value\">\r\n                                  {' '}\r\n                                  to <strong>{activity.newValue}</strong>\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"card-detail-activity-time\">\r\n                              {new Date(activity.timestamp).toLocaleString()}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"card-detail-empty-state\">\r\n                    <svg\r\n                      width=\"48\"\r\n                      height=\"48\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"1.5\"\r\n                    >\r\n                      <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\r\n                    </svg>\r\n                    <p>No activity yet</p>\r\n                    <span>Activity will appear here</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ATTACHMENTS TAB */}\r\n            {activeTab === 'attachments' && (\r\n              <div className=\"card-detail-attachments\">\r\n                <AttachmentUploader\r\n                  cardId={card.id}\r\n                  attachments={attachments}\r\n                  onUpload={onUploadAttachments ? (files) => onUploadAttachments(card.id, files) : undefined}\r\n                  onDelete={onDeleteAttachment}\r\n                  currentUserId={currentUserId}\r\n                  maxSizeMB={10}\r\n                  maxFiles={20}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* AI TAB */}\r\n            {activeTab === 'ai' && (\r\n              <div className=\"card-detail-ai\">\r\n                {/* AI Actions */}\r\n                <div className=\"card-detail-ai-actions\">\r\n                  <h3 className=\"card-detail-ai-heading\">AI-Powered Suggestions</h3>\r\n\r\n                  <button\r\n                    onClick={handleSuggestAssignee}\r\n                    disabled={aiLoading || !onSuggestAssignee}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n                      <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n                    </svg>\r\n                    Suggest Best Assignee\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={handleGenerateSubtasks}\r\n                    disabled={aiLoading || !onGenerateSubtasks}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\" />\r\n                      <line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\" />\r\n                      <line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\" />\r\n                      <line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\" />\r\n                      <line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\" />\r\n                      <line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\" />\r\n                    </svg>\r\n                    Generate Subtasks\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={handleEstimateEffort}\r\n                    disabled={aiLoading || !onEstimateEffort}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                      <polyline points=\"12 6 12 12 16 14\" />\r\n                    </svg>\r\n                    Estimate Effort\r\n                  </button>\r\n                </div>\r\n\r\n                {/* AI Suggestions Results */}\r\n                {aiSuggestions.assignees && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Assignee Suggestions</h4>\r\n                    {aiSuggestions.assignees.map((suggestion, index) => {\r\n                      const user = availableUsers.find((u) => u.id === suggestion.userId)\r\n                      return (\r\n                        <div key={index} className=\"card-detail-ai-suggestion\">\r\n                          {user && (\r\n                            <div\r\n                              className=\"card-detail-user-avatar\"\r\n                              style={{ background: user.color }}\r\n                            >\r\n                              {user.initials}\r\n                            </div>\r\n                          )}\r\n                          <div>\r\n                            <div className=\"card-detail-ai-suggestion-name\">\r\n                              {user?.name}\r\n                            </div>\r\n                            <div className=\"card-detail-ai-suggestion-reason\">\r\n                              {suggestion.reasoning}\r\n                            </div>\r\n                            <div className=\"card-detail-ai-suggestion-confidence\">\r\n                              Confidence: {(suggestion.confidence * 100).toFixed(0)}%\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                )}\r\n\r\n                {aiSuggestions.subtasks && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Suggested Subtasks</h4>\r\n                    {aiSuggestions.subtasks.map((subtask, index) => (\r\n                      <div key={index} className=\"card-detail-ai-subtask\">\r\n                        <div className=\"card-detail-ai-subtask-title\">\r\n                          {subtask.title}\r\n                        </div>\r\n                        {subtask.description && (\r\n                          <div className=\"card-detail-ai-subtask-desc\">\r\n                            {subtask.description}\r\n                          </div>\r\n                        )}\r\n                        {subtask.estimatedTime && (\r\n                          <div className=\"card-detail-ai-subtask-time\">\r\n                            Est: {subtask.estimatedTime}h\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {aiSuggestions.effort && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Effort Estimate</h4>\r\n                    <div className=\"card-detail-ai-effort\">\r\n                      <div className=\"card-detail-ai-effort-hours\">\r\n                        {aiSuggestions.effort.hours} hours\r\n                      </div>\r\n                      <div className=\"card-detail-ai-effort-confidence\">\r\n                        Confidence: {(aiSuggestions.effort.confidence * 100).toFixed(0)}%\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* AI Insights */}\r\n                {aiInsights.length > 0 && (\r\n                  <div className=\"card-detail-ai-insights\">\r\n                    <h4>AI Insights</h4>\r\n                    {aiInsights.map((insight) => (\r\n                      <div\r\n                        key={insight.id}\r\n                        className={`card-detail-ai-insight card-detail-ai-insight-${insight.severity.toLowerCase()}`}\r\n                      >\r\n                        <div className=\"card-detail-ai-insight-header\">\r\n                          <span className=\"card-detail-ai-insight-title\">\r\n                            {insight.title}\r\n                          </span>\r\n                          <span className=\"card-detail-ai-insight-severity\">\r\n                            {insight.severity}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"card-detail-ai-insight-desc\">\r\n                          {insight.description}\r\n                        </p>\r\n                        {insight.suggestedAction && (\r\n                          <div className=\"card-detail-ai-insight-action\">\r\n                             {insight.suggestedAction}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {!aiSuggestions.assignees &&\r\n                  !aiSuggestions.subtasks &&\r\n                  !aiSuggestions.effort &&\r\n                  aiInsights.length === 0 && (\r\n                    <div className=\"card-detail-empty-state\">\r\n                      <svg\r\n                        width=\"48\"\r\n                        height=\"48\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"1.5\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <p>AI Suggestions</p>\r\n                      <span>Click a button above to get AI-powered insights</span>\r\n                    </div>\r\n                  )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * CardDetailModal V2.0 - Premium task detail view\r\n *\r\n * Design Philosophy:\r\n * - Speed above all: <100ms open time\r\n * - Keyboard-first interaction\r\n * - Single vertical flow (no sidebars)\r\n * - Instant inline editing\r\n * - Zero friction UX\r\n *\r\n * ALL PHASES IMPLEMENTED:\r\n *  Phase 1: Modal + Header + Metadata (COMPLETE)\r\n *  Phase 2: Status & Priority selectors (COMPLETE)\r\n *  Phase 3: Assignees & Labels selectors (COMPLETE)\r\n *  Phase 4: Date picker & Time input (COMPLETE)\r\n *  Phase 5: Markdown renderer (COMPLETE)\r\n *  Phase 6: Animations & Accessibility polish (COMPLETE)\r\n */\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport remarkGfm from 'remark-gfm'\r\nimport rehypeSanitize from 'rehype-sanitize'\r\nimport { Portal } from '../Portal'\r\n// COVER IMAGE - Commented out for future use. Uncomment to enable cover image functionality\r\n// import { CoverImageManager } from '../CoverImage'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\nimport type { Card, User, Comment, Activity, Subtask } from '../../types'\r\nimport './card-detail-modal-v2.css'\r\n\r\nexport interface CardDetailModalV2Props {\r\n  /** Card to display */\r\n  card: Card | null\r\n\r\n  /** Whether modal is open */\r\n  isOpen: boolean\r\n\r\n  /** Close callback */\r\n  onClose: () => void\r\n\r\n  /** Update card callback */\r\n  onUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n\r\n  /** Delete card callback */\r\n  onDelete?: (cardId: string) => void\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Comments for this card */\r\n  comments?: Comment[]\r\n\r\n  /** Activity log for this card */\r\n  activities?: Activity[]\r\n\r\n  /** Add comment callback */\r\n  onAddComment?: (cardId: string, content: string) => void\r\n\r\n  /** Delete comment callback */\r\n  onDeleteComment?: (commentId: string) => void\r\n\r\n  /** Current user */\r\n  currentUser?: User\r\n\r\n  /** AI: Generate description */\r\n  onAIGenerateDescription?: (card: Card) => Promise<string>\r\n\r\n  /** AI: Create subtasks */\r\n  onAICreateSubtasks?: (card: Card) => Promise<string[]>\r\n\r\n  /** AI: Find similar tasks */\r\n  onAIFindSimilar?: (card: Card) => Promise<Card[]>\r\n\r\n  /** Available columns for status */\r\n  availableColumns?: Array<{ id: string; title: string }>\r\n\r\n  /** Available labels */\r\n  availableLabels?: string[]\r\n\r\n  /** Upload cover image callback (optional - returns public URL) */\r\n  onUploadCoverImage?: (file: File) => Promise<string>\r\n\r\n  /** Unsplash API key for cover images (optional) */\r\n  unsplashAccessKey?: string\r\n\r\n  /** Theme for the modal (dark, light, neutral). If not provided, uses KanbanThemeContext or defaults to 'dark' */\r\n  theme?: 'dark' | 'light' | 'neutral'\r\n\r\n  /** Callback when subtasks are changed (for persistence) */\r\n  onSubtasksChange?: (cardId: string, subtasks: Subtask[]) => void\r\n}\r\n\r\nconst PRIORITY_OPTIONS = ['LOW', 'MEDIUM', 'HIGH', 'URGENT'] as const\r\nconst STATUS_OPTIONS = ['todo', 'in-progress', 'review', 'done'] as const\r\n\r\nexport function CardDetailModalV2({\r\n  card,\r\n  isOpen,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete: _onDelete,\r\n  availableUsers = [],\r\n  comments = [],\r\n  activities = [],\r\n  onAddComment,\r\n  onDeleteComment: _onDeleteComment,\r\n  currentUser,\r\n  onAIGenerateDescription: _onAIGenerateDescription,\r\n  onAICreateSubtasks: _onAICreateSubtasks,\r\n  onAIFindSimilar: _onAIFindSimilar,\r\n  availableColumns = [],\r\n  availableLabels = [],\r\n  // COVER IMAGE - Commented out for future use\r\n  onUploadCoverImage: _onUploadCoverImage,\r\n  unsplashAccessKey: _unsplashAccessKey,\r\n  theme,\r\n  onSubtasksChange,\r\n}: CardDetailModalV2Props) {\r\n  // Get theme: prop > context > fallback\r\n  const kanbanTheme = useKanbanTheme()\r\n  const themeName = theme || kanbanTheme?.themeName || 'dark'\r\n\r\n  // Local state - Initialize immediately from card prop to avoid render delay\r\n  const [localCard, setLocalCard] = useState<Card | null>(card)\r\n\r\n  const [isEditingDescription, setIsEditingDescription] = useState(false)\r\n  const [subtasks, setSubtasks] = useState<Subtask[]>(card?.subtasks || [])\r\n  const [isAddingSubtask, setIsAddingSubtask] = useState(false)\r\n  const [newSubtaskTitle, setNewSubtaskTitle] = useState('')\r\n  const [commentText, setCommentText] = useState('')\r\n  const [activityFilter, setActivityFilter] = useState<'all' | 'comments' | 'history'>('all')\r\n  // COVER IMAGE - Commented out for future use. Uncomment when enabling cover image functionality\r\n  // const [showCoverManager, setShowCoverManager] = useState(false)\r\n\r\n  // Popover states\r\n  const [showStatusMenu, setShowStatusMenu] = useState(false)\r\n  const [showPriorityMenu, setShowPriorityMenu] = useState(false)\r\n  const [showAssigneeMenu, setShowAssigneeMenu] = useState(false)\r\n  const [showLabelMenu, setShowLabelMenu] = useState(false)\r\n  const [showDatePicker, setShowDatePicker] = useState(false)\r\n  const [showTimePicker, setShowTimePicker] = useState(false)\r\n\r\n  // Refs\r\n  const titleRef = useRef<HTMLHeadingElement>(null)\r\n  const descriptionRef = useRef<HTMLTextAreaElement>(null)\r\n  const commentRef = useRef<HTMLTextAreaElement>(null)\r\n  const statusMenuRef = useRef<HTMLDivElement>(null)\r\n  const priorityMenuRef = useRef<HTMLDivElement>(null)\r\n  const assigneeMenuRef = useRef<HTMLDivElement>(null)\r\n  const labelMenuRef = useRef<HTMLDivElement>(null)\r\n  const datePickerRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Update local card when prop changes - THIS IS THE FIX!\r\n  // Initialize local card immediately when card prop is available\r\n  useEffect(() => {\r\n    if (card && !localCard) {\r\n      setLocalCard({ ...card })\r\n      setSubtasks(card.subtasks || [])\r\n    } else if (card && localCard && card.id !== localCard.id) {\r\n      setLocalCard({ ...card })\r\n      setSubtasks(card.subtasks || [])\r\n    }\r\n  }, [card, localCard])\r\n\r\n  // Close popovers when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as HTMLElement\r\n\r\n      if (statusMenuRef.current && !statusMenuRef.current.contains(target)) {\r\n        setShowStatusMenu(false)\r\n      }\r\n      if (priorityMenuRef.current && !priorityMenuRef.current.contains(target)) {\r\n        setShowPriorityMenu(false)\r\n      }\r\n      if (assigneeMenuRef.current && !assigneeMenuRef.current.contains(target)) {\r\n        setShowAssigneeMenu(false)\r\n      }\r\n      if (labelMenuRef.current && !labelMenuRef.current.contains(target)) {\r\n        setShowLabelMenu(false)\r\n      }\r\n    }\r\n\r\n    if (showStatusMenu || showPriorityMenu || showAssigneeMenu || showLabelMenu) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n\r\n    return undefined\r\n  }, [showStatusMenu, showPriorityMenu, showAssigneeMenu, showLabelMenu])\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Check if user is typing in an input/textarea\r\n      const target = e.target as HTMLElement\r\n      const isTyping =\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable\r\n\r\n      // ESC - Close modal or menus\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        if (showStatusMenu || showPriorityMenu || showAssigneeMenu || showLabelMenu || showDatePicker || showTimePicker) {\r\n          setShowStatusMenu(false)\r\n          setShowPriorityMenu(false)\r\n          setShowAssigneeMenu(false)\r\n          setShowLabelMenu(false)\r\n          setShowDatePicker(false)\r\n          setShowTimePicker(false)\r\n        } else if (!isTyping) {\r\n          onClose()\r\n        }\r\n        return\r\n      }\r\n\r\n      // Ignore shortcuts if typing\r\n      if (isTyping && e.key !== 'Escape') return\r\n\r\n      const isMod = e.metaKey || e.ctrlKey\r\n\r\n      // Single key shortcuts\r\n      switch (e.key.toLowerCase()) {\r\n        case 's':\r\n          e.preventDefault()\r\n          setShowStatusMenu(true)\r\n          break\r\n        case 'a':\r\n          e.preventDefault()\r\n          setShowAssigneeMenu(true)\r\n          break\r\n        case 'p':\r\n          e.preventDefault()\r\n          setShowPriorityMenu(true)\r\n          break\r\n        case 'l':\r\n          e.preventDefault()\r\n          setShowLabelMenu(true)\r\n          break\r\n        case 'd':\r\n          if (!isMod) {\r\n            e.preventDefault()\r\n            setShowDatePicker(true)\r\n            setTimeout(() => datePickerRef.current?.focus(), 0)\r\n          }\r\n          break\r\n        case 'e':\r\n          if (!isMod) {\r\n            e.preventDefault()\r\n            setShowTimePicker(true)\r\n          }\r\n          break\r\n        case 'i':\r\n          e.preventDefault()\r\n          setIsEditingDescription(true)\r\n          setTimeout(() => descriptionRef.current?.focus(), 0)\r\n          break\r\n        case 't':\r\n          e.preventDefault()\r\n          setIsAddingSubtask(true)\r\n          break\r\n        case 'c':\r\n          e.preventDefault()\r\n          commentRef.current?.focus()\r\n          break\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n    }, [isOpen, onClose, showStatusMenu, showPriorityMenu, showAssigneeMenu, showLabelMenu, showDatePicker, showTimePicker])\r\n\r\n\r\n  // Handlers\r\n  const handleTitleChange = useCallback(\r\n    (e: React.FormEvent<HTMLHeadingElement>) => {\r\n      const newTitle = e.currentTarget.textContent?.trim() || ''\r\n      if (localCard && newTitle !== localCard.title) {\r\n        const updated = { ...localCard, title: newTitle }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { title: newTitle })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleTitleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLHeadingElement>) => {\r\n      if (e.key === 'Enter') {\r\n        e.preventDefault()\r\n        e.currentTarget.blur()\r\n      }\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        e.currentTarget.textContent = localCard?.title || ''\r\n        e.currentTarget.blur()\r\n      }\r\n    },\r\n    [localCard]\r\n  )\r\n\r\n  // Note: handleDescriptionChange removed - now handled inline in MarkdownEditor\r\n\r\n  const handleDescriptionBlur = useCallback(() => {\r\n    if (localCard && card && localCard.description !== card.description) {\r\n      onUpdate?.(localCard.id, { description: localCard.description })\r\n    }\r\n    setIsEditingDescription(false)\r\n  }, [localCard, card, onUpdate])\r\n\r\n  const handleStatusChange = useCallback(\r\n    (status: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, columnId: status }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { columnId: status })\r\n        setShowStatusMenu(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handlePriorityChange = useCallback(\r\n    (priority: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, priority: priority as any }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { priority: priority as any })\r\n        setShowPriorityMenu(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleToggleAssignee = useCallback(\r\n    (userId: string) => {\r\n      if (localCard) {\r\n        const currentAssignees = localCard.assignedUserIds || []\r\n        const newAssignees = currentAssignees.includes(userId)\r\n          ? currentAssignees.filter((id) => id !== userId)\r\n          : [...currentAssignees, userId]\r\n\r\n        const updated = { ...localCard, assignedUserIds: newAssignees }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { assignedUserIds: newAssignees })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleToggleLabel = useCallback(\r\n    (label: string) => {\r\n      if (localCard) {\r\n        const currentLabels = localCard.labels || []\r\n        const newLabels = currentLabels.includes(label)\r\n          ? currentLabels.filter((l) => l !== label)\r\n          : [...currentLabels, label]\r\n\r\n        const updated = { ...localCard, labels: newLabels }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { labels: newLabels })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleDateChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (localCard) {\r\n        const newDate = e.target.value\r\n        const updated = { ...localCard, endDate: newDate }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { endDate: newDate })\r\n        setShowDatePicker(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleTimeChange = useCallback(\r\n    (hours: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, estimatedTime: parseFloat(hours) || 0 }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { estimatedTime: parseFloat(hours) || 0 })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleAddSubtask = useCallback(() => {\r\n    if (newSubtaskTitle.trim() && localCard) {\r\n      const newSubtask: Subtask = {\r\n        id: `subtask-${Date.now()}`,\r\n        title: newSubtaskTitle.trim(),\r\n        completed: false,\r\n        createdAt: new Date(),\r\n      }\r\n      const updatedSubtasks = [...subtasks, newSubtask]\r\n      setSubtasks(updatedSubtasks)\r\n      setNewSubtaskTitle('')\r\n      setIsAddingSubtask(false)\r\n      // Persist subtasks\r\n      onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n    }\r\n  }, [newSubtaskTitle, subtasks, localCard, onSubtasksChange])\r\n\r\n  const handleToggleSubtask = useCallback(\r\n    (id: string) => {\r\n      const updatedSubtasks = subtasks.map((st) =>\r\n        st.id === id ? { ...st, completed: !st.completed, updatedAt: new Date() } : st\r\n      )\r\n      setSubtasks(updatedSubtasks)\r\n      // Persist subtasks\r\n      if (localCard) {\r\n        onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n      }\r\n    },\r\n    [subtasks, localCard, onSubtasksChange]\r\n  )\r\n\r\n  const handleDeleteSubtask = useCallback(\r\n    (id: string) => {\r\n      const updatedSubtasks = subtasks.filter((st) => st.id !== id)\r\n      setSubtasks(updatedSubtasks)\r\n      // Persist subtasks\r\n      if (localCard) {\r\n        onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n      }\r\n    },\r\n    [subtasks, localCard, onSubtasksChange]\r\n  )\r\n\r\n  const handleSendComment = useCallback(() => {\r\n    if (commentText.trim() && localCard && onAddComment) {\r\n      onAddComment(localCard.id, commentText.trim())\r\n      setCommentText('')\r\n    }\r\n  }, [commentText, localCard, onAddComment])\r\n\r\n  const handleCommentKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\r\n        e.preventDefault()\r\n        handleSendComment()\r\n      }\r\n    },\r\n    [handleSendComment]\r\n  )\r\n\r\n  // COVER IMAGE HANDLERS - Commented out for future use\r\n  // Uncomment these functions when enabling cover image functionality\r\n  /*\r\n  const handleCoverImageChange = useCallback(\r\n    (url: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, coverImage: url }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { coverImage: url })\r\n        setShowCoverManager(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleCoverImageRemove = useCallback(() => {\r\n    if (localCard) {\r\n      const updated = { ...localCard, coverImage: undefined }\r\n      setLocalCard(updated)\r\n      onUpdate?.(localCard.id, { coverImage: undefined })\r\n    }\r\n  }, [localCard, onUpdate])\r\n  */\r\n\r\n  // Enhanced markdown renderer with GFM support\r\n  const renderMarkdown = (text: string) => {\r\n    return (\r\n      <ReactMarkdown\r\n        remarkPlugins={[remarkGfm]}\r\n        rehypePlugins={[rehypeSanitize]}\r\n        components={{\r\n          a: ({ node, ...props }) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\" />,\r\n        }}\r\n      >\r\n        {text}\r\n      </ReactMarkdown>\r\n    )\r\n  }\r\n\r\n  // Filter activities\r\n  const filteredActivity = activities.filter((activity) => {\r\n    if (activityFilter === 'comments') {\r\n      return activity.type.includes('COMMENT')\r\n    }\r\n    if (activityFilter === 'history') {\r\n      return !activity.type.includes('COMMENT')\r\n    }\r\n    return true\r\n  })\r\n\r\n  // CRITICAL FIX: Use card prop directly for early return check\r\n  // Using localCard causes race condition with Portal mount + useEffect timing\r\n  if (!isOpen || !card) {\r\n    return null\r\n  }\r\n\r\n  // Use localCard if available (for live edits), fallback to card prop\r\n  const displayCard = localCard || card\r\n\r\n  const assignedUsers = availableUsers.filter((user) =>\r\n    displayCard.assignedUserIds?.includes(user.id)\r\n  )\r\n\r\n  const completedSubtasksCount = subtasks.filter((st) => st.completed).length\r\n\r\n  return (\r\n    <Portal>\r\n      <div\r\n        className=\"modal-v2-backdrop\"\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          inset: '0',\r\n          zIndex: 9999,\r\n          background: 'rgba(0, 0, 0, 0.7)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n        }}\r\n      >\r\n        <div\r\n          className=\"modal-v2-container\"\r\n          onClick={(e) => e.stopPropagation()}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"modal-title\"\r\n          data-theme={themeName}\r\n        >\r\n          {/* HEADER */}\r\n          <header className=\"modal-v2-header\">\r\n            <h1\r\n              id=\"modal-title\"\r\n              ref={titleRef}\r\n              className=\"modal-v2-title\"\r\n              contentEditable\r\n              suppressContentEditableWarning\r\n              onBlur={handleTitleChange}\r\n              onKeyDown={handleTitleKeyDown}\r\n            >\r\n              {displayCard.title}\r\n            </h1>\r\n\r\n            <p className=\"modal-v2-ai-prompt\">\r\n              <span className=\"modal-v2-ai-icon\"></span>\r\n              Ask AI to write a description, create subtasks, or find similar tasks\r\n            </p>\r\n\r\n            <button className=\"modal-v2-close\" onClick={onClose} aria-label=\"Close\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n              </svg>\r\n            </button>\r\n          </header>\r\n\r\n          {/* COVER IMAGE SECTION - COMMENTED OUT FOR FUTURE USE\r\n           * To enable cover image functionality, uncomment this section\r\n           * and ensure CoverImageManager import is active\r\n           */}\r\n          {/*\r\n          <section className=\"modal-v2-cover-section\">\r\n            {!showCoverManager && !displayCard.coverImage && (\r\n              <button\r\n                className=\"modal-v2-add-cover-button\"\r\n                onClick={() => setShowCoverManager(true)}\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                  <polyline points=\"21 15 16 10 5 21\" />\r\n                </svg>\r\n                Add cover image\r\n              </button>\r\n            )}\r\n\r\n            {!showCoverManager && displayCard.coverImage && (\r\n              <div className=\"modal-v2-cover-preview-wrapper\">\r\n                <img\r\n                  src={displayCard.coverImage}\r\n                  alt={`Cover for ${displayCard.title}`}\r\n                  className=\"modal-v2-cover-image\"\r\n                  onError={(e) => {\r\n                    e.currentTarget.style.display = 'none'\r\n                  }}\r\n                />\r\n                <div className=\"modal-v2-cover-actions\">\r\n                  <button\r\n                    className=\"modal-v2-cover-action-button\"\r\n                    onClick={() => setShowCoverManager(true)}\r\n                  >\r\n                    Change\r\n                  </button>\r\n                  <button\r\n                    className=\"modal-v2-cover-action-button danger\"\r\n                    onClick={handleCoverImageRemove}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {showCoverManager && (\r\n              <div className=\"modal-v2-cover-manager-wrapper\">\r\n                <div className=\"modal-v2-cover-manager-header\">\r\n                  <h3>Cover Image</h3>\r\n                  <button\r\n                    className=\"modal-v2-cover-manager-close\"\r\n                    onClick={() => setShowCoverManager(false)}\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n                <CoverImageManager\r\n                  coverImage={displayCard.coverImage}\r\n                  onUpload={onUploadCoverImage}\r\n                  onChange={handleCoverImageChange}\r\n                  onRemove={handleCoverImageRemove}\r\n                  unsplashAccessKey={unsplashAccessKey}\r\n                  showRecentUploads={true}\r\n                  theme={themeName}\r\n                />\r\n              </div>\r\n            )}\r\n          </section>\r\n          */}\r\n\r\n          {/* METADATA GRID */}\r\n          <section className=\"modal-v2-metadata\">\r\n            {/* STATUS FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={statusMenuRef}>\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowStatusMenu(!showStatusMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <path d=\"M12 6v6l4 2\" />\r\n                  </svg>\r\n                  <span>Status</span>\r\n                  <kbd className=\"modal-v2-shortcut\">S</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">{displayCard.columnId || 'No status'}</div>\r\n              </button>\r\n              {showStatusMenu && (\r\n                <div className=\"modal-v2-popover\">\r\n                  {(availableColumns.length > 0 ? availableColumns : STATUS_OPTIONS.map(s => ({ id: s, title: s }))).map((col) => (\r\n                    <button\r\n                      key={col.id}\r\n                      className={`modal-v2-popover-item ${\r\n                        displayCard.columnId === col.id ? 'active' : ''\r\n                      }`}\r\n                      onClick={() => handleStatusChange(col.id)}\r\n                    >\r\n                      {col.title}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* ASSIGNEES FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={assigneeMenuRef}>\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowAssigneeMenu(!showAssigneeMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n                    <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n                  </svg>\r\n                  <span>Assignees</span>\r\n                  <kbd className=\"modal-v2-shortcut\">A</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {assignedUsers.length > 0 ? (\r\n                    <div className=\"modal-v2-avatars\">\r\n                      {assignedUsers.map((user) => (\r\n                        <div\r\n                          key={user.id}\r\n                          className=\"modal-v2-avatar\"\r\n                          style={{ background: user.color }}\r\n                          title={user.name}\r\n                        >\r\n                          {user.initials}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <span className=\"modal-v2-empty\">Empty</span>\r\n                  )}\r\n                </div>\r\n              </button>\r\n              {showAssigneeMenu && (\r\n                <div className=\"modal-v2-popover\">\r\n                  {availableUsers.map((user) => (\r\n                    <button\r\n                      key={user.id}\r\n                      className={`modal-v2-popover-item ${\r\n                        displayCard.assignedUserIds?.includes(user.id) ? 'active' : ''\r\n                      }`}\r\n                      onClick={() => handleToggleAssignee(user.id)}\r\n                    >\r\n                      <div\r\n                        className=\"modal-v2-avatar-small\"\r\n                        style={{ background: user.color }}\r\n                      >\r\n                        {user.initials}\r\n                      </div>\r\n                      {user.name}\r\n                      {displayCard.assignedUserIds?.includes(user.id) && (\r\n                        <svg\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                          style={{ marginLeft: 'auto' }}\r\n                        >\r\n                          <polyline points=\"20 6 9 17 4 12\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* PRIORITY FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={priorityMenuRef}>\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowPriorityMenu(!showPriorityMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z\" />\r\n                    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\r\n                    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\r\n                  </svg>\r\n                  <span>Priority</span>\r\n                  <kbd className=\"modal-v2-shortcut\">P</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {displayCard.priority || 'None'}\r\n                </div>\r\n              </button>\r\n              {showPriorityMenu && (\r\n                <div className=\"modal-v2-popover\">\r\n                  {PRIORITY_OPTIONS.map((priority) => (\r\n                    <button\r\n                      key={priority}\r\n                      className={`modal-v2-popover-item priority-${priority.toLowerCase()} ${\r\n                        displayCard.priority === priority ? 'active' : ''\r\n                      }`}\r\n                      onClick={() => handlePriorityChange(priority)}\r\n                    >\r\n                      {priority}\r\n                    </button>\r\n                  ))}\r\n                  <button\r\n                    className=\"modal-v2-popover-item\"\r\n                    onClick={() => handlePriorityChange('')}\r\n                  >\r\n                    None\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* LABELS FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={labelMenuRef}>\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowLabelMenu(!showLabelMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z\" />\r\n                    <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" />\r\n                  </svg>\r\n                  <span>Labels</span>\r\n                  <kbd className=\"modal-v2-shortcut\">L</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {displayCard.labels && displayCard.labels.length > 0 ? (\r\n                    <span>{displayCard.labels.join(', ')}</span>\r\n                  ) : (\r\n                    <span className=\"modal-v2-empty\">Empty</span>\r\n                  )}\r\n                </div>\r\n              </button>\r\n              {showLabelMenu && (\r\n                <div className=\"modal-v2-popover\">\r\n                  {(availableLabels.length > 0 ? availableLabels : ['Bug', 'Feature', 'Enhancement', 'Documentation']).map((label) => (\r\n                    <button\r\n                      key={label}\r\n                      className={`modal-v2-popover-item ${\r\n                        displayCard.labels?.includes(label) ? 'active' : ''\r\n                      }`}\r\n                      onClick={() => handleToggleLabel(label)}\r\n                    >\r\n                      {label}\r\n                      {displayCard.labels?.includes(label) && (\r\n                        <svg\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                          style={{ marginLeft: 'auto' }}\r\n                        >\r\n                          <polyline points=\"20 6 9 17 4 12\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* DUE DATE FIELD */}\r\n            <button\r\n              className=\"modal-v2-field\"\r\n              onClick={() => {\r\n                setShowDatePicker(!showDatePicker)\r\n                setTimeout(() => datePickerRef.current?.showPicker?.(), 0)\r\n              }}\r\n            >\r\n              <div className=\"modal-v2-field-label\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\r\n                  <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\r\n                  <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\r\n                </svg>\r\n                <span>Due Date</span>\r\n                <kbd className=\"modal-v2-shortcut\">D</kbd>\r\n              </div>\r\n              <div className=\"modal-v2-field-value\">\r\n                {displayCard.endDate\r\n                  ? new Date(displayCard.endDate).toLocaleDateString()\r\n                  : 'Not set'}\r\n              </div>\r\n              <input\r\n                ref={datePickerRef}\r\n                type=\"date\"\r\n                value={\r\n                  typeof displayCard.endDate === 'string'\r\n                    ? displayCard.endDate.split('T')[0]\r\n                    : displayCard.endDate\r\n                    ? (() => {\r\n                        // Convert Date to YYYY-MM-DD using UTC to avoid timezone shifts\r\n                        const d = new Date(displayCard.endDate)\r\n                        const year = d.getUTCFullYear()\r\n                        const month = String(d.getUTCMonth() + 1).padStart(2, '0')\r\n                        const day = String(d.getUTCDate()).padStart(2, '0')\r\n                        return `${year}-${month}-${day}`\r\n                      })()\r\n                    : ''\r\n                }\r\n                onChange={handleDateChange}\r\n                style={{ position: 'absolute', opacity: 0, pointerEvents: 'none' }}\r\n              />\r\n            </button>\r\n\r\n            {/* ESTIMATED TIME FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\">\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowTimePicker(!showTimePicker)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <polyline points=\"12 6 12 12 16 14\" />\r\n                  </svg>\r\n                  <span>Estimated Time</span>\r\n                  <kbd className=\"modal-v2-shortcut\">E</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {displayCard.estimatedTime ? `${displayCard.estimatedTime}h` : 'Not set'}\r\n                </div>\r\n              </button>\r\n              {showTimePicker && (\r\n                <div className=\"modal-v2-popover\">\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.5\"\r\n                    placeholder=\"Hours\"\r\n                    value={displayCard.estimatedTime || ''}\r\n                    onChange={(e) => handleTimeChange(e.target.value)}\r\n                    className=\"modal-v2-time-input\"\r\n                    autoFocus\r\n                    onBlur={() => setShowTimePicker(false)}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* DESCRIPTION */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z\" />\r\n                <polyline points=\"14 2 14 8 20 8\" />\r\n                <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                <polyline points=\"10 9 9 9 8 9\" />\r\n              </svg>\r\n              <h2>Description</h2>\r\n              <button className=\"modal-v2-ai-button\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                  <path d=\"M2 17L12 22L22 17\" />\r\n                  <path d=\"M2 12L12 17L22 12\" />\r\n                </svg>\r\n                AI Assist\r\n              </button>\r\n            </div>\r\n\r\n            {isEditingDescription ? (\r\n              <textarea\r\n                className=\"modal-v2-textarea\"\r\n                value={displayCard.description || ''}\r\n                onChange={(e) => {\r\n                  if (localCard) {\r\n                    const updated: Card = { ...localCard, description: e.target.value }\r\n                    setLocalCard(updated)\r\n                  }\r\n                }}\r\n                onBlur={handleDescriptionBlur}\r\n                placeholder=\"Add a detailed description...\"\r\n                autoFocus\r\n              />\r\n            ) : (\r\n              <div className=\"modal-v2-content\" onClick={() => setIsEditingDescription(true)}>\r\n                {displayCard.description ? (\r\n                  <div className=\"modal-v2-markdown\">{renderMarkdown(displayCard.description)}</div>\r\n                ) : (\r\n                  <p className=\"modal-v2-placeholder\">\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                    </svg>\r\n                    Add description...\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </section>\r\n\r\n          {/* SUBTASKS */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M9 11l3 3L22 4\" />\r\n                <path d=\"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11\" />\r\n              </svg>\r\n              <h2>Subtasks</h2>\r\n              {subtasks.length > 0 && (\r\n                <span className=\"modal-v2-count\">\r\n                  {completedSubtasksCount}/{subtasks.length}\r\n                </span>\r\n              )}\r\n              <button className=\"modal-v2-add-button\" onClick={() => setIsAddingSubtask(true)}>\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n                </svg>\r\n                Add\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"modal-v2-subtasks\">\r\n              {subtasks.map((subtask) => (\r\n                <div\r\n                  key={subtask.id}\r\n                  className={`modal-v2-subtask ${subtask.completed ? 'completed' : ''}`}\r\n                >\r\n                  <button\r\n                    className=\"modal-v2-subtask-checkbox\"\r\n                    onClick={() => handleToggleSubtask(subtask.id)}\r\n                  >\r\n                    {subtask.completed ? (\r\n                      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <path\r\n                          d=\"M9 12l2 2 4-4\"\r\n                          stroke=\"white\"\r\n                          strokeWidth=\"2\"\r\n                          fill=\"none\"\r\n                        />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg\r\n                        width=\"18\"\r\n                        height=\"18\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  <span className=\"modal-v2-subtask-title\">{subtask.title}</span>\r\n                  <button\r\n                    className=\"modal-v2-subtask-delete\"\r\n                    onClick={() => handleDeleteSubtask(subtask.id)}\r\n                  >\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <polyline points=\"3 6 5 6 21 6\" />\r\n                      <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n\r\n              {isAddingSubtask && (\r\n                <div className=\"modal-v2-subtask-input-row\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Subtask title...\"\r\n                    value={newSubtaskTitle}\r\n                    onChange={(e) => setNewSubtaskTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') handleAddSubtask()\r\n                      if (e.key === 'Escape') {\r\n                        setIsAddingSubtask(false)\r\n                        setNewSubtaskTitle('')\r\n                      }\r\n                    }}\r\n                    onBlur={handleAddSubtask}\r\n                    autoFocus\r\n                    className=\"modal-v2-subtask-input\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* ACTIVITY & COMMENTS */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n              </svg>\r\n              <h2>Activity</h2>\r\n              <div className=\"modal-v2-filters\">\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'all' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('all')}\r\n                >\r\n                  All\r\n                </button>\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'comments' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('comments')}\r\n                >\r\n                  Comments\r\n                </button>\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'history' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('history')}\r\n                >\r\n                  History\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Comment Input */}\r\n            <div className=\"modal-v2-comment-input\">\r\n              {currentUser && (\r\n                <div className=\"modal-v2-avatar\" style={{ background: currentUser.color }}>\r\n                  {currentUser.initials}\r\n                </div>\r\n              )}\r\n              <div className=\"modal-v2-comment-wrapper\">\r\n                <textarea\r\n                  ref={commentRef}\r\n                  className=\"modal-v2-comment-textarea\"\r\n                  placeholder=\"Write a comment...\"\r\n                  value={commentText}\r\n                  onChange={(e) => setCommentText(e.target.value)}\r\n                  onKeyDown={handleCommentKeyDown}\r\n                  rows={1}\r\n                />\r\n                <div className=\"modal-v2-comment-toolbar\">\r\n                  <div className=\"modal-v2-toolbar-left\">\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Attach file\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\r\n                      </svg>\r\n                    </button>\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Mention user\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n                        <path d=\"M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94\" />\r\n                      </svg>\r\n                    </button>\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Add emoji\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <path d=\"M8 14s1.5 2 4 2 4-2 4-2\" />\r\n                        <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\" />\r\n                        <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\" />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                  <button\r\n                    className=\"modal-v2-send-button\"\r\n                    onClick={handleSendComment}\r\n                    disabled={!commentText.trim()}\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Activity Timeline */}\r\n            <div className=\"modal-v2-timeline\">\r\n              {filteredActivity.map((activity) => {\r\n                const user = availableUsers.find((u) => u.id === activity.userId)\r\n                const isComment = activity.type.includes('COMMENT')\r\n\r\n                if (isComment) {\r\n                  const comment = comments.find((c) => c.id === activity.metadata?.commentId)\r\n                  if (!comment) return null\r\n\r\n                  return (\r\n                    <div key={activity.id} className=\"modal-v2-activity-item comment-item\">\r\n                      {user && (\r\n                        <div className=\"modal-v2-avatar\" style={{ background: user.color }}>\r\n                          {user.initials}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"modal-v2-activity-content\">\r\n                        <div className=\"modal-v2-activity-header\">\r\n                          <span className=\"modal-v2-activity-user\">\r\n                            {user?.name || 'Unknown'}\r\n                          </span>\r\n                          <span className=\"modal-v2-activity-time\">\r\n                            {new Date(activity.timestamp).toLocaleString()}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"modal-v2-comment-body\">{comment.content}</div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                }\r\n\r\n                // History item\r\n                return (\r\n                  <div key={activity.id} className=\"modal-v2-activity-item history-item\">\r\n                    <div className=\"modal-v2-history-icon\">\r\n                      {activity.type.includes('CREATED') && ''}\r\n                      {activity.type.includes('UPDATED') && ''}\r\n                      {activity.type.includes('MOVED') && ''}\r\n                      {activity.type.includes('DELETED') && ''}\r\n                      {activity.type.includes('ASSIGNED') && ''}\r\n                      {activity.type.includes('PRIORITY') && ''}\r\n                      {activity.type.includes('LABEL') && ''}\r\n                    </div>\r\n                    <div className=\"modal-v2-activity-content\">\r\n                      <div className=\"modal-v2-history-text\">\r\n                        <span className=\"modal-v2-activity-user\">\r\n                          {user?.name || 'Unknown'}\r\n                        </span>{' '}\r\n                        {activity.type.replace(/_/g, ' ').toLowerCase()}\r\n                        {activity.newValue && (\r\n                          <>\r\n                            {' to '}\r\n                            <strong>{activity.newValue}</strong>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                      <span className=\"modal-v2-activity-time\">\r\n                        {new Date(activity.timestamp).toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {filteredActivity.length === 0 && (\r\n                <div className=\"modal-v2-empty\">\r\n                  <p>No activity yet</p>\r\n                  <span>Activity will appear here</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * VelocityChart Component\r\n * Shows team velocity over time (cards completed per week/sprint)\r\n */\r\n\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface VelocityDataPoint {\r\n  /** Period name (e.g., \"Week 1\", \"Sprint 3\") */\r\n  period: string\r\n  /** Number of cards completed */\r\n  completed: number\r\n  /** Number of cards planned */\r\n  planned?: number\r\n  /** Average velocity (optional) */\r\n  average?: number\r\n}\r\n\r\nexport interface VelocityChartProps {\r\n  /** Velocity data points */\r\n  data: VelocityDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Show average line */\r\n  showAverage?: boolean\r\n  /** Show planned line */\r\n  showPlanned?: boolean\r\n}\r\n\r\n/**\r\n * Custom tooltip for velocity chart\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{payload[0].payload.period}</p>\r\n      {payload.map((entry: any, index: number) => (\r\n        <p key={index} className=\"chart-tooltip-value\" style={{ color: entry.color }}>\r\n          {entry.name}: <strong>{entry.value}</strong> cards\r\n        </p>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function VelocityChart({\r\n  data,\r\n  title = 'Team Velocity',\r\n  height = 300,\r\n  showAverage = true,\r\n  showPlanned = true,\r\n}: VelocityChartProps) {\r\n  // Calculate average if not provided\r\n  const dataWithAverage = data.map((point) => ({\r\n    ...point,\r\n    average:\r\n      point.average ??\r\n      data.reduce((sum, p) => sum + p.completed, 0) / data.length,\r\n  }))\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        <LineChart\r\n          data={dataWithAverage}\r\n          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n          <XAxis\r\n            dataKey=\"period\"\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <YAxis\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend\r\n            wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n          />\r\n\r\n          {/* Completed cards line */}\r\n          <Line\r\n            type=\"monotone\"\r\n            dataKey=\"completed\"\r\n            stroke=\"#10B981\"\r\n            strokeWidth={3}\r\n            name=\"Completed\"\r\n            dot={{ fill: '#10B981', r: 5 }}\r\n            activeDot={{ r: 7 }}\r\n          />\r\n\r\n          {/* Planned cards line */}\r\n          {showPlanned && (\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"planned\"\r\n              stroke=\"#3B82F6\"\r\n              strokeWidth={2}\r\n              strokeDasharray=\"5 5\"\r\n              name=\"Planned\"\r\n              dot={{ fill: '#3B82F6', r: 4 }}\r\n            />\r\n          )}\r\n\r\n          {/* Average line */}\r\n          {showAverage && (\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"average\"\r\n              stroke=\"#F59E0B\"\r\n              strokeWidth={2}\r\n              strokeDasharray=\"3 3\"\r\n              name=\"Average\"\r\n              dot={false}\r\n            />\r\n          )}\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Total Completed</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#10B981' }}>\r\n            {data.reduce((sum, point) => sum + point.completed, 0)}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Average Velocity</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#F59E0B' }}>\r\n            {(data.reduce((sum, point) => sum + point.completed, 0) / data.length).toFixed(1)}\r\n          </span>\r\n        </div>\r\n        {showPlanned && data.some((p) => p.planned) && (\r\n          <div className=\"chart-stat\">\r\n            <span className=\"chart-stat-label\">Total Planned</span>\r\n            <span className=\"chart-stat-value\" style={{ color: '#3B82F6' }}>\r\n              {data.reduce((sum, point) => sum + (point.planned || 0), 0)}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * BurnDownChart Component\r\n * Shows remaining work over time compared to ideal burndown\r\n */\r\n\r\nimport { AreaChart, Area, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface BurnDownDataPoint {\r\n  /** Day/Date label */\r\n  day: string\r\n  /** Remaining tasks */\r\n  remaining: number\r\n  /** Ideal burndown line */\r\n  ideal: number\r\n}\r\n\r\nexport interface BurnDownChartProps {\r\n  /** Burndown data points */\r\n  data: BurnDownDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Total tasks at start */\r\n  totalTasks?: number\r\n  /** Use area chart instead of line */\r\n  useArea?: boolean\r\n}\r\n\r\n/**\r\n * Custom tooltip for burndown chart\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{payload[0].payload.day}</p>\r\n      {payload.map((entry: any, index: number) => (\r\n        <p key={index} className=\"chart-tooltip-value\" style={{ color: entry.color }}>\r\n          {entry.name}: <strong>{entry.value}</strong> tasks\r\n        </p>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function BurnDownChart({\r\n  data,\r\n  title = 'Sprint Burndown',\r\n  height = 300,\r\n  totalTasks,\r\n  useArea = false,\r\n}: BurnDownChartProps) {\r\n  // Calculate total tasks if not provided\r\n  const total = totalTasks ?? (data[0]?.ideal || data[0]?.remaining || 0)\r\n\r\n  // Calculate stats\r\n  const currentRemaining = data[data.length - 1]?.remaining || 0\r\n  const idealRemaining = data[data.length - 1]?.ideal || 0\r\n  const progress = total > 0 ? ((total - currentRemaining) / total) * 100 : 0\r\n  const isOnTrack = currentRemaining <= idealRemaining\r\n\r\n  const ChartComponent = useArea ? AreaChart : LineChart\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        <ChartComponent\r\n          data={data}\r\n          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n          <XAxis\r\n            dataKey=\"day\"\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <YAxis\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend\r\n            wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n          />\r\n\r\n          {useArea ? (\r\n            <>\r\n              {/* Ideal burndown area */}\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"ideal\"\r\n                stroke=\"#F59E0B\"\r\n                fill=\"rgba(245, 158, 11, 0.2)\"\r\n                strokeWidth={2}\r\n                strokeDasharray=\"5 5\"\r\n                name=\"Ideal\"\r\n              />\r\n              {/* Actual burndown area */}\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"remaining\"\r\n                stroke={isOnTrack ? '#10B981' : '#EF4444'}\r\n                fill={isOnTrack ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)'}\r\n                strokeWidth={3}\r\n                name=\"Remaining\"\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* Ideal burndown line */}\r\n              <Line\r\n                type=\"linear\"\r\n                dataKey=\"ideal\"\r\n                stroke=\"#F59E0B\"\r\n                strokeWidth={2}\r\n                strokeDasharray=\"5 5\"\r\n                name=\"Ideal\"\r\n                dot={{ fill: '#F59E0B', r: 4 }}\r\n              />\r\n              {/* Actual burndown line */}\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"remaining\"\r\n                stroke={isOnTrack ? '#10B981' : '#EF4444'}\r\n                strokeWidth={3}\r\n                name=\"Remaining\"\r\n                dot={{ fill: isOnTrack ? '#10B981' : '#EF4444', r: 5 }}\r\n                activeDot={{ r: 7 }}\r\n              />\r\n            </>\r\n          )}\r\n        </ChartComponent>\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Progress</span>\r\n          <span\r\n            className=\"chart-stat-value\"\r\n            style={{ color: progress >= 50 ? '#10B981' : '#F59E0B' }}\r\n          >\r\n            {progress.toFixed(0)}%\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Remaining</span>\r\n          <span\r\n            className=\"chart-stat-value\"\r\n            style={{ color: isOnTrack ? '#10B981' : '#EF4444' }}\r\n          >\r\n            {currentRemaining}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Status</span>\r\n          <span\r\n            className=\"chart-stat-badge\"\r\n            style={{\r\n              background: isOnTrack\r\n                ? 'rgba(16, 185, 129, 0.15)'\r\n                : 'rgba(239, 68, 68, 0.15)',\r\n              color: isOnTrack ? '#10B981' : '#EF4444',\r\n            }}\r\n          >\r\n            {isOnTrack ? ' On Track' : ' Behind'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * DistributionCharts Component\r\n * Shows distribution of cards by priority, status, or assignees\r\n */\r\n\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface DistributionDataPoint {\r\n  /** Category name */\r\n  name: string\r\n  /** Value/count */\r\n  value: number\r\n  /** Optional color */\r\n  color?: string\r\n}\r\n\r\nexport interface DistributionChartsProps {\r\n  /** Distribution data */\r\n  data: DistributionDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart type */\r\n  type?: 'pie' | 'bar'\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Show percentages */\r\n  showPercentages?: boolean\r\n}\r\n\r\n// Default colors for priority\r\nconst PRIORITY_COLORS: Record<string, string> = {\r\n  URGENT: '#EF4444',\r\n  HIGH: '#F59E0B',\r\n  MEDIUM: '#3B82F6',\r\n  LOW: '#10B981',\r\n}\r\n\r\n// Default colors for common categories\r\nconst DEFAULT_COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899']\r\n\r\n/**\r\n * Custom label for pie chart\r\n */\r\nfunction renderPieLabel({\r\n  cx,\r\n  cy,\r\n  midAngle,\r\n  innerRadius,\r\n  outerRadius,\r\n  percent,\r\n}: any) {\r\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5\r\n  const x = cx + radius * Math.cos(-midAngle * (Math.PI / 180))\r\n  const y = cy + radius * Math.sin(-midAngle * (Math.PI / 180))\r\n\r\n  if (percent < 0.05) return null // Don't show label for small slices\r\n\r\n  return (\r\n    <text\r\n      x={x}\r\n      y={y}\r\n      fill=\"white\"\r\n      textAnchor={x > cx ? 'start' : 'end'}\r\n      dominantBaseline=\"central\"\r\n      style={{ fontSize: '12px', fontWeight: 600 }}\r\n    >\r\n      {`${(percent * 100).toFixed(0)}%`}\r\n    </text>\r\n  )\r\n}\r\n\r\n/**\r\n * Custom tooltip\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  const data = payload[0].payload\r\n  const total = payload[0].payload.totalValue || 0\r\n  const percentage = total > 0 ? ((data.value / total) * 100).toFixed(1) : '0'\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{data.name}</p>\r\n      <p className=\"chart-tooltip-value\" style={{ color: data.color || payload[0].color }}>\r\n        Count: <strong>{data.value}</strong>\r\n      </p>\r\n      <p className=\"chart-tooltip-value\" style={{ color: 'rgba(255, 255, 255, 0.7)' }}>\r\n        Percentage: <strong>{percentage}%</strong>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DistributionCharts({\r\n  data,\r\n  title = 'Distribution',\r\n  type = 'pie',\r\n  height = 300,\r\n  showPercentages = true,\r\n}: DistributionChartsProps) {\r\n  // Calculate total and add to each data point\r\n  const total = data.reduce((sum, point) => sum + point.value, 0)\r\n  const dataWithTotal = data.map((point) => ({\r\n    ...point,\r\n    totalValue: total,\r\n    color: point.color || PRIORITY_COLORS[point.name] || DEFAULT_COLORS[data.indexOf(point) % DEFAULT_COLORS.length],\r\n  }))\r\n\r\n  // Get colors array\r\n  const colors = dataWithTotal.map((point) => point.color)\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        {type === 'pie' ? (\r\n          <PieChart>\r\n            <Pie\r\n              data={dataWithTotal}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              labelLine={false}\r\n              label={showPercentages ? renderPieLabel : false}\r\n              outerRadius={height * 0.35}\r\n              fill=\"#8884d8\"\r\n              dataKey=\"value\"\r\n            >\r\n              {dataWithTotal.map((_, index) => (\r\n                <Cell key={`cell-${index}`} fill={colors[index]} />\r\n              ))}\r\n            </Pie>\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend\r\n              wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n              formatter={(value, legendEntry: any) => {\r\n                const point = legendEntry.payload\r\n                const percentage = total > 0 ? ((point.value / total) * 100).toFixed(0) : '0'\r\n                return `${value} (${point.value} - ${percentage}%)`\r\n              }}\r\n            />\r\n          </PieChart>\r\n        ) : (\r\n          <BarChart\r\n            data={dataWithTotal}\r\n            margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n          >\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n            <XAxis\r\n              dataKey=\"name\"\r\n              stroke=\"rgba(255, 255, 255, 0.5)\"\r\n              style={{ fontSize: '12px' }}\r\n            />\r\n            <YAxis\r\n              stroke=\"rgba(255, 255, 255, 0.5)\"\r\n              style={{ fontSize: '12px' }}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend\r\n              wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n            />\r\n            <Bar dataKey=\"value\" name=\"Count\" radius={[8, 8, 0, 0]}>\r\n              {dataWithTotal.map((_, index) => (\r\n                <Cell key={`cell-${index}`} fill={colors[index]} />\r\n              ))}\r\n            </Bar>\r\n          </BarChart>\r\n        )}\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Total Cards</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#3B82F6' }}>\r\n            {total}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Categories</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#10B981' }}>\r\n            {data.length}\r\n          </span>\r\n        </div>\r\n        {data.length > 0 && (\r\n          <div className=\"chart-stat\">\r\n            <span className=\"chart-stat-label\">Largest Category</span>\r\n            <span className=\"chart-stat-value\" style={{ color: '#F59E0B' }}>\r\n              {data.reduce((max, point) => (point.value > max.value ? point : max)).name}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Bulk Operations Toolbar\r\n * Floating toolbar for performing bulk actions on selected cards\r\n * @module components/BulkOperations\r\n */\r\n\r\nimport { memo, useState } from 'react'\r\nimport type { Card, Priority, BulkOperationsCallbacks } from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface BulkOperationsToolbarProps {\r\n  /** Selected cards */\r\n  selectedCards: Card[]\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** Callback when selection is cleared */\r\n  onClearSelection: () => void\r\n  /** Bulk operations callbacks */\r\n  callbacks: BulkOperationsCallbacks\r\n  /** Available columns for move operation */\r\n  columns?: Array<{ id: string; title: string }>\r\n  /** Available labels */\r\n  availableLabels?: string[]\r\n}\r\n\r\n/**\r\n * Bulk Operations Toolbar Component\r\n */\r\nexport const BulkOperationsToolbar = memo<BulkOperationsToolbarProps>(\r\n  ({\r\n    selectedCards,\r\n    availableUsers = [],\r\n    onClearSelection,\r\n    callbacks,\r\n    columns = [],\r\n    availableLabels = [],\r\n  }) => {\r\n    const [showPriorityMenu, setShowPriorityMenu] = useState(false)\r\n    const [showMoveMenu, setShowMoveMenu] = useState(false)\r\n    const [showUserMenu, setShowUserMenu] = useState(false)\r\n    const [showLabelMenu, setShowLabelMenu] = useState(false)\r\n\r\n    if (selectedCards.length === 0) return null\r\n\r\n    const cardIds = selectedCards.map((card) => card.id)\r\n\r\n    const handleUpdatePriority = (priority: Priority) => {\r\n      callbacks.onBulkUpdate?.(cardIds, { priority })\r\n      setShowPriorityMenu(false)\r\n    }\r\n\r\n    const handleMove = (columnId: string) => {\r\n      callbacks.onBulkMove?.(cardIds, columnId)\r\n      setShowMoveMenu(false)\r\n      onClearSelection()\r\n    }\r\n\r\n    const handleAssignUsers = (userIds: string[]) => {\r\n      callbacks.onBulkUpdate?.(cardIds, { assignedUserIds: userIds })\r\n      setShowUserMenu(false)\r\n    }\r\n\r\n    const handleAddLabels = (labels: string[]) => {\r\n      // Get existing labels from all selected cards\r\n      const existingLabels = new Set<string>()\r\n      selectedCards.forEach((card) => {\r\n        card.labels?.forEach((label) => existingLabels.add(label))\r\n      })\r\n\r\n      // Merge with new labels\r\n      const allLabels = Array.from(new Set([...existingLabels, ...labels]))\r\n\r\n      callbacks.onBulkUpdate?.(cardIds, { labels: allLabels })\r\n      setShowLabelMenu(false)\r\n    }\r\n\r\n    const handleDelete = () => {\r\n      if (confirm(`Delete ${selectedCards.length} card(s)? This cannot be undone.`)) {\r\n        callbacks.onBulkDelete?.(cardIds)\r\n        onClearSelection()\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"asakaa-bulk-toolbar\">\r\n        <div className=\"asakaa-bulk-toolbar-content\">\r\n          {/* Selection count */}\r\n          <div className=\"asakaa-bulk-toolbar-count\">\r\n            {selectedCards.length} card{selectedCards.length !== 1 ? 's' : ''} selected\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"asakaa-bulk-toolbar-actions\">\r\n            {/* Priority */}\r\n            <div className=\"relative\">\r\n              <button\r\n                className=\"asakaa-bulk-toolbar-button\"\r\n                onClick={() => setShowPriorityMenu(!showPriorityMenu)}\r\n                title=\"Update priority\"\r\n              >\r\n                <span className=\"text-sm\">Priority</span>\r\n              </button>\r\n              {showPriorityMenu && (\r\n                <div className=\"asakaa-bulk-menu\">\r\n                  {(['LOW', 'MEDIUM', 'HIGH', 'URGENT'] as Priority[]).map((priority) => (\r\n                    <button\r\n                      key={priority}\r\n                      className=\"asakaa-bulk-menu-item\"\r\n                      onClick={() => handleUpdatePriority(priority)}\r\n                    >\r\n                      <span\r\n                        className={cn(\r\n                          'asakaa-priority-dot',\r\n                          priority === 'LOW' && 'bg-asakaa-priority-low',\r\n                          priority === 'MEDIUM' && 'bg-asakaa-priority-medium',\r\n                          priority === 'HIGH' && 'bg-asakaa-priority-high',\r\n                          priority === 'URGENT' && 'bg-asakaa-priority-urgent'\r\n                        )}\r\n                      />\r\n                      {priority}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Move to column */}\r\n            {columns.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowMoveMenu(!showMoveMenu)}\r\n                  title=\"Move to column\"\r\n                >\r\n                  <span className=\"text-sm\">Move</span>\r\n                </button>\r\n                {showMoveMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {columns.map((column) => (\r\n                      <button\r\n                        key={column.id}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleMove(column.id)}\r\n                      >\r\n                        {column.title}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Assign users */}\r\n            {availableUsers.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowUserMenu(!showUserMenu)}\r\n                  title=\"Assign users\"\r\n                >\r\n                  <span className=\"text-sm\">Assign</span>\r\n                </button>\r\n                {showUserMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {availableUsers.map((user) => (\r\n                      <button\r\n                        key={user.id}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleAssignUsers([user.id])}\r\n                      >\r\n                        <div\r\n                          className=\"w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium\"\r\n                          style={{ backgroundColor: user.color }}\r\n                        >\r\n                          {user.initials}\r\n                        </div>\r\n                        {user.name}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Add labels */}\r\n            {availableLabels.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowLabelMenu(!showLabelMenu)}\r\n                  title=\"Add labels\"\r\n                >\r\n                  <span className=\"text-sm\">Labels</span>\r\n                </button>\r\n                {showLabelMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {availableLabels.map((label) => (\r\n                      <button\r\n                        key={label}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleAddLabels([label])}\r\n                      >\r\n                        {label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Delete */}\r\n            <button\r\n              className=\"asakaa-bulk-toolbar-button asakaa-bulk-toolbar-button-danger\"\r\n              onClick={handleDelete}\r\n              title=\"Delete selected cards\"\r\n            >\r\n              <span className=\"text-sm\">Delete</span>\r\n            </button>\r\n\r\n            {/* Clear selection */}\r\n            <button\r\n              className=\"asakaa-bulk-toolbar-button\"\r\n              onClick={onClearSelection}\r\n              title=\"Clear selection\"\r\n            >\r\n              <span className=\"text-sm\"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nBulkOperationsToolbar.displayName = 'BulkOperationsToolbar'\r\n","/**\r\n * SwimlaneBoardView Component\r\n * Displays board grouped by swimlanes (horizontal rows)\r\n * @module components/Swimlanes\r\n */\r\n\r\nimport { useMemo, useState, useCallback } from 'react'\r\nimport type {\r\n  Board,\r\n  Card,\r\n  Column,\r\n  GroupByOption,\r\n  Swimlane,\r\n  SwimlaneConfig,\r\n} from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { KanbanBoard } from '../Board'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface SwimlaneBoardViewProps {\r\n  /** Board data */\r\n  board: Board\r\n  /** Swimlane configuration */\r\n  swimlaneConfig: SwimlaneConfig\r\n  /** All available users */\r\n  availableUsers?: User[]\r\n  /** Board callbacks */\r\n  callbacks: {\r\n    onCardMove?: (cardId: string, targetColumnId: string, position: number) => void\r\n    onCardUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n    onColumnUpdate?: (columnId: string, updates: Partial<Column>) => void\r\n    onWipLimitExceeded?: (column: Column, card: Card) => void\r\n  }\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Generate swimlanes based on groupBy option\r\n */\r\nfunction generateSwimlanes(\r\n  cards: Card[],\r\n  groupBy: GroupByOption,\r\n  availableUsers?: User[]\r\n): Swimlane[] {\r\n  if (groupBy === 'none') {\r\n    return []\r\n  }\r\n\r\n  const laneMap = new Map<string, Swimlane>()\r\n\r\n  // Group cards by the selected criteria\r\n  cards.forEach((card) => {\r\n    let groupValue: any\r\n    let laneId: string\r\n    let laneTitle: string\r\n    let laneColor: string | undefined\r\n    let laneIcon: string | undefined\r\n\r\n    switch (groupBy) {\r\n      case 'assignee':\r\n        // Use assignedUserIds or fallback to assigneeId\r\n        const assignedUserIds = card.assignedUserIds || (card.assigneeId ? [card.assigneeId] : [])\r\n\r\n        if (assignedUserIds.length > 0) {\r\n          assignedUserIds.forEach((userId: string) => {\r\n            const user = availableUsers?.find((u) => u.id === userId)\r\n            laneId = `assignee-${userId}`\r\n            laneTitle = user?.name || `User ${userId}`\r\n            laneColor = user?.color\r\n            laneIcon = user?.avatar\r\n\r\n            if (!laneMap.has(laneId)) {\r\n              laneMap.set(laneId, {\r\n                id: laneId,\r\n                title: laneTitle,\r\n                groupValue: userId,\r\n                cardIds: [],\r\n                color: laneColor,\r\n                icon: laneIcon,\r\n              })\r\n            }\r\n            laneMap.get(laneId)!.cardIds.push(card.id)\r\n          })\r\n        } else {\r\n          // Unassigned lane\r\n          laneId = 'assignee-unassigned'\r\n          laneTitle = 'Unassigned'\r\n          laneColor = '#6b7280'\r\n          laneIcon = ''\r\n\r\n          if (!laneMap.has(laneId)) {\r\n            laneMap.set(laneId, {\r\n              id: laneId,\r\n              title: laneTitle,\r\n              groupValue: null,\r\n              cardIds: [],\r\n              color: laneColor,\r\n              icon: laneIcon,\r\n            })\r\n          }\r\n          laneMap.get(laneId)!.cardIds.push(card.id)\r\n        }\r\n        break\r\n\r\n      case 'priority':\r\n        groupValue = card.priority || 'NONE'\r\n        laneId = `priority-${groupValue}`\r\n\r\n        // Priority styling\r\n        const priorityConfig = {\r\n          URGENT: { title: ' Urgent', color: '#ef4444' },\r\n          HIGH: { title: ' High', color: '#f97316' },\r\n          MEDIUM: { title: ' Medium', color: '#eab308' },\r\n          LOW: { title: ' Low', color: '#22c55e' },\r\n          NONE: { title: ' No Priority', color: '#6b7280' },\r\n        }\r\n\r\n        const config = priorityConfig[groupValue as keyof typeof priorityConfig]\r\n        laneTitle = config.title\r\n        laneColor = config.color\r\n\r\n        if (!laneMap.has(laneId)) {\r\n          laneMap.set(laneId, {\r\n            id: laneId,\r\n            title: laneTitle,\r\n            groupValue,\r\n            cardIds: [],\r\n            color: laneColor,\r\n          })\r\n        }\r\n        laneMap.get(laneId)!.cardIds.push(card.id)\r\n        break\r\n\r\n      case 'label':\r\n        if (card.labels && card.labels.length > 0) {\r\n          card.labels.forEach((label: string) => {\r\n            laneId = `label-${label}`\r\n            laneTitle = label\r\n            laneColor = '#6b7280' // Default gray color for string labels\r\n\r\n            if (!laneMap.has(laneId)) {\r\n              laneMap.set(laneId, {\r\n                id: laneId,\r\n                title: laneTitle,\r\n                groupValue: label,\r\n                cardIds: [],\r\n                color: laneColor,\r\n              })\r\n            }\r\n            laneMap.get(laneId)!.cardIds.push(card.id)\r\n          })\r\n        } else {\r\n          // No labels lane\r\n          laneId = 'label-none'\r\n          laneTitle = 'No Labels'\r\n          laneColor = '#6b7280'\r\n\r\n          if (!laneMap.has(laneId)) {\r\n            laneMap.set(laneId, {\r\n              id: laneId,\r\n              title: laneTitle,\r\n              groupValue: null,\r\n              cardIds: [],\r\n              color: laneColor,\r\n            })\r\n          }\r\n          laneMap.get(laneId)!.cardIds.push(card.id)\r\n        }\r\n        break\r\n    }\r\n  })\r\n\r\n  return Array.from(laneMap.values()).sort((a, b) => {\r\n    // Sort by title\r\n    return a.title.localeCompare(b.title)\r\n  })\r\n}\r\n\r\n/**\r\n * SwimlaneBoardView Component\r\n */\r\nexport function SwimlaneBoardView({\r\n  board,\r\n  swimlaneConfig,\r\n  availableUsers,\r\n  callbacks,\r\n  className,\r\n}: SwimlaneBoardViewProps) {\r\n  const [collapsedLanes, setCollapsedLanes] = useState<Set<string>>(new Set())\r\n\r\n  // Generate swimlanes\r\n  const swimlanes = useMemo(() => {\r\n    return generateSwimlanes(\r\n      board.cards,\r\n      swimlaneConfig.groupBy,\r\n      availableUsers\r\n    )\r\n  }, [board.cards, swimlaneConfig.groupBy, availableUsers])\r\n\r\n  // Toggle lane collapse\r\n  const toggleLaneCollapse = useCallback((laneId: string) => {\r\n    setCollapsedLanes((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(laneId)) {\r\n        next.delete(laneId)\r\n      } else {\r\n        next.add(laneId)\r\n      }\r\n      return next\r\n    })\r\n  }, [])\r\n\r\n  // If no grouping, render standard board\r\n  if (swimlaneConfig.groupBy === 'none' || swimlanes.length === 0) {\r\n    return (\r\n      <KanbanBoard\r\n        board={board}\r\n        callbacks={callbacks}\r\n        availableUsers={availableUsers}\r\n        className={className}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('asakaa-swimlane-view', className)}>\r\n      {swimlanes.map((lane) => {\r\n        const isCollapsed = collapsedLanes.has(lane.id)\r\n\r\n        // Filter cards for this lane\r\n        const laneCards = board.cards.filter((card) =>\r\n          lane.cardIds.includes(card.id)\r\n        )\r\n\r\n        // Create filtered board for this lane\r\n        const laneBoard: Board = {\r\n          ...board,\r\n          cards: laneCards,\r\n        }\r\n\r\n        return (\r\n          <div\r\n            key={lane.id}\r\n            className=\"asakaa-swimlane mb-6 rounded-lg border border-white/10 overflow-hidden\"\r\n          >\r\n            {/* Swimlane Header */}\r\n            <div\r\n              className=\"asakaa-swimlane-header px-4 py-3 bg-white/5 backdrop-blur-sm flex items-center justify-between cursor-pointer hover:bg-white/10 transition-colors\"\r\n              onClick={() => swimlaneConfig.collapsible && toggleLaneCollapse(lane.id)}\r\n              style={{\r\n                borderLeft: lane.color ? `4px solid ${lane.color}` : undefined,\r\n              }}\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                {lane.icon && (\r\n                  <span className=\"text-2xl leading-none\">{lane.icon}</span>\r\n                )}\r\n                <h3\r\n                  className=\"text-lg font-semibold\"\r\n                  style={{ color: lane.color }}\r\n                >\r\n                  {lane.title}\r\n                </h3>\r\n                <span className=\"text-sm text-white/50 font-medium\">\r\n                  ({lane.cardIds.length} {lane.cardIds.length === 1 ? 'card' : 'cards'})\r\n                </span>\r\n              </div>\r\n\r\n              {swimlaneConfig.collapsible && (\r\n                <button\r\n                  className=\"text-white/50 hover:text-white transition-colors\"\r\n                  aria-label={isCollapsed ? 'Expand lane' : 'Collapse lane'}\r\n                >\r\n                  {isCollapsed ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Swimlane Content */}\r\n            {!isCollapsed && (\r\n              <div className=\"asakaa-swimlane-content p-4\">\r\n                <KanbanBoard\r\n                  board={laneBoard}\r\n                  callbacks={callbacks}\r\n                  availableUsers={availableUsers}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )\r\n      })}\r\n\r\n      {/* Empty state */}\r\n      {swimlanes.length === 0 && (\r\n        <div className=\"text-center py-12 text-white/50\">\r\n          <p className=\"text-lg\">No cards to display</p>\r\n          <p className=\"text-sm mt-2\">\r\n            Cards will appear here when they match the grouping criteria\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * GroupBySelector Component\r\n * Dropdown to select swimlane grouping option\r\n * @module components/Swimlanes\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport type { GroupByOption } from '../../types'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface GroupBySelectorProps {\r\n  /** Current groupBy value */\r\n  value: GroupByOption\r\n  /** Change handler */\r\n  onChange: (groupBy: GroupByOption) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\ninterface GroupByConfig {\r\n  value: GroupByOption\r\n  label: string\r\n  icon: string\r\n  description: string\r\n}\r\n\r\nconst GROUP_BY_OPTIONS: GroupByConfig[] = [\r\n  {\r\n    value: 'none',\r\n    label: 'No Grouping',\r\n    icon: '',\r\n    description: 'Standard Kanban board view',\r\n  },\r\n  {\r\n    value: 'assignee',\r\n    label: 'By Assignee',\r\n    icon: '',\r\n    description: 'Group cards by assigned user',\r\n  },\r\n  {\r\n    value: 'priority',\r\n    label: 'By Priority',\r\n    icon: '',\r\n    description: 'Group cards by priority level',\r\n  },\r\n  {\r\n    value: 'label',\r\n    label: 'By Label',\r\n    icon: '',\r\n    description: 'Group cards by label/tag',\r\n  },\r\n]\r\n\r\n/**\r\n * GroupBySelector Component\r\n */\r\nexport function GroupBySelector({\r\n  value,\r\n  onChange,\r\n  className,\r\n}: GroupBySelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  const currentOption = GROUP_BY_OPTIONS.find((opt) => opt.value === value) || GROUP_BY_OPTIONS[0]!\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent): void {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        buttonRef.current &&\r\n        !buttonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (option: GroupByOption) => {\r\n    onChange(option)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relative inline-block', className)}>\r\n      {/* Trigger Button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/20 transition-all text-sm font-medium text-white/90\"\r\n      >\r\n        <span className=\"text-base leading-none\">{currentOption.icon}</span>\r\n        <span>{currentOption.label}</span>\r\n        <svg\r\n          className={cn(\r\n            'w-4 h-4 transition-transform',\r\n            isOpen && 'rotate-180'\r\n          )}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M19 9l-7 7-7-7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\r\n        <div\r\n          ref={menuRef}\r\n          className=\"absolute top-full left-0 mt-2 min-w-[280px] rounded-lg bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-xl border border-white/20 shadow-2xl z-50 overflow-hidden\"\r\n        >\r\n          <div className=\"px-3 py-2 border-b border-white/10\">\r\n            <span className=\"text-[10px] font-bold text-white/70 uppercase tracking-wider\">\r\n              Group By\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {GROUP_BY_OPTIONS.map((option) => (\r\n              <button\r\n                key={option.value}\r\n                onClick={() => handleSelect(option.value)}\r\n                className={cn(\r\n                  'w-full px-3 py-2 flex items-start gap-3 text-left transition-all hover:bg-white/10',\r\n                  value === option.value && 'bg-white/5'\r\n                )}\r\n              >\r\n                <span className=\"text-xl leading-none mt-0.5\">\r\n                  {option.icon}\r\n                </span>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"font-semibold text-sm text-white\">\r\n                      {option.label}\r\n                    </span>\r\n                    {value === option.value && (\r\n                      <span className=\"text-blue-400 text-xs\"></span>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/60 mt-0.5\">\r\n                    {option.description}\r\n                  </p>\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * useKeyboardShortcuts Hook\r\n * Global keyboard shortcuts system for board navigation and actions\r\n * @module hooks/keyboard\r\n */\r\n\r\nimport { useEffect, useCallback, useRef } from 'react'\r\nimport type { KeyboardShortcut, KeyboardAction } from '../../types'\r\n\r\nexport interface UseKeyboardShortcutsOptions {\r\n  /** Shortcuts configuration */\r\n  shortcuts?: KeyboardShortcut[]\r\n  /** Enable/disable shortcuts */\r\n  enabled?: boolean\r\n  /** Prevent default browser behavior */\r\n  preventDefault?: boolean\r\n}\r\n\r\nexport interface UseKeyboardShortcutsReturn {\r\n  /** Register a keyboard shortcut dynamically */\r\n  registerShortcut: (shortcut: KeyboardShortcut) => void\r\n  /** Unregister a keyboard shortcut */\r\n  unregisterShortcut: (action: KeyboardAction) => void\r\n  /** Check if shortcuts are enabled */\r\n  isEnabled: boolean\r\n}\r\n\r\n/**\r\n * Default keyboard shortcuts for Kanban board\r\n */\r\nexport const DEFAULT_SHORTCUTS: KeyboardShortcut[] = [\r\n  {\r\n    keys: 'ArrowUp',\r\n    action: 'navigate_up',\r\n    description: 'Navigate to card above',\r\n  },\r\n  {\r\n    keys: 'ArrowDown',\r\n    action: 'navigate_down',\r\n    description: 'Navigate to card below',\r\n  },\r\n  {\r\n    keys: 'ArrowLeft',\r\n    action: 'navigate_left',\r\n    description: 'Navigate to previous column',\r\n  },\r\n  {\r\n    keys: 'ArrowRight',\r\n    action: 'navigate_right',\r\n    description: 'Navigate to next column',\r\n  },\r\n  {\r\n    keys: 'Enter',\r\n    action: 'open_card',\r\n    description: 'Open selected card',\r\n  },\r\n  {\r\n    keys: 'Escape',\r\n    action: 'close_modal',\r\n    description: 'Close modal or dialog',\r\n  },\r\n  {\r\n    keys: 'Delete',\r\n    action: 'delete_card',\r\n    description: 'Delete selected card',\r\n    modifiers: { shift: true },\r\n  },\r\n  {\r\n    keys: 'n',\r\n    action: 'new_card',\r\n    description: 'Create new card',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'k',\r\n    action: 'search',\r\n    description: 'Open search/command palette',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 's',\r\n    action: 'save',\r\n    description: 'Save changes',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'z',\r\n    action: 'undo',\r\n    description: 'Undo last action',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'y',\r\n    action: 'redo',\r\n    description: 'Redo last undone action',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'a',\r\n    action: 'select_all',\r\n    description: 'Select all cards',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'Escape',\r\n    action: 'deselect_all',\r\n    description: 'Deselect all cards',\r\n  },\r\n  {\r\n    keys: '?',\r\n    action: 'show_shortcuts',\r\n    description: 'Show keyboard shortcuts help',\r\n    modifiers: { shift: true },\r\n  },\r\n]\r\n\r\n/**\r\n * Check if keyboard event matches shortcut\r\n */\r\nfunction matchesShortcut(event: KeyboardEvent, shortcut: KeyboardShortcut): boolean {\r\n  const keys = Array.isArray(shortcut.keys) ? shortcut.keys : [shortcut.keys]\r\n  const keyMatches = keys.some((key) => event.key === key || event.code === key)\r\n\r\n  if (!keyMatches) return false\r\n\r\n  const modifiers = shortcut.modifiers || {}\r\n  const ctrlMatch = modifiers.ctrl ? (event.ctrlKey || event.metaKey) : !event.ctrlKey && !event.metaKey\r\n  const shiftMatch = modifiers.shift ? event.shiftKey : !event.shiftKey\r\n  const altMatch = modifiers.alt ? event.altKey : !event.altKey\r\n  const metaMatch = modifiers.meta ? event.metaKey : true // Don't enforce meta unless specified\r\n\r\n  return ctrlMatch && shiftMatch && altMatch && metaMatch\r\n}\r\n\r\n/**\r\n * useKeyboardShortcuts Hook\r\n *\r\n * @example\r\n * ```tsx\r\n * const { registerShortcut } = useKeyboardShortcuts({\r\n *   shortcuts: DEFAULT_SHORTCUTS,\r\n *   enabled: true,\r\n *   preventDefault: true,\r\n * })\r\n *\r\n * // Listen for keyboard actions\r\n * useEffect(() => {\r\n *   const handleKeyboardAction = (event: CustomEvent<KeyboardAction>) => {\r\n *     console.log('Action triggered:', event.detail)\r\n *   }\r\n *\r\n *   window.addEventListener('keyboard-action', handleKeyboardAction)\r\n *   return () => window.removeEventListener('keyboard-action', handleKeyboardAction)\r\n * }, [])\r\n * ```\r\n */\r\nexport function useKeyboardShortcuts(\r\n  options: UseKeyboardShortcutsOptions = {}\r\n): UseKeyboardShortcutsReturn {\r\n  const {\r\n    shortcuts = DEFAULT_SHORTCUTS,\r\n    enabled = true,\r\n    preventDefault = true,\r\n  } = options\r\n\r\n  const shortcutsRef = useRef<KeyboardShortcut[]>(shortcuts)\r\n  const enabledRef = useRef(enabled)\r\n\r\n  // Update refs when options change\r\n  useEffect(() => {\r\n    shortcutsRef.current = shortcuts\r\n    enabledRef.current = enabled\r\n  }, [shortcuts, enabled])\r\n\r\n  // Register a new shortcut dynamically\r\n  const registerShortcut = useCallback((shortcut: KeyboardShortcut) => {\r\n    shortcutsRef.current = [...shortcutsRef.current, shortcut]\r\n  }, [])\r\n\r\n  // Unregister a shortcut\r\n  const unregisterShortcut = useCallback((action: KeyboardAction) => {\r\n    shortcutsRef.current = shortcutsRef.current.filter((s) => s.action !== action)\r\n  }, [])\r\n\r\n  // Handle keyboard events\r\n  useEffect(() => {\r\n    function handleKeyDown(event: KeyboardEvent): void {\r\n      if (!enabledRef.current) return\r\n\r\n      // Don't trigger shortcuts when typing in inputs, textareas, or contenteditable\r\n      const target = event.target as HTMLElement\r\n      if (\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable\r\n      ) {\r\n        // Allow Escape and Ctrl+shortcuts even in inputs\r\n        if (event.key !== 'Escape' && !event.ctrlKey && !event.metaKey) {\r\n          return\r\n        }\r\n      }\r\n\r\n      // Check each shortcut\r\n      for (const shortcut of shortcutsRef.current) {\r\n        if (matchesShortcut(event, shortcut)) {\r\n          if (preventDefault) {\r\n            event.preventDefault()\r\n          }\r\n\r\n          // Dispatch custom event with action\r\n          const customEvent = new CustomEvent('keyboard-action', {\r\n            detail: shortcut.action,\r\n            bubbles: true,\r\n            cancelable: true,\r\n          })\r\n          window.dispatchEvent(customEvent)\r\n\r\n          break // Only trigger first matching shortcut\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n  }, [preventDefault])\r\n\r\n  return {\r\n    registerShortcut,\r\n    unregisterShortcut,\r\n    isEnabled: enabled,\r\n  }\r\n}\r\n","/**\r\n * KeyboardShortcutsHelp Component\r\n * Modal displaying available keyboard shortcuts\r\n * @module components/KeyboardShortcuts\r\n */\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport type { KeyboardShortcut } from '../../types'\r\nimport { DEFAULT_SHORTCUTS } from '../../hooks/keyboard/useKeyboardShortcuts'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface KeyboardShortcutsHelpProps {\r\n  /** Custom shortcuts to display */\r\n  shortcuts?: KeyboardShortcut[]\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Format keyboard key for display\r\n */\r\nfunction formatKey(key: string): string {\r\n  const keyMap: Record<string, string> = {\r\n    ArrowUp: '',\r\n    ArrowDown: '',\r\n    ArrowLeft: '',\r\n    ArrowRight: '',\r\n    Enter: '',\r\n    Escape: 'Esc',\r\n    Delete: 'Del',\r\n    ' ': 'Space',\r\n  }\r\n  return keyMap[key] || key.toUpperCase()\r\n}\r\n\r\n/**\r\n * Format modifiers for display\r\n */\r\nfunction formatModifiers(shortcut: KeyboardShortcut): string {\r\n  const parts: string[] = []\r\n  const isMac = typeof navigator !== 'undefined' && navigator.platform.includes('Mac')\r\n\r\n  if (shortcut.modifiers?.ctrl) {\r\n    parts.push(isMac ? '' : 'Ctrl')\r\n  }\r\n  if (shortcut.modifiers?.shift) {\r\n    parts.push('Shift')\r\n  }\r\n  if (shortcut.modifiers?.alt) {\r\n    parts.push(isMac ? '' : 'Alt')\r\n  }\r\n  if (shortcut.modifiers?.meta) {\r\n    parts.push('')\r\n  }\r\n\r\n  return parts.join(' + ')\r\n}\r\n\r\n/**\r\n * Get full shortcut display\r\n */\r\nfunction getShortcutDisplay(shortcut: KeyboardShortcut): string {\r\n  const keys = Array.isArray(shortcut.keys) ? shortcut.keys[0] : shortcut.keys\r\n  const modifiers = formatModifiers(shortcut)\r\n  const key = keys ? formatKey(keys) : ''\r\n\r\n  return modifiers ? `${modifiers} + ${key}` : key\r\n}\r\n\r\n/**\r\n * Group shortcuts by category\r\n */\r\nfunction groupShortcuts(shortcuts: KeyboardShortcut[]): Record<string, KeyboardShortcut[]> {\r\n  const groups: Record<string, KeyboardShortcut[]> = {\r\n    Navigation: [],\r\n    Actions: [],\r\n    Editing: [],\r\n    Selection: [],\r\n  }\r\n\r\n  shortcuts.forEach((shortcut) => {\r\n    if (shortcut.action.includes('navigate')) {\r\n      groups.Navigation?.push(shortcut)\r\n    } else if (shortcut.action.includes('select')) {\r\n      groups.Selection?.push(shortcut)\r\n    } else if (['undo', 'redo', 'save'].includes(shortcut.action)) {\r\n      groups.Editing?.push(shortcut)\r\n    } else {\r\n      groups.Actions?.push(shortcut)\r\n    }\r\n  })\r\n\r\n  return groups\r\n}\r\n\r\n/**\r\n * KeyboardShortcutsHelp Component\r\n */\r\nexport function KeyboardShortcutsHelp({\r\n  shortcuts = DEFAULT_SHORTCUTS,\r\n  isOpen,\r\n  onClose,\r\n  className,\r\n}: KeyboardShortcutsHelpProps) {\r\n  const [isMounted, setIsMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true)\r\n  }, [])\r\n\r\n  // Close on Escape\r\n  useEffect(() => {\r\n    function handleKeyDown(event: KeyboardEvent): void {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleKeyDown)\r\n      return () => document.removeEventListener('keydown', handleKeyDown)\r\n    }\r\n    return undefined\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isMounted || !isOpen) return null\r\n\r\n  const groups = groupShortcuts(shortcuts)\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-xl rounded-2xl border border-white/20 shadow-2xl max-w-3xl w-full mx-4 max-h-[80vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"px-6 py-5 border-b border-white/10 flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n              <span className=\"text-3xl\"></span>\r\n              Keyboard Shortcuts\r\n            </h2>\r\n            <p className=\"text-sm text-white/60 mt-1\">\r\n              Speed up your workflow with these shortcuts\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white/50 hover:text-white transition-colors text-2xl leading-none p-2 hover:bg-white/10 rounded-lg\"\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"px-6 py-6 overflow-y-auto max-h-[calc(80vh-120px)]\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            {Object.entries(groups).map(([category, categoryShortcuts]) => {\r\n              if (categoryShortcuts.length === 0) return null\r\n\r\n              return (\r\n                <div key={category}>\r\n                  <h3 className=\"text-lg font-semibold text-white/90 mb-4 flex items-center gap-2\">\r\n                    <span className=\"w-1 h-5 bg-blue-500 rounded-full\" />\r\n                    {category}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {categoryShortcuts.map((shortcut) => (\r\n                      <div\r\n                        key={shortcut.action}\r\n                        className=\"flex items-center justify-between gap-4 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors\"\r\n                      >\r\n                        <span className=\"text-sm text-white/80\">\r\n                          {shortcut.description}\r\n                        </span>\r\n                        <kbd className=\"px-3 py-1.5 bg-gradient-to-br from-gray-700 to-gray-800 border border-white/20 rounded-md text-xs font-mono text-white/90 shadow-lg whitespace-nowrap\">\r\n                          {getShortcutDisplay(shortcut)}\r\n                        </kbd>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"px-6 py-4 border-t border-white/10 bg-white/5\">\r\n          <p className=\"text-xs text-white/50 text-center\">\r\n            Press <kbd className=\"px-2 py-0.5 bg-white/10 rounded text-white/70\">?</kbd> to toggle this help panel\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardTemplateSelector Component\r\n * Dropdown to select and apply card templates\r\n * @module components/Templates\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport type { CardTemplate } from '../../types'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardTemplateSelectorProps {\r\n  /** Available templates */\r\n  templates: CardTemplate[]\r\n  /** Template selection handler */\r\n  onSelectTemplate: (template: CardTemplate) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Default card templates\r\n */\r\nexport const DEFAULT_TEMPLATES: CardTemplate[] = [\r\n  {\r\n    id: 'bug-report',\r\n    name: 'Bug Report',\r\n    description: 'Report a bug or issue',\r\n    icon: '',\r\n    category: 'Development',\r\n    template: {\r\n      title: '[BUG] ',\r\n      description: '**Steps to reproduce:**\\n1. \\n\\n**Expected behavior:**\\n\\n**Actual behavior:**\\n\\n**Screenshots:**',\r\n      priority: 'HIGH',\r\n      labels: ['bug'],\r\n    },\r\n  },\r\n  {\r\n    id: 'feature-request',\r\n    name: 'Feature Request',\r\n    description: 'Propose a new feature',\r\n    icon: '',\r\n    category: 'Development',\r\n    template: {\r\n      title: '[FEATURE] ',\r\n      description: '**Problem:**\\n\\n**Proposed solution:**\\n\\n**Alternatives considered:**\\n\\n**Additional context:**',\r\n      priority: 'MEDIUM',\r\n      labels: ['feature', 'enhancement'],\r\n    },\r\n  },\r\n  {\r\n    id: 'task',\r\n    name: 'Task',\r\n    description: 'General task or to-do',\r\n    icon: '',\r\n    category: 'General',\r\n    template: {\r\n      title: '',\r\n      description: '**Objective:**\\n\\n**Acceptance criteria:**\\n- [ ] \\n\\n**Notes:**',\r\n      priority: 'MEDIUM',\r\n    },\r\n  },\r\n  {\r\n    id: 'research',\r\n    name: 'Research',\r\n    description: 'Investigation or research task',\r\n    icon: '',\r\n    category: 'General',\r\n    template: {\r\n      title: '[RESEARCH] ',\r\n      description: '**Goal:**\\n\\n**Questions to answer:**\\n- \\n\\n**Resources:**\\n- \\n\\n**Findings:**',\r\n      priority: 'LOW',\r\n      labels: ['research'],\r\n    },\r\n  },\r\n  {\r\n    id: 'documentation',\r\n    name: 'Documentation',\r\n    description: 'Documentation task',\r\n    icon: '',\r\n    category: 'Documentation',\r\n    template: {\r\n      title: '[DOCS] ',\r\n      description: '**What needs to be documented:**\\n\\n**Target audience:**\\n\\n**Key points:**\\n- ',\r\n      priority: 'LOW',\r\n      labels: ['documentation'],\r\n    },\r\n  },\r\n  {\r\n    id: 'meeting',\r\n    name: 'Meeting',\r\n    description: 'Meeting or discussion',\r\n    icon: '',\r\n    category: 'Communication',\r\n    template: {\r\n      title: 'Meeting: ',\r\n      description: '**Date & Time:**\\n\\n**Participants:**\\n- \\n\\n**Agenda:**\\n1. \\n\\n**Action items:**\\n- [ ] ',\r\n      priority: 'MEDIUM',\r\n      labels: ['meeting'],\r\n    },\r\n  },\r\n]\r\n\r\n/**\r\n * CardTemplateSelector Component\r\n */\r\nexport function CardTemplateSelector({\r\n  templates,\r\n  onSelectTemplate,\r\n  className,\r\n}: CardTemplateSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent): void {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        buttonRef.current &&\r\n        !buttonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (template: CardTemplate) => {\r\n    onSelectTemplate(template)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  // Group templates by category\r\n  const groupedTemplates = templates.reduce((acc, template) => {\r\n    const category = template.category || 'Other'\r\n    if (!acc[category]) {\r\n      acc[category] = []\r\n    }\r\n    acc[category].push(template)\r\n    return acc\r\n  }, {} as Record<string, CardTemplate[]>)\r\n\r\n  return (\r\n    <div className={cn('relative inline-block', className)}>\r\n      {/* Trigger Button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-sm font-medium shadow-lg\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n          color: 'var(--theme-text-primary)',\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n          e.currentTarget.style.borderColor = 'var(--theme-border-secondary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-secondary)'\r\n          e.currentTarget.style.borderColor = 'var(--theme-border-primary)'\r\n        }}\r\n        title=\"Create from template\"\r\n      >\r\n        <span className=\"text-base leading-none\"></span>\r\n        <span>Templates</span>\r\n        <svg\r\n          className={cn(\r\n            'w-4 h-4 transition-transform',\r\n            isOpen && 'rotate-180'\r\n          )}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M19 9l-7 7-7-7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\r\n        <div\r\n          ref={menuRef}\r\n          className=\"absolute top-full left-0 mt-2 min-w-[320px] max-w-[400px] rounded-xl backdrop-blur-xl border shadow-2xl z-50 overflow-hidden max-h-[500px] overflow-y-auto\"\r\n          style={{\r\n            backgroundColor: 'var(--theme-bg-primary)',\r\n            borderColor: 'var(--theme-border-primary)',\r\n          }}\r\n        >\r\n          <div\r\n            className=\"px-4 py-3 border-b sticky top-0 backdrop-blur-sm\"\r\n            style={{\r\n              borderColor: 'var(--theme-border-primary)',\r\n              backgroundColor: 'var(--theme-bg-secondary)',\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--theme-text-primary)' }}\r\n            >\r\n              Card Templates\r\n            </span>\r\n            <p\r\n              className=\"text-xs mt-0.5\"\r\n              style={{ color: 'var(--theme-text-tertiary)' }}\r\n            >\r\n              Quick start with pre-configured cards\r\n            </p>\r\n          </div>\r\n\r\n          {Object.entries(groupedTemplates).map(([category, categoryTemplates]) => (\r\n            <div key={category} className=\"py-2\">\r\n              <div className=\"px-4 py-2\">\r\n                <h4\r\n                  className=\"text-xs font-semibold uppercase tracking-wider\"\r\n                  style={{ color: 'var(--theme-text-secondary)' }}\r\n                >\r\n                  {category}\r\n                </h4>\r\n              </div>\r\n              <div>\r\n                {categoryTemplates.map((template) => (\r\n                  <button\r\n                    key={template.id}\r\n                    onClick={() => handleSelect(template)}\r\n                    className=\"w-full px-4 py-3 flex items-start gap-3 text-left transition-all active:scale-[0.98]\"\r\n                    style={{ color: 'var(--theme-text-primary)' }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'transparent'\r\n                    }}\r\n                  >\r\n                    <span className=\"text-2xl leading-none mt-0.5\">\r\n                      {template.icon}\r\n                    </span>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className=\"font-semibold text-sm\"\r\n                        style={{ color: 'var(--theme-text-primary)' }}\r\n                      >\r\n                        {template.name}\r\n                      </div>\r\n                      {template.description && (\r\n                        <p\r\n                          className=\"text-xs mt-0.5\"\r\n                          style={{ color: 'var(--theme-text-tertiary)' }}\r\n                        >\r\n                          {template.description}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {templates.length === 0 && (\r\n            <div\r\n              className=\"px-4 py-8 text-center\"\r\n              style={{ color: 'var(--theme-text-tertiary)' }}\r\n            >\r\n              <p className=\"text-sm\">No templates available</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ExportImportModal Component\r\n * Modal for exporting and importing board data\r\n * @module components/ExportImport\r\n */\r\n\r\nimport { useState, useRef } from 'react'\r\nimport type { Board, ExportFormat, ImportResult } from '../../types'\r\nimport { exportBoard, downloadExport } from '../../utils/export'\r\nimport { readFile, importBoard } from '../../utils/import'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ExportImportModalProps {\r\n  /** Board data to export */\r\n  board: Board\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Import handler */\r\n  onImport?: (result: ImportResult, content: string) => void\r\n  /** Board element ref for PDF export */\r\n  boardElementRef?: React.RefObject<HTMLElement>\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * ExportImportModal Component\r\n */\r\nexport function ExportImportModal({\r\n  board,\r\n  isOpen,\r\n  onClose,\r\n  onImport,\r\n  boardElementRef,\r\n  className,\r\n}: ExportImportModalProps) {\r\n  const [activeTab, setActiveTab] = useState<'export' | 'import'>('export')\r\n  const [selectedFormat, setSelectedFormat] = useState<ExportFormat>('json')\r\n  const [importResult, setImportResult] = useState<ImportResult | null>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  if (!isOpen) return null\r\n\r\n  const handleExport = async () => {\r\n    const boardElement = boardElementRef?.current || undefined\r\n    const content = await exportBoard(board, selectedFormat, boardElement)\r\n    downloadExport(content, selectedFormat)\r\n  }\r\n\r\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0]\r\n    if (!file) return\r\n\r\n    try {\r\n      const content = await readFile(file)\r\n      const format = file.name.endsWith('.json') ? 'json' : 'csv'\r\n      const result = importBoard(content, format)\r\n\r\n      setImportResult(result)\r\n\r\n      if (result.success && onImport) {\r\n        onImport(result, content)\r\n      }\r\n    } catch (error) {\r\n      setImportResult({\r\n        success: false,\r\n        errors: [`Failed to read file: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n      })\r\n    }\r\n\r\n    // Reset file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = ''\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-xl rounded-2xl border border-white/20 shadow-2xl max-w-2xl w-full mx-4\">\r\n        {/* Header */}\r\n        <div className=\"px-6 py-5 border-b border-white/10 flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n              <span className=\"text-3xl\"></span>\r\n              Export / Import\r\n            </h2>\r\n            <p className=\"text-sm text-white/60 mt-1\">\r\n              Transfer your board data\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white/50 hover:text-white transition-colors text-2xl leading-none p-2 hover:bg-white/10 rounded-lg\"\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-white/10\">\r\n          <button\r\n            onClick={() => setActiveTab('export')}\r\n            className={cn(\r\n              'flex-1 px-6 py-4 font-semibold transition-colors',\r\n              activeTab === 'export'\r\n                ? 'text-white border-b-2 border-blue-500'\r\n                : 'text-white/50 hover:text-white/80'\r\n            )}\r\n          >\r\n            Export\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('import')}\r\n            className={cn(\r\n              'flex-1 px-6 py-4 font-semibold transition-colors',\r\n              activeTab === 'import'\r\n                ? 'text-white border-b-2 border-blue-500'\r\n                : 'text-white/50 hover:text-white/80'\r\n            )}\r\n          >\r\n            Import\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {activeTab === 'export' && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-white/90 mb-3\">\r\n                  Select format\r\n                </label>\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                  {(['json', 'csv', 'pdf'] as ExportFormat[]).map((format) => (\r\n                    <button\r\n                      key={format}\r\n                      onClick={() => setSelectedFormat(format)}\r\n                      className={cn(\r\n                        'p-4 rounded-lg border-2 transition-all text-center',\r\n                        selectedFormat === format\r\n                          ? 'border-blue-500 bg-blue-500/20 text-white'\r\n                          : 'border-white/20 hover:border-white/40 text-white/70 hover:text-white'\r\n                      )}\r\n                    >\r\n                      <div className=\"text-2xl mb-2\">\r\n                        {format === 'json' && ''}\r\n                        {format === 'csv' && ''}\r\n                        {format === 'pdf' && ''}\r\n                      </div>\r\n                      <div className=\"font-semibold uppercase text-xs\">\r\n                        {format}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/5 rounded-lg p-4\">\r\n                <h3 className=\"text-sm font-semibold text-white/90 mb-2\">Preview</h3>\r\n                <div className=\"text-xs text-white/60\">\r\n                  <div>Board: <span className=\"text-white/90\">{board.title || 'Untitled'}</span></div>\r\n                  <div>Columns: <span className=\"text-white/90\">{board.columns.length}</span></div>\r\n                  <div>Cards: <span className=\"text-white/90\">{board.cards.length}</span></div>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleExport}\r\n                className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-semibold rounded-lg transition-all shadow-lg shadow-blue-500/20\"\r\n              >\r\n                Export Board\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'import' && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-white/90 mb-3\">\r\n                  Upload file\r\n                </label>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\".json,.csv\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <button\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  className=\"w-full py-12 px-4 border-2 border-dashed border-white/30 hover:border-white/50 rounded-lg transition-colors text-white/70 hover:text-white\"\r\n                >\r\n                  <div className=\"text-5xl mb-3\"></div>\r\n                  <div className=\"font-semibold mb-1\">Click to select file</div>\r\n                  <div className=\"text-xs text-white/50\">Supports JSON and CSV files</div>\r\n                </button>\r\n              </div>\r\n\r\n              {importResult && (\r\n                <div\r\n                  className={cn(\r\n                    'p-4 rounded-lg',\r\n                    importResult.success\r\n                      ? 'bg-green-500/20 border border-green-500/30'\r\n                      : 'bg-red-500/20 border border-red-500/30'\r\n                  )}\r\n                >\r\n                  <h3\r\n                    className={cn(\r\n                      'font-semibold mb-2',\r\n                      importResult.success ? 'text-green-400' : 'text-red-400'\r\n                    )}\r\n                  >\r\n                    {importResult.success ? ' Import Successful' : ' Import Failed'}\r\n                  </h3>\r\n                  {importResult.success && (\r\n                    <div className=\"text-sm text-white/80\">\r\n                      <div>Cards imported: {importResult.cardsImported}</div>\r\n                      <div>Columns imported: {importResult.columnsImported}</div>\r\n                    </div>\r\n                  )}\r\n                  {importResult.errors && importResult.errors.length > 0 && (\r\n                    <div className=\"mt-2 text-sm\">\r\n                      {importResult.errors.map((error, index) => (\r\n                        <div key={index} className=\"text-red-300\">\r\n                           {error}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useCallback, useState } from 'react'\r\nimport type { Priority, User } from '../../types'\r\nimport type { FilterState, SortState, SortBy } from '../../hooks/useFilters'\r\nimport type { GroupByOption } from '../../types'\r\nimport './filter-bar.css'\r\n\r\nexport interface FilterBarProps {\r\n  filters: FilterState\r\n  sort: SortState\r\n  onFiltersChange: (filters: Partial<FilterState>) => void\r\n  onSortChange: (sort: Partial<SortState>) => void\r\n  onReset: () => void\r\n  onFilterMyTasks?: () => void\r\n  onFilterOverdue?: () => void\r\n  onFilterHighPriority?: () => void\r\n  availableUsers?: User[]\r\n  availableLabels?: string[]\r\n  availableColumns?: Array<{ id: string; title: string }>\r\n  showQuickFilters?: boolean\r\n  compact?: boolean\r\n  groupBy?: GroupByOption\r\n  onGroupByChange?: (value: GroupByOption) => void\r\n}\r\n\r\nconst PRIORITY_OPTIONS: Priority[] = ['URGENT', 'HIGH', 'MEDIUM', 'LOW']\r\n\r\nconst SORT_OPTIONS: Array<{ value: SortBy; label: string }> = [\r\n  { value: 'none', label: 'None' },\r\n  { value: 'created', label: 'Date Created' },\r\n  { value: 'priority', label: 'Priority' },\r\n  { value: 'dueDate', label: 'Due Date' },\r\n  { value: 'title', label: 'Title' },\r\n  { value: 'estimate', label: 'Estimate' },\r\n]\r\n\r\nconst GROUPBY_OPTIONS: Array<{ value: GroupByOption; label: string }> = [\r\n  { value: 'none', label: 'No Grouping' },\r\n  { value: 'priority', label: 'By Priority' },\r\n  { value: 'assignee', label: 'By Assignee' },\r\n  { value: 'label', label: 'By Label' },\r\n]\r\n\r\nexport function FilterBar({\r\n  filters,\r\n  sort,\r\n  onFiltersChange,\r\n  onSortChange,\r\n  onReset,\r\n  onFilterMyTasks,\r\n  onFilterOverdue,\r\n  onFilterHighPriority,\r\n  availableUsers = [],\r\n  availableLabels = [],\r\n  availableColumns: _availableColumns = [],\r\n  showQuickFilters = true,\r\n  compact = false,\r\n  groupBy = 'none',\r\n  onGroupByChange,\r\n}: FilterBarProps) {\r\n  const [isCollapsed, setIsCollapsed] = useState(true)\r\n\r\n  const handleSearchChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      onFiltersChange({ search: e.target.value })\r\n    },\r\n    [onFiltersChange]\r\n  )\r\n\r\n  const handleDateFilterChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      onFiltersChange({ dateFilter: e.target.value as any })\r\n    },\r\n    [onFiltersChange]\r\n  )\r\n\r\n  const handleSortChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      onSortChange({ by: e.target.value as SortBy })\r\n    },\r\n    [onSortChange]\r\n  )\r\n\r\n  const handleSortOrderToggle = useCallback(() => {\r\n    onSortChange({ order: sort.order === 'asc' ? 'desc' : 'asc' })\r\n  }, [sort.order, onSortChange])\r\n\r\n  const hasActiveFilters =\r\n    filters.search ||\r\n    filters.dateFilter !== 'all' ||\r\n    filters.priorities.length > 0 ||\r\n    filters.assignees.length > 0 ||\r\n    filters.labels.length > 0 ||\r\n    sort.by !== 'none'\r\n\r\n  return (\r\n    <div\r\n      className={`filter-bar ${compact ? 'filter-bar--compact' : ''} ${isCollapsed ? 'filter-bar--collapsed' : ''}`}\r\n    >\r\n      <div\r\n        className=\"filter-bar__header\"\r\n        onClick={() => setIsCollapsed(!isCollapsed)}\r\n        style={{\r\n          cursor: 'pointer',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px',\r\n          marginBottom: isCollapsed ? '0' : '12px',\r\n          padding: '4px 6px',\r\n          borderRadius: '6px',\r\n          transition: 'all 0.2s ease',\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'transparent'\r\n        }}\r\n      >\r\n        <svg\r\n          width=\"14\"\r\n          height=\"14\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          style={{\r\n            transform: isCollapsed ? 'rotate(-90deg)' : 'rotate(0deg)',\r\n            transition: 'transform 0.2s',\r\n            color: 'var(--theme-text-secondary)',\r\n          }}\r\n        >\r\n          <polyline points=\"6 9 12 15 18 9\" />\r\n        </svg>\r\n        <span className=\"filter-bar__label\" style={{ fontWeight: 500, fontSize: '0.875rem', color: 'var(--theme-text-primary)' }}>\r\n          Filters & Grouping\r\n        </span>\r\n        {hasActiveFilters && (\r\n          <span\r\n            style={{\r\n              color: 'var(--theme-accent-primary)',\r\n              fontSize: '0.75rem',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            ({[filters.search && 'search', filters.dateFilter !== 'all' && 'date', filters.priorities.length > 0 && 'priority', filters.assignees.length > 0 && 'assignee', filters.labels.length > 0 && 'label', sort.by !== 'none' && 'sort'].filter(Boolean).length} active)\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"filter-bar__content\">\r\n          {showQuickFilters && (\r\n            <div className=\"filter-bar__quick\" style={{ marginBottom: '12px' }}>\r\n              <span className=\"filter-bar__label\">Quick:</span>\r\n              {onFilterMyTasks && (\r\n                <button\r\n                  onClick={onFilterMyTasks}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show only my tasks\"\r\n                >\r\n                  My Tasks\r\n                </button>\r\n              )}\r\n              {onFilterOverdue && (\r\n                <button\r\n                  onClick={onFilterOverdue}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show overdue tasks\"\r\n                >\r\n                  Overdue\r\n                </button>\r\n              )}\r\n              {onFilterHighPriority && (\r\n                <button\r\n                  onClick={onFilterHighPriority}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show high priority tasks\"\r\n                >\r\n                  High Priority\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"filter-bar__main\">\r\n            <div className=\"filter-bar__field\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search tasks...\"\r\n                value={filters.search}\r\n                onChange={handleSearchChange}\r\n                className=\"filter-bar__search\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-bar__field\">\r\n              <select\r\n                value={filters.dateFilter}\r\n                onChange={handleDateFilterChange}\r\n                className=\"filter-bar__select\"\r\n              >\r\n                <option value=\"all\">All Dates</option>\r\n                <option value=\"overdue\">Overdue</option>\r\n                <option value=\"today\">Today</option>\r\n                <option value=\"this-week\">This Week</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"filter-bar__field\">\r\n              <select\r\n                value={filters.priorities[0] || 'all'}\r\n                onChange={(e) => {\r\n                  const value = e.target.value\r\n                  onFiltersChange({\r\n                    priorities: value === 'all' ? [] : [value as Priority],\r\n                  })\r\n                }}\r\n                className=\"filter-bar__select\"\r\n              >\r\n                <option value=\"all\">All Priorities</option>\r\n                {PRIORITY_OPTIONS.map((priority) => (\r\n                  <option key={priority} value={priority}>\r\n                    {priority}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {availableUsers.length > 0 && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={filters.assignees[0] || 'all'}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value\r\n                    onFiltersChange({\r\n                      assignees: value === 'all' ? [] : [value],\r\n                    })\r\n                  }}\r\n                  className=\"filter-bar__select\"\r\n                >\r\n                  <option value=\"all\">All Assignees</option>\r\n                  {availableUsers.map((user) => (\r\n                    <option key={user.id} value={user.id}>\r\n                      {user.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {availableLabels.length > 0 && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={filters.labels[0] || 'all'}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value\r\n                    onFiltersChange({\r\n                      labels: value === 'all' ? [] : [value],\r\n                    })\r\n                  }}\r\n                  className=\"filter-bar__select\"\r\n                >\r\n                  <option value=\"all\">All Labels</option>\r\n                  {availableLabels.map((label) => (\r\n                    <option key={label} value={label}>\r\n                      {label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"filter-bar__field filter-bar__sort\">\r\n              <span className=\"filter-bar__label\" style={{ color: 'var(--theme-text-secondary)' }}>Sort:</span>\r\n              <select\r\n                value={sort.by}\r\n                onChange={handleSortChange}\r\n                className=\"filter-bar__select filter-bar__select--sm\"\r\n              >\r\n                {SORT_OPTIONS.map((option) => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {sort.by !== 'none' && (\r\n                <button\r\n                  onClick={handleSortOrderToggle}\r\n                  className=\"filter-bar__sort-toggle\"\r\n                  title={`Sort ${sort.order === 'asc' ? 'descending' : 'ascending'}`}\r\n                >\r\n                  {sort.order === 'asc' ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {onGroupByChange && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={groupBy}\r\n                  onChange={(e) => onGroupByChange(e.target.value as GroupByOption)}\r\n                  className=\"filter-bar__select\"\r\n                  style={{\r\n                    fontWeight: 500,\r\n                    borderWidth: '2px',\r\n                  }}\r\n                >\r\n                  {GROUPBY_OPTIONS.map((option) => (\r\n                    <option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {hasActiveFilters && (\r\n              <button\r\n                onClick={onReset}\r\n                className=\"filter-bar__reset\"\r\n                title=\"Clear all filters\"\r\n              >\r\n                Clear\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useRef, useEffect } from 'react'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ConfigMenuProps {\r\n  onOpenExport: () => void\r\n  onOpenThemes: () => void\r\n  onOpenShortcuts: () => void\r\n  className?: string\r\n  // v0.8.1: Gantt-specific exports\r\n  viewMode?: 'kanban' | 'gantt'\r\n  onExportGanttPDF?: () => Promise<void>\r\n  onExportGanttExcel?: () => Promise<void>\r\n  onExportGanttPNG?: () => Promise<void>\r\n  onExportGanttCSV?: () => void\r\n}\r\n\r\nexport function ConfigMenu({\r\n  onOpenExport,\r\n  onOpenThemes,\r\n  onOpenShortcuts,\r\n  className,\r\n  viewMode = 'kanban',\r\n  onExportGanttPDF,\r\n  onExportGanttExcel,\r\n  onExportGanttPNG,\r\n  onExportGanttCSV,\r\n}: ConfigMenuProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isOpen])\r\n\r\n  const handleItemClick = (action: () => void) => {\r\n    action()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relative', className)} ref={menuRef}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all border\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n          color: 'var(--theme-text-secondary)'\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n          e.currentTarget.style.color = 'var(--theme-text-primary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-secondary)'\r\n          e.currentTarget.style.color = 'var(--theme-text-secondary)'\r\n        }}\r\n        aria-label=\"Configuration Menu\"\r\n        aria-expanded={isOpen}\r\n      >\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n          <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n          <path d=\"M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2\" />\r\n        </svg>\r\n        <span>Config</span>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className=\"absolute right-0 mt-2 w-48 rounded-lg border shadow-lg overflow-hidden z-50\"\r\n          style={{\r\n            backgroundColor: 'var(--theme-bg-secondary)',\r\n            borderColor: 'var(--theme-border-primary)',\r\n          }}\r\n        >\r\n          {/* v0.8.1: Show different export options based on view mode */}\r\n          {viewMode === 'kanban' ? (\r\n            <button\r\n              onClick={() => handleItemClick(onOpenExport)}\r\n              className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n              style={{ color: 'var(--theme-text-primary)' }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'transparent'\r\n              }}\r\n            >\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3\" />\r\n              </svg>\r\n              Export\r\n            </button>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttPDF?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                  <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                  <polyline points=\"10 9 9 9 8 9\" />\r\n                </svg>\r\n                Export PDF\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttExcel?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"12\" />\r\n                  <line x1=\"9\" y1=\"15\" x2=\"15\" y2=\"15\" />\r\n                </svg>\r\n                Export Excel\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttPNG?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                  <polyline points=\"21 15 16 10 5 21\" />\r\n                </svg>\r\n                Export PNG\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(() => onExportGanttCSV?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"8\" y1=\"13\" x2=\"16\" y2=\"13\" />\r\n                  <line x1=\"8\" y1=\"17\" x2=\"16\" y2=\"17\" />\r\n                </svg>\r\n                Export CSV\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          <button\r\n            onClick={() => handleItemClick(onOpenThemes)}\r\n            className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n            style={{ color: 'var(--theme-text-primary)' }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <circle cx=\"12\" cy=\"12\" r=\"5\" />\r\n              <path d=\"M12 1v6m0 6v6m8.5-8.5L17 15M7 9L3.5 5.5M7 15l-3.5 3.5M20.5 5.5L17 9m3.5 11.5L17 17\" />\r\n            </svg>\r\n            Themes\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handleItemClick(onOpenShortcuts)}\r\n            className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n            style={{ color: 'var(--theme-text-primary)' }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" />\r\n              <path d=\"M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h.01M12 12h.01M16 12h.01M7 16h10\" />\r\n            </svg>\r\n            Shortcuts\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Theme Definitions\r\n * ASAKAA v0.5.0 - Elite Theming System\r\n */\r\n\r\nimport type { Theme, ThemeName } from './types'\r\n\r\n/**\r\n * DARK THEME (Enhanced) - DEFAULT\r\n * Philosophy: Speed, efficiency, focus\r\n * Optimized for developer productivity\r\n */\r\nexport const darkTheme: Theme = {\r\n  name: 'dark',\r\n  displayName: 'Dark (Enhanced)',\r\n  emoji: '',\r\n  colors: {\r\n    // Background colors\r\n    bgPrimary: '#222326',\r\n    bgSecondary: '#2A2B2F',\r\n    bgTertiary: '#33343A',\r\n    bgCard: '#2d2d2d',\r\n    bgHover: '#353535',\r\n    bgActive: '#404040',\r\n    bgInput: '#2a2a2a',\r\n\r\n    // Text colors\r\n    textPrimary: '#F4F5F8',\r\n    textSecondary: '#AEB6C0',\r\n    textTertiary: '#7A7F8A',\r\n    textDisabled: '#606060',\r\n    textInverse: '#1a1a1a',\r\n\r\n    // Border colors\r\n    borderPrimary: 'rgba(255, 255, 255, 0.1)',\r\n    borderSecondary: 'rgba(255, 255, 255, 0.05)',\r\n    borderDefault: '#404040',\r\n    borderHover: '#505050',\r\n    borderSubtle: '#2a2a2a',\r\n\r\n    // Interactive colors\r\n    accentPrimary: '#5E6AD2',\r\n    accentHover: '#7780DD',\r\n    interactivePrimary: '#0ea5e9',\r\n    interactivePrimaryHover: '#0284c7',\r\n    interactivePrimaryBorder: 'rgba(14, 165, 233, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(14, 165, 233, 0.1)',\r\n    interactivePrimaryBackgroundHover: 'rgba(14, 165, 233, 0.2)',\r\n\r\n    // Status colors\r\n    success: '#10B981',\r\n    warning: '#F59E0B',\r\n    error: '#EF4444',\r\n    info: '#3B82F6',\r\n    danger: '#ef4444',\r\n    dangerBorder: 'rgba(239, 68, 68, 0.3)',\r\n    dangerBackground: 'rgba(239, 68, 68, 0.1)',\r\n    dangerBackgroundHover: 'rgba(239, 68, 68, 0.2)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 2px rgba(0, 0, 0, 0.3)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.4)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.5)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * LIGHT THEME (Accessible Standard)\r\n * Philosophy: Clarity, legibility, professionalism\r\n * WCAG AAA compliant (7:1 contrast)\r\n */\r\nexport const lightTheme: Theme = {\r\n  name: 'light',\r\n  displayName: 'Light (Standard)',\r\n  emoji: '',\r\n  colors: {\r\n    // Background colors\r\n    bgPrimary: '#FFFFFF',\r\n    bgSecondary: '#F7F7F8',\r\n    bgTertiary: '#EEEFF1',\r\n    bgCard: '#ffffff',\r\n    bgHover: '#f3f4f6',\r\n    bgActive: '#e5e7eb',\r\n    bgInput: '#f9fafb',\r\n\r\n    // Text colors\r\n    textPrimary: '#1A1A1A',\r\n    textSecondary: '#5A5A5A',\r\n    textTertiary: '#8A8A8A',\r\n    textDisabled: '#d1d5db',\r\n    textInverse: '#ffffff',\r\n\r\n    // Border colors\r\n    borderPrimary: 'rgba(0, 0, 0, 0.1)',\r\n    borderSecondary: 'rgba(0, 0, 0, 0.05)',\r\n    borderDefault: '#e5e7eb',\r\n    borderHover: '#d1d5db',\r\n    borderSubtle: '#f3f4f6',\r\n\r\n    // Interactive colors\r\n    accentPrimary: '#5E6AD2',\r\n    accentHover: '#4A56B8',\r\n    interactivePrimary: '#0ea5e9',\r\n    interactivePrimaryHover: '#0284c7',\r\n    interactivePrimaryBorder: 'rgba(14, 165, 233, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(14, 165, 233, 0.08)',\r\n    interactivePrimaryBackgroundHover: 'rgba(14, 165, 233, 0.15)',\r\n\r\n    // Status colors\r\n    success: '#059669',\r\n    warning: '#D97706',\r\n    error: '#DC2626',\r\n    info: '#2563EB',\r\n    danger: '#dc2626',\r\n    dangerBorder: 'rgba(220, 38, 38, 0.3)',\r\n    dangerBackground: 'rgba(220, 38, 38, 0.08)',\r\n    dangerBackgroundHover: 'rgba(220, 38, 38, 0.15)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 3px rgba(0, 0, 0, 0.12)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.15)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.2)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * NEUTRAL THEME (Zen Mode)\r\n * Philosophy: Minimalism, calm technology, maximum concentration\r\n * Strictly monochromatic - states communicated via icons/typography\r\n */\r\nexport const neutralTheme: Theme = {\r\n  name: 'neutral',\r\n  emoji: '',\r\n  displayName: 'Neutral (Zen)',\r\n  colors: {\r\n    // Background colors - Light neutral tones (matching Gantt neutral theme)\r\n    bgPrimary: '#FAFAF9',\r\n    bgSecondary: '#F5F5F4',\r\n    bgTertiary: '#E7E5E4',\r\n    bgCard: '#FEFEFE',\r\n    bgHover: '#F0EFEE',\r\n    bgActive: '#E7E5E4',\r\n    bgInput: '#FAFAF9',\r\n\r\n    // Text colors\r\n    textPrimary: '#1C1917',\r\n    textSecondary: '#57534E',\r\n    textTertiary: '#A8A29E',\r\n    textDisabled: '#D6D3D1',\r\n    textInverse: '#FAFAF9',\r\n\r\n    // Border colors\r\n    borderPrimary: '#E7E5E4',\r\n    borderSecondary: '#F0EFEE',\r\n    borderDefault: '#E7E5E4',\r\n    borderHover: '#D6D3D1',\r\n    borderSubtle: '#F5F5F4',\r\n\r\n    // Interactive colors - Neutral with subtle accents\r\n    accentPrimary: '#292524',\r\n    accentHover: '#44403C',\r\n    interactivePrimary: '#292524',\r\n    interactivePrimaryHover: '#44403C',\r\n    interactivePrimaryBorder: 'rgba(41, 37, 36, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(41, 37, 36, 0.06)',\r\n    interactivePrimaryBackgroundHover: 'rgba(41, 37, 36, 0.12)',\r\n\r\n    // Status colors (minimal in Zen mode)\r\n    success: '#15803D',\r\n    warning: '#CA8A04',\r\n    error: '#B91C1C',\r\n    info: '#1D4ED8',\r\n    danger: '#B91C1C',\r\n    dangerBorder: 'rgba(185, 28, 28, 0.3)',\r\n    dangerBackground: 'rgba(185, 28, 28, 0.08)',\r\n    dangerBackgroundHover: 'rgba(185, 28, 28, 0.15)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.12)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.15)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * All themes registry\r\n */\r\nexport const themes: Record<ThemeName, Theme> = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n}\r\n\r\n/**\r\n * Default theme\r\n */\r\nexport const defaultTheme: ThemeName = 'dark'\r\n","/**\r\n * Theme Provider\r\n * ASAKAA v0.5.0\r\n */\r\n\r\nimport { createContext, useContext, useEffect, useState, useCallback, type ReactNode } from 'react'\r\nimport type { ThemeName, ThemeContextValue } from './types'\r\nimport { themes, defaultTheme } from './themes'\r\n\r\nexport const ThemeContext = createContext<ThemeContextValue | undefined>(undefined)\r\n\r\nconst STORAGE_KEY = 'asakaa-theme'\r\n\r\nexport interface ThemeProviderProps {\r\n  children: ReactNode\r\n  defaultTheme?: ThemeName\r\n  storageKey?: string\r\n}\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme: initialTheme = defaultTheme,\r\n  storageKey = STORAGE_KEY,\r\n}: ThemeProviderProps) {\r\n  const [theme, setThemeState] = useState<ThemeName>(() => {\r\n    // Try to load from localStorage\r\n    if (typeof window !== 'undefined') {\r\n      const stored = localStorage.getItem(storageKey)\r\n      if (stored && (stored === 'dark' || stored === 'light' || stored === 'neutral')) {\r\n        return stored as ThemeName\r\n      }\r\n    }\r\n    return initialTheme\r\n  })\r\n\r\n  const setTheme = useCallback(\r\n    (newTheme: ThemeName) => {\r\n      setThemeState(newTheme)\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.setItem(storageKey, newTheme)\r\n      }\r\n    },\r\n    [storageKey]\r\n  )\r\n\r\n  // Apply theme to document\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n\r\n    const root = document.documentElement\r\n    const currentTheme = themes[theme]\r\n\r\n    // DUAL SYSTEM: Generate BOTH --theme-* AND --asakaa-color-* variables\r\n    // This ensures compatibility during migration from old to new system\r\n\r\n    // 1. Generate --theme-* variables (legacy compatibility)\r\n    Object.entries(currentTheme.colors).forEach(([key, value]) => {\r\n      if (value) {\r\n        root.style.setProperty(`--theme-${camelToKebab(key)}`, value)\r\n      }\r\n    })\r\n\r\n    // 2. Generate --asakaa-color-* variables (new system - following tokens.css naming)\r\n    const colorMap: Record<string, string> = {\r\n      // Background\r\n      bgPrimary: '--asakaa-color-background-primary',\r\n      bgSecondary: '--asakaa-color-background-secondary',\r\n      bgTertiary: '--asakaa-color-background-tertiary',\r\n      bgCard: '--asakaa-color-background-card',\r\n      bgHover: '--asakaa-color-background-hover',\r\n      bgActive: '--asakaa-color-background-active',\r\n      bgInput: '--asakaa-color-background-input',\r\n\r\n      // Text\r\n      textPrimary: '--asakaa-color-text-primary',\r\n      textSecondary: '--asakaa-color-text-secondary',\r\n      textTertiary: '--asakaa-color-text-tertiary',\r\n      textDisabled: '--asakaa-color-text-disabled',\r\n      textInverse: '--asakaa-color-text-inverse',\r\n\r\n      // Border\r\n      borderPrimary: '--asakaa-color-border-primary',\r\n      borderSecondary: '--asakaa-color-border-secondary',\r\n      borderDefault: '--asakaa-color-border-default',\r\n      borderHover: '--asakaa-color-border-hover',\r\n      borderSubtle: '--asakaa-color-border-subtle',\r\n\r\n      // Interactive\r\n      accentPrimary: '--asakaa-color-accent-primary',\r\n      accentHover: '--asakaa-color-accent-hover',\r\n      interactivePrimary: '--asakaa-color-interactive-primary',\r\n      interactivePrimaryHover: '--asakaa-color-interactive-primaryHover',\r\n      interactivePrimaryBorder: '--asakaa-color-interactive-primaryBorder',\r\n      interactivePrimaryBackground: '--asakaa-color-interactive-primaryBackground',\r\n      interactivePrimaryBackgroundHover: '--asakaa-color-interactive-primaryBackgroundHover',\r\n\r\n      // Status & Danger\r\n      success: '--asakaa-color-status-success',\r\n      warning: '--asakaa-color-status-warning',\r\n      error: '--asakaa-color-status-error',\r\n      info: '--asakaa-color-status-info',\r\n      danger: '--asakaa-color-danger',\r\n      dangerBorder: '--asakaa-color-danger-border',\r\n      dangerBackground: '--asakaa-color-danger-background',\r\n      dangerBackgroundHover: '--asakaa-color-danger-backgroundHover',\r\n    }\r\n\r\n    Object.entries(colorMap).forEach(([themeKey, cssVar]) => {\r\n      const value = currentTheme.colors[themeKey as keyof typeof currentTheme.colors]\r\n      if (value) {\r\n        root.style.setProperty(cssVar, value)\r\n      }\r\n    })\r\n\r\n    // 3. Set data-theme attribute for CSS selectors\r\n    root.setAttribute('data-theme', theme)\r\n\r\n    // 4. Set class for backward compatibility\r\n    root.classList.remove('theme-dark', 'theme-light', 'theme-neutral')\r\n    root.classList.add(`theme-${theme}`)\r\n  }, [theme])\r\n\r\n  const value: ThemeContextValue = {\r\n    theme,\r\n    setTheme,\r\n    themes,\r\n  }\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\r\n}\r\n\r\n/**\r\n * Hook to access theme context\r\n */\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext)\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within ThemeProvider')\r\n  }\r\n  return context\r\n}\r\n\r\n/**\r\n * Utility: Convert camelCase to kebab-case\r\n */\r\nfunction camelToKebab(str: string): string {\r\n  return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase()\r\n}\r\n","import { useTheme } from '../../theme/ThemeProvider'\r\nimport { themes } from '../../theme/themes'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ThemeModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  className?: string\r\n}\r\n\r\nexport function ThemeModal({ isOpen, onClose, className }: ThemeModalProps) {\r\n  const { theme, setTheme } = useTheme()\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      <div\r\n        className=\"relative rounded-2xl border shadow-2xl max-w-md w-full mx-4\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n        }}\r\n      >\r\n        <div className=\"px-6 py-5 border-b flex items-center justify-between\" style={{ borderColor: 'var(--theme-border-primary)' }}>\r\n          <h2 className=\"text-2xl font-bold\" style={{ color: 'var(--theme-text-primary)' }}>\r\n            Select Theme\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-2xl leading-none p-2 hover:bg-white/10 rounded-lg transition-colors\"\r\n            style={{ color: 'var(--theme-text-secondary)' }}\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-3\">\r\n          {Object.entries(themes).map(([key, themeData]) => (\r\n            <button\r\n              key={key}\r\n              onClick={() => {\r\n                setTheme(key as any)\r\n                onClose()\r\n              }}\r\n              className={cn(\r\n                'w-full p-4 rounded-lg border-2 transition-all flex items-center gap-4',\r\n                theme === key\r\n                  ? 'border-blue-500 bg-blue-500/20'\r\n                  : 'border-white/20 hover:border-white/40'\r\n              )}\r\n              style={{\r\n                backgroundColor: theme === key ? 'var(--theme-accent-primary)20' : 'transparent',\r\n              }}\r\n            >\r\n              <div className=\"text-3xl\">{themeData.emoji}</div>\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-semibold\" style={{ color: 'var(--theme-text-primary)' }}>\r\n                  {themeData.displayName}\r\n                </div>\r\n                <div className=\"text-xs\" style={{ color: 'var(--theme-text-secondary)' }}>\r\n                  {key === 'dark' && 'Default dark theme with Linear-inspired colors'}\r\n                  {key === 'light' && 'Clean light theme with high contrast'}\r\n                  {key === 'neutral' && 'Monochrome zen theme'}\r\n                </div>\r\n              </div>\r\n              {theme === key && (\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\r\n                  <path d=\"M20 6L9 17l-5-5\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { GanttTheme } from './types';\r\n\r\nexport const themes: Record<string, GanttTheme> = {\r\n  dark: {\r\n    // Backgrounds\r\n    // v0.14.7: Reduced zebra stripe contrast for more sophisticated look\r\n    bgPrimary: '#1A1D21',\r\n    bgSecondary: '#23272E',\r\n    bgGrid: '#1C1F24',  // Reduced contrast from #1E2228\r\n    bgWeekend: 'rgba(59, 130, 246, 0.02)',\r\n\r\n    // Borders\r\n    border: '#2D3139',\r\n    borderLight: '#26292F',\r\n\r\n    // Text\r\n    textPrimary: '#F5F5F7',\r\n    textSecondary: '#B4B9C5',\r\n    textTertiary: '#7C8394',\r\n\r\n    // Accent & Interactive - Electric Blue brand color\r\n    accent: '#3B82F6',\r\n    accentHover: '#60A5FA',\r\n    accentLight: 'rgba(59, 130, 246, 0.12)',\r\n\r\n    // Task Elements - Electric Blue brand color\r\n    taskBarPrimary: '#3B82F6',\r\n    taskBarProgress: '#2563EB',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    dependency: 'rgba(180, 185, 197, 0.25)',\r\n    dependencyHover: 'rgba(180, 185, 197, 0.45)',\r\n    criticalPath: '#EF4444',\r\n    criticalPathLight: 'rgba(239, 68, 68, 0.12)',\r\n\r\n    // Special Elements\r\n    today: '#EF4444',\r\n    todayLight: 'rgba(239, 68, 68, 0.08)',\r\n    milestone: '#F59E0B',\r\n    milestoneLight: 'rgba(245, 158, 11, 0.1)',\r\n\r\n    // Status Colors\r\n    statusTodo: '#7C8394',\r\n    statusInProgress: '#3B82F6',\r\n    statusCompleted: '#10B981',\r\n\r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(255, 255, 255, 0.05)',\r\n    focusRing: '#3B82F6',\r\n  },\r\n  \r\n  light: {\r\n    // Backgrounds\r\n    // v0.14.7: Reduced zebra stripe contrast for more sophisticated look\r\n    bgPrimary: '#FFFFFF',\r\n    bgSecondary: '#F9FAFB',\r\n    bgGrid: '#FDFEFE',  // Reduced contrast from #FCFCFD\r\n    bgWeekend: 'rgba(37, 99, 235, 0.02)',\r\n\r\n    // Borders\r\n    border: '#E5E7EB',\r\n    borderLight: '#F0F1F3',\r\n\r\n    // Text\r\n    textPrimary: '#111827',\r\n    textSecondary: '#4B5563',\r\n    textTertiary: '#9CA3AF',\r\n\r\n    // Accent & Interactive\r\n    accent: '#2563EB',\r\n    accentHover: '#1D4ED8',\r\n    accentLight: 'rgba(37, 99, 235, 0.08)',\r\n\r\n    // Task Elements\r\n    taskBarPrimary: '#2563EB',\r\n    taskBarProgress: '#1E40AF',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    dependency: 'rgba(75, 85, 99, 0.2)',\r\n    dependencyHover: 'rgba(75, 85, 99, 0.4)',\r\n    criticalPath: '#DC2626',\r\n    criticalPathLight: 'rgba(220, 38, 38, 0.1)',\r\n\r\n    // Special Elements - \"Today\" uses accent color (blue) instead of red\r\n    today: '#2563EB',  // Accent blue - reserved red for overdue/at-risk states\r\n    todayLight: 'rgba(37, 99, 235, 0.08)',\r\n    milestone: '#F59E0B',\r\n    milestoneLight: 'rgba(245, 158, 11, 0.08)',\r\n    \r\n    // Status Colors\r\n    statusTodo: '#9CA3AF',\r\n    statusInProgress: '#2563EB',\r\n    statusCompleted: '#059669',\r\n    \r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(0, 0, 0, 0.03)',\r\n    focusRing: '#2563EB',\r\n  },\r\n  \r\n  neutral: {\r\n    // Backgrounds\r\n    // v0.14.7: Reduced zebra stripe contrast for more sophisticated look\r\n    bgPrimary: '#FAFAF9',\r\n    bgSecondary: '#F5F5F4',\r\n    bgGrid: '#FBFBFA',  // Reduced contrast from #FEFEFE\r\n    bgWeekend: 'rgba(41, 37, 36, 0.015)',\r\n\r\n    // Borders\r\n    border: '#E7E5E4',\r\n    borderLight: '#F0EFEE',\r\n\r\n    // Text\r\n    textPrimary: '#1C1917',\r\n    textSecondary: '#57534E',\r\n    textTertiary: '#A8A29E',\r\n\r\n    // Accent & Interactive\r\n    accent: '#292524',\r\n    accentHover: '#44403C',\r\n    accentLight: 'rgba(41, 37, 36, 0.06)',\r\n\r\n    // Task Elements\r\n    taskBarPrimary: '#292524',\r\n    taskBarProgress: '#1C1917',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    dependency: 'rgba(87, 83, 78, 0.2)',\r\n    dependencyHover: 'rgba(87, 83, 78, 0.35)',\r\n    criticalPath: '#44403C',  // Dark gray instead of red - monochromatic\r\n    criticalPathLight: 'rgba(68, 64, 60, 0.08)',\r\n\r\n    // Special Elements - Zen mode: PURE monochrome, NO color\r\n    today: '#1C1917',  // Black - maintains monochrome philosophy\r\n    todayLight: 'rgba(28, 25, 23, 0.04)',\r\n    milestone: '#57534E',  // Medium gray - no yellow\r\n    milestoneLight: 'rgba(87, 83, 78, 0.06)',\r\n    \r\n    // Status Colors\r\n    statusTodo: '#A8A29E',\r\n    statusInProgress: '#292524',\r\n    statusCompleted: '#15803D',\r\n    \r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(0, 0, 0, 0.025)',\r\n    focusRing: '#292524',\r\n  },\r\n};","import { GanttTheme } from './types';\r\nimport { themes } from './themes';\r\n\r\n/**\r\n * Deriva un objeto GanttTheme desde las variables CSS del ThemeProvider global.\r\n * Si no hay ThemeProvider, retorna el theme especificado o 'dark' por defecto.\r\n *\r\n * @param themeName - Nombre del tema ('dark' | 'light' | 'neutral')\r\n * @returns GanttTheme object con colores derivados de CSS variables\r\n */\r\nexport function deriveThemeFromCSS(themeName: 'dark' | 'light' | 'neutral' = 'dark'): GanttTheme {\r\n  // Si estamos en SSR, retornar theme esttico\r\n  if (typeof window === 'undefined' || typeof getComputedStyle === 'undefined') {\r\n    return themes[themeName] || themes.dark;\r\n  }\r\n\r\n  // Obtener valores computados de variables CSS\r\n  const root = document.documentElement;\r\n  const styles = getComputedStyle(root);\r\n\r\n  // Helper para obtener variable CSS con fallback\r\n  const getVar = (varName: string, fallback: string): string => {\r\n    const value = styles.getPropertyValue(varName).trim();\r\n    return value || fallback;\r\n  };\r\n\r\n  // Derivar theme desde variables CSS (sistema --theme-*)\r\n  const derivedTheme: GanttTheme = {\r\n    // Backgrounds\r\n    bgPrimary: getVar('--theme-bg-primary', themes[themeName].bgPrimary),\r\n    bgSecondary: getVar('--theme-bg-secondary', themes[themeName].bgSecondary),\r\n    bgGrid: getVar('--theme-bg-card', themes[themeName].bgGrid),\r\n    bgWeekend: getVar('--theme-bg-hover', themes[themeName].bgWeekend),\r\n\r\n    // Borders\r\n    border: getVar('--theme-border-primary', themes[themeName].border),\r\n    borderLight: getVar('--theme-border-subtle', themes[themeName].borderLight),\r\n\r\n    // Text\r\n    textPrimary: getVar('--theme-text-primary', themes[themeName].textPrimary),\r\n    textSecondary: getVar('--theme-text-secondary', themes[themeName].textSecondary),\r\n    textTertiary: getVar('--theme-text-tertiary', themes[themeName].textTertiary),\r\n\r\n    // Accent & Interactive\r\n    accent: getVar('--theme-accent-primary', themes[themeName].accent),\r\n    accentHover: getVar('--theme-accent-hover', themes[themeName].accentHover),\r\n    accentLight: getVar('--theme-accent-primary', themes[themeName].accentLight), // usaremos opacity\r\n\r\n    // Task Elements\r\n    taskBarPrimary: getVar('--theme-accent-primary', themes[themeName].taskBarPrimary),\r\n    taskBarProgress: getVar('--theme-accent-hover', themes[themeName].taskBarProgress),\r\n    taskBarHandle: getVar('--theme-text-inverse', themes[themeName].taskBarHandle || '#FFFFFF'),\r\n\r\n    // Dependencies & Critical Path\r\n    dependency: getVar('--theme-border-secondary', themes[themeName].dependency),\r\n    dependencyHover: getVar('--theme-border-secondary', themes[themeName].dependencyHover),\r\n    criticalPath: getVar('--theme-error', themes[themeName].criticalPath),\r\n    criticalPathLight: getVar('--theme-error', themes[themeName].criticalPathLight),\r\n\r\n    // Special Elements - Theme-specific today indicator\r\n    // Light: uses accent (blue), Neutral: uses text primary (black), Dark: custom\r\n    today: themeName === 'light'\r\n      ? getVar('--theme-accent-primary', themes[themeName].today)\r\n      : themeName === 'neutral'\r\n      ? getVar('--theme-text-primary', themes[themeName].today)\r\n      : getVar('--theme-error', themes[themeName].today),\r\n    todayLight: themeName === 'light'\r\n      ? getVar('--theme-accent-primary', themes[themeName].todayLight)\r\n      : themeName === 'neutral'\r\n      ? getVar('--theme-text-primary', themes[themeName].todayLight)\r\n      : getVar('--theme-error', themes[themeName].todayLight),\r\n    milestone: getVar('--theme-warning', themes[themeName].milestone),\r\n    milestoneLight: getVar('--theme-warning', themes[themeName].milestoneLight),\r\n\r\n    // Status Colors\r\n    statusTodo: getVar('--theme-text-tertiary', themes[themeName].statusTodo),\r\n    statusInProgress: getVar('--theme-accent-primary', themes[themeName].statusInProgress),\r\n    statusCompleted: getVar('--theme-success', themes[themeName].statusCompleted),\r\n\r\n    // Hover & Focus States\r\n    hoverBg: getVar('--theme-bg-hover', themes[themeName].hoverBg),\r\n    focusRing: getVar('--theme-accent-primary', themes[themeName].focusRing),\r\n  };\r\n\r\n  return derivedTheme;\r\n}\r\n","/**\r\n * Internationalization (i18n) system for GanttBoard\r\n * @version 0.15.0\r\n *\r\n * Supports English (en) and Spanish (es) out of the box.\r\n * Users can provide custom translations via the `locale` config prop.\r\n */\r\n\r\nexport type SupportedLocale = 'en' | 'es';\r\n\r\nexport interface GanttTranslations {\r\n  // Column headers\r\n  columns: {\r\n    taskName: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    duration: string;\r\n    assignees: string;\r\n    status: string;\r\n    progress: string;\r\n  };\r\n\r\n  // Toolbar\r\n  toolbar: {\r\n    today: string;\r\n    day: string;\r\n    week: string;\r\n    month: string;\r\n    export: string;\r\n    exportPdf: string;\r\n    exportPng: string;\r\n    exportCsv: string;\r\n    exportExcel: string;\r\n    exportMsProject: string;\r\n    undo: string;\r\n    redo: string;\r\n    createTask: string;\r\n    // v0.16.0: Density dropdown\r\n    density: string;\r\n    compact: string;\r\n    normal: string;\r\n    spacious: string;\r\n  };\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: string;\r\n    addSubtask: string;\r\n    markIncomplete: string;\r\n    setInProgress: string;\r\n    markComplete: string;\r\n    splitTask: string;\r\n    deleteTask: string;\r\n  };\r\n\r\n  // Task actions (context menu)\r\n  actions: {\r\n    edit: string;\r\n    delete: string;\r\n    duplicate: string;\r\n    addSubtask: string;\r\n    indent: string;\r\n    outdent: string;\r\n    moveUp: string;\r\n    moveDown: string;\r\n    splitTask: string;\r\n    linkTasks: string;\r\n    unlinkTasks: string;\r\n  };\r\n\r\n  // Status labels\r\n  status: {\r\n    todo: string;\r\n    inProgress: string;\r\n    completed: string;\r\n  };\r\n\r\n  // Tooltips and labels\r\n  labels: {\r\n    progress: string;\r\n    duration: string;\r\n    days: string;\r\n    day: string;\r\n    assigned: string;\r\n    milestone: string;\r\n    criticalPath: string;\r\n    subtask: string;\r\n    task: string;\r\n    noTasks: string;\r\n    addTask: string;\r\n    newTask: string;\r\n    loading: string;\r\n    error: string;\r\n    today: string;\r\n  };\r\n\r\n  // AI Assistant\r\n  ai: {\r\n    placeholder: string;\r\n    thinking: string;\r\n    suggestions: {\r\n      moveTask: string;\r\n      extendTask: string;\r\n      renameTask: string;\r\n      setProgress: string;\r\n      linkTasks: string;\r\n      createTask: string;\r\n      deleteTask: string;\r\n      assignTask: string;\r\n    };\r\n    errors: {\r\n      taskNotFound: string;\r\n      invalidDate: string;\r\n      invalidDuration: string;\r\n      invalidProgress: string;\r\n      unknownCommand: string;\r\n      processingError: string;\r\n    };\r\n  };\r\n\r\n  // Export\r\n  export: {\r\n    projectName: string;\r\n    ganttTasks: string;\r\n    taskId: string;\r\n    taskName: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    isMilestone: string;\r\n    parentId: string;\r\n    yes: string;\r\n    no: string;\r\n    noTasksToExport: string;\r\n  };\r\n\r\n  // Date formats (for display)\r\n  dateFormat: {\r\n    short: string; // e.g., 'MM/dd' or 'dd/MM'\r\n    medium: string; // e.g., 'MMM d' or 'd MMM'\r\n    long: string; // e.g., 'MMMM d, yyyy' or 'd de MMMM de yyyy'\r\n  };\r\n}\r\n\r\n/**\r\n * English translations (default)\r\n */\r\nexport const en: GanttTranslations = {\r\n  columns: {\r\n    taskName: 'TASK NAME',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    duration: 'Duration',\r\n    assignees: 'Assignees',\r\n    status: 'Status',\r\n    progress: '% Complete',\r\n  },\r\n\r\n  toolbar: {\r\n    today: 'Today',\r\n    day: 'Day',\r\n    week: 'Week',\r\n    month: 'Month',\r\n    export: 'Export',\r\n    exportPdf: 'Export to PDF',\r\n    exportPng: 'Export to PNG',\r\n    exportCsv: 'Export to CSV',\r\n    exportExcel: 'Export to Excel',\r\n    exportMsProject: 'Export to MS Project',\r\n    undo: 'Undo',\r\n    redo: 'Redo',\r\n    createTask: 'New Task',\r\n    // v0.16.0: Density dropdown\r\n    density: 'Row Density',\r\n    compact: 'Compact',\r\n    normal: 'Normal',\r\n    spacious: 'Spacious',\r\n  },\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: 'Edit Task',\r\n    addSubtask: 'Add Subtask',\r\n    markIncomplete: 'Mark Incomplete',\r\n    setInProgress: 'Set In Progress',\r\n    markComplete: 'Mark Complete',\r\n    splitTask: 'Split Task',\r\n    deleteTask: 'Delete Task',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Edit',\r\n    delete: 'Delete',\r\n    duplicate: 'Duplicate',\r\n    addSubtask: 'Add Subtask',\r\n    indent: 'Indent',\r\n    outdent: 'Outdent',\r\n    moveUp: 'Move Up',\r\n    moveDown: 'Move Down',\r\n    splitTask: 'Split Task',\r\n    linkTasks: 'Link Tasks',\r\n    unlinkTasks: 'Unlink Tasks',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  labels: {\r\n    progress: 'Progress',\r\n    duration: 'Duration',\r\n    days: 'days',\r\n    day: 'day',\r\n    assigned: 'Assigned',\r\n    milestone: 'Milestone',\r\n    criticalPath: 'Critical Path',\r\n    subtask: 'Subtask',\r\n    task: 'Task',\r\n    noTasks: 'No tasks yet',\r\n    addTask: 'Add task',\r\n    newTask: 'New Task',\r\n    loading: 'Loading...',\r\n    error: 'Error',\r\n    today: 'Today',\r\n  },\r\n\r\n  ai: {\r\n    placeholder: 'Ask AI to edit tasks... (e.g., \"Move Design to next week\")',\r\n    thinking: 'Thinking...',\r\n    suggestions: {\r\n      moveTask: 'Move \"Task Name\" to next Monday',\r\n      extendTask: 'Extend \"Task Name\" by 3 days',\r\n      renameTask: 'Rename \"Old Name\" to \"New Name\"',\r\n      setProgress: 'Set \"Task Name\" progress to 50%',\r\n      linkTasks: 'Link \"Task A\" to \"Task B\"',\r\n      createTask: 'Create a new task called \"New Task\"',\r\n      deleteTask: 'Delete \"Task Name\"',\r\n      assignTask: 'Assign John to \"Task Name\"',\r\n    },\r\n    errors: {\r\n      taskNotFound: 'Task not found',\r\n      invalidDate: 'Invalid date',\r\n      invalidDuration: 'Invalid duration',\r\n      invalidProgress: 'Invalid progress value',\r\n      unknownCommand: 'Unknown command',\r\n      processingError: 'Error processing command',\r\n    },\r\n  },\r\n\r\n  export: {\r\n    projectName: 'Gantt Project',\r\n    ganttTasks: 'Gantt Tasks',\r\n    taskId: 'Task ID',\r\n    taskName: 'Task Name',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    isMilestone: 'Is Milestone',\r\n    parentId: 'Parent ID',\r\n    yes: 'Yes',\r\n    no: 'No',\r\n    noTasksToExport: 'No tasks available to export',\r\n  },\r\n\r\n  dateFormat: {\r\n    short: 'MM/dd',\r\n    medium: 'MMM d',\r\n    long: 'MMMM d, yyyy',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: GanttTranslations = {\r\n  columns: {\r\n    taskName: 'NOMBRE DE TAREA',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    duration: 'Duracin',\r\n    assignees: 'Asignados',\r\n    status: 'Estado',\r\n    progress: '% Completado',\r\n  },\r\n\r\n  toolbar: {\r\n    today: 'Hoy',\r\n    day: 'Da',\r\n    week: 'Semana',\r\n    month: 'Mes',\r\n    export: 'Exportar',\r\n    exportPdf: 'Exportar a PDF',\r\n    exportPng: 'Exportar a PNG',\r\n    exportCsv: 'Exportar a CSV',\r\n    exportExcel: 'Exportar a Excel',\r\n    exportMsProject: 'Exportar a MS Project',\r\n    undo: 'Deshacer',\r\n    redo: 'Rehacer',\r\n    createTask: 'Nueva Tarea',\r\n    // v0.16.0: Density dropdown\r\n    density: 'Densidad',\r\n    compact: 'Compacto',\r\n    normal: 'Normal',\r\n    spacious: 'Espacioso',\r\n  },\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: 'Editar Tarea',\r\n    addSubtask: 'Agregar Subtarea',\r\n    markIncomplete: 'Marcar Incompleta',\r\n    setInProgress: 'Marcar En Progreso',\r\n    markComplete: 'Marcar Completada',\r\n    splitTask: 'Dividir Tarea',\r\n    deleteTask: 'Eliminar Tarea',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Editar',\r\n    delete: 'Eliminar',\r\n    duplicate: 'Duplicar',\r\n    addSubtask: 'Agregar Subtarea',\r\n    indent: 'Aumentar Nivel',\r\n    outdent: 'Disminuir Nivel',\r\n    moveUp: 'Mover Arriba',\r\n    moveDown: 'Mover Abajo',\r\n    splitTask: 'Dividir Tarea',\r\n    linkTasks: 'Vincular Tareas',\r\n    unlinkTasks: 'Desvincular Tareas',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  labels: {\r\n    progress: 'Progreso',\r\n    duration: 'Duracin',\r\n    days: 'das',\r\n    day: 'da',\r\n    assigned: 'Asignado',\r\n    milestone: 'Hito',\r\n    criticalPath: 'Ruta Crtica',\r\n    subtask: 'Subtarea',\r\n    task: 'Tarea',\r\n    noTasks: 'Sin tareas an',\r\n    addTask: 'Agregar tarea',\r\n    newTask: 'Nueva Tarea',\r\n    loading: 'Cargando...',\r\n    error: 'Error',\r\n    today: 'Hoy',\r\n  },\r\n\r\n  ai: {\r\n    placeholder: 'Pdele a la IA que edite tareas... (ej: \"Mover Diseo a la prxima semana\")',\r\n    thinking: 'Pensando...',\r\n    suggestions: {\r\n      moveTask: 'Mover \"Nombre de Tarea\" al prximo lunes',\r\n      extendTask: 'Extender \"Nombre de Tarea\" por 3 das',\r\n      renameTask: 'Renombrar \"Nombre Anterior\" a \"Nombre Nuevo\"',\r\n      setProgress: 'Establecer progreso de \"Nombre de Tarea\" al 50%',\r\n      linkTasks: 'Vincular \"Tarea A\" con \"Tarea B\"',\r\n      createTask: 'Crear una nueva tarea llamada \"Nueva Tarea\"',\r\n      deleteTask: 'Eliminar \"Nombre de Tarea\"',\r\n      assignTask: 'Asignar a Juan a \"Nombre de Tarea\"',\r\n    },\r\n    errors: {\r\n      taskNotFound: 'Tarea no encontrada',\r\n      invalidDate: 'Fecha invlida',\r\n      invalidDuration: 'Duracin invlida',\r\n      invalidProgress: 'Valor de progreso invlido',\r\n      unknownCommand: 'Comando desconocido',\r\n      processingError: 'Error procesando el comando',\r\n    },\r\n  },\r\n\r\n  export: {\r\n    projectName: 'Proyecto Gantt',\r\n    ganttTasks: 'Tareas Gantt',\r\n    taskId: 'ID de Tarea',\r\n    taskName: 'Nombre de Tarea',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    isMilestone: 'Es Hito',\r\n    parentId: 'ID Padre',\r\n    yes: 'S',\r\n    no: 'No',\r\n    noTasksToExport: 'No hay tareas disponibles para exportar',\r\n  },\r\n\r\n  dateFormat: {\r\n    short: 'dd/MM',\r\n    medium: 'd MMM',\r\n    long: 'd de MMMM de yyyy',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const translations: Record<SupportedLocale, GanttTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n * Falls back to English if locale is not found\r\n */\r\nexport function getTranslations(locale: SupportedLocale | string): GanttTranslations {\r\n  return translations[locale as SupportedLocale] || translations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n * Allows partial overrides while keeping defaults for missing keys\r\n */\r\nexport function mergeTranslations(\r\n  locale: SupportedLocale | string,\r\n  customTranslations?: Partial<GanttTranslations>\r\n): GanttTranslations {\r\n  const base = getTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    columns: { ...base.columns, ...customTranslations.columns },\r\n    toolbar: { ...base.toolbar, ...customTranslations.toolbar },\r\n    contextMenu: { ...base.contextMenu, ...customTranslations.contextMenu }, // v0.16.0\r\n    actions: { ...base.actions, ...customTranslations.actions },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    labels: { ...base.labels, ...customTranslations.labels },\r\n    ai: {\r\n      ...base.ai,\r\n      ...customTranslations.ai,\r\n      suggestions: { ...base.ai.suggestions, ...customTranslations.ai?.suggestions },\r\n      errors: { ...base.ai.errors, ...customTranslations.ai?.errors },\r\n    },\r\n    export: { ...base.export, ...customTranslations.export },\r\n    dateFormat: { ...base.dateFormat, ...customTranslations.dateFormat },\r\n  };\r\n}\r\n","/**\r\n * GanttI18nContext - Provides translations to all Gantt components\r\n * @version 0.15.0\r\n */\r\n\r\nimport { createContext, useContext } from 'react';\r\nimport { GanttTranslations, en } from './i18n';\r\n\r\n/**\r\n * Context for Gantt internationalization\r\n * Default value is English translations\r\n */\r\nexport const GanttI18nContext = createContext<GanttTranslations>(en);\r\n\r\n/**\r\n * Hook to access translations in Gantt components\r\n * @returns The current translations object\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyGanttComponent() {\r\n *   const t = useGanttI18n();\r\n *   return <button>{t.toolbar.createTask}</button>;\r\n * }\r\n * ```\r\n */\r\nexport function useGanttI18n(): GanttTranslations {\r\n  return useContext(GanttI18nContext);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { ZoomIn, ZoomOut, Sun, Moon, Palette, Download, FileImage, FileSpreadsheet, FileText, FileJson, ChevronDown, FolderKanban, Plus, Rows3, Check } from 'lucide-react';\r\nimport { TimeScale, Theme, RowDensity } from './types';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useGanttI18n } from './GanttI18nContext'; // v0.15.0: i18n\r\n\r\n// Export options configuration\r\nexport interface ExportOption {\r\n  id: string;\r\n  label: string;\r\n  description: string;\r\n  icon: React.ReactNode;\r\n  action: () => void | Promise<void>;\r\n}\r\n\r\ninterface GanttToolbarProps {\r\n  theme: any;\r\n  timeScale: TimeScale;\r\n  onTimeScaleChange: (scale: TimeScale) => void;\r\n  zoom: number;\r\n  onZoomChange: (zoom: number) => void;\r\n  currentTheme: Theme;\r\n  onThemeChange: (theme: Theme) => void;\r\n  rowDensity: RowDensity;\r\n  onRowDensityChange: (density: RowDensity) => void;\r\n  showThemeSelector?: boolean;\r\n  // v0.14.3: Create task button\r\n  showCreateTaskButton?: boolean;\r\n  createTaskLabel?: string;\r\n  onCreateTask?: () => void;\r\n  // Export handlers\r\n  onExportPNG?: () => Promise<void>;\r\n  onExportPDF?: () => Promise<void>;\r\n  onExportExcel?: () => Promise<void>;\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportMSProject?: () => void;\r\n}\r\n\r\n// Export Dropdown Component\r\ninterface ExportDropdownProps {\r\n  theme: any;\r\n  onExportPNG?: () => Promise<void>;\r\n  onExportPDF?: () => Promise<void>;\r\n  onExportExcel?: () => Promise<void>;\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportMSProject?: () => void;\r\n}\r\n\r\nfunction ExportDropdown({ theme, onExportPNG, onExportPDF, onExportExcel, onExportCSV, onExportJSON, onExportMSProject }: ExportDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isExporting, setIsExporting] = useState<string | null>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = useGanttI18n(); // v0.15.0: i18n\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const hasAnyExport = onExportPNG || onExportPDF || onExportExcel || onExportCSV || onExportJSON || onExportMSProject;\r\n\r\n  if (!hasAnyExport) return null;\r\n\r\n  const exportOptions = [\r\n    {\r\n      id: 'png',\r\n      label: 'PNG',\r\n      description: 'Image',\r\n      icon: <FileImage className=\"w-4 h-4\" />,\r\n      handler: onExportPNG,\r\n    },\r\n    {\r\n      id: 'pdf',\r\n      label: 'PDF',\r\n      description: 'Document',\r\n      icon: <FileText className=\"w-4 h-4\" />,\r\n      handler: onExportPDF,\r\n    },\r\n    {\r\n      id: 'excel',\r\n      label: 'Excel',\r\n      description: 'Spreadsheet',\r\n      icon: <FileSpreadsheet className=\"w-4 h-4\" />,\r\n      handler: onExportExcel,\r\n    },\r\n    {\r\n      id: 'csv',\r\n      label: 'CSV',\r\n      description: 'Comma-separated',\r\n      icon: <FileText className=\"w-4 h-4\" />,\r\n      handler: onExportCSV,\r\n    },\r\n    {\r\n      id: 'json',\r\n      label: 'JSON',\r\n      description: 'Data',\r\n      icon: <FileJson className=\"w-4 h-4\" />,\r\n      handler: onExportJSON,\r\n    },\r\n    {\r\n      id: 'msproject',\r\n      label: 'MS Project',\r\n      description: 'XML',\r\n      icon: <FolderKanban className=\"w-4 h-4\" />,\r\n      handler: onExportMSProject,\r\n    },\r\n  ].filter(opt => opt.handler);\r\n\r\n  const handleExport = async (id: string, handler: (() => void | Promise<void>) | undefined) => {\r\n    if (!handler) return;\r\n\r\n    setIsExporting(id);\r\n    try {\r\n      await handler();\r\n    } catch (error) {\r\n      console.error(`Export ${id} failed:`, error);\r\n    } finally {\r\n      setIsExporting(null);\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n        style={{\r\n          backgroundColor: isOpen ? theme.accent : theme.bgSecondary,\r\n          border: `1px solid ${isOpen ? theme.accent : theme.borderLight}`,\r\n          color: isOpen ? '#FFFFFF' : theme.textSecondary,\r\n          fontFamily: 'Inter, sans-serif',\r\n          fontWeight: 500,\r\n        }}\r\n        whileHover={{\r\n          scale: 1.02,\r\n          backgroundColor: theme.accent,\r\n          color: '#FFFFFF',\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Download className=\"w-3.5 h-3.5\" />\r\n        <span>{t.toolbar.export}</span>\r\n        <ChevronDown\r\n          className=\"w-3 h-3 transition-transform\"\r\n          style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}\r\n        />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute right-0 mt-2 w-48 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              {exportOptions.map((option, index) => (\r\n                <motion.button\r\n                  key={option.id}\r\n                  onClick={() => handleExport(option.id, option.handler)}\r\n                  disabled={isExporting !== null}\r\n                  className=\"w-full flex items-center gap-3 px-3 py-2.5 text-left transition-all\"\r\n                  style={{\r\n                    backgroundColor: 'transparent',\r\n                    borderBottom: index < exportOptions.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                  }}\r\n                  whileHover={{\r\n                    backgroundColor: theme.hoverBg,\r\n                  }}\r\n                  initial={{ opacity: 0, x: -10 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: index * 0.03 }}\r\n                >\r\n                  <div\r\n                    className=\"flex items-center justify-center w-8 h-8 rounded-md\"\r\n                    style={{\r\n                      backgroundColor: theme.accentLight,\r\n                      color: theme.accent,\r\n                    }}\r\n                  >\r\n                    {isExporting === option.id ? (\r\n                      <motion.div\r\n                        animate={{ rotate: 360 }}\r\n                        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n                      >\r\n                        <Download className=\"w-4 h-4\" />\r\n                      </motion.div>\r\n                    ) : (\r\n                      option.icon\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div\r\n                      className=\"text-xs font-medium truncate\"\r\n                      style={{ color: theme.textPrimary }}\r\n                    >\r\n                      {option.label}\r\n                    </div>\r\n                    <div\r\n                      className=\"text-[10px] truncate\"\r\n                      style={{ color: theme.textTertiary }}\r\n                    >\r\n                      {option.description}\r\n                    </div>\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Segmented Control Component (kept for theme selector)\r\ninterface SegmentedControlProps {\r\n  options: Array<{ value: string; label: string; icon?: React.ReactNode }>;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  theme: any;\r\n  layoutId?: string;\r\n}\r\n\r\nfunction SegmentedControl({ options, value, onChange, theme, layoutId = 'activeSegment' }: SegmentedControlProps) {\r\n  return (\r\n    <div\r\n      className=\"inline-flex p-1 rounded-lg relative\"\r\n      style={{\r\n        backgroundColor: theme.bgSecondary,\r\n        border: `1px solid ${theme.borderLight}`,\r\n      }}\r\n    >\r\n      {options.map((option) => {\r\n        const isActive = value === option.value;\r\n        return (\r\n          <motion.button\r\n            key={option.value}\r\n            onClick={() => onChange(option.value)}\r\n            className=\"relative px-3 py-1.5 rounded-md text-xs transition-all flex items-center gap-1.5 min-w-[70px] justify-center\"\r\n            style={{\r\n              color: isActive ? theme.textPrimary : theme.textTertiary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: isActive ? 600 : 500,\r\n              zIndex: isActive ? 2 : 1,\r\n            }}\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            {isActive && (\r\n              <motion.div\r\n                layoutId={layoutId}\r\n                className=\"absolute inset-0 rounded-md\"\r\n                style={{\r\n                  backgroundColor: theme.accent,\r\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                }}\r\n                transition={{\r\n                  type: 'spring',\r\n                  stiffness: 400,\r\n                  damping: 30,\r\n                }}\r\n              />\r\n            )}\r\n            {option.icon && (\r\n              <span className=\"relative z-10\" style={{ color: isActive ? '#FFFFFF' : theme.textTertiary }}>\r\n                {option.icon}\r\n              </span>\r\n            )}\r\n            <span className=\"relative z-10\" style={{ color: isActive ? '#FFFFFF' : theme.textTertiary }}>\r\n              {option.label}\r\n            </span>\r\n          </motion.button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * v0.16.0: Minimal Tabs Component - Linear/Notion style\r\n * Minimalist tab selector with underline indicator\r\n */\r\ninterface MinimalTabsProps {\r\n  options: Array<{ value: string; label: string }>;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  theme: any;\r\n}\r\n\r\nfunction MinimalTabs({ options, value, onChange, theme }: MinimalTabsProps) {\r\n  return (\r\n    <div className=\"inline-flex items-center gap-1\">\r\n      {options.map((option) => {\r\n        const isActive = value === option.value;\r\n        return (\r\n          <motion.button\r\n            key={option.value}\r\n            onClick={() => onChange(option.value)}\r\n            className=\"relative px-3 py-1.5 text-xs transition-all\"\r\n            style={{\r\n              color: isActive ? theme.accent : theme.textTertiary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: isActive ? 600 : 500,\r\n            }}\r\n            whileHover={{ color: isActive ? theme.accent : theme.textSecondary }}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            <span>{option.label}</span>\r\n            {/* Underline indicator */}\r\n            {isActive && (\r\n              <motion.div\r\n                layoutId=\"timeScaleUnderline\"\r\n                className=\"absolute bottom-0 left-1 right-1 h-0.5 rounded-full\"\r\n                style={{ backgroundColor: theme.accent }}\r\n                transition={{\r\n                  type: 'spring',\r\n                  stiffness: 400,\r\n                  damping: 30,\r\n                }}\r\n              />\r\n            )}\r\n          </motion.button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * v0.16.0: Density Dropdown Component\r\n * Consolidated density selector as a compact dropdown\r\n */\r\ninterface DensityDropdownProps {\r\n  theme: any;\r\n  value: RowDensity;\r\n  onChange: (density: RowDensity) => void;\r\n}\r\n\r\nfunction DensityDropdown({ theme, value, onChange }: DensityDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = useGanttI18n();\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const densityOptions = [\r\n    { value: 'compact' as RowDensity, label: t.toolbar.compact || 'Compact' },\r\n    { value: 'comfortable' as RowDensity, label: t.toolbar.normal || 'Normal' },\r\n    { value: 'spacious' as RowDensity, label: t.toolbar.spacious || 'Spacious' },\r\n  ];\r\n\r\n  const currentLabel = densityOptions.find(opt => opt.value === value)?.label || 'Normal';\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center justify-center p-2 rounded-lg transition-all\"\r\n        style={{\r\n          backgroundColor: isOpen ? theme.accentLight : theme.bgSecondary,\r\n          border: `1px solid ${isOpen ? theme.accent : theme.borderLight}`,\r\n          color: isOpen ? theme.accent : theme.textSecondary,\r\n        }}\r\n        whileHover={{\r\n          backgroundColor: theme.hoverBg,\r\n          scale: 1.02,\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n        title={`${t.toolbar.density || 'Density'}: ${currentLabel}`}\r\n      >\r\n        <Rows3 className=\"w-4 h-4\" />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute left-0 mt-2 w-36 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              {densityOptions.map((option, index) => {\r\n                const isActive = value === option.value;\r\n                return (\r\n                  <motion.button\r\n                    key={option.value}\r\n                    onClick={() => {\r\n                      onChange(option.value);\r\n                      setIsOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-center justify-between px-3 py-2 text-left transition-all\"\r\n                    style={{\r\n                      backgroundColor: isActive ? theme.accentLight : 'transparent',\r\n                      borderBottom: index < densityOptions.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                    }}\r\n                    whileHover={{\r\n                      backgroundColor: isActive ? theme.accentLight : theme.hoverBg,\r\n                    }}\r\n                    initial={{ opacity: 0, x: -10 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.03 }}\r\n                  >\r\n                    <span\r\n                      className=\"text-xs\"\r\n                      style={{\r\n                        color: isActive ? theme.accent : theme.textPrimary,\r\n                        fontFamily: 'Inter, sans-serif',\r\n                        fontWeight: isActive ? 600 : 500,\r\n                      }}\r\n                    >\r\n                      {option.label}\r\n                    </span>\r\n                    {isActive && (\r\n                      <Check className=\"w-3.5 h-3.5\" style={{ color: theme.accent }} />\r\n                    )}\r\n                  </motion.button>\r\n                );\r\n              })}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function GanttToolbar({\r\n  theme,\r\n  timeScale,\r\n  onTimeScaleChange,\r\n  zoom,\r\n  onZoomChange,\r\n  currentTheme,\r\n  onThemeChange,\r\n  rowDensity,\r\n  onRowDensityChange,\r\n  showThemeSelector = true,\r\n  showCreateTaskButton = false,\r\n  createTaskLabel, // v0.15.0: Will use translations if not provided\r\n  onCreateTask,\r\n  onExportPNG,\r\n  onExportPDF,\r\n  onExportExcel,\r\n  onExportCSV,\r\n  onExportJSON,\r\n  onExportMSProject,\r\n}: GanttToolbarProps) {\r\n  const t = useGanttI18n(); // v0.15.0: i18n\r\n  const hasExport = onExportPNG || onExportPDF || onExportExcel || onExportCSV || onExportJSON || onExportMSProject;\r\n\r\n  // v0.16.0: Use minimal tabs for time scale (Linear/Notion style)\r\n  const timeScaleOptions = [\r\n    { value: 'day', label: t.toolbar.day },\r\n    { value: 'week', label: t.toolbar.week },\r\n    { value: 'month', label: t.toolbar.month },\r\n  ];\r\n\r\n  const themeOptions = [\r\n    { value: 'dark', label: 'Dark', icon: <Moon className=\"w-3.5 h-3.5\" /> },\r\n    { value: 'light', label: 'Light', icon: <Sun className=\"w-3.5 h-3.5\" /> },\r\n    { value: 'neutral', label: 'Zen', icon: <Palette className=\"w-3.5 h-3.5\" /> },\r\n  ];\r\n\r\n  return (\r\n    <div\r\n      className=\"h-12 px-4 flex items-center justify-between border-b\"\r\n      style={{\r\n        backgroundColor: theme.bgGrid,\r\n        borderColor: theme.border,\r\n      }}\r\n    >\r\n      {/* Left Section - Time Scale as Minimal Tabs */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* v0.16.0: Minimal tabs for time scale */}\r\n        <MinimalTabs\r\n          options={timeScaleOptions}\r\n          value={timeScale}\r\n          onChange={(val) => onTimeScaleChange(val as TimeScale)}\r\n          theme={theme}\r\n        />\r\n\r\n        {/* Divider */}\r\n        <div\r\n          className=\"w-px h-5\"\r\n          style={{ backgroundColor: theme.borderLight }}\r\n        />\r\n\r\n        {/* Zoom Controls - Compact */}\r\n        <div className=\"flex items-center gap-1\">\r\n          <motion.button\r\n            onClick={() => onZoomChange(Math.max(0.5, zoom - 0.1))}\r\n            className=\"p-1.5 rounded-md transition-all\"\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              color: theme.textSecondary,\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: theme.hoverBg,\r\n              scale: 1.05,\r\n            }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            <ZoomOut className=\"w-3.5 h-3.5\" />\r\n          </motion.button>\r\n\r\n          <div\r\n            className=\"px-2 py-0.5 rounded text-xs tabular-nums min-w-[42px] text-center\"\r\n            style={{\r\n              color: theme.textSecondary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: 500,\r\n            }}\r\n          >\r\n            {Math.round(zoom * 100)}%\r\n          </div>\r\n\r\n          <motion.button\r\n            onClick={() => onZoomChange(Math.min(2, zoom + 0.1))}\r\n            className=\"p-1.5 rounded-md transition-all\"\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              color: theme.textSecondary,\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: theme.hoverBg,\r\n              scale: 1.05,\r\n            }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            <ZoomIn className=\"w-3.5 h-3.5\" />\r\n          </motion.button>\r\n        </div>\r\n\r\n        {/* Divider */}\r\n        <div\r\n          className=\"w-px h-5\"\r\n          style={{ backgroundColor: theme.borderLight }}\r\n        />\r\n\r\n        {/* v0.16.0: Row Density as Dropdown Icon */}\r\n        <DensityDropdown\r\n          theme={theme}\r\n          value={rowDensity}\r\n          onChange={onRowDensityChange}\r\n        />\r\n      </div>\r\n\r\n      {/* Right Section - Create Task + Export + Theme Selector */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* v0.14.3: Create Task Button */}\r\n        {showCreateTaskButton && onCreateTask && (\r\n          <>\r\n            <motion.button\r\n              onClick={onCreateTask}\r\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n                color: '#FFFFFF',\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 500,\r\n                boxShadow: '0 2px 8px rgba(59, 130, 246, 0.3)',\r\n              }}\r\n              whileHover={{\r\n                scale: 1.02,\r\n                boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n              }}\r\n              whileTap={{ scale: 0.98 }}\r\n            >\r\n              <Plus className=\"w-3.5 h-3.5\" />\r\n              <span>{createTaskLabel || t.toolbar.createTask}</span>\r\n            </motion.button>\r\n            {(hasExport || showThemeSelector) && (\r\n              <div\r\n                className=\"w-px h-6\"\r\n                style={{ backgroundColor: theme.borderLight }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {hasExport && (\r\n          <>\r\n            <ExportDropdown\r\n              theme={theme}\r\n              onExportPNG={onExportPNG}\r\n              onExportPDF={onExportPDF}\r\n              onExportExcel={onExportExcel}\r\n              onExportCSV={onExportCSV}\r\n              onExportJSON={onExportJSON}\r\n              onExportMSProject={onExportMSProject}\r\n            />\r\n            {showThemeSelector && (\r\n              <div\r\n                className=\"w-px h-6\"\r\n                style={{ backgroundColor: theme.borderLight }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {showThemeSelector && (\r\n          <SegmentedControl\r\n            options={themeOptions}\r\n            value={currentTheme}\r\n            onChange={(val) => onThemeChange(val as Theme)}\r\n            theme={theme}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Plus, Check } from 'lucide-react';\r\nimport { Portal } from '../Portal';\r\nimport { GanttColumn, ColumnType } from './types';\r\n\r\ninterface ColumnManagerProps {\r\n  columns: GanttColumn[];\r\n  onToggleColumn: (columnId: ColumnType) => void;\r\n  theme: any;\r\n}\r\n\r\nexport function ColumnManager({ columns, onToggleColumn, theme }: ColumnManagerProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [menuPosition, setMenuPosition] = useState({ x: 0, y: 0 });\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const availableColumns = columns.filter(col => col.id !== 'name');\r\n\r\n  return (\r\n    <>\r\n      <motion.button\r\n        ref={buttonRef}\r\n        onClick={() => {\r\n          if (!isOpen && buttonRef.current) {\r\n            const rect = buttonRef.current.getBoundingClientRect();\r\n            setMenuPosition({ x: rect.left, y: rect.bottom + 4 });\r\n          }\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className=\"p-2 rounded-md transition-colors flex items-center gap-1\"\r\n        style={{\r\n          backgroundColor: theme.bgSecondary,\r\n          border: `1px solid ${theme.borderLight}`,\r\n          color: theme.textSecondary,\r\n        }}\r\n        whileHover={{\r\n          backgroundColor: theme.hoverBg,\r\n          scale: 1.05,\r\n        }}\r\n        whileTap={{ scale: 0.95 }}\r\n      >\r\n        <Plus className=\"w-4 h-4\" />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <Portal>\r\n            <motion.div\r\n              ref={menuRef}\r\n              initial={{ opacity: 0, scale: 0.95, y: -10 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.95, y: -10 }}\r\n              transition={{ duration: 0.15 }}\r\n              className=\"column-manager-menu fixed min-w-[180px] rounded-lg shadow-xl z-[9999]\"\r\n              style={{\r\n                left: `${menuPosition.x}px`,\r\n                top: `${menuPosition.y}px`,\r\n                backgroundColor: theme.bgSecondary,\r\n                border: `1px solid ${theme.border}`,\r\n              }}\r\n            >\r\n              <div className=\"py-1\">\r\n                <div\r\n                  className=\"px-3 py-2 text-xs uppercase tracking-wider\"\r\n                  style={{\r\n                    color: theme.textTertiary,\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    fontWeight: 600,\r\n                  }}\r\n                >\r\n                  Add Column\r\n                </div>\r\n                {availableColumns.map((column) => (\r\n                  <button\r\n                    key={column.id}\r\n                    onClick={() => {\r\n                      onToggleColumn(column.id);\r\n                    }}\r\n                    className=\"w-full px-3 py-2 text-left flex items-center justify-between transition-colors text-sm\"\r\n                    style={{\r\n                      color: theme.textPrimary,\r\n                      backgroundColor: 'transparent',\r\n                      fontFamily: 'Inter, sans-serif',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'transparent';\r\n                    }}\r\n                  >\r\n                    <span>{column.label}</span>\r\n                    {column.visible && (\r\n                      <Check className=\"w-4 h-4\" style={{ color: theme.accent }} />\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </motion.div>\r\n          </Portal>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Plus,\r\n  Minus,\r\n  Edit3,\r\n  Trash2,\r\n  Link2,\r\n  BarChart3,\r\n  ArrowUpDown,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  ChevronRight,\r\n  Eye,\r\n  EyeOff,\r\n  Settings,\r\n  Scissors, // v0.8.0: For Split task\r\n  Circle, // v0.16.0: For Mark Incomplete\r\n  PlayCircle, // v0.16.0: For Set In Progress\r\n  CheckCircle2, // v0.16.0: For Mark Complete\r\n  Pencil, // v0.16.0: Alias for Edit\r\n} from 'lucide-react';\r\n\r\nexport interface ContextMenuItem {\r\n  id: string;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n  onClick: () => void;\r\n  separator?: boolean;\r\n  disabled?: boolean;\r\n  submenu?: ContextMenuItem[];\r\n}\r\n\r\ninterface ContextMenuProps {\r\n  isOpen: boolean;\r\n  x: number;\r\n  y: number;\r\n  items: ContextMenuItem[];\r\n  onClose: () => void;\r\n  theme: any;\r\n}\r\n\r\nexport function ContextMenu({ isOpen, x, y, items, onClose, theme }: ContextMenuProps) {\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('keydown', handleEscape);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        ref={menuRef}\r\n        initial={{ opacity: 0, scale: 0.95, y: -10 }}\r\n        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n        exit={{ opacity: 0, scale: 0.95, y: -10 }}\r\n        transition={{ duration: 0.15, ease: [0.4, 0, 0.2, 1] }}\r\n        className=\"fixed z-[9999] min-w-[200px] rounded-lg shadow-xl\"\r\n        style={{\r\n          left: `${x}px`,\r\n          top: `${y}px`,\r\n          backgroundColor: theme.bgSecondary,\r\n          border: `1px solid ${theme.border}`,\r\n        }}\r\n      >\r\n        <div className=\"py-1\">\r\n          {items.map((item) => (\r\n            <div key={item.id}>\r\n              {item.separator && (\r\n                <div\r\n                  className=\"my-1 h-px\"\r\n                  style={{ backgroundColor: theme.borderLight }}\r\n                />\r\n              )}\r\n              <button\r\n                onClick={() => {\r\n                  if (!item.disabled) {\r\n                    item.onClick();\r\n                    onClose();\r\n                  }\r\n                }}\r\n                disabled={item.disabled}\r\n                className=\"w-full px-3 py-2 text-left flex items-center gap-2 transition-colors text-sm\"\r\n                style={{\r\n                  color: item.disabled ? theme.textTertiary : theme.textPrimary,\r\n                  backgroundColor: 'transparent',\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  cursor: item.disabled ? 'not-allowed' : 'pointer',\r\n                  opacity: item.disabled ? 0.5 : 1,\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  if (!item.disabled) {\r\n                    e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                  }\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent';\r\n                }}\r\n              >\r\n                {item.icon && (\r\n                  <span style={{ color: theme.textSecondary }}>\r\n                    {item.icon}\r\n                  </span>\r\n                )}\r\n                <span className=\"flex-1\">{item.label}</span>\r\n                {item.submenu && (\r\n                  <ChevronRight className=\"w-3.5 h-3.5\" style={{ color: theme.textTertiary }} />\r\n                )}\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// Icon components for menu items\r\nexport const MenuIcons = {\r\n  Edit: <Edit3 className=\"w-4 h-4\" />,\r\n  Pencil: <Pencil className=\"w-4 h-4\" />, // v0.16.0: Alias for Edit\r\n  Delete: <Trash2 className=\"w-4 h-4\" />,\r\n  Add: <Plus className=\"w-4 h-4\" />,\r\n  AddSubtask: <Plus className=\"w-4 h-4\" />, // v0.16.0: Add subtask\r\n  Remove: <Minus className=\"w-4 h-4\" />,\r\n  Link: <Link2 className=\"w-4 h-4\" />,\r\n  Progress: <BarChart3 className=\"w-4 h-4\" />,\r\n  Sort: <ArrowUpDown className=\"w-4 h-4\" />,\r\n  SortAsc: <ArrowUp className=\"w-4 h-4\" />,\r\n  SortDesc: <ArrowDown className=\"w-4 h-4\" />,\r\n  Hide: <EyeOff className=\"w-4 h-4\" />,\r\n  Show: <Eye className=\"w-4 h-4\" />,\r\n  Settings: <Settings className=\"w-4 h-4\" />,\r\n  Split: <Scissors className=\"w-4 h-4\" />, // v0.8.0: Split task\r\n  // v0.16.0: Task status icons\r\n  MarkIncomplete: <Circle className=\"w-4 h-4\" />,\r\n  SetInProgress: <PlayCircle className=\"w-4 h-4\" />,\r\n  MarkComplete: <CheckCircle2 className=\"w-4 h-4\" />,\r\n};\r\n","import { useEffect, useCallback, useRef } from 'react';\r\nimport { Task } from './types';\r\n\r\ninterface UseGanttKeyboardProps {\r\n  tasks: Task[];\r\n  selectedTaskIds: Set<string>;\r\n  onTaskSelect: (taskId: string, multiSelect?: boolean) => void;\r\n  onTaskCreate: (afterTaskId: string, direction: 'above' | 'below') => void;\r\n  onTaskDelete: (taskIds: string[]) => void;\r\n  onTaskDuplicate: (taskIds: string[]) => void;\r\n  onTaskMove: (taskIds: string[], direction: 'up' | 'down') => void;\r\n  onTaskIndent: (taskIds: string[]) => void;\r\n  onTaskOutdent: (taskIds: string[]) => void;\r\n  onTaskRename: (taskId: string) => void;\r\n  onTaskToggleExpand: (taskId: string) => void;\r\n  onOpenTaskModal: (taskId: string) => void;\r\n  enableKeyboard?: boolean;\r\n}\r\n\r\nexport function useGanttKeyboard({\r\n  tasks,\r\n  selectedTaskIds,\r\n  onTaskSelect,\r\n  onTaskCreate,\r\n  onTaskDelete,\r\n  onTaskDuplicate,\r\n  onTaskMove,\r\n  onTaskIndent,\r\n  onTaskOutdent,\r\n  onTaskRename,\r\n  onTaskToggleExpand,\r\n  onOpenTaskModal,\r\n  enableKeyboard = true,\r\n}: UseGanttKeyboardProps) {\r\n  const isEditingRef = useRef(false);\r\n\r\n  // Set editing state from outside\r\n  const setIsEditing = useCallback((editing: boolean) => {\r\n    isEditingRef.current = editing;\r\n  }, []);\r\n\r\n  // Flatten tasks for navigation\r\n  const flattenTasks = useCallback((tasks: Task[]): Task[] => {\r\n    const result: Task[] = [];\r\n    const traverse = (tasks: Task[]) => {\r\n      for (const task of tasks) {\r\n        result.push(task);\r\n        if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n          traverse(task.subtasks);\r\n        }\r\n      }\r\n    };\r\n    traverse(tasks);\r\n    return result;\r\n  }, []);\r\n\r\n  // Get first selected task\r\n  const getFirstSelectedTask = useCallback(() => {\r\n    const flatTasks = flattenTasks(tasks);\r\n    for (const task of flatTasks) {\r\n      if (selectedTaskIds.has(task.id)) {\r\n        return task;\r\n      }\r\n    }\r\n    return null;\r\n  }, [tasks, selectedTaskIds, flattenTasks]);\r\n\r\n  // Navigate with arrow keys\r\n  const handleNavigation = useCallback(\r\n    (direction: 'up' | 'down', multiSelect: boolean) => {\r\n      const flatTasks = flattenTasks(tasks);\r\n      if (flatTasks.length === 0) return;\r\n\r\n      const selectedTask = getFirstSelectedTask();\r\n      if (!selectedTask) {\r\n        // No selection, select first task\r\n        onTaskSelect(flatTasks[0].id, false);\r\n        return;\r\n      }\r\n\r\n      const currentIndex = flatTasks.findIndex((t) => t.id === selectedTask.id);\r\n      if (currentIndex === -1) return;\r\n\r\n      const nextIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;\r\n      if (nextIndex < 0 || nextIndex >= flatTasks.length) return;\r\n\r\n      const nextTask = flatTasks[nextIndex];\r\n      onTaskSelect(nextTask.id, multiSelect);\r\n    },\r\n    [tasks, getFirstSelectedTask, flattenTasks, onTaskSelect]\r\n  );\r\n\r\n  // Handle keyboard shortcuts\r\n  const handleKeyDown = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      // Ignore if keyboard is disabled\r\n      if (!enableKeyboard) return;\r\n\r\n      // Ignore if user is typing in an input/textarea\r\n      const target = e.target as HTMLElement;\r\n      const isInputField =\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable ||\r\n        isEditingRef.current;\r\n\r\n      if (isInputField) {\r\n        // Only allow Escape to cancel editing\r\n        if (e.key === 'Escape') {\r\n          target.blur();\r\n          isEditingRef.current = false;\r\n        }\r\n        return;\r\n      }\r\n\r\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n      const ctrlOrCmd = isMac ? e.metaKey : e.ctrlKey;\r\n      const selectedIds = Array.from(selectedTaskIds);\r\n      const selectedTask = getFirstSelectedTask();\r\n\r\n      // Navigation: Arrow Up/Down\r\n      if (e.key === 'ArrowUp') {\r\n        e.preventDefault();\r\n        handleNavigation('up', e.shiftKey);\r\n        return;\r\n      }\r\n      if (e.key === 'ArrowDown') {\r\n        e.preventDefault();\r\n        handleNavigation('down', e.shiftKey);\r\n        return;\r\n      }\r\n\r\n      // Expand/Collapse: Arrow Right/Left\r\n      if (selectedTask && (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) {\r\n        if (selectedTask.subtasks && selectedTask.subtasks.length > 0) {\r\n          e.preventDefault();\r\n          if (e.key === 'ArrowRight' && !selectedTask.isExpanded) {\r\n            onTaskToggleExpand(selectedTask.id);\r\n          } else if (e.key === 'ArrowLeft' && selectedTask.isExpanded) {\r\n            onTaskToggleExpand(selectedTask.id);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Move: Alt + Arrow Up/Down\r\n      if (e.altKey && (e.key === 'ArrowUp' || e.key === 'ArrowDown')) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskMove(selectedIds, e.key === 'ArrowUp' ? 'up' : 'down');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Indent: Tab\r\n      if (e.key === 'Tab' && !e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskIndent(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Outdent: Shift + Tab\r\n      if (e.key === 'Tab' && e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskOutdent(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Create below: Enter\r\n      if (e.key === 'Enter' && !e.shiftKey && !ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskCreate(selectedTask.id, 'below');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Create above: Shift + Enter\r\n      if (e.key === 'Enter' && e.shiftKey && !ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskCreate(selectedTask.id, 'above');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Open modal: Ctrl/Cmd + Enter\r\n      if (e.key === 'Enter' && ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onOpenTaskModal(selectedTask.id);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Rename: F2\r\n      if (e.key === 'F2') {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskRename(selectedTask.id);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Delete: Delete or Cmd/Ctrl + Backspace\r\n      if (e.key === 'Delete' || (e.key === 'Backspace' && ctrlOrCmd)) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskDelete(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Duplicate: Ctrl/Cmd + D\r\n      if (e.key === 'd' && ctrlOrCmd && !e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskDuplicate(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n    },\r\n    [\r\n      enableKeyboard,\r\n      selectedTaskIds,\r\n      getFirstSelectedTask,\r\n      handleNavigation,\r\n      onTaskCreate,\r\n      onTaskDelete,\r\n      onTaskDuplicate,\r\n      onTaskMove,\r\n      onTaskIndent,\r\n      onTaskOutdent,\r\n      onTaskRename,\r\n      onTaskToggleExpand,\r\n      onOpenTaskModal,\r\n    ]\r\n  );\r\n\r\n  // Register keyboard event listener\r\n  useEffect(() => {\r\n    if (!enableKeyboard) return;\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [enableKeyboard, handleKeyDown]);\r\n\r\n  return { setIsEditing };\r\n}\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport function useGanttSelection() {\r\n  const [selectedTaskIds, setSelectedTaskIds] = useState<Set<string>>(new Set());\r\n  const [lastSelectedId, setLastSelectedId] = useState<string | null>(null);\r\n\r\n  // Select a single task\r\n  const selectTask = useCallback((taskId: string) => {\r\n    setSelectedTaskIds(new Set([taskId]));\r\n    setLastSelectedId(taskId);\r\n  }, []);\r\n\r\n  // Toggle task selection (Ctrl/Cmd + Click)\r\n  const toggleTaskSelection = useCallback((taskId: string) => {\r\n    setSelectedTaskIds((prev) => {\r\n      const next = new Set(prev);\r\n      if (next.has(taskId)) {\r\n        next.delete(taskId);\r\n      } else {\r\n        next.add(taskId);\r\n      }\r\n      return next;\r\n    });\r\n    setLastSelectedId(taskId);\r\n  }, []);\r\n\r\n  // Select range (Shift + Click or Shift + Arrow)\r\n  const selectTaskRange = useCallback(\r\n    (taskId: string, flatTaskIds: string[]) => {\r\n      if (!lastSelectedId) {\r\n        selectTask(taskId);\r\n        return;\r\n      }\r\n\r\n      const lastIndex = flatTaskIds.indexOf(lastSelectedId);\r\n      const currentIndex = flatTaskIds.indexOf(taskId);\r\n\r\n      if (lastIndex === -1 || currentIndex === -1) {\r\n        selectTask(taskId);\r\n        return;\r\n      }\r\n\r\n      const start = Math.min(lastIndex, currentIndex);\r\n      const end = Math.max(lastIndex, currentIndex);\r\n      const rangeIds = flatTaskIds.slice(start, end + 1);\r\n\r\n      setSelectedTaskIds(new Set(rangeIds));\r\n      setLastSelectedId(taskId);\r\n    },\r\n    [lastSelectedId, selectTask]\r\n  );\r\n\r\n  // Handle task click with modifiers\r\n  const handleTaskClick = useCallback(\r\n    (taskId: string, flatTaskIds: string[], ctrlOrCmd: boolean, shift: boolean) => {\r\n      if (shift) {\r\n        selectTaskRange(taskId, flatTaskIds);\r\n      } else if (ctrlOrCmd) {\r\n        toggleTaskSelection(taskId);\r\n      } else {\r\n        selectTask(taskId);\r\n      }\r\n    },\r\n    [selectTask, toggleTaskSelection, selectTaskRange]\r\n  );\r\n\r\n  // Handle selection from keyboard\r\n  const handleKeyboardSelection = useCallback(\r\n    (taskId: string, multiSelect: boolean) => {\r\n      if (multiSelect) {\r\n        setSelectedTaskIds((prev) => {\r\n          const next = new Set(prev);\r\n          next.add(taskId);\r\n          return next;\r\n        });\r\n      } else {\r\n        selectTask(taskId);\r\n      }\r\n    },\r\n    [selectTask]\r\n  );\r\n\r\n  // Clear selection\r\n  const clearSelection = useCallback(() => {\r\n    setSelectedTaskIds(new Set());\r\n    setLastSelectedId(null);\r\n  }, []);\r\n\r\n  // Check if task is selected\r\n  const isTaskSelected = useCallback(\r\n    (taskId: string) => {\r\n      return selectedTaskIds.has(taskId);\r\n    },\r\n    [selectedTaskIds]\r\n  );\r\n\r\n  return {\r\n    selectedTaskIds,\r\n    selectTask,\r\n    toggleTaskSelection,\r\n    selectTaskRange,\r\n    handleTaskClick,\r\n    handleKeyboardSelection,\r\n    clearSelection,\r\n    isTaskSelected,\r\n  };\r\n}\r\n","import { Task } from './types';\r\n\r\n/**\r\n * Flatten tasks into a single array with level information\r\n */\r\nexport function flattenTasks(tasks: Task[]): Task[] {\r\n  const result: Task[] = [];\r\n  const traverse = (tasks: Task[], parentId?: string, level = 0) => {\r\n    for (let i = 0; i < tasks.length; i++) {\r\n      const task = { ...tasks[i], parentId, level, position: i };\r\n      result.push(task);\r\n      if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n        traverse(task.subtasks, task.id, level + 1);\r\n      }\r\n    }\r\n  };\r\n  traverse(tasks);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Find task by ID recursively\r\n */\r\nexport function findTask(tasks: Task[], taskId: string): Task | null {\r\n  for (const task of tasks) {\r\n    if (task.id === taskId) return task;\r\n    if (task.subtasks) {\r\n      const found = findTask(task.subtasks, taskId);\r\n      if (found) return found;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Find parent task by child ID\r\n */\r\nexport function findParentTask(tasks: Task[], childId: string): Task | null {\r\n  for (const task of tasks) {\r\n    if (task.subtasks) {\r\n      if (task.subtasks.some((t) => t.id === childId)) {\r\n        return task;\r\n      }\r\n      const found = findParentTask(task.subtasks, childId);\r\n      if (found) return found;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Indent tasks (make them children of the previous sibling)\r\n */\r\nexport function indentTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  // Get flat list to find positions\r\n  const flatTasks = flattenTasks(tasks);\r\n  const firstTaskId = taskIds[0];\r\n  const taskIndex = flatTasks.findIndex((t) => t.id === firstTaskId);\r\n\r\n  if (taskIndex <= 0) return tasks; // Can't indent first task\r\n\r\n  const targetParent = flatTasks[taskIndex - 1]; // Previous sibling becomes parent\r\n\r\n  // Helper to remove tasks from array\r\n  const removeTasks = (tasks: Task[], ids: Set<string>): { tasks: Task[]; removed: Task[] } => {\r\n    const removed: Task[] = [];\r\n    const filtered = tasks.filter((task) => {\r\n      if (ids.has(task.id)) {\r\n        removed.push(task);\r\n        return false;\r\n      }\r\n      if (task.subtasks) {\r\n        const result = removeTasks(task.subtasks, ids);\r\n        task.subtasks = result.tasks;\r\n        removed.push(...result.removed);\r\n      }\r\n      return true;\r\n    });\r\n    return { tasks: filtered, removed };\r\n  };\r\n\r\n  // Helper to add tasks as children\r\n  const addAsChildren = (tasks: Task[], parentId: string, children: Task[]): Task[] => {\r\n    return tasks.map((task) => {\r\n      if (task.id === parentId) {\r\n        return {\r\n          ...task,\r\n          subtasks: [...(task.subtasks || []), ...children],\r\n          isExpanded: true, // Auto-expand when adding children\r\n        };\r\n      }\r\n      if (task.subtasks) {\r\n        return { ...task, subtasks: addAsChildren(task.subtasks, parentId, children) };\r\n      }\r\n      return task;\r\n    });\r\n  };\r\n\r\n  const idsSet = new Set(taskIds);\r\n  const { tasks: filtered, removed } = removeTasks(tasks, idsSet);\r\n  return addAsChildren(filtered, targetParent.id, removed);\r\n}\r\n\r\n/**\r\n * Outdent tasks (move them up one level in hierarchy)\r\n */\r\nexport function outdentTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  const result = [...tasks];\r\n\r\n  for (const taskId of taskIds) {\r\n    const parent = findParentTask(result, taskId);\r\n    if (!parent) continue; // Already root level\r\n\r\n    const grandparent = findParentTask(result, parent.id);\r\n\r\n    // Helper to remove task from parent\r\n    const removeFromParent = (tasks: Task[], parentId: string, taskId: string): Task | null => {\r\n      for (let i = 0; i < tasks.length; i++) {\r\n        const task = tasks[i];\r\n        if (task.id === parentId && task.subtasks) {\r\n          const taskIndex = task.subtasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex !== -1) {\r\n            const [removed] = task.subtasks.splice(taskIndex, 1);\r\n            return removed;\r\n          }\r\n        }\r\n        if (task.subtasks) {\r\n          const removed = removeFromParent(task.subtasks, parentId, taskId);\r\n          if (removed) return removed;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Helper to insert task after parent\r\n    const insertAfterTask = (tasks: Task[], afterId: string, task: Task): Task[] => {\r\n      const index = tasks.findIndex((t) => t.id === afterId);\r\n      if (index !== -1) {\r\n        tasks.splice(index + 1, 0, task);\r\n        return tasks;\r\n      }\r\n      for (const t of tasks) {\r\n        if (t.subtasks) {\r\n          insertAfterTask(t.subtasks, afterId, task);\r\n        }\r\n      }\r\n      return tasks;\r\n    };\r\n\r\n    const removed = removeFromParent(result, parent.id, taskId);\r\n    if (removed) {\r\n      if (grandparent && grandparent.subtasks) {\r\n        // Move to grandparent's children after parent\r\n        insertAfterTask(grandparent.subtasks, parent.id, removed);\r\n      } else {\r\n        // Move to root level after parent\r\n        insertAfterTask(result, parent.id, removed);\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Move tasks up or down within their level\r\n */\r\nexport function moveTasks(tasks: Task[], taskIds: string[], direction: 'up' | 'down'): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  const result = [...tasks];\r\n  const firstTaskId = taskIds[0];\r\n\r\n  // Helper to move task within array\r\n  const moveInArray = (tasks: Task[], taskId: string, direction: 'up' | 'down'): boolean => {\r\n    const index = tasks.findIndex((t) => t.id === taskId);\r\n    if (index === -1) {\r\n      // Try in subtasks\r\n      for (const task of tasks) {\r\n        if (task.subtasks && moveInArray(task.subtasks, taskId, direction)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const newIndex = direction === 'up' ? index - 1 : index + 1;\r\n    if (newIndex < 0 || newIndex >= tasks.length) return false;\r\n\r\n    // Swap tasks\r\n    [tasks[index], tasks[newIndex]] = [tasks[newIndex], tasks[index]];\r\n    return true;\r\n  };\r\n\r\n  moveInArray(result, firstTaskId, direction);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Delete tasks by IDs\r\n */\r\nexport function deleteTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  const idsSet = new Set(taskIds);\r\n\r\n  const filterTasks = (tasks: Task[]): Task[] => {\r\n    return tasks\r\n      .filter((task) => !idsSet.has(task.id))\r\n      .map((task) => {\r\n        if (task.subtasks) {\r\n          return { ...task, subtasks: filterTasks(task.subtasks) };\r\n        }\r\n        return task;\r\n      });\r\n  };\r\n\r\n  return filterTasks(tasks);\r\n}\r\n\r\n/**\r\n * Duplicate tasks\r\n */\r\nexport function duplicateTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  const result = [...tasks];\r\n\r\n  for (const taskId of taskIds) {\r\n    const duplicateTask = (tasks: Task[]): boolean => {\r\n      const index = tasks.findIndex((t) => t.id === taskId);\r\n      if (index === -1) {\r\n        // Try in subtasks\r\n        for (const task of tasks) {\r\n          if (task.subtasks && duplicateTask(task.subtasks)) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n\r\n      const original = tasks[index];\r\n      const copy = {\r\n        ...original,\r\n        id: `${original.id}-copy-${Date.now()}`,\r\n        name: `${original.name} (Copy)`,\r\n        subtasks: original.subtasks ? duplicateSubtasks(original.subtasks) : undefined,\r\n      };\r\n\r\n      tasks.splice(index + 1, 0, copy);\r\n      return true;\r\n    };\r\n\r\n    const duplicateSubtasks = (subtasks: Task[]): Task[] => {\r\n      return subtasks.map((task) => ({\r\n        ...task,\r\n        id: `${task.id}-copy-${Date.now()}`,\r\n        subtasks: task.subtasks ? duplicateSubtasks(task.subtasks) : undefined,\r\n      }));\r\n    };\r\n\r\n    duplicateTask(result);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Create a new task\r\n * v0.11.0: New tasks start with default blue color\r\n */\r\nexport function createTask(\r\n  tasks: Task[],\r\n  afterTaskId: string,\r\n  direction: 'above' | 'below'\r\n): { tasks: Task[]; newTask: Task } {\r\n  const result = [...tasks];\r\n  const today = new Date();\r\n  const weekFromNow = new Date(today);\r\n  weekFromNow.setDate(weekFromNow.getDate() + 7);\r\n\r\n  const newTask: Task = {\r\n    id: `task-${Date.now()}`,\r\n    name: 'New Task',\r\n    progress: 0,\r\n    status: 'todo',\r\n    startDate: today,\r\n    endDate: weekFromNow,\r\n    color: '#6366F1', // v0.11.0: Default blue pastel color\r\n  };\r\n\r\n  const insertTask = (tasks: Task[]): boolean => {\r\n    const index = tasks.findIndex((t) => t.id === afterTaskId);\r\n    if (index === -1) {\r\n      // Try in subtasks\r\n      for (const task of tasks) {\r\n        if (task.subtasks && insertTask(task.subtasks)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const insertIndex = direction === 'above' ? index : index + 1;\r\n    tasks.splice(insertIndex, 0, newTask);\r\n    return true;\r\n  };\r\n\r\n  insertTask(result);\r\n  return { tasks: result, newTask };\r\n}\r\n\r\n/**\r\n * Rename a task\r\n */\r\nexport function renameTask(tasks: Task[], taskId: string, newName: string): Task[] {\r\n  return tasks.map((task) => {\r\n    if (task.id === taskId) {\r\n      return { ...task, name: newName };\r\n    }\r\n    if (task.subtasks) {\r\n      return { ...task, subtasks: renameTask(task.subtasks, taskId, newName) };\r\n    }\r\n    return task;\r\n  });\r\n}\r\n\r\n/**\r\n * Toggle task expansion\r\n */\r\nexport function toggleTaskExpansion(tasks: Task[], taskId: string): Task[] {\r\n  return tasks.map((task) => {\r\n    if (task.id === taskId) {\r\n      return { ...task, isExpanded: !task.isExpanded };\r\n    }\r\n    if (task.subtasks) {\r\n      return { ...task, subtasks: toggleTaskExpansion(task.subtasks, taskId) };\r\n    }\r\n    return task;\r\n  });\r\n}\r\n\r\n/**\r\n * Create a subtask for a parent task\r\n * v0.11.0: Subtasks inherit parent color\r\n */\r\nexport function createSubtask(\r\n  tasks: Task[],\r\n  parentTaskId: string\r\n): { tasks: Task[]; newTask: Task } {\r\n  // Find parent task to inherit properties\r\n  const findParent = (tasks: Task[]): Task | null => {\r\n    for (const task of tasks) {\r\n      if (task.id === parentTaskId) return task;\r\n      if (task.subtasks) {\r\n        const found = findParent(task.subtasks);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const parentTask = findParent(tasks);\r\n\r\n  // v0.16.7: Inherit dates from parent task (subtask should fit within parent)\r\n  // If parent has dates, use them. Otherwise fall back to today + 7 days\r\n  const today = new Date();\r\n  const weekFromNow = new Date(today);\r\n  weekFromNow.setDate(weekFromNow.getDate() + 7);\r\n\r\n  const startDate = parentTask?.startDate || today;\r\n  const endDate = parentTask?.endDate || weekFromNow;\r\n\r\n  const newTask: Task = {\r\n    id: `task-${Date.now()}`,\r\n    name: 'New Subtask',\r\n    progress: 0,\r\n    status: 'todo',\r\n    startDate: new Date(startDate), // Clone to avoid reference issues\r\n    endDate: new Date(endDate),     // Clone to avoid reference issues\r\n    color: parentTask?.color || '#3B82F6', // v0.16.7: Inherit parent color (default: electric blue)\r\n  };\r\n\r\n  const addSubtask = (tasks: Task[]): Task[] => {\r\n    return tasks.map((task) => {\r\n      if (task.id === parentTaskId) {\r\n        // Add subtask to the end of existing subtasks\r\n        const subtasks = task.subtasks || [];\r\n        return {\r\n          ...task,\r\n          subtasks: [...subtasks, newTask],\r\n          isExpanded: true, // Auto-expand parent to show new subtask\r\n        };\r\n      }\r\n      if (task.subtasks) {\r\n        return { ...task, subtasks: addSubtask(task.subtasks) };\r\n      }\r\n      return task;\r\n    });\r\n  };\r\n\r\n  return { tasks: addSubtask(tasks), newTask };\r\n}\r\n","/**\r\n * Status Selector Component\r\n * Reusable status selector for both Card and Gantt\r\n * Follows the same pattern as PrioritySelector\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport type TaskStatus = 'todo' | 'in-progress' | 'completed'\r\n\r\nexport interface StatusSelectorProps {\r\n  status?: TaskStatus\r\n  onChange: (status: TaskStatus) => void\r\n  className?: string\r\n}\r\n\r\nconst STATUS_CONFIG = {\r\n  'todo': {\r\n    label: 'To Do',\r\n    color: '#94a3b8',\r\n    icon: 'circle'\r\n  },\r\n  'in-progress': {\r\n    label: 'In Progress',\r\n    color: '#60a5fa',\r\n    icon: 'circle-dot'\r\n  },\r\n  'completed': {\r\n    label: 'Completed',\r\n    color: '#34d399',\r\n    icon: 'check-circle'\r\n  },\r\n} as const\r\n\r\nconst StatusIcon = ({ icon, color }: { icon: string; color: string }) => {\r\n  if (icon === 'circle') {\r\n    return (\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill=\"none\" />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  if (icon === 'circle-dot') {\r\n    return (\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill=\"none\" />\r\n        <circle cx=\"8\" cy=\"8\" r=\"3\" fill={color} />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  // check-circle\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill={color} fillOpacity=\"0.2\" />\r\n      <path d=\"M5 8L7 10L11 6\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport function StatusSelector({\r\n  status = 'todo',\r\n  onChange,\r\n  className,\r\n}: StatusSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') setIsOpen(false)\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (newStatus: TaskStatus) => {\r\n    onChange(newStatus)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const currentConfig = STATUS_CONFIG[status]\r\n  const statusColor = currentConfig.color\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center justify-center w-8 h-8 rounded-lg transition-all hover:bg-white/15 hover:scale-110 active:scale-95\"\r\n        style={{\r\n          background: `${statusColor}10`,\r\n          boxShadow: `0 0 0 2px ${statusColor}30 inset`,\r\n        }}\r\n        title={currentConfig.label}\r\n      >\r\n        <StatusIcon icon={currentConfig.icon} color={statusColor} />\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"status-selector-menu\"\r\n            style={{\r\n              position: 'absolute',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              zIndex: 99999,\r\n              minWidth: '180px',\r\n              borderRadius: '8px',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n            }}\r\n          >\r\n          <div\r\n            className=\"px-3 py-1.5 border-b\"\r\n            style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n          >\r\n            <span\r\n              className=\"text-[10px] font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}\r\n            >\r\n              Status\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {(Object.entries(STATUS_CONFIG) as [TaskStatus, typeof STATUS_CONFIG[TaskStatus]][]).map(\r\n              ([key, config]) => (\r\n                <button\r\n                  key={key}\r\n                  onClick={() => handleSelect(key)}\r\n                  className=\"w-full px-3 py-2 flex items-center gap-2.5 text-sm font-medium transition-all active:scale-[0.98] status-option\"\r\n                  style={{\r\n                    color: config.color,\r\n                    background: 'transparent'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'transparent'\r\n                  }}\r\n                >\r\n                  <StatusIcon icon={config.icon} color={config.color} />\r\n                  <span className=\"font-semibold\">{config.label}</span>\r\n                  {status === key && (\r\n                    <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              )\r\n            )}\r\n          </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useEffect, useRef, useContext } from 'react';\r\nimport { ChevronDown, ChevronRight, Keyboard, Plus, Edit3 } from 'lucide-react';\r\nimport { Task, GanttColumn, ColumnType, GanttTemplates } from './types';\r\nimport { motion } from 'framer-motion';\r\nimport { ColumnManager } from './ColumnManager';\r\nimport { ContextMenu, ContextMenuItem, MenuIcons } from './ContextMenu';\r\nimport { useGanttKeyboard } from './useGanttKeyboard';\r\nimport { useGanttSelection } from './useGanttSelection';\r\nimport { flattenTasks as flattenTasksUtil } from './hierarchyUtils';\r\nimport { UserAssignmentSelector } from '../Card/UserAssignmentSelector';\r\nimport { StatusSelector } from '../Card/StatusSelector';\r\nimport { GanttI18nContext } from './GanttI18nContext';\r\nimport type { User } from '../Card/UserAssignmentSelector';\r\n\r\ninterface TaskGridProps {\r\n  tasks: Task[];\r\n  theme: any;\r\n  rowHeight: number;\r\n  availableUsers?: Array<{ id: string; name: string; initials: string; color: string }>;\r\n  templates: Required<GanttTemplates>; // v0.8.0\r\n  onTaskClick?: (task: Task) => void;\r\n  onTaskDblClick?: (task: Task) => void; // v0.8.0\r\n  onTaskContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\r\n  onTaskToggle?: (taskId: string) => void;\r\n  scrollTop: number;\r\n  columns: GanttColumn[];\r\n  onToggleColumn: (columnType: ColumnType) => void;\r\n  onColumnResize?: (columnId: ColumnType, newWidth: number) => void; // v0.13.8\r\n  onTaskUpdate?: (taskId: string, updates: Partial<Task>) => void;\r\n\r\n  // Hierarchy handlers\r\n  onTaskIndent?: (taskIds: string[]) => void;\r\n  onTaskOutdent?: (taskIds: string[]) => void;\r\n  onTaskMove?: (taskIds: string[], direction: 'up' | 'down') => void;\r\n  onMultiTaskDelete?: (taskIds: string[]) => void;\r\n  onTaskDuplicate?: (taskIds: string[]) => void;\r\n  onTaskCreate?: (afterTaskId: string, direction: 'above' | 'below') => void;\r\n  onTaskRename?: (taskId: string, newName: string) => void;\r\n  onCreateSubtask?: (parentTaskId: string) => void;\r\n  onOpenTaskModal?: (task: Task) => void;\r\n}\r\n\r\nexport function TaskGrid({\r\n  tasks,\r\n  theme,\r\n  rowHeight: ROW_HEIGHT,\r\n  availableUsers = [],\r\n  templates: _templates, // TODO: Use templates for custom rendering\r\n  onTaskClick,\r\n  onTaskDblClick, // v0.8.0\r\n  onTaskContextMenu, // v0.8.0\r\n  onTaskToggle,\r\n  scrollTop: _scrollTop,\r\n  columns,\r\n  onToggleColumn,\r\n  onColumnResize,\r\n  onTaskUpdate,\r\n  onTaskIndent,\r\n  onTaskOutdent,\r\n  onTaskMove,\r\n  onMultiTaskDelete,\r\n  onTaskDuplicate,\r\n  onTaskCreate,\r\n  onTaskRename,\r\n  onCreateSubtask,\r\n  onOpenTaskModal,\r\n}: TaskGridProps) {\r\n  // v0.16.2: Get translations from context\r\n  const translations = useContext(GanttI18nContext);\r\n\r\n  const [hoveredTaskId, setHoveredTaskId] = useState<string | null>(null);\r\n  const [showKeyboardHelp, setShowKeyboardHelp] = useState(false);\r\n  const [editingTaskId, setEditingTaskId] = useState<string | null>(null);\r\n  const [editingTaskName, setEditingTaskName] = useState('');\r\n  const keyboardHelpRef = useRef<HTMLDivElement>(null);\r\n  const editInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // v0.13.8: Column resize state\r\n  const [resizingColumn, setResizingColumn] = useState<ColumnType | null>(null);\r\n  const [resizeStartX, setResizeStartX] = useState(0);\r\n  const [resizeStartWidth, setResizeStartWidth] = useState(0);\r\n  const [contextMenu, setContextMenu] = useState<{\r\n    isOpen: boolean;\r\n    x: number;\r\n    y: number;\r\n    type: 'header' | 'task';\r\n    columnId?: ColumnType;\r\n    task?: Task;\r\n  }>({\r\n    isOpen: false,\r\n    x: 0,\r\n    y: 0,\r\n    type: 'header',\r\n  });\r\n\r\n  // Close keyboard help when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (keyboardHelpRef.current && !keyboardHelpRef.current.contains(event.target as Node)) {\r\n        setShowKeyboardHelp(false);\r\n      }\r\n    }\r\n\r\n    if (showKeyboardHelp) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return undefined;\r\n  }, [showKeyboardHelp]);\r\n\r\n  // Focus input when editing starts\r\n  useEffect(() => {\r\n    if (editingTaskId && editInputRef.current) {\r\n      editInputRef.current.focus();\r\n      editInputRef.current.select();\r\n    }\r\n  }, [editingTaskId]);\r\n\r\n  // v0.13.8: Handle column resize mouse events\r\n  useEffect(() => {\r\n    if (!resizingColumn) return;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const deltaX = e.clientX - resizeStartX;\r\n      const newWidth = resizeStartWidth + deltaX;\r\n      onColumnResize?.(resizingColumn, newWidth);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setResizingColumn(null);\r\n      document.body.style.cursor = '';\r\n      document.body.style.userSelect = '';\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n    document.body.style.cursor = 'col-resize';\r\n    document.body.style.userSelect = 'none';\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n      document.body.style.cursor = '';\r\n      document.body.style.userSelect = '';\r\n    };\r\n  }, [resizingColumn, resizeStartX, resizeStartWidth, onColumnResize]);\r\n\r\n  // Multi-selection hook\r\n  const {\r\n    selectedTaskIds,\r\n    handleTaskClick: handleSelectionClick,\r\n    isTaskSelected,\r\n  } = useGanttSelection();\r\n\r\n  // Keyboard shortcuts hook\r\n  const { setIsEditing } = useGanttKeyboard({\r\n    tasks,\r\n    selectedTaskIds,\r\n    onTaskSelect: (taskId: string, multiSelect?: boolean) => {\r\n      const flatTasks = flattenTasksUtil(tasks);\r\n      const flatTaskIds = flatTasks.map(t => t.id);\r\n      handleSelectionClick(taskId, flatTaskIds, multiSelect || false, false);\r\n    },\r\n    onTaskCreate: onTaskCreate || (() => {}),\r\n    onTaskDelete: onMultiTaskDelete || (() => {}),\r\n    onTaskDuplicate: onTaskDuplicate || (() => {}),\r\n    onTaskMove: onTaskMove || (() => {}),\r\n    onTaskIndent: onTaskIndent || (() => {}),\r\n    onTaskOutdent: onTaskOutdent || (() => {}),\r\n    onTaskRename: (taskId: string) => {\r\n      // Start inline rename when F2 is pressed\r\n      const task = flattenTasksUtil(tasks).find(t => t.id === taskId);\r\n      if (task) {\r\n        handleRenameStart(task);\r\n      }\r\n    },\r\n    onTaskToggleExpand: onTaskToggle || (() => {}),\r\n    onOpenTaskModal: (taskId: string) => {\r\n      const task = flattenTasksUtil(tasks).find(t => t.id === taskId);\r\n      if (task && onOpenTaskModal) {\r\n        onOpenTaskModal(task);\r\n      }\r\n    },\r\n    enableKeyboard: true,\r\n  });\r\n\r\n  const flattenTasks = (tasks: Task[], level = 0): Array<{ task: Task; level: number }> => {\r\n    const result: Array<{ task: Task; level: number }> = [];\r\n    \r\n    for (const task of tasks) {\r\n      result.push({ task, level });\r\n      if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n        result.push(...flattenTasks(task.subtasks, level + 1));\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  };\r\n\r\n  const flatTasks = flattenTasks(tasks);\r\n  const HEADER_HEIGHT = 48;\r\n\r\n\r\n  // Calculate duration\r\n  const getDuration = (task: Task) => {\r\n    if (!task.startDate || !task.endDate) return '-';\r\n    const days = Math.ceil((task.endDate.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    return `${days}d`;\r\n  };\r\n\r\n  // Handle rename start\r\n  const handleRenameStart = (task: Task) => {\r\n    setEditingTaskId(task.id);\r\n    setEditingTaskName(task.name);\r\n    setIsEditing(true);\r\n  };\r\n\r\n  // Handle rename save\r\n  const handleRenameSave = (taskId: string) => {\r\n    if (editingTaskName.trim() && editingTaskName !== tasks.find(t => t.id === taskId)?.name) {\r\n      onTaskRename?.(taskId, editingTaskName.trim());\r\n    }\r\n    setEditingTaskId(null);\r\n    setEditingTaskName('');\r\n    setIsEditing(false);\r\n  };\r\n\r\n  // Handle rename cancel\r\n  const handleRenameCancel = () => {\r\n    setEditingTaskId(null);\r\n    setEditingTaskName('');\r\n    setIsEditing(false);\r\n  };\r\n\r\n  // Handle create subtask\r\n  const handleCreateSubtaskClick = (task: Task, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    // Create subtask at the end of parent's children\r\n    onCreateSubtask?.(task.id);\r\n  };\r\n\r\n  // Render cell content based on column type\r\n  const renderCellContent = (column: GanttColumn, task: Task, level: number) => {\r\n    switch (column.id) {\r\n      case 'name':\r\n        const isEditing = editingTaskId === task.id;\r\n        const isHovered = hoveredTaskId === task.id;\r\n\r\n        return (\r\n          <div className=\"flex items-center gap-2 flex-1 min-w-0 relative\" style={{ paddingLeft: `${level * 20}px` }}>\r\n            {/* Expand/Collapse Button - Always show space for alignment */}\r\n            {task.subtasks && task.subtasks.length > 0 ? (\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onTaskToggle?.(task.id);\r\n                }}\r\n                className=\"p-0.5 hover:bg-opacity-10 rounded transition-colors flex-shrink-0\"\r\n                style={{ color: theme.textSecondary }}\r\n              >\r\n                {task.isExpanded ? (\r\n                  <ChevronDown className=\"w-4 h-4\" />\r\n                ) : (\r\n                  <ChevronRight className=\"w-4 h-4\" />\r\n                )}\r\n              </button>\r\n            ) : (\r\n              /* Spacer for tasks without subtasks to maintain alignment */\r\n              <div className=\"w-5 h-5 flex-shrink-0\" />\r\n            )}\r\n\r\n            {/* v0.11.0: Color Indicator - Simple dot showing task color */}\r\n            {/* v0.14.7: Changed default from #6366F1 (indigo) to #3B82F6 (electric blue) */}\r\n            <div\r\n              className=\"w-3 h-3 rounded-full flex-shrink-0 border\"\r\n              style={{\r\n                backgroundColor: task.color || '#3B82F6',\r\n                opacity: task.parentId ? 0.6 : 1, // Subtasks more transparent\r\n                borderColor: task.isMilestone ? theme.accent : 'transparent',\r\n                borderWidth: task.isMilestone ? '2px' : '0px',\r\n              }}\r\n              title={task.isMilestone ? 'Milestone' : task.parentId ? 'Subtask' : 'Task'}\r\n            />\r\n\r\n            {/* Task Name or Input */}\r\n            {isEditing ? (\r\n              <input\r\n                ref={editInputRef}\r\n                type=\"text\"\r\n                value={editingTaskName}\r\n                onChange={(e) => setEditingTaskName(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    handleRenameSave(task.id);\r\n                  } else if (e.key === 'Escape') {\r\n                    handleRenameCancel();\r\n                  }\r\n                }}\r\n                onBlur={() => handleRenameSave(task.id)}\r\n                className=\"flex-1 px-2 py-1 rounded border outline-none\"\r\n                style={{\r\n                  backgroundColor: theme.bgPrimary,\r\n                  borderColor: theme.accent,\r\n                  color: theme.textPrimary,\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  fontSize: '13px',\r\n                  fontWeight: 500,\r\n                }}\r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            ) : (\r\n              <>\r\n                <span\r\n                  className=\"flex-1\"\r\n                  style={{\r\n                    color: theme.textPrimary,\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    fontSize: level === 0 ? '14px' : level === 1 ? '13px' : '12px',\r\n                    // World-class hierarchy: Containers (with subtasks) have more weight\r\n                    fontWeight: task.isMilestone\r\n                      ? 600  // Milestones: Semibold (most important)\r\n                      : (task.subtasks && task.subtasks.length > 0)\r\n                      ? 500  // Containers: Medium (guide the eye)\r\n                      : 400,  // Regular tasks: Normal\r\n                    opacity: level === 0 ? 1 : level === 1 ? 0.95 : 0.88,\r\n                  }}\r\n                  title={task.name} // v0.13.8: Show full name on hover tooltip\r\n                >\r\n                  {task.name}\r\n                </span>\r\n\r\n                {/* Hover Action Buttons */}\r\n                {isHovered && !isEditing && (\r\n                  <div className=\"flex items-center gap-1 ml-2\" onClick={(e) => e.stopPropagation()}>\r\n                    {/* Create Subtask Button */}\r\n                    <button\r\n                      onClick={(e) => handleCreateSubtaskClick(task, e)}\r\n                      className=\"p-1 rounded hover:bg-opacity-20 transition-colors\"\r\n                      style={{\r\n                        color: theme.textTertiary,\r\n                        backgroundColor: 'transparent'\r\n                      }}\r\n                      title=\"Create subtask\"\r\n                    >\r\n                      <Plus className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n\r\n                    {/* Rename Button */}\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleRenameStart(task);\r\n                      }}\r\n                      className=\"p-1 rounded hover:bg-opacity-20 transition-colors\"\r\n                      style={{\r\n                        color: theme.textTertiary,\r\n                        backgroundColor: 'transparent'\r\n                      }}\r\n                      title=\"Rename (F2)\"\r\n                    >\r\n                      <Edit3 className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        );\r\n      \r\n      case 'startDate':\r\n        const startDateValue = task.startDate\r\n          ? typeof task.startDate === 'string'\r\n            ? task.startDate\r\n            : task.startDate.toISOString().split('T')[0]\r\n          : undefined;\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <input\r\n              type=\"date\"\r\n              value={startDateValue || ''}\r\n              onChange={(e) => {\r\n                onTaskUpdate?.(task.id, {\r\n                  startDate: e.target.value ? new Date(e.target.value) : undefined\r\n                });\r\n              }}\r\n              className=\"bg-transparent border-none text-xs cursor-pointer outline-none text-center\"\r\n              style={{\r\n                color: theme.textSecondary,\r\n                fontFamily: 'Inter, sans-serif',\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case 'endDate':\r\n        const endDateValue = task.endDate\r\n          ? typeof task.endDate === 'string'\r\n            ? task.endDate\r\n            : task.endDate.toISOString().split('T')[0]\r\n          : undefined;\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <input\r\n              type=\"date\"\r\n              value={endDateValue || ''}\r\n              onChange={(e) => {\r\n                onTaskUpdate?.(task.id, {\r\n                  endDate: e.target.value ? new Date(e.target.value) : undefined\r\n                });\r\n              }}\r\n              className=\"bg-transparent border-none text-xs cursor-pointer outline-none text-center\"\r\n              style={{\r\n                color: theme.textSecondary,\r\n                fontFamily: 'Inter, sans-serif',\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'duration':\r\n        return (\r\n          <div className=\"flex items-center justify-center w-full\">\r\n            <span\r\n              className=\"text-xs tabular-nums\"\r\n              style={{\r\n                color: theme.textSecondary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              {getDuration(task)}\r\n            </span>\r\n          </div>\r\n        );\r\n      \r\n      case 'assignees':\r\n        const taskAssignedUsers: User[] = availableUsers.filter(user =>\r\n          task.assignees?.some(a => a.name === user.name || a.initials === user.initials)\r\n        );\r\n\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <UserAssignmentSelector\r\n              assignedUsers={taskAssignedUsers}\r\n              availableUsers={availableUsers}\r\n              onChange={(users: User[]) => {\r\n                const newAssignees = users.map(u => ({\r\n                  id: u.id,\r\n                  name: u.name,\r\n                  initials: u.initials,\r\n                  color: u.color\r\n                }));\r\n                onTaskUpdate?.(task.id, {\r\n                  assignees: newAssignees.length > 0 ? newAssignees : undefined\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'status':\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <StatusSelector\r\n              status={task.status || 'todo'}\r\n              onChange={(status) => {\r\n                onTaskUpdate?.(task.id, {\r\n                  status,\r\n                  progress: status === 'completed' ? 100 : task.progress\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'progress':\r\n        return (\r\n          <div className=\"flex items-center justify-center gap-2 w-full\">\r\n            <div className=\"flex-1 h-1.5 rounded-full overflow-hidden max-w-[60px]\" style={{ backgroundColor: theme.bgSecondary }}>\r\n              <div\r\n                className=\"h-full rounded-full transition-all\"\r\n                style={{\r\n                  width: `${task.progress}%`,\r\n                  backgroundColor: task.progress === 100 ? theme.statusCompleted : theme.accent,\r\n                }}\r\n              />\r\n            </div>\r\n            <span\r\n              className=\"text-xs tabular-nums min-w-[35px] text-right\"\r\n              style={{\r\n                color: theme.textTertiary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              {task.progress}%\r\n            </span>\r\n          </div>\r\n        );\r\n      \r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Context menu items for header\r\n  const getHeaderContextMenuItems = (columnId: ColumnType): ContextMenuItem[] => {\r\n    return [\r\n      {\r\n        id: 'hide',\r\n        label: 'Hide Column',\r\n        icon: MenuIcons.Hide,\r\n        onClick: () => onToggleColumn(columnId),\r\n        disabled: columnId === 'name',\r\n      },\r\n      { id: 'sep1', label: '', onClick: () => {}, separator: true },\r\n      {\r\n        id: 'sortAsc',\r\n        label: 'Sort Ascending',\r\n        icon: MenuIcons.SortAsc,\r\n        onClick: () => {\r\n          // Implement sorting in parent component if needed\r\n        },\r\n      },\r\n      {\r\n        id: 'sortDesc',\r\n        label: 'Sort Descending',\r\n        icon: MenuIcons.SortDesc,\r\n        onClick: () => {\r\n          // Implement sorting in parent component if needed\r\n        },\r\n      },\r\n    ];\r\n  };\r\n\r\n  // v0.16.2: Context menu items for task row - unified with GanttBoard context menu\r\n  const getTaskContextMenuItems = (task: Task): ContextMenuItem[] => {\r\n    return [\r\n      // Edit Task - opens edit modal via double-click handler\r\n      {\r\n        id: 'edit',\r\n        label: translations?.contextMenu?.editTask || 'Edit Task',\r\n        icon: MenuIcons.Pencil,\r\n        onClick: () => {\r\n          onTaskDblClick?.(task);\r\n        },\r\n      },\r\n      // Add Subtask\r\n      {\r\n        id: 'addSubtask',\r\n        label: translations?.contextMenu?.addSubtask || 'Add Subtask',\r\n        icon: MenuIcons.Add,\r\n        onClick: () => {\r\n          onCreateSubtask?.(task.id);\r\n        },\r\n      },\r\n      // Separator before status changes\r\n      { id: 'sep1', label: '', onClick: () => {}, separator: true },\r\n      // Mark Incomplete (status: 'todo', progress: 0)\r\n      {\r\n        id: 'markIncomplete',\r\n        label: translations?.contextMenu?.markIncomplete || 'Mark Incomplete',\r\n        icon: MenuIcons.MarkIncomplete,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'todo', progress: 0 });\r\n        },\r\n        disabled: task.status === 'todo',\r\n      },\r\n      // Set In Progress (status: 'in-progress')\r\n      {\r\n        id: 'setInProgress',\r\n        label: translations?.contextMenu?.setInProgress || 'Set In Progress',\r\n        icon: MenuIcons.SetInProgress,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'in-progress' });\r\n        },\r\n        disabled: task.status === 'in-progress',\r\n      },\r\n      // Mark Complete (status: 'completed', progress: 100)\r\n      {\r\n        id: 'markComplete',\r\n        label: translations?.contextMenu?.markComplete || 'Mark Complete',\r\n        icon: MenuIcons.MarkComplete,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'completed', progress: 100 });\r\n        },\r\n        disabled: task.status === 'completed',\r\n      },\r\n      // Separator before advanced options\r\n      { id: 'sep2', label: '', onClick: () => {}, separator: true },\r\n      // Split Task\r\n      {\r\n        id: 'split',\r\n        label: translations?.contextMenu?.splitTask || 'Split Task',\r\n        icon: MenuIcons.Split,\r\n        onClick: () => {},\r\n        // Split task is only available via Timeline context menu (right-click on task bar)\r\n        disabled: true,\r\n      },\r\n      // Separator before delete\r\n      { id: 'sep3', label: '', onClick: () => {}, separator: true },\r\n      // Delete Task\r\n      {\r\n        id: 'delete',\r\n        label: translations?.contextMenu?.deleteTask || 'Delete Task',\r\n        icon: MenuIcons.Delete,\r\n        onClick: () => {\r\n          onMultiTaskDelete?.([task.id]);\r\n        },\r\n      },\r\n    ];\r\n  };\r\n\r\n  const visibleColumns = columns.filter(col => col.visible);\r\n\r\n  // v0.13.10: TaskGrid no longer has its own scroll - it syncs with Timeline scroll\r\n  return (\r\n    <div\r\n      className=\"h-full overflow-hidden\"\r\n      style={{\r\n        backgroundColor: theme.bgPrimary,\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div\r\n        className=\"sticky top-0 z-10 flex items-center\"\r\n        style={{\r\n          backgroundColor: theme.bgGrid,\r\n          height: `${HEADER_HEIGHT}px`,\r\n          paddingLeft: '3px', // Alinear con el borderLeft de las filas\r\n          borderBottom: `1px solid ${theme.border}`,\r\n          boxSizing: 'border-box', // Border included in height\r\n        }}\r\n      >\r\n        {visibleColumns.map((column, colIndex) => (\r\n          <div\r\n            key={column.id}\r\n            className={`flex items-center px-4 cursor-pointer hover:bg-opacity-50 transition-colors relative ${\r\n              column.id === 'name' ? 'justify-start' : 'justify-center'\r\n            }`}\r\n            style={{\r\n              width: `${column.width}px`,\r\n              minWidth: `${column.width}px`,\r\n              maxWidth: `${column.width}px`,\r\n              // Only add border-right between columns, not on the last one (GanttBoard container has the divider)\r\n              borderRight: colIndex < visibleColumns.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n              height: '100%',\r\n              boxSizing: 'border-box',\r\n            }}\r\n            onContextMenu={(e) => {\r\n              e.preventDefault();\r\n              setContextMenu({\r\n                isOpen: true,\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                type: 'header',\r\n                columnId: column.id,\r\n              });\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent';\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-xs uppercase tracking-wider\"\r\n              style={{\r\n                color: theme.textTertiary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              {column.label}\r\n            </span>\r\n\r\n            {/* v0.13.8: Resize handle for resizable columns */}\r\n            {column.resizable && (\r\n              <div\r\n                className=\"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 transition-colors group\"\r\n                style={{\r\n                  backgroundColor: resizingColumn === column.id ? theme.accent : 'transparent',\r\n                }}\r\n                onMouseDown={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  setResizingColumn(column.id);\r\n                  setResizeStartX(e.clientX);\r\n                  setResizeStartWidth(column.width);\r\n                }}\r\n                title=\"Drag to resize column\"\r\n              >\r\n                {/* Visual indicator line on hover */}\r\n                <div\r\n                  className=\"absolute right-0 top-2 bottom-2 w-0.5 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                  style={{ backgroundColor: theme.accent }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Add Column Button - v0.17.23: Sticky to prevent overlap when resizing columns */}\r\n        <div\r\n          className=\"px-3 flex items-center gap-2 h-full\"\r\n          style={{\r\n            position: 'sticky',\r\n            right: 0,\r\n            backgroundColor: theme.bgGrid,\r\n            zIndex: 15,\r\n            flexShrink: 0,\r\n          }}\r\n        >\r\n          <ColumnManager\r\n            columns={columns}\r\n            onToggleColumn={onToggleColumn}\r\n            theme={theme}\r\n          />\r\n\r\n          {/* Keyboard Shortcuts Button */}\r\n          <button\r\n            onClick={() => setShowKeyboardHelp(!showKeyboardHelp)}\r\n            className=\"p-1.5 rounded hover:bg-opacity-10 transition-colors relative group\"\r\n            style={{ color: theme.textTertiary }}\r\n            title=\"Keyboard shortcuts\"\r\n          >\r\n            <Keyboard className=\"w-4 h-4\" />\r\n\r\n            {/* Tooltip */}\r\n            {showKeyboardHelp && (\r\n              <div\r\n                ref={keyboardHelpRef}\r\n                className=\"absolute top-full right-0 mt-2 p-4 rounded-lg shadow-2xl z-50 min-w-[400px]\"\r\n                style={{\r\n                  backgroundColor: theme.bgPrimary,\r\n                  border: `1px solid ${theme.border}`,\r\n                  color: theme.textPrimary,\r\n                }}\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-3 pb-2 border-b\" style={{ borderColor: theme.border }}>\r\n                  <h3 className=\"font-semibold text-sm\" style={{ color: theme.textPrimary }}>\r\n                    Keyboard Shortcuts\r\n                  </h3>\r\n                  <button\r\n                    onClick={() => setShowKeyboardHelp(false)}\r\n                    className=\"text-xs px-2 py-1 rounded hover:bg-opacity-10\"\r\n                    style={{ color: theme.textTertiary }}\r\n                  >\r\n                    Close\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-3 text-xs\">\r\n                  {/* Navigation */}\r\n                  <div>\r\n                    <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Navigation</div>\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Move focus up/down</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}> / </kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Select range</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift +  / </kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Toggle selection</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + Click</kbd>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Hierarchy */}\r\n                  <div>\r\n                    <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Hierarchy</div>\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Indent task</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Tab</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Outdent task</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift + Tab</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Expand/Collapse</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}> / </kbd>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Editing */}\r\n                  <div>\r\n                    <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Editing</div>\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Create task below</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Enter</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Create task above</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift + Enter</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Open task modal</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + Enter</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Rename task</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>F2</kbd>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <div>\r\n                    <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Actions</div>\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Move task up/down</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Alt +  / </kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Delete task</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Delete</kbd>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span style={{ color: theme.textTertiary }}>Duplicate task</span>\r\n                        <kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + D</kbd>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Task Rows Container - v0.13.11: This container is targeted by CSS transform for scroll sync */}\r\n      <div className=\"gantt-taskgrid-content\">\r\n      {flatTasks.map(({ task, level }, index) => {\r\n        const isSelected = isTaskSelected(task.id);\r\n\r\n        return (\r\n          <motion.div\r\n            key={task.id}\r\n            className=\"flex items-center cursor-pointer group\"\r\n            style={{\r\n              height: `${ROW_HEIGHT}px`,\r\n              borderLeft: isSelected ? `3px solid ${theme.accent}` : `3px solid transparent`,\r\n              backgroundColor: isSelected\r\n                ? theme.accentLight\r\n                : (index % 2 === 0 ? theme.bgPrimary : theme.bgGrid),\r\n            }}\r\n            onMouseEnter={() => setHoveredTaskId(task.id)}\r\n            onMouseLeave={() => setHoveredTaskId(null)}\r\n            onClick={(e) => {\r\n              const flatTasks = flattenTasksUtil(tasks);\r\n              const flatTaskIds = flatTasks.map(t => t.id);\r\n              const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n              const ctrlOrCmd = isMac ? e.metaKey : e.ctrlKey;\r\n\r\n              // Handle multi-selection\r\n              handleSelectionClick(task.id, flatTaskIds, ctrlOrCmd, e.shiftKey);\r\n\r\n              // Also trigger the regular click handler\r\n              onTaskClick?.(task);\r\n            }}\r\n            onDoubleClick={(e) => {\r\n              // v0.8.0: Double-click event\r\n              e.stopPropagation();\r\n              onTaskDblClick?.(task);\r\n            }}\r\n            onContextMenu={(e) => {\r\n              e.preventDefault();\r\n              setContextMenu({\r\n                isOpen: true,\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                type: 'task',\r\n                task,\r\n              });\r\n\r\n              // v0.8.0: Context menu event\r\n              onTaskContextMenu?.(task, e);\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: isSelected ? theme.accentLight : theme.hoverBg,\r\n            }}\r\n          >\r\n          {visibleColumns.map((column, colIndex) => (\r\n            <div\r\n              key={`${task.id}-${column.id}`}\r\n              className={`px-4 flex items-center ${\r\n                column.id === 'name' ? 'justify-start' : 'justify-center'\r\n              } ${colIndex < visibleColumns.length - 1 ? 'border-r' : ''}`}\r\n              style={{\r\n                width: `${column.width}px`,\r\n                minWidth: `${column.width}px`,\r\n                maxWidth: `${column.width}px`,\r\n                borderColor: hoveredTaskId === task.id ? theme.border : theme.borderLight,\r\n                height: '100%',\r\n                boxSizing: 'border-box',\r\n              }}\r\n            >\r\n              {renderCellContent(column, task, column.id === 'name' ? level : 0)}\r\n            </div>\r\n          ))}\r\n          </motion.div>\r\n        );\r\n      })}\r\n      </div>\r\n\r\n      {/* Context Menu */}\r\n      <ContextMenu\r\n        isOpen={contextMenu.isOpen}\r\n        x={contextMenu.x}\r\n        y={contextMenu.y}\r\n        items={\r\n          contextMenu.type === 'header' && contextMenu.columnId\r\n            ? getHeaderContextMenuItems(contextMenu.columnId)\r\n            : contextMenu.type === 'task' && contextMenu.task\r\n            ? getTaskContextMenuItems(contextMenu.task)\r\n            : []\r\n        }\r\n        onClose={() => setContextMenu({ ...contextMenu, isOpen: false })}\r\n        theme={theme}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * useDragState - Centralized drag state management\r\n * Manages all drag-related state in one place\r\n *\r\n * @version 0.8.1\r\n * @version 0.13.6 - Removed dragDaysDelta (direction-based colors removed)\r\n */\r\n\r\nimport { useState } from 'react';\r\n\r\nexport type DragMode = 'none' | 'move' | 'resize-start' | 'resize-end' | 'connect';\r\nexport type ActiveZone = 'move' | 'resize-start' | 'resize-end' | null;\r\n\r\nexport interface DragState {\r\n  // Drag mode\r\n  dragMode: DragMode;\r\n  setDragMode: (mode: DragMode) => void;\r\n\r\n  // Drag offset (distance from click to element origin)\r\n  dragOffset: number;\r\n  setDragOffset: (offset: number) => void;\r\n\r\n  // Ghost position (visual feedback during drag)\r\n  ghostX: number;\r\n  setGhostX: (x: number) => void;\r\n  ghostWidth: number;\r\n  setGhostWidth: (width: number) => void;\r\n\r\n  // Connection line\r\n  connectionLine: { x: number; y: number } | null;\r\n  setConnectionLine: (line: { x: number; y: number } | null) => void;\r\n\r\n  // Hovered task (for dependency creation)\r\n  hoveredTaskId: string | null;\r\n  setHoveredTaskId: (id: string | null) => void;\r\n\r\n  // Active zone (for visual feedback)\r\n  activeZone: ActiveZone;\r\n  setActiveZone: (zone: ActiveZone) => void;\r\n\r\n  // Split task specific state\r\n  draggedSegmentIndex: number | null;\r\n  setDraggedSegmentIndex: (index: number | null) => void;\r\n  draggedSegmentStartX: number;\r\n  setDraggedSegmentStartX: (x: number) => void;\r\n  segmentDragOffsetX: number;\r\n  setSegmentDragOffsetX: (offset: number) => void;\r\n\r\n  // Hover state\r\n  hoveredSegmentIndex: number | null;\r\n  setHoveredSegmentIndex: (index: number | null) => void;\r\n  isHovered: boolean;\r\n  setIsHovered: (hovered: boolean) => void;\r\n\r\n  // Computed state\r\n  isDragging: boolean;\r\n  isResizing: boolean;\r\n  isConnecting: boolean;\r\n\r\n  // Reset all drag state\r\n  resetDragState: (x: number, width: number) => void;\r\n}\r\n\r\nexport function useDragState(initialX: number, initialWidth: number): DragState {\r\n  const [dragMode, setDragMode] = useState<DragMode>('none');\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [ghostX, setGhostX] = useState(initialX);\r\n  const [ghostWidth, setGhostWidth] = useState(initialWidth);\r\n  const [connectionLine, setConnectionLine] = useState<{ x: number; y: number } | null>(null);\r\n  const [hoveredTaskId, setHoveredTaskId] = useState<string | null>(null);\r\n  const [activeZone, setActiveZone] = useState<ActiveZone>(null);\r\n\r\n  // Split task state\r\n  const [draggedSegmentIndex, setDraggedSegmentIndex] = useState<number | null>(null);\r\n  const [draggedSegmentStartX, setDraggedSegmentStartX] = useState(0);\r\n  const [segmentDragOffsetX, setSegmentDragOffsetX] = useState(0);\r\n  const [hoveredSegmentIndex, setHoveredSegmentIndex] = useState<number | null>(null);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  // Computed state\r\n  const isDragging = dragMode !== 'none';\r\n  const isResizing = dragMode === 'resize-start' || dragMode === 'resize-end';\r\n  const isConnecting = dragMode === 'connect';\r\n\r\n  // Reset all state to initial values\r\n  const resetDragState = (x: number, width: number) => {\r\n    setDragMode('none');\r\n    setConnectionLine(null);\r\n    setHoveredTaskId(null);\r\n    setGhostX(x);\r\n    setGhostWidth(width);\r\n    setSegmentDragOffsetX(0);\r\n    setDraggedSegmentIndex(null);\r\n    setDraggedSegmentStartX(0);\r\n  };\r\n\r\n  return {\r\n    dragMode,\r\n    setDragMode,\r\n    dragOffset,\r\n    setDragOffset,\r\n    ghostX,\r\n    setGhostX,\r\n    ghostWidth,\r\n    setGhostWidth,\r\n    connectionLine,\r\n    setConnectionLine,\r\n    hoveredTaskId,\r\n    setHoveredTaskId,\r\n    activeZone,\r\n    setActiveZone,\r\n    draggedSegmentIndex,\r\n    setDraggedSegmentIndex,\r\n    draggedSegmentStartX,\r\n    setDraggedSegmentStartX,\r\n    segmentDragOffsetX,\r\n    setSegmentDragOffsetX,\r\n    hoveredSegmentIndex,\r\n    setHoveredSegmentIndex,\r\n    isHovered,\r\n    setIsHovered,\r\n    isDragging,\r\n    isResizing,\r\n    isConnecting,\r\n    resetDragState,\r\n  };\r\n}\r\n","import { useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Task, GanttTemplates } from './types';\nimport { TaskPosition } from './Timeline';\nimport { useDragState } from './hooks/useDragState';\n\ninterface TaskBarProps {\n  task: Task;\n  x: number;\n  y: number;\n  width: number;\n  theme: any;\n  dayWidth: number;\n  startDate: Date;\n  templates: Required<GanttTemplates>; // v0.8.0\n  onClick?: (task: Task) => void;\n  onDoubleClick?: (task: Task) => void; // v0.8.0\n  onContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\n  onDateChange?: (task: Task, newStart: Date, newEnd: Date) => void;\n  onDependencyCreate?: (fromTask: Task, toTaskId: string) => void;\n  allTaskPositions?: TaskPosition[];\n  // v0.13.0: Callback for dependency cascade preview during drag\n  onDragMove?: (taskId: string, daysDelta: number, isDragging: boolean) => void;\n}\n\ntype DragMode = 'none' | 'move' | 'resize-start' | 'resize-end' | 'connect';\n\nexport function TaskBar({\n  task,\n  x,\n  y,\n  width,\n  theme,\n  dayWidth,\n  startDate,\n  templates,\n  onClick,\n  onDoubleClick, // v0.8.0\n  onContextMenu, // v0.8.0\n  onDateChange,\n  onDependencyCreate,\n  allTaskPositions = [],\n  onDragMove, // v0.13.0\n}: TaskBarProps) {\n  // v0.8.1: Centralized drag state management for better modularity\n  const dragState = useDragState(x, width);\n  const svgRef = useRef<SVGGElement>(null);\n\n  // Destructure for easier access (keeps existing code readable)\n  const {\n    dragMode, setDragMode,\n    dragOffset, setDragOffset,\n    ghostX, setGhostX,\n    ghostWidth, setGhostWidth,\n    connectionLine, setConnectionLine,\n    hoveredTaskId, setHoveredTaskId,\n    activeZone, setActiveZone,\n    draggedSegmentIndex, setDraggedSegmentIndex,\n    draggedSegmentStartX, setDraggedSegmentStartX,\n    segmentDragOffsetX, setSegmentDragOffsetX,\n    hoveredSegmentIndex, setHoveredSegmentIndex,\n    isHovered, setIsHovered,\n    isDragging, isResizing, isConnecting,\n    resetDragState\n  } = dragState;\n\n  const height = 32;\n  const borderRadius = 8;\n\n  // Detect task states for neutral theme visualization\n  const isOverdue = task.endDate && task.endDate < new Date() && task.progress < 100;\n  const isAtRisk = task.isCriticalPath;  // Critical path tasks are \"at risk\"\n  const isNeutralTheme = theme.name === 'neutral' || theme.today === '#1C1917';  // Detect neutral theme\n\n  // Dynamic resize zones based on bar width for better UX\n  const getResizeZone = (barWidth: number): number => {\n    if (barWidth >= 80) return 20;      // Large bars: 20px zones\n    if (barWidth >= 60) return 15;      // Medium bars: 15px zones\n    if (barWidth >= 50) return 12;      // Small bars: 12px zones\n    return 10;                          // Very small bars: 10px zones\n  };\n\n  const RESIZE_ZONE = getResizeZone(width);\n  const isSmallBar = width < 50;          // Flag for special handling\n  const isVerySmallBar = width < 40;      // Flag for ultra-small bars (simplified UX)\n\n  // Format date for tooltip\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  // Calculate duration\n  const getDuration = () => {\n    const days = Math.ceil((task.endDate!.getTime() - task.startDate!.getTime()) / (1000 * 60 * 60 * 24));\n    return `${days} day${days !== 1 ? 's' : ''}`;\n  };\n\n  // Snap position to nearest day\n  const snapToDay = (pixelX: number): number => {\n    const dayOffset = Math.round(pixelX / dayWidth) * dayWidth;\n    return dayOffset;\n  };\n\n  // Convert pixel position to date\n  const pixelToDate = (pixelX: number): Date => {\n    const days = Math.round(pixelX / dayWidth);\n    const newDate = new Date(startDate);\n    newDate.setDate(newDate.getDate() + days);\n    return newDate;\n  };\n\n  // Check if point is inside a task's bounding box\n  const findTaskAtPoint = (pointX: number, pointY: number): string | null => {\n    for (const taskPos of allTaskPositions) {\n      // Skip current task\n      if (taskPos.id === task.id) continue;\n\n      // Check if point is within task bounds (with some padding for easier targeting)\n      const padding = 5;\n      if (\n        pointX >= taskPos.x - padding &&\n        pointX <= taskPos.x + taskPos.width + padding &&\n        pointY >= taskPos.y - padding &&\n        pointY <= taskPos.y + taskPos.height + padding\n      ) {\n        return taskPos.id;\n      }\n    }\n    return null;\n  };\n\n  // TODO: Implement dynamic cursor styling based on mouse position\n  // Determine cursor based on position\n  // const getCursorStyle = (mouseX: number): string => {\n  //   if (dragMode !== 'none') {\n  //     if (dragMode === 'connect') return 'crosshair';\n  //     if (dragMode === 'resize-start' || dragMode === 'resize-end') return 'ew-resize';\n  //     if (dragMode === 'move') return 'grabbing';\n  //   }\n  //   const relativeX = mouseX - x;\n  //   // Resize zones at edges\n  //   if (relativeX <= RESIZE_ZONE) return 'ew-resize';\n  //   if (relativeX >= width - RESIZE_ZONE) return 'ew-resize';\n  //   // Move zone in the middle\n  //   return 'grab';\n  // };\n\n  // Handle mouse down for dragging\n  // v0.8.1: Added segmentX parameter for split tasks - allows segments to calculate their own offset\n  const handleMouseDown = useCallback((e: React.MouseEvent, mode?: DragMode, segmentX?: number) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const svgElement = svgRef.current?.ownerSVGElement;\n    if (!svgElement) return;\n\n    const point = svgElement.createSVGPoint();\n    point.x = e.clientX;\n    point.y = e.clientY;\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\n\n    // v0.8.1: Use segment position if provided (for split tasks), otherwise use global x\n    const effectiveX = segmentX !== undefined ? segmentX : x;\n\n    // Determine mode based on click position if not specified\n    let actualMode = mode;\n    if (!actualMode) {\n      const relativeX = svgPoint.x - effectiveX;\n\n      // Keyboard modifiers for forced modes\n      if (e.shiftKey) {\n        // SHIFT: Connection mode\n        actualMode = 'connect';\n        setConnectionLine({ x: x + width, y: y + height / 2 });\n      } else if (e.ctrlKey || e.metaKey) {\n        // CTRL/CMD: Force MOVE (useful for small bars)\n        actualMode = 'move';\n      } else if (e.altKey) {\n        // ALT: Force RESIZE based on which half of bar is clicked\n        actualMode = relativeX < width / 2 ? 'resize-start' : 'resize-end';\n      }\n      // Auto-detection based on position (adaptive based on bar size)\n      else if (isVerySmallBar) {\n        // Very small bars (<40px): Simple split - left half = move, right half = resize\n        if (relativeX < width / 2) {\n          actualMode = 'move';\n        } else {\n          actualMode = 'resize-end';  // Always resize from end for consistency\n        }\n      } else if (isSmallBar) {\n        // Small bars (40-50px): Only resize if clicking very close to edges\n        if (relativeX <= RESIZE_ZONE / 2) {\n          actualMode = 'resize-start';\n        } else if (relativeX >= width - RESIZE_ZONE / 2) {\n          actualMode = 'resize-end';\n        } else {\n          actualMode = 'move';  // Default to move for small bars\n        }\n      } else {\n        // Normal bars: Standard zone detection\n        if (relativeX <= RESIZE_ZONE) {\n          actualMode = 'resize-start';\n        } else if (relativeX >= width - RESIZE_ZONE) {\n          actualMode = 'resize-end';\n        } else {\n          actualMode = 'move';\n        }\n      }\n    }\n\n    setDragMode(actualMode);\n    setIsHovered(false); // Hide all tooltips when dragging starts\n    setActiveZone(null); // Clear active zone\n\n    if (actualMode === 'move') {\n      // v0.8.1: Use effectiveX (segment position for split tasks, global x otherwise)\n      setDragOffset(svgPoint.x - effectiveX);\n    } else if (actualMode === 'connect') {\n      setConnectionLine({ x: x + width, y: y + height / 2 });\n    } else {\n      setDragOffset(0);\n    }\n\n    setGhostX(effectiveX);\n    setGhostWidth(width);\n  }, [x, width, y, height]);\n\n  // Handle mouse move for dragging\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    if (dragMode === 'none') return;\n\n    const svgElement = svgRef.current?.ownerSVGElement;\n    if (!svgElement) return;\n\n    const point = svgElement.createSVGPoint();\n    point.x = e.clientX;\n    point.y = e.clientY;\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\n\n    if (dragMode === 'connect') {\n      // Update connection line end point\n      setConnectionLine({ x: svgPoint.x, y: svgPoint.y });\n\n      // Check if hovering over another task\n      const targetTaskId = findTaskAtPoint(svgPoint.x, svgPoint.y);\n      setHoveredTaskId(targetTaskId);\n    } else if (dragMode === 'move') {\n      // Move entire bar (or all segments if split task)\n      const rawNewX = svgPoint.x - dragOffset;\n      const snappedX = snapToDay(rawNewX);\n      setGhostX(snappedX);\n      setGhostWidth(width);\n\n      // v0.13.0: Calculate days delta and notify for cascade preview\n      const daysDelta = Math.round((snappedX - x) / dayWidth);\n      onDragMove?.(task.id, daysDelta, true);\n\n      // v0.8.1: For split tasks, calculate offset relative to the DRAGGED SEGMENT position\n      if (task.segments && task.segments.length > 0 && draggedSegmentIndex !== null) {\n        const segmentOffset = snappedX - draggedSegmentStartX; // Use saved segment position\n        setSegmentDragOffsetX(segmentOffset);\n      }\n    } else if (dragMode === 'resize-start') {\n      // Resize from start\n      const rawNewStart = svgPoint.x;\n      const snappedStart = snapToDay(rawNewStart);\n      const newWidth = (x + width) - snappedStart;\n\n      // Prevent negative or too small width (minimum 1 day)\n      if (newWidth >= dayWidth) {\n        setGhostX(snappedStart);\n        setGhostWidth(newWidth);\n      }\n    } else if (dragMode === 'resize-end') {\n      // Resize from end\n      const rawNewEnd = svgPoint.x;\n      const snappedEnd = snapToDay(rawNewEnd);\n      const newWidth = snappedEnd - x;\n\n      // Prevent negative or too small width (minimum 1 day)\n      if (newWidth >= dayWidth) {\n        setGhostWidth(newWidth);\n      }\n    }\n  }, [dragMode, x, width, dayWidth, dragOffset, task, snapToDay, draggedSegmentIndex, draggedSegmentStartX, findTaskAtPoint, setHoveredTaskId, setConnectionLine, setGhostX, setGhostWidth, setSegmentDragOffsetX, onDragMove]);\n\n  // Handle mouse up to finish dragging\n  const handleMouseUp = useCallback(() => {\n    if (dragMode === 'none') return;\n\n    if (dragMode === 'connect') {\n      // Create dependency if hovering over a valid task\n      if (hoveredTaskId && onDependencyCreate) {\n        onDependencyCreate(task, hoveredTaskId);\n      }\n      setConnectionLine(null);\n      setHoveredTaskId(null);\n    } else {\n      const taskDuration = task.endDate!.getTime() - task.startDate!.getTime();\n      let newStartDate: Date;\n      let newEndDate: Date;\n      let isValid = true;\n\n      if (dragMode === 'move') {\n        // Calculate new dates maintaining duration\n        newStartDate = pixelToDate(ghostX);\n        newEndDate = new Date(newStartDate.getTime() + taskDuration);\n\n        // v0.8.1: Bryntum-style - Update ONLY the dragged segment (independent movement)\n        if (task.segments && task.segments.length > 0 && draggedSegmentIndex !== null) {\n          const dayOffset = Math.round(segmentDragOffsetX / dayWidth);\n          const updatedSegments = task.segments.map((seg, idx) => {\n            // Only update the segment that was dragged\n            if (idx === draggedSegmentIndex) {\n              const newSegStart = new Date(seg.startDate);\n              const newSegEnd = new Date(seg.endDate);\n              newSegStart.setDate(newSegStart.getDate() + dayOffset);\n              newSegEnd.setDate(newSegEnd.getDate() + dayOffset);\n              return { startDate: newSegStart, endDate: newSegEnd };\n            }\n            // Keep other segments unchanged\n            return seg;\n          });\n\n          // Calculate new overall task dates (from all segments)\n          const allDates = updatedSegments.flatMap(s => [s.startDate, s.endDate]);\n          const newTaskStart = new Date(Math.min(...allDates.map(d => d.getTime())));\n          const newTaskEnd = new Date(Math.max(...allDates.map(d => d.getTime())));\n\n          // Update task with new segments\n          onDateChange?.({ ...task, segments: updatedSegments }, newTaskStart, newTaskEnd);\n          // v0.8.1: Use centralized reset function from useDragState hook\n          resetDragState(x, width);\n          return; // Exit early since we handled the update\n        }\n      } else if (dragMode === 'resize-start') {\n        // Change start date, keep end date\n        newStartDate = pixelToDate(ghostX);\n        newEndDate = task.endDate!;\n\n        // Validate: start date must be before end date\n        if (newStartDate >= newEndDate) {\n          console.warn('Invalid date range: start date must be before end date');\n          isValid = false;\n        }\n      } else if (dragMode === 'resize-end') {\n        // Change end date, keep start date\n        newStartDate = task.startDate!;\n        newEndDate = pixelToDate(ghostX + ghostWidth);\n\n        // Validate: end date must be after start date\n        if (newEndDate <= newStartDate) {\n          console.warn('Invalid date range: end date must be after start date');\n          isValid = false;\n        }\n      } else {\n        // Shouldn't reach here, but handle gracefully\n        isValid = false;\n      }\n\n      // Only update if valid\n      if (isValid && newStartDate! && newEndDate!) {\n        // Additional validation: minimum task duration of 1 day\n        const minDuration = 24 * 60 * 60 * 1000; // 1 day in milliseconds\n        if (newEndDate.getTime() - newStartDate.getTime() < minDuration) {\n          console.warn('Invalid date range: task must be at least 1 day long');\n          // Reset to original dates by not calling onDateChange\n        } else {\n          onDateChange?.(task, newStartDate, newEndDate);\n        }\n      }\n    }\n\n    // v0.13.0: Notify drag ended to clear cascade previews\n    onDragMove?.(task.id, 0, false);\n\n    // v0.8.1: Use centralized reset function from useDragState hook\n    resetDragState(x, width);\n  }, [dragMode, ghostX, ghostWidth, task, onDateChange, hoveredTaskId, onDependencyCreate, x, width, dayWidth, pixelToDate, segmentDragOffsetX, draggedSegmentIndex, resetDragState, onDragMove]);\n\n  // Setup global mouse listeners for smooth dragging\n  useEffect(() => {\n    if (dragMode === 'none') return;\n\n    const handleGlobalMouseMove = (e: MouseEvent) => {\n      handleMouseMove(e);\n    };\n\n    const handleGlobalMouseUp = () => {\n      handleMouseUp();\n    };\n\n    window.addEventListener('mousemove', handleGlobalMouseMove);\n    window.addEventListener('mouseup', handleGlobalMouseUp);\n\n    return () => {\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\n    };\n  }, [dragMode, handleMouseMove, handleMouseUp]);\n\n  // v0.8.1: isDragging, isResizing, isConnecting now provided by useDragState hook\n  const displayX = isDragging && !isConnecting ? ghostX : x;\n  const displayWidth = isDragging && !isConnecting ? ghostWidth : width;\n\n  // v0.8.0: Generate tooltip and custom class using templates\n  const tooltipContent = templates.taskTooltip(task);\n  const tooltipText = typeof tooltipContent === 'string' ? tooltipContent : '';\n  const customClass = templates.taskClass(task);\n\n  return (\n    <g\n      ref={svgRef}\n      onMouseEnter={() => !isDragging && setIsHovered(true)}\n      onMouseLeave={() => {\n        if (!isDragging) {\n          setIsHovered(false);\n          setActiveZone(null);\n        }\n      }}\n      onClick={() => !isDragging && onClick?.(task)}\n      onDoubleClick={(e) => {\n        // v0.8.0: Double-click event\n        if (!isDragging) {\n          e.stopPropagation();\n          onDoubleClick?.(task);\n        }\n      }}\n      onContextMenu={(e) => {\n        // v0.8.0: Context menu event\n        e.preventDefault();\n        onContextMenu?.(task, e as any);\n      }}\n    >\n      {/* v0.8.0: Tooltip using taskTooltip template */}\n      {tooltipText && <title dangerouslySetInnerHTML={{ __html: tooltipText }} />}\n      {/* Zone Indicators with hover feedback - v0.8.1: Disabled for split tasks (segments are independent) */}\n      {isHovered && !isDragging && !isSmallBar && !task.segments && (\n        <>\n          {/* Left resize zone with subtle highlight on hover */}\n          <rect\n            x={x}\n            y={y}\n            width={RESIZE_ZONE}\n            height={height}\n            fill={activeZone === 'resize-start' ? theme.accent : 'transparent'}\n            opacity={activeZone === 'resize-start' ? 0.15 : 0}\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\n            onMouseEnter={() => setActiveZone('resize-start')}\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-start')}\n          />\n          {/* Center move zone */}\n          <rect\n            x={x + RESIZE_ZONE}\n            y={y}\n            width={width - RESIZE_ZONE * 2}\n            height={height}\n            fill={activeZone === 'move' ? theme.accent : 'transparent'}\n            opacity={activeZone === 'move' ? 0.1 : 0}\n            style={{ cursor: 'grab', pointerEvents: 'all' }}\n            onMouseEnter={() => setActiveZone('move')}\n            onMouseDown={(e) => handleMouseDown(e as any, 'move')}\n          />\n          {/* Right resize zone with subtle highlight on hover */}\n          <rect\n            x={x + width - RESIZE_ZONE}\n            y={y}\n            width={RESIZE_ZONE}\n            height={height}\n            fill={activeZone === 'resize-end' ? theme.accent : 'transparent'}\n            opacity={activeZone === 'resize-end' ? 0.15 : 0}\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\n            onMouseEnter={() => setActiveZone('resize-end')}\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-end')}\n          />\n        </>\n      )}\n\n      {/* Simplified zones for very small bars (split in half) */}\n      {isHovered && !isDragging && isVerySmallBar && (\n        <>\n          {/* Left half - MOVE zone */}\n          <rect\n            x={x}\n            y={y}\n            width={width / 2}\n            height={height}\n            fill={activeZone === 'move' ? theme.accent : 'transparent'}\n            opacity={activeZone === 'move' ? 0.2 : 0}\n            style={{ cursor: 'grab', pointerEvents: 'all' }}\n            onMouseEnter={() => setActiveZone('move')}\n            onMouseDown={(e) => handleMouseDown(e as any, 'move')}\n          />\n          {/* Right half - RESIZE zone */}\n          <rect\n            x={x + width / 2}\n            y={y}\n            width={width / 2}\n            height={height}\n            fill={activeZone === 'resize-end' ? theme.accent : 'transparent'}\n            opacity={activeZone === 'resize-end' ? 0.2 : 0}\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\n            onMouseEnter={() => setActiveZone('resize-end')}\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-end')}\n          />\n          {/* Visual divider line at center */}\n          {isHovered && (\n            <motion.line\n              x1={x + width / 2}\n              y1={y + 4}\n              x2={x + width / 2}\n              y2={y + height - 4}\n              stroke={theme.textTertiary}\n              strokeWidth={1}\n              strokeDasharray=\"2 2\"\n              opacity={0.3}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 0.3 }}\n              transition={{ duration: 0.2 }}\n              style={{ pointerEvents: 'none' }}\n            />\n          )}\n        </>\n      )}\n\n      {/* Ghost/Preview Bar (shown while dragging) */}\n      {/* v0.8.1: Hide ghost bar for split tasks - segments handle their own visualization */}\n      {/* v0.13.6: Simplified ghost bar - uses theme accent color */}\n      {isDragging && !isConnecting && !task.segments && (\n        <motion.rect\n          x={ghostX}\n          y={y}\n          width={ghostWidth}\n          height={height}\n          rx={borderRadius}\n          fill={theme.accent}\n          opacity={0.5}\n          stroke={theme.accent}\n          strokeWidth={2}\n          strokeDasharray=\"4 4\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 0.6 }}\n          transition={{ duration: 0.15 }}\n          style={{ pointerEvents: 'none' }}\n        />\n      )}\n\n      {/* Main Task Bar - Background (light for contrast with progress) - v0.8.0: With custom class */}\n      {/* v0.8.1: Hide main bar when task has segments (split task) */}\n      {/* v0.11.0: Custom task colors with parent/subtask opacity */}\n      {/* v0.13.6: Overdue tasks (past due + not completed) also shown in red */}\n      {!task.segments && (\n        <motion.rect\n          x={displayX}\n          y={y}\n          width={displayWidth}\n          height={height}\n          rx={borderRadius}\n          fill={\n            task.isCriticalPath || isOverdue\n              ? '#DC2626' // Critical path or overdue = red\n              : task.color\n              ? task.color // v0.11.0: Custom color\n              : theme.taskBarPrimary // Fallback to theme\n          }\n          data-task-class={customClass}\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{\n            opacity: isDragging && !isConnecting\n              ? 0.15\n              : task.parentId\n              ? 0.6 // v0.11.0: Subtasks more transparent (60%)\n              : isHovered\n              ? 0.9 // Parent tasks more opaque on hover\n              : 0.8, // Parent tasks base opacity (80%)\n            scale: isHovered && !isDragging ? 1.02 : 1,\n          }}\n          transition={{\n            duration: 0.2,\n            ease: [0.4, 0, 0.2, 1],\n          }}\n          onMouseDown={(e) => handleMouseDown(e as any)}\n          style={{\n            cursor: isDragging ? (isConnecting ? 'crosshair' : isResizing ? 'ew-resize' : 'grabbing') : 'grab',\n            pointerEvents: 'all'\n          }}\n        />\n      )}\n\n      {/* Progress Fill - Solid color for instant visual scanning */}\n      {/* Eye processes shape/color faster than text */}\n      {/* v0.11.0: Use custom task color for progress fill */}\n      {/* v0.13.6: Overdue tasks also shown in red */}\n      {!task.segments && (\n        <rect\n          x={displayX}\n          y={y}\n          width={displayWidth * (task.progress / 100)}\n          height={height}\n          rx={borderRadius}\n          fill={\n            task.isCriticalPath || isOverdue\n              ? '#DC2626' // Critical path or overdue = red\n              : task.color\n              ? task.color // v0.11.0: Custom color\n              : theme.taskBarProgress // Fallback to theme\n          }\n          opacity={1}\n          style={{ pointerEvents: 'none' }}\n        />\n      )}\n\n      {/* v0.8.1: Render segments if task is split (has gaps) - Bryntum-style independent segments */}\n      {task.segments && task.segments.map((segment, idx) => {\n        const segmentStartX = ((segment.startDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)) * dayWidth;\n        const segmentEndX = ((segment.endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)) * dayWidth;\n        const segmentWidth = segmentEndX - segmentStartX + dayWidth;\n\n        // v0.8.1: Only apply drag offset to the specific segment being dragged\n        const isThisSegmentDragging = isDragging && dragMode === 'move' && draggedSegmentIndex === idx;\n        const isThisSegmentHovered = hoveredSegmentIndex === idx;\n        const displaySegmentX = isThisSegmentDragging ? segmentStartX + segmentDragOffsetX : segmentStartX;\n\n        return (\n          <g\n            key={`segment-${idx}`}\n            onMouseEnter={() => !isDragging && setHoveredSegmentIndex(idx)}\n            onMouseLeave={() => !isDragging && setHoveredSegmentIndex(null)}\n          >\n            {/* Segment background - interactive */}\n            {/* v0.11.0: Custom task colors for segments */}\n            {/* v0.13.6: Overdue tasks also shown in red */}\n            <motion.rect\n              x={displaySegmentX}\n              y={y}\n              width={segmentWidth}\n              height={height}\n              rx={borderRadius}\n              fill={\n                task.isCriticalPath || isOverdue\n                  ? '#DC2626' // Critical path or overdue = red\n                  : task.color\n                  ? task.color // v0.11.0: Custom color\n                  : theme.taskBarPrimary // Fallback to theme\n              }\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{\n                opacity: isThisSegmentDragging\n                  ? 0.6\n                  : task.parentId\n                  ? 0.6 // v0.11.0: Subtask segments more transparent\n                  : isThisSegmentHovered\n                  ? 0.9\n                  : 0.8,\n                scale: isThisSegmentHovered && !isDragging ? 1.02 : 1,\n              }}\n              transition={{\n                duration: 0.2,\n                ease: [0.4, 0, 0.2, 1],\n              }}\n              onMouseDown={(e) => {\n                // v0.8.1: Capture which segment is being dragged and pass its position\n                e.stopPropagation();\n                setDraggedSegmentIndex(idx);\n                setDraggedSegmentStartX(segmentStartX); // Save original position for offset calculation\n                handleMouseDown(e as any, undefined, segmentStartX);\n              }}\n              style={{\n                cursor: isDragging ? (isConnecting ? 'crosshair' : isResizing ? 'ew-resize' : 'grabbing') : 'grab',\n                pointerEvents: 'all'\n              }}\n            />\n            {/* Segment progress - v0.11.0: Use custom task color */}\n            {/* v0.13.6: Overdue tasks also shown in red */}\n            <rect\n              x={displaySegmentX}\n              y={y}\n              width={segmentWidth * (task.progress / 100)}\n              height={height}\n              rx={borderRadius}\n              fill={\n                task.isCriticalPath || isOverdue\n                  ? '#DC2626' // Critical path or overdue = red\n                  : task.color\n                  ? task.color // v0.11.0: Custom color\n                  : theme.taskBarProgress // Fallback to theme\n              }\n              opacity={1}\n              style={{ pointerEvents: 'none' }}\n            />\n          </g>\n        );\n      })}\n\n      {/* Neutral Theme: State visualization without color */}\n      {/* v0.8.1: Hide state visualization for split tasks (shown on segments instead) */}\n      {isNeutralTheme && (isOverdue || isAtRisk) && !task.segments && (\n        <>\n          {/* At Risk: Dotted border */}\n          {isAtRisk && !isOverdue && (\n            <rect\n              x={displayX}\n              y={y}\n              width={displayWidth}\n              height={height}\n              rx={borderRadius}\n              fill=\"none\"\n              stroke={theme.border}\n              strokeWidth={2}\n              strokeDasharray=\"4 4\"\n              opacity={0.8}\n              style={{ pointerEvents: 'none' }}\n            />\n          )}\n\n          {/* Overdue: Diagonal stripes pattern */}\n          {isOverdue && (\n            <rect\n              x={displayX}\n              y={y}\n              width={displayWidth}\n              height={height}\n              rx={borderRadius}\n              fill=\"url(#diagonal-stripes)\"\n              opacity={0.3}\n              style={{ pointerEvents: 'none' }}\n            />\n          )}\n        </>\n      )}\n\n      {/* Task Name Text - v0.8.0: Using taskLabel template */}\n      {/* v0.8.1: Hide text for split tasks to avoid blocking segment clicks */}\n      {displayWidth > 60 && !task.segments && (() => {\n        const label = templates.taskLabel(task);\n        const labelText = typeof label === 'string' ? label : task.name;\n        const truncated = labelText.length > Math.floor(displayWidth / 8)\n          ? `${labelText.substring(0, Math.floor(displayWidth / 8))}...`\n          : labelText;\n\n        return (\n          <text\n            x={displayX + 12}\n            y={y + height / 2}\n            dominantBaseline=\"middle\"\n            fill=\"#FFFFFF\"\n            fontSize=\"13\"\n            fontWeight=\"500\"\n            fontFamily=\"Inter, sans-serif\"\n            style={{ pointerEvents: 'none', userSelect: 'none' }}\n          >\n            {truncated}\n          </text>\n        );\n      })()}\n\n      {/* Progress Percentage */}\n      {/* v0.8.1: Hide progress text for split tasks to avoid blocking segment clicks */}\n      {displayWidth > 100 && task.progress > 0 && task.progress < 100 && !isDragging && !task.segments && (\n        <text\n          x={displayX + displayWidth - 12}\n          y={y + height / 2}\n          dominantBaseline=\"middle\"\n          textAnchor=\"end\"\n          fill=\"rgba(255, 255, 255, 0.9)\"\n          fontSize=\"11\"\n          fontWeight=\"600\"\n          fontFamily=\"Inter, sans-serif\"\n          style={{ pointerEvents: 'none', userSelect: 'none' }}\n        >\n          {task.progress}%\n        </text>\n      )}\n\n      {/* Status Indicator Badge */}\n      {/* v0.8.1: Hide status badge for split tasks to avoid blocking segment clicks */}\n      {task.status && displayWidth > 80 && !isDragging && !task.segments && (\n        <g style={{ pointerEvents: 'none' }}>\n          {task.status === 'completed' && (\n            <circle\n              cx={displayX + displayWidth - 8}\n              cy={y + 8}\n              r={4}\n              fill={theme.statusCompleted}\n              stroke=\"#FFFFFF\"\n              strokeWidth={1.5}\n            />\n          )}\n          {task.status === 'in-progress' && (\n            <circle\n              cx={displayX + displayWidth - 8}\n              cy={y + 8}\n              r={4}\n              fill={theme.statusInProgress}\n              stroke=\"#FFFFFF\"\n              strokeWidth={1.5}\n              opacity={0.8}\n            />\n          )}\n        </g>\n      )}\n\n      {/* Enhanced Resize Handles (larger, easier to grab) */}\n      {/* v0.8.1: Hide resize handles for split tasks */}\n      {(isHovered || isResizing) && !isConnecting && !task.segments && (\n        <>\n          {/* Start Handle - Adaptive positioning for small bars */}\n          <g style={{ pointerEvents: 'all' }}>\n            {/* Invisible larger hit area */}\n            <rect\n              x={isSmallBar ? displayX - 15 : displayX - 10}\n              y={y - 5}\n              width={isSmallBar ? 25 : 20}\n              height={height + 10}\n              fill=\"transparent\"\n              onMouseDown={(e) => handleMouseDown(e as any, 'resize-start')}\n              style={{ cursor: 'ew-resize' }}\n            />\n            {/* Visual indicator - positioned outside for small bars */}\n            <motion.rect\n              x={isSmallBar ? displayX - 8 : displayX - 3}\n              y={y + 6}\n              width={isSmallBar ? 8 : 6}\n              height={isSmallBar ? height - 12 : height - 16}\n              rx={3}\n              fill={dragMode === 'resize-start' ? theme.accent : theme.taskBarHandle}\n              stroke={theme.taskBarPrimary}\n              strokeWidth={1.5}\n              initial={{ opacity: 0, scale: 0 }}\n              animate={{\n                opacity: 1,\n                scale: dragMode === 'resize-start' ? 1.2 : 1\n              }}\n              transition={{\n                duration: 0.2,\n                type: 'spring',\n                stiffness: 400,\n                damping: 25,\n              }}\n              style={{ pointerEvents: 'none' }}\n            />\n          </g>\n\n          {/* End Handle - Adaptive positioning for small bars */}\n          <g style={{ pointerEvents: 'all' }}>\n            {/* Invisible larger hit area */}\n            <rect\n              x={isSmallBar ? displayX + displayWidth - 10 : displayX + displayWidth - 10}\n              y={y - 5}\n              width={isSmallBar ? 25 : 20}\n              height={height + 10}\n              fill=\"transparent\"\n              onMouseDown={(e) => handleMouseDown(e as any, 'resize-end')}\n              style={{ cursor: 'ew-resize' }}\n            />\n            {/* Visual indicator - positioned outside for small bars */}\n            <motion.rect\n              x={isSmallBar ? displayX + displayWidth : displayX + displayWidth - 3}\n              y={y + 6}\n              width={isSmallBar ? 8 : 6}\n              height={isSmallBar ? height - 12 : height - 16}\n              rx={3}\n              fill={dragMode === 'resize-end' ? theme.accent : theme.taskBarHandle}\n              stroke={theme.taskBarPrimary}\n              strokeWidth={1.5}\n              initial={{ opacity: 0, scale: 0 }}\n              animate={{\n                opacity: 1,\n                scale: dragMode === 'resize-end' ? 1.2 : 1\n              }}\n              transition={{\n                duration: 0.2,\n                type: 'spring',\n                stiffness: 400,\n                damping: 25,\n              }}\n              style={{ pointerEvents: 'none' }}\n            />\n          </g>\n        </>\n      )}\n\n      {/* Connection Handle (right side, Shift+Click) - v0.8.1: Disabled for split tasks (segments are independent) */}\n      <AnimatePresence>\n        {isHovered && !isDragging && !task.segments && (\n          <motion.g\n            style={{ pointerEvents: 'all' }}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.15 }}\n          >\n            <motion.circle\n              cx={x + width + 8}\n              cy={y + height / 2}\n              r={6}\n              fill={theme.accent}\n              stroke=\"#FFFFFF\"\n              strokeWidth={2}\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              exit={{ scale: 0 }}\n              transition={{\n                duration: 0.2,\n                type: 'spring',\n                stiffness: 400,\n                damping: 25,\n              }}\n              onMouseDown={(e) => {\n                e.stopPropagation();\n                handleMouseDown(e as any, 'connect');\n              }}\n              style={{ cursor: 'crosshair' }}\n            />\n            {/* Tooltip hint */}\n            <text\n              x={x + width + 20}\n              y={y + height / 2}\n              dominantBaseline=\"middle\"\n              fill={theme.textTertiary}\n              fontSize=\"10\"\n              fontFamily=\"Inter, sans-serif\"\n              style={{ pointerEvents: 'none', userSelect: 'none' }}\n            >\n              Link\n            </text>\n          </motion.g>\n        )}\n      </AnimatePresence>\n\n      {/* Connection Line (while connecting) */}\n      {isConnecting && connectionLine && (\n        <g style={{ pointerEvents: 'none' }}>\n          <motion.line\n            x1={x + width}\n            y1={y + height / 2}\n            x2={connectionLine.x}\n            y2={connectionLine.y}\n            stroke={hoveredTaskId ? theme.statusCompleted : theme.accent}\n            strokeWidth={hoveredTaskId ? 3 : 2}\n            strokeDasharray=\"6 4\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: hoveredTaskId ? 1 : 0.8 }}\n            transition={{ duration: 0.15 }}\n          />\n          <motion.circle\n            cx={connectionLine.x}\n            cy={connectionLine.y}\n            r={hoveredTaskId ? 8 : 6}\n            fill={hoveredTaskId ? theme.statusCompleted : theme.accent}\n            stroke=\"#FFFFFF\"\n            strokeWidth={2}\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ duration: 0.15 }}\n          />\n          {/* Hover indicator text */}\n          {hoveredTaskId && (\n            <motion.text\n              x={connectionLine.x + 15}\n              y={connectionLine.y}\n              dominantBaseline=\"middle\"\n              fill={theme.statusCompleted}\n              fontSize=\"11\"\n              fontWeight=\"600\"\n              fontFamily=\"Inter, sans-serif\"\n              initial={{ opacity: 0, x: connectionLine.x + 10 }}\n              animate={{ opacity: 1, x: connectionLine.x + 15 }}\n              transition={{ duration: 0.2 }}\n            >\n              Connect\n            </motion.text>\n          )}\n        </g>\n      )}\n\n      {/* Hover Glow Effect - v0.8.1: Disabled for split tasks (segments are independent) */}\n      {(isHovered || isDragging) && !isConnecting && !task.segments && (\n        <motion.rect\n          x={displayX - 2}\n          y={y - 2}\n          width={displayWidth + 4}\n          height={height + 4}\n          rx={borderRadius + 2}\n          fill=\"none\"\n          stroke={isDragging ? theme.accent : theme.taskBarPrimary}\n          strokeWidth={2}\n          opacity={isDragging ? 0.6 : 0.4}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isDragging ? 0.6 : 0.4 }}\n          transition={{ duration: 0.2 }}\n          style={{ pointerEvents: 'none' }}\n        />\n      )}\n\n      {/* Vertical Snap Guides (shown while resizing) */}\n      {isResizing && (\n        <>\n          <line\n            x1={ghostX}\n            y1={0}\n            x2={ghostX}\n            y2={1000}\n            stroke={theme.accent}\n            strokeWidth={1}\n            strokeDasharray=\"4 4\"\n            opacity={0.3}\n            style={{ pointerEvents: 'none' }}\n          />\n          <line\n            x1={ghostX + ghostWidth}\n            y1={0}\n            x2={ghostX + ghostWidth}\n            y2={1000}\n            stroke={theme.accent}\n            strokeWidth={1}\n            strokeDasharray=\"4 4\"\n            opacity={0.3}\n            style={{ pointerEvents: 'none' }}\n          />\n        </>\n      )}\n\n      {/* Enhanced Detailed Tooltip (shown on hover, hidden while dragging) - v0.8.1: Disabled for split tasks (segments are independent) */}\n      <AnimatePresence>\n        {isHovered && !isDragging && !task.segments && (\n          <motion.g\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 10 }}\n            transition={{ duration: 0.2 }}\n            style={{ pointerEvents: 'none' }}\n          >\n            {/* Tooltip Background */}\n            <rect\n              x={displayX + displayWidth / 2 - 120}\n              y={y - 95}\n              width={240}\n              height={82}\n              rx={8}\n              fill={theme.bgSecondary}\n              stroke={theme.border}\n              strokeWidth={1}\n              filter=\"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15))\"\n            />\n\n            {/* Tooltip Arrow */}\n            <path\n              d={`M ${displayX + displayWidth / 2 - 6} ${y - 13} L ${displayX + displayWidth / 2} ${y - 3} L ${displayX + displayWidth / 2 + 6} ${y - 13}`}\n              fill={theme.bgSecondary}\n              stroke={theme.border}\n              strokeWidth={1}\n            />\n\n            {/* Task Name */}\n            <text\n              x={displayX + displayWidth / 2}\n              y={y - 73}\n              textAnchor=\"middle\"\n              fill={theme.textPrimary}\n              fontSize=\"13\"\n              fontWeight=\"600\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              {task.name.length > 28 ? `${task.name.substring(0, 28)}...` : task.name}\n            </text>\n\n            {/* Dates */}\n            <text\n              x={displayX + displayWidth / 2 - 110}\n              y={y - 55}\n              fill={theme.textTertiary}\n              fontSize=\"11\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              Start:\n            </text>\n            <text\n              x={displayX + displayWidth / 2 - 70}\n              y={y - 55}\n              fill={theme.textSecondary}\n              fontSize=\"11\"\n              fontWeight=\"500\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              {formatDate(task.startDate!)}\n            </text>\n\n            <text\n              x={displayX + displayWidth / 2 - 110}\n              y={y - 40}\n              fill={theme.textTertiary}\n              fontSize=\"11\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              End:\n            </text>\n            <text\n              x={displayX + displayWidth / 2 - 70}\n              y={y - 40}\n              fill={theme.textSecondary}\n              fontSize=\"11\"\n              fontWeight=\"500\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              {formatDate(task.endDate!)}\n            </text>\n\n            {/* Duration */}\n            <text\n              x={displayX + displayWidth / 2 + 10}\n              y={y - 55}\n              fill={theme.textTertiary}\n              fontSize=\"11\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              Duration:\n            </text>\n            <text\n              x={displayX + displayWidth / 2 + 65}\n              y={y - 55}\n              fill={theme.textSecondary}\n              fontSize=\"11\"\n              fontWeight=\"500\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              {getDuration()}\n            </text>\n\n            {/* Progress */}\n            <text\n              x={displayX + displayWidth / 2 + 10}\n              y={y - 40}\n              fill={theme.textTertiary}\n              fontSize=\"11\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              Progress:\n            </text>\n            <text\n              x={displayX + displayWidth / 2 + 65}\n              y={y - 40}\n              fill={theme.textSecondary}\n              fontSize=\"11\"\n              fontWeight=\"500\"\n              fontFamily=\"Inter, sans-serif\"\n            >\n              {task.progress}%\n            </text>\n\n            {/* Assignees */}\n            {task.assignees && task.assignees.length > 0 && (\n              <>\n                <text\n                  x={displayX + displayWidth / 2 - 110}\n                  y={y - 25}\n                  fill={theme.textTertiary}\n                  fontSize=\"11\"\n                  fontFamily=\"Inter, sans-serif\"\n                >\n                  Assignees:\n                </text>\n                <text\n                  x={displayX + displayWidth / 2 - 50}\n                  y={y - 25}\n                  fill={theme.textSecondary}\n                  fontSize=\"11\"\n                  fontWeight=\"500\"\n                  fontFamily=\"Inter, sans-serif\"\n                >\n                  {task.assignees.map(a => a.name).join(', ').substring(0, 30)}\n                  {task.assignees.map(a => a.name).join(', ').length > 30 ? '...' : ''}\n                </text>\n              </>\n            )}\n\n            {/* Interaction Hints - Adaptive for bar size */}\n            <text\n              x={displayX + displayWidth / 2}\n              y={y - 18}\n              textAnchor=\"middle\"\n              fill={theme.textTertiary}\n              fontSize=\"9\"\n              fontFamily=\"Inter, sans-serif\"\n              style={{ opacity: 0.7 }}\n            >\n              {isVerySmallBar\n                ? 'Left: move  Right: resize'\n                : isSmallBar\n                ? 'Drag to move  Hold ALT + drag edge to resize'\n                : 'Drag edges to resize  Drag center to move  Click  to link'\n              }\n            </text>\n          </motion.g>\n        )}\n      </AnimatePresence>\n    </g>\n  );\n}\n","import { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface DependencyLineProps {\r\n  x1: number;\r\n  y1: number;\r\n  x2: number;\r\n  y2: number;\r\n  theme: any;\r\n  onDelete?: () => void;\r\n}\r\n\r\nexport function DependencyLine({ x1, y1, x2, y2, theme, onDelete }: DependencyLineProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  // Calculate control points for smooth Bzier curve\r\n  const dx = x2 - x1;\r\n  const dy = y2 - y1;\r\n  const midX = x1 + dx / 2;\r\n  \r\n  // Create elegant S-curve path\r\n  const path = `M ${x1} ${y1} C ${midX} ${y1}, ${midX} ${y2}, ${x2} ${y2}`;\r\n\r\n  // Arrow marker at the end\r\n  const arrowSize = 6;\r\n  const angle = Math.atan2(dy, dx);\r\n  const arrowX = x2 - arrowSize * Math.cos(angle - Math.PI / 6);\r\n  const arrowY = y2 - arrowSize * Math.sin(angle - Math.PI / 6);\r\n  const arrowX2 = x2 - arrowSize * Math.cos(angle + Math.PI / 6);\r\n  const arrowY2 = y2 - arrowSize * Math.sin(angle + Math.PI / 6);\r\n\r\n  // Dependencies are always gray - critical path only affects TASK BARS, not dependency lines\r\n  const lineColor = theme.dependency;\r\n\r\n  return (\r\n    <g\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n    >\r\n      {/* Invisible wider path for easier hover detection */}\r\n      <path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke=\"transparent\"\r\n        strokeWidth={20}\r\n        strokeLinecap=\"round\"\r\n        style={{ cursor: 'pointer' }}\r\n      />\r\n\r\n      {/* Main dependency line */}\r\n      <motion.path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke={lineColor}\r\n        strokeWidth={2}\r\n        strokeLinecap=\"round\"\r\n        initial={{ pathLength: 0, opacity: 0 }}\r\n        animate={{\r\n          pathLength: 1,\r\n          opacity: isHovered ? 1 : 0.6,\r\n          strokeWidth: isHovered ? 2.5 : 2,\r\n        }}\r\n        transition={{\r\n          pathLength: { duration: 0.5, ease: 'easeInOut' },\r\n          opacity: { duration: 0.2 },\r\n          strokeWidth: { duration: 0.2 },\r\n        }}\r\n      />\r\n\r\n      {/* Arrow head */}\r\n      <motion.path\r\n        d={`M ${x2} ${y2} L ${arrowX} ${arrowY} M ${x2} ${y2} L ${arrowX2} ${arrowY2}`}\r\n        fill=\"none\"\r\n        stroke={lineColor}\r\n        strokeWidth={2}\r\n        strokeLinecap=\"round\"\r\n        initial={{ opacity: 0, scale: 0.8 }}\r\n        animate={{\r\n          opacity: isHovered ? 1 : 0.6,\r\n          scale: isHovered ? 1.1 : 1,\r\n          strokeWidth: isHovered ? 2.5 : 2,\r\n        }}\r\n        transition={{ duration: 0.2 }}\r\n      />\r\n\r\n      {/* Endpoint dot */}\r\n      <motion.circle\r\n        cx={x2}\r\n        cy={y2}\r\n        r={3}\r\n        fill={lineColor}\r\n        initial={{ scale: 0 }}\r\n        animate={{\r\n          scale: isHovered ? 1.33 : 1,\r\n        }}\r\n        transition={{\r\n          scale: { delay: 0.3, duration: 0.2 },\r\n        }}\r\n      />\r\n\r\n      {/* Delete button (appears on hover) */}\r\n      {isHovered && onDelete && (\r\n        <motion.g\r\n          initial={{ opacity: 0, scale: 0 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ duration: 0.2 }}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onDelete();\r\n          }}\r\n          style={{ cursor: 'pointer' }}\r\n        >\r\n          {/* Position delete button at midpoint of the line */}\r\n          <circle\r\n            cx={midX}\r\n            cy={(y1 + y2) / 2}\r\n            r={10}\r\n            fill={theme.bgSecondary}\r\n            stroke={theme.error || '#ef4444'}\r\n            strokeWidth={2}\r\n          />\r\n          {/* X icon */}\r\n          <line\r\n            x1={midX - 4}\r\n            y1={(y1 + y2) / 2 - 4}\r\n            x2={midX + 4}\r\n            y2={(y1 + y2) / 2 + 4}\r\n            stroke={theme.error || '#ef4444'}\r\n            strokeWidth={2}\r\n            strokeLinecap=\"round\"\r\n          />\r\n          <line\r\n            x1={midX + 4}\r\n            y1={(y1 + y2) / 2 - 4}\r\n            x2={midX - 4}\r\n            y2={(y1 + y2) / 2 + 4}\r\n            stroke={theme.error || '#ef4444'}\r\n            strokeWidth={2}\r\n            strokeLinecap=\"round\"\r\n          />\r\n        </motion.g>\r\n      )}\r\n    </g>\r\n  );\r\n}","import { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task } from './types';\r\n\r\ninterface MilestoneProps {\r\n  task: Task;\r\n  x: number;\r\n  y: number;\r\n  theme: any;\r\n  onClick?: (task: Task) => void;\r\n}\r\n\r\nexport function Milestone({ task, x, y, theme, onClick }: MilestoneProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const size = 16;\r\n\r\n  // Format date for tooltip\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      onClick={() => onClick?.(task)}\r\n      style={{ cursor: 'pointer' }}\r\n    >\r\n      {/* Critical Path Glow (if applicable) */}\r\n      {task.isCriticalPath && (\r\n        <motion.circle\r\n          cx={x}\r\n          cy={y + 16}\r\n          r={size + 4}\r\n          fill={theme.criticalPathLight}\r\n          initial={{ scale: 0 }}\r\n          animate={{ scale: isHovered ? 1.2 : 1 }}\r\n          transition={{ duration: 0.3 }}\r\n        />\r\n      )}\r\n\r\n      {/* Diamond Shape (rotated square) */}\r\n      <motion.rect\r\n        x={x - size / 2}\r\n        y={y + 16 - size / 2}\r\n        width={size}\r\n        height={size}\r\n        fill={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n        stroke={theme.bgGrid}\r\n        strokeWidth={2}\r\n        transform={`rotate(45 ${x} ${y + 16})`}\r\n        initial={{ scale: 0, rotate: 0 }}\r\n        animate={{\r\n          scale: isHovered ? 1.15 : 1,\r\n          rotate: 45,\r\n        }}\r\n        transition={{\r\n          duration: 0.3,\r\n          type: 'spring',\r\n          stiffness: 300,\r\n          damping: 20,\r\n        }}\r\n      />\r\n\r\n      {/* Hover Effect - Outer Ring */}\r\n      {isHovered && (\r\n        <motion.rect\r\n          x={x - (size + 4) / 2}\r\n          y={y + 16 - (size + 4) / 2}\r\n          width={size + 4}\r\n          height={size + 4}\r\n          fill=\"none\"\r\n          stroke={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n          strokeWidth={2}\r\n          opacity={0.5}\r\n          transform={`rotate(45 ${x} ${y + 16})`}\r\n          initial={{ scale: 0.8, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 0.5 }}\r\n          transition={{ duration: 0.2 }}\r\n        />\r\n      )}\r\n\r\n      {/* Enhanced Tooltip */}\r\n      <AnimatePresence>\r\n        {isHovered && (\r\n          <motion.g\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 10 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {/* Tooltip Background */}\r\n            <rect\r\n              x={x - 80}\r\n              y={y - 50}\r\n              width={160}\r\n              height={44}\r\n              rx={8}\r\n              fill={theme.bgSecondary}\r\n              stroke={theme.border}\r\n              strokeWidth={1}\r\n              filter=\"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15))\"\r\n            />\r\n\r\n            {/* Tooltip Arrow */}\r\n            <path\r\n              d={`M ${x - 6} ${y - 6} L ${x} ${y + 4} L ${x + 6} ${y - 6}`}\r\n              fill={theme.bgSecondary}\r\n              stroke={theme.border}\r\n              strokeWidth={1}\r\n            />\r\n\r\n            {/* Milestone Icon in Tooltip */}\r\n            <rect\r\n              x={x - 70}\r\n              y={y - 38}\r\n              width={8}\r\n              height={8}\r\n              fill={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n              transform={`rotate(45 ${x - 66} ${y - 34})`}\r\n            />\r\n\r\n            {/* Task Name */}\r\n            <text\r\n              x={x - 55}\r\n              y={y - 32}\r\n              fill={theme.textPrimary}\r\n              fontSize=\"12\"\r\n              fontWeight=\"600\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              {task.name.length > 18 ? `${task.name.substring(0, 18)}...` : task.name}\r\n            </text>\r\n\r\n            {/* Date */}\r\n            <text\r\n              x={x - 55}\r\n              y={y - 18}\r\n              fill={theme.textTertiary}\r\n              fontSize=\"10\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              {formatDate(task.startDate!)}\r\n            </text>\r\n\r\n            {/* Critical Path Badge */}\r\n            {task.isCriticalPath && (\r\n              <g>\r\n                <rect\r\n                  x={x + 10}\r\n                  y={y - 40}\r\n                  width={60}\r\n                  height={16}\r\n                  rx={4}\r\n                  fill={theme.criticalPathLight}\r\n                />\r\n                <text\r\n                  x={x + 40}\r\n                  y={y - 30}\r\n                  textAnchor=\"middle\"\r\n                  fill={theme.criticalPath}\r\n                  fontSize=\"9\"\r\n                  fontWeight=\"700\"\r\n                  fontFamily=\"Inter, sans-serif\"\r\n                  letterSpacing=\"0.5\"\r\n                >\r\n                  CRITICAL\r\n                </text>\r\n              </g>\r\n            )}\r\n          </motion.g>\r\n        )}\r\n      </AnimatePresence>\r\n    </g>\r\n  );\r\n}","import { Task, TaskSegment } from './types';\r\n\r\n/**\r\n * Public utility functions for Gantt operations\r\n * Similar to DHTMLX gantt.* utility methods\r\n */\r\nexport const ganttUtils = {\r\n  /**\r\n   * Calculate end date based on start date and duration in days\r\n   * @param start - Start date\r\n   * @param durationDays - Duration in days\r\n   * @returns End date\r\n   */\r\n  calculateEndDate: (start: Date, durationDays: number): Date => {\r\n    const end = new Date(start);\r\n    end.setDate(end.getDate() + durationDays);\r\n    return end;\r\n  },\r\n\r\n  /**\r\n   * Calculate duration in days between two dates\r\n   * @param start - Start date\r\n   * @param end - End date\r\n   * @returns Duration in days (rounded up)\r\n   */\r\n  calculateDuration: (start: Date, end: Date): number => {\r\n    const diffMs = end.getTime() - start.getTime();\r\n    return Math.ceil(diffMs / (1000 * 60 * 60 * 24));\r\n  },\r\n\r\n  /**\r\n   * Calculate working days between two dates (excluding weekends)\r\n   * @param start - Start date\r\n   * @param end - End date\r\n   * @returns Number of working days\r\n   */\r\n  calculateWorkingDays: (start: Date, end: Date): number => {\r\n    let count = 0;\r\n    const current = new Date(start);\r\n\r\n    while (current <= end) {\r\n      const dayOfWeek = current.getDay();\r\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) { // Not Sunday (0) or Saturday (6)\r\n        count++;\r\n      }\r\n      current.setDate(current.getDate() + 1);\r\n    }\r\n\r\n    return count;\r\n  },\r\n\r\n  /**\r\n   * Add working days to a date (excluding weekends)\r\n   * @param start - Start date\r\n   * @param workingDays - Number of working days to add\r\n   * @returns End date\r\n   */\r\n  addWorkingDays: (start: Date, workingDays: number): Date => {\r\n    const result = new Date(start);\r\n    let daysAdded = 0;\r\n\r\n    while (daysAdded < workingDays) {\r\n      result.setDate(result.getDate() + 1);\r\n      const dayOfWeek = result.getDay();\r\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) {\r\n        daysAdded++;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n  /**\r\n   * Check if a date is a weekend\r\n   * @param date - Date to check\r\n   * @returns True if weekend\r\n   */\r\n  isWeekend: (date: Date): boolean => {\r\n    const dayOfWeek = date.getDay();\r\n    return dayOfWeek === 0 || dayOfWeek === 6;\r\n  },\r\n\r\n  /**\r\n   * Validate if creating a dependency would create a circular reference\r\n   * Uses Depth-First Search (DFS) algorithm\r\n   * @param tasks - All tasks\r\n   * @param fromTaskId - Source task ID\r\n   * @param toTaskId - Target task ID\r\n   * @returns True if would create circular dependency\r\n   */\r\n  validateDependencies: (tasks: Task[], fromTaskId: string, toTaskId: string): boolean => {\r\n    // Build dependency map\r\n    const dependencyMap = new Map<string, string[]>();\r\n\r\n    const buildMap = (taskList: Task[]) => {\r\n      taskList.forEach(task => {\r\n        if (task.dependencies) {\r\n          dependencyMap.set(task.id, task.dependencies);\r\n        }\r\n        if (task.subtasks) {\r\n          buildMap(task.subtasks);\r\n        }\r\n      });\r\n    };\r\n\r\n    buildMap(tasks);\r\n\r\n    // Simulate adding the new dependency\r\n    const existingDeps = dependencyMap.get(toTaskId) || [];\r\n    dependencyMap.set(toTaskId, [...existingDeps, fromTaskId]);\r\n\r\n    // DFS to detect cycle\r\n    const visited = new Set<string>();\r\n    const recStack = new Set<string>();\r\n\r\n    const hasCycle = (taskId: string): boolean => {\r\n      if (!visited.has(taskId)) {\r\n        visited.add(taskId);\r\n        recStack.add(taskId);\r\n\r\n        const deps = dependencyMap.get(taskId) || [];\r\n        for (const depId of deps) {\r\n          if (!visited.has(depId) && hasCycle(depId)) {\r\n            return true;\r\n          } else if (recStack.has(depId)) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      recStack.delete(taskId);\r\n      return false;\r\n    };\r\n\r\n    return hasCycle(toTaskId);\r\n  },\r\n\r\n  /**\r\n   * Flatten nested tasks into a single array\r\n   * @param tasks - Tasks with potential subtasks\r\n   * @returns Flat array of all tasks\r\n   */\r\n  flattenTasks: (tasks: Task[]): Task[] => {\r\n    const result: Task[] = [];\r\n\r\n    const flatten = (taskList: Task[]) => {\r\n      taskList.forEach(task => {\r\n        result.push(task);\r\n        if (task.subtasks && task.subtasks.length > 0) {\r\n          flatten(task.subtasks);\r\n        }\r\n      });\r\n    };\r\n\r\n    flatten(tasks);\r\n    return result;\r\n  },\r\n\r\n  /**\r\n   * Find a task by ID in nested structure\r\n   * @param tasks - Tasks to search\r\n   * @param taskId - ID to find\r\n   * @returns Task if found, undefined otherwise\r\n   */\r\n  findTaskById: (tasks: Task[], taskId: string): Task | undefined => {\r\n    for (const task of tasks) {\r\n      if (task.id === taskId) {\r\n        return task;\r\n      }\r\n      if (task.subtasks) {\r\n        const found = ganttUtils.findTaskById(task.subtasks, taskId);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return undefined;\r\n  },\r\n\r\n  /**\r\n   * Get all parent tasks recursively\r\n   * @param tasks - All tasks\r\n   * @param taskId - Child task ID\r\n   * @returns Array of parent tasks\r\n   */\r\n  getParentTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const parents: Task[] = [];\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n\r\n    if (!task || !task.parentId) return parents;\r\n\r\n    let currentId: string | undefined = task.parentId;\r\n    while (currentId) {\r\n      const parent = ganttUtils.findTaskById(tasks, currentId);\r\n      if (parent) {\r\n        parents.unshift(parent);\r\n        currentId = parent.parentId;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return parents;\r\n  },\r\n\r\n  /**\r\n   * Export tasks to JSON string\r\n   * @param tasks - Tasks to export\r\n   * @returns JSON string\r\n   */\r\n  exportToJSON: (tasks: Task[]): string => {\r\n    return JSON.stringify(tasks, null, 2);\r\n  },\r\n\r\n  /**\r\n   * Import tasks from JSON string\r\n   * @param json - JSON string\r\n   * @returns Parsed tasks\r\n   */\r\n  importFromJSON: (json: string): Task[] => {\r\n    try {\r\n      const parsed = JSON.parse(json);\r\n\r\n      // Validate it's an array\r\n      if (!Array.isArray(parsed)) {\r\n        throw new Error('Invalid JSON: expected an array of tasks');\r\n      }\r\n\r\n      // Basic validation of task structure\r\n      parsed.forEach((task, index) => {\r\n        if (!task.id || !task.name) {\r\n          throw new Error(`Invalid task at index ${index}: missing required fields (id, name)`);\r\n        }\r\n      });\r\n\r\n      return parsed;\r\n    } catch (error) {\r\n      throw new Error(`Failed to import tasks: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Export tasks to CSV format\r\n   * @param tasks - Tasks to export\r\n   * @returns CSV string\r\n   */\r\n  exportToCSV: (tasks: Task[]): string => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // CSV Headers\r\n    const headers = ['ID', 'Name', 'Start Date', 'End Date', 'Progress', 'Status', 'Dependencies'];\r\n    const rows: string[] = [headers.join(',')];\r\n\r\n    // CSV Data\r\n    flat.forEach(task => {\r\n      const row = [\r\n        task.id,\r\n        `\"${task.name.replace(/\"/g, '\"\"')}\"`, // Escape quotes in name\r\n        task.startDate ? task.startDate.toISOString().split('T')[0] : '',\r\n        task.endDate ? task.endDate.toISOString().split('T')[0] : '',\r\n        task.progress.toString(),\r\n        task.status || '',\r\n        task.dependencies?.join(';') || '',\r\n      ];\r\n      rows.push(row.join(','));\r\n    });\r\n\r\n    return rows.join('\\n');\r\n  },\r\n\r\n  /**\r\n   * Format date to string (YYYY-MM-DD)\r\n   * @param date - Date to format\r\n   * @returns Formatted string\r\n   */\r\n  formatDate: (date: Date): string => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  },\r\n\r\n  /**\r\n   * Parse date from string (YYYY-MM-DD)\r\n   * @param dateString - Date string\r\n   * @returns Parsed Date\r\n   */\r\n  parseDate: (dateString: string): Date => {\r\n    return new Date(dateString);\r\n  },\r\n\r\n  /**\r\n   * Get date range for a task\r\n   * @param task - Task to get range for\r\n   * @returns Object with start and end dates, or null if no dates\r\n   */\r\n  getTaskDateRange: (task: Task): { start: Date; end: Date } | null => {\r\n    if (!task.startDate || !task.endDate) return null;\r\n    return {\r\n      start: task.startDate,\r\n      end: task.endDate,\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Get the earliest start date from tasks\r\n   * @param tasks - Tasks to search\r\n   * @returns Earliest date or null\r\n   */\r\n  getEarliestStartDate: (tasks: Task[]): Date | null => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.startDate);\r\n\r\n    if (tasksWithDates.length === 0) return null;\r\n\r\n    return new Date(Math.min(...tasksWithDates.map(t => t.startDate!.getTime())));\r\n  },\r\n\r\n  /**\r\n   * Get the latest end date from tasks\r\n   * @param tasks - Tasks to search\r\n   * @returns Latest date or null\r\n   */\r\n  getLatestEndDate: (tasks: Task[]): Date | null => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.endDate);\r\n\r\n    if (tasksWithDates.length === 0) return null;\r\n\r\n    return new Date(Math.max(...tasksWithDates.map(t => t.endDate!.getTime())));\r\n  },\r\n\r\n  /**\r\n   * Check if two tasks overlap in time\r\n   * @param task1 - First task\r\n   * @param task2 - Second task\r\n   * @returns True if tasks overlap\r\n   */\r\n  tasksOverlap: (task1: Task, task2: Task): boolean => {\r\n    if (!task1.startDate || !task1.endDate || !task2.startDate || !task2.endDate) {\r\n      return false;\r\n    }\r\n\r\n    return task1.startDate <= task2.endDate && task2.startDate <= task1.endDate;\r\n  },\r\n\r\n  /**\r\n   * Get all tasks that depend on a given task (children in dependency tree)\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to find dependents for\r\n   * @returns Array of tasks that depend on this task\r\n   */\r\n  getDependentTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    return flat.filter(task =>\r\n      task.dependencies && task.dependencies.includes(taskId)\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Get all tasks that a given task depends on (parents in dependency tree)\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to find dependencies for\r\n   * @returns Array of tasks this task depends on\r\n   */\r\n  getDependencyTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.dependencies) return [];\r\n\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    return flat.filter(t => task.dependencies!.includes(t.id));\r\n  },\r\n\r\n  /**\r\n   * Filter tasks by status\r\n   * @param tasks - Tasks to filter\r\n   * @param status - Status to filter by\r\n   * @returns Filtered tasks\r\n   */\r\n  filterByStatus: (tasks: Task[], status: 'todo' | 'in-progress' | 'completed'): Task[] => {\r\n    return ganttUtils.flattenTasks(tasks).filter(t => t.status === status);\r\n  },\r\n\r\n  /**\r\n   * Filter tasks by date range\r\n   * @param tasks - Tasks to filter\r\n   * @param startDate - Range start\r\n   * @param endDate - Range end\r\n   * @returns Tasks that fall within the date range\r\n   */\r\n  filterByDateRange: (tasks: Task[], startDate: Date, endDate: Date): Task[] => {\r\n    return ganttUtils.flattenTasks(tasks).filter(task => {\r\n      if (!task.startDate || !task.endDate) return false;\r\n      return task.startDate <= endDate && task.endDate >= startDate;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by start date\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByStartDate: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      if (!a.startDate || !b.startDate) return 0;\r\n      const diff = a.startDate.getTime() - b.startDate.getTime();\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by end date\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByEndDate: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      if (!a.endDate || !b.endDate) return 0;\r\n      const diff = a.endDate.getTime() - b.endDate.getTime();\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by progress\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByProgress: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      const diff = a.progress - b.progress;\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Calculate total progress across all tasks\r\n   * @param tasks - Tasks to calculate\r\n   * @returns Average progress percentage\r\n   */\r\n  calculateTotalProgress: (tasks: Task[]): number => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    if (flat.length === 0) return 0;\r\n\r\n    const total = flat.reduce((sum, task) => sum + task.progress, 0);\r\n    return Math.round(total / flat.length);\r\n  },\r\n\r\n  /**\r\n   * Get task by path (array of indices in nested structure)\r\n   * @param tasks - Root tasks\r\n   * @param path - Array of indices [0, 2, 1] means tasks[0].subtasks[2].subtasks[1]\r\n   * @returns Task at path or undefined\r\n   */\r\n  getTaskByPath: (tasks: Task[], path: number[]): Task | undefined => {\r\n    let current: Task[] = tasks;\r\n    let task: Task | undefined;\r\n\r\n    for (let i = 0; i < path.length; i++) {\r\n      const index = path[i];\r\n      if (!current || index === undefined || index >= current.length) return undefined;\r\n\r\n      task = current[index];\r\n      if (!task) return undefined;\r\n\r\n      if (i < path.length - 1) {\r\n        current = task.subtasks || [];\r\n      }\r\n    }\r\n\r\n    return task;\r\n  },\r\n\r\n  /**\r\n   * Clone a task deeply (including subtasks)\r\n   * @param task - Task to clone\r\n   * @param newId - Optional new ID for the clone\r\n   * @returns Cloned task\r\n   */\r\n  cloneTask: (task: Task, newId?: string): Task => {\r\n    return {\r\n      ...task,\r\n      id: newId || `${task.id}-copy`,\r\n      subtasks: task.subtasks?.map(st => ganttUtils.cloneTask(st)),\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Export tasks to PDF format\r\n   * @param tasks - Tasks to export\r\n   * @param filename - Optional filename (default: 'gantt-chart.pdf')\r\n   * @returns Promise<void>\r\n   */\r\n  exportToPDF: async (tasks: Task[], filename = 'gantt-chart.pdf'): Promise<void> => {\r\n    try {\r\n      if (!tasks || tasks.length === 0) {\r\n        alert('No tasks available to export to PDF');\r\n        return;\r\n      }\r\n\r\n      // v0.8.1: FIXED - Use correct jspdf-autotable v5.0 API\r\n      const { jsPDF } = await import('jspdf');\r\n      const { default: autoTable } = await import('jspdf-autotable');\r\n\r\n      const doc = new jsPDF();\r\n      const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n      if (flat.length === 0) {\r\n        alert('No tasks found to export');\r\n        return;\r\n      }\r\n\r\n      // Title\r\n      doc.setFontSize(16);\r\n      doc.text('Gantt Chart - Task List', 14, 20);\r\n\r\n      // Table data\r\n      const headers = [['Task Name', 'Start Date', 'End Date', 'Duration', 'Progress', 'Status']];\r\n      const data = flat.map(task => {\r\n        const duration = task.startDate && task.endDate\r\n          ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n          : 0;\r\n\r\n        return [\r\n          task.name,\r\n          task.startDate ? ganttUtils.formatDate(task.startDate) : 'N/A',\r\n          task.endDate ? ganttUtils.formatDate(task.endDate) : 'N/A',\r\n          duration > 0 ? `${duration} days` : 'N/A',\r\n          `${task.progress}%`,\r\n          task.status || 'N/A',\r\n        ];\r\n      });\r\n\r\n      // v0.8.1: Use autoTable function (v5.0 API) instead of doc.autoTable() (old API)\r\n      autoTable(doc, {\r\n        head: headers,\r\n        body: data,\r\n        startY: 30,\r\n        styles: {\r\n          fontSize: 9,\r\n          cellPadding: 3,\r\n        },\r\n        headStyles: {\r\n          fillColor: [66, 139, 202],\r\n          textColor: 255,\r\n          fontStyle: 'bold',\r\n        },\r\n        alternateRowStyles: {\r\n          fillColor: [245, 245, 245],\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 60 }, // Task Name\r\n          1: { cellWidth: 30 }, // Start Date\r\n          2: { cellWidth: 30 }, // End Date\r\n          3: { cellWidth: 25 }, // Duration\r\n          4: { cellWidth: 20 }, // Progress\r\n          5: { cellWidth: 25 }, // Status\r\n        },\r\n      });\r\n\r\n      // Save the PDF\r\n      doc.save(filename);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Export tasks to Excel format\r\n   * @param tasks - Tasks to export\r\n   * @param filename - Optional filename (default: 'gantt-chart.xlsx')\r\n   * @returns Promise<void>\r\n   */\r\n  exportToExcel: async (tasks: Task[], filename = 'gantt-chart.xlsx'): Promise<void> => {\r\n    const XLSX = await import('xlsx');\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // Prepare data\r\n    const data = flat.map(task => {\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      return {\r\n        'Task ID': task.id,\r\n        'Task Name': task.name,\r\n        'Start Date': task.startDate ? ganttUtils.formatDate(task.startDate) : '',\r\n        'End Date': task.endDate ? ganttUtils.formatDate(task.endDate) : '',\r\n        'Duration (days)': duration > 0 ? duration : '',\r\n        'Progress (%)': task.progress,\r\n        'Status': task.status || '',\r\n        'Assignees': task.assignees?.map(a => a.name).join(', ') || '',\r\n        'Dependencies': task.dependencies?.join(', ') || '',\r\n        'Is Milestone': task.isMilestone ? 'Yes' : 'No',\r\n        'Parent ID': task.parentId || '',\r\n        'Level': task.level || 0,\r\n      };\r\n    });\r\n\r\n    // Create worksheet\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n\r\n    // Set column widths\r\n    const columnWidths = [\r\n      { wch: 15 }, // Task ID\r\n      { wch: 40 }, // Task Name\r\n      { wch: 12 }, // Start Date\r\n      { wch: 12 }, // End Date\r\n      { wch: 15 }, // Duration\r\n      { wch: 12 }, // Progress\r\n      { wch: 15 }, // Status\r\n      { wch: 30 }, // Assignees\r\n      { wch: 20 }, // Dependencies\r\n      { wch: 12 }, // Is Milestone\r\n      { wch: 15 }, // Parent ID\r\n      { wch: 8 },  // Level\r\n    ];\r\n    worksheet['!cols'] = columnWidths;\r\n\r\n    // Create workbook\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Gantt Tasks');\r\n\r\n    // Save the file\r\n    XLSX.writeFile(workbook, filename);\r\n  },\r\n\r\n  /**\r\n   * Export tasks to Microsoft Project XML format\r\n   * Compatible with MS Project 2010+ and other project management tools\r\n   * @param tasks - Tasks to export\r\n   * @param projectName - Project name (default: 'Gantt Project')\r\n   * @param filename - Optional filename (default: 'project.xml')\r\n   * @returns void - Downloads the XML file\r\n   */\r\n  exportToMSProject: (tasks: Task[], projectName = 'Gantt Project', filename = 'project.xml'): void => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // Generate unique UIDs for tasks (MS Project requires numeric UIDs)\r\n    const taskUIDMap = new Map<string, number>();\r\n    flat.forEach((task, index) => {\r\n      taskUIDMap.set(task.id, index + 1); // UID starts at 1\r\n    });\r\n\r\n    // Format date for MS Project XML (ISO 8601)\r\n    const formatMSDate = (date: Date): string => {\r\n      return date.toISOString().replace('Z', '');\r\n    };\r\n\r\n    // Calculate project start and end dates\r\n    const projectStart = ganttUtils.getEarliestStartDate(tasks) || new Date();\r\n    const projectEnd = ganttUtils.getLatestEndDate(tasks) || new Date();\r\n\r\n    // Build XML structure\r\n    const xmlTasks = flat.map((task, index) => {\r\n      const uid = taskUIDMap.get(task.id)!;\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      // Build predecessor links (dependencies)\r\n      const predecessorLinks = (task.dependencies || [])\r\n        .filter(depId => taskUIDMap.has(depId))\r\n        .map(depId => `\r\n        <PredecessorLink>\r\n          <PredecessorUID>${taskUIDMap.get(depId)}</PredecessorUID>\r\n          <Type>1</Type>\r\n          <CrossProject>0</CrossProject>\r\n          <LinkLag>0</LinkLag>\r\n          <LagFormat>7</LagFormat>\r\n        </PredecessorLink>`).join('');\r\n\r\n      return `\r\n    <Task>\r\n      <UID>${uid}</UID>\r\n      <ID>${index + 1}</ID>\r\n      <Name>${task.name.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Name>\r\n      <Type>0</Type>\r\n      <IsNull>0</IsNull>\r\n      <CreateDate>${formatMSDate(new Date())}</CreateDate>\r\n      <WBS>${index + 1}</WBS>\r\n      <OutlineNumber>${index + 1}</OutlineNumber>\r\n      <OutlineLevel>${task.level || 0}</OutlineLevel>\r\n      <Priority>500</Priority>\r\n      <Start>${task.startDate ? formatMSDate(task.startDate) : ''}</Start>\r\n      <Finish>${task.endDate ? formatMSDate(task.endDate) : ''}</Finish>\r\n      <Duration>PT${duration * 8}H0M0S</Duration>\r\n      <DurationFormat>7</DurationFormat>\r\n      <Work>PT${duration * 8}H0M0S</Work>\r\n      <Stop>${task.endDate ? formatMSDate(task.endDate) : ''}</Stop>\r\n      <Resume>${task.startDate ? formatMSDate(task.startDate) : ''}</Resume>\r\n      <ResumeValid>0</ResumeValid>\r\n      <EffortDriven>1</EffortDriven>\r\n      <Recurring>0</Recurring>\r\n      <OverAllocated>0</OverAllocated>\r\n      <Estimated>0</Estimated>\r\n      <Milestone>${task.isMilestone ? '1' : '0'}</Milestone>\r\n      <Summary>${(task.subtasks && task.subtasks.length > 0) ? '1' : '0'}</Summary>\r\n      <Critical>${task.isCriticalPath ? '1' : '0'}</Critical>\r\n      <IsSubproject>0</IsSubproject>\r\n      <IsSubprojectReadOnly>0</IsSubprojectReadOnly>\r\n      <ExternalTask>0</ExternalTask>\r\n      <EarlyStart>${task.startDate ? formatMSDate(task.startDate) : ''}</EarlyStart>\r\n      <EarlyFinish>${task.endDate ? formatMSDate(task.endDate) : ''}</EarlyFinish>\r\n      <LateStart>${task.startDate ? formatMSDate(task.startDate) : ''}</LateStart>\r\n      <LateFinish>${task.endDate ? formatMSDate(task.endDate) : ''}</LateFinish>\r\n      <StartVariance>0</StartVariance>\r\n      <FinishVariance>0</FinishVariance>\r\n      <WorkVariance>0</WorkVariance>\r\n      <FreeSlack>0</FreeSlack>\r\n      <TotalSlack>0</TotalSlack>\r\n      <FixedCost>0</FixedCost>\r\n      <FixedCostAccrual>3</FixedCostAccrual>\r\n      <PercentComplete>${task.progress}</PercentComplete>\r\n      <PercentWorkComplete>${task.progress}</PercentWorkComplete>\r\n      <Cost>0</Cost>\r\n      <OvertimeCost>0</OvertimeCost>\r\n      <OvertimeWork>PT0H0M0S</OvertimeWork>\r\n      <ActualStart>${task.progress > 0 && task.startDate ? formatMSDate(task.startDate) : ''}</ActualStart>\r\n      <ActualFinish>${task.progress === 100 && task.endDate ? formatMSDate(task.endDate) : ''}</ActualFinish>\r\n      <ActualDuration>PT${Math.round(duration * task.progress / 100) * 8}H0M0S</ActualDuration>\r\n      <ActualCost>0</ActualCost>\r\n      <ActualOvertimeCost>0</ActualOvertimeCost>\r\n      <ActualWork>PT${Math.round(duration * task.progress / 100) * 8}H0M0S</ActualWork>\r\n      <ActualOvertimeWork>PT0H0M0S</ActualOvertimeWork>\r\n      <RegularWork>PT${duration * 8}H0M0S</RegularWork>\r\n      <RemainingDuration>PT${Math.round(duration * (100 - task.progress) / 100) * 8}H0M0S</RemainingDuration>\r\n      <RemainingCost>0</RemainingCost>\r\n      <RemainingWork>PT${Math.round(duration * (100 - task.progress) / 100) * 8}H0M0S</RemainingWork>\r\n      <RemainingOvertimeCost>0</RemainingOvertimeCost>\r\n      <RemainingOvertimeWork>PT0H0M0S</RemainingOvertimeWork>\r\n      <ACWP>0</ACWP>\r\n      <CV>0</CV>\r\n      <ConstraintType>0</ConstraintType>\r\n      <CalendarUID>-1</CalendarUID>\r\n      <LevelAssignments>1</LevelAssignments>\r\n      <LevelingCanSplit>1</LevelingCanSplit>\r\n      <LevelingDelay>0</LevelingDelay>\r\n      <LevelingDelayFormat>8</LevelingDelayFormat>\r\n      <IgnoreResourceCalendar>0</IgnoreResourceCalendar>\r\n      <HideBar>0</HideBar>\r\n      <Rollup>0</Rollup>\r\n      <BCWS>0</BCWS>\r\n      <BCWP>0</BCWP>\r\n      <PhysicalPercentComplete>0</PhysicalPercentComplete>\r\n      <EarnedValueMethod>0</EarnedValueMethod>\r\n      <IsPublished>1</IsPublished>\r\n      <CommitmentType>0</CommitmentType>${predecessorLinks}\r\n    </Task>`;\r\n    }).join('');\r\n\r\n    // Complete MS Project XML structure\r\n    const xml = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\r\n<Project xmlns=\"http://schemas.microsoft.com/project\">\r\n  <SaveVersion>14</SaveVersion>\r\n  <Name>${projectName.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Name>\r\n  <Title>${projectName.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Title>\r\n  <CreationDate>${formatMSDate(new Date())}</CreationDate>\r\n  <LastSaved>${formatMSDate(new Date())}</LastSaved>\r\n  <ScheduleFromStart>1</ScheduleFromStart>\r\n  <StartDate>${formatMSDate(projectStart)}</StartDate>\r\n  <FinishDate>${formatMSDate(projectEnd)}</FinishDate>\r\n  <FYStartDate>1</FYStartDate>\r\n  <CriticalSlackLimit>0</CriticalSlackLimit>\r\n  <CurrencyDigits>2</CurrencyDigits>\r\n  <CurrencySymbol>$</CurrencySymbol>\r\n  <CurrencyCode>USD</CurrencyCode>\r\n  <CurrencySymbolPosition>0</CurrencySymbolPosition>\r\n  <CalendarUID>1</CalendarUID>\r\n  <DefaultStartTime>08:00:00</DefaultStartTime>\r\n  <DefaultFinishTime>17:00:00</DefaultFinishTime>\r\n  <MinutesPerDay>480</MinutesPerDay>\r\n  <MinutesPerWeek>2400</MinutesPerWeek>\r\n  <DaysPerMonth>20</DaysPerMonth>\r\n  <DefaultTaskType>1</DefaultTaskType>\r\n  <DefaultFixedCostAccrual>3</DefaultFixedCostAccrual>\r\n  <DefaultStandardRate>0</DefaultStandardRate>\r\n  <DefaultOvertimeRate>0</DefaultOvertimeRate>\r\n  <DurationFormat>7</DurationFormat>\r\n  <WorkFormat>2</WorkFormat>\r\n  <EditableActualCosts>0</EditableActualCosts>\r\n  <HonorConstraints>1</HonorConstraints>\r\n  <InsertedProjectsLikeSummary>1</InsertedProjectsLikeSummary>\r\n  <MultipleCriticalPaths>0</MultipleCriticalPaths>\r\n  <NewTasksEffortDriven>1</NewTasksEffortDriven>\r\n  <NewTasksEstimated>1</NewTasksEstimated>\r\n  <SplitsInProgressTasks>1</SplitsInProgressTasks>\r\n  <SpreadActualCost>0</SpreadActualCost>\r\n  <SpreadPercentComplete>0</SpreadPercentComplete>\r\n  <TaskUpdatesResource>1</TaskUpdatesResource>\r\n  <FiscalYearStart>0</FiscalYearStart>\r\n  <WeekStartDay>1</WeekStartDay>\r\n  <MoveCompletedEndsBack>0</MoveCompletedEndsBack>\r\n  <MoveRemainingStartsBack>0</MoveRemainingStartsBack>\r\n  <MoveRemainingStartsForward>0</MoveRemainingStartsForward>\r\n  <MoveCompletedEndsForward>0</MoveCompletedEndsForward>\r\n  <BaselineForEarnedValue>0</BaselineForEarnedValue>\r\n  <AutoAddNewResourcesAndTasks>1</AutoAddNewResourcesAndTasks>\r\n  <CurrentDate>${formatMSDate(new Date())}</CurrentDate>\r\n  <MicrosoftProjectServerURL>1</MicrosoftProjectServerURL>\r\n  <Autolink>1</Autolink>\r\n  <NewTaskStartDate>0</NewTaskStartDate>\r\n  <DefaultTaskEVMethod>0</DefaultTaskEVMethod>\r\n  <ProjectExternallyEdited>0</ProjectExternallyEdited>\r\n  <ExtendedCreationDate>${formatMSDate(new Date())}</ExtendedCreationDate>\r\n  <ActualsInSync>0</ActualsInSync>\r\n  <RemoveFileProperties>0</RemoveFileProperties>\r\n  <AdminProject>0</AdminProject>\r\n  <Calendars>\r\n    <Calendar>\r\n      <UID>1</UID>\r\n      <Name>Standard</Name>\r\n      <IsBaseCalendar>1</IsBaseCalendar>\r\n      <IsBaselineCalendar>0</IsBaselineCalendar>\r\n      <BaseCalendarUID>-1</BaseCalendarUID>\r\n      <WeekDays>\r\n        <WeekDay>\r\n          <DayType>1</DayType>\r\n          <DayWorking>0</DayWorking>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>2</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>3</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>4</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>5</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>6</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>7</DayType>\r\n          <DayWorking>0</DayWorking>\r\n        </WeekDay>\r\n      </WeekDays>\r\n    </Calendar>\r\n  </Calendars>\r\n  <Tasks>${xmlTasks}\r\n  </Tasks>\r\n</Project>`;\r\n\r\n    // Download the file\r\n    const blob = new Blob([xml], { type: 'application/xml;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = filename;\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n  },\r\n\r\n  /**\r\n   * Calculate Critical Path Method (CPM) - identifies tasks with zero slack\r\n   * @param tasks - All tasks\r\n   * @returns Array of task IDs on the critical path\r\n   */\r\n  calculateCriticalPath: (tasks: Task[]): string[] => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.startDate && t.endDate);\r\n\r\n    if (tasksWithDates.length === 0) return [];\r\n\r\n    // Step 1: Calculate Early Start (ES) and Early Finish (EF) - Forward Pass\r\n    const earlyDates = new Map<string, { es: number; ef: number }>();\r\n\r\n    const calculateEarlyDates = (task: Task): void => {\r\n      if (earlyDates.has(task.id)) return;\r\n\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      let es = 0;\r\n\r\n      // If task has dependencies, ES = max(EF of all predecessors)\r\n      if (task.dependencies && task.dependencies.length > 0) {\r\n        for (const depId of task.dependencies) {\r\n          const depTask = flat.find(t => t.id === depId);\r\n          if (depTask) {\r\n            calculateEarlyDates(depTask);\r\n            const depEF = earlyDates.get(depId)?.ef || 0;\r\n            es = Math.max(es, depEF);\r\n          }\r\n        }\r\n      }\r\n\r\n      const ef = es + duration;\r\n      earlyDates.set(task.id, { es, ef });\r\n    };\r\n\r\n    tasksWithDates.forEach(calculateEarlyDates);\r\n\r\n    // Step 2: Find project end date (max EF)\r\n    const projectEnd = Math.max(...Array.from(earlyDates.values()).map(d => d.ef));\r\n\r\n    // Step 3: Calculate Late Start (LS) and Late Finish (LF) - Backward Pass\r\n    const lateDates = new Map<string, { ls: number; lf: number }>();\r\n\r\n    const calculateLateDates = (task: Task): void => {\r\n      if (lateDates.has(task.id)) return;\r\n\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      // Find all tasks that depend on this task\r\n      const successors = flat.filter(t =>\r\n        t.dependencies && t.dependencies.includes(task.id)\r\n      );\r\n\r\n      let lf = projectEnd;\r\n\r\n      // If task has successors, LF = min(LS of all successors)\r\n      if (successors.length > 0) {\r\n        for (const successor of successors) {\r\n          calculateLateDates(successor);\r\n          const succLS = lateDates.get(successor.id)?.ls || 0;\r\n          lf = Math.min(lf, succLS);\r\n        }\r\n      }\r\n\r\n      const ls = lf - duration;\r\n      lateDates.set(task.id, { ls, lf });\r\n    };\r\n\r\n    tasksWithDates.forEach(calculateLateDates);\r\n\r\n    // Step 4: Calculate Slack (Float) = LS - ES = LF - EF\r\n    // Tasks with slack = 0 are on the critical path\r\n    const criticalPath: string[] = [];\r\n\r\n    for (const task of tasksWithDates) {\r\n      const early = earlyDates.get(task.id);\r\n      const late = lateDates.get(task.id);\r\n\r\n      if (early && late) {\r\n        const slack = late.ls - early.es;\r\n        if (Math.abs(slack) < 0.01) { // Float point comparison\r\n          criticalPath.push(task.id);\r\n        }\r\n      }\r\n    }\r\n\r\n    return criticalPath;\r\n  },\r\n\r\n  /**\r\n   * Calculate slack (float) time for a task\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to calculate slack for\r\n   * @returns Slack in days, or null if cannot be calculated\r\n   */\r\n  calculateSlack: (tasks: Task[], taskId: string): number | null => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.startDate || !task.endDate) return null;\r\n\r\n    const criticalPath = ganttUtils.calculateCriticalPath(tasks);\r\n\r\n    // If on critical path, slack is 0\r\n    if (criticalPath.includes(taskId)) return 0;\r\n\r\n    // Otherwise calculate slack using CPM algorithm\r\n    // This is simplified - in production would use full CPM\r\n    // For now, we approximate: slack = time until next dependent task\r\n    const dependents = ganttUtils.getDependentTasks(tasks, taskId);\r\n\r\n    if (dependents.length === 0) {\r\n      // No dependents = float until project end\r\n      const projectEnd = ganttUtils.getLatestEndDate(tasks);\r\n      if (!projectEnd) return null;\r\n\r\n      const daysToEnd = ganttUtils.calculateDuration(task.endDate, projectEnd);\r\n      return Math.max(0, daysToEnd);\r\n    }\r\n\r\n    // Find earliest dependent\r\n    const earliestDepStart = dependents\r\n      .filter(d => d.startDate)\r\n      .map(d => d.startDate!.getTime())\r\n      .sort((a, b) => a - b)[0];\r\n\r\n    if (!earliestDepStart) return null;\r\n\r\n    const slack = ganttUtils.calculateDuration(\r\n      task.endDate,\r\n      new Date(earliestDepStart)\r\n    );\r\n\r\n    return Math.max(0, slack);\r\n  },\r\n\r\n  /**\r\n   * Check if a task is on the critical path\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to check\r\n   * @returns True if task is on critical path\r\n   */\r\n  isOnCriticalPath: (tasks: Task[], taskId: string): boolean => {\r\n    const criticalPath = ganttUtils.calculateCriticalPath(tasks);\r\n    return criticalPath.includes(taskId);\r\n  },\r\n\r\n  /**\r\n   * Auto-schedule dependent tasks when a task changes\r\n   * v0.13.3: Now takes optional daysDelta to shift dependents by same amount (preserves gap)\r\n   * @param tasks - All tasks\r\n   * @param changedTaskId - Task that was changed\r\n   * @param daysDelta - Optional: days the parent moved (for preserving relative gaps)\r\n   * @returns Updated tasks with rescheduled dependencies\r\n   */\r\n  autoScheduleDependents: (tasks: Task[], changedTaskId: string, daysDelta?: number): Task[] => {\r\n    const changedTask = ganttUtils.findTaskById(tasks, changedTaskId);\r\n    if (!changedTask || !changedTask.endDate) return tasks;\r\n\r\n    const dependents = ganttUtils.getDependentTasks(tasks, changedTaskId);\r\n    if (dependents.length === 0) return tasks;\r\n\r\n    let updatedTasks = [...tasks];\r\n\r\n    // For each dependent, shift by the same daysDelta (preserves relative gap)\r\n    for (const dependent of dependents) {\r\n      if (!dependent.startDate || !dependent.endDate) continue;\r\n\r\n      // Calculate duration of dependent task\r\n      const duration = ganttUtils.calculateDuration(dependent.startDate, dependent.endDate);\r\n\r\n      let newStartDate: Date;\r\n\r\n      if (daysDelta !== undefined) {\r\n        // v0.13.3: Shift by same delta as parent (preserves relative gap)\r\n        newStartDate = new Date(dependent.startDate);\r\n        newStartDate.setDate(newStartDate.getDate() + daysDelta);\r\n      } else {\r\n        // Legacy behavior: New start date = changed task end date + 1 day\r\n        newStartDate = new Date(changedTask.endDate);\r\n        newStartDate.setDate(newStartDate.getDate() + 1);\r\n      }\r\n\r\n      // Calculate new end date based on duration\r\n      const newEndDate = ganttUtils.calculateEndDate(newStartDate, duration);\r\n\r\n      // Update the task recursively in nested structure\r\n      const updateTaskRec = (tasks: Task[]): Task[] => {\r\n        return tasks.map(t => {\r\n          if (t.id === dependent.id) {\r\n            return { ...t, startDate: newStartDate, endDate: newEndDate };\r\n          }\r\n          if (t.subtasks) {\r\n            return { ...t, subtasks: updateTaskRec(t.subtasks) };\r\n          }\r\n          return t;\r\n        });\r\n      };\r\n\r\n      updatedTasks = updateTaskRec(updatedTasks);\r\n\r\n      // Recursively update dependents of this task (pass same delta)\r\n      updatedTasks = ganttUtils.autoScheduleDependents(updatedTasks, dependent.id, daysDelta);\r\n    }\r\n\r\n    return updatedTasks;\r\n  },\r\n\r\n  /**\r\n   * v0.13.0: Calculate cascade preview positions for dependent tasks during drag\r\n   * v0.13.3: FIXED - Preview shows ONLY actual movement needed (keeps same relative gap)\r\n   * Dependents shift by the same daysDelta as their parent, preserving the original gap\r\n   * @param tasks - All tasks (nested structure)\r\n   * @param draggedTaskId - Task being dragged\r\n   * @param daysDelta - How many days the dragged task is being moved\r\n   * @param flatTasks - Flattened task list with row indices\r\n   * @param timelineStartDate - Start date of the timeline\r\n   * @param scaledDayWidth - Width of one day in pixels (already includes zoom: dayWidth * zoom)\r\n   * @param rowHeight - Height of each row\r\n   * @param headerHeight - Height of the header\r\n   * @returns Array of DependentTaskPreview objects\r\n   */\r\n  calculateCascadePreview: (\r\n    tasks: Task[],\r\n    draggedTaskId: string,\r\n    daysDelta: number,\r\n    flatTasks: Task[],\r\n    timelineStartDate: Date,\r\n    scaledDayWidth: number, // Note: This already includes zoom (dayWidth * zoom)\r\n    rowHeight: number,\r\n    headerHeight: number\r\n  ): Array<{\r\n    taskId: string;\r\n    taskName: string;\r\n    originalX: number;\r\n    previewX: number;\r\n    width: number;\r\n    y: number;\r\n    rowIndex: number;\r\n    daysDelta: number;\r\n    color?: string;\r\n  }> => {\r\n    if (daysDelta === 0) return [];\r\n\r\n    const previews: Array<{\r\n      taskId: string;\r\n      taskName: string;\r\n      originalX: number;\r\n      previewX: number;\r\n      width: number;\r\n      y: number;\r\n      rowIndex: number;\r\n      daysDelta: number;\r\n      color?: string;\r\n    }> = [];\r\n\r\n    const rangeStart = timelineStartDate.getTime();\r\n    const msPerDay = 1000 * 60 * 60 * 24;\r\n\r\n    // Get dragged task info\r\n    const draggedTask = ganttUtils.findTaskById(tasks, draggedTaskId);\r\n    if (!draggedTask || !draggedTask.endDate) return [];\r\n\r\n    // v0.13.3: Dependents move by the SAME daysDelta as their parent\r\n    // This preserves the relative gap between tasks, making preview accurate\r\n    const getAffectedTasks = (parentTaskId: string, parentDelta: number, visited = new Set<string>()): void => {\r\n      if (visited.has(parentTaskId)) return; // Prevent infinite loops\r\n      visited.add(parentTaskId);\r\n\r\n      const dependents = ganttUtils.getDependentTasks(tasks, parentTaskId);\r\n\r\n      for (const dependent of dependents) {\r\n        if (!dependent.startDate || !dependent.endDate) continue;\r\n\r\n        // Find row index in flattened list\r\n        const rowIndex = flatTasks.findIndex(t => t.id === dependent.id);\r\n        if (rowIndex === -1) continue;\r\n\r\n        // Calculate task duration and current position\r\n        const taskStart = dependent.startDate.getTime();\r\n        const taskEnd = dependent.endDate.getTime();\r\n        const durationDays = (taskEnd - taskStart) / msPerDay;\r\n\r\n        // Original X position\r\n        const daysFromStart = (taskStart - rangeStart) / msPerDay;\r\n        const originalX = daysFromStart * scaledDayWidth;\r\n\r\n        // v0.13.3: Preview X = Original X + daysDelta (same shift as parent)\r\n        // This shows the task moving exactly with its parent, preserving the gap\r\n        const previewX = originalX + (parentDelta * scaledDayWidth);\r\n\r\n        // Width calculation - minimum 1 day width for visibility\r\n        const width = Math.max(durationDays * scaledDayWidth, scaledDayWidth);\r\n\r\n        // Y position - same formula as Timeline.tsx: HEADER_HEIGHT + index * ROW_HEIGHT + 12\r\n        const y = headerHeight + rowIndex * rowHeight + 12;\r\n\r\n        previews.push({\r\n          taskId: dependent.id,\r\n          taskName: dependent.name,\r\n          originalX,\r\n          previewX,\r\n          width,\r\n          y,\r\n          rowIndex,\r\n          daysDelta: parentDelta,\r\n          color: dependent.color,\r\n        });\r\n\r\n        // Recursively get dependents of this task (same delta propagates)\r\n        getAffectedTasks(dependent.id, parentDelta, visited);\r\n      }\r\n    };\r\n\r\n    getAffectedTasks(draggedTaskId, daysDelta);\r\n\r\n    return previews;\r\n  },\r\n\r\n  /**\r\n   *  KILLER FEATURE #3: Split a task (create GAP in the middle, like Bryntum/DHTMLX)\r\n   * Same task, but work is paused for some days then continues\r\n   * Example: Jan 1-10  Split at Jan 5 with 3 day gap  Jan 1-4 [GAP] Jan 8-13\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task to split\r\n   * @param splitDate - Date where gap starts\r\n   * @param gapDays - Number of days to pause (default: 3)\r\n   * @returns Updated tasks with split segments\r\n   */\r\n  splitTask: (tasks: Task[], taskId: string, splitDate: Date, gapDays = 3): Task[] => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.startDate || !task.endDate) return tasks;\r\n\r\n    // Validate split date is within task range\r\n    if (splitDate <= task.startDate || splitDate >= task.endDate) {\r\n      console.warn('Split date must be between task start and end dates');\r\n      return tasks;\r\n    }\r\n\r\n    // Calculate the split point (end of first segment)\r\n    const firstSegmentEnd = new Date(splitDate);\r\n    firstSegmentEnd.setDate(firstSegmentEnd.getDate() - 1); // Day before split\r\n\r\n    // Calculate second segment start (after gap)\r\n    const secondSegmentStart = new Date(splitDate);\r\n    secondSegmentStart.setDate(secondSegmentStart.getDate() + gapDays);\r\n\r\n    // Calculate new end date (original end + gap days to preserve work duration)\r\n    const newEndDate = new Date(task.endDate);\r\n    newEndDate.setDate(newEndDate.getDate() + gapDays);\r\n\r\n    // Create segments array\r\n    const segments: TaskSegment[] = [\r\n      {\r\n        startDate: new Date(task.startDate),\r\n        endDate: firstSegmentEnd,\r\n      },\r\n      {\r\n        startDate: secondSegmentStart,\r\n        endDate: newEndDate,\r\n      },\r\n    ];\r\n\r\n    // Update task with segments\r\n    const updateTaskRec = (tasksList: Task[]): Task[] => {\r\n      return tasksList.map(t => {\r\n        if (t.id === task.id) {\r\n          return {\r\n            ...t,\r\n            endDate: newEndDate, // Overall end date extends\r\n            segments, // Add segments to show gaps\r\n          };\r\n        }\r\n        if (t.subtasks) {\r\n          return { ...t, subtasks: updateTaskRec(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n\r\n    return updateTaskRec(tasks);\r\n  },\r\n};\r\n","import { useMemo, useCallback, useState } from 'react';\nimport { TimeScale, Task, GanttTemplates, DependentTaskPreview } from './types';\nimport { TaskBar } from './TaskBar';\nimport { DependencyLine } from './DependencyLine';\nimport { Milestone } from './Milestone';\nimport { ganttUtils } from './ganttUtils';\n\ninterface TimelineProps {\n  tasks: Task[];\n  theme: any;\n  rowHeight: number;\n  timeScale: TimeScale;\n  startDate: Date;\n  endDate: Date;\n  zoom: number;\n  templates: Required<GanttTemplates>; // v0.8.0\n  onTaskClick?: (task: Task) => void;\n  onTaskDblClick?: (task: Task) => void; // v0.8.0\n  onTaskContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\n  onTaskDateChange?: (task: Task, newStart: Date, newEnd: Date) => void;\n  onDependencyCreate?: (fromTask: Task, toTaskId: string) => void;\n  onDependencyDelete?: (taskId: string, dependencyId: string) => void;\n}\n\nexport interface TaskPosition {\n  id: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport function Timeline({\n  tasks,\n  theme,\n  rowHeight: ROW_HEIGHT,\n  timeScale,\n  startDate,\n  endDate,\n  zoom,\n  templates,\n  onTaskClick,\n  onTaskDblClick, // v0.8.0\n  onTaskContextMenu, // v0.8.0\n  onTaskDateChange,\n  onDependencyCreate,\n  onDependencyDelete,\n}: TimelineProps) {\n  const HEADER_HEIGHT = 48; // Must match TaskGrid's HEADER_HEIGHT for alignment\n\n  // v0.13.0: State for dependency cascade preview\n  const [cascadePreviews, setCascadePreviews] = useState<DependentTaskPreview[]>([]);\n\n  // Calculate dimensions\n  const totalDays = Math.ceil((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n  const dayWidth = timeScale === 'day' ? 60 : timeScale === 'week' ? 20 : 8;\n  const timelineWidth = totalDays * dayWidth * zoom;\n\n  // Get week number - moved before useMemo\n  const getWeekNumber = (date: Date): number => {\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n    const dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil(((d.getTime() - yearStart.getTime()) / 86400000 + 1) / 7);\n  };\n\n  // Check if date is weekend\n  const isWeekend = (date: Date): boolean => {\n    const day = date.getDay();\n    return day === 0 || day === 6;\n  };\n\n  // Convert pixel position to date\n  const pixelToDate = useCallback((pixelX: number): Date => {\n    const days = Math.round(pixelX / (dayWidth * zoom));\n    const newDate = new Date(startDate);\n    newDate.setDate(newDate.getDate() + days);\n    return newDate;\n  }, [startDate, dayWidth, zoom]);\n\n  // Handle click on timeline to create task bar for tasks without dates\n  const handleTimelineClick = useCallback((e: React.MouseEvent<SVGRectElement>, task: Task) => {\n    // Only create bar if task doesn't have dates (no existing bar)\n    if (task.startDate && task.endDate) {\n      return; // Task already has dates, do nothing\n    }\n\n    const svgElement = e.currentTarget.ownerSVGElement;\n    if (!svgElement) return;\n\n    const point = svgElement.createSVGPoint();\n    point.x = e.clientX;\n    point.y = e.clientY;\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\n\n    // Calculate the clicked date\n    const clickedDate = pixelToDate(svgPoint.x);\n\n    // Create a 1-day task bar\n    const endDate = new Date(clickedDate);\n    endDate.setDate(endDate.getDate() + 1);\n\n    // Call the date change handler to create the task bar\n    onTaskDateChange?.(task, clickedDate, endDate);\n  }, [pixelToDate, onTaskDateChange]);\n\n  // Calculate parent task dates from subtasks and flatten for rendering\n  const flatTasks = useMemo(() => {\n    // Helper function to calculate parent dates from subtasks\n    // v0.11.9: IMPORTANT - Only calculate dates if parent doesn't already have dates set\n    // This allows AI commands and manual edits to move parent tasks independently\n    const calculateParentDates = (tasks: Task[]): Task[] => {\n      return tasks.map(task => {\n        // If task has subtasks, calculate dates from them\n        if (task.subtasks && task.subtasks.length > 0) {\n          // First, recursively calculate dates for nested subtasks\n          const updatedSubtasks = calculateParentDates(task.subtasks);\n\n          // Filter subtasks that have dates\n          const subtasksWithDates = updatedSubtasks.filter(st => st.startDate && st.endDate);\n\n          if (subtasksWithDates.length > 0) {\n            // Calculate earliest start and latest end from subtasks\n            const startDates = subtasksWithDates.map(st => st.startDate!.getTime());\n            const endDates = subtasksWithDates.map(st => st.endDate!.getTime());\n\n            const earliestStart = new Date(Math.min(...startDates));\n            const latestEnd = new Date(Math.max(...endDates));\n\n            // v0.11.9: Only set dates if parent doesn't already have them\n            // This preserves dates set by AI commands or manual edits\n            return {\n              ...task,\n              subtasks: updatedSubtasks,\n              startDate: task.startDate || earliestStart,\n              endDate: task.endDate || latestEnd,\n            };\n          }\n\n          return { ...task, subtasks: updatedSubtasks };\n        }\n\n        return task;\n      });\n    };\n\n    // Helper function to flatten tasks for rendering\n    const flattenTasks = (tasks: Task[], result: Task[] = []): Task[] => {\n      for (const task of tasks) {\n        result.push(task);\n        // Only include subtasks if parent is expanded (or if isExpanded is undefined, default to true)\n        if (task.subtasks && task.subtasks.length > 0 && (task.isExpanded === undefined || task.isExpanded)) {\n          flattenTasks(task.subtasks, result);\n        }\n      }\n      return result;\n    };\n\n    // Apply parent date calculation before flattening\n    const tasksWithCalculatedDates = calculateParentDates(tasks);\n    const flattened = flattenTasks(tasksWithCalculatedDates);\n\n    return flattened;\n  }, [tasks]);\n\n  // Calculate task position\n  const getTaskPosition = useCallback((task: Task) => {\n    // Return null position for tasks without dates\n    if (!task.startDate || !task.endDate) {\n      return { x: 0, width: 0 };\n    }\n\n    const taskStart = task.startDate.getTime();\n    const taskEnd = task.endDate.getTime();\n    const rangeStart = startDate.getTime();\n\n    const daysFromStart = (taskStart - rangeStart) / (1000 * 60 * 60 * 24);\n    const duration = (taskEnd - taskStart) / (1000 * 60 * 60 * 24);\n\n    const x = daysFromStart * dayWidth * zoom;\n    // Minimum width: allow 1 day minimum, but ensure at least 40px for visibility\n    const minWidth = Math.max(dayWidth * zoom, 40);\n    const width = Math.max(duration * dayWidth * zoom, minWidth);\n\n    return { x, width };\n  }, [startDate, dayWidth, zoom]);\n\n  // Build task positions map for collision detection\n  // v0.13.7: Y positions no longer include HEADER_HEIGHT (header is now separate sticky element)\n  const taskPositions = useMemo((): TaskPosition[] => {\n    return flatTasks\n      .filter(task => task.startDate && task.endDate) // Only include tasks with dates\n      .map((task) => {\n        const { x, width } = getTaskPosition(task);\n        const actualIndex = flatTasks.findIndex(t => t.id === task.id);\n        const y = actualIndex * ROW_HEIGHT + 12;\n        return {\n          id: task.id,\n          x,\n          y,\n          width,\n          height: 32, // TaskBar height\n        };\n      });\n  }, [flatTasks, getTaskPosition]);\n\n  // v0.13.0: Handle drag move for dependency cascade preview\n  const handleTaskDragMove = useCallback((taskId: string, daysDelta: number, isDragging: boolean) => {\n    if (!isDragging || daysDelta === 0) {\n      setCascadePreviews([]);\n      return;\n    }\n\n    // Calculate cascade preview positions for all dependent tasks\n    const previews = ganttUtils.calculateCascadePreview(\n      tasks,\n      taskId,\n      daysDelta,\n      flatTasks,\n      startDate,\n      dayWidth * zoom,\n      ROW_HEIGHT,\n      HEADER_HEIGHT\n    );\n\n    setCascadePreviews(previews);\n  }, [tasks, flatTasks, startDate, dayWidth, zoom, ROW_HEIGHT, HEADER_HEIGHT]);\n\n  // Generate timeline headers\n  const headers = useMemo(() => {\n    const result: Array<{ date: Date; label: string; x: number }> = [];\n    const current = new Date(startDate);\n    let index = 0;\n\n    while (current <= endDate) {\n      const daysFromStart =\n        (current.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\n      const x = daysFromStart * dayWidth * zoom;\n\n      if (timeScale === 'day') {\n        result.push({\n          date: new Date(current),\n          label: current.toLocaleDateString('en-US', { day: 'numeric', month: 'short' }),\n          x,\n        });\n        current.setDate(current.getDate() + 1);\n      } else if (timeScale === 'week') {\n        const weekNum = getWeekNumber(current);\n        result.push({\n          date: new Date(current),\n          label: `Week ${weekNum}`,\n          x,\n        });\n        current.setDate(current.getDate() + 7);\n      } else {\n        result.push({\n          date: new Date(current),\n          label: current.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }),\n          x,\n        });\n        current.setMonth(current.getMonth() + 1);\n      }\n      index++;\n    }\n\n    return result;\n  }, [startDate, endDate, timeScale, dayWidth, zoom]);\n\n  // Today position\n  const todayX = useMemo(() => {\n    const today = new Date();\n    const daysFromStart = (today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\n    return daysFromStart * dayWidth * zoom;\n  }, [startDate, dayWidth, zoom]);\n\n  // v0.13.7: Content height calculation (without header - header is now separate)\n  const contentHeight = Math.max(flatTasks.length * ROW_HEIGHT, 600 - HEADER_HEIGHT);\n\n  return (\n    <div\n      className=\"w-full h-full flex flex-col\"\n      data-gantt-chart\n      style={{ backgroundColor: theme.bgPrimary }}\n    >\n      {/* v0.13.7: Sticky Header - stays visible during vertical scroll */}\n      <div\n        style={{\n          position: 'sticky',\n          top: 0,\n          zIndex: 10,\n          backgroundColor: theme.bgGrid,\n          flexShrink: 0,\n          height: `${HEADER_HEIGHT}px`,\n          borderBottom: `1px solid ${theme.border}`,\n          boxSizing: 'border-box', // Border included in height\n        }}\n      >\n        <svg\n          width={Math.max(timelineWidth, 1000)}\n          height={HEADER_HEIGHT - 1} // -1 for border\n          style={{ display: 'block' }}\n        >\n          {/* Header Background */}\n          <rect\n            x={0}\n            y={0}\n            width={Math.max(timelineWidth, 1000)}\n            height={HEADER_HEIGHT}\n            fill={theme.bgGrid}\n          />\n\n          {/* Header Grid Lines and Text */}\n          {headers.map((header, index) => (\n            <g key={`header-${index}`}>\n              {/* Grid line in header - skip first line since TaskGrid border serves as divider */}\n              {index > 0 && (\n                <line\n                  x1={header.x}\n                  y1={0}\n                  x2={header.x}\n                  y2={HEADER_HEIGHT}\n                  stroke={theme.border}\n                  strokeWidth={1}\n                  opacity={0.1}\n                />\n              )}\n\n              {/* Header text - JetBrains Mono for technical/date display */}\n              <text\n                x={header.x + 8}\n                y={HEADER_HEIGHT / 2}\n                fill={theme.textTertiary}\n                fontSize=\"11\"\n                fontFamily=\"'JetBrains Mono', ui-monospace, monospace\"\n                fontWeight=\"500\"\n                dominantBaseline=\"middle\"\n              >\n                {header.label}\n              </text>\n            </g>\n          ))}\n\n          {/* Today marker in header */}\n          {todayX >= 0 && todayX <= timelineWidth && (\n            <circle cx={todayX} cy={HEADER_HEIGHT - 10} r={6} fill={theme.today} opacity={1} />\n          )}\n        </svg>\n      </div>\n\n      {/* Scrollable Content Area */}\n      <svg\n        width={Math.max(timelineWidth, 1000)}\n        height={contentHeight}\n        style={{ display: 'block', flexShrink: 0 }}\n      >\n        <defs>\n          <filter id=\"shadow\">\n            <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" floodOpacity=\"0.1\" />\n          </filter>\n\n          {/* Neutral theme: Diagonal stripes pattern for critical/overdue tasks */}\n          <pattern id=\"diagonal-stripes\" width=\"8\" height=\"8\" patternUnits=\"userSpaceOnUse\" patternTransform=\"rotate(45)\">\n            <line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"8\" stroke={theme.border} strokeWidth=\"2\" />\n          </pattern>\n        </defs>\n\n        {/* Full SVG Background */}\n        <rect\n          x={0}\n          y={0}\n          width={Math.max(timelineWidth, 1000)}\n          height={contentHeight}\n          fill={theme.bgPrimary}\n        />\n\n        {/* Grid Lines and Weekend Backgrounds - v0.13.7: Adjusted Y positions (no header offset) */}\n        {headers.map((header, index) => {\n          const nextX = headers[index + 1]?.x || timelineWidth;\n          const isWeekendDay = isWeekend(header.date);\n\n          return (\n            <g key={index}>\n              {/* Weekend background - subtle highlight */}\n              {isWeekendDay && (\n                <rect\n                  x={header.x}\n                  y={0}\n                  width={nextX - header.x}\n                  height={flatTasks.length * ROW_HEIGHT}\n                  fill={theme.bgWeekend}\n                  opacity={1}\n                />\n              )}\n\n              {/* Grid line - skip first line since TaskGrid border serves as divider */}\n              {index > 0 && (\n                <line\n                  x1={header.x}\n                  y1={0}\n                  x2={header.x}\n                  y2={flatTasks.length * ROW_HEIGHT}\n                  stroke={theme.border}\n                  strokeWidth={1}\n                  opacity={0.1}\n                />\n              )}\n            </g>\n          );\n        })}\n\n        {/* Today Line - Solid, prominent indicator - v0.13.7: Adjusted Y (no header offset) */}\n        {todayX >= 0 && todayX <= timelineWidth && (\n          <line\n            x1={todayX}\n            y1={0}\n            x2={todayX}\n            y2={flatTasks.length * ROW_HEIGHT}\n            stroke={theme.today}\n            strokeWidth={2}\n            opacity={1}\n          />\n        )}\n\n        {/* Row Backgrounds with Click-to-Create functionality - v0.13.7: Adjusted Y positions */}\n        {flatTasks.map((task, index) => {\n          const hasTaskBar = task.startDate && task.endDate;\n\n          return (\n            <g key={`row-group-${task.id}`}>\n              {/* Background stripe - alternating rows for better readability */}\n              <rect\n                key={`row-${task.id}`}\n                x={0}\n                y={index * ROW_HEIGHT}\n                width={timelineWidth}\n                height={ROW_HEIGHT}\n                fill={index % 2 === 0 ? 'transparent' : theme.bgSecondary}\n                opacity={1}\n                style={{ pointerEvents: 'none' }}\n              />\n\n              {/* Clickable area for tasks without dates */}\n              {!hasTaskBar && (\n                <>\n                  <rect\n                    key={`clickable-${task.id}`}\n                    x={0}\n                    y={index * ROW_HEIGHT}\n                    width={timelineWidth}\n                    height={ROW_HEIGHT}\n                    fill=\"transparent\"\n                    style={{\n                      cursor: 'pointer',\n                      pointerEvents: 'all'\n                    }}\n                    onClick={(e) => handleTimelineClick(e, task)}\n                    onMouseEnter={(e) => {\n                      e.currentTarget.setAttribute('fill', theme.accentLight);\n                      e.currentTarget.setAttribute('opacity', '0.5');\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.setAttribute('fill', 'transparent');\n                      e.currentTarget.setAttribute('opacity', '1');\n                    }}\n                  />\n                  {/* Placeholder text for empty tasks */}\n                  <text\n                    key={`placeholder-${task.id}`}\n                    x={todayX > 0 ? todayX : 100}\n                    y={index * ROW_HEIGHT + ROW_HEIGHT / 2}\n                    fill={theme.textTertiary}\n                    fontSize=\"12\"\n                    fontFamily=\"Inter, sans-serif\"\n                    fontStyle=\"italic\"\n                    dominantBaseline=\"middle\"\n                    opacity={0.4}\n                    style={{ pointerEvents: 'none', userSelect: 'none' }}\n                  >\n                    Click to set dates...\n                  </text>\n                </>\n              )}\n            </g>\n          );\n        })}\n\n        {/* Dependencies - v0.13.7: Adjusted Y positions */}\n        {flatTasks.map((task, toIndex) => {\n          if (!task.dependencies || task.dependencies.length === 0) return null;\n          // Skip if task doesn't have dates\n          if (!task.startDate || !task.endDate) return null;\n\n          return task.dependencies.map((depId) => {\n            const depTask = flatTasks.find((t) => t.id === depId);\n            if (!depTask) return null;\n            // Skip if dependency task doesn't have dates\n            if (!depTask.startDate || !depTask.endDate) return null;\n\n            const fromIndex = flatTasks.findIndex((t) => t.id === depId);\n            const fromPos = getTaskPosition(depTask);\n            const toPos = getTaskPosition(task);\n\n            return (\n              <DependencyLine\n                key={`dep-${depId}-${task.id}`}\n                x1={fromPos.x + fromPos.width}\n                y1={fromIndex * ROW_HEIGHT + ROW_HEIGHT / 2}\n                x2={toPos.x}\n                y2={toIndex * ROW_HEIGHT + ROW_HEIGHT / 2}\n                theme={theme}\n                onDelete={() => onDependencyDelete?.(task.id, depId)}\n              />\n            );\n          });\n        })}\n\n        {/* Tasks - v0.13.7: Adjusted Y positions */}\n        {flatTasks.map((task, index) => {\n          // Don't render task bar if task doesn't have dates\n          if (!task.startDate || !task.endDate) {\n            return null;\n          }\n\n          const { x, width } = getTaskPosition(task);\n          const y = index * ROW_HEIGHT + 12;\n\n          // Container phase (has subtasks): render as bracket bar\n          const isContainer = task.subtasks && task.subtasks.length > 0 && !task.isMilestone;\n\n          if (task.isMilestone) {\n            return (\n              <Milestone\n                key={task.id}\n                task={task}\n                x={x + width / 2}\n                y={y + 16}\n                theme={theme}\n                onClick={onTaskClick}\n              />\n            );\n          }\n\n          if (isContainer) {\n            // Render container as elegant bracket bar with task name\n            return (\n              <g key={task.id} onClick={() => onTaskClick?.(task)} style={{ cursor: 'pointer' }}>\n                {/* Background fill - elegant and visible */}\n                <rect\n                  x={x}\n                  y={y}\n                  width={width}\n                  height={32}\n                  fill={theme.primary}\n                  opacity={0.25}\n                  rx={6}\n                />\n                {/* Top bracket line */}\n                <line\n                  x1={x}\n                  y1={y}\n                  x2={x + width}\n                  y2={y}\n                  stroke={theme.primary}\n                  strokeWidth={3}\n                  opacity={0.9}\n                  strokeLinecap=\"round\"\n                />\n                {/* Left vertical */}\n                <line\n                  x1={x}\n                  y1={y}\n                  x2={x}\n                  y2={y + 32}\n                  stroke={theme.primary}\n                  strokeWidth={3}\n                  opacity={0.9}\n                  strokeLinecap=\"round\"\n                />\n                {/* Right vertical */}\n                <line\n                  x1={x + width}\n                  y1={y}\n                  x2={x + width}\n                  y2={y + 32}\n                  stroke={theme.primary}\n                  strokeWidth={3}\n                  opacity={0.9}\n                  strokeLinecap=\"round\"\n                />\n                {/* Bottom bracket line */}\n                <line\n                  x1={x}\n                  y1={y + 32}\n                  x2={x + width}\n                  y2={y + 32}\n                  stroke={theme.primary}\n                  strokeWidth={3}\n                  opacity={0.9}\n                  strokeLinecap=\"round\"\n                />\n                {/* Task name text - Matching TaskBar pattern */}\n                {width > 60 && (\n                  <text\n                    x={x + 12}\n                    y={y + 16}\n                    dominantBaseline=\"middle\"\n                    fill=\"#FFFFFF\"\n                    fontSize=\"13\"\n                    fontWeight=\"500\"\n                    fontFamily=\"Inter, sans-serif\"\n                    style={{ pointerEvents: 'none', userSelect: 'none' }}\n                  >\n                    {task.name}\n                  </text>\n                )}\n              </g>\n            );\n          }\n\n          return (\n            <TaskBar\n              key={task.id}\n              task={task}\n              x={x}\n              y={y}\n              width={width}\n              theme={theme}\n              dayWidth={dayWidth * zoom}\n              startDate={startDate}\n              templates={templates}\n              onClick={onTaskClick}\n              onDoubleClick={onTaskDblClick} // v0.8.0\n              onContextMenu={onTaskContextMenu} // v0.8.0\n              onDateChange={onTaskDateChange}\n              onDependencyCreate={onDependencyCreate}\n              allTaskPositions={taskPositions}\n              onDragMove={handleTaskDragMove} // v0.13.0\n            />\n          );\n        })}\n\n        {/* v0.13.0: Dependency Cascade Preview - Ghost bars showing where dependent tasks will move */}\n        {/* v0.13.4: Simplified - no conflicting animation, direct position */}\n        {/* v0.13.7: Adjusted Y positions for cascade previews */}\n        {cascadePreviews.map((preview) => (\n          <g\n            key={`cascade-preview-${preview.taskId}`}\n            style={{ pointerEvents: 'none' }}\n          >\n            {/* Ghost bar at exact preview position - v0.13.7: Y adjusted (subtract HEADER_HEIGHT) */}\n            <rect\n              x={preview.previewX}\n              y={preview.y - HEADER_HEIGHT}\n              width={preview.width}\n              height={32}\n              rx={8}\n              fill={preview.color || theme.accent}\n              opacity={0.3}\n              stroke={theme.accent}\n              strokeWidth={2}\n              strokeDasharray=\"4 2\"\n            />\n            {/* Days delta label */}\n            {Math.abs(preview.daysDelta) > 0 && (\n              <text\n                x={preview.previewX + preview.width / 2}\n                y={preview.y - HEADER_HEIGHT + 16}\n                textAnchor=\"middle\"\n                dominantBaseline=\"middle\"\n                fill={theme.accent}\n                fontSize=\"10\"\n                fontWeight=\"600\"\n                fontFamily=\"Inter, sans-serif\"\n                style={{ userSelect: 'none' }}\n              >\n                {preview.daysDelta > 0 ? `+${preview.daysDelta}d` : `${preview.daysDelta}d`}\n              </text>\n            )}\n          </g>\n        ))}\n      </svg>\n    </div>\n  );\n}","/**\r\n * ColorPicker Component - v0.11.0\r\n * Professional color selector for tasks with pastel palette\r\n */\r\n\r\nimport { motion } from 'framer-motion';\r\nimport { Check } from 'lucide-react';\r\n\r\nexport interface TaskColor {\r\n  name: string;\r\n  value: string;\r\n  light: string;\r\n}\r\n\r\n// Professional pastel color palette - carefully curated for task management\r\nexport const TASK_COLORS: TaskColor[] = [\r\n  { name: 'Azul', value: '#6366F1', light: '#818CF8' },\r\n  { name: 'Prpura', value: '#A855F7', light: '#C084FC' },\r\n  { name: 'Rosa', value: '#EC4899', light: '#F472B6' },\r\n  { name: 'Rojo', value: '#EF4444', light: '#F87171' },\r\n  { name: 'Naranja', value: '#F59E0B', light: '#FBBF24' },\r\n  { name: 'Amarillo', value: '#EAB308', light: '#FACC15' },\r\n  { name: 'Lima', value: '#84CC16', light: '#A3E635' },\r\n  { name: 'Verde', value: '#10B981', light: '#34D399' },\r\n  { name: 'Esmeralda', value: '#059669', light: '#10B981' },\r\n  { name: 'Cyan', value: '#06B6D4', light: '#22D3EE' },\r\n  { name: 'Azul Cielo', value: '#0EA5E9', light: '#38BDF8' },\r\n  { name: 'ndigo', value: '#4F46E5', light: '#6366F1' },\r\n  { name: 'Violeta', value: '#8B5CF6', light: '#A78BFA' },\r\n  { name: 'Fucsia', value: '#D946EF', light: '#E879F9' },\r\n  { name: 'Gris', value: '#6B7280', light: '#9CA3AF' },\r\n  { name: 'Piedra', value: '#78716C', light: '#A8A29E' },\r\n];\r\n\r\ninterface ColorPickerProps {\r\n  value?: string;\r\n  onChange: (color: string) => void;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function ColorPicker({ value = '#6366F1', onChange, disabled = false }: ColorPickerProps) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {TASK_COLORS.map((color) => {\r\n          const isSelected = value === color.value;\r\n\r\n          return (\r\n            <motion.button\r\n              key={color.value}\r\n              type=\"button\"\r\n              onClick={() => !disabled && onChange(color.value)}\r\n              className=\"relative rounded-full transition-all focus:outline-none focus:ring-2 focus:ring-offset-2\"\r\n              style={{\r\n                width: '32px',\r\n                height: '32px',\r\n                backgroundColor: color.value,\r\n                boxShadow: isSelected\r\n                  ? `0 0 0 2px #FFFFFF, 0 0 0 4px ${color.value}`\r\n                  : '0 1px 3px rgba(0, 0, 0, 0.12)',\r\n                opacity: disabled ? 0.5 : 1,\r\n                cursor: disabled ? 'not-allowed' : 'pointer',\r\n              }}\r\n              whileHover={disabled ? {} : { scale: 1.1 }}\r\n              whileTap={disabled ? {} : { scale: 0.95 }}\r\n              title={color.name}\r\n              disabled={disabled}\r\n            >\r\n              {isSelected && (\r\n                <motion.div\r\n                  initial={{ scale: 0 }}\r\n                  animate={{ scale: 1 }}\r\n                  className=\"absolute inset-0 flex items-center justify-center\"\r\n                >\r\n                  <Check className=\"w-4 h-4 text-white drop-shadow-md\" strokeWidth={3} />\r\n                </motion.div>\r\n              )}\r\n            </motion.button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Color name label */}\r\n      {value && (\r\n        <div className=\"text-xs text-center font-medium\" style={{ color: value }}>\r\n          {TASK_COLORS.find(c => c.value === value)?.name || 'Personalizado'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Task Form Modal - Complete CRUD for Gantt Tasks\r\n * Full-featured task creation/editing with user assignment, dates, dependencies, etc.\r\n * Similar to DHTMLX Gantt lightbox\r\n */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport {\r\n  X,\r\n  Calendar,\r\n  Users,\r\n  Link2,\r\n  CheckCircle2,\r\n  Clock,\r\n  AlertCircle,\r\n  Milestone as MilestoneIcon,\r\n  Palette,\r\n} from 'lucide-react'\r\nimport { Task, Theme } from './types'\r\nimport { themes } from './themes'\r\nimport { ColorPicker } from './ColorPicker'\r\n\r\nexport interface TaskFormData {\r\n  name: string\r\n  startDate?: Date\r\n  endDate?: Date\r\n  progress: number\r\n  status: 'todo' | 'in-progress' | 'completed'\r\n  isMilestone: boolean\r\n  color?: string // v0.11.0: Custom task color\r\n  assignees?: Array<{ name: string; avatar?: string; initials: string; color: string }>\r\n  dependencies?: string[]\r\n}\r\n\r\nexport interface TaskFormModalProps {\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Task to edit (undefined for create mode) */\r\n  task?: Task\r\n  /** Available tasks for dependencies */\r\n  availableTasks?: Task[]\r\n  /** Available users for assignment */\r\n  availableUsers?: Array<{ id: string; name: string; avatar?: string }>\r\n  /** Submit handler */\r\n  onSubmit: (data: TaskFormData) => void | Promise<void>\r\n  /** Is submitting */\r\n  isLoading?: boolean\r\n  /** Mode: create or edit */\r\n  mode?: 'create' | 'edit'\r\n  /** Theme: dark, light, or neutral (zen) */\r\n  theme?: Theme\r\n}\r\n\r\nexport function TaskFormModal({\r\n  isOpen,\r\n  onClose,\r\n  task,\r\n  availableTasks = [],\r\n  availableUsers = [],\r\n  onSubmit,\r\n  isLoading = false,\r\n  mode = task ? 'edit' : 'create',\r\n  theme = 'dark',\r\n}: TaskFormModalProps) {\r\n  // Get theme colors (with fallback to dark theme)\r\n  const themeColors = (themes[theme] || themes.dark)!\r\n\r\n  // Common styles\r\n  const inputStyle = {\r\n    backgroundColor: themeColors.bgSecondary,\r\n    border: `1px solid ${themeColors.borderLight}`,\r\n    color: themeColors.textPrimary,\r\n  }\r\n\r\n  const labelStyle = {\r\n    color: themeColors.textSecondary,\r\n  }\r\n\r\n  const [formData, setFormData] = useState<TaskFormData>({\r\n    name: '',\r\n    progress: 0,\r\n    status: 'todo',\r\n    isMilestone: false,\r\n    color: '#6366F1', // v0.11.0: Default blue pastel color\r\n    assignees: [],\r\n    dependencies: [],\r\n  })\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  // Initialize form with task data (edit mode)\r\n  useEffect(() => {\r\n    if (task) {\r\n      setFormData({\r\n        name: task.name,\r\n        startDate: task.startDate,\r\n        endDate: task.endDate,\r\n        progress: task.progress,\r\n        status: task.status || 'todo',\r\n        isMilestone: task.isMilestone || false,\r\n        color: task.color || '#6366F1', // v0.11.0: Use task color or default\r\n        assignees: task.assignees || [],\r\n        dependencies: task.dependencies || [],\r\n      })\r\n    } else {\r\n      // Reset for create mode\r\n      setFormData({\r\n        name: '',\r\n        progress: 0,\r\n        status: 'todo',\r\n        isMilestone: false,\r\n        color: '#6366F1', // v0.11.0: Default blue pastel color\r\n        assignees: [],\r\n        dependencies: [],\r\n      })\r\n    }\r\n  }, [task, isOpen])\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'El nombre es requerido'\r\n    }\r\n\r\n    if (formData.startDate && formData.endDate && formData.startDate > formData.endDate) {\r\n      newErrors.endDate = 'La fecha de fin debe ser posterior a la de inicio'\r\n    }\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (!validate()) return\r\n\r\n    try {\r\n      await onSubmit(formData)\r\n      onClose()\r\n    } catch (error) {\r\n      console.error('Error submitting task:', error)\r\n    }\r\n  }\r\n\r\n  const handleChange = (field: keyof TaskFormData, value: any) => {\r\n    setFormData((prev) => {\r\n      const updated = { ...prev, [field]: value }\r\n\r\n      // Smart status updates based on progress\r\n      if (field === 'progress') {\r\n        const progressValue = typeof value === 'number' ? value : parseInt(value, 10)\r\n\r\n        // Auto-complete task when progress reaches 100%\r\n        if (progressValue === 100 && prev.status !== 'completed') {\r\n          updated.status = 'completed'\r\n        }\r\n        // Auto-start task when progress > 0 and status is still 'todo'\r\n        else if (progressValue > 0 && progressValue < 100 && prev.status === 'todo') {\r\n          updated.status = 'in-progress'\r\n        }\r\n        // Auto-reset to todo when progress is 0 and status is in-progress\r\n        else if (progressValue === 0 && prev.status === 'in-progress') {\r\n          updated.status = 'todo'\r\n        }\r\n      }\r\n\r\n      return updated\r\n    })\r\n\r\n    // Clear error when user starts typing\r\n    if (errors[field]) {\r\n      setErrors((prev) => {\r\n        const newErrors = { ...prev }\r\n        delete newErrors[field]\r\n        return newErrors\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/50 z-50\"\r\n            onClick={onClose}\r\n          />\r\n\r\n          {/* Modal */}\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            transition={{ duration: 0.2, ease: [0.4, 0, 0.2, 1] }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\"\r\n          >\r\n            <div\r\n              className=\"w-full max-w-2xl rounded-xl shadow-2xl pointer-events-auto overflow-hidden\"\r\n              style={{\r\n                backgroundColor: themeColors.bgPrimary,\r\n                border: `1px solid ${themeColors.border}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              {/* Header */}\r\n              <div\r\n                className=\"flex items-center justify-between px-6 py-4\"\r\n                style={{ borderBottom: `1px solid ${themeColors.border}` }}\r\n              >\r\n                <h2 className=\"text-lg font-semibold\" style={{ color: themeColors.textPrimary }}>\r\n                  {mode === 'create' ? 'Crear Nueva Tarea' : 'Editar Tarea'}\r\n                </h2>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-2 rounded-lg transition-colors\"\r\n                  style={{\r\n                    color: themeColors.textSecondary,\r\n                  }}\r\n                  onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                  onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                  disabled={isLoading}\r\n                >\r\n                  <X className=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Form */}\r\n              <form onSubmit={handleSubmit} className=\"p-6 space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n                {/* Task Name */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\" style={labelStyle}>\r\n                    Nombre de la Tarea *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.name}\r\n                    onChange={(e) => handleChange('name', e.target.value)}\r\n                    className=\"w-full px-4 py-2.5 rounded-lg focus:outline-none focus:ring-2 focus:border-transparent\"\r\n                    style={inputStyle}\r\n                    onFocus={(e) => (e.currentTarget.style.borderColor = themeColors.accent)}\r\n                    onBlur={(e) => (e.currentTarget.style.borderColor = themeColors.borderLight)}\r\n                    placeholder=\"Ej: Disear mockups de la aplicacin\"\r\n                    disabled={isLoading}\r\n                  />\r\n                  {errors.name && (\r\n                    <p className=\"mt-1 text-sm text-red-400 flex items-center gap-1\">\r\n                      <AlertCircle className=\"w-4 h-4\" />\r\n                      {errors.name}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Dates Row */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  {/* Start Date */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2 flex items-center gap-2\" style={labelStyle}>\r\n                      <Calendar className=\"w-4 h-4\" />\r\n                      Fecha de Inicio\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={formData.startDate ? formData.startDate.toISOString().split('T')[0] : ''}\r\n                      onChange={(e) => handleChange('startDate', e.target.value ? new Date(e.target.value) : undefined)}\r\n                      className=\"w-full px-4 py-2.5 rounded-lg focus:outline-none focus:ring-2 focus:border-transparent\"\r\n                      style={inputStyle}\r\n                      disabled={isLoading || formData.isMilestone}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* End Date */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2 flex items-center gap-2\" style={labelStyle}>\r\n                      <Calendar className=\"w-4 h-4\" />\r\n                      Fecha de Fin\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={formData.endDate ? formData.endDate.toISOString().split('T')[0] : ''}\r\n                      onChange={(e) => handleChange('endDate', e.target.value ? new Date(e.target.value) : undefined)}\r\n                      className=\"w-full px-4 py-2.5 rounded-lg focus:outline-none focus:ring-2 focus:border-transparent\"\r\n                      style={inputStyle}\r\n                      disabled={isLoading || formData.isMilestone}\r\n                    />\r\n                    {errors.endDate && (\r\n                      <p className=\"mt-1 text-sm text-red-400 flex items-center gap-1\">\r\n                        <AlertCircle className=\"w-4 h-4\" />\r\n                        {errors.endDate}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Status */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2 flex items-center gap-2\" style={labelStyle}>\r\n                    <CheckCircle2 className=\"w-4 h-4\" />\r\n                    Estado\r\n                  </label>\r\n                  <select\r\n                    value={formData.status}\r\n                    onChange={(e) => handleChange('status', e.target.value)}\r\n                    className=\"w-full px-4 py-2.5 rounded-lg focus:outline-none focus:ring-2 focus:border-transparent\"\r\n                    style={inputStyle}\r\n                    disabled={isLoading}\r\n                  >\r\n                    <option value=\"todo\">Por Hacer</option>\r\n                    <option value=\"in-progress\">En Progreso</option>\r\n                    <option value=\"completed\">Completada</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* v0.11.0: Color Picker */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-3 flex items-center gap-2\" style={labelStyle}>\r\n                    <Palette className=\"w-4 h-4\" />\r\n                    Color de la Tarea\r\n                  </label>\r\n                  <ColorPicker\r\n                    value={formData.color}\r\n                    onChange={(color) => handleChange('color', color)}\r\n                    disabled={isLoading}\r\n                  />\r\n                  <p className=\"text-xs mt-2\" style={{ color: themeColors.textTertiary }}>\r\n                    {task?.parentId\r\n                      ? 'Esta subtarea hereda el color de su tarea padre'\r\n                      : task?.subtasks && task.subtasks.length > 0\r\n                      ? 'Las subtareas heredarn este color con menor opacidad'\r\n                      : 'Elige un color para organizar visualmente tus tareas'\r\n                    }\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Progress */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2 flex items-center justify-between\" style={labelStyle}>\r\n                    <span className=\"flex items-center gap-2\">\r\n                      <Clock className=\"w-4 h-4\" />\r\n                      Progreso\r\n                    </span>\r\n                    <span\r\n                      className=\"font-semibold px-2 py-0.5 rounded text-sm\"\r\n                      style={{\r\n                        color: formData.progress < 30 ? '#EF4444' : formData.progress < 70 ? '#F59E0B' : '#10B981',\r\n                        backgroundColor: formData.progress < 30 ? 'rgba(239, 68, 68, 0.1)' : formData.progress < 70 ? 'rgba(245, 158, 11, 0.1)' : 'rgba(16, 185, 129, 0.1)',\r\n                      }}\r\n                    >\r\n                      {formData.progress}%\r\n                    </span>\r\n                  </label>\r\n\r\n                  {/* Progress Slider with Color Gradient */}\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      step=\"5\"\r\n                      value={formData.progress}\r\n                      onChange={(e) => handleChange('progress', parseInt(e.target.value))}\r\n                      className=\"w-full h-2 rounded-lg appearance-none cursor-pointer\"\r\n                      style={{\r\n                        backgroundColor: themeColors.bgSecondary,\r\n                        accentColor: formData.progress < 30 ? '#EF4444' : formData.progress < 70 ? '#F59E0B' : '#10B981',\r\n                      }}\r\n                      disabled={isLoading}\r\n                    />\r\n                    {/* Visual progress bar underneath */}\r\n                    <div\r\n                      className=\"absolute top-0 left-0 h-2 rounded-lg pointer-events-none transition-all duration-300\"\r\n                      style={{\r\n                        width: `${formData.progress}%`,\r\n                        backgroundColor: formData.progress < 30 ? 'rgba(239, 68, 68, 0.3)' : formData.progress < 70 ? 'rgba(245, 158, 11, 0.3)' : 'rgba(16, 185, 129, 0.3)',\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Quick Progress Buttons */}\r\n                  <div className=\"flex items-center justify-between mt-3 gap-2\">\r\n                    <span className=\"text-xs\" style={{ color: themeColors.textTertiary }}>Accesos rpidos:</span>\r\n                    <div className=\"flex gap-1.5\">\r\n                      {[0, 25, 50, 75, 100].map((value) => (\r\n                        <button\r\n                          key={value}\r\n                          type=\"button\"\r\n                          onClick={() => handleChange('progress', value)}\r\n                          disabled={isLoading}\r\n                          className=\"px-3 py-1 text-xs font-medium rounded-md transition-all duration-200 hover:scale-105 active:scale-95\"\r\n                          style={{\r\n                            backgroundColor: formData.progress === value\r\n                              ? (value < 30 ? '#EF4444' : value < 70 ? '#F59E0B' : '#10B981')\r\n                              : themeColors.bgSecondary,\r\n                            color: formData.progress === value\r\n                              ? '#FFFFFF'\r\n                              : themeColors.textSecondary,\r\n                            border: `1px solid ${formData.progress === value\r\n                              ? (value < 30 ? '#EF4444' : value < 70 ? '#F59E0B' : '#10B981')\r\n                              : themeColors.borderLight}`,\r\n                          }}\r\n                        >\r\n                          {value}%\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Progress Labels */}\r\n                  <div className=\"flex justify-between text-xs mt-2\" style={{ color: themeColors.textTertiary }}>\r\n                    <span>0%</span>\r\n                    <span>25%</span>\r\n                    <span>50%</span>\r\n                    <span>75%</span>\r\n                    <span>100%</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Milestone Checkbox */}\r\n                <div\r\n                  className=\"flex items-center gap-3 p-4 rounded-lg\"\r\n                  style={{\r\n                    backgroundColor: themeColors.bgSecondary,\r\n                    border: `1px solid ${themeColors.borderLight}`,\r\n                  }}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"isMilestone\"\r\n                    checked={formData.isMilestone}\r\n                    onChange={(e) => handleChange('isMilestone', e.target.checked)}\r\n                    className=\"w-4 h-4 rounded focus:ring-2\"\r\n                    style={{\r\n                      accentColor: themeColors.accent,\r\n                    }}\r\n                    disabled={isLoading}\r\n                  />\r\n                  <label htmlFor=\"isMilestone\" className=\"flex items-center gap-2 text-sm cursor-pointer\" style={{ color: themeColors.textPrimary }}>\r\n                    <MilestoneIcon className=\"w-4 h-4 text-yellow-500\" />\r\n                    Marcar como Hito (Milestone)\r\n                  </label>\r\n                </div>\r\n\r\n                {/* Assignees */}\r\n                {availableUsers.length > 0 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2 flex items-center gap-2\" style={labelStyle}>\r\n                      <Users className=\"w-4 h-4\" />\r\n                      Asignar a\r\n                    </label>\r\n                    <div\r\n                      className=\"space-y-2 max-h-32 overflow-y-auto p-3 rounded-lg\"\r\n                      style={{\r\n                        backgroundColor: themeColors.bgSecondary,\r\n                        border: `1px solid ${themeColors.borderLight}`,\r\n                      }}\r\n                    >\r\n                      {availableUsers.map((user) => (\r\n                        <label\r\n                          key={user.id}\r\n                          className=\"flex items-center gap-3 cursor-pointer p-2 rounded\"\r\n                          onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                          onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={formData.assignees?.some((a) => a.name === user.name)}\r\n                            onChange={(e) => {\r\n                              const newAssignees = e.target.checked\r\n                                ? [\r\n                                    ...(formData.assignees || []),\r\n                                    {\r\n                                      name: user.name,\r\n                                      avatar: user.avatar,\r\n                                      initials: user.name\r\n                                        .split(' ')\r\n                                        .map((n) => n[0])\r\n                                        .join('')\r\n                                        .toUpperCase()\r\n                                        .slice(0, 2),\r\n                                      color: themeColors.accent,\r\n                                    },\r\n                                  ]\r\n                                : (formData.assignees || []).filter((a) => a.name !== user.name)\r\n                              handleChange('assignees', newAssignees)\r\n                            }}\r\n                            className=\"w-4 h-4 rounded\"\r\n                            style={{\r\n                              accentColor: themeColors.accent,\r\n                            }}\r\n                            disabled={isLoading}\r\n                          />\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div\r\n                              className=\"w-6 h-6 rounded-full flex items-center justify-center text-xs text-white font-semibold\"\r\n                              style={{ backgroundColor: themeColors.accent }}\r\n                            >\r\n                              {user.name.charAt(0).toUpperCase()}\r\n                            </div>\r\n                            <span className=\"text-sm\" style={{ color: themeColors.textPrimary }}>{user.name}</span>\r\n                          </div>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Dependencies */}\r\n                {availableTasks.length > 0 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2 flex items-center gap-2\" style={labelStyle}>\r\n                      <Link2 className=\"w-4 h-4\" />\r\n                      Dependencias\r\n                    </label>\r\n                    <div\r\n                      className=\"space-y-2 max-h-32 overflow-y-auto p-3 rounded-lg\"\r\n                      style={{\r\n                        backgroundColor: themeColors.bgSecondary,\r\n                        border: `1px solid ${themeColors.borderLight}`,\r\n                      }}\r\n                    >\r\n                      {availableTasks\r\n                        .filter((t) => t.id !== task?.id)\r\n                        .map((t) => (\r\n                          <label\r\n                            key={t.id}\r\n                            className=\"flex items-center gap-3 cursor-pointer p-2 rounded\"\r\n                            onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                            onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={formData.dependencies?.includes(t.id)}\r\n                              onChange={(e) => {\r\n                                const newDeps = e.target.checked\r\n                                  ? [...(formData.dependencies || []), t.id]\r\n                                  : (formData.dependencies || []).filter((id) => id !== t.id)\r\n                                handleChange('dependencies', newDeps)\r\n                              }}\r\n                              className=\"w-4 h-4 rounded\"\r\n                              style={{\r\n                                accentColor: themeColors.accent,\r\n                              }}\r\n                              disabled={isLoading}\r\n                            />\r\n                            <span className=\"text-sm\" style={{ color: themeColors.textPrimary }}>{t.name}</span>\r\n                          </label>\r\n                        ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </form>\r\n\r\n              {/* Footer */}\r\n              <div\r\n                className=\"flex items-center justify-end gap-3 px-6 py-4\"\r\n                style={{\r\n                  borderTop: `1px solid ${themeColors.border}`,\r\n                  backgroundColor: themeColors.bgPrimary,\r\n                }}\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onClose}\r\n                  className=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors\"\r\n                  style={{ color: themeColors.textSecondary }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.color = themeColors.textPrimary\r\n                    e.currentTarget.style.backgroundColor = themeColors.hoverBg\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.color = themeColors.textSecondary\r\n                    e.currentTarget.style.backgroundColor = 'transparent'\r\n                  }}\r\n                  disabled={isLoading}\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={handleSubmit}\r\n                  disabled={isLoading}\r\n                  className=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                  style={{\r\n                    backgroundColor: themeColors.accent,\r\n                    color: '#FFFFFF',\r\n                  }}\r\n                  onMouseEnter={(e) => !isLoading && (e.currentTarget.style.backgroundColor = themeColors.accentHover)}\r\n                  onMouseLeave={(e) => !isLoading && (e.currentTarget.style.backgroundColor = themeColors.accent)}\r\n                >\r\n                  {isLoading ? (\r\n                    <>\r\n                      <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                      Guardando...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <CheckCircle2 className=\"w-4 h-4\" />\r\n                      {mode === 'create' ? 'Crear Tarea' : 'Guardar Cambios'}\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n","/**\r\n * GanttAIAssistant - AI-powered natural language task editor\r\n * Allows users to edit Gantt tasks using natural language commands\r\n *\r\n * @version 0.14.0\r\n *\r\n * @example\r\n * // In GanttBoard with AI assistant\r\n * <GanttBoard\r\n *   tasks={tasks}\r\n *   config={{\r\n *     aiAssistant: {\r\n *       enabled: true,\r\n *       onCommand: async (command, tasks) => {\r\n *         // Call your AI API and return task updates\r\n *         const response = await fetch('/api/gantt-ai', {\r\n *           method: 'POST',\r\n *           body: JSON.stringify({ command, tasks })\r\n *         });\r\n *         return response.json();\r\n *       }\r\n *     }\r\n *   }}\r\n * />\r\n */\r\n\r\nimport { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Portal } from '../Portal';\r\nimport { Task, GanttTheme } from './types';\r\n\r\n// AI Command types for task operations\r\nexport type AICommandType =\r\n  | 'move_task'      // Move a task to a different date\r\n  | 'resize_task'    // Change task duration\r\n  | 'rename_task'    // Rename a task\r\n  | 'delete_task'    // Delete a task\r\n  | 'create_task'    // Create a new task\r\n  | 'link_tasks'     // Create dependency between tasks\r\n  | 'unlink_tasks'   // Remove dependency\r\n  | 'assign_task'    // Assign users to task\r\n  | 'set_progress'   // Update task progress\r\n  | 'set_status'     // Change task status\r\n  | 'split_task'     // Split a task\r\n  | 'group_tasks'    // Create subtasks\r\n  | 'unknown';       // Unknown command\r\n\r\n// Parsed AI command result\r\nexport interface AICommandResult {\r\n  type: AICommandType;\r\n  taskId?: string;\r\n  taskName?: string;\r\n  updates?: Partial<Task>;\r\n  newTask?: Task;\r\n  dependencyFrom?: string;\r\n  dependencyTo?: string;\r\n  message: string;\r\n  success: boolean;\r\n  error?: string;\r\n}\r\n\r\n// Chat message interface\r\nexport interface AIMessage {\r\n  id: string;\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n  timestamp: Date;\r\n  command?: AICommandResult;\r\n  isLoading?: boolean;\r\n}\r\n\r\n// AI Assistant configuration\r\nexport interface GanttAIAssistantConfig {\r\n  /** Enable AI assistant */\r\n  enabled?: boolean;\r\n  /** Custom placeholder text */\r\n  placeholder?: string;\r\n  /** Position of the chat button */\r\n  position?: 'bottom-right' | 'bottom-left' | 'top-right' | 'top-left';\r\n  /** Handler for AI commands - should return task updates */\r\n  onCommand?: (command: string, tasks: Task[]) => Promise<AICommandResult>;\r\n  /** Custom suggestions for the command palette */\r\n  suggestions?: string[];\r\n  /** Maximum messages to keep in history */\r\n  maxHistory?: number;\r\n}\r\n\r\nexport interface GanttAIAssistantProps {\r\n  /** All current tasks in the Gantt */\r\n  tasks: Task[];\r\n  /** Theme configuration */\r\n  theme: GanttTheme;\r\n  /** AI assistant configuration */\r\n  config: GanttAIAssistantConfig;\r\n  /** Callback when tasks should be updated */\r\n  onTasksUpdate: (updatedTasks: Task[]) => void;\r\n  /** Callback for single task update */\r\n  onTaskUpdate?: (taskId: string, updates: Partial<Task>) => void;\r\n  /** Callback for task creation */\r\n  onTaskCreate?: (task: Task) => void;\r\n  /** Callback for task deletion */\r\n  onTaskDelete?: (taskId: string) => void;\r\n  /** Callback for dependency creation */\r\n  onDependencyCreate?: (fromTaskId: string, toTaskId: string) => void;\r\n  /** Callback for dependency deletion */\r\n  onDependencyDelete?: (taskId: string, dependencyId: string) => void;\r\n}\r\n\r\n// Default suggestions for the command palette\r\nconst DEFAULT_SUGGESTIONS = [\r\n  'Move \"Task Name\" to next Monday',\r\n  'Extend \"Task Name\" by 3 days',\r\n  'Rename \"Old Name\" to \"New Name\"',\r\n  'Set \"Task Name\" progress to 50%',\r\n  'Link \"Task A\" to \"Task B\"',\r\n  'Create a new task called \"New Task\"',\r\n  'Delete \"Task Name\"',\r\n  'Assign John to \"Task Name\"',\r\n];\r\n\r\n// Sparkle/AI icon component\r\nconst AIIcon = () => (\r\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707\" />\r\n    <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n  </svg>\r\n);\r\n\r\n// Send icon\r\nconst SendIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\" />\r\n  </svg>\r\n);\r\n\r\n// Close icon\r\nconst CloseIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M18 6L6 18M6 6L18 18\" />\r\n  </svg>\r\n);\r\n\r\n// Minimize icon\r\nconst MinimizeIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M5 12h14\" />\r\n  </svg>\r\n);\r\n\r\n// Loading dots animation\r\nconst LoadingDots = () => (\r\n  <div className=\"flex gap-1 items-center\">\r\n    {[0, 1, 2].map((i) => (\r\n      <motion.div\r\n        key={i}\r\n        className=\"w-2 h-2 rounded-full bg-current\"\r\n        animate={{\r\n          scale: [1, 1.2, 1],\r\n          opacity: [0.5, 1, 0.5],\r\n        }}\r\n        transition={{\r\n          duration: 0.8,\r\n          repeat: Infinity,\r\n          delay: i * 0.15,\r\n        }}\r\n      />\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport function GanttAIAssistant({\r\n  tasks,\r\n  theme,\r\n  config,\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  onTasksUpdate: _onTasksUpdate, // Reserved for batch updates\r\n  onTaskUpdate,\r\n  onTaskCreate,\r\n  onTaskDelete,\r\n  onDependencyCreate,\r\n  onDependencyDelete,\r\n}: GanttAIAssistantProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isMinimized, setIsMinimized] = useState(false);\r\n  const [messages, setMessages] = useState<AIMessage[]>([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(true);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const chatContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const {\r\n    enabled = true,\r\n    placeholder = 'Ask AI to edit tasks... (e.g., \"Move Design to next week\")',\r\n    position = 'bottom-right',\r\n    onCommand,\r\n    suggestions = DEFAULT_SUGGESTIONS,\r\n    maxHistory = 50,\r\n  } = config;\r\n\r\n  // Auto-scroll to bottom on new messages\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]);\r\n\r\n  // Focus input when chat opens\r\n  useEffect(() => {\r\n    if (isOpen && !isMinimized && inputRef.current) {\r\n      setTimeout(() => inputRef.current?.focus(), 100);\r\n    }\r\n  }, [isOpen, isMinimized]);\r\n\r\n  // Apply task updates based on AI command result\r\n  const applyCommandResult = useCallback((result: AICommandResult) => {\r\n    if (!result.success) return;\r\n\r\n    switch (result.type) {\r\n      case 'move_task':\r\n      case 'resize_task':\r\n      case 'rename_task':\r\n      case 'set_progress':\r\n      case 'set_status':\r\n      case 'assign_task':\r\n        if (result.taskId && result.updates) {\r\n          onTaskUpdate?.(result.taskId, result.updates);\r\n        }\r\n        break;\r\n\r\n      case 'create_task':\r\n        if (result.newTask) {\r\n          onTaskCreate?.(result.newTask);\r\n        }\r\n        break;\r\n\r\n      case 'delete_task':\r\n        if (result.taskId) {\r\n          onTaskDelete?.(result.taskId);\r\n        }\r\n        break;\r\n\r\n      case 'link_tasks':\r\n        if (result.dependencyFrom && result.dependencyTo) {\r\n          onDependencyCreate?.(result.dependencyFrom, result.dependencyTo);\r\n        }\r\n        break;\r\n\r\n      case 'unlink_tasks':\r\n        if (result.taskId && result.dependencyFrom) {\r\n          onDependencyDelete?.(result.taskId, result.dependencyFrom);\r\n        }\r\n        break;\r\n    }\r\n  }, [onTaskUpdate, onTaskCreate, onTaskDelete, onDependencyCreate, onDependencyDelete]);\r\n\r\n  // Handle sending a command\r\n  const handleSendCommand = useCallback(async (command: string) => {\r\n    if (!command.trim() || isLoading) return;\r\n\r\n    // Add user message\r\n    const userMessage: AIMessage = {\r\n      id: `user-${Date.now()}`,\r\n      role: 'user',\r\n      content: command,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev.slice(-(maxHistory - 1)), userMessage]);\r\n    setInputValue('');\r\n    setShowSuggestions(false);\r\n    setIsLoading(true);\r\n\r\n    // Add loading message\r\n    const loadingMessage: AIMessage = {\r\n      id: `loading-${Date.now()}`,\r\n      role: 'assistant',\r\n      content: '',\r\n      timestamp: new Date(),\r\n      isLoading: true,\r\n    };\r\n    setMessages((prev) => [...prev, loadingMessage]);\r\n\r\n    try {\r\n      if (onCommand) {\r\n        const result = await onCommand(command, tasks);\r\n\r\n        // Remove loading message and add response\r\n        setMessages((prev) => {\r\n          const withoutLoading = prev.filter((m) => !m.isLoading);\r\n          const assistantMessage: AIMessage = {\r\n            id: `assistant-${Date.now()}`,\r\n            role: 'assistant',\r\n            content: result.message,\r\n            timestamp: new Date(),\r\n            command: result,\r\n          };\r\n          return [...withoutLoading, assistantMessage];\r\n        });\r\n\r\n        // Apply the command result\r\n        applyCommandResult(result);\r\n      } else {\r\n        // No handler provided - show helpful message\r\n        setMessages((prev) => {\r\n          const withoutLoading = prev.filter((m) => !m.isLoading);\r\n          return [\r\n            ...withoutLoading,\r\n            {\r\n              id: `assistant-${Date.now()}`,\r\n              role: 'assistant',\r\n              content: 'AI handler not configured. Please provide an onCommand handler in the aiAssistant config.',\r\n              timestamp: new Date(),\r\n            },\r\n          ];\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // Handle error\r\n      setMessages((prev) => {\r\n        const withoutLoading = prev.filter((m) => !m.isLoading);\r\n        return [\r\n          ...withoutLoading,\r\n          {\r\n            id: `error-${Date.now()}`,\r\n            role: 'assistant',\r\n            content: `Sorry, I encountered an error: ${error instanceof Error ? error.message : 'Unknown error'}`,\r\n            timestamp: new Date(),\r\n          },\r\n        ];\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [isLoading, maxHistory, onCommand, tasks, applyCommandResult]);\r\n\r\n  // Handle input submit\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    handleSendCommand(inputValue);\r\n  };\r\n\r\n  // Handle suggestion click\r\n  const handleSuggestionClick = (suggestion: string) => {\r\n    setInputValue(suggestion);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  // Handle keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Toggle chat with Cmd/Ctrl + K\r\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\r\n        e.preventDefault();\r\n        setIsOpen((prev) => !prev);\r\n        if (!isOpen) {\r\n          setIsMinimized(false);\r\n        }\r\n      }\r\n      // Close on Escape\r\n      if (e.key === 'Escape' && isOpen) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [isOpen]);\r\n\r\n  if (!enabled) return null;\r\n\r\n  // Position classes\r\n  const positionClasses = {\r\n    'bottom-right': 'bottom-4 right-4',\r\n    'bottom-left': 'bottom-4 left-4',\r\n    'top-right': 'top-4 right-4',\r\n    'top-left': 'top-4 left-4',\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Floating AI Assistant Button */}\r\n      <AnimatePresence>\r\n        {!isOpen && (\r\n          <motion.button\r\n            initial={{ scale: 0, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0, opacity: 0 }}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            className={`fixed ${positionClasses[position]} z-[99999] flex items-center gap-2 px-4 py-3 rounded-full shadow-lg transition-colors`}\r\n            style={{\r\n              background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n              color: 'white',\r\n              boxShadow: '0 4px 20px rgba(59, 130, 246, 0.4)',\r\n            }}\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <AIIcon />\r\n            <span className=\"text-sm font-medium\">AI Assistant</span>\r\n            <kbd className=\"hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-mono rounded bg-white/20\">\r\n              K\r\n            </kbd>\r\n          </motion.button>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Chat Panel */}\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            ref={chatContainerRef}\r\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            animate={{\r\n              opacity: 1,\r\n              y: 0,\r\n              scale: 1,\r\n              height: isMinimized ? 'auto' : 500,\r\n            }}\r\n            exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className={`fixed ${positionClasses[position]} z-[99999] w-96 rounded-2xl overflow-hidden shadow-2xl flex flex-col`}\r\n            style={{\r\n              background: theme.bgPrimary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: `0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px ${theme.border}`,\r\n            }}\r\n          >\r\n            {/* Header */}\r\n            <div\r\n              className=\"flex items-center justify-between px-4 py-3\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n              }}\r\n            >\r\n              <div className=\"flex items-center gap-2 text-white\">\r\n                <AIIcon />\r\n                <span className=\"font-semibold\">Gantt AI Assistant</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => setIsMinimized((prev) => !prev)}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/20 text-white/80 hover:text-white transition-colors\"\r\n                >\r\n                  <MinimizeIcon />\r\n                </button>\r\n                <button\r\n                  onClick={() => setIsOpen(false)}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/20 text-white/80 hover:text-white transition-colors\"\r\n                >\r\n                  <CloseIcon />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Chat Content */}\r\n            <AnimatePresence>\r\n              {!isMinimized && (\r\n                <motion.div\r\n                  initial={{ height: 0, opacity: 0 }}\r\n                  animate={{ height: 'auto', opacity: 1 }}\r\n                  exit={{ height: 0, opacity: 0 }}\r\n                  className=\"flex flex-col flex-1 min-h-0\"\r\n                >\r\n                  {/* Messages */}\r\n                  <div\r\n                    className=\"flex-1 overflow-y-auto p-4 space-y-4\"\r\n                    style={{ maxHeight: 350 }}\r\n                  >\r\n                    {messages.length === 0 && showSuggestions && (\r\n                      <div className=\"space-y-3\">\r\n                        <p\r\n                          className=\"text-sm text-center\"\r\n                          style={{ color: theme.textSecondary }}\r\n                        >\r\n                          Try asking me to edit your Gantt chart:\r\n                        </p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {suggestions.slice(0, 4).map((suggestion, index) => (\r\n                            <button\r\n                              key={index}\r\n                              onClick={() => handleSuggestionClick(suggestion)}\r\n                              className=\"text-xs px-3 py-1.5 rounded-full transition-colors\"\r\n                              style={{\r\n                                background: theme.bgSecondary,\r\n                                color: theme.textSecondary,\r\n                                border: `1px solid ${theme.border}`,\r\n                              }}\r\n                            >\r\n                              {suggestion.length > 30\r\n                                ? suggestion.slice(0, 30) + '...'\r\n                                : suggestion}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {messages.map((message) => (\r\n                      <motion.div\r\n                        key={message.id}\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className={`flex ${\r\n                          message.role === 'user' ? 'justify-end' : 'justify-start'\r\n                        }`}\r\n                      >\r\n                        <div\r\n                          className={`max-w-[85%] rounded-2xl px-4 py-2.5 ${\r\n                            message.role === 'user'\r\n                              ? 'rounded-br-md'\r\n                              : 'rounded-bl-md'\r\n                          }`}\r\n                          style={{\r\n                            background:\r\n                              message.role === 'user'\r\n                                ? 'linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)'\r\n                                : theme.bgSecondary,\r\n                            color:\r\n                              message.role === 'user'\r\n                                ? 'white'\r\n                                : theme.textPrimary,\r\n                          }}\r\n                        >\r\n                          {message.isLoading ? (\r\n                            <LoadingDots />\r\n                          ) : (\r\n                            <p className=\"text-sm whitespace-pre-wrap\">\r\n                              {message.content}\r\n                            </p>\r\n                          )}\r\n\r\n                          {/* Command result badge */}\r\n                          {message.command && (\r\n                            <div\r\n                              className=\"mt-2 text-xs px-2 py-1 rounded-md inline-flex items-center gap-1\"\r\n                              style={{\r\n                                background: message.command.success\r\n                                  ? 'rgba(16, 185, 129, 0.2)'\r\n                                  : 'rgba(239, 68, 68, 0.2)',\r\n                                color: message.command.success\r\n                                  ? '#10B981'\r\n                                  : '#EF4444',\r\n                              }}\r\n                            >\r\n                              {message.command.success ? '' : ''}\r\n                              <span className=\"capitalize\">\r\n                                {message.command.type.replace(/_/g, ' ')}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </motion.div>\r\n                    ))}\r\n                    <div ref={messagesEndRef} />\r\n                  </div>\r\n\r\n                  {/* Input */}\r\n                  <form\r\n                    onSubmit={handleSubmit}\r\n                    className=\"p-3 border-t\"\r\n                    style={{ borderColor: theme.border }}\r\n                  >\r\n                    <div\r\n                      className=\"flex items-center gap-2 rounded-xl px-4 py-2\"\r\n                      style={{\r\n                        background: theme.bgSecondary,\r\n                        border: `1px solid ${theme.border}`,\r\n                      }}\r\n                    >\r\n                      <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={inputValue}\r\n                        onChange={(e) => setInputValue(e.target.value)}\r\n                        placeholder={placeholder}\r\n                        disabled={isLoading}\r\n                        className=\"flex-1 bg-transparent text-sm outline-none\"\r\n                        style={{ color: theme.textPrimary }}\r\n                      />\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={!inputValue.trim() || isLoading}\r\n                        className=\"p-2 rounded-lg transition-all disabled:opacity-50\"\r\n                        style={{\r\n                          background: inputValue.trim()\r\n                            ? 'linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)'\r\n                            : 'transparent',\r\n                          color: inputValue.trim() ? 'white' : theme.textSecondary,\r\n                        }}\r\n                      >\r\n                        <SendIcon />\r\n                      </button>\r\n                    </div>\r\n                    <p\r\n                      className=\"text-[10px] text-center mt-2\"\r\n                      style={{ color: theme.textTertiary }}\r\n                    >\r\n                      Press Enter to send  Esc to close\r\n                    </p>\r\n                  </form>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nexport default GanttAIAssistant;\r\n","import { useState, useCallback, useRef } from 'react';\r\n\r\ninterface HistoryState<T> {\r\n  past: T[];\r\n  present: T;\r\n  future: T[];\r\n}\r\n\r\ninterface UseUndoRedoResult<T> {\r\n  state: T;\r\n  setState: (newStateOrUpdater: T | ((prev: T) => T), addToHistory?: boolean) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  clearHistory: () => void;\r\n}\r\n\r\n/**\r\n * Custom hook for undo/redo functionality\r\n * @param initialState - Initial state value\r\n * @param maxHistorySize - Maximum number of history entries (default: 50)\r\n */\r\nexport function useUndoRedo<T>(\r\n  initialState: T,\r\n  maxHistorySize: number = 50\r\n): UseUndoRedoResult<T> {\r\n  const [history, setHistory] = useState<HistoryState<T>>({\r\n    past: [],\r\n    present: initialState,\r\n    future: [],\r\n  });\r\n\r\n  // Track if we're currently applying undo/redo to avoid infinite loops\r\n  const isApplyingHistory = useRef(false);\r\n\r\n  const setState = useCallback(\r\n    (newStateOrUpdater: T | ((prev: T) => T), addToHistory: boolean = true) => {\r\n      setHistory((currentHistory) => {\r\n        // Resolve the new state (handle both direct values and updater functions)\r\n        const resolvedNewState =\r\n          typeof newStateOrUpdater === 'function'\r\n            ? (newStateOrUpdater as (prev: T) => T)(currentHistory.present)\r\n            : newStateOrUpdater;\r\n\r\n        if (isApplyingHistory.current) {\r\n          // If we're applying history, just update present without adding to history\r\n          return {\r\n            ...currentHistory,\r\n            present: resolvedNewState,\r\n          };\r\n        }\r\n\r\n        if (!addToHistory) {\r\n          // Direct state update without history\r\n          return {\r\n            ...currentHistory,\r\n            present: resolvedNewState,\r\n          };\r\n        }\r\n\r\n        const newPast = [...currentHistory.past, currentHistory.present];\r\n\r\n        // Limit history size\r\n        if (newPast.length > maxHistorySize) {\r\n          newPast.shift();\r\n        }\r\n\r\n        return {\r\n          past: newPast,\r\n          present: resolvedNewState,\r\n          future: [], // Clear future when making a new change\r\n        };\r\n      });\r\n    },\r\n    [maxHistorySize]\r\n  );\r\n\r\n  const undo = useCallback(() => {\r\n    setHistory((currentHistory) => {\r\n      if (currentHistory.past.length === 0) {\r\n        return currentHistory;\r\n      }\r\n\r\n      const previous = currentHistory.past[currentHistory.past.length - 1];\r\n      const newPast = currentHistory.past.slice(0, currentHistory.past.length - 1);\r\n\r\n      isApplyingHistory.current = true;\r\n      setTimeout(() => {\r\n        isApplyingHistory.current = false;\r\n      }, 0);\r\n\r\n      return {\r\n        past: newPast,\r\n        present: previous,\r\n        future: [currentHistory.present, ...currentHistory.future],\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const redo = useCallback(() => {\r\n    setHistory((currentHistory) => {\r\n      if (currentHistory.future.length === 0) {\r\n        return currentHistory;\r\n      }\r\n\r\n      const next = currentHistory.future[0];\r\n      const newFuture = currentHistory.future.slice(1);\r\n\r\n      isApplyingHistory.current = true;\r\n      setTimeout(() => {\r\n        isApplyingHistory.current = false;\r\n      }, 0);\r\n\r\n      return {\r\n        past: [...currentHistory.past, currentHistory.present],\r\n        present: next,\r\n        future: newFuture,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const clearHistory = useCallback(() => {\r\n    setHistory((currentHistory) => ({\r\n      past: [],\r\n      present: currentHistory.present,\r\n      future: [],\r\n    }));\r\n  }, []);\r\n\r\n  return {\r\n    state: history.present,\r\n    setState,\r\n    undo,\r\n    redo,\r\n    canUndo: history.past.length > 0,\r\n    canRedo: history.future.length > 0,\r\n    clearHistory,\r\n  };\r\n}\r\n","import { useEffect } from 'react';\r\n\r\ninterface UseGanttUndoRedoKeysOptions {\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * Hook to handle keyboard shortcuts for undo/redo\r\n * Ctrl+Z / Cmd+Z for undo\r\n * Ctrl+Y / Cmd+Shift+Z for redo\r\n */\r\nexport function useGanttUndoRedoKeys({\r\n  undo,\r\n  redo,\r\n  canUndo,\r\n  canRedo,\r\n  enabled = true,\r\n}: UseGanttUndoRedoKeysOptions) {\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n      const ctrlKey = isMac ? e.metaKey : e.ctrlKey;\r\n\r\n      // Undo: Ctrl+Z (Windows/Linux) or Cmd+Z (Mac)\r\n      if (ctrlKey && e.key === 'z' && !e.shiftKey && canUndo) {\r\n        e.preventDefault();\r\n        undo();\r\n        return;\r\n      }\r\n\r\n      // Redo: Ctrl+Y (Windows/Linux) or Cmd+Shift+Z (Mac)\r\n      if (canRedo) {\r\n        if (!isMac && ctrlKey && e.key === 'y') {\r\n          e.preventDefault();\r\n          redo();\r\n          return;\r\n        }\r\n        if (isMac && ctrlKey && e.shiftKey && e.key === 'z') {\r\n          e.preventDefault();\r\n          redo();\r\n          return;\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [undo, redo, canUndo, canRedo, enabled]);\r\n}\r\n","import { Task, GanttTemplates } from './types';\r\nimport { ganttUtils } from './ganttUtils';\r\n\r\n/**\r\n * Default templates for Gantt rendering\r\n * Users can override these with custom templates\r\n */\r\nexport const defaultTemplates: Required<GanttTemplates> = {\r\n  taskTooltip: (task: Task) => {\r\n    const lines: string[] = [\r\n      `<strong>${task.name}</strong>`,\r\n    ];\r\n\r\n    if (task.startDate && task.endDate) {\r\n      lines.push(\r\n        `${ganttUtils.formatDate(task.startDate)} - ${ganttUtils.formatDate(task.endDate)}`\r\n      );\r\n      const duration = ganttUtils.calculateDuration(task.startDate, task.endDate);\r\n      lines.push(`Duration: ${duration} days`);\r\n    }\r\n\r\n    if (task.progress !== undefined) {\r\n      lines.push(`Progress: ${task.progress}%`);\r\n    }\r\n\r\n    if (task.status) {\r\n      lines.push(`Status: ${task.status}`);\r\n    }\r\n\r\n    if (task.assignees && task.assignees.length > 0) {\r\n      const assigneeNames = task.assignees.map(a => a.name).join(', ');\r\n      lines.push(`Assigned: ${assigneeNames}`);\r\n    }\r\n\r\n    if (task.dependencies && task.dependencies.length > 0) {\r\n      lines.push(`Dependencies: ${task.dependencies.length}`);\r\n    }\r\n\r\n    return lines.join('<br/>');\r\n  },\r\n\r\n  taskLabel: (task: Task) => {\r\n    return task.name;\r\n  },\r\n\r\n  gridCell: (task: Task, column, value) => {\r\n    // Return default value as-is\r\n    return value;\r\n  },\r\n\r\n  taskClass: (task: Task) => {\r\n    const classes: string[] = [];\r\n\r\n    if (task.isCriticalPath) {\r\n      classes.push('critical-path');\r\n    }\r\n\r\n    if (task.status === 'completed') {\r\n      classes.push('completed');\r\n    } else if (task.status === 'in-progress') {\r\n      classes.push('in-progress');\r\n    } else if (task.status === 'todo') {\r\n      classes.push('todo');\r\n    }\r\n\r\n    if (task.isMilestone) {\r\n      classes.push('milestone');\r\n    }\r\n\r\n    return classes.join(' ');\r\n  },\r\n\r\n  milestoneContent: (task: Task) => {\r\n    return ` ${task.name}`;\r\n  },\r\n\r\n  dateFormat: (date: Date) => {\r\n    return ganttUtils.formatDate(date);\r\n  },\r\n\r\n  durationFormat: (days: number) => {\r\n    if (days === 1) return '1 day';\r\n    return `${days} days`;\r\n  },\r\n\r\n  progressFormat: (progress: number) => {\r\n    return `${progress}%`;\r\n  },\r\n};\r\n\r\n/**\r\n * Merge user templates with defaults\r\n */\r\nexport function mergeTemplates(\r\n  userTemplates?: Partial<GanttTemplates>\r\n): Required<GanttTemplates> {\r\n  return {\r\n    ...defaultTemplates,\r\n    ...userTemplates,\r\n  };\r\n}\r\n","import { useState, useRef, useEffect, useCallback, useMemo, useContext, forwardRef, useImperativeHandle } from 'react';\nimport { Task, TimeScale, Theme, GanttConfig, GanttColumn, ColumnType, RowDensity } from './types';\nimport { deriveThemeFromCSS } from './deriveThemeFromCSS';\nimport { GanttToolbar } from './GanttToolbar';\nimport { TaskGrid } from './TaskGrid';\nimport { Timeline } from './Timeline';\nimport { ContextMenu, MenuIcons } from './ContextMenu'; // v0.8.0: Split task context menu\nimport { TaskFormModal } from './TaskFormModal'; // v0.10.0: Task edit modal\nimport { GanttAIAssistant } from './GanttAIAssistant'; // v0.14.0: AI Assistant\nimport { useUndoRedo } from './useUndoRedo';\nimport { useGanttUndoRedoKeys } from './useGanttUndoRedoKeys';\nimport { ThemeContext } from '../../theme/ThemeProvider';\nimport { GanttThemeContext } from './GanttThemeContext';\nimport { GanttI18nContext } from './GanttI18nContext'; // v0.15.0: i18n context\nimport { mergeTranslations, GanttTranslations } from './i18n'; // v0.15.0: i18n\nimport { GanttBoardRef } from './GanttBoardRef';\nimport { ganttUtils } from './ganttUtils';\nimport { mergeTemplates } from './defaultTemplates';\nimport html2canvas from 'html2canvas';\nimport {\n  indentTasks,\n  outdentTasks,\n  moveTasks,\n  deleteTasks,\n  duplicateTasks,\n  createTask,\n  renameTask,\n  toggleTaskExpansion,\n  createSubtask,\n} from './hierarchyUtils';\n\ninterface GanttBoardProps {\n  tasks: Task[];\n  config?: GanttConfig;\n  onTasksChange?: (tasks: Task[]) => void;\n}\n\n// Utility function to get row height based on density\nconst getRowHeight = (density: RowDensity): number => {\n  switch (density) {\n    case 'compact':\n      return 40;\n    case 'comfortable':\n      return 48;\n    case 'spacious':\n      return 56;\n    default:\n      return 48;\n  }\n};\n\nexport const GanttBoard = forwardRef<GanttBoardRef, GanttBoardProps>(function GanttBoard(\n  { tasks, config = {}, onTasksChange },\n  ref\n) {\n  const {\n    theme: initialTheme,\n    timeScale: initialTimeScale = 'week',\n    rowDensity: initialRowDensity = 'comfortable',\n    showThemeSelector = true,\n    showExportButton = true, // v0.12.0: Show export dropdown in toolbar\n    availableUsers = [],\n    templates,\n    enableAutoCriticalPath = true, // v0.11.1: Allow disabling automatic CPM calculation\n    aiAssistant, // v0.14.0: AI Assistant configuration\n    // v0.15.0: Internationalization\n    locale = 'en',\n    customTranslations,\n    // v0.14.3: Create Task button in toolbar\n    showCreateTaskButton = false,\n    createTaskLabel,\n    onCreateTask,\n    // UI events\n    onThemeChange, // v0.9.0\n    // Basic events\n    onTaskClick,\n    onTaskDblClick, // v0.8.0\n    onTaskContextMenu, // v0.8.0\n    onTaskUpdate,\n    onProgressChange, // v0.8.0\n    // v0.16.0: Context menu action callbacks\n    onTaskEdit,\n    onTaskAddSubtask,\n    onTaskMarkIncomplete,\n    onTaskSetInProgress,\n    // Dependency events\n    onDependencyCreate,\n    onDependencyDelete,\n    // Lifecycle events (v0.8.0)\n    onBeforeTaskAdd,\n    onAfterTaskAdd,\n    onBeforeTaskUpdate,\n    onAfterTaskUpdate,\n    onBeforeTaskDelete,\n    onAfterTaskDelete,\n  } = config;\n\n  // Try to get global theme from ThemeProvider (will return undefined if not in ThemeProvider)\n  const themeContext = useContext(ThemeContext);\n  const globalTheme = themeContext?.theme as Theme | undefined;\n\n  // Use global theme if available, otherwise fall back to initialTheme or 'dark'\n  const [currentTheme, setCurrentTheme] = useState<Theme>(globalTheme || initialTheme || 'dark');\n\n  const [timeScale, setTimeScale] = useState<TimeScale>(initialTimeScale);\n  const [rowDensity, setRowDensity] = useState<RowDensity>(initialRowDensity);\n  const [zoom, setZoom] = useState(1);\n  const [scrollTop, setScrollTop] = useState(0);\n  const [isResizing, setIsResizing] = useState(false);\n  const [gridWidthOverride, setGridWidthOverride] = useState<number | null>(null);\n\n  // v0.8.0: Context menu state for Split task feature\n  const [contextMenu, setContextMenu] = useState<{ isOpen: boolean; x: number; y: number; task: Task | null }>({\n    isOpen: false,\n    x: 0,\n    y: 0,\n    task: null,\n  });\n\n  // v0.10.0: Task form modal state for editing\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\n\n  // Sync with global theme changes (from ThemeContext)\n  useEffect(() => {\n    if (globalTheme && globalTheme !== currentTheme) {\n      setCurrentTheme(globalTheme);\n    }\n  }, [globalTheme]);\n\n  // v0.11.6: Sync with initialTheme prop changes (for external theme control)\n  useEffect(() => {\n    if (initialTheme && initialTheme !== currentTheme) {\n      setCurrentTheme(initialTheme);\n    }\n  }, [initialTheme]);\n\n  // v0.9.0: Handle theme change with callback\n  const handleThemeChange = useCallback(\n    (newTheme: Theme) => {\n      setCurrentTheme(newTheme);\n      onThemeChange?.(newTheme);\n    },\n    [onThemeChange]\n  );\n\n  // Use undo/redo hook for task management\n  const {\n    state: localTasks,\n    setState: setLocalTasks,\n    undo,\n    redo,\n    canUndo,\n    canRedo,\n    clearHistory,\n  } = useUndoRedo<Task[]>(tasks, 50);\n\n  // Sync parent tasks prop changes to local state (e.g., after external DB operations)\n  useEffect(() => {\n    setLocalTasks(tasks);\n  }, [tasks, setLocalTasks]);\n\n  // v0.17.19: Track previous tasks for comparison to avoid unnecessary onTasksChange calls\n  const prevTasksRef = useRef<Task[]>(tasks);\n  const isInitialMount = useRef(true);\n\n  // Sync local tasks with parent when they change (optimized to avoid unnecessary calls)\n  useEffect(() => {\n    // Skip on initial mount - parent already has the tasks\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n      prevTasksRef.current = localTasks;\n      return;\n    }\n\n    if (!onTasksChange) return;\n\n    // Compare tasks to detect meaningful changes (not just reference changes)\n    // We use JSON stringify for deep comparison - this catches:\n    // - Added/removed tasks\n    // - Changed task properties (name, dates, progress, etc.)\n    // - But NOT just reordering of the same data in memory\n    const prevJson = JSON.stringify(prevTasksRef.current);\n    const currentJson = JSON.stringify(localTasks);\n\n    if (prevJson !== currentJson) {\n      prevTasksRef.current = localTasks;\n      onTasksChange(localTasks);\n    }\n  }, [localTasks, onTasksChange]);\n\n  // v0.15.0: Compute translations based on locale (must be before columns)\n  const translations: GanttTranslations = useMemo(() => {\n    return mergeTranslations(locale, customTranslations);\n  }, [locale, customTranslations]);\n\n  // Column configuration - Default: Only show task name\n  // v0.13.8: Name column is resizable with min/max width constraints\n  // v0.13.9: Increased default width to 320px for better readability of long task names\n  // v0.15.0: Column labels now use translations\n  const getDefaultColumns = useCallback((t: GanttTranslations): GanttColumn[] => [\n    { id: 'name', label: t.columns.taskName, width: 400, minWidth: 200, maxWidth: 2000, visible: true, sortable: true, resizable: false },\n    { id: 'startDate', label: t.columns.startDate, width: 110, visible: false, sortable: true },\n    { id: 'endDate', label: t.columns.endDate, width: 110, visible: false, sortable: true },\n    { id: 'duration', label: t.columns.duration, width: 80, visible: false, sortable: true },\n    { id: 'assignees', label: t.columns.assignees, width: 120, visible: false, sortable: false },\n    { id: 'status', label: t.columns.status, width: 80, visible: false, sortable: true },\n    { id: 'progress', label: t.columns.progress, width: 120, visible: false, sortable: true },\n  ], []);\n\n  const [columns, setColumns] = useState<GanttColumn[]>(() => getDefaultColumns(translations));\n\n  // Update column labels when locale changes\n  useEffect(() => {\n    setColumns(prev => prev.map(col => ({\n      ...col,\n      label: translations.columns[col.id === 'name' ? 'taskName' : col.id as keyof typeof translations.columns] || col.label,\n    })));\n  }, [translations]);\n\n  // Calculate grid width based on visible columns (memoized)\n  const calculatedGridWidth = useMemo(() =>\n    columns\n      .filter(col => col.visible)\n      .reduce((sum, col) => sum + col.width, 0) + 60, // +60 for add button and padding\n    [columns]\n  );\n\n  const gridWidth = gridWidthOverride || calculatedGridWidth;\n\n  const gridScrollRef = useRef<HTMLDivElement>(null);\n  const timelineScrollRef = useRef<HTMLDivElement>(null);\n  const ganttContainerRef = useRef<HTMLDivElement>(null);\n\n  // Derivar theme desde CSS variables si hay ThemeProvider, sino usar theme esttico\n  const theme = useMemo(() => {\n    return deriveThemeFromCSS(currentTheme);\n  }, [currentTheme]);\n\n  // Crear valor del contexto del tema para componentes hijos (Portal, etc.)\n  const ganttThemeContextValue = useMemo(() => ({\n    theme,\n    themeName: currentTheme,\n  }), [theme, currentTheme]);\n\n  // Merge user templates with defaults\n  const mergedTemplates = useMemo(() => {\n    return mergeTemplates(templates);\n  }, [templates]);\n\n  //  KILLER FEATURE #1: Calculate Critical Path (auto-updates when tasks change)\n  // This is BETTER than DHTMLX - we recalculate CPM automatically on every change\n  // v0.11.1: Can be disabled via enableAutoCriticalPath prop to preserve custom colors\n  const tasksWithCriticalPath = useMemo(() => {\n    // If auto critical path is disabled, return tasks as-is (preserve custom colors)\n    if (!enableAutoCriticalPath) {\n      return localTasks;\n    }\n\n    const criticalPathIds = ganttUtils.calculateCriticalPath(localTasks);\n\n    const markCritical = (tasks: Task[]): Task[] => {\n      return tasks.map(task => ({\n        ...task,\n        isCriticalPath: criticalPathIds.includes(task.id),\n        subtasks: task.subtasks ? markCritical(task.subtasks) : undefined,\n      }));\n    };\n\n    return markCritical(localTasks);\n  }, [localTasks, enableAutoCriticalPath]);\n\n  // Calculate row height based on density\n  const rowHeight = getRowHeight(rowDensity);\n\n  // Enable undo/redo keyboard shortcuts\n  useGanttUndoRedoKeys({\n    undo,\n    redo,\n    canUndo,\n    canRedo,\n    enabled: true,\n  });\n\n  // Expose imperative API via ref (similar to DHTMLX gantt.* methods)\n  useImperativeHandle(ref, () => ({\n    // ==================== CRUD Methods ====================\n    getTask: (id: string) => ganttUtils.findTaskById(localTasks, id),\n\n    addTask: (task: Task, parentId?: string) => {\n      setLocalTasks((prev) => {\n        if (!parentId) {\n          // Add as root-level task\n          return [...prev, { ...task, level: 0 }];\n        }\n\n        // Add as subtask\n        const addToParent = (tasks: Task[]): Task[] => {\n          return tasks.map((t) => {\n            if (t.id === parentId) {\n              return {\n                ...t,\n                subtasks: [...(t.subtasks || []), { ...task, parentId, level: (t.level || 0) + 1 }],\n                isExpanded: true,\n              };\n            }\n            if (t.subtasks) {\n              return { ...t, subtasks: addToParent(t.subtasks) };\n            }\n            return t;\n          });\n        };\n        return addToParent(prev);\n      });\n    },\n\n    updateTask: (id: string, updates: Partial<Task>) => {\n      setLocalTasks((prev) => {\n        const update = (tasks: Task[]): Task[] => {\n          return tasks.map((task) => {\n            if (task.id === id) {\n              return { ...task, ...updates };\n            }\n            if (task.subtasks) {\n              return { ...task, subtasks: update(task.subtasks) };\n            }\n            return task;\n          });\n        };\n        return update(prev);\n      });\n    },\n\n    deleteTask: (id: string) => {\n      setLocalTasks((prev) => {\n        const remove = (tasks: Task[]): Task[] => {\n          return tasks.filter((task) => {\n            if (task.id === id) return false;\n            if (task.subtasks) {\n              task.subtasks = remove(task.subtasks);\n            }\n            return true;\n          });\n        };\n        return remove(prev);\n      });\n    },\n\n    deleteTasks: (ids: string[]) => {\n      setLocalTasks((prev) => deleteTasks(prev, ids));\n    },\n\n    duplicateTask: (id: string) => {\n      setLocalTasks((prev) => duplicateTasks(prev, [id]));\n    },\n\n    // v0.8.1: Split task feature (creates GAP like Bryntum)\n    splitTask: (id: string, splitDate: Date, gapDays = 3) => {\n      setLocalTasks((prev) => ganttUtils.splitTask(prev, id, splitDate, gapDays));\n    },\n\n    // ==================== Utility Methods ====================\n    calculateEndDate: ganttUtils.calculateEndDate,\n    calculateDuration: ganttUtils.calculateDuration,\n    validateDependency: (fromTaskId: string, toTaskId: string) => {\n      return !ganttUtils.validateDependencies(localTasks, fromTaskId, toTaskId);\n    },\n\n    // ==================== Data Methods ====================\n    getAllTasks: () => ganttUtils.flattenTasks(localTasks),\n\n    getTasksByStatus: (status: 'todo' | 'in-progress' | 'completed') => {\n      return ganttUtils.flattenTasks(localTasks).filter((t) => t.status === status);\n    },\n\n    getTasksByParent: (parentId?: string) => {\n      if (!parentId) {\n        // Return root-level tasks\n        return localTasks.filter((t) => !t.parentId);\n      }\n      const parent = ganttUtils.findTaskById(localTasks, parentId);\n      return parent?.subtasks || [];\n    },\n\n    getCriticalPath: () => {\n      return ganttUtils.flattenTasks(localTasks).filter((t) => t.isCriticalPath);\n    },\n\n    // ==================== Hierarchy Methods ====================\n    indentTask: (taskId: string) => {\n      setLocalTasks((prev) => indentTasks(prev, [taskId]));\n    },\n\n    outdentTask: (taskId: string) => {\n      setLocalTasks((prev) => outdentTasks(prev, [taskId]));\n    },\n\n    moveTask: (taskId: string, direction: 'up' | 'down') => {\n      setLocalTasks((prev) => moveTasks(prev, [taskId], direction));\n    },\n\n    createSubtask: async (parentId: string) => {\n      // Create subtask first\n      const { tasks: newTasks, newTask } = createSubtask(localTasks, parentId);\n\n      // v0.8.0: Before event (cancelable, supports async)\n      if (onBeforeTaskAdd) {\n        const result = onBeforeTaskAdd({ ...newTask, parentId });\n        // Handle both sync and async callbacks\n        const shouldContinue = result instanceof Promise ? await result : result;\n        if (shouldContinue === false) {\n          return; // Cancel creation\n        }\n      }\n\n      // Only update state if not cancelled\n      setLocalTasks(newTasks);\n\n      // v0.8.0: After event (non-cancelable)\n      if (onAfterTaskAdd) {\n        onAfterTaskAdd({ ...newTask, parentId });\n      }\n    },\n\n    // ==================== UI Methods ====================\n    scrollToTask: (id: string) => {\n      // Find task index in flattened list\n      const flatTasks = ganttUtils.flattenTasks(localTasks);\n      const index = flatTasks.findIndex((t) => t.id === id);\n\n      if (index !== -1 && gridScrollRef.current) {\n        const scrollTop = index * rowHeight;\n        gridScrollRef.current.scrollTo({ top: scrollTop, behavior: 'smooth' });\n        if (timelineScrollRef.current) {\n          timelineScrollRef.current.scrollTo({ top: scrollTop, behavior: 'smooth' });\n        }\n      }\n    },\n\n    highlightTask: (id: string, duration = 2000) => {\n      // TODO: Implement visual highlighting - currently a no-op\n      void id;\n      void duration;\n    },\n\n    expandTask: (id: string) => {\n      setLocalTasks((prev) => {\n        const expand = (tasks: Task[]): Task[] => {\n          return tasks.map((task) => {\n            if (task.id === id) {\n              return { ...task, isExpanded: true };\n            }\n            if (task.subtasks) {\n              return { ...task, subtasks: expand(task.subtasks) };\n            }\n            return task;\n          });\n        };\n        return expand(prev);\n      });\n    },\n\n    collapseTask: (id: string) => {\n      setLocalTasks((prev) => {\n        const collapse = (tasks: Task[]): Task[] => {\n          return tasks.map((task) => {\n            if (task.id === id) {\n              return { ...task, isExpanded: false };\n            }\n            if (task.subtasks) {\n              return { ...task, subtasks: collapse(task.subtasks) };\n            }\n            return task;\n          });\n        };\n        return collapse(prev);\n      });\n    },\n\n    expandAll: () => {\n      setLocalTasks((prev) => {\n        const expandAll = (tasks: Task[]): Task[] => {\n          return tasks.map((task) => ({\n            ...task,\n            isExpanded: true,\n            subtasks: task.subtasks ? expandAll(task.subtasks) : undefined,\n          }));\n        };\n        return expandAll(prev);\n      });\n    },\n\n    collapseAll: () => {\n      setLocalTasks((prev) => {\n        const collapseAll = (tasks: Task[]): Task[] => {\n          return tasks.map((task) => ({\n            ...task,\n            isExpanded: false,\n            subtasks: task.subtasks ? collapseAll(task.subtasks) : undefined,\n          }));\n        };\n        return collapseAll(prev);\n      });\n    },\n\n    // ==================== Undo/Redo ====================\n    undo,\n    redo,\n    canUndo: () => canUndo,\n    canRedo: () => canRedo,\n    clearHistory,\n\n    // ==================== Export/Import ====================\n    exportToPNG: async () => {\n      if (!ganttContainerRef.current) {\n        throw new Error('Gantt container not found');\n      }\n\n      const canvas = await html2canvas(ganttContainerRef.current, {\n        backgroundColor: theme.bgPrimary,\n        scale: 2, // Higher quality\n      });\n\n      return new Promise<Blob>((resolve, reject) => {\n        canvas.toBlob((blob) => {\n          if (blob) {\n            resolve(blob);\n          } else {\n            reject(new Error('Failed to create blob from canvas'));\n          }\n        }, 'image/png');\n      });\n    },\n\n    exportToPDF: async (filename?: string) => {\n      await ganttUtils.exportToPDF(localTasks, filename);\n    },\n\n    exportToExcel: async (filename?: string) => {\n      await ganttUtils.exportToExcel(localTasks, filename);\n    },\n\n    exportToJSON: () => ganttUtils.exportToJSON(localTasks),\n    exportToCSV: () => ganttUtils.exportToCSV(localTasks),\n\n    importFromJSON: (json: string) => {\n      const imported = ganttUtils.importFromJSON(json);\n      setLocalTasks(imported);\n    },\n\n    // ==================== State Methods ====================\n    getTasks: () => localTasks,\n\n    refresh: () => {\n      // Force re-render by creating a new reference\n      setLocalTasks((prev) => [...prev]);\n    },\n\n    clearAll: () => {\n      setLocalTasks([]);\n    },\n  }), [localTasks, undo, redo, canUndo, canRedo, clearHistory, theme, rowHeight]);\n\n  // Handle column toggle (memoized)\n  const handleToggleColumn = useCallback((columnId: ColumnType) => {\n    setColumns(prev =>\n      prev.map(col =>\n        col.id === columnId ? { ...col, visible: !col.visible } : col\n      )\n    );\n  }, []);\n\n  // v0.13.8: Handle column resize (memoized)\n  const handleColumnResize = useCallback((columnId: ColumnType, newWidth: number) => {\n    setColumns(prev =>\n      prev.map(col => {\n        if (col.id !== columnId) return col;\n        // Clamp width to min/max constraints\n        const minW = col.minWidth ?? 100;\n        const maxW = col.maxWidth ?? 800;\n        const clampedWidth = Math.max(minW, Math.min(maxW, newWidth));\n        return { ...col, width: clampedWidth };\n      })\n    );\n  }, []);\n\n  // Handle task toggle (memoized)\n  const handleTaskToggle = useCallback((taskId: string) => {\n    setLocalTasks((prev) => toggleTaskExpansion(prev, taskId));\n    config.onTaskToggleExpand?.(taskId);\n  }, [config]);\n\n  // Handle task updates from context menu (memoized)\n  const handleTaskUpdate = useCallback((taskId: string, updates: Partial<Task>) => {\n    // v0.8.0: Before event (cancelable)\n    if (onBeforeTaskUpdate) {\n      const shouldContinue = onBeforeTaskUpdate(taskId, updates);\n      if (shouldContinue === false) {\n        return; // Cancel the update\n      }\n    }\n\n    // Find current task to detect progress change\n    const currentTask = ganttUtils.findTaskById(localTasks, taskId);\n    const oldProgress = currentTask?.progress;\n\n    const updateTask = (tasks: Task[]): Task[] => {\n      return tasks.map((task) => {\n        if (task.id === taskId) {\n          return { ...task, ...updates };\n        }\n        if (task.subtasks) {\n          return { ...task, subtasks: updateTask(task.subtasks) };\n        }\n        return task;\n      });\n    };\n    setLocalTasks(updateTask(localTasks));\n\n    // Call callback events\n    const updatedTask = ganttUtils.findTaskById(updateTask(localTasks), taskId);\n    if (updatedTask) {\n      onTaskUpdate?.(updatedTask);\n\n      // v0.8.0: After event\n      onAfterTaskUpdate?.(updatedTask);\n\n      // v0.8.0: Progress change event\n      if (updates.progress !== undefined && oldProgress !== undefined && updates.progress !== oldProgress) {\n        onProgressChange?.(taskId, oldProgress, updates.progress);\n      }\n    }\n  }, [localTasks, onTaskUpdate, onBeforeTaskUpdate, onAfterTaskUpdate, onProgressChange]);\n\n  // Hierarchy handlers\n  const handleTaskIndent = useCallback((taskIds: string[]) => {\n    if (taskIds.length === 0) return;\n    setLocalTasks((prev) => indentTasks(prev, taskIds));\n    config.onTaskIndent?.(taskIds[0]!);\n  }, [config]);\n\n  const handleTaskOutdent = useCallback((taskIds: string[]) => {\n    if (taskIds.length === 0) return;\n    setLocalTasks((prev) => outdentTasks(prev, taskIds));\n    config.onTaskOutdent?.(taskIds[0]!);\n  }, [config]);\n\n  const handleTaskMove = useCallback((taskIds: string[], direction: 'up' | 'down') => {\n    if (taskIds.length === 0) return;\n    setLocalTasks((prev) => moveTasks(prev, taskIds, direction));\n    config.onTaskMove?.(taskIds[0]!, direction);\n  }, [config]);\n\n  const handleMultiTaskDelete = useCallback(async (taskIds: string[]) => {\n    // v0.17.19: Support lifecycle callbacks for delete operations\n    // Filter out tasks that are blocked by onBeforeTaskDelete\n    const allowedTaskIds: string[] = [];\n\n    for (const taskId of taskIds) {\n      if (onBeforeTaskDelete) {\n        const result = await Promise.resolve(onBeforeTaskDelete(taskId));\n        if (result === false) {\n          // Skip this task - deletion was cancelled\n          continue;\n        }\n      }\n      allowedTaskIds.push(taskId);\n    }\n\n    // If no tasks are allowed to be deleted, return early\n    if (allowedTaskIds.length === 0) {\n      return;\n    }\n\n    // Call the consumer's onMultiTaskDelete handler if provided\n    if (config.onMultiTaskDelete) {\n      config.onMultiTaskDelete(allowedTaskIds);\n    } else {\n      // Fallback: update local state and call individual delete handlers\n      setLocalTasks((prev) => deleteTasks(prev, allowedTaskIds));\n      allowedTaskIds.forEach(id => config.onTaskDelete?.(id));\n    }\n\n    // v0.17.19: Call onAfterTaskDelete for each successfully deleted task\n    if (onAfterTaskDelete) {\n      allowedTaskIds.forEach(id => onAfterTaskDelete(id));\n    }\n  }, [config, onBeforeTaskDelete, onAfterTaskDelete]);\n\n  const handleTaskDuplicate = useCallback((taskIds: string[]) => {\n    setLocalTasks((prev) => duplicateTasks(prev, taskIds));\n    taskIds.forEach(id => config.onTaskDuplicate?.(id));\n  }, [config]);\n\n  const handleTaskCreate = useCallback((afterTaskId: string, direction: 'above' | 'below') => {\n    setLocalTasks((prev) => {\n      const { tasks, newTask } = createTask(prev, afterTaskId, direction);\n\n      // v0.8.0: Before event (cancelable)\n      if (onBeforeTaskAdd) {\n        const shouldContinue = onBeforeTaskAdd(newTask);\n        if (shouldContinue === false) {\n          return prev; // Cancel the addition, return unchanged tasks\n        }\n      }\n\n      config.onTaskCreate?.(newTask.parentId, newTask.position || 0);\n\n      // v0.8.0: After event\n      onAfterTaskAdd?.(newTask);\n\n      return tasks;\n    });\n  }, [config, onBeforeTaskAdd, onAfterTaskAdd]);\n\n  const handleTaskRename = useCallback((taskId: string, newName: string) => {\n    setLocalTasks((prev) => renameTask(prev, taskId, newName));\n    config.onTaskRename?.(taskId, newName);\n  }, [config]);\n\n  const handleCreateSubtask = useCallback((parentTaskId: string) => {\n    setLocalTasks((prev) => {\n      const { tasks } = createSubtask(prev, parentTaskId);\n      config.onTaskCreate?.(parentTaskId, 0);\n      return tasks;\n    });\n  }, [config]);\n\n  //  KILLER FEATURE #2: Handle task date changes WITH auto-scheduling\n  // When you move a task, all dependent tasks are automatically rescheduled\n  // This is BETTER than DHTMLX - they require manual configuration\n  const handleTaskDateChange = useCallback((task: Task, newStart: Date, newEnd: Date) => {\n    // v0.13.3: Calculate daysDelta to preserve relative gaps in cascade\n    const daysDelta = task.startDate\n      ? Math.round((newStart.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24))\n      : 0;\n\n    const updateTaskDates = (tasks: Task[]): Task[] => {\n      return tasks.map((t) => {\n        if (t.id === task.id) {\n          // v0.8.1: Preserve segments array when updating task dates\n          // This is critical for split tasks - we must keep the updated segments\n          return {\n            ...t,\n            startDate: newStart,\n            endDate: newEnd,\n            ...(task.segments && { segments: task.segments }) // Preserve segments if they exist\n          };\n        }\n        if (t.subtasks) {\n          return { ...t, subtasks: updateTaskDates(t.subtasks) };\n        }\n        return t;\n      });\n    };\n\n    // First, update the dragged task's dates\n    let updatedTasks = updateTaskDates(localTasks);\n\n    // Then, auto-schedule all dependent tasks (cascade effect)\n    // v0.13.3: Pass daysDelta to preserve relative gaps between tasks\n    updatedTasks = ganttUtils.autoScheduleDependents(updatedTasks, task.id, daysDelta);\n\n    setLocalTasks(updatedTasks);\n\n    // v0.8.1: Pass full updated task object including segments\n    const updatedTask = { ...task, startDate: newStart, endDate: newEnd };\n    onTaskUpdate?.(updatedTask);\n  }, [localTasks, onTaskUpdate]);\n\n  //  KILLER FEATURE #3: Handle context menu for Split task\n  // This is BETTER than DHTMLX - they don't have a built-in split task feature\n  const handleTaskContextMenu = useCallback((task: Task, event: React.MouseEvent) => {\n    // Call user's custom handler if provided\n    onTaskContextMenu?.(task, event);\n\n    // Show our built-in context menu with Split option\n    setContextMenu({\n      isOpen: true,\n      x: event.clientX,\n      y: event.clientY,\n      task,\n    });\n  }, [onTaskContextMenu]);\n\n  // Handle split task action\n  const handleSplitTask = useCallback((task: Task, splitDate: Date) => {\n    // Call ganttUtils.splitTask to split the task\n    const updatedTasks = ganttUtils.splitTask(localTasks, task.id, splitDate);\n    setLocalTasks(updatedTasks);\n\n    // Close context menu\n    setContextMenu({ isOpen: false, x: 0, y: 0, task: null });\n  }, [localTasks]);\n\n  // v0.10.0: Handle task double click - open edit modal\n  // v0.16.1: If onTaskEdit is provided, let the user handle editing (don't open built-in modal)\n  const handleTaskDblClickInternal = useCallback((task: Task) => {\n    // Call user's custom handler if provided\n    onTaskDblClick?.(task);\n\n    // Only open built-in edit modal if user hasn't provided a custom edit handler\n    // This prevents double modals when user handles editing themselves\n    if (!onTaskEdit) {\n      setEditingTask(task);\n    }\n  }, [onTaskDblClick, onTaskEdit]);\n\n  // Helper function to detect circular dependencies using DFS\n  const wouldCreateCircularDependency = useCallback((fromTaskId: string, toTaskId: string, tasks: Task[]): boolean => {\n    // Build dependency map\n    const dependencyMap = new Map<string, string[]>();\n\n    const buildMap = (taskList: Task[]) => {\n      taskList.forEach(task => {\n        if (task.dependencies) {\n          dependencyMap.set(task.id, task.dependencies);\n        }\n        if (task.subtasks) {\n          buildMap(task.subtasks);\n        }\n      });\n    };\n\n    buildMap(tasks);\n\n    // Simulate adding the new dependency\n    const existingDeps = dependencyMap.get(toTaskId) || [];\n    dependencyMap.set(toTaskId, [...existingDeps, fromTaskId]);\n\n    // DFS to detect cycle\n    const visited = new Set<string>();\n    const recStack = new Set<string>();\n\n    const hasCycle = (taskId: string): boolean => {\n      if (!visited.has(taskId)) {\n        visited.add(taskId);\n        recStack.add(taskId);\n\n        const deps = dependencyMap.get(taskId) || [];\n        for (const depId of deps) {\n          if (!visited.has(depId) && hasCycle(depId)) {\n            return true;\n          } else if (recStack.has(depId)) {\n            return true;\n          }\n        }\n      }\n      recStack.delete(taskId);\n      return false;\n    };\n\n    return hasCycle(toTaskId);\n  }, []);\n\n  // Handle dependency creation (memoized)\n  const handleDependencyCreate = useCallback((fromTask: Task, toTaskId: string) => {\n    // Check for circular dependency\n    if (wouldCreateCircularDependency(fromTask.id, toTaskId, localTasks)) {\n      // Show error feedback - you could integrate a toast notification here\n      console.warn('Cannot create dependency: would create a circular dependency');\n      alert('Cannot create this dependency: it would create a circular dependency chain.\\n\\nTask dependencies must flow in one direction only.');\n      return;\n    }\n\n    const updateTaskDependencies = (tasks: Task[]): Task[] => {\n      return tasks.map((t) => {\n        if (t.id === toTaskId) {\n          const dependencies = t.dependencies || [];\n          // Avoid duplicate dependencies\n          if (!dependencies.includes(fromTask.id)) {\n            return { ...t, dependencies: [...dependencies, fromTask.id] };\n          }\n        }\n        if (t.subtasks) {\n          return { ...t, subtasks: updateTaskDependencies(t.subtasks) };\n        }\n        return t;\n      });\n    };\n    setLocalTasks(updateTaskDependencies(localTasks));\n    onDependencyCreate?.(fromTask.id, toTaskId);\n  }, [localTasks, onDependencyCreate, wouldCreateCircularDependency]);\n\n  // Handle dependency deletion (memoized)\n  const handleDependencyDelete = useCallback((taskId: string, dependencyId: string) => {\n    const removeTaskDependency = (tasks: Task[]): Task[] => {\n      return tasks.map((t) => {\n        if (t.id === taskId && t.dependencies) {\n          const dependencies = t.dependencies.filter((depId) => depId !== dependencyId);\n          return { ...t, dependencies };\n        }\n        if (t.subtasks) {\n          return { ...t, subtasks: removeTaskDependency(t.subtasks) };\n        }\n        return t;\n      });\n    };\n    setLocalTasks(removeTaskDependency(localTasks));\n    onDependencyDelete?.(taskId, dependencyId);\n  }, [localTasks, onDependencyDelete]);\n\n  // Calculate date range (memoized)\n  const { startDate, endDate } = useMemo(() => {\n    // Filter tasks that have dates\n    const tasksWithDates = localTasks.filter(t => t.startDate && t.endDate);\n\n    if (tasksWithDates.length === 0) {\n      // Default range if no tasks have dates\n      const today = new Date();\n      const start = new Date(today);\n      start.setDate(start.getDate() - 30);\n      const end = new Date(today);\n      end.setDate(end.getDate() + 60);\n      return { startDate: start, endDate: end };\n    }\n\n    const allDates = tasksWithDates.flatMap((t) => [t.startDate, t.endDate]).filter((d): d is Date => d !== undefined);\n    const minDate = new Date(Math.min(...allDates.map((d) => d.getTime())));\n    const maxDate = new Date(Math.max(...allDates.map((d) => d.getTime())));\n\n    const padding = timeScale === 'day' ? 7 : timeScale === 'week' ? 14 : 30;\n    minDate.setDate(minDate.getDate() - padding);\n    maxDate.setDate(maxDate.getDate() + padding);\n\n    return { startDate: minDate, endDate: maxDate };\n  }, [localTasks, timeScale]);\n\n  // Handlers (future implementation - currently unused but kept for future features)\n  // TODO: Implement zoom controls in toolbar\n  // const handleZoomIn = () => setZoom((z) => Math.min(z + 0.2, 2));\n  // const handleZoomOut = () => setZoom((z) => Math.max(z - 0.2, 0.5));\n\n  // TODO: Implement \"Today\" button in toolbar\n  // const handleTodayClick = () => {\n  //   if (timelineScrollRef.current) {\n  //     const today = new Date();\n  //     const dayWidth = timeScale === 'day' ? 60 : timeScale === 'week' ? 20 : 8;\n  //     const daysFromStart = (today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\n  //     const scrollX = daysFromStart * dayWidth * zoom - 300;\n  //     timelineScrollRef.current.scrollTo({ left: Math.max(0, scrollX), behavior: 'smooth' });\n  //   }\n  // };\n\n  // TODO: Implement add task functionality\n  // const handleAddTask = () => {\n  //   // Placeholder - implement in parent component if needed\n  // };\n\n  // v0.12.0: Export handlers for toolbar\n  const handleExportPNG = useCallback(async () => {\n    if (!ganttContainerRef.current) return;\n\n    const canvas = await html2canvas(ganttContainerRef.current, {\n      backgroundColor: theme.bgPrimary,\n      scale: 2,\n    });\n\n    // Create download link\n    const link = document.createElement('a');\n    link.download = 'gantt-chart.png';\n    link.href = canvas.toDataURL('image/png');\n    link.click();\n  }, [theme]);\n\n  const handleExportPDF = useCallback(async () => {\n    await ganttUtils.exportToPDF(localTasks);\n  }, [localTasks]);\n\n  const handleExportExcel = useCallback(async () => {\n    await ganttUtils.exportToExcel(localTasks);\n  }, [localTasks]);\n\n  const handleExportCSV = useCallback(() => {\n    const csv = ganttUtils.exportToCSV(localTasks);\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = 'gantt-chart.csv';\n    link.click();\n    URL.revokeObjectURL(link.href);\n  }, [localTasks]);\n\n  const handleExportJSON = useCallback(() => {\n    const json = ganttUtils.exportToJSON(localTasks);\n    const blob = new Blob([json], { type: 'application/json;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = 'gantt-chart.json';\n    link.click();\n    URL.revokeObjectURL(link.href);\n  }, [localTasks]);\n\n  const handleExportMSProject = useCallback(() => {\n    ganttUtils.exportToMSProject(localTasks, 'Gantt Project', 'project.xml');\n  }, [localTasks]);\n\n  // Handle separator resize\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    setIsResizing(true);\n  };\n\n  // v0.13.9: Timeline has the scrollbar, TaskGrid syncs via CSS transform\n  // This ensures only ONE scrollbar on the right side of the entire component\n  useEffect(() => {\n    const timelineScroll = timelineScrollRef.current;\n    const gridContainer = gridScrollRef.current;\n\n    if (!timelineScroll || !gridContainer) return;\n\n    // v0.13.11: Find the TaskGrid CONTENT container (not the whole grid) to apply transform\n    // This keeps the header fixed while only the task rows move\n    const taskGridContent = gridContainer.querySelector('.gantt-taskgrid-content');\n\n    const handleTimelineScroll = () => {\n      const scrollY = timelineScroll.scrollTop;\n      setScrollTop(scrollY);\n\n      // Sync TaskGrid content position via CSS transform (header stays fixed)\n      if (taskGridContent) {\n        (taskGridContent as HTMLElement).style.transform = `translateY(-${scrollY}px)`;\n      }\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (isResizing && gridContainer) {\n        // Calculate width relative to the container's left edge for accuracy\n        const containerRect = gridContainer.parentElement?.getBoundingClientRect();\n        const containerLeft = containerRect?.left || 0;\n        const newWidth = e.clientX - containerLeft;\n\n        // Clamp between reasonable min/max values\n        const minWidth = 200;\n        const maxWidth = Math.min(window.innerWidth - 300, 800);\n\n        if (newWidth >= minWidth && newWidth <= maxWidth) {\n          setGridWidthOverride(newWidth);\n        }\n      }\n    };\n\n    const handleMouseUp = () => {\n      setIsResizing(false);\n    };\n\n    timelineScroll.addEventListener('scroll', handleTimelineScroll);\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      timelineScroll.removeEventListener('scroll', handleTimelineScroll);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isResizing]);\n\n  return (\n    <GanttI18nContext.Provider value={translations}>\n    <GanttThemeContext.Provider value={ganttThemeContextValue}>\n    <div\n      ref={ganttContainerRef}\n      className=\"flex flex-col h-full w-full\"\n      style={{\n        backgroundColor: theme.bgPrimary,\n        fontFamily: 'Inter, sans-serif',\n        minHeight: 0, // Critical for flex children to shrink\n        // v0.9.1: Prevent browser auto-scroll when disableScrollSync is enabled\n        ...(config.disableScrollSync && {\n          scrollBehavior: 'auto',\n          overflowAnchor: 'none',\n        }),\n      }}\n    >\n      {/* Toolbar */}\n      <GanttToolbar\n        theme={theme}\n        timeScale={timeScale}\n        onTimeScaleChange={setTimeScale}\n        zoom={zoom}\n        onZoomChange={setZoom}\n        currentTheme={currentTheme}\n        onThemeChange={handleThemeChange}\n        rowDensity={rowDensity}\n        onRowDensityChange={setRowDensity}\n        showThemeSelector={showThemeSelector}\n        // v0.14.3: Create Task button\n        showCreateTaskButton={showCreateTaskButton}\n        createTaskLabel={createTaskLabel}\n        onCreateTask={onCreateTask}\n        // v0.12.0: Export handlers\n        onExportPNG={showExportButton ? handleExportPNG : undefined}\n        onExportPDF={showExportButton ? handleExportPDF : undefined}\n        onExportExcel={showExportButton ? handleExportExcel : undefined}\n        onExportCSV={showExportButton ? handleExportCSV : undefined}\n        onExportJSON={showExportButton ? handleExportJSON : undefined}\n        onExportMSProject={showExportButton ? handleExportMSProject : undefined}\n      />\n\n      {/* Main Content - v0.13.9: TaskGrid has no scroll, Timeline has the unified vertical scroll */}\n      <div\n        ref={gridScrollRef}\n        className=\"flex-1 flex min-h-0\"\n        style={{\n          overflow: 'hidden',\n        }}\n      >\n        {/* Task Grid - v0.13.9: No scroll at all, content syncs with Timeline scroll */}\n        <div\n          className=\"gantt-grid-scroll flex-shrink-0\"\n          style={{\n            width: gridWidth,\n            overflow: 'hidden',\n            // v0.17.5: Removed borderRight - causes ghost line in header\n          }}\n        >\n          <TaskGrid\n            tasks={tasksWithCriticalPath}\n            theme={theme}\n            rowHeight={rowHeight}\n            availableUsers={availableUsers}\n            templates={mergedTemplates}\n            onTaskClick={onTaskClick}\n            onTaskDblClick={handleTaskDblClickInternal} // v0.10.0: Use internal handler that opens modal\n            onTaskContextMenu={onTaskContextMenu} // v0.8.0\n            onTaskToggle={handleTaskToggle}\n            scrollTop={scrollTop}\n            columns={columns}\n            onToggleColumn={handleToggleColumn}\n            onColumnResize={handleColumnResize}\n            onTaskUpdate={handleTaskUpdate}\n            onTaskIndent={handleTaskIndent}\n            onTaskOutdent={handleTaskOutdent}\n            onTaskMove={handleTaskMove}\n            onMultiTaskDelete={handleMultiTaskDelete}\n            onTaskDuplicate={handleTaskDuplicate}\n            onTaskCreate={handleTaskCreate}\n            onTaskRename={handleTaskRename}\n            onCreateSubtask={handleCreateSubtask}\n            onOpenTaskModal={onTaskClick ? (task: Task) => onTaskClick(task) : undefined}\n          />\n        </div>\n\n        {/* Resize handle - invisible but draggable area over the border */}\n        <div\n          className=\"flex-shrink-0 cursor-col-resize\"\n          style={{\n            width: 6,\n            marginLeft: -3, // Center over the border line\n            zIndex: 10,\n          }}\n          onMouseDown={handleMouseDown}\n        />\n\n        {/* Timeline - v0.13.9: Has both scrolls, TaskGrid syncs to this scroll */}\n        <div\n          ref={timelineScrollRef}\n          className=\"gantt-timeline-scroll flex-1 overflow-auto\"\n          style={{\n            minHeight: 0,\n            // v0.9.1: Prevent browser auto-scroll when disableScrollSync is enabled\n            ...(config.disableScrollSync && {\n              scrollBehavior: 'auto',\n              overflowAnchor: 'none',\n            }),\n          }}\n        >\n          <Timeline\n            tasks={tasksWithCriticalPath}\n            theme={theme}\n            rowHeight={rowHeight}\n            timeScale={timeScale}\n            startDate={startDate}\n            endDate={endDate}\n            zoom={zoom}\n            templates={mergedTemplates}\n            onTaskClick={onTaskClick}\n            onTaskDblClick={handleTaskDblClickInternal} // v0.10.0: Use internal handler that opens modal\n            onTaskContextMenu={handleTaskContextMenu} // v0.8.0: Now uses our handler for Split feature\n            onTaskDateChange={handleTaskDateChange}\n            onDependencyCreate={handleDependencyCreate}\n            onDependencyDelete={handleDependencyDelete}\n          />\n        </div>\n      </div>\n\n      {/* v0.8.0: Context Menu for task operations (v0.16.0: Enhanced with Edit, Add Subtask, Status changes) */}\n      {contextMenu.task && (\n        <ContextMenu\n          isOpen={contextMenu.isOpen}\n          x={contextMenu.x}\n          y={contextMenu.y}\n          theme={theme}\n          onClose={() => setContextMenu({ isOpen: false, x: 0, y: 0, task: null })}\n          items={[\n            // v0.16.0: Edit Task - opens edit modal or calls custom handler\n            {\n              id: 'edit',\n              label: translations.contextMenu?.editTask || 'Edit Task',\n              icon: MenuIcons.Pencil,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                if (onTaskEdit) {\n                  // Use custom handler if provided\n                  onTaskEdit(contextMenu.task);\n                } else {\n                  // Use built-in edit modal\n                  setEditingTask(contextMenu.task);\n                }\n              },\n            },\n            // v0.16.0: Add Subtask\n            {\n              id: 'addSubtask',\n              label: translations.contextMenu?.addSubtask || 'Add Subtask',\n              icon: MenuIcons.Add,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                if (onTaskAddSubtask) {\n                  // Use custom handler if provided\n                  onTaskAddSubtask(contextMenu.task);\n                } else {\n                  // Use built-in subtask creation\n                  handleCreateSubtask(contextMenu.task.id);\n                }\n              },\n            },\n            // Separator before status changes\n            {\n              id: 'separator-status',\n              label: '',\n              separator: true,\n              onClick: () => {},\n            },\n            // v0.16.0: Mark Incomplete (status: 'todo', progress: 0)\n            {\n              id: 'markIncomplete',\n              label: translations.contextMenu?.markIncomplete || 'Mark Incomplete',\n              icon: MenuIcons.MarkIncomplete,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                if (onTaskMarkIncomplete) {\n                  onTaskMarkIncomplete(contextMenu.task);\n                } else {\n                  handleTaskUpdate(contextMenu.task.id, { status: 'todo', progress: 0 });\n                }\n              },\n              disabled: contextMenu.task?.status === 'todo',\n            },\n            // v0.16.0: Set In Progress (status: 'in-progress')\n            {\n              id: 'setInProgress',\n              label: translations.contextMenu?.setInProgress || 'Set In Progress',\n              icon: MenuIcons.SetInProgress,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                if (onTaskSetInProgress) {\n                  onTaskSetInProgress(contextMenu.task);\n                } else {\n                  handleTaskUpdate(contextMenu.task.id, { status: 'in-progress' });\n                }\n              },\n              disabled: contextMenu.task?.status === 'in-progress',\n            },\n            // v0.16.0: Mark Complete (status: 'completed', progress: 100)\n            {\n              id: 'markComplete',\n              label: translations.contextMenu?.markComplete || 'Mark Complete',\n              icon: MenuIcons.MarkComplete,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                handleTaskUpdate(contextMenu.task.id, { status: 'completed', progress: 100 });\n              },\n              disabled: contextMenu.task?.status === 'completed',\n            },\n            // Separator before advanced options\n            {\n              id: 'separator-advanced',\n              label: '',\n              separator: true,\n              onClick: () => {},\n            },\n            // Split Task (existing feature from v0.8.0)\n            {\n              id: 'split',\n              label: translations.contextMenu?.splitTask || 'Split Task',\n              icon: MenuIcons.Split,\n              onClick: () => {\n                if (!contextMenu.task?.startDate || !contextMenu.task?.endDate) {\n                  console.warn('Cannot split task without dates');\n                  return;\n                }\n\n                // Calculate midpoint date for split\n                const startTime = contextMenu.task.startDate.getTime();\n                const endTime = contextMenu.task.endDate.getTime();\n                const midTime = startTime + (endTime - startTime) / 2;\n                const splitDate = new Date(midTime);\n\n                // Call split handler\n                handleSplitTask(contextMenu.task, splitDate);\n              },\n              disabled: !contextMenu.task?.startDate || !contextMenu.task?.endDate,\n            },\n            // Separator before delete\n            {\n              id: 'separator-delete',\n              label: '',\n              separator: true,\n              onClick: () => {},\n            },\n            // Delete Task\n            {\n              id: 'delete',\n              label: translations.contextMenu?.deleteTask || 'Delete Task',\n              icon: MenuIcons.Delete,\n              onClick: () => {\n                if (!contextMenu.task) return;\n                handleMultiTaskDelete([contextMenu.task.id]);\n              },\n            },\n          ]}\n        />\n      )}\n\n      {/* v0.10.0: Task Edit Modal */}\n      {editingTask && (\n        <TaskFormModal\n          isOpen={true}\n          onClose={() => setEditingTask(null)}\n          task={editingTask}\n          onSubmit={(updates) => {\n            handleTaskUpdate(editingTask.id, updates);\n            setEditingTask(null);\n          }}\n          mode=\"edit\"\n          theme={currentTheme}\n        />\n      )}\n\n      {/* v0.14.0: AI Assistant for natural language task editing */}\n      {aiAssistant?.enabled && (\n        <GanttAIAssistant\n          tasks={localTasks}\n          theme={theme}\n          config={aiAssistant}\n          onTasksUpdate={setLocalTasks}\n          onTaskUpdate={handleTaskUpdate}\n          onTaskCreate={(task) => {\n            setLocalTasks((prev) => [...prev, task]);\n          }}\n          onTaskDelete={(taskId) => {\n            // v0.17.19: Use handleMultiTaskDelete to respect lifecycle hooks\n            handleMultiTaskDelete([taskId]);\n          }}\n          onDependencyCreate={(fromTaskId, toTaskId) => {\n            const fromTask = ganttUtils.findTaskById(localTasks, fromTaskId);\n            if (fromTask) {\n              handleDependencyCreate(fromTask, toTaskId);\n            }\n          }}\n          onDependencyDelete={handleDependencyDelete}\n        />\n      )}\n    </div>\n    </GanttThemeContext.Provider>\n    </GanttI18nContext.Provider>\n  );\n})","/**\r\n * AI Command Parser for Gantt Chart\r\n * Parses natural language commands and converts them to task operations\r\n *\r\n * This module provides utilities for parsing AI responses and generating\r\n * prompts for natural language task editing.\r\n *\r\n * @version 0.14.0\r\n */\r\n\r\nimport { Task, AICommandResult } from './types';\r\n\r\n/**\r\n * System prompt for the AI model to understand Gantt task commands\r\n */\r\nexport const GANTT_AI_SYSTEM_PROMPT = `You are a Gantt chart AI assistant. You help users edit project tasks using natural language commands.\r\n\r\nAVAILABLE COMMANDS:\r\n1. move_task - Move a task to a different date\r\n2. resize_task - Change task duration (extend/shorten)\r\n3. rename_task - Rename a task\r\n4. delete_task - Delete a task\r\n5. create_task - Create a new task\r\n6. link_tasks - Create dependency between tasks\r\n7. unlink_tasks - Remove dependency\r\n8. assign_task - Assign users to task\r\n9. set_progress - Update task progress (0-100%)\r\n10. set_status - Change task status (todo, in-progress, completed)\r\n\r\nRESPONSE FORMAT (JSON):\r\n{\r\n  \"type\": \"command_type\",\r\n  \"taskId\": \"id of the task to modify (if found)\",\r\n  \"taskName\": \"name of the task mentioned\",\r\n  \"updates\": { /* partial task updates */ },\r\n  \"newTask\": { /* for create_task only */ },\r\n  \"dependencyFrom\": \"source task id (for link/unlink)\",\r\n  \"dependencyTo\": \"target task id (for link/unlink)\",\r\n  \"message\": \"Human-readable response explaining what was done\",\r\n  \"success\": true/false,\r\n  \"error\": \"error message if failed\"\r\n}\r\n\r\nEXAMPLES:\r\n- \"Move Design to next Monday\" -> move_task with startDate update\r\n- \"Extend Testing by 3 days\" -> resize_task with endDate update\r\n- \"Rename 'Old Task' to 'New Task'\" -> rename_task with name update\r\n- \"Set Development progress to 50%\" -> set_progress with progress: 50\r\n- \"Link Design to Development\" -> link_tasks\r\n- \"Create a new task called 'Review'\" -> create_task\r\n\r\nTASK DATA FORMAT:\r\nTasks have: id, name, startDate, endDate, progress, status, dependencies[], assignees[]\r\n\r\nAlways try to match task names case-insensitively and handle partial matches.\r\nIf you can't find a task by name, search through the provided task list.\r\nIf ambiguous, ask for clarification in the message field.`;\r\n\r\n/**\r\n * Generate the user prompt with current tasks context\r\n */\r\nexport function generateTasksContext(tasks: Task[]): string {\r\n  const flatTasks = flattenTasks(tasks);\r\n  const taskList = flatTasks\r\n    .map((t) => {\r\n      const start = t.startDate ? t.startDate.toISOString().split('T')[0] : 'no date';\r\n      const end = t.endDate ? t.endDate.toISOString().split('T')[0] : 'no date';\r\n      const deps = t.dependencies?.length ? `deps: [${t.dependencies.join(', ')}]` : '';\r\n      return `- ${t.id}: \"${t.name}\" (${start} to ${end}, ${t.progress}%, ${t.status || 'todo'}) ${deps}`;\r\n    })\r\n    .join('\\n');\r\n\r\n  return `CURRENT TASKS:\\n${taskList}\\n\\nToday's date: ${new Date().toISOString().split('T')[0]}`;\r\n}\r\n\r\n/**\r\n * Flatten nested tasks into a single array\r\n */\r\nfunction flattenTasks(tasks: Task[]): Task[] {\r\n  const result: Task[] = [];\r\n  const flatten = (taskList: Task[]) => {\r\n    for (const task of taskList) {\r\n      result.push(task);\r\n      if (task.subtasks?.length) {\r\n        flatten(task.subtasks);\r\n      }\r\n    }\r\n  };\r\n  flatten(tasks);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Find a task by name (case-insensitive, partial match)\r\n */\r\nexport function findTaskByName(tasks: Task[], name: string): Task | undefined {\r\n  const flatTasks = flattenTasks(tasks);\r\n  const normalizedName = name.toLowerCase().trim();\r\n\r\n  // Exact match first\r\n  const exact = flatTasks.find((t) => t.name.toLowerCase() === normalizedName);\r\n  if (exact) return exact;\r\n\r\n  // Partial match\r\n  const partial = flatTasks.find((t) => t.name.toLowerCase().includes(normalizedName));\r\n  if (partial) return partial;\r\n\r\n  // Fuzzy match (contains all words)\r\n  const words = normalizedName.split(/\\s+/);\r\n  return flatTasks.find((t) => {\r\n    const taskName = t.name.toLowerCase();\r\n    return words.every((word) => taskName.includes(word));\r\n  });\r\n}\r\n\r\n/**\r\n * Parse date from natural language\r\n */\r\nexport function parseNaturalDate(text: string, referenceDate = new Date()): Date | null {\r\n  const normalized = text.toLowerCase().trim();\r\n  const today = new Date(referenceDate);\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  // Today\r\n  if (normalized === 'today' || normalized === 'hoy') {\r\n    return today;\r\n  }\r\n\r\n  // Tomorrow\r\n  if (normalized === 'tomorrow' || normalized === 'maana') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() + 1);\r\n    return date;\r\n  }\r\n\r\n  // Yesterday\r\n  if (normalized === 'yesterday' || normalized === 'ayer') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() - 1);\r\n    return date;\r\n  }\r\n\r\n  // Next week\r\n  if (normalized === 'next week' || normalized === 'la prxima semana') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() + 7);\r\n    return date;\r\n  }\r\n\r\n  // Day of week (next Monday, next Tuesday, etc.)\r\n  const dayMatch = normalized.match(/(?:next\\s+)?(monday|tuesday|wednesday|thursday|friday|saturday|sunday|lunes|martes|mircoles|miercoles|jueves|viernes|sbado|sabado|domingo)/i);\r\n  if (dayMatch) {\r\n    const dayNames: Record<string, number> = {\r\n      sunday: 0, domingo: 0,\r\n      monday: 1, lunes: 1,\r\n      tuesday: 2, martes: 2,\r\n      wednesday: 3, mircoles: 3, miercoles: 3,\r\n      thursday: 4, jueves: 4,\r\n      friday: 5, viernes: 5,\r\n      saturday: 6, sbado: 6, sabado: 6,\r\n    };\r\n    const targetDay = dayNames[dayMatch[1]!.toLowerCase()];\r\n    if (targetDay !== undefined) {\r\n      const date = new Date(today);\r\n      const currentDay = date.getDay();\r\n      let daysToAdd = targetDay - currentDay;\r\n      if (daysToAdd <= 0) daysToAdd += 7; // Always next occurrence\r\n      date.setDate(date.getDate() + daysToAdd);\r\n      return date;\r\n    }\r\n  }\r\n\r\n  // In X days/weeks/months\r\n  const inMatch = normalized.match(/in\\s+(\\d+)\\s+(day|week|month|da|dias|semana|semanas|mes|meses)s?/i);\r\n  if (inMatch && inMatch[1] && inMatch[2]) {\r\n    const amount = parseInt(inMatch[1], 10);\r\n    const unit = inMatch[2].toLowerCase();\r\n    const date = new Date(today);\r\n\r\n    if (unit === 'day' || unit === 'da' || unit === 'dias') {\r\n      date.setDate(date.getDate() + amount);\r\n    } else if (unit === 'week' || unit === 'semana' || unit === 'semanas') {\r\n      date.setDate(date.getDate() + amount * 7);\r\n    } else if (unit === 'month' || unit === 'mes' || unit === 'meses') {\r\n      date.setMonth(date.getMonth() + amount);\r\n    }\r\n    return date;\r\n  }\r\n\r\n  // ISO date (YYYY-MM-DD)\r\n  const isoMatch = normalized.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\r\n  if (isoMatch) {\r\n    return new Date(normalized);\r\n  }\r\n\r\n  // DD/MM/YYYY or MM/DD/YYYY\r\n  const dateMatch = normalized.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\r\n  if (dateMatch && dateMatch[1] && dateMatch[2] && dateMatch[3]) {\r\n    // Assume DD/MM/YYYY for non-US locales\r\n    const day = parseInt(dateMatch[1], 10);\r\n    const month = parseInt(dateMatch[2], 10) - 1;\r\n    const year = parseInt(dateMatch[3], 10);\r\n    return new Date(year, month, day);\r\n  }\r\n\r\n  // Spanish date format: \"1 de diciembre de 2025\", \"15 de enero\", \"20 de marzo de 2024\"\r\n  const spanishMonths: Record<string, number> = {\r\n    enero: 0, febrero: 1, marzo: 2, abril: 3, mayo: 4, junio: 5,\r\n    julio: 6, agosto: 7, septiembre: 8, octubre: 9, noviembre: 10, diciembre: 11,\r\n  };\r\n  const spanishDateMatch = normalized.match(/(\\d{1,2})\\s+de\\s+(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)(?:\\s+de\\s+(\\d{4}))?/i);\r\n  if (spanishDateMatch && spanishDateMatch[1] && spanishDateMatch[2]) {\r\n    const day = parseInt(spanishDateMatch[1], 10);\r\n    const month = spanishMonths[spanishDateMatch[2].toLowerCase()];\r\n    const year = spanishDateMatch[3] ? parseInt(spanishDateMatch[3], 10) : today.getFullYear();\r\n    if (month !== undefined) {\r\n      return new Date(year, month, day);\r\n    }\r\n  }\r\n\r\n  // English date format: \"December 1, 2025\", \"January 15\", \"March 20 2024\"\r\n  const englishMonths: Record<string, number> = {\r\n    january: 0, february: 1, march: 2, april: 3, may: 4, june: 5,\r\n    july: 6, august: 7, september: 8, october: 9, november: 10, december: 11,\r\n  };\r\n  const englishDateMatch = normalized.match(/(january|february|march|april|may|june|july|august|september|october|november|december)\\s+(\\d{1,2})(?:,?\\s+(\\d{4}))?/i);\r\n  if (englishDateMatch && englishDateMatch[1] && englishDateMatch[2]) {\r\n    const month = englishMonths[englishDateMatch[1].toLowerCase()];\r\n    const day = parseInt(englishDateMatch[2], 10);\r\n    const year = englishDateMatch[3] ? parseInt(englishDateMatch[3], 10) : today.getFullYear();\r\n    if (month !== undefined) {\r\n      return new Date(year, month, day);\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse duration from natural language\r\n */\r\nexport function parseNaturalDuration(text: string): number | null {\r\n  const normalized = text.toLowerCase().trim();\r\n\r\n  // X days/weeks/months\r\n  const match = normalized.match(/(\\d+)\\s*(day|week|month|da|dias|semana|semanas|mes|meses)s?/i);\r\n  if (match && match[1] && match[2]) {\r\n    const amount = parseInt(match[1], 10);\r\n    const unit = match[2].toLowerCase();\r\n\r\n    if (unit === 'day' || unit === 'da' || unit === 'dias') {\r\n      return amount;\r\n    } else if (unit === 'week' || unit === 'semana' || unit === 'semanas') {\r\n      return amount * 7;\r\n    } else if (unit === 'month' || unit === 'mes' || unit === 'meses') {\r\n      return amount * 30;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse progress percentage from natural language\r\n */\r\nexport function parseProgress(text: string): number | null {\r\n  const match = text.match(/(\\d+)(?:\\s*%)?/);\r\n  if (match && match[1]) {\r\n    const value = parseInt(match[1], 10);\r\n    return Math.max(0, Math.min(100, value));\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse task status from natural language\r\n */\r\nexport function parseStatus(text: string): 'todo' | 'in-progress' | 'completed' | null {\r\n  const normalized = text.toLowerCase().trim();\r\n\r\n  if (normalized.includes('todo') || normalized.includes('pendiente') || normalized.includes('por hacer')) {\r\n    return 'todo';\r\n  }\r\n  if (normalized.includes('in progress') || normalized.includes('in-progress') || normalized.includes('en progreso') || normalized.includes('working') || normalized.includes('trabajando')) {\r\n    return 'in-progress';\r\n  }\r\n  if (normalized.includes('done') || normalized.includes('complete') || normalized.includes('finished') || normalized.includes('completado') || normalized.includes('terminado') || normalized.includes('hecho')) {\r\n    return 'completed';\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Local command parser (for offline/simple commands without AI)\r\n * This can handle basic commands without needing an AI API call\r\n */\r\nexport function parseLocalCommand(command: string, tasks: Task[]): AICommandResult | null {\r\n  const normalized = command.toLowerCase().trim();\r\n\r\n  // Move task pattern: \"move X to Y\" or \"mueve la tarea X a la fecha Y\"\r\n  // Handles: \"move Task to Monday\", \"mover Diseo a prximo lunes\", \"mueve la tarea Fase 1 a la fecha 1 de diciembre\"\r\n  const moveMatch = normalized.match(/(?:move|mover|mueve)\\s+(?:la\\s+tarea\\s+)?[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|para)\\s+(?:la\\s+fecha\\s+)?(.+)/i);\r\n  if (moveMatch && moveMatch[1] && moveMatch[2]) {\r\n    const taskName = moveMatch[1].trim();\r\n    const dateText = moveMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const newDate = parseNaturalDate(dateText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'move_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\". Please check the task name and try again.`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (!newDate) {\r\n      return {\r\n        type: 'move_task',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the date \"${dateText}\". Try using formats like \"next Monday\", \"in 3 days\", or \"2024-01-15\".`,\r\n        success: false,\r\n        error: 'Invalid date',\r\n      };\r\n    }\r\n\r\n    // Calculate new end date maintaining duration\r\n    const duration = task.startDate && task.endDate\r\n      ? Math.round((task.endDate.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24))\r\n      : 1;\r\n    const newEndDate = new Date(newDate);\r\n    newEndDate.setDate(newEndDate.getDate() + duration);\r\n\r\n    return {\r\n      type: 'move_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: {\r\n        startDate: newDate,\r\n        endDate: newEndDate,\r\n      },\r\n      message: `Moved \"${task.name}\" to ${newDate.toLocaleDateString()}.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Extend task pattern: \"extend X by Y days\"\r\n  const extendMatch = normalized.match(/(?:extend|extender|extiende|alargar)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:by|por)\\s+(.+)/i);\r\n  if (extendMatch && extendMatch[1] && extendMatch[2]) {\r\n    const taskName = extendMatch[1].trim();\r\n    const durationText = extendMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const days = parseNaturalDuration(durationText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'resize_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (!days || !task.endDate) {\r\n      return {\r\n        type: 'resize_task',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the duration \"${durationText}\".`,\r\n        success: false,\r\n        error: 'Invalid duration',\r\n      };\r\n    }\r\n\r\n    const newEndDate = new Date(task.endDate);\r\n    newEndDate.setDate(newEndDate.getDate() + days);\r\n\r\n    return {\r\n      type: 'resize_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { endDate: newEndDate },\r\n      message: `Extended \"${task.name}\" by ${days} days. New end date: ${newEndDate.toLocaleDateString()}.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Set progress pattern: \"set X progress to Y%\"\r\n  const progressMatch = normalized.match(/(?:set|establecer|poner)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:progress|progreso)\\s+(?:to|a|en)\\s+(.+)/i);\r\n  if (progressMatch && progressMatch[1] && progressMatch[2]) {\r\n    const taskName = progressMatch[1].trim();\r\n    const progressText = progressMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const progress = parseProgress(progressText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'set_progress',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (progress === null) {\r\n      return {\r\n        type: 'set_progress',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the progress value \"${progressText}\".`,\r\n        success: false,\r\n        error: 'Invalid progress',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'set_progress',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { progress },\r\n      message: `Set \"${task.name}\" progress to ${progress}%.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Rename pattern: \"rename X to Y\"\r\n  const renameMatch = normalized.match(/(?:rename|renombrar|cambiar nombre de)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|por)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (renameMatch && renameMatch[1] && renameMatch[2]) {\r\n    const oldName = renameMatch[1].trim();\r\n    const newName = renameMatch[2].trim();\r\n    const task = findTaskByName(tasks, oldName);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'rename_task',\r\n        taskName: oldName,\r\n        message: `Could not find a task named \"${oldName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'rename_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { name: newName },\r\n      message: `Renamed \"${task.name}\" to \"${newName}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Link tasks pattern: \"link X to Y\"\r\n  const linkMatch = normalized.match(/(?:link|vincular|conectar)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|con)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (linkMatch && linkMatch[1] && linkMatch[2]) {\r\n    const fromName = linkMatch[1].trim();\r\n    const toName = linkMatch[2].trim();\r\n    const fromTask = findTaskByName(tasks, fromName);\r\n    const toTask = findTaskByName(tasks, toName);\r\n\r\n    if (!fromTask) {\r\n      return {\r\n        type: 'link_tasks',\r\n        taskName: fromName,\r\n        message: `Could not find a task named \"${fromName}\".`,\r\n        success: false,\r\n        error: 'Source task not found',\r\n      };\r\n    }\r\n\r\n    if (!toTask) {\r\n      return {\r\n        type: 'link_tasks',\r\n        taskName: toName,\r\n        message: `Could not find a task named \"${toName}\".`,\r\n        success: false,\r\n        error: 'Target task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'link_tasks',\r\n      taskId: toTask.id,\r\n      taskName: toTask.name,\r\n      dependencyFrom: fromTask.id,\r\n      dependencyTo: toTask.id,\r\n      message: `Linked \"${fromTask.name}\"  \"${toTask.name}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Delete pattern: \"delete X\"\r\n  const deleteMatch = normalized.match(/(?:delete|eliminar|borrar|remove|quitar)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (deleteMatch && deleteMatch[1]) {\r\n    const taskName = deleteMatch[1].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'delete_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'delete_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      message: `Deleted \"${task.name}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // No local pattern matched - return null to indicate AI should handle it\r\n  return null;\r\n}\r\n\r\n/**\r\n * Validate and sanitize AI response\r\n */\r\nexport function validateAIResponse(response: unknown): AICommandResult {\r\n  if (!response || typeof response !== 'object') {\r\n    return {\r\n      type: 'unknown',\r\n      message: 'Invalid response from AI',\r\n      success: false,\r\n      error: 'Invalid response format',\r\n    };\r\n  }\r\n\r\n  const r = response as Record<string, unknown>;\r\n\r\n  return {\r\n    type: (r.type as AICommandResult['type']) || 'unknown',\r\n    taskId: typeof r.taskId === 'string' ? r.taskId : undefined,\r\n    taskName: typeof r.taskName === 'string' ? r.taskName : undefined,\r\n    updates: r.updates as Partial<Task> | undefined,\r\n    newTask: r.newTask as Task | undefined,\r\n    dependencyFrom: typeof r.dependencyFrom === 'string' ? r.dependencyFrom : undefined,\r\n    dependencyTo: typeof r.dependencyTo === 'string' ? r.dependencyTo : undefined,\r\n    message: typeof r.message === 'string' ? r.message : 'Command processed',\r\n    success: typeof r.success === 'boolean' ? r.success : false,\r\n    error: typeof r.error === 'string' ? r.error : undefined,\r\n  };\r\n}\r\n","/**\r\n * Type adapters for converting between ASAKAA Card types and Gantt Task types\r\n * @module Gantt/adapters\r\n */\r\n\r\nimport type { Card } from '../../types'\r\nimport type { Task, Assignee } from './types'\r\n\r\n/**\r\n * Maps ASAKAA CardStatus to Gantt task status\r\n */\r\nfunction mapCardStatusToTaskStatus(\r\n  status?: string\r\n): 'todo' | 'in-progress' | 'completed' | undefined {\r\n  if (!status) return undefined\r\n\r\n  switch (status.toUpperCase()) {\r\n    case 'TODO':\r\n    case 'BLOCKED':\r\n      return 'todo'\r\n    case 'IN_PROGRESS':\r\n    case 'REVIEW':\r\n      return 'in-progress'\r\n    case 'DONE':\r\n      return 'completed'\r\n    default:\r\n      return 'todo'\r\n  }\r\n}\r\n\r\n/**\r\n * Maps Gantt task status to ASAKAA CardStatus\r\n */\r\nfunction mapTaskStatusToCardStatus(\r\n  status?: 'todo' | 'in-progress' | 'completed'\r\n): 'TODO' | 'IN_PROGRESS' | 'DONE' {\r\n  switch (status) {\r\n    case 'todo':\r\n      return 'TODO'\r\n    case 'in-progress':\r\n      return 'IN_PROGRESS'\r\n    case 'completed':\r\n      return 'DONE'\r\n    default:\r\n      return 'TODO'\r\n  }\r\n}\r\n\r\n/**\r\n * Converts an ASAKAA Card to a Gantt Task\r\n *\r\n * @param card - ASAKAA Card object\r\n * @param allCards - All cards in the board (for resolving subtasks)\r\n * @param users - Available users for assignee mapping\r\n * @returns Gantt Task object\r\n */\r\nexport function cardToGanttTask(\r\n  card: Card,\r\n  allCards: Card[] = [],\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Task {\r\n  // Map assignees\r\n  const assignees: Assignee[] | undefined = card.assignedUserIds\r\n    ?.map((userId) => {\r\n      const user = users.find((u) => u.id === userId)\r\n      if (!user) return null\r\n      return {\r\n        name: user.name,\r\n        initials: user.initials,\r\n        color: user.color,\r\n      }\r\n    })\r\n    .filter((a): a is Assignee => a !== null)\r\n\r\n  // Find subtasks (cards that reference this card as parent)\r\n  const subtasks: Task[] | undefined = allCards\r\n    .filter((c) => c.metadata?.parentCardId === card.id)\r\n    .map((c) => cardToGanttTask(c, allCards, users))\r\n\r\n  // Extract dependency IDs\r\n  let dependencies: string[] | undefined\r\n  if (card.dependencies) {\r\n    if (typeof card.dependencies[0] === 'string') {\r\n      // Legacy format: string[]\r\n      dependencies = card.dependencies as string[]\r\n    } else {\r\n      // New format: Dependency[] - only use finish-to-start\r\n      dependencies = (card.dependencies as any[])\r\n        .filter((dep) => dep.type === 'finish-to-start')\r\n        .map((dep) => dep.taskId)\r\n    }\r\n  }\r\n\r\n  // Parse dates (handle both Date and string) - allow undefined for tasks without dates\r\n  const parseDate = (date: Date | string | undefined): Date | undefined => {\r\n    if (!date) return undefined\r\n    return typeof date === 'string' ? new Date(date) : date\r\n  }\r\n\r\n  const startDate = parseDate(card.startDate)\r\n  const endDate = parseDate(card.endDate)\r\n\r\n  // Determine if this is a milestone (0 or 1 day duration, or explicitly marked)\r\n  const isMilestone = card.metadata?.isMilestone === true ||\r\n    (startDate && endDate && Math.abs(endDate.getTime() - startDate.getTime()) <= 86400000)\r\n\r\n  return {\r\n    id: card.id,\r\n    name: card.title,\r\n    startDate,\r\n    endDate,\r\n    progress: card.progress || 0,\r\n    status: mapCardStatusToTaskStatus(card.metadata?.status as string),\r\n    assignees: assignees?.length ? assignees : undefined,\r\n    dependencies: dependencies?.length ? dependencies : undefined,\r\n    subtasks: subtasks?.length ? subtasks : undefined,\r\n    isExpanded: card.metadata?.isExpanded === true,\r\n    isMilestone,\r\n    isCriticalPath: card.metadata?.isCriticalPath === true,\r\n  }\r\n}\r\n\r\n/**\r\n * Converts a Gantt Task back to an ASAKAA Card (partial update)\r\n * Note: This only returns the fields that Gantt can modify\r\n *\r\n * @param task - Gantt Task object\r\n * @param users - Available users for reverse mapping assignees to userIds\r\n * @returns Partial Card update object\r\n */\r\nexport function ganttTaskToCardUpdate(\r\n  task: Task,\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Partial<Card> {\r\n  // Convert assignees back to userIds\r\n  let assignedUserIds: string[] | undefined\r\n  if (task.assignees && task.assignees.length > 0) {\r\n    assignedUserIds = task.assignees\r\n      .map((assignee) => {\r\n        // Find user by name or initials\r\n        const user = users.find(\r\n          (u) => u.name === assignee.name || u.initials === assignee.initials\r\n        )\r\n        return user?.id\r\n      })\r\n      .filter((id): id is string => id !== undefined)\r\n  }\r\n\r\n  return {\r\n    id: task.id,\r\n    title: task.name,\r\n    startDate: task.startDate,\r\n    endDate: task.endDate,\r\n    progress: task.progress,\r\n    assignedUserIds: assignedUserIds?.length ? assignedUserIds : undefined,\r\n    metadata: {\r\n      status: mapTaskStatusToCardStatus(task.status),\r\n      isExpanded: task.isExpanded,\r\n      isMilestone: task.isMilestone,\r\n      isCriticalPath: task.isCriticalPath,\r\n    },\r\n  }\r\n}\r\n\r\n/**\r\n * Converts an array of Cards to an array of Gantt Tasks\r\n *\r\n * @param cards - Array of ASAKAA Card objects\r\n * @param users - Available users for assignee mapping\r\n * @returns Array of Gantt Task objects\r\n */\r\nexport function cardsToGanttTasks(\r\n  cards: Card[],\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Task[] {\r\n  // Filter out cards that are subtasks (have parentCardId)\r\n  const topLevelCards = cards.filter((c) => !c.metadata?.parentCardId)\r\n\r\n  return topLevelCards.map((card) => cardToGanttTask(card, cards, users))\r\n}\r\n","/**\r\n * Internationalization (i18n) for ListView\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { ListViewTranslations } from './types';\r\n\r\nexport type ListViewSupportedLocale = 'en' | 'es';\r\n\r\n/**\r\n * English translations\r\n */\r\nexport const en: ListViewTranslations = {\r\n  columns: {\r\n    name: 'Task Name',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    progress: 'Progress',\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    priority: 'Priority',\r\n    actions: 'Actions',\r\n  },\r\n\r\n  toolbar: {\r\n    search: 'Search',\r\n    searchPlaceholder: 'Search tasks...',\r\n    filter: 'Filter',\r\n    clearFilters: 'Clear Filters',\r\n    export: 'Export',\r\n    columns: 'Columns',\r\n    newTask: 'New Task',\r\n  },\r\n\r\n  filters: {\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    dateRange: 'Date Range',\r\n    showCompleted: 'Show Completed',\r\n    all: 'All',\r\n    none: 'None',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Edit',\r\n    delete: 'Delete',\r\n    duplicate: 'Duplicate',\r\n    viewDetails: 'View Details',\r\n  },\r\n\r\n  empty: {\r\n    noTasks: 'No tasks yet',\r\n    noResults: 'No tasks match your filters',\r\n    addFirstTask: 'Add your first task',\r\n  },\r\n\r\n  pagination: {\r\n    showing: 'Showing',\r\n    of: 'of',\r\n    tasks: 'tasks',\r\n    previous: 'Previous',\r\n    next: 'Next',\r\n  },\r\n\r\n  bulk: {\r\n    selected: 'selected',\r\n    delete: 'Delete',\r\n    move: 'Move to',\r\n    assignTo: 'Assign to',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: ListViewTranslations = {\r\n  columns: {\r\n    name: 'Nombre de Tarea',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    progress: 'Progreso',\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    priority: 'Prioridad',\r\n    actions: 'Acciones',\r\n  },\r\n\r\n  toolbar: {\r\n    search: 'Buscar',\r\n    searchPlaceholder: 'Buscar tareas...',\r\n    filter: 'Filtrar',\r\n    clearFilters: 'Limpiar Filtros',\r\n    export: 'Exportar',\r\n    columns: 'Columnas',\r\n    newTask: 'Nueva Tarea',\r\n  },\r\n\r\n  filters: {\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    dateRange: 'Rango de Fechas',\r\n    showCompleted: 'Mostrar Completadas',\r\n    all: 'Todos',\r\n    none: 'Ninguno',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Editar',\r\n    delete: 'Eliminar',\r\n    duplicate: 'Duplicar',\r\n    viewDetails: 'Ver Detalles',\r\n  },\r\n\r\n  empty: {\r\n    noTasks: 'Sin tareas an',\r\n    noResults: 'Ninguna tarea coincide con los filtros',\r\n    addFirstTask: 'Agrega tu primera tarea',\r\n  },\r\n\r\n  pagination: {\r\n    showing: 'Mostrando',\r\n    of: 'de',\r\n    tasks: 'tareas',\r\n    previous: 'Anterior',\r\n    next: 'Siguiente',\r\n  },\r\n\r\n  bulk: {\r\n    selected: 'seleccionadas',\r\n    delete: 'Eliminar',\r\n    move: 'Mover a',\r\n    assignTo: 'Asignar a',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const listViewTranslations: Record<ListViewSupportedLocale, ListViewTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n */\r\nexport function getListViewTranslations(locale: ListViewSupportedLocale | string): ListViewTranslations {\r\n  return listViewTranslations[locale as ListViewSupportedLocale] || listViewTranslations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n */\r\nexport function mergeListViewTranslations(\r\n  locale: ListViewSupportedLocale | string,\r\n  customTranslations?: Partial<ListViewTranslations>\r\n): ListViewTranslations {\r\n  const base = getListViewTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    columns: { ...base.columns, ...customTranslations.columns },\r\n    toolbar: { ...base.toolbar, ...customTranslations.toolbar },\r\n    filters: { ...base.filters, ...customTranslations.filters },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    actions: { ...base.actions, ...customTranslations.actions },\r\n    empty: { ...base.empty, ...customTranslations.empty },\r\n    pagination: { ...base.pagination, ...customTranslations.pagination },\r\n    bulk: { ...base.bulk, ...customTranslations.bulk },\r\n  };\r\n}\r\n","/**\r\n * ListView Component\r\n * Professional list view for task management\r\n * Based on SaaS ProjectList component styles\r\n * @version 0.17.0\r\n */\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  List,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  Calendar,\r\n  Clock,\r\n  CheckCircle2,\r\n  Circle,\r\n  PlayCircle,\r\n  ArrowUpDown,\r\n  Search,\r\n} from 'lucide-react';\r\nimport type { Task } from '../Gantt/types';\r\nimport type { ListViewProps, FlattenedTask } from './types';\r\nimport { mergeListViewTranslations } from './i18n';\r\nimport { cn } from '../../utils';\r\n\r\ntype SortField = 'name' | 'startDate' | 'endDate' | 'progress' | 'status';\r\ntype SortOrder = 'asc' | 'desc';\r\n\r\n/**\r\n * Flatten hierarchical tasks to flat list with level info\r\n */\r\nfunction flattenTasksWithLevel(tasks: Task[], level = 0): FlattenedTask[] {\r\n  const result: FlattenedTask[] = [];\r\n\r\n  for (const task of tasks) {\r\n    result.push({\r\n      ...task,\r\n      level,\r\n      hasChildren: (task.subtasks?.length || 0) > 0,\r\n      parentPath: [task.id],\r\n    });\r\n    if (task.subtasks?.length && task.isExpanded !== false) {\r\n      result.push(...flattenTasksWithLevel(task.subtasks, level + 1));\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Status Icon component\r\n */\r\nfunction StatusIcon({ status, progress }: { status?: string; progress?: number }) {\r\n  if (progress === 100 || status === 'completed') {\r\n    return <CheckCircle2 className=\"w-5 h-5 text-green-500\" />;\r\n  }\r\n  if ((progress && progress > 0) || status === 'in-progress') {\r\n    return <PlayCircle className=\"w-5 h-5 text-blue-500\" />;\r\n  }\r\n  return <Circle className=\"w-5 h-5 text-gray-400\" />;\r\n}\r\n\r\n/**\r\n * Main ListView Component\r\n */\r\nexport function ListView({\r\n  tasks,\r\n  config = {},\r\n  callbacks = {},\r\n  isLoading = false,\r\n  error,\r\n  className,\r\n  style,\r\n}: ListViewProps) {\r\n  const {\r\n    theme: themeName = 'dark',\r\n    locale = 'en',\r\n    customTranslations,\r\n    showSearch = true,\r\n    showHierarchy = true,\r\n  } = config;\r\n\r\n  const t = mergeListViewTranslations(locale, customTranslations);\r\n  const isDark = themeName === 'dark';\r\n\r\n  // State\r\n  const [expandedTasks, setExpandedTasks] = useState<Set<string>>(new Set());\r\n  const [sortField, setSortField] = useState<SortField>('startDate');\r\n  const [sortOrder, setSortOrder] = useState<SortOrder>('asc');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  // Initialize expanded tasks\r\n  useMemo(() => {\r\n    const parentIds = new Set<string>();\r\n    function findParents(taskList: Task[]) {\r\n      for (const task of taskList) {\r\n        if (task.subtasks?.length) {\r\n          parentIds.add(task.id);\r\n          findParents(task.subtasks);\r\n        }\r\n      }\r\n    }\r\n    findParents(tasks);\r\n    setExpandedTasks(parentIds);\r\n  }, [tasks]);\r\n\r\n  // Toggle task expansion\r\n  const toggleExpand = useCallback((taskId: string) => {\r\n    setExpandedTasks(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(taskId)) {\r\n        next.delete(taskId);\r\n      } else {\r\n        next.add(taskId);\r\n      }\r\n      return next;\r\n    });\r\n    callbacks.onTaskToggleExpand?.(taskId);\r\n  }, [callbacks]);\r\n\r\n  // Sort handler\r\n  const handleSort = useCallback((field: SortField) => {\r\n    if (sortField === field) {\r\n      setSortOrder(prev => prev === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortOrder('asc');\r\n    }\r\n    callbacks.onSortChange?.({ column: field, direction: sortOrder === 'asc' ? 'desc' : 'asc' });\r\n  }, [sortField, sortOrder, callbacks]);\r\n\r\n  // Filter and sort tasks\r\n  const displayTasks = useMemo(() => {\r\n    let flatTasks = flattenTasksWithLevel(tasks);\r\n\r\n    // Filter by search\r\n    if (searchQuery.trim()) {\r\n      const query = searchQuery.toLowerCase();\r\n      flatTasks = flatTasks.filter(task =>\r\n        task.name.toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    // Filter by expanded state\r\n    const visibleTasks: FlattenedTask[] = [];\r\n    for (const task of flatTasks) {\r\n      let isVisible = task.level === 0;\r\n      if (task.level > 0) {\r\n        isVisible = true;\r\n      }\r\n      if (isVisible || searchQuery.trim()) {\r\n        visibleTasks.push(task);\r\n      }\r\n    }\r\n\r\n    // Sort\r\n    if (searchQuery.trim()) {\r\n      visibleTasks.sort((a, b) => {\r\n        let aVal: string | number, bVal: string | number;\r\n\r\n        switch (sortField) {\r\n          case 'name':\r\n            aVal = a.name.toLowerCase();\r\n            bVal = b.name.toLowerCase();\r\n            break;\r\n          case 'startDate':\r\n            aVal = a.startDate?.getTime() || 0;\r\n            bVal = b.startDate?.getTime() || 0;\r\n            break;\r\n          case 'endDate':\r\n            aVal = a.endDate?.getTime() || 0;\r\n            bVal = b.endDate?.getTime() || 0;\r\n            break;\r\n          case 'progress':\r\n            aVal = a.progress || 0;\r\n            bVal = b.progress || 0;\r\n            break;\r\n          case 'status':\r\n            aVal = a.status || 'todo';\r\n            bVal = b.status || 'todo';\r\n            break;\r\n          default:\r\n            return 0;\r\n        }\r\n\r\n        if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;\r\n        if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    return visibleTasks;\r\n  }, [tasks, searchQuery, sortField, sortOrder]);\r\n\r\n  // Format date\r\n  const formatDate = (date?: Date) => {\r\n    if (!date) return '-';\r\n    const d = date instanceof Date ? date : new Date(date);\r\n    return d.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n    });\r\n  };\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"w-8 h-8 animate-spin rounded-full border-b-2 border-[#3B82F6]\" />\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.empty.noTasks}...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4 max-w-md text-center\">\r\n          <div className=\"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center\">\r\n            <span className=\"text-red-500 text-2xl\"></span>\r\n          </div>\r\n          <div>\r\n            <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n              Error\r\n            </h3>\r\n            <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n              {typeof error === 'string' ? error : error.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state\r\n  if (tasks.length === 0) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"text-center max-w-md\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[#3B82F6]/10 flex items-center justify-center\">\r\n            <List className=\"w-8 h-8 text-[#3B82F6]\" />\r\n          </div>\r\n          <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n            {t.empty.noTasks}\r\n          </h3>\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.empty.addFirstTask}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"flex-1 flex flex-col w-full h-full overflow-hidden\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n      {/* Toolbar */}\r\n      <div className={cn(\"flex-shrink-0 px-6 py-4 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\r\n        <div className=\"flex items-center gap-4\">\r\n          {/* Search */}\r\n          {showSearch && (\r\n            <div className=\"relative flex-1 max-w-md\">\r\n              <Search className={cn(\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n              <input\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder={t.toolbar.searchPlaceholder}\r\n                className={cn(\r\n                  \"w-full h-9 pl-10 pr-4 rounded-lg border outline-none focus:ring-2 focus:ring-[#3B82F6]/30\",\r\n                  isDark\r\n                    ? \"bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]\"\r\n                    : \"bg-gray-100 border-gray-200 text-gray-900 placeholder:text-gray-400\"\r\n                )}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Task count */}\r\n          <div className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {displayTasks.length} {t.pagination.tasks}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* List Header */}\r\n      <div className={cn(\r\n        \"flex-shrink-0 grid grid-cols-12 gap-4 px-6 py-3 border-b text-xs font-medium uppercase tracking-wider\",\r\n        isDark ? \"border-white/10 bg-white/5 text-[#9CA3AF]\" : \"border-gray-200 bg-gray-50 text-gray-500\"\r\n      )}>\r\n        <div className=\"col-span-5 flex items-center gap-2\">\r\n          <button onClick={() => handleSort('name')} className=\"flex items-center gap-1 hover:text-[#3B82F6]\">\r\n            {t.columns.name}\r\n            <ArrowUpDown className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"col-span-2 flex items-center gap-1\">\r\n          <button onClick={() => handleSort('status')} className=\"flex items-center gap-1 hover:text-[#3B82F6]\">\r\n            {t.columns.status}\r\n            <ArrowUpDown className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"col-span-2 flex items-center gap-1\">\r\n          <button onClick={() => handleSort('startDate')} className=\"flex items-center gap-1 hover:text-[#3B82F6]\">\r\n            {t.columns.startDate}\r\n            <ArrowUpDown className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"col-span-2 flex items-center gap-1\">\r\n          <button onClick={() => handleSort('endDate')} className=\"flex items-center gap-1 hover:text-[#3B82F6]\">\r\n            {t.columns.endDate}\r\n            <ArrowUpDown className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"col-span-1 flex items-center gap-1\">\r\n          <button onClick={() => handleSort('progress')} className=\"flex items-center gap-1 hover:text-[#3B82F6]\">\r\n            %\r\n            <ArrowUpDown className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Task List */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        <AnimatePresence>\r\n          {displayTasks.map((task, index) => {\r\n            const isExpanded = expandedTasks.has(task.id);\r\n\r\n            return (\r\n              <motion.div\r\n                key={task.id}\r\n                initial={{ opacity: 0, y: -10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                transition={{ delay: index * 0.02 }}\r\n                className={cn(\r\n                  \"grid grid-cols-12 gap-4 px-6 py-3 border-b transition-colors cursor-pointer\",\r\n                  isDark\r\n                    ? \"border-white/5 hover:bg-white/5\"\r\n                    : \"border-gray-100 hover:bg-gray-50\"\r\n                )}\r\n                style={{ paddingLeft: showHierarchy ? `${24 + task.level * 24}px` : undefined }}\r\n                onClick={() => callbacks.onTaskClick?.(task)}\r\n                onDoubleClick={() => callbacks.onTaskDoubleClick?.(task)}\r\n              >\r\n                {/* Task Name */}\r\n                <div className=\"col-span-5 flex items-center gap-2 min-w-0\">\r\n                  {showHierarchy && task.hasChildren && (\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        toggleExpand(task.id);\r\n                      }}\r\n                      className={cn(\"p-0.5 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-200\")}\r\n                    >\r\n                      {isExpanded ? (\r\n                        <ChevronDown className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n                      ) : (\r\n                        <ChevronRight className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n                      )}\r\n                    </button>\r\n                  )}\r\n                  {showHierarchy && !task.hasChildren && <div className=\"w-5\" />}\r\n\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      callbacks.onTaskUpdate?.({\r\n                        ...task,\r\n                        progress: task.progress === 100 ? 0 : 100,\r\n                        status: task.progress === 100 ? 'todo' : 'completed'\r\n                      });\r\n                    }}\r\n                    className=\"flex-shrink-0\"\r\n                  >\r\n                    <StatusIcon status={task.status} progress={task.progress} />\r\n                  </button>\r\n\r\n                  <span className={cn(\r\n                    \"truncate\",\r\n                    isDark ? \"text-white\" : \"text-gray-900\",\r\n                    task.progress === 100 && (isDark ? \"line-through text-[#6B7280]\" : \"line-through text-gray-400\")\r\n                  )}>\r\n                    {task.name}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Status */}\r\n                <div className=\"col-span-2 flex items-center\">\r\n                  <span className={cn(\r\n                    \"px-2 py-1 rounded-full text-xs font-medium\",\r\n                    task.progress === 100 || task.status === 'completed'\r\n                      ? \"bg-green-500/10 text-green-500\"\r\n                      : (task.progress && task.progress > 0) || task.status === 'in-progress'\r\n                        ? \"bg-blue-500/10 text-blue-500\"\r\n                        : isDark\r\n                          ? \"bg-white/10 text-[#9CA3AF]\"\r\n                          : \"bg-gray-100 text-gray-600\"\r\n                  )}>\r\n                    {task.progress === 100 || task.status === 'completed'\r\n                      ? t.status.completed\r\n                      : (task.progress && task.progress > 0) || task.status === 'in-progress'\r\n                        ? t.status.inProgress\r\n                        : t.status.todo}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Start Date */}\r\n                <div className={cn(\"col-span-2 flex items-center gap-1 text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n                  <Calendar className=\"w-4 h-4\" />\r\n                  {formatDate(task.startDate)}\r\n                </div>\r\n\r\n                {/* End Date */}\r\n                <div className={cn(\"col-span-2 flex items-center gap-1 text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n                  <Clock className=\"w-4 h-4\" />\r\n                  {formatDate(task.endDate)}\r\n                </div>\r\n\r\n                {/* Progress */}\r\n                <div className=\"col-span-1 flex items-center\">\r\n                  <div className=\"flex items-center gap-2 w-full\">\r\n                    <div className={cn(\"flex-1 h-1.5 rounded-full overflow-hidden\", isDark ? \"bg-white/10\" : \"bg-gray-200\")}>\r\n                      <div\r\n                        className={cn(\r\n                          \"h-full rounded-full transition-all\",\r\n                          task.progress === 100 ? \"bg-green-500\" : \"bg-[#3B82F6]\"\r\n                        )}\r\n                        style={{ width: `${task.progress || 0}%` }}\r\n                      />\r\n                    </div>\r\n                    <span className={cn(\"text-xs w-8\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\r\n                      {task.progress || 0}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            );\r\n          })}\r\n        </AnimatePresence>\r\n\r\n        {/* Empty search state */}\r\n        {displayTasks.length === 0 && searchQuery && (\r\n          <div className=\"flex items-center justify-center py-12\">\r\n            <div className=\"text-center\">\r\n              <List className={cn(\"w-12 h-12 mx-auto mb-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\r\n              <p className={cn(isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n                {t.empty.noResults}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ListView;\r\n","/**\r\n * ListView Themes\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { ListViewTheme } from './types';\r\n\r\n/**\r\n * Dark theme for ListView\r\n */\r\nexport const darkTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#0d1117',\r\n  bgSecondary: '#161b22',\r\n  bgHover: '#21262d',\r\n  bgSelected: '#1f6feb20',\r\n  bgAlternate: '#0d111780',\r\n\r\n  // Borders\r\n  border: '#30363d',\r\n  borderLight: '#21262d',\r\n\r\n  // Text\r\n  textPrimary: '#c9d1d9',\r\n  textSecondary: '#8b949e',\r\n  textMuted: '#6e7681',\r\n\r\n  // Accent colors\r\n  accent: '#58a6ff',\r\n  accentHover: '#79b8ff',\r\n  accentLight: '#58a6ff20',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#f0883e',\r\n  statusCompleted: '#3fb950',\r\n\r\n  // Interactive\r\n  focusRing: '#58a6ff',\r\n  checkboxBg: '#21262d',\r\n  checkboxChecked: '#58a6ff',\r\n};\r\n\r\n/**\r\n * Light theme for ListView\r\n */\r\nexport const lightTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#ffffff',\r\n  bgSecondary: '#f6f8fa',\r\n  bgHover: '#f3f4f6',\r\n  bgSelected: '#dbeafe',\r\n  bgAlternate: '#f9fafb',\r\n\r\n  // Borders\r\n  border: '#d0d7de',\r\n  borderLight: '#e5e7eb',\r\n\r\n  // Text\r\n  textPrimary: '#24292f',\r\n  textSecondary: '#57606a',\r\n  textMuted: '#8b949e',\r\n\r\n  // Accent colors\r\n  accent: '#0969da',\r\n  accentHover: '#0550ae',\r\n  accentLight: '#dbeafe',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#bf8700',\r\n  statusCompleted: '#1a7f37',\r\n\r\n  // Interactive\r\n  focusRing: '#0969da',\r\n  checkboxBg: '#ffffff',\r\n  checkboxChecked: '#0969da',\r\n};\r\n\r\n/**\r\n * Neutral theme for ListView\r\n */\r\nexport const neutralTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#1a1a2e',\r\n  bgSecondary: '#16213e',\r\n  bgHover: '#1f3460',\r\n  bgSelected: '#0f4c7520',\r\n  bgAlternate: '#1a1a2e80',\r\n\r\n  // Borders\r\n  border: '#2a3f5f',\r\n  borderLight: '#1f3460',\r\n\r\n  // Text\r\n  textPrimary: '#e4e6eb',\r\n  textSecondary: '#a8b2c1',\r\n  textMuted: '#6b7280',\r\n\r\n  // Accent colors\r\n  accent: '#6366f1',\r\n  accentHover: '#818cf8',\r\n  accentLight: '#6366f120',\r\n\r\n  // Status colors\r\n  statusTodo: '#9ca3af',\r\n  statusInProgress: '#fbbf24',\r\n  statusCompleted: '#34d399',\r\n\r\n  // Interactive\r\n  focusRing: '#6366f1',\r\n  checkboxBg: '#1f3460',\r\n  checkboxChecked: '#6366f1',\r\n};\r\n\r\n/**\r\n * All available themes\r\n */\r\nexport const listViewThemes = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n} as const;\r\n\r\nexport type ListViewThemeName = keyof typeof listViewThemes;\r\n\r\n/**\r\n * Get theme by name\r\n */\r\nexport function getListViewTheme(themeName: ListViewThemeName): ListViewTheme {\r\n  return listViewThemes[themeName] || listViewThemes.dark;\r\n}\r\n","/**\r\n * Internationalization (i18n) for CalendarBoard\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { CalendarTranslations } from './types';\r\n\r\nexport type CalendarSupportedLocale = 'en' | 'es';\r\n\r\n/**\r\n * English translations\r\n */\r\nexport const en: CalendarTranslations = {\r\n  navigation: {\r\n    today: 'Today',\r\n    previous: 'Previous',\r\n    next: 'Next',\r\n    month: 'Month',\r\n    week: 'Week',\r\n    day: 'Day',\r\n  },\r\n\r\n  weekdays: {\r\n    sun: 'Sun',\r\n    mon: 'Mon',\r\n    tue: 'Tue',\r\n    wed: 'Wed',\r\n    thu: 'Thu',\r\n    fri: 'Fri',\r\n    sat: 'Sat',\r\n  },\r\n\r\n  weekdaysFull: {\r\n    sunday: 'Sunday',\r\n    monday: 'Monday',\r\n    tuesday: 'Tuesday',\r\n    wednesday: 'Wednesday',\r\n    thursday: 'Thursday',\r\n    friday: 'Friday',\r\n    saturday: 'Saturday',\r\n  },\r\n\r\n  months: {\r\n    january: 'January',\r\n    february: 'February',\r\n    march: 'March',\r\n    april: 'April',\r\n    may: 'May',\r\n    june: 'June',\r\n    july: 'July',\r\n    august: 'August',\r\n    september: 'September',\r\n    october: 'October',\r\n    november: 'November',\r\n    december: 'December',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  labels: {\r\n    allDay: 'All day',\r\n    moreEvents: '+{count} more',\r\n    noEvents: 'No tasks',\r\n    newTask: 'New Task',\r\n    viewAll: 'View all',\r\n    week: 'Week',\r\n  },\r\n\r\n  tooltips: {\r\n    progress: 'Progress',\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    duration: 'Duration',\r\n    days: 'days',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: CalendarTranslations = {\r\n  navigation: {\r\n    today: 'Hoy',\r\n    previous: 'Anterior',\r\n    next: 'Siguiente',\r\n    month: 'Mes',\r\n    week: 'Semana',\r\n    day: 'Da',\r\n  },\r\n\r\n  weekdays: {\r\n    sun: 'Dom',\r\n    mon: 'Lun',\r\n    tue: 'Mar',\r\n    wed: 'Mi',\r\n    thu: 'Jue',\r\n    fri: 'Vie',\r\n    sat: 'Sb',\r\n  },\r\n\r\n  weekdaysFull: {\r\n    sunday: 'Domingo',\r\n    monday: 'Lunes',\r\n    tuesday: 'Martes',\r\n    wednesday: 'Mircoles',\r\n    thursday: 'Jueves',\r\n    friday: 'Viernes',\r\n    saturday: 'Sbado',\r\n  },\r\n\r\n  months: {\r\n    january: 'Enero',\r\n    february: 'Febrero',\r\n    march: 'Marzo',\r\n    april: 'Abril',\r\n    may: 'Mayo',\r\n    june: 'Junio',\r\n    july: 'Julio',\r\n    august: 'Agosto',\r\n    september: 'Septiembre',\r\n    october: 'Octubre',\r\n    november: 'Noviembre',\r\n    december: 'Diciembre',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  labels: {\r\n    allDay: 'Todo el da',\r\n    moreEvents: '+{count} ms',\r\n    noEvents: 'Sin tareas',\r\n    newTask: 'Nueva Tarea',\r\n    viewAll: 'Ver todo',\r\n    week: 'Semana',\r\n  },\r\n\r\n  tooltips: {\r\n    progress: 'Progreso',\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    duration: 'Duracin',\r\n    days: 'das',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const calendarTranslations: Record<CalendarSupportedLocale, CalendarTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n */\r\nexport function getCalendarTranslations(locale: CalendarSupportedLocale | string): CalendarTranslations {\r\n  return calendarTranslations[locale as CalendarSupportedLocale] || calendarTranslations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n */\r\nexport function mergeCalendarTranslations(\r\n  locale: CalendarSupportedLocale | string,\r\n  customTranslations?: Partial<CalendarTranslations>\r\n): CalendarTranslations {\r\n  const base = getCalendarTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    navigation: { ...base.navigation, ...customTranslations.navigation },\r\n    weekdays: { ...base.weekdays, ...customTranslations.weekdays },\r\n    weekdaysFull: { ...base.weekdaysFull, ...customTranslations.weekdaysFull },\r\n    months: { ...base.months, ...customTranslations.months },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    labels: { ...base.labels, ...customTranslations.labels },\r\n    tooltips: { ...base.tooltips, ...customTranslations.tooltips },\r\n  };\r\n}\r\n\r\n/**\r\n * Get month names array based on locale\r\n */\r\nexport function getMonthNames(locale: CalendarSupportedLocale | string): string[] {\r\n  const t = getCalendarTranslations(locale);\r\n  return [\r\n    t.months.january,\r\n    t.months.february,\r\n    t.months.march,\r\n    t.months.april,\r\n    t.months.may,\r\n    t.months.june,\r\n    t.months.july,\r\n    t.months.august,\r\n    t.months.september,\r\n    t.months.october,\r\n    t.months.november,\r\n    t.months.december,\r\n  ];\r\n}\r\n\r\n/**\r\n * Get weekday names array based on locale and first day of week\r\n */\r\nexport function getWeekdayNames(\r\n  locale: CalendarSupportedLocale | string,\r\n  firstDayOfWeek: number = 0,\r\n  short: boolean = true\r\n): string[] {\r\n  const t = getCalendarTranslations(locale);\r\n  const weekdays = short\r\n    ? [t.weekdays.sun, t.weekdays.mon, t.weekdays.tue, t.weekdays.wed, t.weekdays.thu, t.weekdays.fri, t.weekdays.sat]\r\n    : [\r\n        t.weekdaysFull.sunday,\r\n        t.weekdaysFull.monday,\r\n        t.weekdaysFull.tuesday,\r\n        t.weekdaysFull.wednesday,\r\n        t.weekdaysFull.thursday,\r\n        t.weekdaysFull.friday,\r\n        t.weekdaysFull.saturday,\r\n      ];\r\n\r\n  // Rotate array to start from firstDayOfWeek\r\n  return [...weekdays.slice(firstDayOfWeek), ...weekdays.slice(0, firstDayOfWeek)];\r\n}\r\n","/**\r\n * CalendarBoard Component\r\n * Professional calendar view for task management\r\n * Based on SaaS ProjectCalendar component styles\r\n * @version 0.17.0\r\n */\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Calendar,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  CheckCircle2,\r\n  Circle,\r\n  PlayCircle,\r\n  X,\r\n} from 'lucide-react';\r\nimport type { Task } from '../Gantt/types';\r\nimport type { CalendarBoardProps, CalendarDay } from './types';\r\nimport { mergeCalendarTranslations } from './i18n';\r\nimport { cn } from '../../utils';\r\n\r\n/**\r\n * Flatten hierarchical tasks to flat list\r\n */\r\nfunction flattenTasks(tasks: Task[]): Task[] {\r\n  const result: Task[] = [];\r\n\r\n  function traverse(taskList: Task[]) {\r\n    for (const task of taskList) {\r\n      result.push(task);\r\n      if (task.subtasks?.length) {\r\n        traverse(task.subtasks);\r\n      }\r\n    }\r\n  }\r\n\r\n  traverse(tasks);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Check if a date falls within a task's date range\r\n */\r\nfunction isDateInTaskRange(date: Date, task: Task): boolean {\r\n  if (!task.startDate || !task.endDate) return false;\r\n\r\n  const dateOnly = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n  const startOnly = new Date(task.startDate.getFullYear(), task.startDate.getMonth(), task.startDate.getDate());\r\n  const endOnly = new Date(task.endDate.getFullYear(), task.endDate.getMonth(), task.endDate.getDate());\r\n\r\n  return dateOnly >= startOnly && dateOnly <= endOnly;\r\n}\r\n\r\n/**\r\n * Status Icon component\r\n */\r\nfunction StatusIcon({ task }: { task: Task }) {\r\n  if (task.progress === 100 || task.status === 'completed') {\r\n    return <CheckCircle2 className=\"w-3 h-3 text-green-500 flex-shrink-0\" />;\r\n  }\r\n  if ((task.progress && task.progress > 0) || task.status === 'in-progress') {\r\n    return <PlayCircle className=\"w-3 h-3 text-blue-500 flex-shrink-0\" />;\r\n  }\r\n  return <Circle className=\"w-3 h-3 text-gray-400 flex-shrink-0\" />;\r\n}\r\n\r\n/**\r\n * Main CalendarBoard Component\r\n */\r\nexport function CalendarBoard({\r\n  tasks,\r\n  config = {},\r\n  callbacks = {},\r\n  initialDate,\r\n  isLoading = false,\r\n  error,\r\n  className,\r\n  style,\r\n}: CalendarBoardProps) {\r\n  const {\r\n    theme: themeName = 'dark',\r\n    locale = 'en',\r\n    customTranslations,\r\n  } = config;\r\n\r\n  const t = mergeCalendarTranslations(locale, customTranslations);\r\n  const isDark = themeName === 'dark';\r\n\r\n  // State\r\n  const [currentDate, setCurrentDate] = useState(initialDate || new Date());\r\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\r\n\r\n  // Navigate months\r\n  const goToPreviousMonth = useCallback(() => {\r\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\r\n  }, [currentDate]);\r\n\r\n  const goToNextMonth = useCallback(() => {\r\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\r\n  }, [currentDate]);\r\n\r\n  const goToToday = useCallback(() => {\r\n    setCurrentDate(new Date());\r\n  }, []);\r\n\r\n  // Generate calendar days\r\n  const calendarDays = useMemo((): CalendarDay[] => {\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth();\r\n\r\n    const firstDayOfMonth = new Date(year, month, 1);\r\n    const lastDayOfMonth = new Date(year, month + 1, 0);\r\n\r\n    const startDay = firstDayOfMonth.getDay();\r\n    const daysInMonth = lastDayOfMonth.getDate();\r\n\r\n    const flatTaskList = flattenTasks(tasks);\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    const days: CalendarDay[] = [];\r\n\r\n    // Previous month days\r\n    const prevMonthDays = startDay;\r\n    const prevMonthLastDay = new Date(year, month, 0).getDate();\r\n    for (let i = prevMonthDays - 1; i >= 0; i--) {\r\n      const date = new Date(year, month - 1, prevMonthLastDay - i);\r\n      days.push({\r\n        date,\r\n        isCurrentMonth: false,\r\n        isToday: false,\r\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\r\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\r\n          id: task.id,\r\n          title: task.name,\r\n          start: task.startDate!,\r\n          end: task.endDate!,\r\n          task,\r\n        })),\r\n      });\r\n    }\r\n\r\n    // Current month days\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      const date = new Date(year, month, day);\r\n      const isToday = date.getTime() === today.getTime();\r\n      days.push({\r\n        date,\r\n        isCurrentMonth: true,\r\n        isToday,\r\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\r\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\r\n          id: task.id,\r\n          title: task.name,\r\n          start: task.startDate!,\r\n          end: task.endDate!,\r\n          task,\r\n        })),\r\n      });\r\n    }\r\n\r\n    // Next month days (fill to complete 6 rows)\r\n    const remainingDays = 42 - days.length;\r\n    for (let day = 1; day <= remainingDays; day++) {\r\n      const date = new Date(year, month + 1, day);\r\n      days.push({\r\n        date,\r\n        isCurrentMonth: false,\r\n        isToday: false,\r\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\r\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\r\n          id: task.id,\r\n          title: task.name,\r\n          start: task.startDate!,\r\n          end: task.endDate!,\r\n          task,\r\n        })),\r\n      });\r\n    }\r\n\r\n    return days;\r\n  }, [currentDate, tasks]);\r\n\r\n  // Day names\r\n  const dayNames = locale === 'es'\r\n    ? ['Dom', 'Lun', 'Mar', 'Mi', 'Jue', 'Vie', 'Sb']\r\n    : ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n  // Month name\r\n  const monthName = currentDate.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\r\n    month: 'long',\r\n    year: 'numeric',\r\n  });\r\n\r\n  // Handle task toggle\r\n  const handleTaskToggle = useCallback((task: Task) => {\r\n    const newProgress = task.progress === 100 ? 0 : 100;\r\n    const newStatus: 'todo' | 'completed' = newProgress === 100 ? 'completed' : 'todo';\r\n    callbacks.onTaskUpdate?.({ ...task, status: newStatus, progress: newProgress });\r\n  }, [callbacks]);\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"w-8 h-8 animate-spin rounded-full border-b-2 border-[#3B82F6]\" />\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.labels.noEvents}...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4 max-w-md text-center\">\r\n          <div className=\"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center\">\r\n            <span className=\"text-red-500 text-2xl\"></span>\r\n          </div>\r\n          <div>\r\n            <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n              Error\r\n            </h3>\r\n            <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n              {typeof error === 'string' ? error : error.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state\r\n  if (tasks.length === 0) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"text-center max-w-md\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[#3B82F6]/10 flex items-center justify-center\">\r\n            <Calendar className=\"w-8 h-8 text-[#3B82F6]\" />\r\n          </div>\r\n          <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n            {t.labels.noEvents}\r\n          </h3>\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.labels.newTask}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"flex-1 flex flex-col w-full h-full overflow-hidden\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n      {/* Calendar Header */}\r\n      <div className={cn(\"flex-shrink-0 px-6 py-4 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <h2 className={cn(\"text-xl font-semibold capitalize\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n              {monthName}\r\n            </h2>\r\n            <button\r\n              onClick={goToToday}\r\n              className={cn(\r\n                \"px-3 py-1.5 text-sm rounded-lg transition-colors\",\r\n                isDark\r\n                  ? \"bg-white/5 text-white hover:bg-white/10\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              )}\r\n            >\r\n              {t.navigation.today}\r\n            </button>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={goToPreviousMonth}\r\n              className={cn(\"p-2 rounded-lg transition-colors\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\r\n            >\r\n              <ChevronLeft className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")} />\r\n            </button>\r\n            <button\r\n              onClick={goToNextMonth}\r\n              className={cn(\"p-2 rounded-lg transition-colors\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\r\n            >\r\n              <ChevronRight className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Calendar Grid */}\r\n      <div className=\"flex-1 p-6 overflow-auto\">\r\n        <div className=\"h-full flex flex-col\">\r\n          {/* Day Headers */}\r\n          <div className=\"grid grid-cols-7 gap-px mb-2\">\r\n            {dayNames.map((day) => (\r\n              <div\r\n                key={day}\r\n                className={cn(\"py-2 text-center text-xs font-medium uppercase\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}\r\n              >\r\n                {day}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Calendar Days */}\r\n          <div className={cn(\"flex-1 grid grid-cols-7 grid-rows-6 gap-px rounded-lg overflow-hidden\", isDark ? \"bg-white/5\" : \"bg-gray-200\")}>\r\n            {calendarDays.map((day, index) => (\r\n              <div\r\n                key={index}\r\n                className={cn(\r\n                  \"min-h-[100px] p-2 transition-colors\",\r\n                  isDark ? \"bg-[#0F1117]\" : \"bg-white\",\r\n                  !day.isCurrentMonth && (isDark ? \"bg-[#0F1117]/50\" : \"bg-gray-50\"),\r\n                  day.isToday && \"ring-2 ring-[#3B82F6] ring-inset\"\r\n                )}\r\n              >\r\n                {/* Day Number */}\r\n                <div className={cn(\r\n                  \"text-sm font-medium mb-1\",\r\n                  day.isToday\r\n                    ? \"text-[#3B82F6]\"\r\n                    : day.isCurrentMonth\r\n                      ? (isDark ? \"text-white\" : \"text-gray-900\")\r\n                      : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\")\r\n                )}>\r\n                  {day.date.getDate()}\r\n                </div>\r\n\r\n                {/* Tasks for this day */}\r\n                <div className=\"space-y-1 overflow-y-auto max-h-[80px]\">\r\n                  {day.events.slice(0, 3).map((event) => (\r\n                    <motion.button\r\n                      key={event.id}\r\n                      onClick={() => {\r\n                        setSelectedTask(event.task);\r\n                        callbacks.onEventClick?.(event);\r\n                      }}\r\n                      whileHover={{ scale: 1.02 }}\r\n                      className={cn(\r\n                        \"w-full flex items-center gap-1 px-1.5 py-0.5 rounded text-xs truncate\",\r\n                        event.task.progress === 100\r\n                          ? (isDark ? \"bg-green-500/20 text-green-400\" : \"bg-green-500/10 text-green-600\")\r\n                          : (isDark ? \"bg-[#3B82F6]/20 text-[#3B82F6]\" : \"bg-[#3B82F6]/10 text-[#3B82F6]\")\r\n                      )}\r\n                    >\r\n                      <StatusIcon task={event.task} />\r\n                      <span className=\"truncate\">{event.title}</span>\r\n                    </motion.button>\r\n                  ))}\r\n                  {day.events.length > 3 && (\r\n                    <div className={cn(\"text-xs px-1.5\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\r\n                      +{day.events.length - 3} {locale === 'es' ? 'ms' : 'more'}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Task Detail Panel */}\r\n      <AnimatePresence>\r\n        {selectedTask && (\r\n          <motion.div\r\n            initial={{ opacity: 0, x: 300 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 300 }}\r\n            className={cn(\r\n              \"fixed right-0 top-0 h-full w-80 border-l shadow-xl z-50\",\r\n              isDark ? \"bg-[#1A1D25] border-white/10\" : \"bg-white border-gray-200\"\r\n            )}\r\n          >\r\n            <div className={cn(\"p-4 border-b flex items-center justify-between\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\r\n              <h3 className={cn(\"font-semibold\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n                {locale === 'es' ? 'Detalle de tarea' : 'Task Detail'}\r\n              </h3>\r\n              <button\r\n                onClick={() => setSelectedTask(null)}\r\n                className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"p-4 space-y-4\">\r\n              <div>\r\n                <label className={cn(\"text-xs uppercase\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\r\n                  {locale === 'es' ? 'Nombre' : 'Name'}\r\n                </label>\r\n                <p className={cn(\"font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>{selectedTask.name}</p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className={cn(\"text-xs uppercase\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\r\n                    {locale === 'es' ? 'Inicio' : 'Start'}\r\n                  </label>\r\n                  <p className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n                    {selectedTask.startDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US') || '-'}\r\n                  </p>\r\n                </div>\r\n                <div>\r\n                  <label className={cn(\"text-xs uppercase\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\r\n                    {locale === 'es' ? 'Fin' : 'End'}\r\n                  </label>\r\n                  <p className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n                    {selectedTask.endDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US') || '-'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className={cn(\"text-xs uppercase mb-2 block\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\r\n                  {locale === 'es' ? 'Progreso' : 'Progress'}\r\n                </label>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className={cn(\"flex-1 h-2 rounded-full overflow-hidden\", isDark ? \"bg-white/10\" : \"bg-gray-200\")}>\r\n                    <div\r\n                      className={cn(\r\n                        \"h-full rounded-full transition-all\",\r\n                        selectedTask.progress === 100 ? \"bg-green-500\" : \"bg-[#3B82F6]\"\r\n                      )}\r\n                      style={{ width: `${selectedTask.progress || 0}%` }}\r\n                    />\r\n                  </div>\r\n                  <span className={cn(\"text-sm font-medium w-10\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n                    {selectedTask.progress || 0}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => {\r\n                  handleTaskToggle(selectedTask);\r\n                  setSelectedTask(null);\r\n                }}\r\n                className={cn(\r\n                  \"w-full py-2 rounded-lg font-medium transition-colors\",\r\n                  selectedTask.progress === 100\r\n                    ? \"bg-gray-500/10 text-gray-500 hover:bg-gray-500/20\"\r\n                    : \"bg-green-500/10 text-green-500 hover:bg-green-500/20\"\r\n                )}\r\n              >\r\n                {selectedTask.progress === 100\r\n                  ? (locale === 'es' ? 'Marcar como pendiente' : 'Mark as pending')\r\n                  : (locale === 'es' ? 'Marcar como completada' : 'Mark as complete')}\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Overlay for task detail panel */}\r\n      <AnimatePresence>\r\n        {selectedTask && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={() => setSelectedTask(null)}\r\n            className=\"fixed inset-0 bg-black/20 z-40\"\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CalendarBoard;\r\n","/**\r\n * CalendarBoard Themes\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { CalendarTheme } from './types';\r\n\r\n/**\r\n * Dark theme for CalendarBoard\r\n */\r\nexport const darkTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#0d1117',\r\n  bgSecondary: '#161b22',\r\n  bgHover: '#21262d',\r\n  bgToday: '#1f6feb20',\r\n  bgWeekend: '#161b2280',\r\n  bgOtherMonth: '#0d111750',\r\n\r\n  // Borders\r\n  border: '#30363d',\r\n  borderLight: '#21262d',\r\n\r\n  // Text\r\n  textPrimary: '#c9d1d9',\r\n  textSecondary: '#8b949e',\r\n  textMuted: '#6e7681',\r\n  textToday: '#58a6ff',\r\n\r\n  // Accent colors\r\n  accent: '#58a6ff',\r\n  accentHover: '#79b8ff',\r\n  accentLight: '#58a6ff20',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#f0883e',\r\n  statusCompleted: '#3fb950',\r\n\r\n  // Interactive\r\n  focusRing: '#58a6ff',\r\n};\r\n\r\n/**\r\n * Light theme for CalendarBoard\r\n */\r\nexport const lightTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#ffffff',\r\n  bgSecondary: '#f6f8fa',\r\n  bgHover: '#f3f4f6',\r\n  bgToday: '#dbeafe',\r\n  bgWeekend: '#f9fafb',\r\n  bgOtherMonth: '#f3f4f680',\r\n\r\n  // Borders\r\n  border: '#d0d7de',\r\n  borderLight: '#e5e7eb',\r\n\r\n  // Text\r\n  textPrimary: '#24292f',\r\n  textSecondary: '#57606a',\r\n  textMuted: '#8b949e',\r\n  textToday: '#0969da',\r\n\r\n  // Accent colors\r\n  accent: '#0969da',\r\n  accentHover: '#0550ae',\r\n  accentLight: '#dbeafe',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#bf8700',\r\n  statusCompleted: '#1a7f37',\r\n\r\n  // Interactive\r\n  focusRing: '#0969da',\r\n};\r\n\r\n/**\r\n * Neutral theme for CalendarBoard\r\n */\r\nexport const neutralTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#1a1a2e',\r\n  bgSecondary: '#16213e',\r\n  bgHover: '#1f3460',\r\n  bgToday: '#6366f120',\r\n  bgWeekend: '#16213e80',\r\n  bgOtherMonth: '#1a1a2e50',\r\n\r\n  // Borders\r\n  border: '#2a3f5f',\r\n  borderLight: '#1f3460',\r\n\r\n  // Text\r\n  textPrimary: '#e4e6eb',\r\n  textSecondary: '#a8b2c1',\r\n  textMuted: '#6b7280',\r\n  textToday: '#818cf8',\r\n\r\n  // Accent colors\r\n  accent: '#6366f1',\r\n  accentHover: '#818cf8',\r\n  accentLight: '#6366f120',\r\n\r\n  // Status colors\r\n  statusTodo: '#9ca3af',\r\n  statusInProgress: '#fbbf24',\r\n  statusCompleted: '#34d399',\r\n\r\n  // Interactive\r\n  focusRing: '#6366f1',\r\n};\r\n\r\n/**\r\n * All available themes\r\n */\r\nexport const calendarThemes = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n} as const;\r\n\r\nexport type CalendarThemeName = keyof typeof calendarThemes;\r\n\r\n/**\r\n * Get theme by name\r\n */\r\nexport function getCalendarTheme(themeName: CalendarThemeName): CalendarTheme {\r\n  return calendarThemes[themeName] || calendarThemes.dark;\r\n}\r\n","/**\r\n * CardStack Component\r\n * Visual grouping of related cards with expand/collapse\r\n * @module components/CardStack\r\n */\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport type { Card } from '../../types'\r\nimport type { CardStack as CardStackType } from '../../types/card-stack'\r\nimport { cn } from '../../utils'\r\nimport './card-stack.css'\r\n\r\nexport interface CardStackProps {\r\n  /** Stack configuration */\r\n  stack: CardStackType\r\n  /** All cards in the board */\r\n  cards: Card[]\r\n  /** Card render function */\r\n  renderCard?: (card: Card) => React.ReactNode\r\n  /** Click handler for individual cards */\r\n  onCardClick?: (card: Card) => void\r\n  /** Expand/collapse handler */\r\n  onToggleExpand?: (stackId: string) => void\r\n  /** Unstack handler (remove card from stack) */\r\n  onUnstack?: (stackId: string, cardId: string) => void\r\n  /** Delete entire stack handler */\r\n  onDeleteStack?: (stackId: string) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * CardStack - Collapsible group of related cards\r\n */\r\nexport function CardStack({\r\n  stack,\r\n  cards,\r\n  renderCard,\r\n  onCardClick,\r\n  onToggleExpand,\r\n  onUnstack,\r\n  onDeleteStack,\r\n  className,\r\n}: CardStackProps) {\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  // Get cards in this stack\r\n  const stackCards = useMemo(() => {\r\n    return cards.filter((card) => stack.cardIds.includes(card.id))\r\n  }, [cards, stack.cardIds])\r\n\r\n  // Calculate stack statistics\r\n  const stats = useMemo(() => {\r\n    const totalCards = stackCards.length\r\n    const uniqueAssignees = new Set(\r\n      stackCards.flatMap((c) => c.assignedUserIds || [])\r\n    ).size\r\n    const priorities = stackCards.map((c) => c.priority).filter(Boolean)\r\n    const labels = new Set(stackCards.flatMap((c) => c.labels || [])).size\r\n\r\n    return {\r\n      totalCards,\r\n      uniqueAssignees,\r\n      priorities,\r\n      labels,\r\n    }\r\n  }, [stackCards])\r\n\r\n  const handleToggle = () => {\r\n    onToggleExpand?.(stack.id)\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn('card-stack', !stack.isExpanded && 'card-stack-collapsed', className)}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      style={{\r\n        '--stack-color': stack.color || 'var(--color-accent-primary)',\r\n      } as React.CSSProperties}\r\n    >\r\n      {/* Stack Header */}\r\n      <div className=\"card-stack-header\" onClick={handleToggle}>\r\n        <div className=\"card-stack-header-left\">\r\n          {/* Expand/Collapse Icon */}\r\n          <button className=\"card-stack-toggle\" aria-label={stack.isExpanded ? 'Collapse' : 'Expand'}>\r\n            <svg\r\n              width=\"16\"\r\n              height=\"16\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              className={cn('card-stack-chevron', stack.isExpanded && 'expanded')}\r\n            >\r\n              <polyline points=\"6 9 12 15 18 9\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Stack Title */}\r\n          <h3 className=\"card-stack-title\">{stack.title}</h3>\r\n\r\n          {/* Stack Badge */}\r\n          <div className=\"card-stack-badge\">{stats.totalCards}</div>\r\n\r\n          {/* Strategy Badge */}\r\n          <div className=\"card-stack-strategy\">\r\n            {stack.strategy === 'ai-similarity' && ' AI'}\r\n            {stack.strategy === 'manual' && ' Manual'}\r\n            {stack.strategy === 'labels' && ' Labels'}\r\n            {stack.strategy === 'assignee' && ' Assignee'}\r\n            {stack.strategy === 'priority' && ' Priority'}\r\n            {stack.strategy === 'epic' && ' Epic'}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stack Actions */}\r\n        {isHovered && (\r\n          <div className=\"card-stack-actions\">\r\n            <button\r\n              className=\"card-stack-action\"\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                onDeleteStack?.(stack.id)\r\n              }}\r\n              aria-label=\"Delete stack\"\r\n            >\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <polyline points=\"3 6 5 6 21 6\" />\r\n                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Stack Summary (when collapsed) */}\r\n      {!stack.isExpanded && (\r\n        <div className=\"card-stack-summary\">\r\n          <div className=\"card-stack-summary-item\">\r\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" />\r\n              <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n            </svg>\r\n            <span>{stats.uniqueAssignees} assignees</span>\r\n          </div>\r\n          {stats.labels > 0 && (\r\n            <div className=\"card-stack-summary-item\">\r\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\" />\r\n                <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" />\r\n              </svg>\r\n              <span>{stats.labels} labels</span>\r\n            </div>\r\n          )}\r\n          {stack.confidence && (\r\n            <div className=\"card-stack-summary-item\">\r\n              <span className=\"card-stack-confidence\">{Math.round(stack.confidence * 100)}% match</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stack Content (when expanded) */}\r\n      {stack.isExpanded && (\r\n        <div className=\"card-stack-content\">\r\n          {stackCards.length === 0 ? (\r\n            <div className=\"card-stack-empty\">\r\n              <p>No cards in this stack</p>\r\n              <span>Drag cards here or delete this stack</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"card-stack-cards\">\r\n              {stackCards.map((card) => (\r\n                <div key={card.id} className=\"card-stack-card-wrapper\">\r\n                  {renderCard ? (\r\n                    <div onClick={() => onCardClick?.(card)}>{renderCard(card)}</div>\r\n                  ) : (\r\n                    <div className=\"card-stack-default-card\" onClick={() => onCardClick?.(card)}>\r\n                      <h4>{card.title}</h4>\r\n                      {card.description && <p>{card.description.substring(0, 100)}...</p>}\r\n                    </div>\r\n                  )}\r\n                  {/* Unstack button */}\r\n                  <button\r\n                    className=\"card-stack-unstack-btn\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      onUnstack?.(stack.id, card.id)\r\n                    }}\r\n                    aria-label=\"Remove from stack\"\r\n                  >\r\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Card History & Time Travel Types\r\n * Tracks all changes to cards with full reproducibility\r\n * @module types/card-history\r\n */\r\n\r\nimport type { Card } from './index'\r\n\r\n/**\r\n * Types of events that can occur in a card's history\r\n */\r\nexport type CardHistoryEventType =\r\n  | 'created'\r\n  | 'status_changed'\r\n  | 'assignee_changed'\r\n  | 'priority_changed'\r\n  | 'moved'\r\n  | 'title_updated'\r\n  | 'description_updated'\r\n  | 'dates_changed'\r\n  | 'labels_changed'\r\n  | 'dependency_added'\r\n  | 'dependency_removed'\r\n  | 'comment_added'\r\n  | 'archived'\r\n  | 'restored'\r\n\r\n/**\r\n * Represents a single change in a card's history\r\n */\r\nexport interface CardHistoryEvent {\r\n  /** Unique event ID */\r\n  id: string\r\n  /** Card this event belongs to */\r\n  cardId: string\r\n  /** When the event occurred */\r\n  timestamp: Date\r\n  /** Type of change */\r\n  type: CardHistoryEventType\r\n  /** User who made the change */\r\n  userId: string\r\n  /** User display name (for UI) */\r\n  userName?: string\r\n  /** User avatar URL (for UI) */\r\n  userAvatar?: string\r\n  /** Detailed changes (before/after) */\r\n  changes: Record<string, { from: any; to: any }>\r\n  /** Additional context */\r\n  metadata?: {\r\n    /** Column names for moves */\r\n    fromColumn?: string\r\n    toColumn?: string\r\n    /** Comment text for comment events */\r\n    commentText?: string\r\n    /** Reason for change */\r\n    reason?: string\r\n    /** Related card IDs */\r\n    relatedCards?: string[]\r\n  }\r\n}\r\n\r\n/**\r\n * Filter configuration for history events\r\n */\r\nexport interface HistoryFilter {\r\n  /** Filter by event types */\r\n  types?: CardHistoryEventType[]\r\n  /** Filter by users */\r\n  users?: string[]\r\n  /** Filter by date range */\r\n  dateRange?: {\r\n    start: Date\r\n    end: Date\r\n  }\r\n  /** Search in change descriptions */\r\n  searchTerm?: string\r\n}\r\n\r\n/**\r\n * State for the replay/time-travel feature\r\n */\r\nexport interface ReplayState {\r\n  /** Current position in history (0 = oldest, length-1 = newest) */\r\n  currentIndex: number\r\n  /** Is replay actively playing */\r\n  isPlaying: boolean\r\n  /** Playback speed (1 = normal, 2 = 2x, etc.) */\r\n  speed: number\r\n  /** Card state at current index */\r\n  cardState: Card\r\n  /** Total number of events */\r\n  totalEvents: number\r\n  /** Can go back */\r\n  canGoBack: boolean\r\n  /** Can go forward */\r\n  canGoForward: boolean\r\n}\r\n\r\n/**\r\n * Configuration for history tracking\r\n */\r\nexport interface HistoryConfig {\r\n  /** Enable automatic history tracking */\r\n  enabled: boolean\r\n  /** Maximum events to store per card */\r\n  maxEventsPerCard: number\r\n  /** Auto-save interval in milliseconds */\r\n  autoSaveInterval: number\r\n  /** Store history in localStorage */\r\n  persistToStorage: boolean\r\n  /** Storage key prefix */\r\n  storagePrefix: string\r\n}\r\n\r\n/**\r\n * Timeline visualization configuration\r\n */\r\nexport interface TimelineConfig {\r\n  /** Show event icons */\r\n  showIcons: boolean\r\n  /** Show user avatars */\r\n  showAvatars: boolean\r\n  /** Group events by day */\r\n  groupByDay: boolean\r\n  /** Show relative times (e.g. \"2 hours ago\") */\r\n  useRelativeTime: boolean\r\n  /** Compact mode (less spacing) */\r\n  compact: boolean\r\n}\r\n\r\n/**\r\n * Snapshot of a card at a specific point in time\r\n */\r\nexport interface CardSnapshot {\r\n  /** When this snapshot was taken */\r\n  timestamp: Date\r\n  /** Complete card state */\r\n  cardState: Card\r\n  /** Event that triggered this snapshot */\r\n  eventId: string\r\n  /** Index in history */\r\n  index: number\r\n}\r\n\r\n/**\r\n * Statistics about a card's history\r\n */\r\nexport interface HistoryStats {\r\n  /** Total events */\r\n  totalEvents: number\r\n  /** Events by type */\r\n  eventsByType: Record<CardHistoryEventType, number>\r\n  /** Events by user */\r\n  eventsByUser: Record<string, number>\r\n  /** First event timestamp */\r\n  firstEvent?: Date\r\n  /** Last event timestamp */\r\n  lastEvent?: Date\r\n  /** Most active day */\r\n  mostActiveDay?: Date\r\n  /** Average events per day */\r\n  avgEventsPerDay: number\r\n  /** Time in each column (in milliseconds) */\r\n  timeInColumns: Record<string, number>\r\n}\r\n\r\n/**\r\n * Default history configuration\r\n */\r\nexport const DEFAULT_HISTORY_CONFIG: HistoryConfig = {\r\n  enabled: true,\r\n  maxEventsPerCard: 1000,\r\n  autoSaveInterval: 5000,\r\n  persistToStorage: true,\r\n  storagePrefix: 'asakaa-history',\r\n}\r\n\r\n/**\r\n * Default timeline configuration\r\n */\r\nexport const DEFAULT_TIMELINE_CONFIG: TimelineConfig = {\r\n  showIcons: true,\r\n  showAvatars: true,\r\n  groupByDay: true,\r\n  useRelativeTime: true,\r\n  compact: false,\r\n}\r\n\r\n/**\r\n * Helper to create a history event\r\n */\r\nexport function createHistoryEvent(\r\n  cardId: string,\r\n  type: CardHistoryEventType,\r\n  userId: string,\r\n  changes: Record<string, { from: any; to: any }>,\r\n  metadata?: CardHistoryEvent['metadata']\r\n): CardHistoryEvent {\r\n  return {\r\n    id: `${cardId}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    cardId,\r\n    timestamp: new Date(),\r\n    type,\r\n    userId,\r\n    changes,\r\n    metadata,\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to format event description for UI\r\n */\r\nexport function formatEventDescription(event: CardHistoryEvent): string {\r\n  switch (event.type) {\r\n    case 'created':\r\n      return `Created card`\r\n    case 'status_changed':\r\n      return `Changed status from \"${event.changes.status?.from}\" to \"${event.changes.status?.to}\"`\r\n    case 'assignee_changed':\r\n      return `Changed assignee`\r\n    case 'priority_changed':\r\n      return `Changed priority from ${event.changes.priority?.from} to ${event.changes.priority?.to}`\r\n    case 'moved':\r\n      return `Moved from ${event.metadata?.fromColumn || 'unknown'} to ${event.metadata?.toColumn || 'unknown'}`\r\n    case 'title_updated':\r\n      return `Updated title`\r\n    case 'description_updated':\r\n      return `Updated description`\r\n    case 'dates_changed':\r\n      return `Changed dates`\r\n    case 'labels_changed':\r\n      return `Updated labels`\r\n    case 'dependency_added':\r\n      return `Added dependency`\r\n    case 'dependency_removed':\r\n      return `Removed dependency`\r\n    case 'comment_added':\r\n      return `Added comment`\r\n    case 'archived':\r\n      return `Archived card`\r\n    case 'restored':\r\n      return `Restored card`\r\n    default:\r\n      return `Updated card`\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to get icon for event type\r\n */\r\nexport function getEventIcon(type: CardHistoryEventType): string {\r\n  const icons: Record<CardHistoryEventType, string> = {\r\n    created: '',\r\n    status_changed: '',\r\n    assignee_changed: '',\r\n    priority_changed: '',\r\n    moved: '',\r\n    title_updated: '',\r\n    description_updated: '',\r\n    dates_changed: '',\r\n    labels_changed: '',\r\n    dependency_added: '',\r\n    dependency_removed: '',\r\n    comment_added: '',\r\n    archived: '',\r\n    restored: '',\r\n  }\r\n  return icons[type] || ''\r\n}\r\n\r\n/**\r\n * Helper to get color for event type\r\n */\r\nexport function getEventColor(type: CardHistoryEventType): string {\r\n  const colors: Record<CardHistoryEventType, string> = {\r\n    created: '#10b981',\r\n    status_changed: '#3b82f6',\r\n    assignee_changed: '#8b5cf6',\r\n    priority_changed: '#f59e0b',\r\n    moved: '#06b6d4',\r\n    title_updated: '#6366f1',\r\n    description_updated: '#6366f1',\r\n    dates_changed: '#ec4899',\r\n    labels_changed: '#14b8a6',\r\n    dependency_added: '#a855f7',\r\n    dependency_removed: '#ef4444',\r\n    comment_added: '#84cc16',\r\n    archived: '#6b7280',\r\n    restored: '#10b981',\r\n  }\r\n  return colors[type] || '#6b7280'\r\n}\r\n","/**\r\n * CardHistoryTimeline Component\r\n * Interactive timeline visualization of card history\r\n * @module components/CardHistory\r\n */\r\n\r\nimport { useState, useMemo, useRef, useEffect } from 'react'\r\nimport type {\r\n  CardHistoryEvent,\r\n  HistoryFilter,\r\n  TimelineConfig,\r\n  CardHistoryEventType,\r\n} from '../../types/card-history'\r\nimport {\r\n  DEFAULT_TIMELINE_CONFIG,\r\n  formatEventDescription,\r\n  getEventIcon,\r\n  getEventColor,\r\n} from '../../types/card-history'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardHistoryTimelineProps {\r\n  /** History events to display */\r\n  events: CardHistoryEvent[]\r\n  /** Current filter */\r\n  filter: HistoryFilter\r\n  /** Update filter */\r\n  onFilterChange: (filter: HistoryFilter) => void\r\n  /** Clear filter */\r\n  onClearFilter: () => void\r\n  /** Click on event */\r\n  onEventClick?: (event: CardHistoryEvent) => void\r\n  /** Selected event ID */\r\n  selectedEventId?: string\r\n  /** Timeline configuration */\r\n  config?: Partial<TimelineConfig>\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Timeline component showing card history\r\n */\r\nexport function CardHistoryTimeline({\r\n  events,\r\n  filter,\r\n  onFilterChange,\r\n  onClearFilter,\r\n  onEventClick,\r\n  selectedEventId,\r\n  config: customConfig,\r\n  className,\r\n}: CardHistoryTimelineProps) {\r\n  const config = useMemo(\r\n    () => ({ ...DEFAULT_TIMELINE_CONFIG, ...customConfig }),\r\n    [customConfig]\r\n  )\r\n\r\n  const [expandedEvents, setExpandedEvents] = useState<Set<string>>(new Set())\r\n  const timelineRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Group events by day if configured\r\n  const groupedEvents = useMemo(() => {\r\n    if (!config.groupByDay) {\r\n      return [{ date: null, events }]\r\n    }\r\n\r\n    const groups = new Map<string, CardHistoryEvent[]>()\r\n    events.forEach((event) => {\r\n      const dateKey = event.timestamp.toISOString().split('T')[0]!\r\n      const group = groups.get(dateKey)\r\n      if (!group) {\r\n        groups.set(dateKey, [event])\r\n      } else {\r\n        group.push(event)\r\n      }\r\n    })\r\n\r\n    return Array.from(groups.entries())\r\n      .sort((a, b) => b[0].localeCompare(a[0]))\r\n      .map(([dateStr, events]) => ({\r\n        date: new Date(dateStr),\r\n        events: events.sort(\r\n          (a, b) => b.timestamp.getTime() - a.timestamp.getTime()\r\n        ),\r\n      }))\r\n  }, [events, config.groupByDay])\r\n\r\n  // Get unique users and event types for filter\r\n  const { uniqueUsers, uniqueTypes } = useMemo(() => {\r\n    const users = new Set<string>()\r\n    const types = new Set<CardHistoryEventType>()\r\n    events.forEach((event) => {\r\n      users.add(event.userId)\r\n      types.add(event.type)\r\n    })\r\n    return {\r\n      uniqueUsers: Array.from(users),\r\n      uniqueTypes: Array.from(types),\r\n    }\r\n  }, [events])\r\n\r\n  // Toggle event expansion\r\n  const toggleEvent = (eventId: string) => {\r\n    setExpandedEvents((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(eventId)) {\r\n        next.delete(eventId)\r\n      } else {\r\n        next.add(eventId)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  // Format relative time\r\n  const formatRelativeTime = (date: Date): string => {\r\n    const now = new Date()\r\n    const diffMs = now.getTime() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    const diffHours = Math.floor(diffMs / 3600000)\r\n    const diffDays = Math.floor(diffMs / 86400000)\r\n\r\n    if (diffMins < 1) return 'just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    if (diffDays < 7) return `${diffDays}d ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  // Active filter count\r\n  const activeFilterCount = useMemo(() => {\r\n    let count = 0\r\n    if (filter.types && filter.types.length > 0) count++\r\n    if (filter.users && filter.users.length > 0) count++\r\n    if (filter.dateRange) count++\r\n    if (filter.searchTerm) count++\r\n    return count\r\n  }, [filter])\r\n\r\n  // Scroll to selected event\r\n  useEffect(() => {\r\n    if (selectedEventId && timelineRef.current) {\r\n      const element = timelineRef.current.querySelector(\r\n        `[data-event-id=\"${selectedEventId}\"]`\r\n      )\r\n      if (element) {\r\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n      }\r\n    }\r\n  }, [selectedEventId])\r\n\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className={cn('history-timeline-empty', className)}>\r\n        <div className=\"history-timeline-empty-icon\"></div>\r\n        <p className=\"history-timeline-empty-text\">No history events yet</p>\r\n        <p className=\"history-timeline-empty-subtext\">\r\n          Changes to this card will appear here\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('history-timeline', config.compact && 'compact', className)}>\r\n      {/* Filter Bar */}\r\n      <div className=\"history-timeline-filters\">\r\n        <div className=\"history-timeline-filter-group\">\r\n          {/* Event Type Filter */}\r\n          <select\r\n            className=\"history-timeline-filter-select\"\r\n            value={filter.types?.[0] || ''}\r\n            onChange={(e) => {\r\n              const value = e.target.value\r\n              onFilterChange({\r\n                ...filter,\r\n                types: value ? [value as CardHistoryEventType] : undefined,\r\n              })\r\n            }}\r\n          >\r\n            <option value=\"\">All Events</option>\r\n            {uniqueTypes.map((type) => (\r\n              <option key={type} value={type}>\r\n                {getEventIcon(type)} {type.replace('_', ' ')}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* User Filter */}\r\n          {uniqueUsers.length > 1 && (\r\n            <select\r\n              className=\"history-timeline-filter-select\"\r\n              value={filter.users?.[0] || ''}\r\n              onChange={(e) => {\r\n                const value = e.target.value\r\n                onFilterChange({\r\n                  ...filter,\r\n                  users: value ? [value] : undefined,\r\n                })\r\n              }}\r\n            >\r\n              <option value=\"\">All Users</option>\r\n              {uniqueUsers.map((userId) => (\r\n                <option key={userId} value={userId}>\r\n                  {userId}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n\r\n          {/* Search */}\r\n          <input\r\n            type=\"text\"\r\n            className=\"history-timeline-filter-search\"\r\n            placeholder=\"Search history...\"\r\n            value={filter.searchTerm || ''}\r\n            onChange={(e) =>\r\n              onFilterChange({ ...filter, searchTerm: e.target.value })\r\n            }\r\n          />\r\n        </div>\r\n\r\n        {/* Clear Filter */}\r\n        {activeFilterCount > 0 && (\r\n          <button\r\n            className=\"history-timeline-filter-clear\"\r\n            onClick={onClearFilter}\r\n          >\r\n            Clear filters ({activeFilterCount})\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Timeline */}\r\n      <div className=\"history-timeline-container\" ref={timelineRef}>\r\n        {groupedEvents.map((group) => (\r\n          <div key={group.date?.toISOString() || 'all'} className=\"history-timeline-group\">\r\n            {/* Day Header */}\r\n            {config.groupByDay && group.date && (\r\n              <div className=\"history-timeline-day-header\">\r\n                <span className=\"history-timeline-day-date\">\r\n                  {group.date.toLocaleDateString('en-US', {\r\n                    month: 'short',\r\n                    day: 'numeric',\r\n                    year: 'numeric',\r\n                  })}\r\n                </span>\r\n                <span className=\"history-timeline-day-count\">\r\n                  {group.events.length} events\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Events */}\r\n            <div className=\"history-timeline-events\">\r\n              {group.events.map((event, eventIndex) => {\r\n                const isExpanded = expandedEvents.has(event.id)\r\n                const isSelected = selectedEventId === event.id\r\n                const eventColor = getEventColor(event.type)\r\n\r\n                return (\r\n                  <div\r\n                    key={event.id}\r\n                    data-event-id={event.id}\r\n                    className={cn(\r\n                      'history-timeline-event',\r\n                      isExpanded && 'expanded',\r\n                      isSelected && 'selected'\r\n                    )}\r\n                    onClick={() => onEventClick?.(event)}\r\n                  >\r\n                    {/* Timeline Line */}\r\n                    <div className=\"history-timeline-line\">\r\n                      {/* Event Dot */}\r\n                      <div\r\n                        className=\"history-timeline-dot\"\r\n                        style={{ backgroundColor: eventColor }}\r\n                      >\r\n                        {config.showIcons && (\r\n                          <span className=\"history-timeline-dot-icon\">\r\n                            {getEventIcon(event.type)}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Connecting Line */}\r\n                      {eventIndex < group.events.length - 1 && (\r\n                        <div\r\n                          className=\"history-timeline-connector\"\r\n                          style={{ borderColor: eventColor }}\r\n                        />\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Event Content */}\r\n                    <div className=\"history-timeline-event-content\">\r\n                      {/* Header */}\r\n                      <div className=\"history-timeline-event-header\">\r\n                        <div className=\"history-timeline-event-header-left\">\r\n                          {/* User Avatar */}\r\n                          {config.showAvatars && event.userAvatar && (\r\n                            <img\r\n                              src={event.userAvatar}\r\n                              alt={event.userName || event.userId}\r\n                              className=\"history-timeline-event-avatar\"\r\n                            />\r\n                          )}\r\n\r\n                          {/* Description */}\r\n                          <div className=\"history-timeline-event-description\">\r\n                            <span className=\"history-timeline-event-user\">\r\n                              {event.userName || event.userId}\r\n                            </span>\r\n                            <span className=\"history-timeline-event-action\">\r\n                              {formatEventDescription(event)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Time */}\r\n                        <div className=\"history-timeline-event-time\">\r\n                          {config.useRelativeTime\r\n                            ? formatRelativeTime(event.timestamp)\r\n                            : event.timestamp.toLocaleString()}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Changes Preview */}\r\n                      {Object.keys(event.changes).length > 0 && (\r\n                        <button\r\n                          className=\"history-timeline-event-toggle\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            toggleEvent(event.id)\r\n                          }}\r\n                        >\r\n                          {isExpanded ? '' : ''} Show changes\r\n                        </button>\r\n                      )}\r\n\r\n                      {/* Expanded Changes */}\r\n                      {isExpanded && (\r\n                        <div className=\"history-timeline-event-changes\">\r\n                          {Object.entries(event.changes).map(([key, change]) => (\r\n                            <div key={key} className=\"history-timeline-event-change\">\r\n                              <span className=\"history-timeline-event-change-key\">\r\n                                {key}:\r\n                              </span>\r\n                              <div className=\"history-timeline-event-change-values\">\r\n                                <span className=\"history-timeline-event-change-from\">\r\n                                  {JSON.stringify(change.from)}\r\n                                </span>\r\n                                <span className=\"history-timeline-event-change-arrow\">\r\n                                  \r\n                                </span>\r\n                                <span className=\"history-timeline-event-change-to\">\r\n                                  {JSON.stringify(change.to)}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n\r\n                          {/* Metadata */}\r\n                          {event.metadata && Object.keys(event.metadata).length > 0 && (\r\n                            <div className=\"history-timeline-event-metadata\">\r\n                              <div className=\"history-timeline-event-metadata-title\">\r\n                                Additional Info:\r\n                              </div>\r\n                              {Object.entries(event.metadata).map(([key, value]) => (\r\n                                <div key={key} className=\"history-timeline-event-metadata-item\">\r\n                                  <span className=\"history-timeline-event-metadata-key\">\r\n                                    {key}:\r\n                                  </span>\r\n                                  <span className=\"history-timeline-event-metadata-value\">\r\n                                    {JSON.stringify(value)}\r\n                                  </span>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardHistoryReplay Component\r\n * Video-player-style controls for replaying card history\r\n * @module components/CardHistory\r\n */\r\n\r\nimport { useMemo } from 'react'\r\nimport type { ReplayState, CardHistoryEvent } from '../../types/card-history'\r\nimport { getEventIcon, formatEventDescription } from '../../types/card-history'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardHistoryReplayProps {\r\n  /** Current replay state */\r\n  replayState: ReplayState | null\r\n  /** All history events */\r\n  events: CardHistoryEvent[]\r\n  /** Start replay */\r\n  onStartReplay: () => void\r\n  /** Stop replay */\r\n  onStopReplay: () => void\r\n  /** Toggle play/pause */\r\n  onTogglePlayback: () => void\r\n  /** Go to previous event */\r\n  onPrevious: () => void\r\n  /** Go to next event */\r\n  onNext: () => void\r\n  /** Go to specific event */\r\n  onGoToEvent: (index: number) => void\r\n  /** Change playback speed */\r\n  onSpeedChange: (speed: number) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Replay controls for time-travel functionality\r\n */\r\nexport function CardHistoryReplay({\r\n  replayState,\r\n  events,\r\n  onStartReplay,\r\n  onStopReplay,\r\n  onTogglePlayback,\r\n  onPrevious,\r\n  onNext,\r\n  onGoToEvent,\r\n  onSpeedChange,\r\n  className,\r\n}: CardHistoryReplayProps) {\r\n  // Available playback speeds\r\n  const speeds = [0.5, 1, 1.5, 2, 3]\r\n\r\n  // Current event\r\n  const currentEvent = useMemo(() => {\r\n    if (!replayState || events.length === 0) return null\r\n    return events[replayState.currentIndex]\r\n  }, [replayState, events])\r\n\r\n  // Progress percentage\r\n  const progress = useMemo(() => {\r\n    if (!replayState || replayState.totalEvents === 0) return 0\r\n    return (replayState.currentIndex / (replayState.totalEvents - 1)) * 100\r\n  }, [replayState])\r\n\r\n  // If no events, show empty state\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className={cn('history-replay-empty', className)}>\r\n        <div className=\"history-replay-empty-icon\"></div>\r\n        <p className=\"history-replay-empty-text\">No history to replay</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // If not in replay mode, show start button\r\n  if (!replayState) {\r\n    return (\r\n      <div className={cn('history-replay-start', className)}>\r\n        <button className=\"history-replay-start-button\" onClick={onStartReplay}>\r\n          <svg\r\n            className=\"history-replay-start-icon\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n          >\r\n            <polygon points=\"5 3 19 12 5 21 5 3\" />\r\n          </svg>\r\n          <span>Start Time Travel</span>\r\n        </button>\r\n        <p className=\"history-replay-start-hint\">\r\n          Replay {events.length} events from this card's history\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('history-replay', className)}>\r\n      {/* Current Event Display */}\r\n      <div className=\"history-replay-current-event\">\r\n        <div className=\"history-replay-event-icon\">\r\n          {currentEvent && getEventIcon(currentEvent.type)}\r\n        </div>\r\n        <div className=\"history-replay-event-info\">\r\n          <div className=\"history-replay-event-description\">\r\n            {currentEvent && formatEventDescription(currentEvent)}\r\n          </div>\r\n          <div className=\"history-replay-event-meta\">\r\n            <span className=\"history-replay-event-index\">\r\n              Event {replayState.currentIndex + 1} of {replayState.totalEvents}\r\n            </span>\r\n            <span className=\"history-replay-event-time\">\r\n              {currentEvent && currentEvent.timestamp.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"history-replay-progress-container\">\r\n        <input\r\n          type=\"range\"\r\n          className=\"history-replay-progress-slider\"\r\n          min=\"0\"\r\n          max={replayState.totalEvents - 1}\r\n          value={replayState.currentIndex}\r\n          onChange={(e) => onGoToEvent(parseInt(e.target.value))}\r\n        />\r\n        <div\r\n          className=\"history-replay-progress-fill\"\r\n          style={{ width: `${progress}%` }}\r\n        />\r\n        {/* Event markers on timeline */}\r\n        <div className=\"history-replay-progress-markers\">\r\n          {events.map((event, index) => (\r\n            <div\r\n              key={event.id}\r\n              className={cn(\r\n                'history-replay-progress-marker',\r\n                index === replayState.currentIndex && 'active'\r\n              )}\r\n              style={{\r\n                left: `${(index / (replayState.totalEvents - 1)) * 100}%`,\r\n              }}\r\n              onClick={() => onGoToEvent(index)}\r\n              title={formatEventDescription(event)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Playback Controls */}\r\n      <div className=\"history-replay-controls\">\r\n        {/* Previous Button */}\r\n        <button\r\n          className=\"history-replay-control-btn\"\r\n          onClick={onPrevious}\r\n          disabled={!replayState.canGoBack}\r\n          title=\"Previous event ()\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <polygon points=\"19 20 9 12 19 4 19 20\" />\r\n            <line x1=\"5\" y1=\"19\" x2=\"5\" y2=\"5\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Play/Pause Button */}\r\n        <button\r\n          className=\"history-replay-control-btn history-replay-control-play\"\r\n          onClick={onTogglePlayback}\r\n          title={replayState.isPlaying ? 'Pause (Space)' : 'Play (Space)'}\r\n        >\r\n          {replayState.isPlaying ? (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" />\r\n              <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" />\r\n            </svg>\r\n          ) : (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <polygon points=\"5 3 19 12 5 21 5 3\" />\r\n            </svg>\r\n          )}\r\n        </button>\r\n\r\n        {/* Next Button */}\r\n        <button\r\n          className=\"history-replay-control-btn\"\r\n          onClick={onNext}\r\n          disabled={!replayState.canGoForward}\r\n          title=\"Next event ()\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <polygon points=\"5 4 15 12 5 20 5 4\" />\r\n            <line x1=\"19\" y1=\"5\" x2=\"19\" y2=\"19\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Speed Control */}\r\n        <div className=\"history-replay-speed\">\r\n          <label className=\"history-replay-speed-label\">Speed:</label>\r\n          <div className=\"history-replay-speed-buttons\">\r\n            {speeds.map((speed) => (\r\n              <button\r\n                key={speed}\r\n                className={cn(\r\n                  'history-replay-speed-btn',\r\n                  replayState.speed === speed && 'active'\r\n                )}\r\n                onClick={() => onSpeedChange(speed)}\r\n              >\r\n                {speed}x\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stop Button */}\r\n        <button\r\n          className=\"history-replay-control-btn history-replay-stop\"\r\n          onClick={onStopReplay}\r\n          title=\"Stop replay (Esc)\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <rect x=\"6\" y=\"6\" width=\"12\" height=\"12\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Keyboard Shortcuts Hint */}\r\n      <div className=\"history-replay-shortcuts\">\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd>Space</kbd> Play/Pause\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd></kbd> Previous\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd></kbd> Next\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd>Esc</kbd> Stop\r\n        </span>\r\n      </div>\r\n\r\n      {/* Card State Preview */}\r\n      <div className=\"history-replay-card-preview\">\r\n        <div className=\"history-replay-card-preview-header\">\r\n          <span className=\"history-replay-card-preview-title\">\r\n            Card State at This Point\r\n          </span>\r\n          <span className=\"history-replay-card-preview-time\">\r\n            {currentEvent && currentEvent.timestamp.toLocaleDateString()}\r\n          </span>\r\n        </div>\r\n        <div className=\"history-replay-card-preview-content\">\r\n          <div className=\"history-replay-card-preview-field\">\r\n            <span className=\"history-replay-card-preview-label\">Title:</span>\r\n            <span className=\"history-replay-card-preview-value\">\r\n              {replayState.cardState.title}\r\n            </span>\r\n          </div>\r\n          {replayState.cardState.description && (\r\n            <div className=\"history-replay-card-preview-field\">\r\n              <span className=\"history-replay-card-preview-label\">Description:</span>\r\n              <span className=\"history-replay-card-preview-value\">\r\n                {replayState.cardState.description}\r\n              </span>\r\n            </div>\r\n          )}\r\n          <div className=\"history-replay-card-preview-field\">\r\n            <span className=\"history-replay-card-preview-label\">Priority:</span>\r\n            <span className=\"history-replay-card-preview-value\">\r\n              {replayState.cardState.priority || 'None'}\r\n            </span>\r\n          </div>\r\n          {replayState.cardState.labels && replayState.cardState.labels.length > 0 && (\r\n            <div className=\"history-replay-card-preview-field\">\r\n              <span className=\"history-replay-card-preview-label\">Labels:</span>\r\n              <div className=\"history-replay-card-preview-labels\">\r\n                {replayState.cardState.labels.map((label) => (\r\n                  <span key={label} className=\"history-replay-card-preview-label-tag\">\r\n                    {label}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Card Relationships & Graph Types\r\n * Force-directed graph visualization for card dependencies and relationships\r\n * @module types/card-relationships\r\n */\r\n\r\nimport type { Card } from './index'\r\n\r\n/**\r\n * Types of relationships between cards\r\n */\r\nexport type RelationshipType =\r\n  | 'blocks'        // This card blocks another card\r\n  | 'blocked_by'    // This card is blocked by another card\r\n  | 'depends_on'    // This card depends on another card\r\n  | 'required_by'   // This card is required by another card\r\n  | 'relates_to'    // General relationship\r\n  | 'duplicates'    // This card duplicates another card\r\n  | 'parent_of'     // Parent-child relationship\r\n  | 'child_of'      // Child-parent relationship\r\n  | 'similar_to'    // AI-detected similarity\r\n\r\n/**\r\n * Represents a relationship between two cards\r\n */\r\nexport interface CardRelationship {\r\n  /** Unique relationship ID */\r\n  id: string\r\n  /** Source card ID */\r\n  sourceId: string\r\n  /** Target card ID */\r\n  targetId: string\r\n  /** Type of relationship */\r\n  type: RelationshipType\r\n  /** Relationship strength (0-1, for AI-detected relationships) */\r\n  strength?: number\r\n  /** When relationship was created */\r\n  createdAt: Date\r\n  /** User who created the relationship */\r\n  createdBy?: string\r\n  /** Additional metadata */\r\n  metadata?: {\r\n    /** Reason for relationship */\r\n    reason?: string\r\n    /** Is this relationship auto-detected */\r\n    autoDetected?: boolean\r\n    /** Confidence score for auto-detected relationships */\r\n    confidence?: number\r\n  }\r\n}\r\n\r\n/**\r\n * Node in the relationship graph\r\n */\r\nexport interface GraphNode {\r\n  /** Card ID */\r\n  id: string\r\n  /** Card reference */\r\n  card: Card\r\n  /** X position (calculated by force simulation) */\r\n  x?: number\r\n  /** Y position (calculated by force simulation) */\r\n  y?: number\r\n  /** X velocity (for force simulation) */\r\n  vx?: number\r\n  /** Y velocity (for force simulation) */\r\n  vy?: number\r\n  /** Fixed position (prevent movement) */\r\n  fx?: number | null\r\n  /** Fixed position (prevent movement) */\r\n  fy?: number | null\r\n  /** Node degree (number of connections) */\r\n  degree?: number\r\n  /** Is this node on the critical path */\r\n  onCriticalPath?: boolean\r\n  /** Cluster ID (for grouping) */\r\n  clusterId?: string\r\n}\r\n\r\n/**\r\n * Edge in the relationship graph\r\n */\r\nexport interface GraphEdge {\r\n  /** Relationship ID */\r\n  id: string\r\n  /** Source node ID */\r\n  source: string | GraphNode\r\n  /** Target node ID */\r\n  target: string | GraphNode\r\n  /** Relationship type */\r\n  type: RelationshipType\r\n  /** Edge strength (for styling) */\r\n  strength?: number\r\n  /** Is this edge on the critical path */\r\n  onCriticalPath?: boolean\r\n}\r\n\r\n/**\r\n * Graph layout algorithms\r\n */\r\nexport type GraphLayout =\r\n  | 'force'        // Force-directed layout (D3 force simulation)\r\n  | 'hierarchical' // Top-down hierarchical layout\r\n  | 'circular'     // Circular layout\r\n  | 'radial'       // Radial layout from center node\r\n  | 'grid'         // Grid layout\r\n\r\n/**\r\n * Graph visualization configuration\r\n */\r\nexport interface GraphConfig {\r\n  /** Layout algorithm */\r\n  layout: GraphLayout\r\n  /** Width of the graph container */\r\n  width: number\r\n  /** Height of the graph container */\r\n  height: number\r\n  /** Enable node dragging */\r\n  enableDragging: boolean\r\n  /** Enable zoom and pan */\r\n  enableZoom: boolean\r\n  /** Show node labels */\r\n  showLabels: boolean\r\n  /** Show edge labels */\r\n  showEdgeLabels: boolean\r\n  /** Highlight critical path */\r\n  highlightCriticalPath: boolean\r\n  /** Node size */\r\n  nodeSize: number\r\n  /** Edge width */\r\n  edgeWidth: number\r\n  /** Animation duration */\r\n  animationDuration: number\r\n  /** Force simulation strength */\r\n  forceStrength: number\r\n  /** Link distance */\r\n  linkDistance: number\r\n  /** Charge strength (repulsion) */\r\n  chargeStrength: number\r\n  /** Center force strength */\r\n  centerForce: number\r\n  /** Color scheme */\r\n  colorScheme: 'status' | 'priority' | 'assignee' | 'cluster'\r\n}\r\n\r\n/**\r\n * Graph filters\r\n */\r\nexport interface GraphFilter {\r\n  /** Filter by relationship types */\r\n  types?: RelationshipType[]\r\n  /** Filter by card IDs */\r\n  cardIds?: string[]\r\n  /** Filter by columns */\r\n  columnIds?: string[]\r\n  /** Minimum relationship strength */\r\n  minStrength?: number\r\n  /** Show only critical path */\r\n  criticalPathOnly?: boolean\r\n  /** Maximum depth from selected node */\r\n  maxDepth?: number\r\n}\r\n\r\n/**\r\n * Critical path analysis result\r\n */\r\nexport interface CriticalPath {\r\n  /** Cards on the critical path */\r\n  cardIds: string[]\r\n  /** Relationships on the critical path */\r\n  relationshipIds: string[]\r\n  /** Total estimated time */\r\n  totalDuration: number\r\n  /** Bottleneck cards */\r\n  bottlenecks: string[]\r\n}\r\n\r\n/**\r\n * Graph statistics\r\n */\r\nexport interface GraphStats {\r\n  /** Total nodes */\r\n  totalNodes: number\r\n  /** Total edges */\r\n  totalEdges: number\r\n  /** Average degree */\r\n  averageDegree: number\r\n  /** Density (0-1) */\r\n  density: number\r\n  /** Number of clusters */\r\n  clusters: number\r\n  /** Isolated nodes (no connections) */\r\n  isolatedNodes: string[]\r\n  /** Hub nodes (most connections) */\r\n  hubNodes: Array<{ cardId: string; degree: number }>\r\n  /** Most common relationship type */\r\n  mostCommonRelationType: RelationshipType\r\n}\r\n\r\n/**\r\n * Graph interaction event\r\n */\r\nexport interface GraphInteraction {\r\n  /** Event type */\r\n  type: 'node-click' | 'node-hover' | 'edge-click' | 'edge-hover' | 'canvas-click'\r\n  /** Selected node */\r\n  node?: GraphNode\r\n  /** Selected edge */\r\n  edge?: GraphEdge\r\n  /** Mouse position */\r\n  position?: { x: number; y: number }\r\n}\r\n\r\n/**\r\n * Default graph configuration\r\n */\r\nexport const DEFAULT_GRAPH_CONFIG: GraphConfig = {\r\n  layout: 'force',\r\n  width: 1200,\r\n  height: 800,\r\n  enableDragging: true,\r\n  enableZoom: true,\r\n  showLabels: true,\r\n  showEdgeLabels: false,\r\n  highlightCriticalPath: true,\r\n  nodeSize: 40,\r\n  edgeWidth: 2,\r\n  animationDuration: 300,\r\n  forceStrength: 0.5,\r\n  linkDistance: 150,\r\n  chargeStrength: -300,\r\n  centerForce: 0.1,\r\n  colorScheme: 'status',\r\n}\r\n\r\n/**\r\n * Helper to create a relationship\r\n */\r\nexport function createRelationship(\r\n  sourceId: string,\r\n  targetId: string,\r\n  type: RelationshipType,\r\n  metadata?: CardRelationship['metadata']\r\n): CardRelationship {\r\n  return {\r\n    id: `${sourceId}-${targetId}-${type}-${Date.now()}`,\r\n    sourceId,\r\n    targetId,\r\n    type,\r\n    createdAt: new Date(),\r\n    metadata,\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to get relationship color\r\n */\r\nexport function getRelationshipColor(type: RelationshipType): string {\r\n  const colors: Record<RelationshipType, string> = {\r\n    blocks: '#ef4444',\r\n    blocked_by: '#dc2626',\r\n    depends_on: '#f59e0b',\r\n    required_by: '#d97706',\r\n    relates_to: '#6b7280',\r\n    duplicates: '#8b5cf6',\r\n    parent_of: '#3b82f6',\r\n    child_of: '#2563eb',\r\n    similar_to: '#10b981',\r\n  }\r\n  return colors[type] || '#6b7280'\r\n}\r\n\r\n/**\r\n * Helper to get relationship label\r\n */\r\nexport function getRelationshipLabel(type: RelationshipType): string {\r\n  const labels: Record<RelationshipType, string> = {\r\n    blocks: 'Blocks',\r\n    blocked_by: 'Blocked by',\r\n    depends_on: 'Depends on',\r\n    required_by: 'Required by',\r\n    relates_to: 'Relates to',\r\n    duplicates: 'Duplicates',\r\n    parent_of: 'Parent of',\r\n    child_of: 'Child of',\r\n    similar_to: 'Similar to',\r\n  }\r\n  return labels[type] || type\r\n}\r\n\r\n/**\r\n * Helper to get relationship icon\r\n */\r\nexport function getRelationshipIcon(type: RelationshipType): string {\r\n  const icons: Record<RelationshipType, string> = {\r\n    blocks: '',\r\n    blocked_by: '',\r\n    depends_on: '',\r\n    required_by: '',\r\n    relates_to: '',\r\n    duplicates: '',\r\n    parent_of: '',\r\n    child_of: '',\r\n    similar_to: '',\r\n  }\r\n  return icons[type] || ''\r\n}\r\n\r\n/**\r\n * Helper to check if relationship is directional\r\n */\r\nexport function isDirectionalRelationship(type: RelationshipType): boolean {\r\n  return [\r\n    'blocks',\r\n    'blocked_by',\r\n    'depends_on',\r\n    'required_by',\r\n    'parent_of',\r\n    'child_of',\r\n  ].includes(type)\r\n}\r\n\r\n/**\r\n * Helper to get inverse relationship type\r\n */\r\nexport function getInverseRelationship(type: RelationshipType): RelationshipType | null {\r\n  const inverses: Partial<Record<RelationshipType, RelationshipType>> = {\r\n    blocks: 'blocked_by',\r\n    blocked_by: 'blocks',\r\n    depends_on: 'required_by',\r\n    required_by: 'depends_on',\r\n    parent_of: 'child_of',\r\n    child_of: 'parent_of',\r\n  }\r\n  return inverses[type] || null\r\n}\r\n\r\n/**\r\n * Calculate graph statistics\r\n */\r\nexport function calculateGraphStats(\r\n  nodes: GraphNode[],\r\n  edges: GraphEdge[]\r\n): GraphStats {\r\n  const totalNodes = nodes.length\r\n  const totalEdges = edges.length\r\n\r\n  // Calculate degrees\r\n  const degrees = new Map<string, number>()\r\n  edges.forEach((edge) => {\r\n    const sourceId = typeof edge.source === 'string' ? edge.source : edge.source.id\r\n    const targetId = typeof edge.target === 'string' ? edge.target : edge.target.id\r\n    degrees.set(sourceId, (degrees.get(sourceId) || 0) + 1)\r\n    degrees.set(targetId, (degrees.get(targetId) || 0) + 1)\r\n  })\r\n\r\n  const averageDegree = totalNodes > 0 ? Array.from(degrees.values()).reduce((a, b) => a + b, 0) / totalNodes : 0\r\n  const maxPossibleEdges = (totalNodes * (totalNodes - 1)) / 2\r\n  const density = maxPossibleEdges > 0 ? totalEdges / maxPossibleEdges : 0\r\n\r\n  // Find isolated nodes\r\n  const isolatedNodes = nodes\r\n    .filter((node) => !degrees.has(node.id))\r\n    .map((node) => node.id)\r\n\r\n  // Find hub nodes (top 5 most connected)\r\n  const hubNodes = Array.from(degrees.entries())\r\n    .map(([cardId, degree]) => ({ cardId, degree }))\r\n    .sort((a, b) => b.degree - a.degree)\r\n    .slice(0, 5)\r\n\r\n  // Most common relationship type\r\n  const typeCounts = new Map<RelationshipType, number>()\r\n  edges.forEach((edge) => {\r\n    typeCounts.set(edge.type, (typeCounts.get(edge.type) || 0) + 1)\r\n  })\r\n  const mostCommonRelationType = Array.from(typeCounts.entries()).sort((a, b) => b[1] - a[1])[0]?.[0] || 'relates_to'\r\n\r\n  return {\r\n    totalNodes,\r\n    totalEdges,\r\n    averageDegree,\r\n    density,\r\n    clusters: 0, // Would need clustering algorithm\r\n    isolatedNodes,\r\n    hubNodes,\r\n    mostCommonRelationType,\r\n  }\r\n}\r\n\r\n/**\r\n * Find critical path using topological sort and longest path\r\n */\r\nexport function findCriticalPath(\r\n  _cards: Card[],\r\n  relationships: CardRelationship[]\r\n): CriticalPath {\r\n  // Simple critical path: cards with most dependencies\r\n  const dependencyCounts = new Map<string, number>()\r\n\r\n  relationships.forEach((rel) => {\r\n    if (rel.type === 'blocks' || rel.type === 'depends_on') {\r\n      dependencyCounts.set(rel.targetId, (dependencyCounts.get(rel.targetId) || 0) + 1)\r\n    }\r\n  })\r\n\r\n  const sortedCards = Array.from(dependencyCounts.entries())\r\n    .sort((a, b) => b[1] - a[1])\r\n    .slice(0, 5)\r\n    .map((entry) => entry[0])\r\n\r\n  const criticalRelationships = relationships\r\n    .filter((rel) =>\r\n      sortedCards.includes(rel.sourceId) || sortedCards.includes(rel.targetId)\r\n    )\r\n    .map((rel) => rel.id)\r\n\r\n  return {\r\n    cardIds: sortedCards,\r\n    relationshipIds: criticalRelationships,\r\n    totalDuration: sortedCards.length * 5, // Estimate 5 days per card\r\n    bottlenecks: sortedCards.slice(0, 2),\r\n  }\r\n}\r\n","/**\r\n * CardRelationshipsGraph Component\r\n * Interactive force-directed graph visualization of card relationships\r\n * @module components/CardRelationships\r\n */\r\n\r\nimport { useRef, useEffect, useState, useCallback } from 'react'\r\nimport type {\r\n  GraphNode,\r\n  GraphEdge,\r\n  GraphConfig,\r\n  GraphFilter,\r\n  CriticalPath,\r\n  GraphStats,\r\n  GraphInteraction,\r\n} from '../../types/card-relationships'\r\nimport {\r\n  getRelationshipColor,\r\n  getRelationshipLabel,\r\n  getRelationshipIcon,\r\n  isDirectionalRelationship,\r\n} from '../../types/card-relationships'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardRelationshipsGraphProps {\r\n  /** Graph nodes */\r\n  nodes: GraphNode[]\r\n  /** Graph edges */\r\n  edges: GraphEdge[]\r\n  /** Graph configuration */\r\n  config: GraphConfig\r\n  /** Current filter */\r\n  filter: GraphFilter\r\n  /** Update filter */\r\n  onFilterChange: (filter: GraphFilter) => void\r\n  /** Critical path */\r\n  criticalPath: CriticalPath | null\r\n  /** Graph statistics */\r\n  stats: GraphStats\r\n  /** Interaction callback */\r\n  onInteraction?: (interaction: GraphInteraction) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Simple force simulation (without D3.js dependency)\r\n */\r\ninterface SimulationNode extends GraphNode {\r\n  x: number\r\n  y: number\r\n  vx: number\r\n  vy: number\r\n}\r\n\r\nfunction runForceSimulation(\r\n  nodes: GraphNode[],\r\n  edges: GraphEdge[],\r\n  width: number,\r\n  height: number,\r\n  config: GraphConfig,\r\n  iterations: number = 100\r\n): SimulationNode[] {\r\n  // Initialize positions\r\n  const simNodes: SimulationNode[] = nodes.map((node) => ({\r\n    ...node,\r\n    x: node.x ?? width / 2 + Math.random() * 100 - 50,\r\n    y: node.y ?? height / 2 + Math.random() * 100 - 50,\r\n    vx: 0,\r\n    vy: 0,\r\n  }))\r\n\r\n  const nodeMap = new Map(simNodes.map((n) => [n.id, n]))\r\n\r\n  // Run simulation\r\n  for (let iter = 0; iter < iterations; iter++) {\r\n    const alpha = 1 - iter / iterations // Decay factor\r\n\r\n    // Apply forces\r\n    simNodes.forEach((node) => {\r\n      // Center force\r\n      const centerX = width / 2\r\n      const centerY = height / 2\r\n      node.vx += (centerX - node.x) * config.centerForce * alpha\r\n      node.vy += (centerY - node.y) * config.centerForce * alpha\r\n\r\n      // Repulsion force (charge)\r\n      simNodes.forEach((other) => {\r\n        if (node.id === other.id) return\r\n        const dx = node.x - other.x\r\n        const dy = node.y - other.y\r\n        const distance = Math.sqrt(dx * dx + dy * dy) || 1\r\n        const force = (config.chargeStrength * alpha) / (distance * distance)\r\n        node.vx += (dx / distance) * force\r\n        node.vy += (dy / distance) * force\r\n      })\r\n    })\r\n\r\n    // Link forces\r\n    edges.forEach((edge) => {\r\n      const source = nodeMap.get(\r\n        typeof edge.source === 'string' ? edge.source : edge.source.id\r\n      )\r\n      const target = nodeMap.get(\r\n        typeof edge.target === 'string' ? edge.target : edge.target.id\r\n      )\r\n      if (!source || !target) return\r\n\r\n      const dx = target.x - source.x\r\n      const dy = target.y - source.y\r\n      const distance = Math.sqrt(dx * dx + dy * dy) || 1\r\n      const force =\r\n        ((distance - config.linkDistance) / distance) * config.forceStrength * alpha\r\n\r\n      source.vx += dx * force\r\n      source.vy += dy * force\r\n      target.vx -= dx * force\r\n      target.vy -= dy * force\r\n    })\r\n\r\n    // Update positions\r\n    simNodes.forEach((node) => {\r\n      if (node.fx !== null && node.fx !== undefined) {\r\n        node.x = node.fx\r\n        node.vx = 0\r\n      } else {\r\n        node.x += node.vx\r\n      }\r\n\r\n      if (node.fy !== null && node.fy !== undefined) {\r\n        node.y = node.fy\r\n        node.vy = 0\r\n      } else {\r\n        node.y += node.vy\r\n      }\r\n\r\n      // Keep nodes in bounds\r\n      node.x = Math.max(config.nodeSize, Math.min(width - config.nodeSize, node.x))\r\n      node.y = Math.max(config.nodeSize, Math.min(height - config.nodeSize, node.y))\r\n\r\n      // Apply damping\r\n      node.vx *= 0.9\r\n      node.vy *= 0.9\r\n    })\r\n  }\r\n\r\n  return simNodes\r\n}\r\n\r\n/**\r\n * Graph visualization component\r\n */\r\nexport function CardRelationshipsGraph({\r\n  nodes,\r\n  edges,\r\n  config,\r\n  filter: _filter,\r\n  onFilterChange: _onFilterChange,\r\n  criticalPath,\r\n  stats,\r\n  onInteraction,\r\n  className,\r\n}: CardRelationshipsGraphProps) {\r\n  const svgRef = useRef<SVGSVGElement>(null)\r\n  const [simulatedNodes, setSimulatedNodes] = useState<SimulationNode[]>([])\r\n  const [draggingNode, setDraggingNode] = useState<string | null>(null)\r\n  const [hoveredNode, setHoveredNode] = useState<string | null>(null)\r\n  const [hoveredEdge, setHoveredEdge] = useState<string | null>(null)\r\n  const [zoom, setZoom] = useState(1)\r\n  const [pan, setPan] = useState({ x: 0, y: 0 })\r\n\r\n  // Run force simulation when nodes/edges change\r\n  useEffect(() => {\r\n    if (nodes.length === 0) return\r\n\r\n    const simulated = runForceSimulation(\r\n      nodes,\r\n      edges,\r\n      config.width,\r\n      config.height,\r\n      config,\r\n      150\r\n    )\r\n    setSimulatedNodes(simulated)\r\n  }, [nodes, edges, config])\r\n\r\n  // Handle node drag\r\n  const handleNodeMouseDown = useCallback(\r\n    (nodeId: string, e: React.MouseEvent) => {\r\n      if (!config.enableDragging) return\r\n      e.stopPropagation()\r\n      setDraggingNode(nodeId)\r\n    },\r\n    [config.enableDragging]\r\n  )\r\n\r\n  const handleMouseMove = useCallback(\r\n    (e: React.MouseEvent<SVGSVGElement>) => {\r\n      if (!draggingNode || !svgRef.current) return\r\n\r\n      const svg = svgRef.current\r\n      const rect = svg.getBoundingClientRect()\r\n      const x = (e.clientX - rect.left - pan.x) / zoom\r\n      const y = (e.clientY - rect.top - pan.y) / zoom\r\n\r\n      setSimulatedNodes((prev) =>\r\n        prev.map((node) =>\r\n          node.id === draggingNode ? { ...node, x, y, fx: x, fy: y } : node\r\n        )\r\n      )\r\n    },\r\n    [draggingNode, zoom, pan]\r\n  )\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setDraggingNode(null)\r\n  }, [])\r\n\r\n  // Handle node click\r\n  const handleNodeClick = useCallback(\r\n    (node: SimulationNode, e: React.MouseEvent) => {\r\n      e.stopPropagation()\r\n      onInteraction?.({\r\n        type: 'node-click',\r\n        node,\r\n        position: { x: e.clientX, y: e.clientY },\r\n      })\r\n    },\r\n    [onInteraction]\r\n  )\r\n\r\n  // Handle edge click\r\n  const handleEdgeClick = useCallback(\r\n    (edge: GraphEdge, e: React.MouseEvent) => {\r\n      e.stopPropagation()\r\n      onInteraction?.({\r\n        type: 'edge-click',\r\n        edge,\r\n        position: { x: e.clientX, y: e.clientY },\r\n      })\r\n    },\r\n    [onInteraction]\r\n  )\r\n\r\n  // Get node position\r\n  const getNodePosition = useCallback(\r\n    (nodeId: string): { x: number; y: number } => {\r\n      const node = simulatedNodes.find((n) => n.id === nodeId)\r\n      return node ? { x: node.x, y: node.y } : { x: 0, y: 0 }\r\n    },\r\n    [simulatedNodes]\r\n  )\r\n\r\n  // Get node color based on color scheme\r\n  const getNodeColor = useCallback(\r\n    (node: SimulationNode): string => {\r\n      if (node.onCriticalPath) return '#ef4444'\r\n\r\n      switch (config.colorScheme) {\r\n        case 'status':\r\n          return node.card.columnId === 'done' ? '#10b981' : '#3b82f6'\r\n        case 'priority':\r\n          const priority = node.card.priority\r\n          if (priority === 'URGENT') return '#ef4444' // urgent\r\n          if (priority === 'HIGH') return '#f59e0b' // high\r\n          if (priority === 'MEDIUM') return '#3b82f6' // medium\r\n          return '#6b7280' // low or none\r\n        case 'assignee':\r\n          return node.card.assigneeId ? '#8b5cf6' : '#6b7280'\r\n        default:\r\n          return '#3b82f6'\r\n      }\r\n    },\r\n    [config.colorScheme]\r\n  )\r\n\r\n  if (nodes.length === 0) {\r\n    return (\r\n      <div className={cn('relationships-graph-empty', className)}>\r\n        <div className=\"relationships-graph-empty-icon\"></div>\r\n        <p className=\"relationships-graph-empty-text\">No relationships to display</p>\r\n        <p className=\"relationships-graph-empty-subtext\">\r\n          Add relationships between cards to see the graph\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relationships-graph', className)}>\r\n      {/* Controls */}\r\n      <div className=\"relationships-graph-controls\">\r\n        <div className=\"relationships-graph-stats\">\r\n          <span className=\"relationships-graph-stat\">\r\n            <span className=\"relationships-graph-stat-value\">{stats.totalNodes}</span>\r\n            <span className=\"relationships-graph-stat-label\">Cards</span>\r\n          </span>\r\n          <span className=\"relationships-graph-stat\">\r\n            <span className=\"relationships-graph-stat-value\">{stats.totalEdges}</span>\r\n            <span className=\"relationships-graph-stat-label\">Relations</span>\r\n          </span>\r\n          {criticalPath && (\r\n            <span className=\"relationships-graph-stat relationships-graph-stat-critical\">\r\n              <span className=\"relationships-graph-stat-value\">\r\n                {criticalPath.cardIds.length}\r\n              </span>\r\n              <span className=\"relationships-graph-stat-label\">Critical Path</span>\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Zoom controls */}\r\n        {config.enableZoom && (\r\n          <div className=\"relationships-graph-zoom-controls\">\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => setZoom((z) => Math.min(z + 0.2, 3))}\r\n            >\r\n              +\r\n            </button>\r\n            <span className=\"relationships-graph-zoom-value\">{Math.round(zoom * 100)}%</span>\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => setZoom((z) => Math.max(z - 0.2, 0.5))}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => {\r\n                setZoom(1)\r\n                setPan({ x: 0, y: 0 })\r\n              }}\r\n            >\r\n              Reset\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      <div className=\"relationships-graph-legend\">\r\n        {Array.from(new Set(edges.map((e) => e.type))).map((type) => (\r\n          <div key={type} className=\"relationships-graph-legend-item\">\r\n            <div\r\n              className=\"relationships-graph-legend-color\"\r\n              style={{ background: getRelationshipColor(type) }}\r\n            />\r\n            <span className=\"relationships-graph-legend-label\">\r\n              {getRelationshipIcon(type)} {getRelationshipLabel(type)}\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* SVG Canvas */}\r\n      <svg\r\n        ref={svgRef}\r\n        className=\"relationships-graph-canvas\"\r\n        width={config.width}\r\n        height={config.height}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        <g transform={`translate(${pan.x}, ${pan.y}) scale(${zoom})`}>\r\n          {/* Edges */}\r\n          <g className=\"relationships-graph-edges\">\r\n            {edges.map((edge) => {\r\n              const sourcePos = getNodePosition(\r\n                typeof edge.source === 'string' ? edge.source : edge.source.id\r\n              )\r\n              const targetPos = getNodePosition(\r\n                typeof edge.target === 'string' ? edge.target : edge.target.id\r\n              )\r\n\r\n              const isDirectional = isDirectionalRelationship(edge.type)\r\n              const isHovered = hoveredEdge === edge.id\r\n              const isCritical = edge.onCriticalPath\r\n\r\n              return (\r\n                <g\r\n                  key={edge.id}\r\n                  className={cn(\r\n                    'relationships-graph-edge',\r\n                    isHovered && 'hovered',\r\n                    isCritical && 'critical'\r\n                  )}\r\n                  onMouseEnter={() => setHoveredEdge(edge.id)}\r\n                  onMouseLeave={() => setHoveredEdge(null)}\r\n                  onClick={(e) => handleEdgeClick(edge, e)}\r\n                >\r\n                  <line\r\n                    x1={sourcePos.x}\r\n                    y1={sourcePos.y}\r\n                    x2={targetPos.x}\r\n                    y2={targetPos.y}\r\n                    stroke={getRelationshipColor(edge.type)}\r\n                    strokeWidth={isCritical ? config.edgeWidth * 2 : config.edgeWidth}\r\n                    strokeOpacity={isHovered ? 1 : 0.6}\r\n                    markerEnd={isDirectional ? 'url(#arrowhead)' : undefined}\r\n                  />\r\n                  {config.showEdgeLabels && isHovered && (\r\n                    <text\r\n                      x={(sourcePos.x + targetPos.x) / 2}\r\n                      y={(sourcePos.y + targetPos.y) / 2}\r\n                      className=\"relationships-graph-edge-label\"\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      {getRelationshipLabel(edge.type)}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              )\r\n            })}\r\n          </g>\r\n\r\n          {/* Nodes */}\r\n          <g className=\"relationships-graph-nodes\">\r\n            {simulatedNodes.map((node) => {\r\n              const isHovered = hoveredNode === node.id\r\n              const isCritical = node.onCriticalPath\r\n\r\n              return (\r\n                <g\r\n                  key={node.id}\r\n                  className={cn(\r\n                    'relationships-graph-node',\r\n                    isHovered && 'hovered',\r\n                    isCritical && 'critical'\r\n                  )}\r\n                  transform={`translate(${node.x}, ${node.y})`}\r\n                  onMouseDown={(e) => handleNodeMouseDown(node.id, e)}\r\n                  onMouseEnter={() => setHoveredNode(node.id)}\r\n                  onMouseLeave={() => setHoveredNode(null)}\r\n                  onClick={(e) => handleNodeClick(node, e)}\r\n                >\r\n                  <circle\r\n                    r={isCritical ? config.nodeSize * 1.2 : config.nodeSize}\r\n                    fill={getNodeColor(node)}\r\n                    stroke={isCritical ? '#fbbf24' : '#ffffff'}\r\n                    strokeWidth={isCritical ? 3 : 2}\r\n                    opacity={isHovered ? 1 : 0.9}\r\n                  />\r\n                  {config.showLabels && (\r\n                    <text\r\n                      y={config.nodeSize + 20}\r\n                      className=\"relationships-graph-node-label\"\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      {node.card.title.length > 20\r\n                        ? node.card.title.substring(0, 20) + '...'\r\n                        : node.card.title}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              )\r\n            })}\r\n          </g>\r\n        </g>\r\n\r\n        {/* Arrow marker for directional edges */}\r\n        <defs>\r\n          <marker\r\n            id=\"arrowhead\"\r\n            markerWidth=\"10\"\r\n            markerHeight=\"10\"\r\n            refX=\"9\"\r\n            refY=\"3\"\r\n            orient=\"auto\"\r\n            markerUnits=\"strokeWidth\"\r\n          >\r\n            <path d=\"M0,0 L0,6 L9,3 z\" fill=\"#6b7280\" />\r\n          </marker>\r\n        </defs>\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Generate Plan Modal\r\n * AI-powered project plan generation\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { GeneratedPlan } from '../../types'\r\n\r\nexport interface GeneratePlanModalProps {\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Plan generated callback */\r\n  onPlanGenerated: (plan: GeneratedPlan) => void\r\n  /** Generate plan function (from useAI hook) */\r\n  onGeneratePlan: (prompt: string) => Promise<GeneratedPlan>\r\n  /** Is AI loading */\r\n  isLoading?: boolean\r\n}\r\n\r\nexport function GeneratePlanModal({\r\n  isOpen,\r\n  onClose,\r\n  onPlanGenerated,\r\n  onGeneratePlan,\r\n  isLoading: externalLoading,\r\n}: GeneratePlanModalProps) {\r\n  const [prompt, setPrompt] = useState('')\r\n  const [isGenerating, setIsGenerating] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [generatedPlan, setGeneratedPlan] = useState<GeneratedPlan | null>(null)\r\n  const inputRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n  const isLoading = isGenerating || externalLoading\r\n\r\n  // Focus input when modal opens\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus()\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        handleClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, isLoading])\r\n\r\n  const handleClose = () => {\r\n    if (!isLoading) {\r\n      setPrompt('')\r\n      setError(null)\r\n      setGeneratedPlan(null)\r\n      onClose()\r\n    }\r\n  }\r\n\r\n  const handleGenerate = async () => {\r\n    if (!prompt.trim() || isLoading) return\r\n\r\n    setIsGenerating(true)\r\n    setError(null)\r\n    setGeneratedPlan(null)\r\n\r\n    try {\r\n      const plan = await onGeneratePlan(prompt.trim())\r\n      setGeneratedPlan(plan)\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to generate plan')\r\n    } finally {\r\n      setIsGenerating(false)\r\n    }\r\n  }\r\n\r\n  const handleApplyPlan = () => {\r\n    if (generatedPlan) {\r\n      onPlanGenerated(generatedPlan)\r\n      handleClose()\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\r\n        onClick={handleClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\r\n        <div\r\n          className=\"w-full max-w-2xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(255, 255, 255, 0.15)',\r\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n          }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                <svg\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"text-blue-400\"\r\n                >\r\n                  <path\r\n                    d=\"M12 2L2 7L12 12L22 7L12 2Z\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                  <path\r\n                    d=\"M2 17L12 22L22 17\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                  <path\r\n                    d=\"M2 12L12 17L22 12\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                </svg>\r\n                Generate Project Plan with AI\r\n              </h2>\r\n              <p className=\"text-sm text-white/60 mt-1\">\r\n                Describe your project and let AI create a complete Kanban board\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={handleClose}\r\n              disabled={isLoading}\r\n              className=\"text-white/60 hover:text-white transition-colors disabled:opacity-50\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M18 6L6 18M6 6L18 18\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n            {!generatedPlan ? (\r\n              <>\r\n                {/* Input */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-white/90 mb-2\">\r\n                    Project Description\r\n                  </label>\r\n                  <textarea\r\n                    ref={inputRef}\r\n                    value={prompt}\r\n                    onChange={(e) => setPrompt(e.target.value)}\r\n                    placeholder=\"Example: Build a mobile app for tracking fitness goals with user authentication, workout logging, progress charts, and social features...\"\r\n                    className=\"w-full h-32 px-4 py-3 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/40 outline-none focus:border-blue-500/50 transition-all resize-none\"\r\n                    disabled={isLoading}\r\n                  />\r\n                  <p className=\"text-xs text-white/50 mt-2\">\r\n                    Be as specific as possible. Include features, technologies, and any special requirements.\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Error */}\r\n                {error && (\r\n                  <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Examples */}\r\n                <div className=\"border-t border-white/10 pt-4\">\r\n                  <p className=\"text-xs font-semibold text-white/70 uppercase tracking-wider mb-3\">\r\n                    Example Prompts\r\n                  </p>\r\n                  <div className=\"space-y-2\">\r\n                    {[\r\n                      'Build an e-commerce platform with product catalog, shopping cart, payment integration, and order tracking',\r\n                      'Create a task management app with team collaboration, real-time updates, file attachments, and notifications',\r\n                      'Develop a blog platform with markdown editor, SEO optimization, comments system, and analytics dashboard',\r\n                    ].map((example, i) => (\r\n                      <button\r\n                        key={i}\r\n                        onClick={() => setPrompt(example)}\r\n                        disabled={isLoading}\r\n                        className=\"w-full text-left px-3 py-2 rounded-lg text-xs text-white/70 hover:text-white hover:bg-white/5 transition-all border border-white/10 hover:border-white/20 disabled:opacity-50\"\r\n                      >\r\n                        {example}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {/* Generated Plan Preview */}\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center gap-2 text-green-400\">\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\r\n                      <path\r\n                        d=\"M4 10L8 14L16 6\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                    <span className=\"font-semibold\">Plan Generated Successfully!</span>\r\n                  </div>\r\n\r\n                  {/* Explanation */}\r\n                  {generatedPlan.explanation && (\r\n                    <div className=\"p-4 rounded-lg bg-blue-500/10 border border-blue-500/30\">\r\n                      <p className=\"text-sm text-white/90\">{generatedPlan.explanation}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Columns */}\r\n                  <div>\r\n                    <h3 className=\"text-sm font-semibold text-white/90 mb-2\">\r\n                      Columns ({generatedPlan.columns.length})\r\n                    </h3>\r\n                    <div className=\"flex gap-2 flex-wrap\">\r\n                      {generatedPlan.columns.map((col, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"px-3 py-1.5 rounded-lg bg-white/5 border border-white/20 text-sm text-white/80\"\r\n                        >\r\n                          {col.title}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Cards */}\r\n                  <div>\r\n                    <h3 className=\"text-sm font-semibold text-white/90 mb-2\">\r\n                      Tasks ({generatedPlan.cards.length})\r\n                    </h3>\r\n                    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                      {generatedPlan.cards.slice(0, 10).map((card, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"p-3 rounded-lg bg-white/5 border border-white/10\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between gap-2\">\r\n                            <div className=\"flex-1\">\r\n                              <p className=\"text-sm font-medium text-white/90\">{card.title}</p>\r\n                              {card.description && (\r\n                                <p className=\"text-xs text-white/60 mt-1 line-clamp-2\">\r\n                                  {card.description}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                            {card.priority && (\r\n                              <span\r\n                                className={`px-2 py-0.5 rounded text-xs font-semibold ${\r\n                                  card.priority === 'URGENT'\r\n                                    ? 'bg-red-500/20 text-red-400'\r\n                                    : card.priority === 'HIGH'\r\n                                    ? 'bg-orange-500/20 text-orange-400'\r\n                                    : card.priority === 'MEDIUM'\r\n                                    ? 'bg-yellow-500/20 text-yellow-400'\r\n                                    : 'bg-blue-500/20 text-blue-400'\r\n                                }`}\r\n                              >\r\n                                {card.priority}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {generatedPlan.cards.length > 10 && (\r\n                        <p className=\"text-xs text-white/50 text-center py-2\">\r\n                          +{generatedPlan.cards.length - 10} more tasks...\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              {isLoading && (\r\n                <div className=\"flex items-center gap-2 text-blue-400 text-sm\">\r\n                  <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\r\n                    <circle\r\n                      className=\"opacity-25\"\r\n                      cx=\"12\"\r\n                      cy=\"12\"\r\n                      r=\"10\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"4\"\r\n                      fill=\"none\"\r\n                    />\r\n                    <path\r\n                      className=\"opacity-75\"\r\n                      fill=\"currentColor\"\r\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                    />\r\n                  </svg>\r\n                  <span>Generating with AI...</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={handleClose}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80 disabled:opacity-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              {!generatedPlan ? (\r\n                <button\r\n                  onClick={handleGenerate}\r\n                  disabled={!prompt.trim() || isLoading}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  {isLoading ? 'Generating...' : 'Generate Plan'}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={handleApplyPlan}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #10B981 0%, #059669 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  Apply Plan to Board\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * AI Configuration\r\n * Central configuration for AI providers and models\r\n */\r\n\r\nexport interface AIConfig {\r\n  /** Provider (OpenAI or Anthropic) */\r\n  provider: 'openai' | 'anthropic'\r\n  /** API Key */\r\n  apiKey: string\r\n  /** Model to use */\r\n  model: string\r\n  /** Base URL (optional) */\r\n  baseURL?: string\r\n  /** Max tokens per request */\r\n  maxTokens?: number\r\n  /** Temperature (0-2) */\r\n  temperature?: number\r\n}\r\n\r\n/**\r\n * Supported AI Models\r\n */\r\nexport const AI_MODELS = {\r\n  // OpenAI Models\r\n  'gpt-4-turbo': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-4 Turbo',\r\n    contextWindow: 128000,\r\n    costPer1kInput: 0.01,\r\n    costPer1kOutput: 0.03,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'gpt-4': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-4',\r\n    contextWindow: 8192,\r\n    costPer1kInput: 0.03,\r\n    costPer1kOutput: 0.06,\r\n    supportsVision: false,\r\n    supportsJSON: true,\r\n  },\r\n  'gpt-3.5-turbo': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-3.5 Turbo',\r\n    contextWindow: 16385,\r\n    costPer1kInput: 0.0005,\r\n    costPer1kOutput: 0.0015,\r\n    supportsVision: false,\r\n    supportsJSON: true,\r\n  },\r\n\r\n  // Anthropic Models\r\n  'claude-3-5-sonnet-20241022': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3.5 Sonnet',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.003,\r\n    costPer1kOutput: 0.015,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'claude-3-opus-20240229': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3 Opus',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.015,\r\n    costPer1kOutput: 0.075,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'claude-3-haiku-20240307': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3 Haiku',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.00025,\r\n    costPer1kOutput: 0.00125,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n} as const\r\n\r\nexport type AIModelKey = keyof typeof AI_MODELS\r\n\r\n/**\r\n * Default AI Configuration\r\n */\r\nexport const DEFAULT_AI_CONFIG: Partial<AIConfig> = {\r\n  model: 'claude-3-5-sonnet-20241022',\r\n  maxTokens: 4096,\r\n  temperature: 0.7,\r\n}\r\n\r\n/**\r\n * Rate Limits by Plan\r\n */\r\nexport const RATE_LIMITS = {\r\n  hobby: {\r\n    requestsPerMonth: 50,\r\n    maxConcurrent: 1,\r\n    maxTokensPerRequest: 4096,\r\n  },\r\n  pro: {\r\n    requestsPerMonth: 500,\r\n    maxConcurrent: 3,\r\n    maxTokensPerRequest: 8192,\r\n  },\r\n  enterprise: {\r\n    requestsPerMonth: 2000,\r\n    maxConcurrent: 10,\r\n    maxTokensPerRequest: 16384,\r\n  },\r\n} as const\r\n\r\n/**\r\n * Feature Flags for AI\r\n */\r\nexport const AI_FEATURES = {\r\n  generatePlan: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 2000,\r\n  },\r\n  predictRisks: {\r\n    enabled: true,\r\n    minPlanTier: 'pro' as const,\r\n    estimatedTokens: 1500,\r\n  },\r\n  suggestAssignee: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 800,\r\n  },\r\n  generateReport: {\r\n    enabled: true,\r\n    minPlanTier: 'enterprise' as const,\r\n    estimatedTokens: 3000,\r\n  },\r\n  generateSubtasks: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 1000,\r\n  },\r\n} as const\r\n","/**\r\n * AI Cost Tracking\r\n * Calculate and track AI API usage costs\r\n */\r\n\r\nimport { AI_MODELS, type AIModelKey } from './config'\r\n\r\nexport interface AIOperation {\r\n  id: string\r\n  feature: 'generatePlan' | 'predictRisks' | 'suggestAssignee' | 'generateSubtasks' | 'estimateEffort'\r\n  model: AIModelKey\r\n  inputTokens: number\r\n  outputTokens: number\r\n  cost: number\r\n  duration: number\r\n  timestamp: Date\r\n  success: boolean\r\n  error?: string\r\n}\r\n\r\nexport interface UsageStats {\r\n  totalOperations: number\r\n  totalCost: number\r\n  totalInputTokens: number\r\n  totalOutputTokens: number\r\n  operationsByFeature: Record<string, number>\r\n  costsByFeature: Record<string, number>\r\n  averageDuration: number\r\n  successRate: number\r\n}\r\n\r\n/**\r\n * Calculate cost for an AI operation\r\n */\r\nexport function calculateCost(\r\n  model: AIModelKey,\r\n  inputTokens: number,\r\n  outputTokens: number\r\n): number {\r\n  const modelInfo = AI_MODELS[model]\r\n  if (!modelInfo) {\r\n    throw new Error(`Unknown model: ${model}`)\r\n  }\r\n\r\n  const inputCost = (inputTokens / 1000) * modelInfo.costPer1kInput\r\n  const outputCost = (outputTokens / 1000) * modelInfo.costPer1kOutput\r\n\r\n  return inputCost + outputCost\r\n}\r\n\r\n/**\r\n * Format cost as USD string\r\n */\r\nexport function formatCost(cost: number): string {\r\n  return `$${cost.toFixed(4)}`\r\n}\r\n\r\n/**\r\n * AI Usage Tracker\r\n * In-memory tracking of AI operations\r\n * In production, this would persist to a database\r\n */\r\nexport class AIUsageTracker {\r\n  private operations: AIOperation[] = []\r\n  private listeners: Array<(operation: AIOperation) => void> = []\r\n\r\n  /**\r\n   * Record a new AI operation\r\n   */\r\n  record(operation: Omit<AIOperation, 'id' | 'timestamp' | 'cost'>): AIOperation {\r\n    const cost = calculateCost(operation.model, operation.inputTokens, operation.outputTokens)\r\n\r\n    const fullOperation: AIOperation = {\r\n      ...operation,\r\n      id: `op_${Date.now()}_${Math.random().toString(36).substring(7)}`,\r\n      timestamp: new Date(),\r\n      cost,\r\n    }\r\n\r\n    this.operations.push(fullOperation)\r\n\r\n    // Notify listeners\r\n    this.listeners.forEach((listener) => listener(fullOperation))\r\n\r\n    // Keep only last 1000 operations in memory\r\n    if (this.operations.length > 1000) {\r\n      this.operations = this.operations.slice(-1000)\r\n    }\r\n\r\n    return fullOperation\r\n  }\r\n\r\n  /**\r\n   * Get usage statistics\r\n   */\r\n  getStats(timeRange?: { start: Date; end: Date }): UsageStats {\r\n    let operations = this.operations\r\n\r\n    // Filter by time range if provided\r\n    if (timeRange) {\r\n      operations = operations.filter(\r\n        (op) => op.timestamp >= timeRange.start && op.timestamp <= timeRange.end\r\n      )\r\n    }\r\n\r\n    const totalOperations = operations.length\r\n    const totalCost = operations.reduce((sum, op) => sum + op.cost, 0)\r\n    const totalInputTokens = operations.reduce((sum, op) => sum + op.inputTokens, 0)\r\n    const totalOutputTokens = operations.reduce((sum, op) => sum + op.outputTokens, 0)\r\n    const successfulOps = operations.filter((op) => op.success)\r\n    const totalDuration = operations.reduce((sum, op) => sum + op.duration, 0)\r\n\r\n    // Operations by feature\r\n    const operationsByFeature: Record<string, number> = {}\r\n    const costsByFeature: Record<string, number> = {}\r\n\r\n    operations.forEach((op) => {\r\n      operationsByFeature[op.feature] = (operationsByFeature[op.feature] || 0) + 1\r\n      costsByFeature[op.feature] = (costsByFeature[op.feature] || 0) + op.cost\r\n    })\r\n\r\n    return {\r\n      totalOperations,\r\n      totalCost,\r\n      totalInputTokens,\r\n      totalOutputTokens,\r\n      operationsByFeature,\r\n      costsByFeature,\r\n      averageDuration: totalOperations > 0 ? totalDuration / totalOperations : 0,\r\n      successRate: totalOperations > 0 ? successfulOps.length / totalOperations : 0,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get recent operations\r\n   */\r\n  getRecentOperations(limit = 10): AIOperation[] {\r\n    return this.operations.slice(-limit).reverse()\r\n  }\r\n\r\n  /**\r\n   * Check if usage is within limits\r\n   */\r\n  checkLimit(planTier: 'hobby' | 'pro' | 'enterprise', period: 'month' | 'day' = 'month'): {\r\n    used: number\r\n    limit: number\r\n    remaining: number\r\n    percentUsed: number\r\n    isExceeded: boolean\r\n  } {\r\n    const limits = {\r\n      hobby: { month: 50, day: 5 },\r\n      pro: { month: 500, day: 50 },\r\n      enterprise: { month: 2000, day: 200 },\r\n    }\r\n\r\n    const limit = limits[planTier][period]\r\n\r\n    // Calculate operations in the period\r\n    const now = new Date()\r\n    const start = new Date()\r\n    if (period === 'month') {\r\n      start.setMonth(now.getMonth() - 1)\r\n    } else {\r\n      start.setDate(now.getDate() - 1)\r\n    }\r\n\r\n    const periodOperations = this.operations.filter((op) => op.timestamp >= start).length\r\n\r\n    const remaining = Math.max(0, limit - periodOperations)\r\n    const percentUsed = (periodOperations / limit) * 100\r\n\r\n    return {\r\n      used: periodOperations,\r\n      limit,\r\n      remaining,\r\n      percentUsed,\r\n      isExceeded: periodOperations >= limit,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to operation events\r\n   */\r\n  subscribe(listener: (operation: AIOperation) => void): () => void {\r\n    this.listeners.push(listener)\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.listeners.indexOf(listener)\r\n      if (index > -1) {\r\n        this.listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all tracked operations\r\n   */\r\n  clear(): void {\r\n    this.operations = []\r\n  }\r\n\r\n  /**\r\n   * Export operations as JSON\r\n   */\r\n  export(): string {\r\n    return JSON.stringify(this.operations, null, 2)\r\n  }\r\n}\r\n\r\n/**\r\n * Global usage tracker instance\r\n */\r\nexport const aiUsageTracker = new AIUsageTracker()\r\n\r\n/**\r\n * Estimate cost for a feature before execution\r\n */\r\nexport function estimateFeatureCost(\r\n  feature: AIOperation['feature'],\r\n  model: AIModelKey = 'claude-3-5-sonnet-20241022'\r\n): { estimatedCost: string; estimatedTokens: number } {\r\n  // Rough estimates based on typical usage\r\n  const tokenEstimates = {\r\n    generatePlan: 2500,\r\n    predictRisks: 1800,\r\n    suggestAssignee: 1000,\r\n    generateSubtasks: 1200,\r\n    estimateEffort: 800,\r\n  }\r\n\r\n  const tokens = tokenEstimates[feature]\r\n  // Assume 60/40 split between input/output\r\n  const inputTokens = Math.floor(tokens * 0.6)\r\n  const outputTokens = Math.floor(tokens * 0.4)\r\n\r\n  const cost = calculateCost(model, inputTokens, outputTokens)\r\n\r\n  return {\r\n    estimatedCost: formatCost(cost),\r\n    estimatedTokens: tokens,\r\n  }\r\n}\r\n","/**\r\n * AI Usage Dashboard\r\n * Display AI usage statistics and costs\r\n */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { aiUsageTracker, formatCost, type UsageStats } from '../../lib/ai/costs'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface AIUsageDashboardProps {\r\n  /** Is dashboard open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Current plan tier */\r\n  planTier?: 'hobby' | 'pro' | 'enterprise'\r\n}\r\n\r\nexport function AIUsageDashboard({\r\n  isOpen,\r\n  onClose,\r\n  planTier = 'hobby',\r\n}: AIUsageDashboardProps) {\r\n  const [stats, setStats] = useState<UsageStats>(aiUsageTracker.getStats())\r\n  const [limit, setLimit] = useState(aiUsageTracker.checkLimit(planTier))\r\n\r\n  // Update stats every second when open\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const interval = setInterval(() => {\r\n      setStats(aiUsageTracker.getStats())\r\n      setLimit(aiUsageTracker.checkLimit(planTier))\r\n    }, 1000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [isOpen, planTier])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  const recentOps = aiUsageTracker.getRecentOperations(5)\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Dashboard */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\r\n        <div\r\n          className=\"w-full max-w-3xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(255, 255, 255, 0.15)',\r\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n          }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-white\">AI Usage Dashboard</h2>\r\n              <p className=\"text-sm text-white/60 mt-1\">\r\n                Monitor your AI consumption and costs\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-white/60 hover:text-white transition-colors\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M18 6L6 18M6 6L18 18\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n            {/* Usage Limit */}\r\n            <div className=\"p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"text-sm font-semibold text-white/90\">\r\n                  Monthly Usage ({planTier.toUpperCase()})\r\n                </span>\r\n                <span className=\"text-sm font-bold text-white\">\r\n                  {limit.used} / {limit.limit}\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full h-2 bg-white/10 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full transition-all\"\r\n                  style={{\r\n                    width: `${Math.min(100, limit.percentUsed)}%`,\r\n                    background:\r\n                      limit.percentUsed > 90\r\n                        ? '#EF4444'\r\n                        : limit.percentUsed > 70\r\n                        ? '#F59E0B'\r\n                        : '#10B981',\r\n                  }}\r\n                />\r\n              </div>\r\n              <p className=\"text-xs text-white/60 mt-2\">\r\n                {limit.remaining} operations remaining this month\r\n              </p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              {/* Total Cost */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Total Cost\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-green-400 mt-1\">\r\n                  {formatCost(stats.totalCost)}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Total Operations */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Operations\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-blue-400 mt-1\">\r\n                  {stats.totalOperations}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Total Tokens */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Tokens Used\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-purple-400 mt-1\">\r\n                  {(stats.totalInputTokens + stats.totalOutputTokens).toLocaleString()}\r\n                </p>\r\n                <p className=\"text-xs text-white/50 mt-1\">\r\n                  {stats.totalInputTokens.toLocaleString()} in /{' '}\r\n                  {stats.totalOutputTokens.toLocaleString()} out\r\n                </p>\r\n              </div>\r\n\r\n              {/* Success Rate */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Success Rate\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-green-400 mt-1\">\r\n                  {(stats.successRate * 100).toFixed(1)}%\r\n                </p>\r\n                <p className=\"text-xs text-white/50 mt-1\">\r\n                  Avg: {stats.averageDuration.toFixed(0)}ms\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Operations by Feature */}\r\n            <div>\r\n              <h3 className=\"text-sm font-semibold text-white/90 mb-3\">Usage by Feature</h3>\r\n              <div className=\"space-y-2\">\r\n                {Object.entries(stats.operationsByFeature).map(([feature, count]) => {\r\n                  const cost = stats.costsByFeature[feature] || 0\r\n                  const percent =\r\n                    stats.totalOperations > 0\r\n                      ? (count / stats.totalOperations) * 100\r\n                      : 0\r\n\r\n                  return (\r\n                    <div key={feature} className=\"p-3 rounded-lg bg-white/5 border border-white/10\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-white/90 capitalize\">\r\n                          {feature.replace(/([A-Z])/g, ' $1').trim()}\r\n                        </span>\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <span className=\"text-xs text-white/60\">{count} ops</span>\r\n                          <span className=\"text-xs font-semibold text-green-400\">\r\n                            {formatCost(cost)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"w-full h-1.5 bg-white/10 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className=\"h-full bg-blue-500\"\r\n                          style={{ width: `${percent}%` }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Recent Operations */}\r\n            <div>\r\n              <h3 className=\"text-sm font-semibold text-white/90 mb-3\">Recent Operations</h3>\r\n              {recentOps.length === 0 ? (\r\n                <p className=\"text-sm text-white/50 text-center py-8\">\r\n                  No operations yet. Start using AI features!\r\n                </p>\r\n              ) : (\r\n                <div className=\"space-y-2\">\r\n                  {recentOps.map((op) => (\r\n                    <div\r\n                      key={op.id}\r\n                      className=\"p-3 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between\"\r\n                    >\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-white/90 capitalize\">\r\n                          {op.feature.replace(/([A-Z])/g, ' $1').trim()}\r\n                        </p>\r\n                        <p className=\"text-xs text-white/50 mt-0.5\">\r\n                          {new Date(op.timestamp).toLocaleTimeString()} {' '}\r\n                          {op.duration}ms\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <span className=\"text-xs text-white/60\">\r\n                          {op.inputTokens + op.outputTokens} tokens\r\n                        </span>\r\n                        <span className=\"text-xs font-semibold text-green-400\">\r\n                          {formatCost(op.cost)}\r\n                        </span>\r\n                        <div\r\n                          className={`w-2 h-2 rounded-full ${\r\n                            op.success ? 'bg-green-400' : 'bg-red-400'\r\n                          }`}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\r\n            <p className=\"text-xs text-white/50\">\r\n              Costs are estimates. Actual API charges may vary.\r\n            </p>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\n * Generate Gantt Tasks Dialog\n * AI-powered Gantt task generation with cost control\n */\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Portal } from '../Portal'\n\nexport interface GanttTask {\n  id: string\n  name: string\n  start: string\n  end: string\n  duration: number\n  progress: number\n  dependencies: string[]\n  type: string\n  priority: 'high' | 'medium' | 'low'\n}\n\nexport interface GeneratedTasksResponse {\n  tasks: {\n    tasks: GanttTask[]\n  }\n  from_cache: boolean\n  tokens_used: number\n  mock_mode?: boolean\n  similarity?: number\n  tokens_saved?: number\n}\n\nexport interface GenerateGanttTasksDialogProps {\n  /** Is dialog open */\n  isOpen: boolean\n  /** Close handler */\n  onClose: () => void\n  /** Tasks generated callback */\n  onTasksGenerated: (tasks: GanttTask[]) => void\n  /** Generate tasks function (calls Supabase Edge Function) */\n  onGenerateTasks: (params: {\n    prompt: string\n    projectName?: string\n    startDate?: string\n    endDate?: string\n  }) => Promise<GeneratedTasksResponse>\n  /** Is AI loading */\n  isLoading?: boolean\n  /** Project ID (optional) */\n  projectId?: string\n  /** Project name (optional) */\n  projectName?: string\n}\n\nexport function GenerateGanttTasksDialog({\n  isOpen,\n  onClose,\n  onTasksGenerated,\n  onGenerateTasks,\n  isLoading: externalLoading,\n  projectName,\n}: GenerateGanttTasksDialogProps) {\n  const [prompt, setPrompt] = useState('')\n  const [startDate, setStartDate] = useState('')\n  const [endDate, setEndDate] = useState('')\n  const [isGenerating, setIsGenerating] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [generatedTasks, setGeneratedTasks] = useState<GanttTask[] | null>(null)\n  const [responseMetadata, setResponseMetadata] = useState<{\n    from_cache: boolean\n    tokens_used: number\n    mock_mode?: boolean\n    similarity?: number\n    tokens_saved?: number\n  } | null>(null)\n  const inputRef = useRef<HTMLTextAreaElement>(null)\n\n  const isLoading = isGenerating || externalLoading\n\n  // Focus input when dialog opens\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      inputRef.current.focus()\n    }\n  }, [isOpen])\n\n  // Close on escape\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && !isLoading) {\n        handleClose()\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape)\n      return () => document.removeEventListener('keydown', handleEscape)\n    }\n    return undefined\n  }, [isOpen, isLoading])\n\n  const handleClose = () => {\n    if (!isLoading) {\n      setPrompt('')\n      setStartDate('')\n      setEndDate('')\n      setError(null)\n      setGeneratedTasks(null)\n      setResponseMetadata(null)\n      onClose()\n    }\n  }\n\n  const handleGenerate = async () => {\n    if (!prompt.trim() || isLoading) return\n\n    setIsGenerating(true)\n    setError(null)\n    setGeneratedTasks(null)\n    setResponseMetadata(null)\n\n    try {\n      const response = await onGenerateTasks({\n        prompt: prompt.trim(),\n        projectName: projectName || 'Mi Proyecto',\n        startDate: startDate || undefined,\n        endDate: endDate || undefined,\n      })\n\n      setGeneratedTasks(response.tasks.tasks)\n      setResponseMetadata({\n        from_cache: response.from_cache,\n        tokens_used: response.tokens_used,\n        mock_mode: response.mock_mode,\n        similarity: response.similarity,\n        tokens_saved: response.tokens_saved,\n      })\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to generate tasks')\n    } finally {\n      setIsGenerating(false)\n    }\n  }\n\n  const handleApplyTasks = () => {\n    if (generatedTasks) {\n      onTasksGenerated(generatedTasks)\n      handleClose()\n    }\n  }\n\n  if (!isOpen) return null\n\n  const similarity = responseMetadata?.similarity\n    ? ((responseMetadata.similarity || 0) * 100).toFixed(0)\n    : '0'\n\n  return (\n    <Portal>\n      {/* Backdrop */}\n      <div\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\n        onClick={handleClose}\n      />\n\n      {/* Dialog */}\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\n        <div\n          className=\"w-full max-w-3xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\n          style={{\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\n            borderColor: 'rgba(255, 255, 255, 0.15)',\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n                <svg\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"text-blue-400\"\n                >\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\n                  <rect x=\"3\" y=\"9\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\n                  <rect x=\"3\" y=\"14\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\n                  <rect x=\"3\" y=\"19\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\n                </svg>\n                Generate Gantt Tasks with AI\n              </h2>\n              <p className=\"text-sm text-white/60 mt-1\">\n                Describe your project and let AI create a complete task timeline\n              </p>\n            </div>\n            <button\n              onClick={handleClose}\n              disabled={isLoading}\n              className=\"text-white/60 hover:text-white transition-colors disabled:opacity-50\"\n            >\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path\n                  d=\"M18 6L6 18M6 6L18 18\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                />\n              </svg>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n            {!generatedTasks ? (\n              <>\n                {/* Input Form */}\n                <div>\n                  <label className=\"block text-sm font-semibold text-white/90 mb-2\">\n                    Project Description *\n                  </label>\n                  <textarea\n                    ref={inputRef}\n                    value={prompt}\n                    onChange={(e) => setPrompt(e.target.value)}\n                    placeholder=\"Example: Build a mobile app for tracking fitness goals with user authentication, workout logging, progress charts, and social features...\"\n                    className=\"w-full h-32 px-4 py-3 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/40 outline-none focus:border-blue-500/50 transition-all resize-none\"\n                    disabled={isLoading}\n                  />\n                  <p className=\"text-xs text-white/50 mt-2\">\n                    Be as specific as possible. Include features, technologies, and any special\n                    requirements.\n                  </p>\n                </div>\n\n                {/* Date Inputs */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-semibold text-white/90 mb-2\">\n                      Start Date (Optional)\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={startDate}\n                      onChange={(e) => setStartDate(e.target.value)}\n                      className=\"w-full px-4 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white outline-none focus:border-blue-500/50 transition-all\"\n                      disabled={isLoading}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-semibold text-white/90 mb-2\">\n                      End Date (Optional)\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={endDate}\n                      onChange={(e) => setEndDate(e.target.value)}\n                      className=\"w-full px-4 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white outline-none focus:border-blue-500/50 transition-all\"\n                      disabled={isLoading}\n                    />\n                  </div>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm\">\n                    {error}\n                  </div>\n                )}\n\n                {/* Examples */}\n                <div className=\"border-t border-white/10 pt-4\">\n                  <p className=\"text-xs font-semibold text-white/70 uppercase tracking-wider mb-3\">\n                    Example Prompts\n                  </p>\n                  <div className=\"space-y-2\">\n                    {[\n                      'Build an e-commerce platform with product catalog, shopping cart, payment integration, and order tracking',\n                      'Create a task management app with team collaboration, real-time updates, file attachments, and notifications',\n                      'Develop a blog platform with markdown editor, SEO optimization, comments system, and analytics dashboard',\n                    ].map((example, i) => (\n                      <button\n                        key={i}\n                        onClick={() => setPrompt(example)}\n                        disabled={isLoading}\n                        className=\"w-full text-left px-3 py-2 rounded-lg text-xs text-white/70 hover:text-white hover:bg-white/5 transition-all border border-white/10 hover:border-white/20 disabled:opacity-50\"\n                      >\n                        {example}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </>\n            ) : (\n              <>\n                {/* Generated Tasks Preview */}\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center gap-2 text-green-400\">\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n                      <path\n                        d=\"M4 10L8 14L16 6\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      />\n                    </svg>\n                    <span className=\"font-semibold\">Tasks Generated Successfully!</span>\n                  </div>\n\n                  {/* Metadata Badges */}\n                  <div className=\"flex flex-wrap gap-2\">\n                    {responseMetadata?.mock_mode && (\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-yellow-500/20 text-yellow-400 border border-yellow-500/30\">\n                        Mock Mode\n                      </span>\n                    )}\n                    {responseMetadata?.from_cache ? (\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-blue-500/20 text-blue-400 border border-blue-500/30\">\n                        From Cache ({similarity}% similar)\n                      </span>\n                    ) : (\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-green-500/20 text-green-400 border border-green-500/30\">\n                        AI Generated\n                      </span>\n                    )}\n                    <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-purple-500/20 text-purple-400 border border-purple-500/30\">\n                      {responseMetadata?.tokens_used || 0} tokens\n                    </span>\n                    {responseMetadata?.tokens_saved && (\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-indigo-500/20 text-indigo-400 border border-indigo-500/30\">\n                        {responseMetadata.tokens_saved} tokens saved\n                      </span>\n                    )}\n                    <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-pink-500/20 text-pink-400 border border-pink-500/30\">\n                      {generatedTasks.length} tasks\n                    </span>\n                  </div>\n\n                  {/* Tasks List */}\n                  <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                    {generatedTasks.map((task, i) => (\n                      <div\n                        key={task.id}\n                        className=\"p-3 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors\"\n                      >\n                        <div className=\"flex items-start justify-between gap-2\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"text-xs text-white/50\">#{i + 1}</span>\n                              <p className=\"text-sm font-medium text-white/90\">{task.name}</p>\n                            </div>\n                            <div className=\"flex items-center gap-3 text-xs text-white/60\">\n                              <span className=\"flex items-center gap-1\">\n                                <svg\n                                  width=\"12\"\n                                  height=\"12\"\n                                  viewBox=\"0 0 12 12\"\n                                  fill=\"none\"\n                                  className=\"text-white/40\"\n                                >\n                                  <rect\n                                    x=\"1\"\n                                    y=\"2\"\n                                    width=\"10\"\n                                    height=\"8\"\n                                    rx=\"1\"\n                                    stroke=\"currentColor\"\n                                  />\n                                  <path d=\"M1 4h10\" stroke=\"currentColor\" />\n                                </svg>\n                                {task.start}  {task.end}\n                              </span>\n                              <span>{task.duration} days</span>\n                              {task.dependencies.length > 0 && (\n                                <span className=\"text-blue-400\">\n                                  Depends: {task.dependencies.join(', ')}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                          <span\n                            className={`px-2 py-0.5 rounded text-xs font-semibold ${\n                              task.priority === 'high'\n                                ? 'bg-red-500/20 text-red-400'\n                                : task.priority === 'medium'\n                                ? 'bg-yellow-500/20 text-yellow-400'\n                                : 'bg-blue-500/20 text-blue-400'\n                            }`}\n                          >\n                            {task.priority}\n                          </span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\n            <div>\n              {isLoading && (\n                <div className=\"flex items-center gap-2 text-blue-400 text-sm\">\n                  <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\n                    <circle\n                      className=\"opacity-25\"\n                      cx=\"12\"\n                      cy=\"12\"\n                      r=\"10\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"4\"\n                      fill=\"none\"\n                    />\n                    <path\n                      className=\"opacity-75\"\n                      fill=\"currentColor\"\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                    />\n                  </svg>\n                  <span>Generating with AI...</span>\n                </div>\n              )}\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={handleClose}\n                disabled={isLoading}\n                className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80 disabled:opacity-50\"\n              >\n                Cancel\n              </button>\n              {!generatedTasks ? (\n                <button\n                  onClick={handleGenerate}\n                  disabled={!prompt.trim() || isLoading}\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50\"\n                  style={{\n                    background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\n                    color: '#ffffff',\n                  }}\n                >\n                  {isLoading ? 'Generating...' : 'Generate Tasks'}\n                </button>\n              ) : (\n                <button\n                  onClick={handleApplyTasks}\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all\"\n                  style={{\n                    background: 'linear-gradient(135deg, #10B981 0%, #059669 100%)',\n                    color: '#ffffff',\n                  }}\n                >\n                  Apply Tasks to Gantt\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  )\n}\n","/**\r\n * useKanbanState Hook\r\n * Optional hook for managing board state locally\r\n * Consumers can use this or manage state themselves\r\n * @module hooks/useKanbanState\r\n */\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { retryWithBackoff } from '../utils/retry'\r\nimport type { Board, BoardCallbacks, Card, Column } from '../types'\r\n\r\nexport interface UseKanbanStateOptions {\r\n  /** Initial board state */\r\n  initialBoard: Board\r\n  /** Persist changes (e.g., to localStorage, API) */\r\n  onPersist?: (board: Board) => void | Promise<void>\r\n  /** Enable optimistic updates (default: true) */\r\n  optimistic?: boolean\r\n}\r\n\r\nexport interface UseKanbanStateReturn {\r\n  /** Current board state */\r\n  board: Board\r\n  /** Callbacks for the KanbanBoard component */\r\n  callbacks: BoardCallbacks\r\n  /** Direct state setters (advanced usage) */\r\n  setBoard: React.Dispatch<React.SetStateAction<Board>>\r\n  /** Helper functions */\r\n  helpers: {\r\n    addCard: (card: Omit<Card, 'id'>) => string\r\n    addColumn: (column: Omit<Column, 'id' | 'cardIds'>) => string\r\n    deleteCard: (cardId: string) => void\r\n    deleteColumn: (columnId: string) => void\r\n    clearBoard: () => void\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for managing Kanban board state\r\n *\r\n * @example\r\n * ```tsx\r\n * const { board, callbacks } = useKanbanState({\r\n *   initialBoard: myBoard,\r\n *   onPersist: async (board) => {\r\n *     await api.updateBoard(board)\r\n *   }\r\n * })\r\n *\r\n * return <KanbanBoard board={board} callbacks={callbacks} />\r\n * ```\r\n */\r\nexport function useKanbanState({\r\n  initialBoard,\r\n  onPersist,\r\n}: UseKanbanStateOptions): UseKanbanStateReturn {\r\n  const [board, setBoard] = useState<Board>(initialBoard)\r\n\r\n  // Persist helper with retry logic\r\n  const persistBoard = useCallback(\r\n    (updatedBoard: Board) => {\r\n      if (onPersist) {\r\n        // Use retry logic for resilient persistence\r\n        retryWithBackoff(\r\n          () => Promise.resolve(onPersist(updatedBoard)),\r\n          {\r\n            maxAttempts: 3,\r\n            initialDelay: 1000,\r\n            onRetry: (error, attempt, delay) => {\r\n              console.warn(\r\n                `Retry attempt ${attempt} after ${delay}ms: ${error.message}`\r\n              )\r\n            },\r\n          }\r\n        ).then((result) => {\r\n          if (!result.success) {\r\n            console.error(\r\n              `Failed to persist board after ${result.attempts} attempts:`,\r\n              result.error\r\n            )\r\n            // TODO: Implement rollback or user notification\r\n          }\r\n        })\r\n      }\r\n    },\r\n    [onPersist]\r\n  )\r\n\r\n  // Move card to new position/column\r\n  const handleCardMove = useCallback(\r\n    async (cardId: string, targetColumnId: string, position: number) => {\r\n      setBoard((prev) => {\r\n        const card = prev.cards.find((c) => c.id === cardId)\r\n        if (!card) return prev\r\n\r\n        const sourceColumnId = card.columnId\r\n\r\n        // Update card\r\n        const updatedCard = {\r\n          ...card,\r\n          columnId: targetColumnId,\r\n          position,\r\n        }\r\n\r\n        // Update cards array\r\n        const updatedCards = prev.cards.map((c) =>\r\n          c.id === cardId ? updatedCard : c\r\n        )\r\n\r\n        // Update columns' cardIds\r\n        const updatedColumns = prev.columns.map((col) => {\r\n          if (col.id === sourceColumnId) {\r\n            // Remove from source column\r\n            return {\r\n              ...col,\r\n              cardIds: col.cardIds.filter((id) => id !== cardId),\r\n            }\r\n          } else if (col.id === targetColumnId) {\r\n            // Add to target column (maintain sort order)\r\n            const targetCards = updatedCards\r\n              .filter((c) => c.columnId === targetColumnId)\r\n              .sort((a, b) => a.position - b.position)\r\n            return {\r\n              ...col,\r\n              cardIds: targetCards.map((c) => c.id),\r\n            }\r\n          }\r\n          return col\r\n        })\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Update card properties\r\n  const handleCardUpdate = useCallback(\r\n    async (cardId: string, updates: Partial<Card>) => {\r\n      setBoard((prev) => {\r\n        const updatedCards = prev.cards.map((card) =>\r\n          card.id === cardId ? { ...card, ...updates } : card\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Create new card\r\n  const handleCardCreate = useCallback(\r\n    async (card: Omit<Card, 'id'>) => {\r\n      const newCardId = `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\n      setBoard((prev) => {\r\n        const newCard: Card = {\r\n          ...card,\r\n          id: newCardId,\r\n        }\r\n\r\n        // Add to column's cardIds\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === card.columnId\r\n            ? { ...col, cardIds: [...col.cardIds, newCardId] }\r\n            : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: [...prev.cards, newCard],\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Delete card\r\n  const handleCardDelete = useCallback(\r\n    async (cardId: string) => {\r\n      setBoard((prev) => {\r\n        const card = prev.cards.find((c) => c.id === cardId)\r\n        if (!card) return prev\r\n\r\n        // Remove from cards\r\n        const updatedCards = prev.cards.filter((c) => c.id !== cardId)\r\n\r\n        // Remove from column's cardIds\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === card.columnId\r\n            ? { ...col, cardIds: col.cardIds.filter((id) => id !== cardId) }\r\n            : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Create new column\r\n  const handleColumnCreate = useCallback(\r\n    async (column: Omit<Column, 'id' | 'cardIds'>) => {\r\n      const newColumnId = `col-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\n      setBoard((prev) => {\r\n        const newColumn: Column = {\r\n          ...column,\r\n          id: newColumnId,\r\n          cardIds: [],\r\n        }\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          columns: [...prev.columns, newColumn],\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Update column\r\n  const handleColumnUpdate = useCallback(\r\n    async (columnId: string, updates: Partial<Column>) => {\r\n      setBoard((prev) => {\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === columnId ? { ...col, ...updates } : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Delete column\r\n  const handleColumnDelete = useCallback(\r\n    async (columnId: string) => {\r\n      setBoard((prev) => {\r\n        // Remove all cards in this column\r\n        const updatedCards = prev.cards.filter((c) => c.columnId !== columnId)\r\n        const updatedColumns = prev.columns.filter((col) => col.id !== columnId)\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Helper function to add card (convenience)\r\n  const addCard = useCallback(\r\n    (card: Omit<Card, 'id'>): string => {\r\n      const newCardId = `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n      handleCardCreate(card)\r\n      return newCardId\r\n    },\r\n    [handleCardCreate]\r\n  )\r\n\r\n  // Helper function to add column (convenience)\r\n  const addColumn = useCallback(\r\n    (column: Omit<Column, 'id' | 'cardIds'>): string => {\r\n      const newColumnId = `col-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n      handleColumnCreate(column)\r\n      return newColumnId\r\n    },\r\n    [handleColumnCreate]\r\n  )\r\n\r\n  // Helper function to clear board (for AI-generated plans)\r\n  const clearBoard = useCallback(() => {\r\n    setBoard((prev) => {\r\n      const updatedBoard = {\r\n        ...prev,\r\n        cards: [],\r\n        columns: [],\r\n      }\r\n\r\n      persistBoard(updatedBoard)\r\n      return updatedBoard\r\n    })\r\n  }, [persistBoard])\r\n\r\n  const callbacks: BoardCallbacks = {\r\n    onCardMove: handleCardMove,\r\n    onCardUpdate: handleCardUpdate,\r\n    onCardCreate: handleCardCreate,\r\n    onCardDelete: handleCardDelete,\r\n    onColumnCreate: handleColumnCreate,\r\n    onColumnUpdate: handleColumnUpdate,\r\n    onColumnDelete: handleColumnDelete,\r\n  }\r\n\r\n  return {\r\n    board,\r\n    callbacks,\r\n    setBoard,\r\n    helpers: {\r\n      addCard,\r\n      addColumn,\r\n      deleteCard: handleCardDelete,\r\n      deleteColumn: handleColumnDelete,\r\n      clearBoard,\r\n    },\r\n  }\r\n}\r\n","import { useMemo } from 'react'\r\nimport { useKanbanState } from './useKanbanState'\r\nimport type { Board, BoardCallbacks, User, KanbanBoardProps } from '../types'\r\n\r\nexport interface UseBoardOptions {\r\n  initialData: Board\r\n  availableUsers?: User[]\r\n  onSave?: (board: Board) => void | Promise<void>\r\n  saveDelay?: number\r\n}\r\n\r\nexport interface UseBoardReturn {\r\n  props: Pick<KanbanBoardProps, 'board' | 'callbacks' | 'availableUsers'>\r\n  board: Board\r\n  callbacks: BoardCallbacks\r\n  utils: {\r\n    addCard: (columnId: string, title: string, data?: Partial<any>) => void\r\n    addColumn: (title: string, position?: number) => void\r\n    reset: () => void\r\n  }\r\n}\r\n\r\n/**\r\n * Simplified hook for Kanban board state management\r\n *\r\n * @example\r\n * ```tsx\r\n * import { KanbanBoard, useBoard } from '@libxai/board'\r\n *\r\n * function App() {\r\n *   const board = useBoard({\r\n *     initialData: myData,\r\n *     onSave: (board) => localStorage.setItem('board', JSON.stringify(board))\r\n *   })\r\n *\r\n *   return <KanbanBoard {...board.props} />\r\n * }\r\n * ```\r\n */\r\nexport function useBoard({\r\n  initialData,\r\n  availableUsers = [],\r\n  onSave,\r\n}: UseBoardOptions): UseBoardReturn {\r\n  const { board, callbacks, helpers } = useKanbanState({\r\n    initialBoard: initialData,\r\n    onPersist: onSave,\r\n  })\r\n\r\n  const utils = useMemo(\r\n    () => ({\r\n      addCard: (columnId: string, title: string, data: Partial<any> = {}) => {\r\n        helpers.addCard({\r\n          title,\r\n          columnId,\r\n          position: board.cards.filter((c) => c.columnId === columnId).length,\r\n          ...data,\r\n        })\r\n      },\r\n      addColumn: (title: string, position?: number) => {\r\n        // Calculate next position based on highest existing position + 1000\r\n        const maxPosition = board.columns.length > 0\r\n          ? Math.max(...board.columns.map(col => col.position))\r\n          : 0\r\n\r\n        helpers.addColumn({\r\n          title,\r\n          position: position ?? (maxPosition + 1000),\r\n        })\r\n      },\r\n      reset: helpers.clearBoard,\r\n    }),\r\n    [board.cards, board.columns, helpers]\r\n  )\r\n\r\n  const props = useMemo(\r\n    () => ({\r\n      board,\r\n      callbacks,\r\n      availableUsers,\r\n    }),\r\n    [board, callbacks, availableUsers]\r\n  )\r\n\r\n  return {\r\n    props,\r\n    board,\r\n    callbacks,\r\n    utils,\r\n  }\r\n}\r\n","import { useState, useMemo, useCallback } from 'react'\r\nimport type { Card, Priority } from '../types'\r\n\r\nexport type DateFilter = 'all' | 'overdue' | 'today' | 'this-week' | 'custom'\r\nexport type SortBy = 'created' | 'priority' | 'dueDate' | 'title' | 'estimate' | 'none'\r\nexport type SortOrder = 'asc' | 'desc'\r\n\r\nexport interface FilterState {\r\n  dateFilter: DateFilter\r\n  dateRange?: { start: Date; end: Date }\r\n  priorities: Priority[]\r\n  assignees: string[]\r\n  labels: string[]\r\n  columns: string[]\r\n  search: string\r\n}\r\n\r\nexport interface SortState {\r\n  by: SortBy\r\n  order: SortOrder\r\n}\r\n\r\nexport interface UseFiltersOptions {\r\n  initialFilters?: Partial<FilterState>\r\n  initialSort?: Partial<SortState>\r\n  currentUserId?: string\r\n}\r\n\r\nexport interface UseFiltersReturn {\r\n  filters: FilterState\r\n  sort: SortState\r\n  setFilters: (filters: Partial<FilterState>) => void\r\n  setSort: (sort: Partial<SortState>) => void\r\n  resetFilters: () => void\r\n  filterMyTasks: () => void\r\n  filterOverdue: () => void\r\n  filterHighPriority: () => void\r\n  applyFilters: (cards: Card[]) => Card[]\r\n  hasActiveFilters: boolean\r\n}\r\n\r\nconst DEFAULT_FILTERS: FilterState = {\r\n  dateFilter: 'all',\r\n  priorities: [],\r\n  assignees: [],\r\n  labels: [],\r\n  columns: [],\r\n  search: '',\r\n}\r\n\r\nconst DEFAULT_SORT: SortState = {\r\n  by: 'none',\r\n  order: 'asc',\r\n}\r\n\r\n/**\r\n * Hook for filtering and sorting board cards\r\n *\r\n * @example\r\n * ```tsx\r\n * const { filters, setFilters, applyFilters, filterMyTasks } = useFilters({\r\n *   currentUserId: 'user-1'\r\n * })\r\n *\r\n * const filteredCards = applyFilters(board.cards)\r\n * ```\r\n */\r\nexport function useFilters({\r\n  initialFilters = {},\r\n  initialSort = {},\r\n  currentUserId,\r\n}: UseFiltersOptions = {}): UseFiltersReturn {\r\n  const [filters, setFiltersState] = useState<FilterState>({\r\n    ...DEFAULT_FILTERS,\r\n    ...initialFilters,\r\n  })\r\n\r\n  const [sort, setSortState] = useState<SortState>({\r\n    ...DEFAULT_SORT,\r\n    ...initialSort,\r\n  })\r\n\r\n  const setFilters = useCallback((newFilters: Partial<FilterState>) => {\r\n    setFiltersState((prev) => ({ ...prev, ...newFilters }))\r\n  }, [])\r\n\r\n  const setSort = useCallback((newSort: Partial<SortState>) => {\r\n    setSortState((prev) => ({ ...prev, ...newSort }))\r\n  }, [])\r\n\r\n  const resetFilters = useCallback(() => {\r\n    setFiltersState(DEFAULT_FILTERS)\r\n    setSortState(DEFAULT_SORT)\r\n  }, [])\r\n\r\n  const filterMyTasks = useCallback(() => {\r\n    if (!currentUserId) return\r\n    // Reset all filters before applying \"My Tasks\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      assignees: [currentUserId]\r\n    })\r\n  }, [currentUserId])\r\n\r\n  const filterOverdue = useCallback(() => {\r\n    // Reset all filters before applying \"Overdue\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      dateFilter: 'overdue'\r\n    })\r\n  }, [])\r\n\r\n  const filterHighPriority = useCallback(() => {\r\n    // Reset all filters before applying \"High Priority\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      priorities: ['HIGH', 'URGENT']\r\n    })\r\n  }, [])\r\n\r\n  const hasActiveFilters = useMemo(() => {\r\n    return (\r\n      filters.dateFilter !== 'all' ||\r\n      filters.priorities.length > 0 ||\r\n      filters.assignees.length > 0 ||\r\n      filters.labels.length > 0 ||\r\n      filters.columns.length > 0 ||\r\n      filters.search !== '' ||\r\n      sort.by !== 'none'\r\n    )\r\n  }, [filters, sort])\r\n\r\n  const applyFilters = useCallback(\r\n    (cards: Card[]): Card[] => {\r\n      let filtered = [...cards]\r\n\r\n      if (filters.search) {\r\n        const query = filters.search.toLowerCase()\r\n        filtered = filtered.filter(\r\n          (card) =>\r\n            card.title.toLowerCase().includes(query) ||\r\n            card.description?.toLowerCase().includes(query)\r\n        )\r\n      }\r\n\r\n      if (filters.dateFilter !== 'all') {\r\n        const now = new Date()\r\n\r\n        // Get today's date string in local timezone (YYYY-MM-DD format)\r\n        // This matches what the date input produces when user selects a date\r\n        const year = now.getFullYear()\r\n        const month = String(now.getMonth() + 1).padStart(2, '0')\r\n        const day = String(now.getDate()).padStart(2, '0')\r\n        const todayString = `${year}-${month}-${day}`\r\n\r\n        filtered = filtered.filter((card) => {\r\n          if (!card.endDate && !card.dueDate) return false\r\n\r\n          const dueDate = card.endDate || card.dueDate\r\n          if (!dueDate) return false\r\n\r\n          // Convert date to YYYY-MM-DD string for comparison\r\n          let dueDateString: string\r\n          if (typeof dueDate === 'string') {\r\n            // Already a string, extract YYYY-MM-DD part\r\n            const parts = dueDate.split('T')\r\n            dueDateString = parts[0] || dueDate\r\n          } else {\r\n            // Date object - convert to YYYY-MM-DD in UTC (how date inputs store dates)\r\n            const y = dueDate.getUTCFullYear()\r\n            const m = String(dueDate.getUTCMonth() + 1).padStart(2, '0')\r\n            const d = String(dueDate.getUTCDate()).padStart(2, '0')\r\n            dueDateString = `${y}-${m}-${d}`\r\n          }\r\n\r\n          switch (filters.dateFilter) {\r\n            case 'overdue':\r\n              return dueDateString < todayString\r\n            case 'today':\r\n              return dueDateString === todayString\r\n            case 'this-week':\r\n              // This week means from today until 7 days from now\r\n              const todayDate = new Date(todayString + 'T00:00:00')\r\n              const cardDueDate = new Date(dueDateString + 'T00:00:00')\r\n              const weekFromNow = new Date(todayDate)\r\n              weekFromNow.setDate(weekFromNow.getDate() + 7)\r\n              return cardDueDate >= todayDate && cardDueDate <= weekFromNow\r\n            case 'custom':\r\n              if (filters.dateRange) {\r\n                const due = typeof dueDate === 'string' ? new Date(dueDate) : dueDate\r\n                return (\r\n                  due >= filters.dateRange.start && due <= filters.dateRange.end\r\n                )\r\n              }\r\n              return true\r\n            default:\r\n              return true\r\n          }\r\n        })\r\n      }\r\n\r\n      if (filters.priorities.length > 0) {\r\n        filtered = filtered.filter(\r\n          (card) => card.priority && filters.priorities.includes(card.priority)\r\n        )\r\n      }\r\n\r\n      if (filters.assignees.length > 0) {\r\n        filtered = filtered.filter((card) => {\r\n          const cardAssignees = card.assignedUserIds || (card.assigneeId ? [card.assigneeId] : [])\r\n          return cardAssignees.some((id) => filters.assignees.includes(id))\r\n        })\r\n      }\r\n\r\n      if (filters.labels.length > 0) {\r\n        filtered = filtered.filter((card) => {\r\n          return (\r\n            card.labels &&\r\n            card.labels.some((label) => filters.labels.includes(label))\r\n          )\r\n        })\r\n      }\r\n\r\n      if (filters.columns.length > 0) {\r\n        filtered = filtered.filter((card) =>\r\n          filters.columns.includes(card.columnId)\r\n        )\r\n      }\r\n\r\n      if (sort.by !== 'none') {\r\n        filtered.sort((a, b) => {\r\n          let comparison = 0\r\n\r\n          switch (sort.by) {\r\n            case 'created':\r\n              const aCreated = a.createdAt ? new Date(a.createdAt).getTime() : 0\r\n              const bCreated = b.createdAt ? new Date(b.createdAt).getTime() : 0\r\n              comparison = aCreated - bCreated\r\n              break\r\n\r\n            case 'priority':\r\n              const priorityOrder = { URGENT: 4, HIGH: 3, MEDIUM: 2, LOW: 1 }\r\n              const aPriority = priorityOrder[a.priority || 'LOW']\r\n              const bPriority = priorityOrder[b.priority || 'LOW']\r\n              comparison = aPriority - bPriority\r\n              break\r\n\r\n            case 'dueDate':\r\n              const aDue = a.endDate || a.dueDate\r\n              const bDue = b.endDate || b.dueDate\r\n              if (!aDue) return 1\r\n              if (!bDue) return -1\r\n              const aTime = typeof aDue === 'string' ? new Date(aDue).getTime() : aDue.getTime()\r\n              const bTime = typeof bDue === 'string' ? new Date(bDue).getTime() : bDue.getTime()\r\n              comparison = aTime - bTime\r\n              break\r\n\r\n            case 'title':\r\n              comparison = a.title.localeCompare(b.title)\r\n              break\r\n\r\n            case 'estimate':\r\n              const aEst = a.estimatedTime || 0\r\n              const bEst = b.estimatedTime || 0\r\n              comparison = aEst - bEst\r\n              break\r\n\r\n            default:\r\n              comparison = 0\r\n          }\r\n\r\n          return sort.order === 'asc' ? comparison : -comparison\r\n        })\r\n      }\r\n\r\n      return filtered\r\n    },\r\n    [filters, sort]\r\n  )\r\n\r\n  return {\r\n    filters,\r\n    sort,\r\n    setFilters,\r\n    setSort,\r\n    resetFilters,\r\n    filterMyTasks,\r\n    filterOverdue,\r\n    filterHighPriority,\r\n    applyFilters,\r\n    hasActiveFilters,\r\n  }\r\n}\r\n","/**\r\n * useAI Hook\r\n * Optional AI features using Vercel AI SDK\r\n * Requires 'ai' package to be installed\r\n * @module hooks/useAI\r\n */\r\n\r\nimport { useCallback, useState } from 'react'\r\nimport type {\r\n  AICallbacks,\r\n  Board,\r\n  Card,\r\n  GeneratedPlan,\r\n  AssigneeSuggestion,\r\n  Insight,\r\n} from '../types'\r\n\r\nexport interface UseAIOptions {\r\n  /** API key for AI provider */\r\n  apiKey?: string\r\n  /** Model to use */\r\n  model?: 'gpt-4' | 'gpt-4-turbo' | 'claude-3-5-sonnet' | string\r\n  /** Custom API endpoint */\r\n  endpoint?: string\r\n  /** Base URL */\r\n  baseURL?: string\r\n}\r\n\r\nexport interface UseAIReturn extends AICallbacks {\r\n  /** Is AI available (SDK installed + API key provided) */\r\n  isAvailable: boolean\r\n  /** Is AI currently processing */\r\n  isLoading: boolean\r\n  /** Last error */\r\n  error: Error | null\r\n}\r\n\r\n// Try to import AI SDK (optional peer dependency)\r\nlet generateObject: any\r\nlet generateText: any\r\n\r\nif (typeof window !== 'undefined') {\r\n  try {\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    const aiSDK = require('ai')\r\n    generateObject = aiSDK.generateObject\r\n    generateText = aiSDK.generateText\r\n  } catch {\r\n    // AI SDK not installed\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for AI features\r\n *\r\n * @example\r\n * ```tsx\r\n * const ai = useAI({\r\n *   apiKey: process.env.OPENAI_API_KEY,\r\n *   model: 'gpt-4-turbo'\r\n * })\r\n *\r\n * if (ai.isAvailable) {\r\n *   const plan = await ai.onGeneratePlan('Build a todo app')\r\n * }\r\n * ```\r\n */\r\nexport function useAI(options: UseAIOptions = {}): UseAIReturn {\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<Error | null>(null)\r\n\r\n  const isAvailable = Boolean(\r\n    generateObject && generateText && options.apiKey\r\n  )\r\n\r\n  // Generate plan from prompt\r\n  const onGeneratePlan = useCallback(\r\n    async (prompt: string): Promise<GeneratedPlan> => {\r\n      if (!isAvailable) {\r\n        throw new Error(\r\n          'AI features require the \"ai\" package and an API key. Install with: npm install ai'\r\n        )\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        // This is a placeholder - actual implementation would use generateObject\r\n        // with proper schema definition using Zod\r\n        console.log('Generating plan for:', prompt)\r\n\r\n        // Example structure (would use real AI SDK)\r\n        const result: GeneratedPlan = {\r\n          columns: [\r\n            {\r\n              title: 'To Do',\r\n              position: 1000,\r\n              cardIds: [],\r\n            },\r\n            {\r\n              title: 'In Progress',\r\n              position: 2000,\r\n              cardIds: [],\r\n            },\r\n            {\r\n              title: 'Done',\r\n              position: 3000,\r\n              cardIds: [],\r\n            },\r\n          ],\r\n          cards: [\r\n            {\r\n              title: 'Generated task from AI',\r\n              description: `Based on: ${prompt}`,\r\n              position: 1000,\r\n              columnId: 'temp-col-1',\r\n            },\r\n          ],\r\n          explanation: 'This is a sample plan. Real implementation would use AI SDK.',\r\n        }\r\n\r\n        return result\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to generate plan')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Suggest assignee for card\r\n  const onSuggestAssignee = useCallback(\r\n    async (card: Card): Promise<AssigneeSuggestion> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        // Placeholder implementation\r\n        console.log('Suggesting assignee for:', card.title)\r\n\r\n        return {\r\n          userId: 'user-123',\r\n          confidence: 0.85,\r\n          reasoning: 'Based on past performance and expertise',\r\n        }\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to suggest assignee')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Predict risks\r\n  const onPredictRisks = useCallback(\r\n    async (_boardState: Board): Promise<Insight[]> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Analyzing board for risks...')\r\n\r\n        // Placeholder insights\r\n        const insights: Insight[] = [\r\n          {\r\n            type: 'RISK_OVERLOAD',\r\n            severity: 'HIGH',\r\n            title: 'Column overload detected',\r\n            description: 'Too many cards in \"In Progress\"',\r\n            confidence: 0.9,\r\n            suggestedAction: 'Consider moving some cards back to \"To Do\"',\r\n          },\r\n        ]\r\n\r\n        return insights\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to predict risks')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Generate subtasks\r\n  const onGenerateSubtasks = useCallback(\r\n    async (card: Card): Promise<Omit<Card, 'id'>[]> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Generating subtasks for:', card.title)\r\n\r\n        return [\r\n          {\r\n            title: `Subtask 1 for: ${card.title}`,\r\n            position: card.position + 0.1,\r\n            columnId: card.columnId,\r\n          },\r\n          {\r\n            title: `Subtask 2 for: ${card.title}`,\r\n            position: card.position + 0.2,\r\n            columnId: card.columnId,\r\n          },\r\n        ]\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to generate subtasks')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Estimate effort\r\n  const onEstimateEffort = useCallback(\r\n    async (\r\n      card: Card\r\n    ): Promise<{ hours: number; confidence: number }> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Estimating effort for:', card.title)\r\n\r\n        return {\r\n          hours: 8,\r\n          confidence: 0.75,\r\n        }\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to estimate effort')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  return {\r\n    onGeneratePlan,\r\n    onSuggestAssignee,\r\n    onPredictRisks,\r\n    onGenerateSubtasks,\r\n    onEstimateEffort,\r\n    isAvailable,\r\n    isLoading,\r\n    error,\r\n  }\r\n}\r\n","/**\r\n * useSelectionState - React hook for selection state management\r\n * @module hooks/useSelectionState\r\n *\r\n * Replacement for Jotai's useAtom(selectionStateAtom)\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { selectionStore, type SelectionState } from '@libxai/core'\r\n\r\n/**\r\n * Hook return type\r\n */\r\nexport type UseSelectionStateReturn = [\r\n  state: SelectionState,\r\n  setState: (state: SelectionState) => void\r\n]\r\n\r\n/**\r\n * React hook for selection state\r\n *\r\n * Drop-in replacement for `useAtom(selectionStateAtom)`\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const [selectionState, setSelectionState] = useSelectionState()\r\n *\r\n *   const handleSelect = (cardId: string) => {\r\n *     setSelectionState({\r\n *       selectedCardIds: [cardId],\r\n *       lastSelectedCardId: cardId,\r\n *     })\r\n *   }\r\n *\r\n *   return (\r\n *     <div>\r\n *       {selectionState.selectedCardIds.length} cards selected\r\n *     </div>\r\n *   )\r\n * }\r\n * ```\r\n */\r\nexport function useSelectionState(): UseSelectionStateReturn {\r\n  const [state, setState] = useState<SelectionState>(() => selectionStore.getState())\r\n\r\n  useEffect(() => {\r\n    // Subscribe to store changes\r\n    const unsubscribe = selectionStore.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [])\r\n\r\n  const setSelectionState = useCallback((newState: SelectionState) => {\r\n    selectionStore.setState(newState)\r\n  }, [])\r\n\r\n  return [state, setSelectionState]\r\n}\r\n","/**\r\n * Multi-select hook for bulk operations\r\n * Supports keyboard modifiers (Cmd/Ctrl, Shift) for selection\r\n * @module hooks/useMultiSelect\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { useSelectionState } from './useSelectionState'\r\nimport type { Card } from '../types'\r\n\r\nexport interface UseMultiSelectReturn {\r\n  /** Selected card IDs */\r\n  selectedCardIds: string[]\r\n  /** Last selected card ID */\r\n  lastSelectedCardId: string | null\r\n  /** Check if a card is selected */\r\n  isCardSelected: (cardId: string) => boolean\r\n  /** Select a card */\r\n  selectCard: (cardId: string, event?: React.MouseEvent) => void\r\n  /** Deselect a card */\r\n  deselectCard: (cardId: string) => void\r\n  /** Clear all selections */\r\n  clearSelection: () => void\r\n  /** Select all cards */\r\n  selectAll: () => void\r\n  /** Toggle card selection */\r\n  toggleCard: (cardId: string) => void\r\n  /** Get selected cards */\r\n  getSelectedCards: () => Card[]\r\n}\r\n\r\nexport interface UseMultiSelectOptions {\r\n  /** Board cards (required for range selection and selectAll) */\r\n  cards: Card[]\r\n}\r\n\r\n/**\r\n * Hook for multi-select functionality\r\n *\r\n * @param options - Configuration options\r\n */\r\nexport function useMultiSelect(options: UseMultiSelectOptions): UseMultiSelectReturn {\r\n  const { cards } = options\r\n  const [selectionState, setSelectionState] = useSelectionState()\r\n\r\n  const isCardSelected = useCallback(\r\n    (cardId: string) => {\r\n      return selectionState.selectedCardIds.includes(cardId)\r\n    },\r\n    [selectionState.selectedCardIds]\r\n  )\r\n\r\n  const selectCard = useCallback(\r\n    (cardId: string, event?: React.MouseEvent) => {\r\n      if (!event) {\r\n        // Simple selection without modifiers\r\n        setSelectionState({\r\n          selectedCardIds: [cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n        return\r\n      }\r\n\r\n      const isCtrlOrCmd = event.ctrlKey || event.metaKey\r\n      const isShift = event.shiftKey\r\n\r\n      if (isCtrlOrCmd) {\r\n        // Cmd/Ctrl+Click: Toggle card selection\r\n        if (selectionState.selectedCardIds.includes(cardId)) {\r\n          setSelectionState({\r\n            selectedCardIds: selectionState.selectedCardIds.filter((id) => id !== cardId),\r\n            lastSelectedCardId: selectionState.lastSelectedCardId,\r\n          })\r\n        } else {\r\n          setSelectionState({\r\n            selectedCardIds: [...selectionState.selectedCardIds, cardId],\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        }\r\n      } else if (isShift && selectionState.lastSelectedCardId) {\r\n        // Shift+Click: Range selection within same column\r\n        const card = cards.find((c) => c.id === cardId)\r\n        const lastCard = cards.find((c) => c.id === selectionState.lastSelectedCardId)\r\n\r\n        if (card && lastCard && card.columnId === lastCard.columnId) {\r\n          // Get all cards in the column\r\n          const columnCards = cards\r\n            .filter((c) => c.columnId === card.columnId)\r\n            .sort((a, b) => a.position - b.position)\r\n\r\n          const startIndex = columnCards.findIndex((c) => c.id === selectionState.lastSelectedCardId)\r\n          const endIndex = columnCards.findIndex((c) => c.id === cardId)\r\n\r\n          const [minIndex, maxIndex] = startIndex < endIndex\r\n            ? [startIndex, endIndex]\r\n            : [endIndex, startIndex]\r\n\r\n          const rangeCardIds = columnCards\r\n            .slice(minIndex, maxIndex + 1)\r\n            .map((c) => c.id)\r\n\r\n          // Merge with existing selection\r\n          const newSelection = Array.from(\r\n            new Set([...selectionState.selectedCardIds, ...rangeCardIds])\r\n          )\r\n\r\n          setSelectionState({\r\n            selectedCardIds: newSelection,\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        } else {\r\n          // Different column or no last selection - treat as regular selection\r\n          setSelectionState({\r\n            selectedCardIds: [cardId],\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        }\r\n      } else {\r\n        // Regular click: Replace selection\r\n        setSelectionState({\r\n          selectedCardIds: [cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n      }\r\n    },\r\n    [cards, selectionState, setSelectionState]\r\n  )\r\n\r\n  const deselectCard = useCallback(\r\n    (cardId: string) => {\r\n      setSelectionState({\r\n        selectedCardIds: selectionState.selectedCardIds.filter((id) => id !== cardId),\r\n        lastSelectedCardId: selectionState.lastSelectedCardId,\r\n      })\r\n    },\r\n    [selectionState, setSelectionState]\r\n  )\r\n\r\n  const clearSelection = useCallback(() => {\r\n    setSelectionState({\r\n      selectedCardIds: [],\r\n      lastSelectedCardId: null,\r\n    })\r\n  }, [setSelectionState])\r\n\r\n  const selectAll = useCallback(() => {\r\n    setSelectionState({\r\n      selectedCardIds: cards.map((card) => card.id),\r\n      lastSelectedCardId: cards[cards.length - 1]?.id || null,\r\n    })\r\n  }, [cards, setSelectionState])\r\n\r\n  const toggleCard = useCallback(\r\n    (cardId: string) => {\r\n      if (selectionState.selectedCardIds.includes(cardId)) {\r\n        deselectCard(cardId)\r\n      } else {\r\n        setSelectionState({\r\n          selectedCardIds: [...selectionState.selectedCardIds, cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n      }\r\n    },\r\n    [selectionState, deselectCard, setSelectionState]\r\n  )\r\n\r\n  const getSelectedCards = useCallback(() => {\r\n    return cards.filter((card) =>\r\n      selectionState.selectedCardIds.includes(card.id)\r\n    )\r\n  }, [cards, selectionState.selectedCardIds])\r\n\r\n  return {\r\n    selectedCardIds: selectionState.selectedCardIds,\r\n    lastSelectedCardId: selectionState.lastSelectedCardId,\r\n    isCardSelected,\r\n    selectCard,\r\n    deselectCard,\r\n    clearSelection,\r\n    selectAll,\r\n    toggleCard,\r\n    getSelectedCards,\r\n  }\r\n}\r\n","/**\r\n * Card Stack Types\r\n * Smart grouping of related cards within columns\r\n * @module types/card-stack\r\n */\r\n\r\nexport type StackingStrategy = 'manual' | 'ai-similarity' | 'labels' | 'assignee' | 'priority' | 'epic'\r\n\r\nexport interface CardStack {\r\n  /** Unique stack identifier */\r\n  id: string\r\n  /** Display title for the stack */\r\n  title: string\r\n  /** Cards contained in this stack */\r\n  cardIds: string[]\r\n  /** Column this stack belongs to */\r\n  columnId: string\r\n  /** How this stack was created */\r\n  strategy: StackingStrategy\r\n  /** Visual color for the stack */\r\n  color?: string\r\n  /** Whether stack is expanded or collapsed */\r\n  isExpanded: boolean\r\n  /** Position within the column */\r\n  position: number\r\n  /** Timestamp when stack was created */\r\n  createdAt: Date\r\n  /** AI confidence score (0-1) for auto-stacked groups */\r\n  confidence?: number\r\n}\r\n\r\nexport interface StackingConfig {\r\n  /** Enable automatic AI-powered stacking */\r\n  enableAutoStacking: boolean\r\n  /** Minimum confidence threshold for auto-stacking (0-1) */\r\n  autoStackConfidenceThreshold: number\r\n  /** Minimum cards required to form a stack */\r\n  minCardsPerStack: number\r\n  /** Enable manual drag-to-stack */\r\n  enableManualStacking: boolean\r\n  /** Show stack summaries (card count, assignees, etc.) */\r\n  showStackSummaries: boolean\r\n  /** Animation duration in ms */\r\n  animationDuration: number\r\n}\r\n\r\nexport interface StackSuggestion {\r\n  /** Suggested stack configuration */\r\n  stack: Omit<CardStack, 'id' | 'createdAt' | 'isExpanded' | 'position'>\r\n  /** Reason for suggestion */\r\n  reason: string\r\n  /** Confidence score (0-1) */\r\n  confidence: number\r\n}\r\n\r\nexport const DEFAULT_STACKING_CONFIG: StackingConfig = {\r\n  enableAutoStacking: true,\r\n  autoStackConfidenceThreshold: 0.7,\r\n  minCardsPerStack: 2,\r\n  enableManualStacking: true,\r\n  showStackSummaries: true,\r\n  animationDuration: 200,\r\n}\r\n","/**\r\n * useCardStacking Hook\r\n * Manages card stack state and AI-powered grouping suggestions\r\n * @module hooks/useCardStacking\r\n */\r\n\r\nimport { useState, useCallback, useMemo, useEffect } from 'react'\r\nimport type { Card } from '../types'\r\nimport type { CardStack, StackingConfig, StackSuggestion, StackingStrategy } from '../types/card-stack'\r\nimport { DEFAULT_STACKING_CONFIG } from '../types/card-stack'\r\n\r\nexport interface UseCardStackingOptions {\r\n  /** Board cards */\r\n  cards: Card[]\r\n  /** Configuration */\r\n  config?: Partial<StackingConfig>\r\n  /** AI service for similarity detection (optional) */\r\n  aiService?: {\r\n    findSimilar: (card: Card, candidates: Card[]) => Promise<{ card: Card; similarity: number }[]>\r\n  }\r\n}\r\n\r\nexport interface UseCardStackingResult {\r\n  /** All card stacks */\r\n  stacks: CardStack[]\r\n  /** Create a new stack */\r\n  createStack: (\r\n    title: string,\r\n    cardIds: string[],\r\n    columnId: string,\r\n    strategy: StackingStrategy,\r\n    color?: string\r\n  ) => void\r\n  /** Delete a stack */\r\n  deleteStack: (stackId: string) => void\r\n  /** Toggle stack expand/collapse */\r\n  toggleStack: (stackId: string) => void\r\n  /** Add card to stack */\r\n  addToStack: (stackId: string, cardId: string) => void\r\n  /** Remove card from stack */\r\n  removeFromStack: (stackId: string, cardId: string) => void\r\n  /** Get stacks for a specific column */\r\n  getStacksForColumn: (columnId: string) => CardStack[]\r\n  /** Get AI-powered stack suggestions */\r\n  getSuggestions: (columnId: string) => Promise<StackSuggestion[]>\r\n  /** Apply a suggestion */\r\n  applySuggestion: (suggestion: StackSuggestion) => void\r\n  /** Configuration */\r\n  config: StackingConfig\r\n}\r\n\r\n/**\r\n * Hook for managing card stacking\r\n */\r\nexport function useCardStacking(options: UseCardStackingOptions): UseCardStackingResult {\r\n  const { cards, config: userConfig, aiService } = options\r\n\r\n  // Merge config with defaults\r\n  const config = useMemo<StackingConfig>(\r\n    () => ({\r\n      ...DEFAULT_STACKING_CONFIG,\r\n      ...userConfig,\r\n    }),\r\n    [userConfig]\r\n  )\r\n\r\n  // Stack state\r\n  const [stacks, setStacks] = useState<CardStack[]>([])\r\n\r\n  // Create stack\r\n  const createStack = useCallback(\r\n    (title: string, cardIds: string[], columnId: string, strategy: StackingStrategy, color?: string) => {\r\n      if (cardIds.length < config.minCardsPerStack) {\r\n        console.warn(`Cannot create stack: minimum ${config.minCardsPerStack} cards required`)\r\n        return\r\n      }\r\n\r\n      const newStack: CardStack = {\r\n        id: `stack-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n        title,\r\n        cardIds,\r\n        columnId,\r\n        strategy,\r\n        color,\r\n        isExpanded: true,\r\n        position: stacks.filter((s) => s.columnId === columnId).length,\r\n        createdAt: new Date(),\r\n      }\r\n\r\n      setStacks((prev) => [...prev, newStack])\r\n    },\r\n    [config.minCardsPerStack, stacks]\r\n  )\r\n\r\n  // Delete stack\r\n  const deleteStack = useCallback((stackId: string) => {\r\n    setStacks((prev) => prev.filter((s) => s.id !== stackId))\r\n  }, [])\r\n\r\n  // Toggle expand/collapse\r\n  const toggleStack = useCallback((stackId: string) => {\r\n    setStacks((prev) =>\r\n      prev.map((s) => (s.id === stackId ? { ...s, isExpanded: !s.isExpanded } : s))\r\n    )\r\n  }, [])\r\n\r\n  // Add card to stack\r\n  const addToStack = useCallback((stackId: string, cardId: string) => {\r\n    setStacks((prev) =>\r\n      prev.map((s) => {\r\n        if (s.id === stackId && !s.cardIds.includes(cardId)) {\r\n          return { ...s, cardIds: [...s.cardIds, cardId] }\r\n        }\r\n        return s\r\n      })\r\n    )\r\n  }, [])\r\n\r\n  // Remove card from stack\r\n  const removeFromStack = useCallback(\r\n    (stackId: string, cardId: string) => {\r\n      setStacks((prev) =>\r\n        prev\r\n          .map((s) => {\r\n            if (s.id === stackId) {\r\n              const newCardIds = s.cardIds.filter((id) => id !== cardId)\r\n              // If stack has too few cards, delete it\r\n              if (newCardIds.length < config.minCardsPerStack) {\r\n                return null\r\n              }\r\n              return { ...s, cardIds: newCardIds }\r\n            }\r\n            return s\r\n          })\r\n          .filter((s): s is CardStack => s !== null)\r\n      )\r\n    },\r\n    [config.minCardsPerStack]\r\n  )\r\n\r\n  // Get stacks for column\r\n  const getStacksForColumn = useCallback(\r\n    (columnId: string) => {\r\n      return stacks.filter((s) => s.columnId === columnId).sort((a, b) => a.position - b.position)\r\n    },\r\n    [stacks]\r\n  )\r\n\r\n  // Generate AI suggestions\r\n  const getSuggestions = useCallback(\r\n    async (columnId: string): Promise<StackSuggestion[]> => {\r\n      const columnCards = cards.filter((c) => c.columnId === columnId)\r\n\r\n      if (columnCards.length < config.minCardsPerStack * 2) {\r\n        return []\r\n      }\r\n\r\n      const suggestions: StackSuggestion[] = []\r\n\r\n      // 1. Group by labels\r\n      const byLabels = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.labels && card.labels.length > 0) {\r\n          card.labels.forEach((label) => {\r\n            if (!byLabels.has(label)) {\r\n              byLabels.set(label, [])\r\n            }\r\n            byLabels.get(label)!.push(card)\r\n          })\r\n        }\r\n      })\r\n\r\n      byLabels.forEach((cards, label) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          suggestions.push({\r\n            stack: {\r\n              title: ` ${label}`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'labels',\r\n              color: '#3b82f6',\r\n            },\r\n            reason: `${cards.length} cards with label \"${label}\"`,\r\n            confidence: 0.85,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 2. Group by assignee\r\n      const byAssignee = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.assignedUserIds && card.assignedUserIds.length > 0) {\r\n          card.assignedUserIds.forEach((userId) => {\r\n            if (!byAssignee.has(userId)) {\r\n              byAssignee.set(userId, [])\r\n            }\r\n            byAssignee.get(userId)!.push(card)\r\n          })\r\n        }\r\n      })\r\n\r\n      byAssignee.forEach((cards, userId) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          suggestions.push({\r\n            stack: {\r\n              title: ` Assigned to user-${userId.slice(-4)}`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'assignee',\r\n              color: '#8b5cf6',\r\n            },\r\n            reason: `${cards.length} cards assigned to the same user`,\r\n            confidence: 0.8,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 3. Group by priority\r\n      const byPriority = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.priority) {\r\n          if (!byPriority.has(card.priority)) {\r\n            byPriority.set(card.priority, [])\r\n          }\r\n          byPriority.get(card.priority)!.push(card)\r\n        }\r\n      })\r\n\r\n      byPriority.forEach((cards, priority) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          const priorityEmoji = {\r\n            low: '',\r\n            medium: '',\r\n            high: '',\r\n            urgent: '',\r\n          }[priority.toLowerCase()] || ''\r\n\r\n          suggestions.push({\r\n            stack: {\r\n              title: `${priorityEmoji} ${priority} Priority`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'priority',\r\n              color: priority === 'high' || priority === 'urgent' ? '#ef4444' : '#10b981',\r\n            },\r\n            reason: `${cards.length} cards with ${priority} priority`,\r\n            confidence: 0.75,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 4. AI-powered similarity (if available)\r\n      if (aiService && config.enableAutoStacking) {\r\n        // Find similar cards using AI\r\n        for (const card of columnCards) {\r\n          const similar = await aiService.findSimilar(card, columnCards)\r\n          const highSimilarity = similar.filter(\r\n            (s) => s.similarity >= config.autoStackConfidenceThreshold\r\n          )\r\n\r\n          if (highSimilarity.length >= config.minCardsPerStack - 1) {\r\n            const cardIds = [card.id, ...highSimilarity.map((s) => s.card.id)]\r\n            const avgConfidence =\r\n              highSimilarity.reduce((sum, s) => sum + s.similarity, 0) / highSimilarity.length\r\n\r\n            suggestions.push({\r\n              stack: {\r\n                title: ` Similar to \"${card.title.substring(0, 30)}${card.title.length > 30 ? '...' : ''}\"`,\r\n                cardIds,\r\n                columnId,\r\n                strategy: 'ai-similarity',\r\n                color: '#f59e0b',\r\n              },\r\n              reason: `AI detected ${highSimilarity.length + 1} similar tasks`,\r\n              confidence: avgConfidence,\r\n            })\r\n          }\r\n        }\r\n      }\r\n\r\n      // Filter by confidence threshold and remove duplicates\r\n      return suggestions\r\n        .filter((s) => s.confidence >= config.autoStackConfidenceThreshold)\r\n        .sort((a, b) => b.confidence - a.confidence)\r\n        .slice(0, 5) // Top 5 suggestions\r\n    },\r\n    [cards, config, aiService]\r\n  )\r\n\r\n  // Apply suggestion\r\n  const applySuggestion = useCallback(\r\n    (suggestion: StackSuggestion) => {\r\n      createStack(\r\n        suggestion.stack.title,\r\n        suggestion.stack.cardIds,\r\n        suggestion.stack.columnId,\r\n        suggestion.stack.strategy,\r\n        suggestion.stack.color\r\n      )\r\n    },\r\n    [createStack]\r\n  )\r\n\r\n  // Auto-stack on mount if enabled\r\n  useEffect(() => {\r\n    if (config.enableAutoStacking && stacks.length === 0) {\r\n      // Auto-stack each column\r\n      const columnIds = new Set(cards.map((c) => c.columnId))\r\n      columnIds.forEach(async (columnId) => {\r\n        const suggestions = await getSuggestions(columnId)\r\n        // Auto-apply highest confidence suggestion\r\n        const topSuggestion = suggestions[0]\r\n        if (suggestions.length > 0 && topSuggestion && topSuggestion.confidence >= 0.9) {\r\n          applySuggestion(topSuggestion)\r\n        }\r\n      })\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []) // Only on mount\r\n\r\n  return {\r\n    stacks,\r\n    createStack,\r\n    deleteStack,\r\n    toggleStack,\r\n    addToStack,\r\n    removeFromStack,\r\n    getStacksForColumn,\r\n    getSuggestions,\r\n    applySuggestion,\r\n    config,\r\n  }\r\n}\r\n","/**\r\n * BoardProvider - React Context Provider for BoardStore\r\n * @module adapters/react\r\n */\r\n\r\nimport React, { createContext, useContext, useEffect, useRef } from 'react'\r\nimport { BoardStore, type BoardState, type CardData, type ColumnData, type BoardData } from '@libxai/core'\r\n\r\n/**\r\n * Board Context\r\n */\r\ninterface BoardContextValue {\r\n  store: BoardStore\r\n}\r\n\r\nconst BoardContext = createContext<BoardContextValue | null>(null)\r\n\r\n/**\r\n * Board Provider Props\r\n */\r\nexport interface BoardProviderProps {\r\n  children: React.ReactNode\r\n  initialData?: {\r\n    board?: BoardData\r\n    columns?: ColumnData[]\r\n    cards?: CardData[]\r\n  }\r\n  onStateChange?: (state: BoardState) => void\r\n}\r\n\r\n/**\r\n * BoardProvider component\r\n *\r\n * Wraps your app with BoardStore context\r\n *\r\n * @example\r\n * ```tsx\r\n * <BoardProvider initialData={{ columns: [], cards: [] }}>\r\n *   <Board />\r\n * </BoardProvider>\r\n * ```\r\n */\r\nexport function BoardProvider({ children, initialData, onStateChange }: BoardProviderProps) {\r\n  // Create store only once\r\n  const storeRef = useRef<BoardStore>()\r\n\r\n  if (!storeRef.current) {\r\n    // Initialize store\r\n    const columnsMap = new Map()\r\n    const cardsMap = new Map()\r\n\r\n    // Load initial columns\r\n    initialData?.columns?.forEach(colData => {\r\n      const { Column } = require('@libxai/core')\r\n      columnsMap.set(colData.id, new Column(colData))\r\n    })\r\n\r\n    // Load initial cards\r\n    initialData?.cards?.forEach(cardData => {\r\n      const { Card } = require('@libxai/core')\r\n      cardsMap.set(cardData.id, new Card(cardData))\r\n    })\r\n\r\n    // Load initial board\r\n    let board = null\r\n    if (initialData?.board) {\r\n      const { Board } = require('@libxai/core')\r\n      board = new Board(initialData.board)\r\n    }\r\n\r\n    storeRef.current = new BoardStore({\r\n      board,\r\n      columns: columnsMap,\r\n      cards: cardsMap,\r\n    })\r\n  }\r\n\r\n  const store = storeRef.current\r\n\r\n  // Subscribe to state changes\r\n  useEffect(() => {\r\n    if (!onStateChange) return\r\n\r\n    return store.subscribeAll((_event) => {\r\n      onStateChange(store.getState())\r\n    })\r\n  }, [store, onStateChange])\r\n\r\n  return (\r\n    <BoardContext.Provider value={{ store }}>\r\n      {children}\r\n    </BoardContext.Provider>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access BoardStore from context\r\n *\r\n * @throws Error if used outside BoardProvider\r\n */\r\nexport function useBoardStore(): BoardStore {\r\n  const context = useContext(BoardContext)\r\n\r\n  if (!context) {\r\n    throw new Error('useBoardStore must be used within BoardProvider')\r\n  }\r\n\r\n  return context.store\r\n}\r\n","/**\r\n * useBoard - Main hook for board operations\r\n * @module adapters/react\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { useBoardStore } from './BoardProvider'\r\nimport type { Board, Column, Card, CardData, ColumnData } from '@libxai/core'\r\n\r\n/**\r\n * Return type for useBoard hook\r\n */\r\nexport interface UseBoardReturn {\r\n  // State\r\n  board: Board | null\r\n  columns: Column[]\r\n  cards: Card[]\r\n\r\n  // Board operations\r\n  updateBoard: (changes: Partial<Omit<import('@libxai/core').BoardData, 'id' | 'createdAt'>>) => void\r\n\r\n  // Column operations\r\n  addColumn: (columnData: Omit<ColumnData, 'createdAt' | 'updatedAt'>) => void\r\n  updateColumn: (columnId: string, changes: Partial<Omit<ColumnData, 'id' | 'createdAt'>>) => void\r\n  deleteColumn: (columnId: string) => void\r\n  getColumn: (columnId: string) => Column | undefined\r\n\r\n  // Card operations\r\n  addCard: (cardData: Omit<CardData, 'createdAt' | 'updatedAt'>) => void\r\n  updateCard: (cardId: string, changes: Partial<Omit<CardData, 'id' | 'createdAt'>>) => void\r\n  deleteCard: (cardId: string) => void\r\n  moveCard: (cardId: string, toColumnId: string, newPosition: number) => void\r\n  getCard: (cardId: string) => Card | undefined\r\n  getCardsByColumn: (columnId: string) => Card[]\r\n}\r\n\r\n/**\r\n * Main hook for board operations\r\n *\r\n * Provides reactive state and methods for managing board, columns, and cards\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyBoard() {\r\n *   const { board, columns, cards, addCard, moveCard } = useBoard()\r\n *\r\n *   return (\r\n *     <div>\r\n *       {columns.map(column => (\r\n *         <div key={column.id}>\r\n *           <h2>{column.title}</h2>\r\n *           {cards\r\n *             .filter(card => card.columnId === column.id)\r\n *             .map(card => (\r\n *               <div key={card.id}>{card.title}</div>\r\n *             ))}\r\n *         </div>\r\n *       ))}\r\n *     </div>\r\n *   )\r\n * }\r\n * ```\r\n */\r\nexport function useBoard(): UseBoardReturn {\r\n  const store = useBoardStore()\r\n\r\n  // Reactive state\r\n  const [board, setBoard] = useState<Board | null>(store.getBoard())\r\n  const [columns, setColumns] = useState<Column[]>(store.getAllColumns())\r\n  const [cards, setCards] = useState<Card[]>(store.getAllCards())\r\n\r\n  // Subscribe to store changes\r\n  useEffect(() => {\r\n    const unsubscribe = store.subscribeAll(() => {\r\n      setBoard(store.getBoard())\r\n      setColumns(store.getAllColumns())\r\n      setCards(store.getAllCards())\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [store])\r\n\r\n  // Board operations\r\n  const updateBoard = useCallback(\r\n    (changes: Partial<Omit<import('@libxai/core').BoardData, 'id' | 'createdAt'>>) => {\r\n      store.updateBoard(changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  // Column operations\r\n  const addColumn = useCallback(\r\n    (columnData: Omit<ColumnData, 'createdAt' | 'updatedAt'>) => {\r\n      store.addColumn(columnData)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const updateColumn = useCallback(\r\n    (columnId: string, changes: Partial<Omit<ColumnData, 'id' | 'createdAt'>>) => {\r\n      store.updateColumn(columnId, changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const deleteColumn = useCallback(\r\n    (columnId: string) => {\r\n      store.deleteColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getColumn = useCallback(\r\n    (columnId: string) => {\r\n      return store.getColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  // Card operations\r\n  const addCard = useCallback(\r\n    (cardData: Omit<CardData, 'createdAt' | 'updatedAt'>) => {\r\n      store.addCard(cardData)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const updateCard = useCallback(\r\n    (cardId: string, changes: Partial<Omit<CardData, 'id' | 'createdAt'>>) => {\r\n      store.updateCard(cardId, changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const deleteCard = useCallback(\r\n    (cardId: string) => {\r\n      store.deleteCard(cardId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const moveCard = useCallback(\r\n    (cardId: string, toColumnId: string, newPosition: number) => {\r\n      store.moveCard(cardId, toColumnId, newPosition)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getCard = useCallback(\r\n    (cardId: string) => {\r\n      return store.getCard(cardId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getCardsByColumn = useCallback(\r\n    (columnId: string) => {\r\n      return store.getCardsByColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  return {\r\n    // State\r\n    board,\r\n    columns,\r\n    cards,\r\n\r\n    // Board operations\r\n    updateBoard,\r\n\r\n    // Column operations\r\n    addColumn,\r\n    updateColumn,\r\n    deleteColumn,\r\n    getColumn,\r\n\r\n    // Card operations\r\n    addCard,\r\n    updateCard,\r\n    deleteCard,\r\n    moveCard,\r\n    getCard,\r\n    getCardsByColumn,\r\n  }\r\n}\r\n","/**\r\n * useFilteredCards - Hook for filtering cards with memoization\r\n * @module adapters/react\r\n */\r\n\r\nimport { useMemo } from 'react'\r\nimport { useBoard } from './useBoard'\r\nimport type { Card, Priority, CardStatus } from '@libxai/core'\r\n\r\n/**\r\n * Filter options for cards\r\n */\r\nexport interface CardFilters {\r\n  searchQuery?: string\r\n  priorities?: Priority[]\r\n  statuses?: CardStatus[]\r\n  assignedUserIds?: string[]\r\n  labels?: string[]\r\n  columnIds?: string[]\r\n  isOverdue?: boolean\r\n}\r\n\r\n/**\r\n * Hook for filtered and sorted cards\r\n *\r\n * Automatically memoizes results for performance\r\n *\r\n * @param filters - Filter criteria\r\n * @returns Filtered cards array\r\n *\r\n * @example\r\n * ```tsx\r\n * function CardList() {\r\n *   const filteredCards = useFilteredCards({\r\n *     priorities: ['HIGH', 'URGENT'],\r\n *     isOverdue: true\r\n *   })\r\n *\r\n *   return <div>{filteredCards.length} urgent overdue tasks</div>\r\n * }\r\n * ```\r\n */\r\nexport function useFilteredCards(filters?: CardFilters): Card[] {\r\n  const { cards } = useBoard()\r\n\r\n  return useMemo(() => {\r\n    if (!filters) return cards\r\n\r\n    return cards.filter(card => {\r\n      // Search query (title + description)\r\n      if (filters.searchQuery) {\r\n        const query = filters.searchQuery.toLowerCase()\r\n        const matchesTitle = card.title.toLowerCase().includes(query)\r\n        const matchesDesc = card.description?.toLowerCase().includes(query)\r\n        if (!matchesTitle && !matchesDesc) return false\r\n      }\r\n\r\n      // Priority filter\r\n      if (filters.priorities && filters.priorities.length > 0) {\r\n        if (!card.priority || !filters.priorities.includes(card.priority)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Status filter\r\n      if (filters.statuses && filters.statuses.length > 0) {\r\n        if (!card.status || !filters.statuses.includes(card.status)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Assigned users filter\r\n      if (filters.assignedUserIds && filters.assignedUserIds.length > 0) {\r\n        const hasAssignedUser = filters.assignedUserIds.some(userId =>\r\n          card.isAssignedTo(userId)\r\n        )\r\n        if (!hasAssignedUser) return false\r\n      }\r\n\r\n      // Labels filter\r\n      if (filters.labels && filters.labels.length > 0) {\r\n        const hasLabel = filters.labels.some(label => card.hasLabel(label))\r\n        if (!hasLabel) return false\r\n      }\r\n\r\n      // Column filter\r\n      if (filters.columnIds && filters.columnIds.length > 0) {\r\n        if (!filters.columnIds.includes(card.columnId)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Overdue filter\r\n      if (filters.isOverdue !== undefined) {\r\n        if (filters.isOverdue !== card.isOverdue()) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n  }, [cards, filters])\r\n}\r\n\r\n/**\r\n * Hook for sorted cards\r\n *\r\n * @param sortBy - Sort field\r\n * @param sortOrder - Sort order ('asc' | 'desc')\r\n * @returns Sorted cards array\r\n */\r\nexport function useSortedCards(\r\n  sortBy: 'title' | 'priority' | 'createdAt' | 'updatedAt' | 'position' = 'position',\r\n  sortOrder: 'asc' | 'desc' = 'asc'\r\n): Card[] {\r\n  const { cards } = useBoard()\r\n\r\n  return useMemo(() => {\r\n    const sorted = [...cards].sort((a, b) => {\r\n      let comparison = 0\r\n\r\n      switch (sortBy) {\r\n        case 'title':\r\n          comparison = a.title.localeCompare(b.title)\r\n          break\r\n        case 'priority': {\r\n          const priorityOrder = { URGENT: 4, HIGH: 3, MEDIUM: 2, LOW: 1 }\r\n          const aPriority = a.priority ? priorityOrder[a.priority] : 0\r\n          const bPriority = b.priority ? priorityOrder[b.priority] : 0\r\n          comparison = aPriority - bPriority\r\n          break\r\n        }\r\n        case 'createdAt':\r\n          comparison = a.createdAt.getTime() - b.createdAt.getTime()\r\n          break\r\n        case 'updatedAt':\r\n          comparison = a.updatedAt.getTime() - b.updatedAt.getTime()\r\n          break\r\n        case 'position':\r\n          comparison = a.position - b.position\r\n          break\r\n      }\r\n\r\n      return sortOrder === 'asc' ? comparison : -comparison\r\n    })\r\n\r\n    return sorted\r\n  }, [cards, sortBy, sortOrder])\r\n}\r\n","/**\r\n * Plugin Manager Implementation\r\n * Manages plugin lifecycle and execution\r\n * @module plugins/PluginManager\r\n */\r\n\r\nimport type { Plugin, PluginContext, IPluginManager } from './types'\r\nimport { logger } from '../utils/logger'\r\n\r\nexport class PluginManager implements IPluginManager {\r\n  private plugins: Map<string, Plugin> = new Map()\r\n  private enabled: Set<string> = new Set()\r\n  private config: Map<string, Record<string, any>> = new Map()\r\n  private context: PluginContext | null = null\r\n  private pluginLogger = logger.child('PluginManager')\r\n\r\n  /**\r\n   * Set plugin context (board state, callbacks, etc.)\r\n   */\r\n  setContext(context: PluginContext): void {\r\n    this.context = context\r\n  }\r\n\r\n  /**\r\n   * Register a plugin\r\n   */\r\n  register(plugin: Plugin): void {\r\n    // Validate plugin\r\n    if (!plugin.id || !plugin.name || !plugin.version) {\r\n      throw new Error('Plugin must have id, name, and version')\r\n    }\r\n\r\n    if (this.plugins.has(plugin.id)) {\r\n      this.pluginLogger.warn(`Plugin ${plugin.id} is already registered, overwriting...`)\r\n    }\r\n\r\n    // Check dependencies\r\n    if (plugin.dependencies) {\r\n      for (const depId of plugin.dependencies) {\r\n        if (!this.plugins.has(depId)) {\r\n          throw new Error(`Plugin ${plugin.id} depends on ${depId} which is not registered`)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Store plugin\r\n    this.plugins.set(plugin.id, plugin)\r\n\r\n    // Set default config\r\n    if (plugin.defaultConfig) {\r\n      this.config.set(plugin.id, { ...plugin.defaultConfig })\r\n    }\r\n\r\n    // Enable by default\r\n    this.enabled.add(plugin.id)\r\n\r\n    this.pluginLogger.info(`Plugin registered: ${plugin.name} v${plugin.version}`)\r\n\r\n    // Call onInit hook\r\n    if (plugin.onInit && this.context) {\r\n      Promise.resolve(plugin.onInit(this.context)).catch((error) => {\r\n        this.pluginLogger.error(`Failed to initialize plugin ${plugin.id}`, error, {\r\n          plugin: plugin.id,\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unregister a plugin\r\n   */\r\n  unregister(pluginId: string): void {\r\n    const plugin = this.plugins.get(pluginId)\r\n\r\n    if (!plugin) {\r\n      this.pluginLogger.warn(`Plugin ${pluginId} is not registered`)\r\n      return\r\n    }\r\n\r\n    // Call onDestroy hook\r\n    if (plugin.onDestroy) {\r\n      Promise.resolve(plugin.onDestroy()).catch((error) => {\r\n        this.pluginLogger.error(`Failed to destroy plugin ${pluginId}`, error)\r\n      })\r\n    }\r\n\r\n    this.plugins.delete(pluginId)\r\n    this.enabled.delete(pluginId)\r\n    this.config.delete(pluginId)\r\n\r\n    this.pluginLogger.info(`Plugin unregistered: ${plugin.name}`)\r\n  }\r\n\r\n  /**\r\n   * Get registered plugin\r\n   */\r\n  getPlugin(pluginId: string): Plugin | undefined {\r\n    return this.plugins.get(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Get all registered plugins\r\n   */\r\n  getPlugins(): Plugin[] {\r\n    return Array.from(this.plugins.values())\r\n  }\r\n\r\n  /**\r\n   * Check if plugin is registered\r\n   */\r\n  hasPlugin(pluginId: string): boolean {\r\n    return this.plugins.has(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Enable/disable plugin\r\n   */\r\n  setEnabled(pluginId: string, enabled: boolean): void {\r\n    if (!this.plugins.has(pluginId)) {\r\n      throw new Error(`Plugin ${pluginId} is not registered`)\r\n    }\r\n\r\n    if (enabled) {\r\n      this.enabled.add(pluginId)\r\n      this.pluginLogger.info(`Plugin enabled: ${pluginId}`)\r\n    } else {\r\n      this.enabled.delete(pluginId)\r\n      this.pluginLogger.info(`Plugin disabled: ${pluginId}`)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if plugin is enabled\r\n   */\r\n  isEnabled(pluginId: string): boolean {\r\n    return this.enabled.has(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Get plugin config\r\n   */\r\n  getConfig<T = any>(pluginId: string, key: string): T | undefined {\r\n    const config = this.config.get(pluginId)\r\n    return config?.[key] as T | undefined\r\n  }\r\n\r\n  /**\r\n   * Set plugin config\r\n   */\r\n  setConfig(pluginId: string, key: string, value: any): void {\r\n    if (!this.config.has(pluginId)) {\r\n      this.config.set(pluginId, {})\r\n    }\r\n\r\n    const config = this.config.get(pluginId)!\r\n    config[key] = value\r\n\r\n    this.pluginLogger.debug(`Plugin config set: ${pluginId}.${key}`, { value })\r\n  }\r\n\r\n  /**\r\n   * Execute plugin hooks\r\n   */\r\n  async executeHook<T = any>(\r\n    hookName: keyof Plugin,\r\n    args: any[],\r\n    defaultValue?: T\r\n  ): Promise<T | undefined> {\r\n    let result: T | undefined = defaultValue\r\n\r\n    for (const plugin of this.plugins.values()) {\r\n      if (!this.enabled.has(plugin.id)) {\r\n        continue\r\n      }\r\n\r\n      const hook = plugin[hookName] as any\r\n\r\n      if (typeof hook === 'function') {\r\n        try {\r\n          const hookResult = await Promise.resolve(hook.apply(plugin, args))\r\n\r\n          // For transform hooks, use the result as input for next plugin\r\n          if (hookResult !== undefined) {\r\n            result = hookResult\r\n            args[0] = hookResult // Update first argument for next plugin\r\n          }\r\n        } catch (error) {\r\n          this.pluginLogger.error(`Plugin hook failed: ${plugin.id}.${hookName}`, error as Error, {\r\n            plugin: plugin.id,\r\n            hook: hookName,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Execute plugin hooks in parallel\r\n   */\r\n  async executeHookParallel(hookName: keyof Plugin, args: any[]): Promise<void> {\r\n    const promises: Promise<any>[] = []\r\n\r\n    for (const plugin of this.plugins.values()) {\r\n      if (!this.enabled.has(plugin.id)) {\r\n        continue\r\n      }\r\n\r\n      const hook = plugin[hookName] as any\r\n\r\n      if (typeof hook === 'function') {\r\n        promises.push(\r\n          Promise.resolve(hook.apply(plugin, args)).catch((error) => {\r\n            this.pluginLogger.error(`Plugin hook failed: ${plugin.id}.${hookName}`, error as Error, {\r\n              plugin: plugin.id,\r\n              hook: hookName,\r\n            })\r\n          })\r\n        )\r\n      }\r\n    }\r\n\r\n    await Promise.all(promises)\r\n  }\r\n}\r\n\r\n/**\r\n * Global plugin manager instance\r\n */\r\nexport const pluginManager = new PluginManager()\r\n","/**\r\n * VirtualList - Virtual scrolling component for large lists\r\n * @module components/VirtualList\r\n */\r\n\r\nimport React, { useRef } from 'react'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\n\r\nexport interface VirtualListProps<T> {\r\n  /** Array of items to render */\r\n  items: T[]\r\n  /** Height of the scrollable container in pixels */\r\n  height: number | string\r\n  /** Estimated size of each item in pixels */\r\n  estimateSize: number\r\n  /** Render function for each item */\r\n  renderItem: (item: T, index: number) => React.ReactNode\r\n  /** Optional className for the container */\r\n  className?: string\r\n  /** Overscan count (number of items to render outside viewport) */\r\n  overscan?: number\r\n  /** Enable horizontal scrolling instead of vertical */\r\n  horizontal?: boolean\r\n  /** Optional gap between items in pixels */\r\n  gap?: number\r\n  /** Optional key extractor function */\r\n  getItemKey?: (item: T, index: number) => string | number\r\n}\r\n\r\n/**\r\n * VirtualList component for efficient rendering of large lists\r\n *\r\n * Uses @tanstack/react-virtual for windowing/virtualization\r\n *\r\n * @example\r\n * ```tsx\r\n * <VirtualList\r\n *   items={cards}\r\n *   height={600}\r\n *   estimateSize={100}\r\n *   renderItem={(card) => <CardComponent card={card} />}\r\n *   getItemKey={(card) => card.id}\r\n * />\r\n * ```\r\n */\r\nexport function VirtualList<T>({\r\n  items,\r\n  height,\r\n  estimateSize,\r\n  renderItem,\r\n  className = '',\r\n  overscan = 5,\r\n  horizontal = false,\r\n  gap = 0,\r\n  getItemKey,\r\n}: VirtualListProps<T>) {\r\n  const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n  const virtualizer = useVirtualizer({\r\n    count: items.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => estimateSize,\r\n    overscan,\r\n    horizontal,\r\n    gap,\r\n  })\r\n\r\n  const virtualItems = virtualizer.getVirtualItems()\r\n\r\n  const containerStyle: React.CSSProperties = {\r\n    height: typeof height === 'number' ? `${height}px` : height,\r\n    width: '100%',\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  }\r\n\r\n  const innerStyle: React.CSSProperties = horizontal\r\n    ? {\r\n        width: `${virtualizer.getTotalSize()}px`,\r\n        height: '100%',\r\n        position: 'relative',\r\n      }\r\n    : {\r\n        height: `${virtualizer.getTotalSize()}px`,\r\n        width: '100%',\r\n        position: 'relative',\r\n      }\r\n\r\n  return (\r\n    <div ref={parentRef} style={containerStyle} className={className}>\r\n      <div style={innerStyle}>\r\n        {virtualItems.map((virtualItem) => {\r\n          const item = items[virtualItem.index]\r\n          if (!item) return null\r\n          const key = getItemKey ? getItemKey(item, virtualItem.index) : virtualItem.index\r\n\r\n          const itemStyle: React.CSSProperties = {\r\n            position: 'absolute',\r\n            top: horizontal ? 0 : virtualItem.start,\r\n            left: horizontal ? virtualItem.start : 0,\r\n            width: horizontal ? virtualItem.size : '100%',\r\n            height: horizontal ? '100%' : virtualItem.size,\r\n          }\r\n\r\n          return (\r\n            <div key={key} style={itemStyle} data-index={virtualItem.index}>\r\n              {renderItem(item, virtualItem.index)}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access virtualizer instance for advanced use cases\r\n */\r\nexport function useVirtualList<T>(options: {\r\n  items: T[]\r\n  scrollElement: HTMLElement | null\r\n  estimateSize: number\r\n  overscan?: number\r\n  horizontal?: boolean\r\n  gap?: number\r\n}) {\r\n  return useVirtualizer({\r\n    count: options.items.length,\r\n    getScrollElement: () => options.scrollElement,\r\n    estimateSize: () => options.estimateSize,\r\n    overscan: options.overscan ?? 5,\r\n    horizontal: options.horizontal ?? false,\r\n    gap: options.gap ?? 0,\r\n  })\r\n}\r\n","/**\r\n * VirtualGrid - 2D virtual scrolling component for grid layouts\r\n * @module components/VirtualGrid\r\n */\r\n\r\nimport React, { useRef } from 'react'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\n\r\nexport interface VirtualGridProps<T> {\r\n  /** Array of items to render */\r\n  items: T[]\r\n  /** Height of the scrollable container in pixels */\r\n  height: number | string\r\n  /** Width of the scrollable container in pixels */\r\n  width?: number | string\r\n  /** Estimated width of each column in pixels */\r\n  estimateColumnWidth: number\r\n  /** Render function for each column */\r\n  renderColumn: (item: T, index: number) => React.ReactNode\r\n  /** Optional className for the container */\r\n  className?: string\r\n  /** Overscan count (number of columns to render outside viewport) */\r\n  overscan?: number\r\n  /** Optional gap between columns in pixels */\r\n  gap?: number\r\n  /** Optional key extractor function */\r\n  getItemKey?: (item: T, index: number) => string | number\r\n  /** Enable horizontal scrolling only */\r\n  horizontal?: boolean\r\n}\r\n\r\n/**\r\n * VirtualGrid component for efficient rendering of large horizontal lists/grids\r\n *\r\n * Optimized for Kanban boards with many columns\r\n *\r\n * @example\r\n * ```tsx\r\n * <VirtualGrid\r\n *   items={columns}\r\n *   height=\"100%\"\r\n *   estimateColumnWidth={320}\r\n *   renderColumn={(column) => <ColumnComponent column={column} />}\r\n *   getItemKey={(column) => column.id}\r\n * />\r\n * ```\r\n */\r\nexport function VirtualGrid<T>({\r\n  items,\r\n  height,\r\n  width = '100%',\r\n  estimateColumnWidth,\r\n  renderColumn,\r\n  className = '',\r\n  overscan = 3,\r\n  gap = 16,\r\n  getItemKey,\r\n  horizontal = true,\r\n}: VirtualGridProps<T>) {\r\n  const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n  const columnVirtualizer = useVirtualizer({\r\n    horizontal,\r\n    count: items.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => estimateColumnWidth,\r\n    overscan,\r\n    gap,\r\n  })\r\n\r\n  const virtualColumns = columnVirtualizer.getVirtualItems()\r\n\r\n  const containerStyle: React.CSSProperties = {\r\n    height: typeof height === 'number' ? `${height}px` : height,\r\n    width: typeof width === 'number' ? `${width}px` : width,\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  }\r\n\r\n  const innerStyle: React.CSSProperties = {\r\n    width: `${columnVirtualizer.getTotalSize()}px`,\r\n    height: '100%',\r\n    position: 'relative',\r\n  }\r\n\r\n  return (\r\n    <div ref={parentRef} style={containerStyle} className={className}>\r\n      <div style={innerStyle}>\r\n        {virtualColumns.map((virtualColumn) => {\r\n          const item = items[virtualColumn.index]\r\n          if (!item) return null\r\n          const key = getItemKey ? getItemKey(item, virtualColumn.index) : virtualColumn.index\r\n\r\n          const columnStyle: React.CSSProperties = {\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: virtualColumn.start,\r\n            width: virtualColumn.size,\r\n            height: '100%',\r\n          }\r\n\r\n          return (\r\n            <div key={key} style={columnStyle} data-index={virtualColumn.index}>\r\n              {renderColumn(item, virtualColumn.index)}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook for advanced 2D virtualization with both rows and columns\r\n */\r\nexport function useVirtualGrid<T>(options: {\r\n  items: T[]\r\n  scrollElement: HTMLElement | null\r\n  estimateColumnWidth: number\r\n  estimateRowHeight?: number\r\n  overscan?: number\r\n  gap?: number\r\n}) {\r\n  const columnVirtualizer = useVirtualizer({\r\n    horizontal: true,\r\n    count: options.items.length,\r\n    getScrollElement: () => options.scrollElement,\r\n    estimateSize: () => options.estimateColumnWidth,\r\n    overscan: options.overscan ?? 3,\r\n    gap: options.gap ?? 0,\r\n  })\r\n\r\n  return {\r\n    columnVirtualizer,\r\n    virtualColumns: columnVirtualizer.getVirtualItems(),\r\n    totalWidth: columnVirtualizer.getTotalSize(),\r\n  }\r\n}\r\n\r\n/**\r\n * Utility to determine if grid should use virtualization\r\n */\r\nexport function shouldVirtualizeGrid(columnCount: number, threshold = 10): boolean {\r\n  return columnCount > threshold\r\n}\r\n","/**\r\n * Design Tokens - Centralized design system tokens\r\n * @module tokens/design-tokens\r\n */\r\n\r\n/**\r\n * Spacing tokens (in pixels)\r\n */\r\nexport const spacing = {\r\n  none: 0,\r\n  xs: 4,\r\n  sm: 8,\r\n  md: 12,\r\n  lg: 16,\r\n  xl: 20,\r\n  '2xl': 24,\r\n  '3xl': 32,\r\n  '4xl': 40,\r\n  '5xl': 48,\r\n  '6xl': 64,\r\n} as const\r\n\r\n/**\r\n * Border radius tokens (in pixels)\r\n */\r\nexport const borderRadius = {\r\n  none: 0,\r\n  sm: 4,\r\n  md: 8,\r\n  lg: 12,\r\n  xl: 16,\r\n  '2xl': 20,\r\n  full: 9999,\r\n} as const\r\n\r\n/**\r\n * Font size tokens (in pixels)\r\n */\r\nexport const fontSize = {\r\n  xs: 12,\r\n  sm: 14,\r\n  base: 16,\r\n  lg: 18,\r\n  xl: 20,\r\n  '2xl': 24,\r\n  '3xl': 30,\r\n  '4xl': 36,\r\n  '5xl': 48,\r\n} as const\r\n\r\n/**\r\n * Font weight tokens\r\n */\r\nexport const fontWeight = {\r\n  light: 300,\r\n  normal: 400,\r\n  medium: 500,\r\n  semibold: 600,\r\n  bold: 700,\r\n  extrabold: 800,\r\n} as const\r\n\r\n/**\r\n * Line height tokens\r\n */\r\nexport const lineHeight = {\r\n  none: 1,\r\n  tight: 1.25,\r\n  snug: 1.375,\r\n  normal: 1.5,\r\n  relaxed: 1.625,\r\n  loose: 2,\r\n} as const\r\n\r\n/**\r\n * Z-index layers\r\n */\r\nexport const zIndex = {\r\n  base: 0,\r\n  dropdown: 1000,\r\n  sticky: 1020,\r\n  fixed: 1030,\r\n  modalBackdrop: 1040,\r\n  modal: 1050,\r\n  popover: 1060,\r\n  tooltip: 1070,\r\n} as const\r\n\r\n/**\r\n * Transition durations (in milliseconds)\r\n */\r\nexport const duration = {\r\n  instant: 0,\r\n  fastest: 75,\r\n  faster: 100,\r\n  fast: 150,\r\n  normal: 200,\r\n  slow: 300,\r\n  slower: 400,\r\n  slowest: 500,\r\n} as const\r\n\r\n/**\r\n * Transition timing functions\r\n */\r\nexport const easing = {\r\n  linear: 'linear',\r\n  ease: 'ease',\r\n  easeIn: 'ease-in',\r\n  easeOut: 'ease-out',\r\n  easeInOut: 'ease-in-out',\r\n  // Custom cubic-bezier\r\n  smooth: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\r\n  sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)',\r\n  bounce: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\r\n} as const\r\n\r\n/**\r\n * Shadow tokens\r\n */\r\nexport const shadows = {\r\n  none: 'none',\r\n  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\r\n  base: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\r\n  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\r\n  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\r\n  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\r\n  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)',\r\n} as const\r\n\r\n/**\r\n * Opacity tokens\r\n */\r\nexport const opacity = {\r\n  0: 0,\r\n  5: 0.05,\r\n  10: 0.1,\r\n  20: 0.2,\r\n  30: 0.3,\r\n  40: 0.4,\r\n  50: 0.5,\r\n  60: 0.6,\r\n  70: 0.7,\r\n  80: 0.8,\r\n  90: 0.9,\r\n  100: 1,\r\n} as const\r\n\r\n/**\r\n * Kanban-specific tokens\r\n */\r\nexport const kanban = {\r\n  column: {\r\n    width: 320,\r\n    minWidth: 280,\r\n    maxWidth: 400,\r\n    gap: 16,\r\n    padding: 12,\r\n    headerHeight: 48,\r\n  },\r\n  card: {\r\n    minHeight: 80,\r\n    maxHeight: 400,\r\n    padding: 12,\r\n    gap: 8,\r\n  },\r\n  board: {\r\n    padding: 16,\r\n    gap: 16,\r\n  },\r\n} as const\r\n\r\n/**\r\n * Gantt-specific tokens\r\n */\r\nexport const gantt = {\r\n  timeline: {\r\n    headerHeight: 60,\r\n    rowHeight: 44,\r\n    minRowHeight: 32,\r\n    maxRowHeight: 80,\r\n    taskPadding: 4,\r\n    gridLineWidth: 1,\r\n  },\r\n  task: {\r\n    height: 28,\r\n    minHeight: 20,\r\n    maxHeight: 40,\r\n    borderRadius: 4,\r\n    padding: 6,\r\n  },\r\n  dependency: {\r\n    lineWidth: 2,\r\n    arrowSize: 8,\r\n  },\r\n  scale: {\r\n    day: {\r\n      columnWidth: 40,\r\n      minColumnWidth: 30,\r\n      maxColumnWidth: 60,\r\n    },\r\n    week: {\r\n      columnWidth: 80,\r\n      minColumnWidth: 60,\r\n      maxColumnWidth: 120,\r\n    },\r\n    month: {\r\n      columnWidth: 120,\r\n      minColumnWidth: 80,\r\n      maxColumnWidth: 200,\r\n    },\r\n    quarter: {\r\n      columnWidth: 200,\r\n      minColumnWidth: 150,\r\n      maxColumnWidth: 300,\r\n    },\r\n  },\r\n  milestone: {\r\n    size: 16,\r\n    rotation: 45, // degrees\r\n  },\r\n} as const\r\n\r\n/**\r\n * Combined design tokens\r\n */\r\nexport const designTokens = {\r\n  spacing,\r\n  borderRadius,\r\n  fontSize,\r\n  fontWeight,\r\n  lineHeight,\r\n  zIndex,\r\n  duration,\r\n  easing,\r\n  shadows,\r\n  opacity,\r\n  kanban,\r\n  gantt,\r\n} as const\r\n\r\n/**\r\n * Type helpers\r\n */\r\nexport type SpacingToken = keyof typeof spacing\r\nexport type BorderRadiusToken = keyof typeof borderRadius\r\nexport type FontSizeToken = keyof typeof fontSize\r\nexport type FontWeightToken = keyof typeof fontWeight\r\nexport type LineHeightToken = keyof typeof lineHeight\r\nexport type ZIndexToken = keyof typeof zIndex\r\nexport type DurationToken = keyof typeof duration\r\nexport type EasingToken = keyof typeof easing\r\nexport type ShadowToken = keyof typeof shadows\r\nexport type OpacityToken = keyof typeof opacity\r\n\r\n/**\r\n * Design token value types\r\n */\r\nexport type DesignTokens = typeof designTokens\r\nexport type TokenValue = string | number\r\n\r\n/**\r\n * Utility to get token value with fallback\r\n */\r\nexport function getToken<T extends TokenValue>(\r\n  tokens: Record<string, T>,\r\n  key: string,\r\n  fallback: T\r\n): T {\r\n  return tokens[key] ?? fallback\r\n}\r\n","/**\r\n * CSS Custom Properties Generator\r\n * Generates CSS variables from design tokens\r\n * @module tokens/css-generator\r\n */\r\n\r\nimport { designTokens } from './design-tokens'\r\nimport type { TokenValue } from './design-tokens'\r\n\r\n/**\r\n * Convert a nested object to flat CSS custom properties\r\n */\r\nfunction flattenTokens(\r\n  obj: Record<string, unknown>,\r\n  prefix = '',\r\n  result: Record<string, TokenValue> = {}\r\n): Record<string, TokenValue> {\r\n  for (const [key, value] of Object.entries(obj)) {\r\n    const newKey = prefix ? `${prefix}-${key}` : key\r\n\r\n    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n      flattenTokens(value as Record<string, unknown>, newKey, result)\r\n    } else if (typeof value === 'string' || typeof value === 'number') {\r\n      result[newKey] = value\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n/**\r\n * Format token value for CSS\r\n */\r\nfunction formatCSSValue(value: TokenValue): string {\r\n  if (typeof value === 'number') {\r\n    // Check if it's likely a pixel value\r\n    if (value > 0 && value < 1000) {\r\n      return `${value}px`\r\n    }\r\n    return value.toString()\r\n  }\r\n  return value\r\n}\r\n\r\n/**\r\n * Generate CSS custom properties from design tokens\r\n */\r\nexport function generateCSSVariables(prefix = 'asakaa'): string {\r\n  const flatTokens = flattenTokens(designTokens)\r\n  const cssVars: string[] = []\r\n\r\n  for (const [key, value] of Object.entries(flatTokens)) {\r\n    const varName = `--${prefix}-${key}`\r\n    const varValue = formatCSSValue(value)\r\n    cssVars.push(`  ${varName}: ${varValue};`)\r\n  }\r\n\r\n  return `:root {\\n${cssVars.join('\\n')}\\n}`\r\n}\r\n\r\n/**\r\n * Generate CSS custom properties for a specific theme\r\n */\r\nexport interface ThemeColors {\r\n  // Background colors\r\n  background: {\r\n    primary: string\r\n    secondary: string\r\n    tertiary: string\r\n    card: string\r\n    hover: string\r\n    active: string\r\n  }\r\n  // Text colors\r\n  text: {\r\n    primary: string\r\n    secondary: string\r\n    tertiary: string\r\n    disabled: string\r\n    inverse: string\r\n  }\r\n  // Border colors\r\n  border: {\r\n    default: string\r\n    hover: string\r\n    focus: string\r\n    active: string\r\n  }\r\n  // Status colors\r\n  status: {\r\n    success: string\r\n    warning: string\r\n    error: string\r\n    info: string\r\n  }\r\n  // Priority colors\r\n  priority: {\r\n    low: string\r\n    medium: string\r\n    high: string\r\n    urgent: string\r\n  }\r\n  // Interactive colors\r\n  interactive: {\r\n    primary: string\r\n    primaryHover: string\r\n    primaryActive: string\r\n    secondary: string\r\n    secondaryHover: string\r\n    secondaryActive: string\r\n  }\r\n  // Gantt-specific colors\r\n  gantt: {\r\n    gridLine: string\r\n    todayLine: string\r\n    taskBackground: string\r\n    taskBorder: string\r\n    criticalPath: string\r\n    milestone: string\r\n    dependency: string\r\n    weekend: string\r\n  }\r\n}\r\n\r\n/**\r\n * Generate theme CSS variables\r\n */\r\nexport function generateThemeVariables(\r\n  theme: ThemeColors,\r\n  prefix = 'asakaa'\r\n): string {\r\n  const cssVars: string[] = []\r\n\r\n  // Flatten theme colors\r\n  const flatColors = flattenTokens(theme as unknown as Record<string, unknown>)\r\n\r\n  for (const [key, value] of Object.entries(flatColors)) {\r\n    const varName = `--${prefix}-color-${key}`\r\n    cssVars.push(`  ${varName}: ${value};`)\r\n  }\r\n\r\n  return `:root {\\n${cssVars.join('\\n')}\\n}`\r\n}\r\n\r\n/**\r\n * Dark theme colors\r\n */\r\nexport const darkTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#1a1a1a',\r\n    secondary: '#2a2a2a',\r\n    tertiary: '#3a3a3a',\r\n    card: '#2d2d2d',\r\n    hover: '#353535',\r\n    active: '#404040',\r\n  },\r\n  text: {\r\n    primary: '#ffffff',\r\n    secondary: '#b0b0b0',\r\n    tertiary: '#808080',\r\n    disabled: '#606060',\r\n    inverse: '#1a1a1a',\r\n  },\r\n  border: {\r\n    default: '#404040',\r\n    hover: '#505050',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#22c55e',\r\n    warning: '#f59e0b',\r\n    error: '#ef4444',\r\n    info: '#3b82f6',\r\n  },\r\n  priority: {\r\n    low: '#6b7280',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#6b7280',\r\n    secondaryHover: '#4b5563',\r\n    secondaryActive: '#374151',\r\n  },\r\n  gantt: {\r\n    gridLine: '#404040',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#6b7280',\r\n    weekend: '#2a2a2a',\r\n  },\r\n}\r\n\r\n/**\r\n * Light theme colors\r\n */\r\nexport const lightTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#ffffff',\r\n    secondary: '#f9fafb',\r\n    tertiary: '#f3f4f6',\r\n    card: '#ffffff',\r\n    hover: '#f3f4f6',\r\n    active: '#e5e7eb',\r\n  },\r\n  text: {\r\n    primary: '#111827',\r\n    secondary: '#6b7280',\r\n    tertiary: '#9ca3af',\r\n    disabled: '#d1d5db',\r\n    inverse: '#ffffff',\r\n  },\r\n  border: {\r\n    default: '#e5e7eb',\r\n    hover: '#d1d5db',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#16a34a',\r\n    warning: '#d97706',\r\n    error: '#dc2626',\r\n    info: '#2563eb',\r\n  },\r\n  priority: {\r\n    low: '#9ca3af',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#6b7280',\r\n    secondaryHover: '#4b5563',\r\n    secondaryActive: '#374151',\r\n  },\r\n  gantt: {\r\n    gridLine: '#e5e7eb',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#6b7280',\r\n    weekend: '#f9fafb',\r\n  },\r\n}\r\n\r\n/**\r\n * Neutral theme colors\r\n */\r\nexport const neutralTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#18181b',\r\n    secondary: '#27272a',\r\n    tertiary: '#3f3f46',\r\n    card: '#27272a',\r\n    hover: '#3f3f46',\r\n    active: '#52525b',\r\n  },\r\n  text: {\r\n    primary: '#fafafa',\r\n    secondary: '#a1a1aa',\r\n    tertiary: '#71717a',\r\n    disabled: '#52525b',\r\n    inverse: '#18181b',\r\n  },\r\n  border: {\r\n    default: '#3f3f46',\r\n    hover: '#52525b',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#22c55e',\r\n    warning: '#f59e0b',\r\n    error: '#ef4444',\r\n    info: '#3b82f6',\r\n  },\r\n  priority: {\r\n    low: '#71717a',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#71717a',\r\n    secondaryHover: '#52525b',\r\n    secondaryActive: '#3f3f46',\r\n  },\r\n  gantt: {\r\n    gridLine: '#3f3f46',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#71717a',\r\n    weekend: '#27272a',\r\n  },\r\n}\r\n\r\n/**\r\n * Generate complete CSS with all tokens and theme\r\n */\r\nexport function generateCompleteCSS(\r\n  theme: ThemeColors = darkTheme,\r\n  prefix = 'asakaa'\r\n): string {\r\n  const tokenVars = generateCSSVariables(prefix)\r\n  const themeVars = generateThemeVariables(theme, prefix)\r\n\r\n  return `${tokenVars}\\n\\n${themeVars}`\r\n}\r\n\r\n/**\r\n * Export CSS to file content\r\n */\r\nexport function exportTokensToCSS(): string {\r\n  return `/**\r\n * ASAKAA Design Tokens\r\n * Auto-generated from design-tokens.ts\r\n * Do not edit this file directly\r\n */\r\n\r\n${generateCompleteCSS(darkTheme)}\r\n\r\n/* Light theme */\r\n[data-theme=\"light\"] {\r\n${generateThemeVariables(lightTheme, 'asakaa')\r\n  .split('\\n')\r\n  .slice(1, -1)\r\n  .join('\\n')}\r\n}\r\n\r\n/* Neutral theme */\r\n[data-theme=\"neutral\"] {\r\n${generateThemeVariables(neutralTheme, 'asakaa')\r\n  .split('\\n')\r\n  .slice(1, -1)\r\n  .join('\\n')}\r\n}\r\n`\r\n}\r\n","/**\r\n * Theme Switcher Component\r\n * ASAKAA v0.5.0\r\n */\r\n\r\nimport { useTheme } from './ThemeProvider'\r\nimport type { ThemeName } from './types'\r\nimport './theme-switcher.css'\r\n\r\nexport interface ThemeSwitcherProps {\r\n  /** Show labels for each theme */\r\n  showLabels?: boolean\r\n  /** Compact mode (icon-only) */\r\n  compact?: boolean\r\n  /** Custom class name */\r\n  className?: string\r\n}\r\n\r\n// Theme Icon Components with explicit SVG\r\nconst ThemeIcon = ({ theme }: { theme: ThemeName }) => {\r\n  switch (theme) {\r\n    case 'dark':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M13.5 8.5C13.5 11.2614 11.2614 13.5 8.5 13.5C5.73858 13.5 3.5 11.2614 3.5 8.5C3.5 5.73858 5.73858 3.5 8.5 3.5C8.66667 3.5 8.83074 3.50926 8.99199 3.52734C8.10635 4.35233 7.5 5.53318 7.5 6.85C7.5 9.33579 9.49421 11.33 11.98 11.33C12.5933 11.33 13.1751 11.2075 13.7069 10.9844C13.5698 11.8951 13.2042 12.7349 12.6674 13.4367\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    case 'light':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <circle cx=\"8\" cy=\"8\" r=\"3\" stroke=\"currentColor\" strokeWidth=\"1.5\"/>\r\n          <path d=\"M8 1V2M8 14V15M15 8H14M2 8H1M12.5 12.5L11.8 11.8M4.2 4.2L3.5 3.5M12.5 3.5L11.8 4.2M4.2 11.8L3.5 12.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\"/>\r\n        </svg>\r\n      )\r\n    case 'neutral':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <circle cx=\"8\" cy=\"8\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"1.5\"/>\r\n          <path d=\"M5 8L8 8L8 5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n  }\r\n}\r\n\r\nexport function ThemeSwitcher({ showLabels = true, compact = false, className = '' }: ThemeSwitcherProps) {\r\n  const { theme: currentTheme, setTheme, themes } = useTheme()\r\n\r\n  return (\r\n    <div className={`theme-switcher ${compact ? 'theme-switcher--compact' : ''} ${className}`}>\r\n      {Object.entries(themes).map(([key, themeData]) => {\r\n        const themeName = key as ThemeName\r\n        const isActive = themeName === currentTheme\r\n\r\n        return (\r\n          <button\r\n            key={themeName}\r\n            onClick={() => setTheme(themeName)}\r\n            className={`theme-switcher__button ${isActive ? 'theme-switcher__button--active' : ''}`}\r\n            aria-label={`Switch to ${themeData.displayName} theme`}\r\n            aria-pressed={isActive}\r\n            title={themeData.displayName}\r\n          >\r\n            <span className=\"theme-switcher__icon\" aria-hidden=\"true\">\r\n              <ThemeIcon theme={themeName} />\r\n            </span>\r\n            {showLabels && !compact && <span className=\"theme-switcher__label\">{themeData.displayName}</span>}\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"]}
{"version":3,"sources":["../src/views/KanbanViewAdapter.tsx","../../../node_modules/@dnd-kit/utilities/src/execution-context/canUseDOM.ts","../../../node_modules/@dnd-kit/utilities/src/css.ts","../src/utils/cn.ts","../src/utils/positioning.ts","../src/utils/performance.ts","../src/utils/retry.ts","../src/utils/logger.ts","../src/utils/export.ts","../src/utils/import.ts","../src/components/Gantt/GanttThemeContext.tsx","../src/components/Board/KanbanThemeContext.tsx","../src/components/Portal/Portal.tsx","../src/components/Card/PrioritySelector.tsx","../src/components/Card/DateRangePicker.tsx","../src/components/Card/UserAssignmentSelector.tsx","../src/components/Card/DependenciesSelector.tsx","../src/components/Card/Card.tsx","../src/components/Card/StatusSelector.tsx","../src/components/Column/ColumnMenu.tsx","../src/components/Column/Column.tsx","../src/components/Column/EditableColumnTitle.tsx","../src/components/TaskDetailModal/MentionInput.tsx","../src/components/Gantt/TagPicker.tsx","../src/components/Gantt/ColorPicker.tsx","../src/components/TaskDetailModal/TaskDetailModal.tsx","../src/hooks/useDragState.ts","../src/components/Board/Board.tsx","../src/components/Board/KanbanToolbar.tsx","../src/components/Board/AddColumnButton.tsx","../src/components/Board/AddCardButton.tsx","../src/components/ErrorBoundary/ErrorBoundary.tsx","../src/components/CommandPalette/CommandPalette.tsx","../src/components/Attachments/AttachmentUploader.tsx","../src/components/CardDetailModal/CardDetailModal.tsx","../src/components/CardDetailModal/SmartPopover.tsx","../src/components/Gantt/themes.ts","../src/components/CardDetailModal/CardDetailModalV2.tsx","../src/components/Charts/VelocityChart.tsx","../src/components/Charts/BurnDownChart.tsx","../src/components/Charts/DistributionCharts.tsx","../src/components/BulkOperations/BulkOperationsToolbar.tsx","../src/components/Swimlanes/SwimlaneBoardView.tsx","../src/components/Swimlanes/GroupBySelector.tsx","../src/hooks/keyboard/useKeyboardShortcuts.ts","../src/components/KeyboardShortcuts/KeyboardShortcutsHelp.tsx","../src/components/Templates/CardTemplateSelector.tsx","../src/components/ExportImport/ExportImportModal.tsx","../src/components/FilterBar/FilterBar.tsx","../src/components/ConfigMenu/ConfigMenu.tsx","../src/theme/themes.ts","../src/theme/ThemeProvider.tsx","../src/components/ThemeModal/ThemeModal.tsx","../src/components/Gantt/deriveThemeFromCSS.ts","../src/components/Gantt/i18n.ts","../src/components/Gantt/GanttI18nContext.tsx","../src/components/Gantt/GanttToolbar.tsx","../src/components/Gantt/ColumnManager.tsx","../src/components/Gantt/ContextMenu.tsx","../src/components/Gantt/useGanttKeyboard.ts","../src/components/Gantt/useGanttSelection.ts","../src/components/Gantt/hierarchyUtils.ts","../src/components/Gantt/TaskGrid.tsx","../src/components/Gantt/hooks/useDragState.ts","../src/components/Gantt/TaskBar.tsx","../src/components/Gantt/TaskTooltip.tsx","../src/components/Gantt/DependencyLine.tsx","../src/components/Gantt/Milestone.tsx","../src/components/Gantt/ganttUtils.ts","../src/components/Gantt/Timeline.tsx","../src/components/Gantt/GanttAIAssistant.tsx","../src/components/Gantt/useUndoRedo.ts","../src/components/Gantt/useGanttUndoRedoKeys.ts","../src/components/Gantt/defaultTemplates.ts","../src/components/Gantt/GanttBoard.tsx","../src/components/Gantt/TaskFormModal.tsx","../src/components/Gantt/aiCommandParser.ts","../src/components/Gantt/adapters.ts","../src/components/ListView/i18n.ts","../src/components/ListView/cells/StatusCell.tsx","../src/components/ListView/cells/PriorityCell.tsx","../src/components/ListView/cells/AssigneesCell.tsx","../src/components/ListView/cells/DateCell.tsx","../src/components/ListView/cells/ProgressCell.tsx","../src/components/ListView/cells/TextCell.tsx","../src/components/ListView/cells/NumberCell.tsx","../src/components/ListView/cells/DropdownCell.tsx","../src/components/ListView/cells/CheckboxCell.tsx","../src/components/ListView/cells/TagsCell.tsx","../src/components/ListView/TableContextMenu.tsx","../src/components/ListView/ColumnSelector.tsx","../src/components/ListView/CreateFieldModal.tsx","../src/components/ListView/StatusFilter.tsx","../src/components/ListView/ListView.tsx","../src/components/ListView/types.ts","../src/components/ListView/themes.ts","../src/components/Calendar/i18n.ts","../src/components/Calendar/CalendarBoard.tsx","../src/components/Calendar/themes.ts","../src/components/CardStack/CardStack.tsx","../src/types/card-history.ts","../src/components/CardHistory/CardHistoryTimeline.tsx","../src/components/CardHistory/CardHistoryReplay.tsx","../src/types/card-relationships.ts","../src/components/CardRelationships/CardRelationshipsGraph.tsx","../src/components/AI/GeneratePlanModal.tsx","../src/lib/ai/config.ts","../src/lib/ai/costs.ts","../src/components/AI/AIUsageDashboard.tsx","../src/components/AI/GenerateGanttTasksDialog.tsx","../src/hooks/useKanbanState.ts","../src/hooks/useBoard.ts","../src/hooks/useFilters.ts","../src/hooks/useAI.ts","../src/hooks/useSelectionState.ts","../src/hooks/useMultiSelect.ts","../src/types/card-stack.ts","../src/hooks/useCardStacking.ts","../src/adapters/react/BoardProvider.tsx","../src/adapters/react/useBoard.ts","../src/adapters/react/useFilteredCards.ts","../src/plugins/PluginManager.ts","../src/components/VirtualList/VirtualList.tsx","../src/components/VirtualGrid/VirtualGrid.tsx","../src/tokens/design-tokens.ts","../src/tokens/css-generator.ts","../src/theme/ThemeSwitcher.tsx"],"names":["CSS","Object","freeze","Translate","toString","transform","x","y","Math","round","Scale","scaleX","scaleY","Transform","join","Transition","_ref","property","duration","easing","cn","inputs","twMerge","clsx","calculatePosition","before","after","generateInitialPositions","count","_","i","calculateDropPosition","columnCards","dropIndex","shouldVirtualize","itemCount","threshold","defaultShouldRetry","error","status","calculateDelay","attempt","initialDelay","backoffMultiplier","maxDelay","delay","jitter","retryWithBackoff","fn","options","maxAttempts","shouldRetry","onRetry","lastError","attempts","callbackError","resolve","retrySyncOperation","createRetryWrapper","args","CircuitBreaker","resetTimeout","result","LogLevel","_Logger","entry","timestamp","level","message","component","rest","prefix","hasContext","isDev","componentName","context","action","Timer","Logger","onEnd","enabled","logger","exportToJSON","board","_options","data","exportToCSV","headers","rows","card","column","col","escapeCSV","row","exportToPDF","boardElement","element","boardEl","canvas","html2canvas","imgData","pdfWidth","pdfHeight","imgAspect","imgWidth","imgHeight","doc","jsPDF","xOffset","yPosition","lines","metadata","dates","value","exportBoard","format","downloadExport","content","filename","defaultFilename","finalFilename","mimeTypes","blob","url","link","importFromJSON","jsonString","importFromCSV","csvString","parseCSVLine","cards","columnsMap","errors","values","cardData","header","index","columnTitle","line","current","inQuotes","char","nextChar","importBoard","readFile","file","reject","reader","event","GanttThemeContext","createContext","useGanttTheme","useContext","KanbanThemeContext","KanbanThemeProvider","children","themeName","jsx","useKanbanTheme","Portal","container","mounted","setMounted","useState","ganttTheme","kanbanTheme","useEffect","target","theme","themeStyles","createPortal","PRIORITY_CONFIG","CLEAR_COLOR","PriorityIcon","color","jsxs","PrioritySelector","priority","onChange","className","isOpen","setIsOpen","menuPosition","setMenuPosition","menuRef","useRef","buttonRef","openMenu","rect","viewportHeight","viewportWidth","menuWidth","menuHeight","GAP","leftPos","spaceBelow","spaceAbove","topPos","handleClickOutside","handleEscape","e","handleSelect","newPriority","currentConfig","flagColor","key","config","QUICK_OPTIONS","DateRangePicker","startDate","endDate","isDark","handleQuickSelect","days","now","formatLocalDate","date","year","month","day","todayStr","endStr","formatDateRange","parseLocalDate","dateStr","parts","p","start","end","monthNames","hasDateSet","overdue","today","option","UserAssignmentSelector","assignedUsers","availableUsers","maxVisibleAvatars","searchQuery","setSearchQuery","handleToggleUser","user","isAssigned","u","filteredUsers","visibleUsers","overflowCount","wouldCreateCircularDependency","allCards","fromCardId","toCardId","dependencyMap","deps","d","depObj","existingDeps","visited","recStack","hasCycle","cardId","depId","DependenciesSelector","currentCardId","dependencies","availableTasks","validateCircular","onCircularDependencyError","hasDependencies","setHasDependencies","circularError","setCircularError","handleToggleDependency","taskId","isDependency","targetTask","t","newDeps","id","errorMsg","handleToggleHasDependencies","newValue","filteredTasks","task","linkColor","Fragment","Card","memo","render","onClick","isSelected","disableDrag","onUpdate","attributes","listeners","setNodeRef","transition","isDragging","useSortable","style","isCompleted","imageAttachments","att","cardStyle","users","label","prevProps","nextProps","STATUS_CONFIG","StatusIcon","icon","StatusSelector","customStatuses","allStatuses","cs","getCurrentConfig","defaultConfig","customConfig","newStatus","statusColor","statusOption","ColumnMenu","onRename","onDelete","isDeletable","isRenaming","setIsRenaming","newTitle","setNewTitle","inputRef","handleRenameClick","handleRenameSubmit","trimmedTitle","handleRenameKeyDown","Column","renderColumn","renderCard","renderHeader","renderEmptyState","onCardClick","onCardUpdate","enableVirtualization","cardHeight","isCollapsed","onToggleCollapse","onColumnRename","onColumnDelete","isOver","useDroppable","parentRef","useVirtualization","virtualizer","useVirtualizer","wipStatus","percentage","isOverWipLimit","getWipBadgeClasses","SortableContext","verticalListSortingStrategy","virtualItem","EditableColumnTitle","title","onSave","isEditing","setIsEditing","editValue","setEditValue","handleSave","trimmed","handleKeyDown","findMentionMatch","text","cursorPosition","beforeCursor","atIndex","charBefore","afterAt","extractMentionedUserIds","mentionedIds","mentionRegex","match","mentionName","getInitials","name","n","MentionInput","onSubmit","placeholder","disabled","isSubmitting","locale","currentUser","showDropdown","setShowDropdown","setFilteredUsers","selectedIndex","setSelectedIndex","mentionMatch","setMentionMatch","dropdownRef","updateMentionState","useCallback","cursorPos","filtered","handleChange","insertMention","beforeMention","afterMention","mentionText","newCursorPos","prev","selectedUser","tabSelectedUser","selectedElement","Send","AnimatePresence","motion","CommentContent","lastIndex","part","TAG_COLORS","TagPicker","selectedTags","availableTags","onCreateTag","_compact","isCreating","setIsCreating","newTagColor","setNewTagColor","dropdownPosition","setDropdownPosition","containerRef","filteredTags","tag","exactMatch","isInsideContainer","isInsideDropdown","handleToggleTag","handleCreateTag","newTag","handleRemoveTag","tagId","pillStyle","Tag","ChevronDown","X","Check","Plus","TagBadge","onRemove","size","TagList","tags","maxVisible","visibleTags","hiddenCount","TASK_COLORS","normalizeToTask","item","assignees","a","s","taskToCard","originalCard","TaskDetailModal","onClose","onTaskUpdate","attachments","onUploadAttachments","onDeleteAttachment","comments","onAddComment","mentionableUsers","tagPickerTheme","isCard","originalItem","selectedTask","setSelectedTask","showStatusDropdown","setShowStatusDropdown","showPriorityDropdown","setShowPriorityDropdown","showAssigneesDropdown","setShowAssigneesDropdown","showDatePicker","setShowDatePicker","datePickerMonth","setDatePickerMonth","editingProgress","setEditingProgress","showDependenciesDropdown","setShowDependenciesDropdown","dependencySearch","setDependencySearch","showColorPicker","setShowColorPicker","isDraggingFile","setIsDraggingFile","isUploadingFiles","setIsUploadingFiles","localDescription","setLocalDescription","descriptionDebounceRef","localTaskName","setLocalTaskName","taskNameDebounceRef","commentText","setCommentText","isSubmittingComment","setIsSubmittingComment","normalizedTask","handleUpdate","updatedTask","closeAllDropdowns","updateTaskField","field","handleDescriptionChange","handleTaskNameChange","handleSubmitComment","mentionedUserIds","formatCommentDate","diffMs","diffMins","diffHours","diffDays","updateTaskStatus","statusId","progress","updateTaskDates","getDatePickerDays","firstDay","daysInMonth","startDayOfWeek","prevMonthLastDay","remainingDays","handleFileDrop","files","handleFileInputChange","handleDragOver","handleDragLeave","formatFileSize","bytes","getFileIcon","mimeType","Image","FileTextIcon","File","Circle","Sparkles","Maximize2","MoreHorizontal","newProgress","CheckCircle2","User","assignee","currentAssignees","newAssignees","CalendarDays","tomorrow","nextSaturday","nextMonday","nextWeekend","twoWeeks","fourWeeks","newEndDate","newStartDate","isToday","isStartDate","isEndDate","isInRange","clickedDate","Flag","Clock","newTags","Link2","depTask","currentDeps","Palette","c","Diamond","FileText","subtask","ListChecks","attachment","FileIcon","isImage","Trash2","Upload","comment","MessageSquare","useDragState","state","setState","dragStore","newState","setDragState","KanbanBoard","callbacks","renderProps","isLoading","attachmentsByCard","onTaskOpen","dragState","selectedCard","setSelectedCard","themeClass","handleCardUpdate","updates","handleColumnRename","columnId","handleColumnDelete","DEFAULT_COLUMN_IDS","sensors","useSensors","useSensor","PointerSensor","KeyboardSensor","sortableKeyboardCoordinates","cardsByColumn","useMemo","map","b","availableTasksForDependencies","handleDragStart","active","over","targetColumnId","handleDragEnd","activeCard","targetPosition","targetColumnCards","overCard","overIndex","targetColumn","handleCardClick","handleModalCardUpdate","updatedCard","LoadingSkeleton","DndContext","closestCorners","DragOverlay","columnCount","darkTheme","lightTheme","defaultI18n","englishI18n","ColumnSelector","columns","onSelect","createTaskLabel","ExportDropdown","onExportCSV","onExportJSON","onExportExcel","isExporting","setIsExporting","exportOptions","FileJson","FileSpreadsheet","opt","handleExport","handler","Download","SimpleCreateButton","KanbanToolbar","onCreateTask","useColumnSelector","translations","hasExport","AddColumnButton","onAddColumn","buttonLabel","setTitle","handleSubmit","handleBlur","AddCardButton","onAddCard","isExpanded","setIsExpanded","setIsSubmitting","setName","selectedAssignees","setSelectedAssignees","setStartDate","setEndDate","setPriority","showAssignees","setShowAssignees","showDates","setShowDates","showPriority","setShowPriority","formRef","handleCancel","trimmedName","toggleAssignee","userId","KanbanViewAdapter","BaseViewAdapter","createRoot","cell","createKanbanView","ErrorBoundary","Component","props","errorInfo","onError","handlerError","hasError","fallback","withErrorBoundary","errorBoundaryProps","WrappedComponent","CommandPalette","onCreateCard","onNavigateToCard","onSearch","onChangePriority","onAssignUser","onGeneratePlan","onPredictRisks","onOpenAIUsage","shortcut","search","setSearch","page","setPage","selectedColumn","setSelectedColumn","open","handleClose","handleSelectCommand","param","handleCreateCard","Command","openNativeLightbox","imageUrl","imageName","allImages","currentIndex","onNavigate","existing","lightbox","img","hint","closeLightbox","newIdx","dots","idx","dot","prevBtn","nextBtn","k","sizes","type","AttachmentUploader","onUpload","maxSizeMB","allowedTypes","maxFiles","setIsDragging","isUploading","setIsUploading","setError","fileInputRef","attachmentsRef","handleImageClick","handleNavigate","newIndex","imgs","newImg","validateFiles","valid","handleUpload","err","handleDragEnter","handleDrop","handleClick","handleDelete","attachmentId","CardDetailModal","activities","aiInsights","onDeleteComment","onSuggestAssignee","onGenerateSubtasks","onEstimateEffort","currentUserId","activeTab","setActiveTab","editedCard","setEditedCard","newComment","setNewComment","aiLoading","setAiLoading","aiSuggestions","setAiSuggestions","handleAddComment","handleSuggestAssignee","suggestions","handleGenerateSubtasks","subtasks","handleEstimateEffort","effort","currentCard","selected","dep","author","activity","suggestion","insight","SmartPopover","triggerRef","width","estimatedHeight","position","setPosition","timeoutId","themes","PRIORITY_OPTIONS","STATUS_OPTIONS","CardDetailModalV2","_onDelete","_onDeleteComment","_onAIGenerateDescription","_onAICreateSubtasks","_onAIFindSimilar","availableColumns","availableLabels","_onUploadCoverImage","_unsplashAccessKey","onSubtasksChange","localCard","setLocalCard","isEditingDescription","setIsEditingDescription","setSubtasks","isAddingSubtask","setIsAddingSubtask","newSubtaskTitle","setNewSubtaskTitle","activityFilter","setActivityFilter","showStatusMenu","setShowStatusMenu","showPriorityMenu","setShowPriorityMenu","showAssigneeMenu","setShowAssigneeMenu","showLabelMenu","setShowLabelMenu","showTimePicker","setShowTimePicker","titleRef","descriptionRef","commentRef","statusMenuRef","priorityMenuRef","assigneeMenuRef","labelMenuRef","datePickerRef","statusBtnRef","assigneeBtnRef","priorityBtnRef","labelBtnRef","isTyping","isMod","handleTitleChange","updated","handleTitleKeyDown","handleDescriptionBlur","handleStatusChange","handlePriorityChange","handleToggleAssignee","handleToggleLabel","currentLabels","newLabels","l","handleTagsChange","handleDateChange","newDate","handleTimeChange","hours","handleAddSubtask","newSubtask","updatedSubtasks","handleToggleSubtask","st","handleDeleteSubtask","handleSendComment","handleCommentKeyDown","renderMarkdown","ReactMarkdown","remarkGfm","rehypeSanitize","node","filteredActivity","displayCard","completedSubtasksCount","CustomTooltip","payload","VelocityChart","height","showAverage","showPlanned","dataWithAverage","point","sum","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Line","BurnDownChart","totalTasks","useArea","total","currentRemaining","idealRemaining","isOnTrack","AreaChart","Area","PRIORITY_COLORS","DEFAULT_COLORS","renderPieLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","radius","DistributionCharts","showPercentages","dataWithTotal","colors","PieChart","Pie","Cell","legendEntry","BarChart","Bar","max","BulkOperationsToolbar","selectedCards","onClearSelection","showMoveMenu","setShowMoveMenu","showUserMenu","setShowUserMenu","cardIds","handleUpdatePriority","handleMove","handleAssignUsers","userIds","handleAddLabels","labels","existingLabels","allLabels","generateSwimlanes","groupBy","laneMap","groupValue","laneId","laneTitle","laneColor","laneIcon","assignedUserIds","SwimlaneBoardView","swimlaneConfig","collapsedLanes","setCollapsedLanes","swimlanes","toggleLaneCollapse","next","lane","laneCards","laneBoard","GROUP_BY_OPTIONS","GroupBySelector","currentOption","DEFAULT_SHORTCUTS","matchesShortcut","modifiers","ctrlMatch","shiftMatch","altMatch","metaMatch","useKeyboardShortcuts","shortcuts","preventDefault","shortcutsRef","enabledRef","registerShortcut","unregisterShortcut","customEvent","formatKey","formatModifiers","isMac","getShortcutDisplay","keys","groupShortcuts","groups","KeyboardShortcutsHelp","isMounted","setIsMounted","category","categoryShortcuts","DEFAULT_TEMPLATES","CardTemplateSelector","templates","onSelectTemplate","template","groupedTemplates","acc","categoryTemplates","ExportImportModal","onImport","boardElementRef","selectedFormat","setSelectedFormat","importResult","setImportResult","handleFileSelect","SORT_OPTIONS","GROUPBY_OPTIONS","FilterBar","filters","sort","onFiltersChange","onSortChange","onReset","onFilterMyTasks","onFilterOverdue","onFilterHighPriority","_availableColumns","showQuickFilters","compact","onGroupByChange","setIsCollapsed","handleSearchChange","handleDateFilterChange","handleSortChange","handleSortOrderToggle","hasActiveFilters","ConfigMenu","onOpenExport","onOpenThemes","onOpenShortcuts","viewMode","onExportGanttPDF","onExportGanttExcel","onExportGanttPNG","onExportGanttCSV","handleItemClick","neutralTheme","defaultTheme","ThemeContext","STORAGE_KEY","ThemeProvider","initialTheme","storageKey","setThemeState","stored","setTheme","newTheme","root","currentTheme","camelToKebab","themeKey","cssVar","useTheme","str","ThemeModal","themeData","deriveThemeFromCSS","styles","getVar","varName","en","es","getTranslations","mergeTranslations","customTranslations","base","GanttI18nContext","useGanttI18n","onExportPNG","onExportPDF","onExportMSProject","FileImage","FolderKanban","SegmentedControl","layoutId","isActive","MinimalTabs","DensityDropdown","densityOptions","currentLabel","Rows3","FilterDropdown","filterOptions","hasActiveFilter","Filter","GanttToolbar","timeScale","onTimeScaleChange","zoom","onZoomChange","onThemeChange","rowDensity","onRowDensityChange","showThemeSelector","showCreateTaskButton","taskFilter","onTaskFilterChange","timeScaleOptions","themeOptions","Moon","Sun","val","ZoomOut","ZoomIn","ColumnManager","onToggleColumn","ContextMenu","items","adjustedPosition","setAdjustedPosition","padding","adjustedX","adjustedY","getSolidBackground","ChevronRight","MenuIcons","Edit3","Pencil","Minus","BarChart3","ArrowUpDown","ArrowUp","ArrowDown","EyeOff","Eye","Settings","Scissors","PlayCircle","useGanttKeyboard","tasks","selectedTaskIds","onTaskSelect","onTaskCreate","onTaskDelete","onTaskDuplicate","onTaskMove","onTaskIndent","onTaskOutdent","onTaskRename","onTaskToggleExpand","onOpenTaskModal","enableKeyboard","isEditingRef","editing","flattenTasks","traverse","getFirstSelectedTask","flatTasks","handleNavigation","direction","multiSelect","nextIndex","nextTask","ctrlOrCmd","selectedIds","useGanttSelection","setSelectedTaskIds","lastSelectedId","setLastSelectedId","selectTask","toggleTaskSelection","selectTaskRange","flatTaskIds","rangeIds","handleTaskClick","shift","handleKeyboardSelection","clearSelection","isTaskSelected","parentId","findTask","found","findParentTask","childId","indentTasks","taskIds","firstTaskId","taskIndex","targetParent","removeTasks","ids","removed","addAsChildren","idsSet","outdentTasks","parent","grandparent","removeFromParent","insertAfterTask","afterId","moveTasks","moveInArray","deleteTasks","filterTasks","duplicateTasks","duplicateTask","original","copy","duplicateSubtasks","createTask","afterTaskId","weekFromNow","newTask","insertTask","insertIndex","renameTask","newName","toggleTaskExpansion","createSubtask","parentTaskId","findParent","parentTask","addSubtask","reparentTask","newParentId","taskToMove","isDescendant","removeTask","taskList","insertPos","addToParent","newSubtasks","TaskGrid","ROW_HEIGHT","_templates","onTaskClick","onTaskDblClick","onTaskContextMenu","onTaskToggle","_scrollTop","onColumnResize","onMultiTaskDelete","onCreateSubtask","onDeleteRequest","onTaskReparent","hoveredTaskId","setHoveredTaskId","editingTaskId","setEditingTaskId","editingTaskName","setEditingTaskName","editInputRef","resizingColumn","setResizingColumn","resizeStartX","setResizeStartX","resizeStartWidth","setResizeStartWidth","contextMenu","setContextMenu","draggedTaskId","setDraggedTaskId","dropTargetTaskId","setDropTargetTaskId","dropPosition","setDropPosition","dragStartY","dragThreshold","isDraggingRef","ghostPosition","setGhostPosition","isDraggingState","setIsDraggingState","datePickerState","setDatePickerState","showKeyboardHelp","setShowKeyboardHelp","keyboardHelpRef","handleMouseMove","deltaX","newWidth","handleMouseUp","handleSelectionClick","handleRenameStart","HEADER_HEIGHT","contentHeight","getDuration","handleRenameSave","handleRenameCancel","handleCreateSubtaskClick","handleDragMove","foundTarget","relativeY","rowHeight","targetId","findPositionInSiblings","pos","ft","renderCellContent","isHovered","GripVertical","dateField","dateValue","isDatePickerOpen","formatDisplayDate","Calendar","nextWeek","ChevronLeft","m","remaining","taskAssignedUsers","priorityMapForSelector","reversePriorityMapForTask","currentPriorityValue","getHeaderContextMenuItems","getTaskContextMenuItems","visibleColumns","totalColumnsWidth","colIndex","isLastColumn","isNameColumn","Keyboard","isDropTarget","showDropAbove","showDropBelow","showDropChild","dropStyles","draggedTask","initialX","initialWidth","dragMode","setDragMode","dragOffset","setDragOffset","ghostX","setGhostX","ghostWidth","setGhostWidth","connectionLine","setConnectionLine","activeZone","setActiveZone","draggedSegmentIndex","setDraggedSegmentIndex","draggedSegmentStartX","setDraggedSegmentStartX","segmentDragOffsetX","setSegmentDragOffsetX","hoveredSegmentIndex","setHoveredSegmentIndex","setIsHovered","TaskBar","dayWidth","onDoubleClick","onContextMenu","onDateChange","onDependencyCreate","allTaskPositions","onDragMove","onHoverChange","svgRef","autoScrollIntervalRef","lastMouseEventRef","isResizing","isConnecting","resetDragState","borderRadius","isOverdue","isAtRisk","isNeutralTheme","taskColor","RESIZE_ZONE","barWidth","isSmallBar","isVerySmallBar","showBelow","formatDate","snapToDay","pixelX","pixelToDate","findTaskAtPoint","pointX","pointY","taskPos","handleMouseDown","mode","segmentX","svgElement","svgPoint","effectiveX","actualMode","relativeX","performAutoScroll","timelineScroll","edgeThreshold","scrollSpeed","scrollDelta","distance","needsScroll","targetTaskId","rawNewX","snappedX","daysDelta","segmentOffset","rawNewStart","snappedStart","rawNewEnd","taskDuration","isValid","dayOffset","updatedSegments","seg","newSegStart","newSegEnd","allDates","newTaskStart","newTaskEnd","handleGlobalMouseMove","handleGlobalMouseUp","displayX","displayWidth","customClass","segment","segmentStartX","segmentWidth","isThisSegmentDragging","isThisSegmentHovered","displaySegmentX","labelText","truncated","tooltipY","arrowPath","nameY","row1Y","row2Y","assigneesY","hintsY","TaskTooltip","tooltipData","tooltipHeight","tooltipGap","DependencyLine","x1","y1","x2","y2","lineStyle","isHoverLayer","mousePos","setMousePos","dy","goingDown","isSameRow","r","OFFSET","isBackward","path","turnX","ctrlOffset","firstTurnX","secondTurnX","bridgeY","arrowSize","lineColor","hoverColor","deleteColor","deleteColorSoft","deleteX","deleteY","segments","minDist","closestPoint","projectPointOnSegment","dist","px","py","dx","lenSq","svg","handleMouseLeave","Milestone","ganttUtils","durationDays","dayOfWeek","workingDays","daysAdded","fromTaskId","toTaskId","buildMap","flatten","parents","currentId","json","parsed","flat","dateString","tasksWithDates","task1","task2","ascending","diff","newId","autoTable","XLSX","worksheet","columnWidths","workbook","projectName","taskUIDMap","formatMSDate","projectStart","projectEnd","xmlTasks","uid","predecessorLinks","xml","earlyDates","calculateEarlyDates","depEF","ef","lateDates","calculateLateDates","successors","lf","successor","succLS","ls","criticalPath","early","late","slack","dependents","daysToEnd","earliestDepStart","changedTaskId","changedTask","updatedTasks","dependent","updateTaskRec","timelineStartDate","scaledDayWidth","headerHeight","previews","rangeStart","msPerDay","getAffectedTasks","parentDelta","rowIndex","taskStart","originalX","previewX","splitDate","gapDays","firstSegmentEnd","secondSegmentStart","tasksList","Timeline","dependencyLineStyle","onTaskDateChange","onDependencyDelete","cascadePreviews","setCascadePreviews","activeTooltip","setActiveTooltip","handleTooltipChange","totalDays","timelineWidth","getWeekNumber","dayNum","yearStart","isWeekend","handleTimelineClick","calculateParentDates","subtasksWithDates","startDates","endDates","earliestStart","latestEnd","tasksWithCalculatedDates","getTaskPosition","taskEnd","daysFromStart","minWidth","taskPositions","handleTaskDragMove","weekNum","todayX","nextX","isWeekendDay","hasTaskBar","isContainer","toIndex","fromIndex","fromPos","toPos","exitX","exitY","enterX","enterY","preview","DEFAULT_SUGGESTIONS","AIIcon","SendIcon","CloseIcon","MinimizeIcon","LoadingDots","GanttAIAssistant","_onTasksUpdate","isMinimized","setIsMinimized","messages","setMessages","inputValue","setInputValue","setIsLoading","showSuggestions","setShowSuggestions","messagesEndRef","chatContainerRef","onCommand","maxHistory","persistHistory","persistMaxMessages","saved","messagesWithDates","msg","messagesToPersist","applyCommandResult","handleSendCommand","command","userMessage","loadingMessage","withoutLoading","assistantMessage","handleSuggestionClick","positionClasses","useUndoRedo","initialState","maxHistorySize","history","setHistory","isApplyingHistory","newStateOrUpdater","addToHistory","currentHistory","resolvedNewState","newPast","undo","previous","redo","newFuture","clearHistory","useGanttUndoRedoKeys","canUndo","canRedo","ctrlKey","defaultTemplates","assigneeNames","classes","mergeTemplates","userTemplates","getRowHeight","density","GanttBoard","forwardRef","onTasksChange","ref","initialTimeScale","initialRowDensity","showExportButton","enableAutoCriticalPath","persistExpandedState","aiAssistant","externalTaskFilter","externalOnTaskFilterChange","onProgressChange","onTaskEdit","onTaskAddSubtask","onTaskMarkIncomplete","onTaskSetInProgress","onBeforeTaskAdd","onAfterTaskAdd","onBeforeTaskUpdate","onAfterTaskUpdate","onBeforeTaskDelete","onAfterTaskDelete","globalTheme","setCurrentTheme","setTimeScale","setRowDensity","setZoom","internalTaskFilter","setInternalTaskFilter","setTaskFilter","scrollTop","setScrollTop","setIsResizing","gridWidthOverride","setGridWidthOverride","editingTask","setEditingTask","deleteConfirmation","setDeleteConfirmation","handleThemeChange","localTasks","setLocalTasks","getStorageKey","expandedStatesRef","hasInitializedFromStorage","saveExpandedStatesToStorage","entries","applyExpandedState","preservedState","prevTasksRef","isInitialMount","prevJson","currentJson","getDefaultColumns","setColumns","calculatedGridWidth","prevVisibleColumnsRef","visibleCols","currentKey","prevKey","hasAdditionalColumns","prevHadAdditional","BUTTONS_WIDTH","MAX_VIEWPORT_PERCENT","gridWidth","contentWidth","viewportMax","maxAllowed","gridScrollRef","timelineScrollRef","ganttContainerRef","ganttThemeContextValue","mergedTemplates","tasksWithCriticalPath","criticalPathIds","markCritical","filterTasksRecursively","filteredSubtasks","matches","useImperativeHandle","update","remove","newTasks","expand","collapse","expandAll","collapseAll","ganttContainer","gridScroll","originalGridScrollTop","originalTimelineScrollTop","originalOverflow","originalHeight","taskGridContent","timelineSvg","gridContentHeight","timelineContentHeight","totalHeight","zIndex","imported","handleToggleColumn","handleColumnResize","minW","maxW","clampedWidth","handleTaskToggle","findAndUpdateExpandedState","handleTaskUpdate","oldProgress","updateTask","handleTaskIndent","handleTaskOutdent","handleTaskReparent","handleTaskMove","handleMultiTaskDelete","allowedTaskIds","handleTaskDuplicate","handleTaskCreate","handleTaskRename","handleCreateSubtask","handleTaskDateChange","newStart","newEnd","handleTaskContextMenu","handleSplitTask","handleTaskDblClickInternal","currentTask","handleDependencyCreate","fromTask","updateTaskDependencies","handleDependencyDelete","dependencyId","removeTaskDependency","minDate","maxDate","handleExportPNG","originalGridScrollLeft","originalTimelineScrollLeft","originalGridOverflow","originalTimelineOverflow","originalContainerWidth","originalTimelineWidth","svgHeight","timelineSvgWidth","toolbarHeight","totalWidth","handleExportPDF","handleExportExcel","handleExportCSV","csv","handleExportJSON","handleExportMSProject","isSyncingScroll","isPanning","setIsPanning","panStartRef","handleTimelineScroll","scrollY","handleGridScroll","containerLeft","maxWidth","deltaY","handleTimelineMouseDown","hasScrolledToToday","initialStartDateRef","useLayoutEffect","scrollX","taskName","staleTask","startTime","endTime","midTime","AlertTriangle","DEFAULT_STATUSES","PRIORITIES","TaskFormModal","ds","themeColors","colorPickerPosition","setColorPickerPosition","datePickerPosition","setDatePickerPosition","showAdvanced","setShowAdvanced","pendingFiles","setPendingFiles","statusRef","priorityRef","assigneesRef","colorRef","dateRowRef","formData","setFormData","setErrors","validate","newErrors","submitData","statusValue","progressValue","currentStatus","currentPriority","currentColor","AlertCircle","CircleDot","Users","pickerHeight","top","isStart","isEnd","MilestoneIcon","GANTT_AI_SYSTEM_PROMPT","generateTasksContext","findTaskByName","normalizedName","exact","partial","words","word","parseNaturalDate","referenceDate","normalized","dayMatch","targetDay","currentDay","daysToAdd","inMatch","amount","unit","dateMatch","spanishMonths","spanishDateMatch","englishMonths","englishDateMatch","parseNaturalDuration","parseProgress","parseStatus","parseLocalCommand","moveMatch","dateText","extendMatch","durationText","progressMatch","progressText","renameMatch","oldName","linkMatch","fromName","toName","toTask","deleteMatch","validateAIResponse","response","mapCardStatusToTaskStatus","mapTaskStatusToCardStatus","cardToGanttTask","parseDate","isMilestone","ganttTaskToCardUpdate","cardsToGanttTasks","listViewTranslations","getListViewTranslations","mergeListViewTranslations","StatusCell","defaultStatus","Icon","getLabel","OptionIcon","PriorityCell","lang","getAvatarColor","hash","AssigneesCell","userName","newAssignee","MONTH_NAMES","DAY_NAMES","DateCell","viewDate","setViewDate","getDaysInMonth","getFirstDayOfMonth","renderCalendar","ProgressCell","clampedValue","TextCell","NumberCell","min","numValue","finalValue","DropdownCell","CheckboxCell","TagsCell","remainingCount","TableContextMenu","onColumnHide","onColumnSort","getTaskMenuItems","Copy","getHeaderMenuItems","menuItems","menuStyle","SubmenuItem","timeoutRef","subItem","COLUMN_ICONS","Type","CalendarCheck","Hash","CheckSquare","STANDARD_COLUMNS","customFields","onColumnsChange","onCreateCustomField","panelRef","getColumnLabel","toggleColumnVisibility","newColumns","addColumn","customFieldId","existingColumn","newColumn","f","filteredStandardColumns","filteredCustomFields","Search","isVisible","isName","FIELD_TYPES","CreateFieldModal","setType","setOptions","addOption","updateOption","newOptions","removeOption","StatusFilter","hideCompleted","onHideCompletedChange","DEFAULT_COLUMNS","flattenTasksWithLevel","ListView","showSearch","showHierarchy","tableColumns","allowColumnCustomization","allowColumnResize","enableContextMenu","sortField","setSortField","sortOrder","setSortOrder","statusFilter","setStatusFilter","setHideCompleted","showColumnSelector","setShowColumnSelector","showCreateFieldModal","setShowCreateFieldModal","tableRef","expandedTasks","expanded","collectExpanded","toggleExpand","handleSort","handleColumnsChange","handleColumnHide","handleColumnSort","handleContextMenu","closeContextMenu","handleResizeStart","delta","handleCreateCustomField","fullField","getTaskStatus","displayTasks","query","aVal","bVal","priorityOrder","renderCell","getCustomFieldValue","fieldId","cf","updateCustomField","dateVal","checked","List","DEFAULT_TABLE_COLUMNS","STANDARD_FIELDS","CUSTOM_FIELD_TYPES","listViewThemes","getListViewTheme","calendarTranslations","getCalendarTranslations","mergeCalendarTranslations","getMonthNames","getWeekdayNames","firstDayOfWeek","short","weekdays","isDateInTaskRange","dateOnly","startOnly","endOnly","CalendarBoard","initialDate","attachmentsByTask","_mentionableUsers","currentDate","setCurrentDate","selectedDay","setSelectedDay","expandedCells","setExpandedCells","DEFAULT_VISIBLE_TASKS","TASKS_INCREMENT","quickCreateCell","setQuickCreateCell","quickCreateName","setQuickCreateName","quickCreatePriority","setQuickCreatePriority","quickCreateAssignee","setQuickCreateAssignee","showQuickPriorityDropdown","setShowQuickPriorityDropdown","showQuickAssigneeDropdown","setShowQuickAssigneeDropdown","quickCreateDate","setQuickCreateDate","showQuickDatePicker","setShowQuickDatePicker","quickDatePickerMonth","setQuickDatePickerMonth","goToPreviousMonth","goToNextMonth","goToToday","calendarDays","firstDayOfMonth","lastDayOfMonth","startDay","flatTaskList","prevMonthDays","dayNames","monthName","currentTaskAttachments","visibleCount","visibleEvents","isNearBottom","isNearRight","taskDate","daysInPrevMonth","todayDate","calDays","timeAgo","commentDate","calendarThemes","getCalendarTheme","CardStack","stack","onToggleExpand","onUnstack","onDeleteStack","stackCards","stats","totalCards","uniqueAssignees","priorities","handleToggle","DEFAULT_TIMELINE_CONFIG","formatEventDescription","getEventIcon","getEventColor","CardHistoryTimeline","events","filter","onFilterChange","onClearFilter","onEventClick","selectedEventId","expandedEvents","setExpandedEvents","timelineRef","groupedEvents","dateKey","group","uniqueUsers","uniqueTypes","types","toggleEvent","eventId","formatRelativeTime","activeFilterCount","eventIndex","eventColor","change","CardHistoryReplay","replayState","onStartReplay","onStopReplay","onTogglePlayback","onPrevious","onNext","onGoToEvent","onSpeedChange","speeds","currentEvent","speed","getRelationshipColor","getRelationshipLabel","getRelationshipIcon","isDirectionalRelationship","runForceSimulation","nodes","edges","iterations","simNodes","nodeMap","iter","alpha","centerX","centerY","other","force","edge","source","CardRelationshipsGraph","_filter","_onFilterChange","onInteraction","simulatedNodes","setSimulatedNodes","draggingNode","setDraggingNode","hoveredNode","setHoveredNode","hoveredEdge","setHoveredEdge","pan","setPan","simulated","handleNodeMouseDown","nodeId","handleNodeClick","handleEdgeClick","getNodePosition","getNodeColor","z","sourcePos","targetPos","isDirectional","isCritical","GeneratePlanModal","onPlanGenerated","externalLoading","prompt","setPrompt","isGenerating","setIsGenerating","generatedPlan","setGeneratedPlan","handleGenerate","plan","handleApplyPlan","example","AI_MODELS","RATE_LIMITS","AI_FEATURES","calculateCost","model","inputTokens","outputTokens","modelInfo","inputCost","outputCost","formatCost","cost","AIUsageTracker","operation","fullOperation","listener","timeRange","operations","op","totalOperations","totalCost","totalInputTokens","totalOutputTokens","successfulOps","totalDuration","operationsByFeature","costsByFeature","limit","planTier","period","periodOperations","percentUsed","aiUsageTracker","AIUsageDashboard","setStats","setLimit","interval","recentOps","feature","GenerateGanttTasksDialog","onTasksGenerated","onGenerateTasks","generatedTasks","setGeneratedTasks","responseMetadata","setResponseMetadata","handleApplyTasks","similarity","useKanbanState","initialBoard","onPersist","setBoard","persistBoard","updatedBoard","handleCardMove","sourceColumnId","updatedCards","updatedColumns","targetCards","handleCardCreate","newCardId","newCard","handleCardDelete","handleColumnCreate","newColumnId","handleColumnUpdate","addCard","clearBoard","useBoard","initialData","helpers","utils","maxPosition","DEFAULT_FILTERS","DEFAULT_SORT","useFilters","initialFilters","initialSort","setFiltersState","setSortState","setFilters","newFilters","setSort","newSort","resetFilters","filterMyTasks","filterOverdue","filterHighPriority","applyFilters","todayString","dueDate","dueDateString","cardDueDate","due","comparison","aCreated","bCreated","aPriority","bPriority","aDue","bDue","aTime","bTime","aEst","bEst","generateObject","generateText","aiSDK","useAI","isAvailable","_boardState","useSelectionState","selectionStore","setSelectionState","useMultiSelect","selectionState","isCardSelected","selectCard","isCtrlOrCmd","isShift","lastCard","startIndex","endIndex","minIndex","maxIndex","rangeCardIds","newSelection","deselectCard","selectAll","toggleCard","getSelectedCards","DEFAULT_STACKING_CONFIG","useCardStacking","userConfig","aiService","stacks","setStacks","createStack","strategy","newStack","deleteStack","stackId","toggleStack","addToStack","removeFromStack","newCardIds","getStacksForColumn","getSuggestions","byLabels","byAssignee","byPriority","priorityEmoji","highSimilarity","avgConfidence","applySuggestion","topSuggestion","BoardContext","BoardProvider","onStateChange","storeRef","cardsMap","colData","Board","BoardStore","store","_event","useBoardStore","setCards","updateBoard","changes","columnData","updateColumn","deleteColumn","getColumn","updateCard","deleteCard","moveCard","toColumnId","newPosition","getCard","getCardsByColumn","useFilteredCards","matchesTitle","matchesDesc","useSortedCards","sortBy","PluginManager","plugin","pluginId","hookName","defaultValue","hook","hookResult","promises","pluginManager","VirtualList","estimateSize","renderItem","overscan","horizontal","gap","getItemKey","virtualItems","containerStyle","innerStyle","itemStyle","useVirtualList","VirtualGrid","estimateColumnWidth","columnVirtualizer","virtualColumns","virtualColumn","columnStyle","useVirtualGrid","shouldVirtualizeGrid","spacing","fontSize","fontWeight","lineHeight","shadows","opacity","kanban","gantt","designTokens","getToken","tokens","flattenTokens","obj","newKey","formatCSSValue","generateCSSVariables","flatTokens","cssVars","varValue","generateThemeVariables","flatColors","generateCompleteCSS","tokenVars","themeVars","exportTokensToCSS","ThemeIcon","ThemeSwitcher","showLabels"],"mappings":"ixDAQA,IAAA,EAAA,CAAA,CAAA,CAAA,EAAA,OAAA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA,OAAA,KAAA,CAAA,GAAA,CAAA,IAAA,KAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,CAAA,OAAA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,SAAA,CAAA,CAAA,CAAA,GAAA,OAAA,OAAA,CAAA,GAAA,CAAA,OAAA,OAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA,MAAA,KAAA,CAAA,sBAAA,CAAA,CAAA,CAAA,oBAAA,CAAA,CAAA,CAAA,CCJ2C,ICS9BA,EAAAA,CAAMC,OAAOC,MAAAA,CAAO,CAC/BC,SAAAA,CAAW,CACTC,SAASC,CAAAA,CAAD,CACN,GAAI,CAACA,EACH,OAGF,GAAM,CAACC,CAAAA,CAAAA,EAAGC,CAAAA,CAAAA,CAAAA,CAAAA,CAAKF,CAAAA,CAEf,OAAA,gBAAsBC,CAAAA,CAAIE,IAAAA,CAAKC,KAAAA,CAAMH,CAAX,EAAgB,CAAA,CAAA,CAA1C,MAAA,EACEC,CAAAA,CAAIC,IAAAA,CAAKC,MAAMF,CAAX,CAAA,CAAgB,CAAA,CAAA,CADtB,QAAA,CAAA,CAAA,CAKJG,MAAO,CACLN,QAAAA,CAASC,CAAAA,CAAD,CACN,GAAI,CAACA,CAAAA,CACH,OAGF,GAAM,CAACM,MAAAA,CAAAA,CAAAA,CAAQC,MAAAA,CAAAA,CAAAA,CAAAA,CAAUP,EAEzB,OAAA,SAAA,CAAiBM,CAAAA,CAAjB,WAAA,CAAmCC,EAAnC,GAAA,CAAA,CAAA,CAGJC,SAAAA,CAAW,CACTT,QAAAA,CAASC,EAAD,CACN,GAAKA,CAAAA,CAIL,OAAO,CACLL,EAAAA,CAAIG,SAAAA,CAAUC,QAAAA,CAASC,CAAvB,EACAL,EAAAA,CAAIU,KAAAA,CAAMN,QAAAA,CAASC,CAAnB,CAFK,CAAA,CAGLS,IAAAA,CAAK,GAHA,CAAA,CAAA,CAAA,CAMXC,WAAY,CACVX,QAAAA,CAAQY,CAAAA,CAAA,CAAA,GAAC,CAACC,QAAAA,CAAAA,CAAAA,CAAUC,QAAAA,CAAAA,CAAAA,CAAUC,OAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAC5B,OAAUF,CAAAA,CAAV,GAAA,CAAsBC,EAAtB,KAAA,CAAoCC,CAAAA,CAAAA,CAvCT,CAAd,CAAA,CCGZ,SAASC,CAAAA,CAAAA,GAAMC,EAAsB,CAC1C,OAAOC,OAAAA,CAAQC,IAAAA,CAAKF,CAAM,CAAC,CAC7B,CCCO,SAASG,GACdC,CAAAA,CACAC,CAAAA,CACQ,CAER,OAAID,IAAW,IAAA,EAAQC,CAAAA,GAAU,IAAA,CACxB,GAAA,CAILD,IAAW,IAAA,EAAQC,CAAAA,GAAU,IAAA,CACxBA,CAAAA,CAAQ,EAIbD,CAAAA,GAAW,IAAA,EAAQC,CAAAA,GAAU,IAAA,CACxBD,EAAS,GAAA,CAIdA,CAAAA,GAAW,IAAA,EAAQC,CAAAA,GAAU,MACvBD,CAAAA,CAASC,CAAAA,EAAS,CAAA,CAGrB,GACT,CASO,SAASC,EAAAA,CAAyBC,CAAAA,CAAyB,CAChE,OAAO,KAAA,CAAM,IAAA,CAAK,CAAE,MAAA,CAAQA,CAAM,CAAA,CAAG,CAACC,CAAAA,CAAGC,CAAAA,GAAAA,CAAOA,EAAI,CAAA,EAAK,GAAI,CAC/D,CAwCO,SAASC,EAAAA,CACdC,CAAAA,CACAC,CAAAA,CACQ,CAER,OAAID,CAAAA,CAAY,MAAA,GAAW,CAAA,CAClB,GAAA,CAILC,IAAc,CAAA,CACTT,EAAAA,CAAkB,IAAA,CAAMQ,CAAAA,CAAY,CAAC,CAAA,CAAG,QAAQ,CAAA,CAIrDC,CAAAA,EAAaD,EAAY,MAAA,CACpBR,EAAAA,CACLQ,CAAAA,CAAYA,CAAAA,CAAY,OAAS,CAAC,CAAA,CAAG,QAAA,CACrC,IACF,EAIKR,EAAAA,CACLQ,CAAAA,CAAYC,CAAAA,CAAY,CAAC,EAAG,QAAA,CAC5BD,CAAAA,CAAYC,CAAS,CAAA,CAAG,QAC1B,CACF,CC1CO,SAASC,GAAiBC,CAAAA,CAAmBC,CAAAA,CAAY,GAAA,CAAc,CAC5E,OAAOD,CAAAA,CAAYC,CACrB,CCnDA,IAAMC,EAAAA,CAAsBC,CAAAA,EAA0B,CAEpD,GAAIA,EAAM,OAAA,CAAQ,QAAA,CAAS,SAAS,CAAA,EAAKA,EAAM,OAAA,CAAQ,QAAA,CAAS,OAAO,CAAA,CACrE,OAAO,KAAA,CAIT,GAAI,QAAA,GAAYA,CAAAA,CAAO,CACrB,IAAMC,CAAAA,CAAUD,CAAAA,CAAc,MAAA,CAE9B,OAAOC,CAAAA,EAAU,GAAA,EAAOA,CAAAA,GAAW,GACrC,CAEA,OAAO,MACT,CAAA,CAKA,SAASC,GACPC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACQ,CACR,IAAMC,CAAAA,CAAQH,CAAAA,CAAe,IAAA,CAAK,IAAIC,CAAAA,CAAmBF,CAAAA,CAAU,CAAC,CAAA,CAE9DK,EAASD,CAAAA,CAAQ,EAAA,CAAM,IAAA,CAAK,MAAA,GAClC,OAAO,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAQC,EAAQF,CAAQ,CAC1C,CAkBA,eAAsBG,GACpBC,CAAAA,CACAC,CAAAA,CAAwB,EAAC,CACA,CACzB,GAAM,CACJ,WAAA,CAAAC,CAAAA,CAAc,EACd,YAAA,CAAAR,CAAAA,CAAe,GAAA,CACf,iBAAA,CAAAC,EAAoB,CAAA,CACpB,QAAA,CAAAC,CAAAA,CAAW,GAAA,CACX,YAAAO,CAAAA,CAAcd,EAAAA,CACd,OAAA,CAAAe,CACF,EAAIH,CAAAA,CAEAI,CAAAA,CACAC,CAAAA,CAAW,CAAA,CAEf,QAASb,CAAAA,CAAU,CAAA,CAAGA,CAAAA,EAAWS,CAAAA,CAAaT,IAAW,CACvDa,CAAAA,CAAWb,CAAAA,CAEX,GAAI,CAEF,OAAO,CACL,IAAA,CAFW,MAAMO,GAAG,CAGpB,QAAA,CAAAM,CAAAA,CACA,OAAA,CAAS,EACX,CACF,CAAA,MAAShB,CAAAA,CAAO,CAKd,GAJAe,CAAAA,CAAYf,CAAAA,CAGUG,CAAAA,GAAYS,CAAAA,EACb,CAACC,CAAAA,CAAYE,CAAAA,CAAWZ,CAAO,CAAA,CAClD,OAAO,CACL,KAAA,CAAOY,CAAAA,CACP,QAAA,CAAAC,EACA,OAAA,CAAS,KACX,CAAA,CAIF,IAAMT,EAAQL,EAAAA,CAAeC,CAAAA,CAASC,CAAAA,CAAcC,CAAAA,CAAmBC,CAAQ,CAAA,CAG/E,GAAIQ,CAAAA,CACF,GAAI,CACFA,CAAAA,CAAQC,CAAAA,CAAWZ,CAAAA,CAASI,CAAK,EACnC,CAAA,MAASU,CAAAA,CAAe,CACtB,OAAA,CAAQ,MAAM,0BAAA,CAA4BA,CAAa,EACzD,CAIF,MAAM,IAAI,OAAA,CAASC,CAAAA,EAAY,UAAA,CAAWA,EAASX,CAAK,CAAC,EAC3D,CACF,CAGA,OAAO,CACL,KAAA,CAAOQ,CAAAA,EAAa,IAAI,KAAA,CAAM,eAAe,CAAA,CAC7C,QAAA,CAAAC,EACA,OAAA,CAAS,KACX,CACF,CAMO,SAASG,EAAAA,CACdT,CAAAA,CACAE,CAAAA,CAAsB,CAAA,CACyB,CAC/C,IAAIG,CAAAA,CAEJ,IAAA,IAASZ,CAAAA,CAAU,EAAGA,CAAAA,EAAWS,CAAAA,CAAaT,CAAAA,EAAAA,CAC5C,GAAI,CAEF,OAAO,CAAE,IAAA,CADIO,CAAAA,GACE,OAAA,CAAS,CAAA,CAAK,CAC/B,CAAA,MAASV,EAAO,CAGd,GAFAe,CAAAA,CAAYf,CAAAA,CAERG,IAAYS,CAAAA,CACd,OAAO,CAAE,KAAA,CAAOG,EAAW,OAAA,CAAS,KAAM,CAE9C,CAGF,OAAO,CAAE,KAAA,CAAOA,CAAAA,EAAa,IAAI,MAAM,eAAe,CAAA,CAAG,OAAA,CAAS,KAAM,CAC1E,CAgBO,SAASK,EAAAA,CACdV,CAAAA,CACAC,EAAwB,EAAC,CAC0B,CACnD,gBAAiBU,CAAAA,GACRZ,EAAAA,CAAiB,IAAMC,CAAAA,CAAG,GAAGW,CAAI,CAAA,CAAGV,CAAO,CAEtD,CAMO,IAAMW,EAAAA,CAAN,KAAqB,CAK1B,YACUxB,CAAAA,CAAoB,CAAA,CACpByB,CAAAA,CAAuB,GAAA,CAC/B,CAFQ,IAAA,CAAA,SAAA,CAAAzB,CAAAA,CACA,IAAA,CAAA,YAAA,CAAAyB,CAAAA,CANV,KAAQ,QAAA,CAAmB,CAAA,CAC3B,IAAA,CAAQ,eAAA,CAA0B,EAClC,IAAA,CAAQ,MAAA,CAAkB,MAKvB,CAEH,MAAM,OAAA,CAAWb,CAAAA,CAAkC,CAEjD,GAAI,KAAK,MAAA,CAIP,GAH6B,IAAA,CAAK,GAAA,GAAQ,IAAA,CAAK,eAAA,EAGnB,IAAA,CAAK,YAAA,CAC/B,KAAK,KAAA,EAAM,CAAA,KAEX,MAAM,IAAI,MAAM,6CAA6C,CAAA,CAIjE,GAAI,CACF,IAAMc,CAAAA,CAAS,MAAMd,CAAAA,EAAG,CACxB,YAAK,SAAA,EAAU,CACRc,CACT,CAAA,MAASxB,EAAO,CACd,MAAA,IAAA,CAAK,SAAA,EAAU,CACTA,CACR,CACF,CAEQ,SAAA,EAAkB,CACxB,KAAK,QAAA,CAAW,CAAA,CAChB,IAAA,CAAK,MAAA,CAAS,MAChB,CAEQ,SAAA,EAAkB,CACxB,IAAA,CAAK,WACL,IAAA,CAAK,eAAA,CAAkB,IAAA,CAAK,GAAA,GAExB,IAAA,CAAK,QAAA,EAAY,IAAA,CAAK,SAAA,GACxB,KAAK,MAAA,CAAS,IAAA,EAElB,CAEQ,KAAA,EAAc,CACpB,IAAA,CAAK,QAAA,CAAW,CAAA,CAChB,IAAA,CAAK,OAAS,MAChB,CAEA,SAAA,EAAmD,CACjD,OAAO,CACL,QAAA,CAAU,IAAA,CAAK,QAAA,CACf,OAAQ,IAAA,CAAK,MACf,CACF,CACF,ECvPO,IAAKyB,EAAAA,CAAAA,CAAAA,CAAAA,GACVA,CAAAA,CAAAA,CAAAA,CAAA,KAAA,CAAQ,GAAR,OAAA,CACAA,CAAAA,CAAAA,CAAAA,CAAA,IAAA,CAAO,CAAA,CAAA,CAAP,OACAA,CAAAA,CAAAA,CAAAA,CAAA,IAAA,CAAO,CAAA,CAAA,CAAP,MAAA,CACAA,IAAA,KAAA,CAAQ,CAAA,CAAA,CAAR,OAAA,CACAA,CAAAA,CAAAA,CAAAA,CAAA,KAAO,CAAA,CAAA,CAAP,MAAA,CALUA,CAAAA,CAAAA,EAAAA,EAAAA,EAAA,EAAA,CAAA,CAyDCC,GAAN,MAAMA,EAAO,CAIlB,WAAA,CAAYf,EAAyB,EAAC,CAAG,CA8GzC,IAAA,CAAQ,kBAAqBgB,CAAAA,EAA0B,CACrD,GAAM,CAAE,UAAAC,CAAAA,CAAW,KAAA,CAAAC,CAAAA,CAAO,OAAA,CAAAC,EAAS,SAAA,CAAAC,CAAAA,CAAW,GAAGC,CAAK,EAAIL,CAAAA,CAEpDM,CAAAA,CAAS,CAAA,CAAA,EAAIL,CAAS,MAAMC,CAAK,CAAA,GAAA,EAAME,CAAS,CAAA,CAAA,CAAA,CAChDG,EAAa,MAAA,CAAO,IAAA,CAAKF,CAAI,CAAA,CAAE,OAAS,CAAA,CAE9C,OAAQH,CAAAA,EACN,KAAK,OAAA,CACH,OAAA,CAAQ,KAAA,CAAMI,CAAAA,CAAQH,EAASI,CAAAA,CAAaF,CAAAA,CAAO,EAAE,CAAA,CACrD,MACF,KAAK,MAAA,CACH,OAAA,CAAQ,IAAA,CAAKC,EAAQH,CAAAA,CAASI,CAAAA,CAAaF,CAAAA,CAAO,EAAE,EACpD,MACF,KAAK,MAAA,CACH,OAAA,CAAQ,KAAKC,CAAAA,CAAQH,CAAAA,CAASI,CAAAA,CAAaF,CAAAA,CAAO,EAAE,CAAA,CACpD,MACF,KAAK,OAAA,CACH,QAAQ,KAAA,CAAMC,CAAAA,CAAQH,CAAAA,CAASI,CAAAA,CAAaF,EAAO,EAAE,CAAA,CACjDL,CAAAA,CAAM,KAAA,EAAO,OACf,OAAA,CAAQ,KAAA,CAAMA,CAAAA,CAAM,KAAA,CAAM,KAAK,CAAA,CAEjC,KACJ,CACF,CAAA,CApIE,IAAMQ,CAAAA,CAAQ,OAAA,CAAQ,GAAA,CAAI,QAAA,GAAa,cAEvC,IAAA,CAAK,OAAA,CAAU,CACb,QAAA,CAAUxB,EAAQ,QAAA,GAAawB,CAAAA,CAAQ,CAAA,CAAiB,CAAA,CAAA,CACxD,QAASxB,CAAAA,CAAQ,OAAA,EAAW,IAAA,CAC5B,KAAA,CAAOA,EAAQ,KAAA,EAAS,IAAA,CAAK,iBAAA,CAC7B,YAAA,CAAcA,EAAQ,YAAA,EAAgB,IAAA,CACtC,aAAA,CAAeA,CAAAA,CAAQ,eAAiB,QAAA,CACxC,GAAGe,EAAAA,CAAO,aACZ,EACF,CAMA,OAAO,SAAA,CAAUf,CAAAA,CAAuC,CACtDe,EAAAA,CAAO,aAAA,CAAgB,CAAE,GAAGA,GAAO,aAAA,CAAe,GAAGf,CAAQ,EAC/D,CAKA,KAAA,CAAMyB,CAAAA,CAA+B,CACnC,OAAO,IAAIV,EAAAA,CAAO,CAChB,GAAG,IAAA,CAAK,QACR,aAAA,CAAe,CAAA,EAAG,IAAA,CAAK,OAAA,CAAQ,aAAa,CAAA,CAAA,EAAIU,CAAa,CAAA,CAC/D,CAAC,CACH,CAKA,KAAA,CAAMN,CAAAA,CAAiBO,CAAAA,CAA4B,CACjD,IAAA,CAAK,GAAA,CAAI,CAAA,CAAgBP,CAAAA,CAASO,CAAO,EAC3C,CAKA,IAAA,CAAKP,CAAAA,CAAiBO,EAA4B,CAChD,IAAA,CAAK,GAAA,CAAI,CAAA,CAAeP,EAASO,CAAO,EAC1C,CAKA,IAAA,CAAKP,EAAiBO,CAAAA,CAA4B,CAChD,IAAA,CAAK,GAAA,CAAI,EAAeP,CAAAA,CAASO,CAAO,EAC1C,CAKA,MAAMP,CAAAA,CAAiB9B,CAAAA,CAAeqC,CAAAA,CAA4B,CAChE,KAAK,GAAA,CAAI,CAAA,CAAgBP,CAAAA,CAAS,CAChC,GAAGO,CAAAA,CACH,KAAA,CAAOrC,CAAAA,CACH,CACE,QAASA,CAAAA,CAAM,OAAA,CACf,KAAA,CAAOA,CAAAA,CAAM,MACb,IAAA,CAAMA,CAAAA,CAAM,IACd,CAAA,CACA,MACN,CAAC,EACH,CAKA,UAAA,CAAWsC,EAAuB,CAChC,OAAK,IAAA,CAAK,OAAA,CAAQ,aAIX,IAAIC,EAAAA,CACT,CAAC3D,CAAAA,CAAkByD,IAAyB,CAC1C,IAAA,CAAK,GAAA,CAAI,CAAA,CAAgB,GAAGC,CAAM,CAAA,UAAA,CAAA,CAAc,CAC9C,GAAGD,EACH,MAAA,CAAAC,CAAAA,CACA,QAAA,CAAA1D,CACF,CAAC,EACH,CAAA,CACA,IACF,CAAA,CAZS,IAAI2D,EAAAA,CAAM,IAAM,CAAC,CAAA,CAAG,KAAK,CAapC,CAKQ,GAAA,CAAIV,CAAAA,CAAiBC,EAAiBO,CAAAA,CAA4B,CACxE,GAAI,CAAC,KAAK,OAAA,CAAQ,OAAA,EAAWR,CAAAA,CAAQ,IAAA,CAAK,QAAQ,QAAA,CAChD,OAGF,IAAMF,CAAAA,CAAkB,CACtB,SAAA,CAAW,IAAI,IAAA,EAAK,CAAE,aAAY,CAClC,KAAA,CAAOF,EAAAA,CAASI,CAAK,EACrB,OAAA,CAAAC,CAAAA,CACA,SAAA,CAAW,IAAA,CAAK,QAAQ,aAAA,CACxB,GAAGO,CACL,CAAA,CAEA,KAAK,OAAA,CAAQ,KAAA,CAAMV,CAAK,EAC1B,CA6BF,CAAA,CA1IaD,EAAAA,CAEI,aAAA,CAAwC,GAFlD,IAAMc,EAAAA,CAANd,EAAAA,CA+IDa,EAAAA,CAAN,KAAY,CAGV,WAAA,CACUE,CAAAA,CACAC,CAAAA,CACR,CAFQ,IAAA,CAAA,KAAA,CAAAD,CAAAA,CACA,IAAA,CAAA,OAAA,CAAAC,CAAAA,CAER,KAAK,SAAA,CAAYA,CAAAA,CAAU,WAAA,CAAY,GAAA,GAAQ,EACjD,CAKA,GAAA,CAAIL,CAAAA,CAA8B,CAChC,GAAI,CAAC,IAAA,CAAK,OAAA,CACR,OAAO,CAAA,CAGT,IAAMzD,CAAAA,CAAW,IAAA,CAAK,MAAM,WAAA,CAAY,GAAA,EAAI,CAAI,IAAA,CAAK,SAAS,CAAA,CAC9D,OAAA,IAAA,CAAK,KAAA,CAAMA,CAAAA,CAAUyD,CAAO,CAAA,CACrBzD,CACT,CAKA,OAAA,EAAkB,CAChB,OAAK,IAAA,CAAK,OAAA,CAGH,IAAA,CAAK,MAAM,WAAA,CAAY,GAAA,EAAI,CAAI,IAAA,CAAK,SAAS,CAAA,CAF3C,CAGX,CACF,CAAA,CAKa+D,GAAS,IAAIH,EAAAA,CC/OnB,SAASI,EAAAA,CAAaC,CAAAA,CAAcC,CAAAA,CAAkC,CAC3E,IAAMC,CAAAA,CAAO,CACX,KAAA,CAAO,CACL,GAAIF,CAAAA,CAAM,EAAA,CACV,KAAA,CAAOA,CAAAA,CAAM,MACb,QAAA,CAAUA,CAAAA,CAAM,QAAA,CAChB,UAAA,CAAY,IAAI,IAAA,EAAK,CAAE,WAAA,EACzB,EACA,OAAA,CAASA,CAAAA,CAAM,OAAA,CACf,KAAA,CAAOA,EAAM,KAAA,CACb,OAAA,CAASC,CACX,CAAA,CAEA,OAAO,IAAA,CAAK,SAAA,CAAUC,CAAAA,CAAM,IAAA,CAAM,CAAC,CACrC,CAEO,SAASC,EAAAA,CAAYH,EAAcC,CAAAA,CAAkC,CAC1E,IAAMG,CAAAA,CAAU,CACd,SAAA,CACA,OAAA,CACA,aAAA,CACA,QAAA,CACA,WACA,QAAA,CACA,gBAAA,CACA,YAAA,CACA,UAAA,CACA,aACA,YACF,CAAA,CAEMC,CAAAA,CAAOL,CAAAA,CAAM,MAAM,GAAA,CAAKM,CAAAA,EAAS,CACrC,IAAMC,EAASP,CAAAA,CAAM,OAAA,CAAQ,IAAA,CAAMQ,CAAAA,EAAQA,EAAI,EAAA,GAAOF,CAAAA,CAAK,QAAQ,CAAA,CAEnE,OAAO,CACLA,CAAAA,CAAK,EAAA,CACLG,EAAAA,CAAUH,EAAK,KAAK,CAAA,CACpBG,EAAAA,CAAUH,CAAAA,CAAK,aAAe,EAAE,CAAA,CAChCG,EAAAA,CAAUF,CAAAA,EAAQ,OAAS,EAAE,CAAA,CAC7BD,CAAAA,CAAK,QAAA,EAAY,IAChBA,CAAAA,CAAK,MAAA,EAAU,EAAC,EAAG,KAAK,GAAG,CAAA,CAAA,CAC3BA,CAAAA,CAAK,eAAA,EAAmB,EAAC,EAAG,IAAA,CAAK,GAAG,CAAA,CACrCA,EAAK,SAAA,EAAa,EAAA,CAClBA,CAAAA,CAAK,OAAA,EAAW,GAChBA,CAAAA,CAAK,SAAA,EAAa,EAAA,CAClBA,CAAAA,CAAK,WAAa,EACpB,CACF,CAAC,CAAA,CAOD,OALmB,CACjBF,CAAAA,CAAQ,IAAA,CAAK,GAAG,EAChB,GAAGC,CAAAA,CAAK,GAAA,CAAKK,CAAAA,EAAQA,EAAI,IAAA,CAAK,GAAG,CAAC,CACpC,EAAE,IAAA,CAAK;AAAA,CAAI,CAGb,CAEA,eAAsBC,EAAAA,CACpBX,CAAAA,CACAY,EACAX,CAAAA,CACgB,CAEhB,IAAIY,CAAAA,CAAUD,CAAAA,CAEd,GAAI,CAACC,CAAAA,CAAS,CAEZ,IAAMC,CAAAA,CAAU,QAAA,CAAS,aAAA,CAA2B,eAAe,CAAA,CAC/DA,CAAAA,GACFD,CAAAA,CAAUC,CAAAA,CAAQ,aAAA,EAAiBA,CAAAA,EAEvC,CAGA,GAAID,CAAAA,CACF,GAAI,CACF,IAAME,CAAAA,CAAS,MAAMC,EAAAA,CAAYH,CAAAA,CAAS,CACxC,eAAA,CAAiB,SAAA,CACjB,KAAA,CAAO,GAAA,CACP,OAAA,CAAS,GACT,OAAA,CAAS,CAAA,CAAA,CACT,UAAA,CAAY,CAAA,CAAA,CACZ,WAAA,CAAaA,CAAAA,CAAQ,WAAA,CACrB,YAAA,CAAcA,CAAAA,CAAQ,YACxB,CAAC,CAAA,CAEKI,CAAAA,CAAUF,CAAAA,CAAO,UAAU,WAAW,CAAA,CAGtCG,CAAAA,CAAW,GAAA,CACXC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAYL,CAAAA,CAAO,KAAA,CAAQA,CAAAA,CAAO,MAAA,CAEpCM,CAAAA,CAAWH,CAAAA,CAAW,EAAA,CACtBI,EAAYD,CAAAA,CAAWD,CAAAA,CAGvBE,CAAAA,CAAYH,CAAAA,CAAY,EAAA,GAC1BG,CAAAA,CAAYH,CAAAA,CAAY,EAAA,CACxBE,CAAAA,CAAWC,CAAAA,CAAYF,CAAAA,CAAAA,CAGzB,IAAMG,CAAAA,CAAM,IAAIC,MAAM,CACpB,WAAA,CAAa,WAAA,CACb,IAAA,CAAM,IAAA,CACN,MAAA,CAAQ,IACV,CAAC,CAAA,CAGDD,CAAAA,CAAI,WAAA,CAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,aAAa,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAC9BA,CAAAA,CAAI,YAAA,CAAa,EAAA,CAAI,EAAA,CAAI,EAAE,CAAA,CAC3BA,CAAAA,CAAI,IAAA,CAAK,CAAA,CAAG,CAAA,CAAGL,EAAU,EAAA,CAAI,GAAG,CAAA,CAChCK,CAAAA,CAAI,IAAA,CAAKvB,CAAAA,CAAM,OAAS,cAAA,CAAgB,EAAA,CAAI,EAAE,CAAA,CAG9C,IAAMyB,CAAAA,CAAAA,CAAWP,EAAWG,CAAAA,EAAY,CAAA,CACxC,OAAAE,CAAAA,CAAI,QAAA,CAASN,CAAAA,CAAS,KAAA,CAAOQ,CAAAA,CAAS,EAAA,CAAIJ,CAAAA,CAAUC,CAAS,CAAA,CAEtDC,CACT,CAAA,MAASpE,EAAO,CACd,OAAA,CAAQ,KAAA,CAAM,wBAAA,CAA0BA,CAAK,EAE/C,CAIF,IAAMoE,CAAAA,CAAM,IAAIC,KAAAA,CACZE,CAAAA,CAAY,EAAA,CAEhB,OAAAH,EAAI,WAAA,CAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,IAAA,CAAKvB,CAAAA,CAAM,KAAA,EAAS,cAAA,CAAgB,EAAA,CAAI0B,CAAS,CAAA,CACrDA,CAAAA,EAAa,EAAA,CAEbH,CAAAA,CAAI,YAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,YAAA,CAAa,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAC9BA,CAAAA,CAAI,IAAA,CAAK,CAAA,YAAA,EAAe,IAAI,IAAA,EAAK,CAAE,gBAAgB,CAAA,CAAA,CAAI,EAAA,CAAIG,CAAS,CAAA,CACpEA,CAAAA,EAAa,EAAA,CAEbH,CAAAA,CAAI,YAAA,CAAa,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CAExBvB,CAAAA,CAAM,QAAQ,OAAA,CAASO,CAAAA,EAAW,CAChC,IAAM1D,CAAAA,CAAcmD,CAAAA,CAAM,KAAA,CAAM,MAAA,CAAQM,CAAAA,EAASA,CAAAA,CAAK,QAAA,GAAaC,CAAAA,CAAO,EAAE,CAAA,CAExEmB,EAAY,GAAA,GACdH,CAAAA,CAAI,OAAA,EAAQ,CACZG,CAAAA,CAAY,EAAA,CAAA,CAGdH,CAAAA,CAAI,WAAA,CAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,OAAA,CAAQ,WAAA,CAAa,MAAM,EAC/BA,CAAAA,CAAI,IAAA,CAAKhB,CAAAA,CAAO,KAAA,CAAO,EAAA,CAAImB,CAAS,EACpCA,CAAAA,EAAa,CAAA,CAET7E,CAAAA,CAAY,MAAA,GAAW,CAAA,EACzB0E,CAAAA,CAAI,YAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,OAAA,CAAQ,WAAA,CAAa,QAAQ,CAAA,CACjCA,CAAAA,CAAI,YAAA,CAAa,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAC9BA,CAAAA,CAAI,KAAK,yBAAA,CAA2B,EAAA,CAAIG,CAAS,CAAA,CACjDH,CAAAA,CAAI,YAAA,CAAa,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CACxBG,CAAAA,EAAa,EAAA,EAEb7E,CAAAA,CAAY,OAAA,CAASyD,GAAS,CAW5B,GAVIoB,CAAAA,CAAY,GAAA,GACdH,CAAAA,CAAI,OAAA,EAAQ,CACZG,CAAAA,CAAY,EAAA,CAAA,CAGdH,CAAAA,CAAI,WAAA,CAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,QAAQ,WAAA,CAAa,MAAM,CAAA,CAC/BA,CAAAA,CAAI,IAAA,CAAKjB,CAAAA,CAAK,KAAA,CAAO,EAAA,CAAIoB,CAAS,CAAA,CAClCA,CAAAA,EAAa,CAAA,CAETpB,CAAAA,CAAK,WAAA,CAAa,CACpBiB,CAAAA,CAAI,WAAA,CAAY,CAAC,CAAA,CACjBA,CAAAA,CAAI,OAAA,CAAQ,WAAA,CAAa,QAAQ,CAAA,CACjC,IAAMI,CAAAA,CAAQJ,CAAAA,CAAI,eAAA,CAAgBjB,CAAAA,CAAK,YAAa,GAAG,CAAA,CACvDiB,CAAAA,CAAI,IAAA,CAAKI,CAAAA,CAAO,EAAA,CAAID,CAAS,CAAA,CAC7BA,CAAAA,EAAaC,CAAAA,CAAM,MAAA,CAAS,EAC9B,CAEA,IAAMC,EAAqB,EAAC,CAQ5B,GAPItB,CAAAA,CAAK,QAAA,EAAUsB,CAAAA,CAAS,IAAA,CAAK,CAAA,UAAA,EAAatB,CAAAA,CAAK,QAAQ,CAAA,CAAE,CAAA,CACzDA,CAAAA,CAAK,MAAA,EAAUA,EAAK,MAAA,CAAO,MAAA,CAAS,CAAA,EACtCsB,CAAAA,CAAS,IAAA,CAAK,CAAA,QAAA,EAAWtB,EAAK,MAAA,CAAO,IAAA,CAAK,IAAI,CAAC,CAAA,CAAE,CAAA,CAE/CA,EAAK,eAAA,EAAmBA,CAAAA,CAAK,eAAA,CAAgB,MAAA,CAAS,CAAA,EACxDsB,CAAAA,CAAS,IAAA,CAAK,CAAA,UAAA,EAAatB,CAAAA,CAAK,eAAA,CAAgB,MAAM,CAAA,QAAA,CAAU,CAAA,CAE9DA,CAAAA,CAAK,WAAaA,CAAAA,CAAK,OAAA,CAAS,CAClC,IAAMuB,CAAAA,CAAQ,EAAC,CACXvB,CAAAA,CAAK,SAAA,EAAWuB,CAAAA,CAAM,IAAA,CAAK,CAAA,OAAA,EAAUvB,CAAAA,CAAK,SAAS,EAAE,CAAA,CACrDA,CAAAA,CAAK,OAAA,EAASuB,CAAAA,CAAM,IAAA,CAAK,CAAA,KAAA,EAAQvB,CAAAA,CAAK,OAAO,CAAA,CAAE,CAAA,CACnDsB,CAAAA,CAAS,IAAA,CAAKC,CAAAA,CAAM,IAAA,CAAK,UAAK,CAAC,EACjC,CAEID,CAAAA,CAAS,MAAA,CAAS,CAAA,GACpBL,CAAAA,CAAI,WAAA,CAAY,CAAC,CAAA,CACjBA,CAAAA,CAAI,YAAA,CAAa,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAC9BA,CAAAA,CAAI,IAAA,CAAKK,CAAAA,CAAS,IAAA,CAAK,UAAK,CAAA,CAAG,EAAA,CAAIF,CAAS,CAAA,CAC5CH,CAAAA,CAAI,YAAA,CAAa,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CACxBG,CAAAA,EAAa,CAAA,CAAA,CAGfA,CAAAA,EAAa,EACf,CAAC,CAAA,CAGHA,CAAAA,EAAa,EACf,CAAC,CAAA,CAEMH,CACT,CAEA,SAASd,GAAUqB,CAAAA,CAAuB,CACxC,OAAIA,CAAAA,CAAM,QAAA,CAAS,GAAG,CAAA,EAAKA,CAAAA,CAAM,QAAA,CAAS,GAAG,CAAA,EAAKA,CAAAA,CAAM,QAAA,CAAS;AAAA,CAAI,CAAA,CAC5D,CAAA,CAAA,EAAIA,CAAAA,CAAM,OAAA,CAAQ,IAAA,CAAM,IAAI,CAAC,CAAA,CAAA,CAAA,CAE/BA,CACT,CAEA,eAAsBC,EAAAA,CACpB/B,EACAgC,CAAAA,CACApB,CAAAA,CACA9C,CAAAA,CACyB,CACzB,OAAQkE,CAAAA,EACN,KAAK,MAAA,CACH,OAAOjC,EAAAA,CAAaC,CAAAA,CAAOlC,CAAO,CAAA,CACpC,KAAK,KAAA,CACH,OAAOqC,EAAAA,CAAYH,CAAc,CAAA,CACnC,KAAK,KAAA,CACH,OAAO,MAAMW,EAAAA,CAAYX,CAAAA,CAAOY,CAAqB,CAAA,CACvD,QACE,MAAM,IAAI,MAAM,CAAA,2BAAA,EAA8BoB,CAAM,CAAA,CAAE,CAC1D,CACF,CAEO,SAASC,EAAAA,CACdC,CAAAA,CACAF,CAAAA,CACAG,CAAAA,CACM,CACN,IAAMC,CAAAA,CAAkB,CAAA,aAAA,EAAgB,IAAI,MAAK,CAAE,OAAA,EAAS,CAAA,CAAA,CAG5D,GAAIJ,CAAAA,GAAW,KAAA,EAAS,OAAOE,CAAAA,EAAY,QAAA,EAAYA,CAAAA,GAAY,IAAA,EAAQ,MAAA,GAAUA,CAAAA,CAAS,CAC5F,IAAMG,EAA4B,CAAA,EAAGD,CAAe,CAAA,IAAA,CAAA,CAClDF,CAAAA,CAAkB,IAAA,CAAKG,CAAa,CAAA,CACtC,MACF,CAEA,GAAI,OAAOH,CAAAA,EAAY,QAAA,CACrB,MAAM,IAAI,MAAM,yCAAyC,CAAA,CAS3D,IAAMG,CAAAA,CAA4B,CAAA,EAAGD,CAAe,CAAA,CAAA,EANH,CAC/C,IAAA,CAAM,MAAA,CACN,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KACP,CAAA,CAEmEJ,CAAM,CAAC,CAAA,CAAA,CAEpEM,CAAAA,CAA0C,CAC9C,IAAA,CAAM,kBAAA,CACN,GAAA,CAAK,UAAA,CACL,IAAK,iBACP,CAAA,CAEMC,CAAAA,CAAO,IAAI,IAAA,CAAK,CAACL,CAAO,CAAA,CAAG,CAAE,IAAA,CAAMI,CAAAA,CAAUN,CAAM,CAAE,CAAC,CAAA,CACtDQ,CAAAA,CAAM,GAAA,CAAI,eAAA,CAAgBD,CAAI,CAAA,CAC9BE,CAAAA,CAAO,QAAA,CAAS,aAAA,CAAc,GAAG,CAAA,CACvCA,EAAK,IAAA,CAAOD,CAAAA,CACZC,CAAAA,CAAK,QAAA,CAAWJ,CAAAA,CAChB,QAAA,CAAS,IAAA,CAAK,WAAA,CAAYI,CAAI,CAAA,CAC9BA,CAAAA,CAAK,KAAA,EAAM,CACX,QAAA,CAAS,IAAA,CAAK,WAAA,CAAYA,CAAI,CAAA,CAC9B,GAAA,CAAI,eAAA,CAAgBD,CAAG,EACzB,CClRO,SAASE,EAAAA,CAAeC,CAAAA,CAAkC,CAC/D,GAAI,CACF,IAAMzC,CAAAA,CAAO,IAAA,CAAK,KAAA,CAAMyC,CAAU,CAAA,CAElC,GAAI,CAACzC,CAAAA,CAAK,KAAA,EAAS,CAACA,CAAAA,CAAK,OAAA,EAAW,CAACA,CAAAA,CAAK,KAAA,CACxC,OAAO,CACL,OAAA,CAAS,CAAA,CAAA,CACT,MAAA,CAAQ,CAAC,sEAAsE,CACjF,CAAA,CAGF,IAAMF,CAAAA,CAAe,CACnB,EAAA,CAAIE,CAAAA,CAAK,KAAA,CAAM,EAAA,CACf,KAAA,CAAOA,CAAAA,CAAK,KAAA,CAAM,KAAA,CAClB,OAAA,CAASA,CAAAA,CAAK,QACd,KAAA,CAAOA,CAAAA,CAAK,KAAA,CACZ,QAAA,CAAUA,CAAAA,CAAK,KAAA,CAAM,QACvB,CAAA,CAEA,OAAO,CACL,OAAA,CAAS,CAAA,CAAA,CACT,aAAA,CAAeF,CAAAA,CAAM,KAAA,CAAM,MAAA,CAC3B,gBAAiBA,CAAAA,CAAM,OAAA,CAAQ,MACjC,CACF,CAAA,MAAS7C,CAAAA,CAAO,CACd,OAAO,CACL,OAAA,CAAS,KAAA,CACT,MAAA,CAAQ,CAAC,CAAA,sBAAA,EAAyBA,CAAAA,YAAiB,KAAA,CAAQA,EAAM,OAAA,CAAU,eAAe,CAAA,CAAE,CAC9F,CACF,CACF,CAKO,SAASyF,GAAcC,CAAAA,CAAiC,CAC7D,GAAI,CACF,IAAMlB,CAAAA,CAAQkB,CAAAA,CAAU,IAAA,GAAO,KAAA,CAAM;AAAA,CAAI,CAAA,CAEzC,GAAIlB,CAAAA,CAAM,MAAA,CAAS,GAAK,CAACA,CAAAA,CAAM,CAAC,CAAA,CAC9B,OAAO,CACL,OAAA,CAAS,CAAA,CAAA,CACT,OAAQ,CAAC,8BAA8B,CACzC,CAAA,CAGF,IAAMvB,CAAAA,CAAU0C,EAAAA,CAAanB,CAAAA,CAAM,CAAC,CAAC,CAAA,CAC/BoB,CAAAA,CAAgB,EAAC,CACjBC,CAAAA,CAAa,IAAI,GAAA,CACjBC,EAAmB,EAAC,CAE1B,IAAA,IAAStG,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIgF,CAAAA,CAAM,MAAA,CAAQhF,IAChC,GAAI,CACF,IAAMuG,CAAAA,CAASJ,EAAAA,CAAanB,CAAAA,CAAMhF,CAAC,CAAA,EAAK,EAAE,CAAA,CAE1C,GAAIuG,CAAAA,CAAO,MAAA,CAAS9C,CAAAA,CAAQ,MAAA,CAAQ,CAClC6C,CAAAA,CAAO,KAAK,CAAA,KAAA,EAAQtG,CAAAA,CAAI,CAAC,CAAA,kBAAA,CAAoB,CAAA,CAC7C,QACF,CAIA,GADuByD,EAAQ,MAAA,CAAS8C,CAAAA,CAAO,MAAA,CAC1B,CAAA,CAAG,CACtBD,CAAAA,CAAO,IAAA,CAAK,CAAA,KAAA,EAAQtG,EAAI,CAAC,CAAA,kCAAA,EAAqCyD,CAAAA,CAAQ,MAAM,CAAA,MAAA,EAAS8C,CAAAA,CAAO,MAAM,CAAA,CAAA,CAAG,EACrG,QACF,CAGA,KAAOA,CAAAA,CAAO,MAAA,CAAS9C,CAAAA,CAAQ,MAAA,EAC7B8C,CAAAA,CAAO,KAAK,EAAE,CAAA,CAGhB,IAAMC,CAAAA,CAAmC,EAAC,CAC1C/C,CAAAA,CAAQ,OAAA,CAAQ,CAACgD,CAAAA,CAAQC,CAAAA,GAAU,CACjCF,CAAAA,CAASC,CAAM,CAAA,CAAIF,CAAAA,CAAOG,CAAK,GAAK,GACtC,CAAC,CAAA,CAGD,IAAMC,CAAAA,CAAcH,CAAAA,CAAS,MAAA,EAAa,SAAA,CACrCH,EAAW,GAAA,CAAIM,CAAW,CAAA,EAC7BN,CAAAA,CAAW,GAAA,CAAIM,CAAAA,CAAa,CAC1B,EAAA,CAAI,OAAON,CAAAA,CAAW,IAAA,CAAO,CAAC,CAAA,CAAA,CAC9B,KAAA,CAAOM,CAAAA,CACP,QAAA,CAAUN,CAAAA,CAAW,KAAO,CAAA,CAC5B,OAAA,CAAS,EACX,CAAC,CAAA,CAGH,IAAMzC,CAAAA,CAASyC,EAAW,GAAA,CAAIM,CAAW,CAAA,CAEnChD,CAAAA,CAAa,CACjB,EAAA,CAAI6C,CAAAA,CAAS,SAAS,GAAK,CAAA,KAAA,EAAQxG,CAAC,CAAA,CAAA,CACpC,KAAA,CAAOwG,CAAAA,CAAS,KAAA,EAAY,UAAA,CAC5B,WAAA,CAAaA,EAAS,WAAA,CAAiBA,CAAAA,CAAS,WAAA,CAAiB,KAAA,CAAA,CACjE,QAAA,CAAU5C,CAAAA,CAAO,EAAA,CACjB,QAAA,CAAUA,EAAO,OAAA,CAAQ,MAAA,CAAS,CAAA,CAClC,QAAA,CAAW4C,CAAAA,CAAS,QAAA,EAAuB,KAAA,CAAA,CAC3C,MAAA,CAAQA,EAAS,MAAA,CAAYA,CAAAA,CAAS,MAAA,CAAU,KAAA,CAAM,GAAG,CAAA,CAAE,MAAA,CAAO,OAAO,EAAI,KAAA,CAAA,CAC7E,eAAA,CAAiBA,CAAAA,CAAS,gBAAgB,CAAA,CACtCA,CAAAA,CAAS,gBAAgB,CAAA,CAAE,MAAM,GAAG,CAAA,CAAE,MAAA,CAAO,OAAO,CAAA,CACpD,KAAA,CAAA,CACJ,SAAA,CAAWA,CAAAA,CAAS,YAAY,CAAA,CAAKA,CAAAA,CAAS,YAAY,CAAA,CAAY,KAAA,CAAA,CACtE,OAAA,CAASA,CAAAA,CAAS,UAAU,EAAKA,CAAAA,CAAS,UAAU,CAAA,CAAY,KAAA,CAAA,CAChE,SAAA,CAAWA,CAAAA,CAAS,YAAY,CAAA,CAAKA,EAAS,YAAY,CAAA,CAAY,KAAA,CAAA,CACtE,SAAA,CAAWA,CAAAA,CAAS,YAAY,CAAA,CAAKA,CAAAA,CAAS,YAAY,CAAA,CAAY,KAAA,CACxE,CAAA,CAEAJ,CAAAA,CAAM,IAAA,CAAKzC,CAAI,CAAA,CACfC,CAAAA,CAAO,QAAQ,IAAA,CAAKD,CAAAA,CAAK,EAAE,EAC7B,CAAA,MAASnD,CAAAA,CAAO,CACd8F,CAAAA,CAAO,KACL,CAAA,KAAA,EAAQtG,CAAAA,CAAI,CAAC,CAAA,EAAA,EAAKQ,CAAAA,YAAiB,KAAA,CAAQA,CAAAA,CAAM,OAAA,CAAU,eAAe,CAAA,CAC5E,EACF,CAGF,OAAI4F,CAAAA,CAAM,MAAA,GAAW,CAAA,CACZ,CACL,QAAS,CAAA,CAAA,CACT,MAAA,CAAQ,CAAC,6BAAA,CAA+B,GAAGE,CAAM,CACnD,CAAA,CAGK,CACL,OAAA,CAAS,CAAA,CAAA,CACT,aAAA,CAAeF,CAAAA,CAAM,MAAA,CACrB,eAAA,CAAiBC,CAAAA,CAAW,IAAA,CAC5B,OAAQC,CAAAA,CAAO,MAAA,CAAS,CAAA,CAAIA,CAAAA,CAAS,KAAA,CACvC,CACF,CAAA,MAAS9F,CAAAA,CAAO,CACd,OAAO,CACL,OAAA,CAAS,KAAA,CACT,MAAA,CAAQ,CAAC,CAAA,qBAAA,EAAwBA,CAAAA,YAAiB,MAAQA,CAAAA,CAAM,OAAA,CAAU,eAAe,CAAA,CAAE,CAC7F,CACF,CACF,CAKA,SAAS2F,EAAAA,CAAaS,CAAAA,CAAwB,CAC5C,IAAM5E,CAAAA,CAAmB,EAAC,CACtB6E,CAAAA,CAAU,GACVC,CAAAA,CAAW,KAAA,CAEf,IAAA,IAAS9G,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAI4G,CAAAA,CAAK,MAAA,CAAQ5G,IAAK,CACpC,IAAM+G,CAAAA,CAAOH,CAAAA,CAAK5G,CAAC,CAAA,CACbgH,CAAAA,CAAWJ,CAAAA,CAAK5G,EAAI,CAAC,CAAA,CAEvB+G,CAAAA,GAAS,GAAA,EAAOD,CAAAA,EAAYE,CAAAA,GAAa,GAAA,EAC3CH,CAAAA,EAAW,IACX7G,CAAAA,EAAAA,EACS+G,CAAAA,GAAS,GAAA,CAClBD,CAAAA,CAAW,CAACA,CAAAA,CACHC,CAAAA,GAAS,GAAA,EAAO,CAACD,CAAAA,EAC1B9E,CAAAA,CAAO,IAAA,CAAK6E,CAAO,CAAA,CACnBA,CAAAA,CAAU,EAAA,EAEVA,CAAAA,EAAWE,EAEf,CAEA,OAAA/E,CAAAA,CAAO,IAAA,CAAK6E,CAAO,CAAA,CACZ7E,CACT,CAKO,SAASiF,EAAAA,CAAY1B,CAAAA,CAAiBF,CAAAA,CAAsC,CACjF,OAAQA,CAAAA,EACN,KAAK,OACH,OAAOU,EAAAA,CAAeR,CAAO,CAAA,CAC/B,KAAK,KAAA,CACH,OAAOU,EAAAA,CAAcV,CAAO,CAAA,CAC9B,QACE,OAAO,CACL,OAAA,CAAS,KAAA,CACT,MAAA,CAAQ,CAAC,8BAA8BF,CAAM,CAAA,CAAE,CACjD,CACJ,CACF,CAKO,SAAS6B,EAAAA,CAASC,EAA6B,CACpD,OAAO,IAAI,OAAA,CAAQ,CAACzF,CAAAA,CAAS0F,CAAAA,GAAW,CACtC,IAAMC,CAAAA,CAAS,IAAI,UAAA,CACnBA,CAAAA,CAAO,MAAA,CAAUC,CAAAA,EAAU,CACrBA,CAAAA,CAAM,QAAQ,MAAA,CAChB5F,CAAAA,CAAQ4F,CAAAA,CAAM,MAAA,CAAO,MAAgB,CAAA,CAErCF,CAAAA,CAAO,IAAI,MAAM,qBAAqB,CAAC,EAE3C,CAAA,CACAC,CAAAA,CAAO,OAAA,CAAU,IAAMD,CAAAA,CAAO,IAAI,KAAA,CAAM,qBAAqB,CAAC,CAAA,CAC9DC,CAAAA,CAAO,UAAA,CAAWF,CAAI,EACxB,CAAC,CACH,CCnMO,IAAMI,EAAAA,CAAoBC,aAAAA,CAA6C,IAAI,CAAA,CAM3E,SAASC,EAAAA,EAAgB,CAC9B,OAAOC,WAAWH,EAAiB,CACrC,CCXO,IAAMI,EAAAA,CAAqBH,aAAAA,CAA8C,IAAI,CAAA,CAO7E,SAASI,EAAAA,CAAoB,CAAE,QAAA,CAAAC,CAAAA,CAAU,SAAA,CAAAC,CAAU,CAAA,CAA6B,CACrF,OACEC,GAAAA,CAACJ,EAAAA,CAAmB,QAAA,CAAnB,CAA4B,KAAA,CAAO,CAAE,SAAA,CAAAG,CAAU,EAC7C,QAAA,CAAAD,CAAAA,CACH,CAEJ,CAEO,SAASG,EAAAA,EAAiD,CAC/D,OAAON,WAAWC,EAAkB,CACtC,CCNO,SAASM,EAAAA,CAAO,CAAE,QAAA,CAAAJ,CAAAA,CAAU,SAAA,CAAAK,CAAU,CAAA,CAAgB,CAC3D,GAAM,CAACC,EAASC,CAAU,CAAA,CAAIC,QAAAA,CAAS,KAAK,EACtCC,CAAAA,CAAab,EAAAA,EAAc,CAC3Bc,CAAAA,CAAcP,IAAe,CAOnC,GALAQ,SAAAA,CAAU,KACRJ,CAAAA,CAAW,IAAI,CAAA,CACR,IAAMA,EAAW,KAAK,CAAA,CAAA,CAC5B,EAAE,CAAA,CAED,CAACD,CAAAA,CACH,OAAO,KAGT,IAAMM,CAAAA,CAASP,CAAAA,GAAc,OAAO,QAAA,CAAa,GAAA,CAAc,QAAA,CAAS,IAAA,CAAO,MAE/E,GAAI,CAACO,CAAAA,CACH,OAAO,IAAA,CAIT,GAAIH,CAAAA,CAAY,CACd,GAAM,CAAE,KAAA,CAAAI,CAAAA,CAAO,SAAA,CAAAZ,CAAU,CAAA,CAAIQ,CAAAA,CAGvBK,CAAAA,CAAsD,CAE1D,mCAAA,CAAqCD,CAAAA,CAAM,SAAA,CAC3C,qCAAA,CAAuCA,CAAAA,CAAM,WAAA,CAC7C,gCAAA,CAAkCA,CAAAA,CAAM,OACxC,iCAAA,CAAmCA,CAAAA,CAAM,OAAA,CAGzC,6BAAA,CAA+BA,CAAAA,CAAM,WAAA,CACrC,+BAAA,CAAiCA,CAAAA,CAAM,cACvC,8BAAA,CAAgCA,CAAAA,CAAM,YAAA,CACtC,6BAAA,CAA+BA,CAAAA,CAAM,aAAA,EAAiB,SAAA,CAGtD,+BAAA,CAAiCA,EAAM,MAAA,CACvC,6BAAA,CAA+BA,CAAAA,CAAM,WAAA,CACrC,8BAAA,CAAgCA,CAAAA,CAAM,WAAA,CAGtC,oCAAA,CAAsCA,EAAM,MAAA,CAC5C,yCAAA,CAA2CA,CAAAA,CAAM,WAAA,CACjD,0CAAA,CAA4C,CAAA,EAAGA,CAAAA,CAAM,MAAM,KAC3D,8CAAA,CAAgD,CAAA,EAAGA,CAAAA,CAAM,MAAM,CAAA,EAAA,CAAA,CAC/D,mDAAA,CAAqD,CAAA,EAAGA,CAAAA,CAAM,MAAM,CAAA,EAAA,CAAA,CAGpE,+BAAA,CAAiCA,CAAAA,CAAM,eAAA,CACvC,+BAAA,CAAiCA,CAAAA,CAAM,SAAA,CACvC,6BAAA,CAA+BA,EAAM,YAAA,CACrC,uBAAA,CAAyBA,CAAAA,CAAM,YAAA,CAC/B,8BAAA,CAAgC,CAAA,EAAGA,CAAAA,CAAM,YAAY,KACrD,kCAAA,CAAoC,CAAA,EAAGA,CAAAA,CAAM,YAAY,CAAA,EAAA,CAAA,CACzD,uCAAA,CAAyC,CAAA,EAAGA,CAAAA,CAAM,YAAY,CAAA,EAAA,CAChE,CAAA,CAEA,OAAOE,YAAAA,CACLb,GAAAA,CAAC,KAAA,CAAA,CACC,YAAA,CAAYD,CAAAA,CACZ,oBAAkB,MAAA,CAClB,KAAA,CAAOa,CAAAA,CAEN,QAAA,CAAAd,CAAAA,CACH,CAAA,CACAY,CACF,CACF,CAGA,OAAIF,CAAAA,CACKK,YAAAA,CACLb,GAAAA,CAAC,KAAA,CAAA,CACC,YAAA,CAAYQ,CAAAA,CAAY,SAAA,CACxB,qBAAmB,MAAA,CAElB,QAAA,CAAAV,CAAAA,CACH,CAAA,CACAY,CACF,CAAA,CAGKG,YAAAA,CAAaf,CAAAA,CAAUY,CAAM,CACtC,CClGA,IAAMI,EAAAA,CAAkB,CACtB,MAAA,CAAQ,CAAE,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,SAAU,EAC5C,IAAA,CAAM,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,SAAU,CAAA,CACxC,MAAA,CAAQ,CAAE,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,SAAU,CAAA,CAC5C,GAAA,CAAK,CAAE,KAAA,CAAO,MAAO,KAAA,CAAO,SAAU,CACxC,CAAA,CAEMC,EAAAA,CAAc,SAAA,CAEdC,EAAAA,CAAe,CAAC,CAAE,KAAA,CAAAC,CAAM,CAAA,GAC5BC,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,KAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,UAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,IAAA,CAAMiB,CAAAA,CAAO,QAAQ,KAAA,CAAM,CAAA,CACvDjB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAE,GAAA,CAAI,MAAA,CAAQiB,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,CAAA,CAAA,CAC7E,EAGK,SAASE,EAAAA,CAAiB,CAC/B,QAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,SAAA,CAAAC,CACF,CAAA,CAA0B,CACxB,GAAM,CAACC,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACmB,CAAAA,CAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,EAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC9DqB,EAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,OAA0B,IAAI,CAAA,CAG1CE,CAAAA,CAAW,IAAM,CACrB,GAAI,CAACD,CAAAA,CAAU,QAAS,OAExB,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,EAAsB,CAC/CG,CAAAA,CAAiB,OAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAa,GAAA,CACbC,EAAM,CAAA,CAERC,CAAAA,CAAUN,CAAAA,CAAK,KAAA,CAAQG,CAAAA,CACvBG,CAAAA,CAAU,EAAA,GAAIA,CAAAA,CAAUN,EAAK,IAAA,CAAA,CAC7BM,CAAAA,CAAUH,CAAAA,CAAYD,CAAAA,CAAgB,EAAA,GACxCI,CAAAA,CAAUJ,CAAAA,CAAgBC,CAAAA,CAAY,IAGxC,IAAMI,CAAAA,CAAaN,CAAAA,CAAiBD,CAAAA,CAAK,MAAA,CACnCQ,CAAAA,CAAaR,CAAAA,CAAK,GAAA,CACpBS,EAEAF,CAAAA,EAAcH,CAAAA,CAAaC,CAAAA,CAC7BI,CAAAA,CAAST,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACdG,CAAAA,EAAcJ,EAAaC,CAAAA,CACpCI,CAAAA,CAAST,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAAA,CAEjCI,CAAAA,CAASF,CAAAA,EAAcC,EACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIL,CAAAA,CAAK,GAAA,CAAMI,EAAaC,CAAG,CAAA,CAG9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,CAAAA,CAAQ,IAAA,CAAMH,CAAQ,CAAC,CAAA,CAC9Cb,CAAAA,CAAU,IAAI,EAChB,CAAA,CAKAf,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAE9CoC,CAAAA,CAAQ,OAAA,EACR,CAACA,CAAAA,CAAQ,OAAA,CAAQ,SAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,CAAAA,CAAU,OAAA,EAAS,QAAA,CAAStC,CAAAA,CAAM,MAAc,CAAA,EAEjDiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,GAAID,CAAAA,CACF,OAAA,QAAA,CAAS,iBAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAUnB,CAAAA,CAAU,KAAK,EACzC,CAAA,CAEA,GAAID,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAM,CAAC,CAAA,CAEX,IAAMqB,CAAAA,CAAgBC,CAAAA,EAA2B,CAC/CxB,CAAAA,CAASwB,CAAW,CAAA,CACpBrB,EAAU,KAAK,EACjB,CAAA,CAEMsB,CAAAA,CAAgB1B,CAAAA,CAAWN,EAAAA,CAAgBM,CAAQ,CAAA,CAAI,KACvD2B,CAAAA,CAAYD,CAAAA,EAAe,KAAA,EAAS/B,EAAAA,CAE1C,OACEG,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW,YAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CACzC,QAAA,CAAA,CAAAtB,GAAAA,CAAC,QAAA,CAAA,CACC,GAAA,CAAK6B,CAAAA,CACL,QAAS,IAAMN,CAAAA,CAASC,CAAAA,CAAU,KAAK,CAAA,CAAIM,CAAAA,EAAS,CACpD,SAAA,CAAU,uHACV,KAAA,CAAO,CACL,UAAA,CAAYV,CAAAA,CAAW,CAAA,EAAG2B,CAAS,CAAA,EAAA,CAAA,CAAO,aAAA,CAC1C,UAAW3B,CAAAA,CAAW,CAAA,UAAA,EAAa2B,CAAS,CAAA,QAAA,CAAA,CAAa,MAC3D,CAAA,CACA,KAAA,CAAOD,CAAAA,EAAe,OAAS,cAAA,CAE/B,QAAA,CAAA9C,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAE,2BAAA,CACF,MAAA,CAAQ+C,CAAAA,CACR,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,QACf,IAAA,CAAMA,CAAAA,CACN,WAAA,CAAa3B,CAAAA,CAAW,KAAA,CAAQ,KAAA,CAClC,CAAA,CACF,CAAA,CACF,EAGCG,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAgB,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKS,EACL,SAAA,CAAU,wBAAA,CACV,KAAA,CAAO,CACL,SAAU,OAAA,CACV,GAAA,CAAK,CAAA,EAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAa,IAAI,CAAA,EAAA,CAAA,CAC1B,MAAA,CAAQ,KAAA,CACR,SAAU,OAAA,CACV,SAAA,CAAW,oBAAA,CACX,YAAA,CAAc,KAAA,CACd,UAAA,CAAY,6BAAA,CACZ,MAAA,CAAQ,8DACR,SAAA,CAAW,oEACb,CAAA,CAEF,QAAA,CAAA,CAAAzB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,MAAO,CAAE,WAAA,CAAa,kDAAmD,CAAA,CAEzE,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,iDACV,KAAA,CAAO,CAAE,KAAA,CAAO,0DAA2D,CAAA,CAC5E,QAAA,CAAA,UAAA,CAED,CAAA,CACF,CAAA,CAEAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACX,QAAA,CAAA,CAAA,MAAA,CAAO,OAAA,CAAQJ,EAAe,CAAA,CAAqD,GAAA,CACnF,CAAC,CAACkC,CAAAA,CAAKC,CAAM,CAAA,GACX/B,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM0B,EAAaI,CAAG,CAAA,CAC/B,SAAA,CAAU,mHAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOC,CAAAA,CAAO,MACd,UAAA,CAAY,aACd,CAAA,CACA,YAAA,CAAeN,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,UAAA,CAAa,yDACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,UAAA,CAAa,cACrC,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAACgB,EAAAA,CAAA,CAAa,KAAA,CAAOiC,EAAO,KAAA,CAAO,CAAA,CACnCjD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAAiD,CAAAA,CAAO,MAAM,CAAA,CACrD7B,CAAAA,GAAa4B,CAAAA,EACZhD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,SAAA,CAAU,KAAA,CAAM,KAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACvE,QAAA,CAAAA,GAAAA,CAAC,QAAK,CAAA,CAAE,wBAAA,CAAyB,MAAA,CAAO,SAAA,CAAU,WAAA,CAAY,GAAA,CAAI,aAAA,CAAc,OAAA,CAAQ,eAAe,OAAA,CAAO,CAAA,CAChH,CAAA,CAAA,CAAA,CAnBGgD,CAqBP,CAEJ,CAAA,CAEAhD,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,wBAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAa,kDAAmD,CAAA,CAEzE,QAAA,CAAAkB,IAAAA,CAAC,UACC,OAAA,CAAS,IAAM0B,CAAAA,CAAa,MAAS,CAAA,CACrC,SAAA,CAAU,mGAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO,uCAAA,CACP,UAAA,CAAY,aACd,CAAA,CACA,YAAA,CAAeD,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,yDACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,cACrC,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,MAAA,CAAO,UAAU,WAAA,CAAY,KAAA,CAAM,eAAA,CAAgB,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAM,CAAA,CACrG,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,OAAA,CAAK,CAAA,CAC5C,CAACoB,CAAAA,EACApB,GAAAA,CAAC,OAAI,SAAA,CAAU,SAAA,CAAU,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,KAAK,MAAA,CACvE,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,wBAAA,CAAyB,MAAA,CAAO,SAAA,CAAU,YAAY,GAAA,CAAI,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CAChH,CAAA,CAAA,CAEJ,CAAA,CACF,GACF,CAAA,CAAA,CACA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CC9NA,IAAMkD,EAAAA,CAAgB,CACpB,CAAE,KAAA,CAAO,OAAA,CAAS,IAAA,CAAM,CAAE,CAAA,CAC1B,CAAE,KAAA,CAAO,UAAA,CAAY,KAAM,CAAE,CAAA,CAC7B,CAAE,KAAA,CAAO,YAAa,IAAA,CAAM,CAAE,CAAA,CAC9B,CAAE,KAAA,CAAO,SAAA,CAAW,IAAA,CAAM,EAAG,EAC7B,CAAE,KAAA,CAAO,SAAA,CAAW,IAAA,CAAM,EAAG,CAAA,CAC7B,CAAE,KAAA,CAAO,UAAW,IAAA,CAAM,EAAG,CAC/B,CAAA,CAEO,SAASC,EAAAA,CAAgB,CAC9B,SAAA,CAAAC,EACA,OAAA,CAAAC,CAAAA,CACA,QAAA,CAAAhC,CAAAA,CACA,SAAA,CAAAC,CACF,CAAA,CAAyB,CACvB,GAAM,CAACC,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACmB,EAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC9DqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,MAAAA,CAA0B,IAAI,EAI1C0B,CAAAA,CAAAA,CAHcrD,EAAAA,EAAe,EACJ,SAAA,EAAa,MAAA,IAEf,MAAA,CAGvB6B,CAAAA,CAAW,IAAM,CACrB,GAAI,CAACD,CAAAA,CAAU,OAAA,CAAS,OAExB,IAAME,CAAAA,CAAOF,CAAAA,CAAU,QAAQ,qBAAA,EAAsB,CAC/CG,CAAAA,CAAiB,MAAA,CAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,EAAY,GAAA,CACZC,CAAAA,CAAa,GAAA,CACbC,CAAAA,CAAM,CAAA,CAGRC,CAAAA,CAAUN,CAAAA,CAAK,IAAA,CACfM,EAAUH,CAAAA,CAAYD,CAAAA,CAAgB,EAAA,GACxCI,CAAAA,CAAUJ,CAAAA,CAAgBC,CAAAA,CAAY,EAAA,CAAA,CAEpCG,CAAAA,CAAU,KAAIA,CAAAA,CAAU,EAAA,CAAA,CAG5B,IAAMC,CAAAA,CAAaN,CAAAA,CAAiBD,CAAAA,CAAK,MAAA,CACnCQ,CAAAA,CAAaR,EAAK,GAAA,CACpBS,CAAAA,CAEAF,CAAAA,EAAcH,CAAAA,CAAaC,CAAAA,CAC7BI,CAAAA,CAAST,CAAAA,CAAK,MAAA,CAASK,EACdG,CAAAA,EAAcJ,CAAAA,CAAaC,CAAAA,CACpCI,CAAAA,CAAST,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAAA,CAEjCI,EAASF,CAAAA,EAAcC,CAAAA,CACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIL,EAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAG,CAAA,CAG9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,CAAAA,CAAQ,KAAMH,CAAQ,CAAC,CAAA,CAC9Cb,CAAAA,CAAU,IAAI,EAChB,CAAA,CAEAf,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAE9CoC,CAAAA,CAAQ,OAAA,EACR,CAACA,EAAQ,OAAA,CAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,CAAAA,CAAU,OAAA,EAAS,SAAStC,CAAAA,CAAM,MAAc,CAAA,EAEjDiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,GAAID,EACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EACZnB,EAAU,KAAK,EAEnB,CAAA,CAEA,GAAID,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAM,CAAC,CAAA,CAEX,IAAMgC,CAAAA,CAAqBC,CAAAA,EAAiB,CAC1C,IAAMC,EAAM,IAAI,IAAA,CAEVC,CAAAA,CAAmBC,CAAAA,EAAe,CACtC,IAAMC,CAAAA,CAAOD,CAAAA,CAAK,aAAY,CACxBE,CAAAA,CAAQ,MAAA,CAAOF,CAAAA,CAAK,QAAA,EAAS,CAAI,CAAC,CAAA,CAAE,SAAS,CAAA,CAAG,GAAG,CAAA,CACnDG,CAAAA,CAAM,MAAA,CAAOH,CAAAA,CAAK,OAAA,EAAS,EAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CAClD,OAAO,CAAA,EAAGC,CAAI,CAAA,CAAA,EAAIC,CAAK,CAAA,CAAA,EAAIC,CAAG,CAAA,CAChC,CAAA,CAEMC,EAAWL,CAAAA,CAAgBD,CAAG,CAAA,CAE9BJ,CAAAA,CAAU,IAAI,IAAA,CAAKI,CAAG,CAAA,CAC5BJ,CAAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAQ,OAAA,EAAQ,CAAIG,CAAI,CAAA,CACxC,IAAMQ,CAAAA,CAASN,CAAAA,CAAgBL,CAAO,CAAA,CAEtChC,CAAAA,CAAS0C,CAAAA,CAAUC,CAAM,CAAA,CACzBxC,CAAAA,CAAU,KAAK,EACjB,CAAA,CAEMyC,CAAAA,CAAkB,IAAM,CAC5B,GAAI,CAACb,CAAAA,EAAa,CAACC,CAAAA,CAAS,OAAO,UAAA,CAEnC,IAAMa,CAAAA,CAAkBC,GAA2B,CACjD,GAAIA,CAAAA,YAAmB,IAAA,CAAM,OAAOA,CAAAA,CACpC,GAAI,OAAOA,GAAY,QAAA,EAAY,CAACA,CAAAA,CAAQ,KAAA,CAAM,qBAAqB,CAAA,CACrE,OAAO,IAAA,CAET,IAAMC,CAAAA,CAAQD,CAAAA,CAAQ,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,MAAM,CAAA,CAC3C,GAAIC,CAAAA,CAAM,MAAA,GAAW,CAAA,EAAKA,CAAAA,CAAM,IAAA,CAAKC,CAAAA,EAAK,KAAA,CAAMA,CAAC,CAAC,CAAA,CAChD,OAAO,IAAA,CAET,IAAMT,CAAAA,CAAOQ,CAAAA,CAAM,CAAC,CAAA,CACdP,EAAQO,CAAAA,CAAM,CAAC,CAAA,CACfN,CAAAA,CAAMM,CAAAA,CAAM,CAAC,CAAA,CACnB,OAAIR,IAAS,MAAA,EAAaC,CAAAA,GAAU,MAAA,EAAaC,CAAAA,GAAQ,MAAA,CAChD,IAAA,CAEF,IAAI,IAAA,CAAKF,EAAMC,CAAAA,CAAQ,CAAA,CAAGC,CAAG,CACtC,CAAA,CAEMQ,CAAAA,CAAQJ,CAAAA,CAAed,CAAS,EAChCmB,CAAAA,CAAML,CAAAA,CAAeb,CAAO,CAAA,CAElC,GAAI,CAACiB,CAAAA,EAAS,CAACC,GAAO,KAAA,CAAMD,CAAAA,CAAM,OAAA,EAAS,CAAA,EAAK,KAAA,CAAMC,CAAAA,CAAI,OAAA,EAAS,CAAA,CACjE,OAAO,UAAA,CAGT,IAAMC,CAAAA,CAAa,CAAC,KAAA,CAAO,KAAA,CAAO,MAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAK,CAAA,CAEtG,OAAO,CAAA,EAAGA,CAAAA,CAAWF,CAAAA,CAAM,QAAA,EAAU,CAAC,IAAIA,CAAAA,CAAM,OAAA,EAAS,CAAA,QAAA,EAAME,CAAAA,CAAWD,CAAAA,CAAI,QAAA,EAAU,CAAC,CAAA,CAAA,EAAIA,CAAAA,CAAI,OAAA,EAAS,CAAA,CAC5G,CAAA,CAEME,CAAAA,CAAarB,CAAAA,EAAaC,EAU1BqB,CAAAA,CAAAA,CARY,IAAM,CACtB,GAAI,CAACrB,CAAAA,CAAS,OAAO,MAAA,CACrB,IAAMkB,CAAAA,CAAM,OAAOlB,CAAAA,EAAY,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAO,CAAA,CAAIA,EACxDsB,CAAAA,CAAQ,IAAI,IAAA,CAClB,OAAAA,CAAAA,CAAM,QAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAC,CAAA,CAClBJ,CAAAA,CAAMI,CACf,CAAA,GAE0B,CAE1B,OACEzD,IAAAA,CAAC,OAAI,SAAA,CAAW,CAAA,SAAA,EAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CACzC,QAAA,CAAA,CAAAJ,IAAAA,CAAC,QAAA,CAAA,CACC,IAAKW,CAAAA,CACL,OAAA,CAAS,IAAMN,CAAAA,CAASC,CAAAA,CAAU,KAAK,CAAA,CAAIM,CAAAA,GAC3C,SAAA,CAAW,CAAA,uFAAA,EACT4C,CAAAA,CAAU,qBAAA,CAAwB,aACpC,CAAA,CAAA,CACA,KAAA,CAAOD,CAAAA,CAAa,GAAGR,CAAAA,EAAiB,CAAA,CAAA,CAAK,gBAAA,CAE7C,QAAA,CAAA,CAAA/C,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,GAAA,CACF,CAAA,CAAE,GAAA,CACF,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,EAAA,CAAG,GAAA,CACH,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACd,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,SAAA,CAAU,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAM,CAAA,CAC1DA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,QAAA,CAAS,MAAA,CAAO,eAAe,WAAA,CAAY,KAAA,CAAM,aAAA,CAAc,OAAA,CAAQ,EAC/EA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,SAAA,CAAU,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAM,cAAc,OAAA,CAAQ,CAAA,CAAA,CAClF,CAAA,CACCoD,CAAAA,EAAaC,CAAAA,EACZrD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,oBAAqB,QAAA,CAAAiE,CAAAA,EAAgB,CAAE,CAAA,CAAA,CAE3D,CAAA,CAEC1C,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAgB,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKS,CAAAA,CACL,SAAA,CAAU,6DAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,GAAA,CAAK,CAAA,EAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,GAAGA,CAAAA,CAAa,IAAI,CAAA,EAAA,CAAA,CAC1B,UAAA,CAAY6B,CAAAA,CAAS,SAAA,CAAY,SAAA,CACjC,MAAA,CAAQ,aAAaA,CAAAA,CAAS,2BAAA,CAA8B,qBAAqB,CAAA,CAAA,CACjF,SAAA,CAAWA,CAAAA,CACP,oEAAA,CACA,gEAAA,CACJ,OAAQ,KACV,CAAA,CAEA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cAAA,CAAe,KAAA,CAAO,CAAE,WAAA,CAAaoC,CAAAA,CAAS,0BAAA,CAA6B,qBAAsB,CAAA,CAC9G,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CACC,UAAU,uDAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOsD,CAAAA,CAAS,2BAAA,CAA8B,oBAAqB,CAAA,CAC7E,wBAED,CAAA,CACAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACZ,QAAA,CAAAkD,EAAAA,CAAc,GAAA,CAAK0B,GAClB5E,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMuD,CAAAA,CAAkBqB,CAAAA,CAAO,IAAI,CAAA,CAC5C,UAAU,6EAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOtB,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CAC9C,MAAA,CAAQ,aAAaA,CAAAA,CAAS,2BAAA,CAA8B,qBAAqB,CAAA,CAAA,CACjF,eAAA,CAAiBA,CAAAA,CAAS,2BAAA,CAA8B,qBAC1D,EACA,YAAA,CAAeX,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkBW,CAAAA,CAAS,2BAA6B,oBAAA,CAC9EX,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,MAAA,CAAS,CAAA,UAAA,EAAaW,CAAAA,CAAS,0BAAA,CAA6B,qBAAqB,CAAA,EACzG,CAAA,CACA,YAAA,CAAeX,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBW,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CAC/EX,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,MAAA,CAAS,CAAA,UAAA,EAAaW,EAAS,2BAAA,CAA8B,qBAAqB,CAAA,EAC1G,CAAA,CAEC,QAAA,CAAAsB,CAAAA,CAAO,KAAA,CAAA,CAjBHA,CAAAA,CAAO,KAkBd,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAEA1D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,uDAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOsD,CAAAA,CAAS,4BAA8B,oBAAqB,CAAA,CAC7E,QAAA,CAAA,cAAA,CAED,CAAA,CACApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOoD,CAAAA,EAAa,EAAA,CACpB,QAAA,CAAWT,GAAMtB,CAAAA,CAASsB,CAAAA,CAAE,MAAA,CAAO,KAAA,CAAOU,CAAO,CAAA,CACjD,SAAA,CAAU,gFAAA,CACV,MAAO,CACL,UAAA,CAAYC,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CACnD,WAAA,CAAaA,CAAAA,CAAS,2BAAA,CAA8B,sBACpD,KAAA,CAAOA,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CAC9C,WAAA,CAAaA,CAAAA,CAAS,MAAA,CAAS,OACjC,EACF,CAAA,CACAtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOqD,CAAAA,EAAW,EAAA,CAClB,SAAWV,CAAAA,EAAMtB,CAAAA,CAAS+B,CAAAA,CAAWT,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACnD,SAAA,CAAU,iFACV,KAAA,CAAO,CACL,UAAA,CAAYW,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CACnD,WAAA,CAAaA,CAAAA,CAAS,4BAA8B,qBAAA,CACpD,KAAA,CAAOA,CAAAA,CAAS,2BAAA,CAA8B,qBAAA,CAC9C,WAAA,CAAaA,CAAAA,CAAS,MAAA,CAAS,OACjC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEEF,CAAAA,EAAaC,CAAAA,GACbrD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbqB,CAAAA,CAAS,MAAA,CAAW,MAAS,EAC7BG,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,UAAU,gGAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO,SAAA,CACP,WAAA,CAAa,wBAAA,CACb,UAAA,CAAY,wBACd,CAAA,CACA,YAAA,CAAemB,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,yBACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,yBACrC,CAAA,CACD,QAAA,CAAA,aAAA,CAED,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCzSO,SAASkC,EAAAA,CAAuB,CACrC,aAAA,CAAAC,CAAAA,CAAgB,EAAC,CACjB,cAAA,CAAAC,CAAAA,CACA,QAAA,CAAA1D,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,iBAAA,CAAA0D,EAAoB,CACtB,CAAA,CAAgC,CAC9B,GAAM,CAACzD,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,SAAS,KAAK,CAAA,CACpC,CAAC2E,CAAAA,CAAaC,CAAc,CAAA,CAAI5E,QAAAA,CAAS,EAAE,EAC3C,CAACmB,CAAAA,CAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,KAAM,CAAE,CAAC,CAAA,CAC9DqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,OAA0B,IAAI,CAAA,CAG1CE,CAAAA,CAAW,IAAM,CACrB,GAAI,CAACD,CAAAA,CAAU,QAAS,OAExB,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,EAAsB,CAC/CG,CAAAA,CAAiB,OAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAa,GAAA,CACbC,EAAM,CAAA,CAGRC,CAAAA,CAAUN,CAAAA,CAAK,KAAA,CAAQG,CAAAA,CACvBG,CAAAA,CAAU,EAAA,GAAIA,CAAAA,CAAUN,EAAK,IAAA,CAAA,CAC7BM,CAAAA,CAAUH,CAAAA,CAAYD,CAAAA,CAAgB,EAAA,GACxCI,CAAAA,CAAUJ,CAAAA,CAAgBC,CAAAA,CAAY,IAIxC,IAAMI,CAAAA,CAAaN,CAAAA,CAAiBD,CAAAA,CAAK,MAAA,CACnCQ,CAAAA,CAAaR,CAAAA,CAAK,GAAA,CACpBS,EAEAF,CAAAA,EAAcH,CAAAA,CAAaC,CAAAA,CAE7BI,CAAAA,CAAST,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACdG,CAAAA,EAAcJ,EAAaC,CAAAA,CAEpCI,CAAAA,CAAST,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAAA,CAGjCI,CAAAA,CAASF,CAAAA,EAAcC,EACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIL,CAAAA,CAAK,GAAA,CAAMI,EAAaC,CAAG,CAAA,CAI9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,CAAAA,CAAQ,IAAA,CAAMH,CAAQ,CAAC,CAAA,CAC9Cb,CAAAA,CAAU,IAAI,EAChB,CAAA,CAKAf,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAE9CoC,CAAAA,CAAQ,OAAA,EACR,CAACA,CAAAA,CAAQ,OAAA,CAAQ,SAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,CAAAA,CAAU,OAAA,EAAS,QAAA,CAAStC,CAAAA,CAAM,MAAc,CAAA,GAEjDiC,CAAAA,CAAU,KAAK,CAAA,CACf0D,CAAAA,CAAe,EAAE,CAAA,EAErB,CAAA,CAEA,GAAI3D,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,oBAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEXd,UAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,WACZnB,CAAAA,CAAU,KAAK,CAAA,CACf0D,CAAAA,CAAe,EAAE,CAAA,EAErB,CAAA,CAEA,GAAI3D,EACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,UAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAM,CAAC,CAAA,CAEX,IAAM4D,EAAoBC,CAAAA,EAAe,CACvC,IAAMC,CAAAA,CAAaP,CAAAA,CAAc,IAAA,CAAMQ,CAAAA,EAAMA,CAAAA,CAAE,KAAOF,CAAAA,CAAK,EAAE,CAAA,CAG3D/D,CAAAA,CADEgE,CAAAA,CACOP,CAAAA,CAAc,MAAA,CAAQQ,CAAAA,EAAMA,EAAE,EAAA,GAAOF,CAAAA,CAAK,EAAE,CAAA,CAE5C,CAAC,GAAGN,CAAAA,CAAeM,CAAI,CAFsB,EAI1D,CAAA,CAEMG,CAAAA,CAAgBR,CAAAA,CAAe,MAAA,CAAQK,CAAAA,EAC3CA,CAAAA,CAAK,IAAA,CAAK,aAAY,CAAE,QAAA,CAASH,CAAAA,CAAY,WAAA,EAAa,CAC5D,CAAA,CAEMO,CAAAA,CAAeV,EAAc,KAAA,CAAM,CAAA,CAAGE,CAAiB,CAAA,CACvDS,CAAAA,CAAgBX,CAAAA,CAAc,MAAA,CAASE,CAAAA,CAE7C,OACE9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW,CAAA,SAAA,EAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CAEzC,QAAA,CAAA,CAAAtB,IAAC,QAAA,CAAA,CACC,GAAA,CAAK6B,CAAAA,CACL,OAAA,CAAS,IAAMN,CAAAA,CAASC,CAAAA,CAAU,KAAK,EAAIM,CAAAA,EAAS,CACpD,SAAA,CAAU,wGAAA,CACV,KAAA,CAAOgD,CAAAA,CAAc,MAAA,CAAS,CAAA,CAAI,GAAGA,CAAAA,CAAc,MAAM,CAAA,SAAA,CAAA,CAAc,cAAA,CAEtE,QAAA,CAAAA,CAAAA,CAAc,MAAA,CAAS,CAAA,CACtB5D,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qBAAA,CACZ,QAAA,CAAA,CAAAsE,CAAAA,CAAa,GAAA,CAAKJ,CAAAA,EACjBpF,GAAAA,CAAC,OAEC,SAAA,CAAU,eAAA,CACV,KAAA,CAAOoF,CAAAA,CAAK,IAAA,CAEX,QAAA,CAAAA,CAAAA,CAAK,MAAA,CACJpF,IAAC,KAAA,CAAA,CACC,GAAA,CAAKoF,CAAAA,CAAK,MAAA,CACV,GAAA,CAAKA,CAAAA,CAAK,IAAA,CACV,SAAA,CAAU,oBACZ,CAAA,CAEAA,CAAAA,CAAK,QAAA,CAAA,CAXFA,CAAAA,CAAK,EAaZ,CACD,CAAA,CACAK,CAAAA,CAAgB,GACfvE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,eAAA,CAAgB,QAAA,CAAA,CAAA,GAAA,CAC3BuE,CAAAA,CAAAA,CACJ,CAAA,CAAA,CAEJ,CAAA,CAEAzF,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,sEAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,0BAAA,CACZ,MAAA,CAAQ,sCACR,KAAA,CAAO,SACT,CAAA,CAEA,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CACC,CAAA,CAAE,iEAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,QAChB,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAG,IAAA,CACH,EAAA,CAAG,GAAA,CACH,EAAA,CAAG,KACH,EAAA,CAAG,GAAA,CACH,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CAChB,EACAA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAG,IAAA,CACH,EAAA,CAAG,GAAA,CACH,EAAA,CAAG,IAAA,CACH,GAAG,GAAA,CACH,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CAChB,CAAA,CAAA,CACF,EACF,CAAA,CAEJ,CAAA,CAICuB,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAgB,IAAAA,CAAC,OACC,GAAA,CAAKS,CAAAA,CACL,SAAA,CAAU,+DAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,IAAK,CAAA,EAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAa,IAAI,KAC1B,SAAA,CAAW,oBAAA,CACX,QAAA,CAAU,QAAA,CACV,OAAA,CAAS,MAAA,CACT,aAAA,CAAe,QAAA,CACf,WAAY,6BAAA,CACZ,MAAA,CAAQ,6DAAA,CACR,SAAA,CAAW,oEAAA,CACX,MAAA,CAAQ,KACV,CAAA,CAGF,UAAAzB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,KAAA,CAAO,CAAE,WAAA,CAAa,kDAAmD,EAC3G,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,4CAAA,CAA6C,KAAA,CAAO,CAAE,KAAA,CAAO,0DAA2D,CAAA,CAAG,QAAA,CAAA,cAAA,CAE3I,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,MAAO,CAAE,WAAA,CAAa,kDAAmD,CAAA,CAC3G,QAAA,CAAAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,OACL,KAAA,CAAOiF,CAAAA,CACP,QAAA,CAAWtC,CAAAA,EAAMuC,EAAevC,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC9C,YAAY,iBAAA,CACZ,SAAA,CAAU,0EAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,yDAAA,CACZ,WAAA,CAAa,mDACb,KAAA,CAAO,uCACT,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CACF,CAAA,CAGA3C,GAAAA,CAAC,OAAI,SAAA,CAAU,oCAAA,CACZ,QAAA,CAAAuF,CAAAA,CAAc,MAAA,GAAW,CAAA,CACxBvF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,+BAAA,CAAgC,KAAA,CAAO,CAAE,KAAA,CAAO,yDAA0D,CAAA,CAAG,QAAA,CAAA,gBAAA,CAE5H,CAAA,CAEAuF,EAAc,GAAA,CAAKH,CAAAA,EAAS,CAC1B,IAAMC,CAAAA,CAAaP,CAAAA,CAAc,IAAA,CAAMQ,CAAAA,EAAMA,EAAE,EAAA,GAAOF,CAAAA,CAAK,EAAE,CAAA,CAE7D,OACElE,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMiE,CAAAA,CAAiBC,CAAI,CAAA,CACpC,SAAA,CAAU,mFAAA,CACV,KAAA,CAAO,CAAE,UAAA,CAAY,aAAc,CAAA,CACnC,YAAA,CAAezC,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,wDACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,cACrC,CAAA,CAGA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,qGAAA,CACV,KAAA,CAAO,CACL,gBAAiBoF,CAAAA,CAAK,KAAA,CACtB,KAAA,CAAO,MACT,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAK,MAAA,CACJpF,IAAC,KAAA,CAAA,CACC,GAAA,CAAKoF,CAAAA,CAAK,MAAA,CACV,GAAA,CAAKA,CAAAA,CAAK,IAAA,CACV,SAAA,CAAU,0CACZ,CAAA,CAEAA,CAAAA,CAAK,QAAA,CAET,CAAA,CAGApF,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yCAAA,CAA0C,MAAO,CAAE,KAAA,CAAO,yDAA0D,CAAA,CACjI,QAAA,CAAAoF,CAAAA,CAAK,IAAA,CACR,CAAA,CAGApF,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sCAAA,CAAuC,KAAA,CAAO,CAAE,KAAA,CAAOqF,CAAAA,CAAa,SAAA,CAAY,aAAc,CAAA,CAC3G,QAAA,CAAAA,CAAAA,CAAa,QAAA,CAAM,EAAA,CACtB,CAAA,CAAA,CAAA,CAtCKD,CAAAA,CAAK,EAuCZ,CAEJ,CAAC,CAAA,CAEL,CAAA,CAGCN,CAAAA,CAAc,MAAA,CAAS,CAAA,EACtB9E,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,oCAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbqB,CAAAA,CAAS,EAAE,CAAA,CACXG,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAU,+GAAA,CACV,MAAO,CACL,KAAA,CAAO,SAAA,CACP,WAAA,CAAa,0BAAA,CACb,UAAA,CAAY,2BACd,CAAA,CACD,qBAED,CAAA,CACF,CAAA,CAAA,CAEF,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CChUO,SAASkE,EAAAA,CACdC,CAAAA,CACAC,CAAAA,CACAC,EACS,CAET,IAAMC,CAAAA,CAAgB,IAAI,GAAA,CAC1BH,CAAAA,CAAS,OAAA,CAAS/J,CAAAA,EAAS,CACzB,GAAIA,CAAAA,CAAK,YAAA,EAAgB,KAAA,CAAM,OAAA,CAAQA,CAAAA,CAAK,YAAY,CAAA,CAAG,CAGzD,IAAMmK,CAAAA,CAAOnK,CAAAA,CAAK,YAAA,CAAa,GAAA,CAAKoK,CAAAA,EAAM,CACxC,GAAI,OAAOA,CAAAA,EAAM,QAAA,CAAU,OAAOA,CAAAA,CAElC,IAAMC,CAAAA,CAASD,CAAAA,CACf,OAAOC,EAAO,MAAA,EAAUA,CAAAA,CAAO,QAAA,EAAY,EAC7C,CAAC,CAAA,CAAE,MAAA,CAAO,OAAO,EACjBH,CAAAA,CAAc,GAAA,CAAIlK,CAAAA,CAAK,EAAA,CAAImK,CAAI,EACjC,CACF,CAAC,EAGD,IAAMG,CAAAA,CAAeJ,CAAAA,CAAc,GAAA,CAAID,CAAQ,CAAA,EAAK,EAAC,CACrDC,EAAc,GAAA,CAAID,CAAAA,CAAU,CAAC,GAAGK,CAAAA,CAAcN,CAAU,CAAC,CAAA,CAGzD,IAAMO,CAAAA,CAAU,IAAI,GAAA,CACdC,CAAAA,CAAW,IAAI,GAAA,CAEfC,CAAAA,CAAYC,CAAAA,EAA4B,CAC5C,GAAI,CAACH,CAAAA,CAAQ,GAAA,CAAIG,CAAM,CAAA,CAAG,CACxBH,CAAAA,CAAQ,GAAA,CAAIG,CAAM,CAAA,CAClBF,CAAAA,CAAS,GAAA,CAAIE,CAAM,CAAA,CAEnB,IAAMP,CAAAA,CAAOD,CAAAA,CAAc,IAAIQ,CAAM,CAAA,EAAK,EAAC,CAC3C,IAAA,IAAWC,CAAAA,IAASR,CAAAA,CAAM,CACxB,GAAI,CAACI,CAAAA,CAAQ,GAAA,CAAII,CAAK,CAAA,EAAKF,CAAAA,CAASE,CAAK,CAAA,CACvC,OAAO,KAAA,CACF,GAAIH,CAAAA,CAAS,GAAA,CAAIG,CAAK,CAAA,CAC3B,OAAO,KAEX,CACF,CACA,OAAAH,CAAAA,CAAS,MAAA,CAAOE,CAAM,CAAA,CACf,KACT,CAAA,CAEA,OAAOD,CAAAA,CAASR,CAAQ,CAC1B,CAmBO,SAASW,EAAAA,CAAqB,CACnC,aAAA,CAAAC,EACA,YAAA,CAAAC,CAAAA,CAAe,EAAC,CAChB,cAAA,CAAAC,CAAAA,CACA,QAAA,CAAAtF,CAAAA,CACA,UAAAC,CAAAA,CACA,gBAAA,CAAAsF,CAAAA,CAAmB,IAAA,CACnB,yBAAA,CAAAC,CACF,CAAA,CAA8B,CAC5B,GAAM,CAACtF,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAAC2E,EAAaC,CAAc,CAAA,CAAI5E,QAAAA,CAAS,EAAE,CAAA,CAC3C,CAACwG,CAAAA,CAAiBC,CAAkB,EAAIzG,QAAAA,CAASoG,CAAAA,CAAa,MAAA,CAAS,CAAC,CAAA,CACxE,CAACjF,CAAAA,CAAcC,CAAe,EAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC9D,CAAC0G,CAAAA,CAAeC,CAAgB,CAAA,CAAI3G,QAAAA,CAAwB,IAAI,CAAA,CAChEqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,MAAAA,CAA0B,IAAI,CAAA,CAG1CE,CAAAA,CAAW,IAAM,CACrB,GAAI,CAACD,CAAAA,CAAU,OAAA,CAAS,OAExB,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,uBAAsB,CAC/CG,CAAAA,CAAiB,MAAA,CAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,CAAAA,CAAY,IAEZC,CAAAA,CAAa2E,CAAAA,CAAkB,GAAA,CAAM,GAAA,CACrC1E,CAAAA,CAAM,CAAA,CAERC,CAAAA,CAAUN,CAAAA,CAAK,MAAQG,CAAAA,CACvBG,CAAAA,CAAU,EAAA,GAAIA,CAAAA,CAAUN,CAAAA,CAAK,IAAA,CAAA,CAC7BM,CAAAA,CAAUH,CAAAA,CAAYD,EAAgB,EAAA,GACxCI,CAAAA,CAAUJ,CAAAA,CAAgBC,CAAAA,CAAY,EAAA,CAAA,CAGxC,IAAMI,EAAAA,CAAaN,CAAAA,CAAiBD,EAAK,MAAA,CACnCQ,EAAAA,CAAaR,CAAAA,CAAK,GAAA,CACpBS,EAAAA,CAEAF,EAAAA,EAAcH,CAAAA,CAAaC,CAAAA,CAC7BI,GAAST,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACdG,EAAAA,EAAcJ,CAAAA,CAAaC,CAAAA,CACpCI,EAAAA,CAAST,CAAAA,CAAK,IAAMI,CAAAA,CAAaC,CAAAA,CAEjCI,EAAAA,CAASF,EAAAA,EAAcC,EAAAA,CACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,KAAK,GAAA,CAAI,EAAA,CAAIL,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAG,CAAA,CAG9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,EAAAA,CAAQ,IAAA,CAAMH,CAAQ,CAAC,CAAA,CAC9Cb,CAAAA,CAAU,IAAI,EAChB,CAAA,CAMAf,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,EAAU,CAACM,EAAU,OAAA,CAAS,OAEnC,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,EAAsB,CAC/CG,EAAiB,MAAA,CAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAa2E,EAAkB,GAAA,CAAM,GAAA,CACrC1E,CAAAA,CAAM,CAAA,CAERC,CAAAA,CAAUN,CAAAA,CAAK,KAAA,CAAQG,CAAAA,CACvBG,EAAU,EAAA,GAAIA,CAAAA,CAAUN,CAAAA,CAAK,IAAA,CAAA,CAC7BM,CAAAA,CAAUH,CAAAA,CAAYD,CAAAA,CAAgB,EAAA,GACxCI,EAAUJ,CAAAA,CAAgBC,CAAAA,CAAY,EAAA,CAAA,CAGxC,IAAMI,EAAAA,CAAaN,CAAAA,CAAiBD,CAAAA,CAAK,MAAA,CACnCQ,GAAaR,CAAAA,CAAK,GAAA,CACpBS,EAAAA,CAEAF,EAAAA,EAAcH,EAAaC,CAAAA,CAC7BI,EAAAA,CAAST,CAAAA,CAAK,MAAA,CAASK,EACdG,EAAAA,EAAcJ,CAAAA,CAAaC,CAAAA,CACpCI,EAAAA,CAAST,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAAA,CAEjCI,GAASF,EAAAA,EAAcC,EAAAA,CACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIL,EAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAG,CAAA,CAG9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,EAAAA,CAAQ,KAAMH,CAAQ,CAAC,EAChD,CAAA,CAAG,CAACyE,CAAAA,CAAiBvF,CAAM,CAAC,EAE5Bd,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAE9CoC,CAAAA,CAAQ,SACR,CAACA,CAAAA,CAAQ,OAAA,CAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,EAAU,OAAA,EAAS,QAAA,CAAStC,CAAAA,CAAM,MAAc,CAAA,GAEjDiC,CAAAA,CAAU,KAAK,CAAA,CACf0D,EAAe,EAAE,CAAA,EAErB,CAAA,CAEA,GAAI3D,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,GAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACZnB,CAAAA,CAAU,KAAK,CAAA,CACf0D,CAAAA,CAAe,EAAE,CAAA,EAErB,CAAA,CAEA,GAAI3D,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,EAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAM,CAAC,CAAA,CAEX,IAAM2F,CAAAA,CAA0BC,CAAAA,EAAmB,CACjD,IAAMC,CAAAA,CAAeV,EAAa,QAAA,CAASS,CAAM,CAAA,CAC3CE,CAAAA,CAAaV,CAAAA,CAAe,IAAA,CAAMW,CAAAA,EAAMA,CAAAA,CAAE,KAAOH,CAAM,CAAA,CAK7D,GAFAF,CAAAA,CAAiB,IAAI,CAAA,CAEjBG,CAAAA,CAAc,CAEhB,IAAMG,CAAAA,CAAUb,CAAAA,CAAa,MAAA,CAAQc,CAAAA,EAAOA,CAAAA,GAAOL,CAAM,CAAA,CACzD9F,CAAAA,CAASkG,CAAO,CAAA,CACZA,CAAAA,CAAQ,MAAA,GAAW,CAAA,EACrBR,CAAAA,CAAmB,KAAK,EAE5B,CAAA,KAAO,CAEL,GAAIH,CAAAA,EACsBlB,EAAAA,CACtBiB,CAAAA,CACAQ,CAAAA,CACAV,CACF,CAAA,CAEqB,CACnB,IAAMgB,CAAAA,CAAW,CAAA,YAAA,EAAeJ,CAAAA,EAAY,KAAA,EAASF,CAAM,CAAA,iDAAA,CAAA,CAC3DF,CAAAA,CAAiBQ,CAAQ,EACzBZ,CAAAA,GAA4BM,CAAAA,CAAQE,CAAAA,EAAY,KAAA,EAASF,CAAM,CAAA,CAE/D,UAAA,CAAW,IAAMF,EAAiB,IAAI,CAAA,CAAG,GAAI,CAAA,CAC7C,MACF,CAGF5F,CAAAA,CAAS,CAAC,GAAGqF,CAAAA,CAAcS,CAAM,CAAC,CAAA,CAClCJ,CAAAA,CAAmB,IAAI,EACzB,CACF,EAEMW,CAAAA,CAA8B,IAAM,CACxC,IAAMC,CAAAA,CAAW,CAACb,CAAAA,CAClBC,CAAAA,CAAmBY,CAAQ,CAAA,CAEtBA,CAAAA,EAEHtG,CAAAA,CAAS,EAAE,EAEf,CAAA,CAGMuG,CAAAA,CAAgBjB,EACnB,MAAA,CAAQkB,CAAAA,EAASA,CAAAA,CAAK,EAAA,GAAOpB,CAAa,CAAA,CAC1C,MAAA,CACEoB,CAAAA,EACCA,EAAK,KAAA,CAAM,WAAA,EAAY,CAAE,QAAA,CAAS5C,CAAAA,CAAY,WAAA,EAAa,CAAA,EAC3D4C,EAAK,EAAA,CAAG,WAAA,EAAY,CAAE,QAAA,CAAS5C,CAAAA,CAAY,WAAA,EAAa,CAC5D,EAEI6C,CAAAA,CAAYpB,CAAAA,CAAa,MAAA,CAAS,CAAA,CAAI,SAAA,CAAY,SAAA,CAExD,OACExF,IAAAA,CAAC,OAAI,SAAA,CAAW,CAAA,SAAA,EAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CAEzC,QAAA,CAAA,CAAAJ,IAAAA,CAAC,QAAA,CAAA,CACC,IAAKW,CAAAA,CACL,OAAA,CAAS,IAAMN,CAAAA,CAASC,CAAAA,CAAU,KAAK,CAAA,CAAIM,CAAAA,GAC3C,SAAA,CAAU,2EAAA,CACV,KAAA,CACE4E,CAAAA,CAAa,OAAS,CAAA,CAClB,CAAA,EAAGA,CAAAA,CAAa,MAAM,gBACtB,kBAAA,CAGN,QAAA,CAAA,CAAA1G,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAE,0MAAA,CACF,MAAA,CAAQ8H,CAAAA,CACR,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,QACjB,CAAA,CACF,CAAA,CACCpB,CAAAA,CAAa,MAAA,CAAS,CAAA,EACrB1G,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,KAAA,CAAO8H,CAAU,CAAA,CAC7D,QAAA,CAAApB,CAAAA,CAAa,MAAA,CAChB,GAEJ,CAAA,CAICnF,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAgB,IAAAA,CAAC,KAAA,CAAA,CACC,IAAKS,CAAAA,CACL,SAAA,CAAU,uEAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,GAAA,CAAK,GAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAa,IAAI,CAAA,EAAA,CAAA,CAC1B,UAAW,oBAAA,CACX,QAAA,CAAU,QAAA,CACV,OAAA,CAAS,MAAA,CACT,aAAA,CAAe,QAAA,CACf,UAAA,CAAY,8BACZ,MAAA,CAAQ,6DAAA,CACR,SAAA,CAAW,oEAAA,CACX,MAAA,CAAQ,KACV,CAAA,CAGD,QAAA,CAAA,CAAAuF,GACC9F,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,mCAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,yBAAA,CACZ,aAAc,kCAChB,CAAA,CAEA,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,GAAAA,CAAC,QACC,CAAA,CAAE,8HAAA,CACF,MAAA,CAAO,SAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CACd,eAAe,OAAA,CACjB,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qBAAA,CAAsB,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAC7D,QAAA,CAAAgH,CAAAA,CACH,CAAA,CAAA,CACF,CAAA,CAIFhH,GAAAA,CAAC,OAAI,SAAA,CAAU,oBAAA,CAAqB,KAAA,CAAO,CAAE,WAAA,CAAa,mDAAoD,CAAA,CAC5G,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,+CAAA,CAAgD,KAAA,CAAO,CAAE,KAAA,CAAO,0DAA2D,CAAA,CAAG,6BAE9I,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,KAAA,CAAO,CAAE,YAAa,mDAAoD,CAAA,CAC5G,QAAA,CAAAkB,IAAAA,CAAC,OAAA,CAAA,CACC,SAAA,CAAU,8CAAA,CACV,OAAA,CAASwG,EAET,QAAA,CAAA,CAAA1H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,0EAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY8G,EAAkB,SAAA,CAAY,aAAA,CAC1C,WAAA,CAAaA,CAAAA,CAAkB,SAAA,CAAY,kDAC7C,CAAA,CAEC,QAAA,CAAAA,GACC9G,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,eAAA,CACF,OAAO,OAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,EAEJ,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qBAAA,CAAsB,KAAA,CAAO,CAAE,KAAA,CAAO,wDAAyD,CAAA,CAAG,QAAA,CAAA,kBAAA,CAElH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGC8G,CAAAA,EACC5F,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,KAAA,CAAO,CAAE,WAAA,CAAa,mDAAoD,CAAA,CAC5G,QAAA,CAAAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOiF,CAAAA,CACP,SAAWtC,CAAAA,EAAMuC,CAAAA,CAAevC,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC9C,WAAA,CAAY,yBAAA,CACZ,UAAU,wEAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,yDAAA,CACZ,WAAA,CAAa,kDAAA,CACb,KAAA,CAAO,uCACT,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CACF,EAGA3C,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACZ,SAAA4H,CAAAA,CAAc,MAAA,GAAW,CAAA,CACxB5H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CAAgC,KAAA,CAAO,CAAE,KAAA,CAAO,yDAA0D,CAAA,CAAG,QAAA,CAAA,gBAAA,CAE5H,CAAA,CAEA4H,CAAAA,CAAc,GAAA,CAAKC,CAAAA,EAAS,CAC1B,IAAMT,CAAAA,CAAeV,CAAAA,CAAa,QAAA,CAASmB,CAAAA,CAAK,EAAE,CAAA,CAElD,OACE3G,KAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMgG,CAAAA,CAAuBW,CAAAA,CAAK,EAAE,CAAA,CAC7C,SAAA,CAAU,oEACV,KAAA,CAAO,CAAE,UAAA,CAAY,aAAc,CAAA,CACnC,YAAA,CAAelF,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,0DACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,UAAA,CAAa,cACrC,CAAA,CAGA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,+FAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAYoH,CAAAA,CAAe,SAAA,CAAY,aAAA,CACvC,WAAA,CAAaA,EAAe,SAAA,CAAY,kDAC1C,CAAA,CAEC,QAAA,CAAAA,CAAAA,EACCpH,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,SAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,eAAA,CACF,MAAA,CAAO,OAAA,CACP,WAAA,CAAY,GAAA,CACZ,cAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,CAAA,CAEJ,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,kBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,aAAA,CAAc,KAAA,CAAO,CAAE,MAAO,wDAAyD,CAAA,CACnG,QAAA,CAAA6H,CAAAA,CAAK,KAAA,CACR,CAAA,CACA7H,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,gBAAA,CAAiB,KAAA,CAAO,CAAE,KAAA,CAAO,yDAA0D,CAAA,CACvG,QAAA,CAAA6H,CAAAA,CAAK,GACR,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CA9CKA,CAAAA,CAAK,EA+CZ,CAEJ,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,EAIDnB,CAAAA,CAAa,MAAA,CAAS,CAAA,EACrB1G,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAAA,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbqB,CAAAA,CAAS,EAAE,CAAA,CACX0F,EAAmB,KAAK,CAAA,CACxBvF,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAU,6GAAA,CACV,MAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAC3B,QAAA,CAAA,wBAAA,CAED,CAAA,CACF,CAAA,CAAA,CAEF,CAAA,CACF,GAEJ,CAEJ,CC/cO,IAAMwG,GAAOC,IAAAA,CAClB,CAAC,CACC,IAAA,CAAArM,CAAAA,CACA,MAAA,CAAAsM,CAAAA,CACA,OAAA,CAAAC,EACA,UAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,SAAA,CAAA/G,CAAAA,CACA,QAAA,CAAAgH,CAAAA,CACA,eAAAvD,CAAAA,CAAiB,EAAC,CAClB,QAAA,CAAAY,CAAAA,CAAW,EACb,CAAA,GAAM,CACJ,GAAM,CACJ,UAAA,CAAA4C,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,UAAAjS,CAAAA,CACA,UAAA,CAAAkS,CAAAA,CACA,UAAA,CAAAC,CACF,CAAA,CAAIC,WAAAA,CAAY,CACd,GAAIhN,CAAAA,CAAK,EAAA,CACT,QAAA,CAAUyM,CAAAA,CACV,IAAA,CAAM,CACJ,IAAA,CAAM,MAAA,CACN,KAAAzM,CACF,CACF,CAAC,CAAA,CAEKiN,CAAAA,CAAQ,CACZ,SAAA,CAAW1S,EAAAA,CAAI,UAAU,QAAA,CAASK,CAAS,CAAA,CAC3C,UAAA,CAAAkS,CACF,CAAA,CAGA,GAAIR,CAAAA,CACF,OACElI,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKyI,CAAAA,CACL,KAAA,CAAOI,CAAAA,CACN,GAAGN,CAAAA,CACH,GAAGC,CAAAA,CACJ,OAAA,CAAS,IAAML,CAAAA,GAAUvM,CAAI,CAAA,CAE5B,QAAA,CAAAsM,CAAAA,CAAOtM,CAAI,CAAA,CACd,CAAA,CAKJ,IAAMkJ,CAAAA,CAAgBC,EAAe,MAAA,CAAQK,CAAAA,EAC3CxJ,CAAAA,CAAK,eAAA,EAAiB,SAASwJ,CAAAA,CAAK,EAAE,CACxC,CAAA,CAGM0D,CAAAA,CAAclN,CAAAA,CAAK,QAAA,GAAa,GAAA,CAGhCmN,GAAoBnN,CAAAA,CAAK,WAAA,EAAe,EAAC,EAAG,MAAA,CAAQoN,CAAAA,EACxDA,CAAAA,CAAI,IAAA,CAAK,WAAW,QAAQ,CAC9B,CAAA,CAGMC,CAAAA,CAAY,CAChB,GAAGJ,CAAAA,CAEH,GAAIjN,EAAK,KAAA,EAAS,CAChB,cAAA,CAAgB,KAAA,CAChB,cAAA,CAAgB,OAAA,CAChB,cAAA,CAAgBA,CAAAA,CAAK,KACvB,CACF,CAAA,CAEA,OACEsF,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKuH,CAAAA,CACL,KAAA,CAAOQ,EACP,SAAA,CAAW1R,CAAAA,CACT,aAAA,CACAoR,CAAAA,EAAc,sBAAA,CACdP,CAAAA,EAAc,gCAAA,CACd9G,CACF,EACC,GAAGiH,CAAAA,CACH,GAAGC,CAAAA,CACJ,OAAA,CAAU7F,CAAAA,EAAM,CAGXA,CAAAA,CAAE,OAAuB,OAAA,CACxB,0EACF,CAAA,EAIFwF,CAAAA,GAAUvM,CAAI,EAChB,CAAA,CAGC,QAAA,CAAA,CAAAA,EAAK,UAAA,EACJoE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,KAAA,CAAA,CACC,IAAKpE,CAAAA,CAAK,UAAA,CACV,GAAA,CAAK,CAAA,UAAA,EAAaA,CAAAA,CAAK,KAAK,CAAA,CAAA,CAC5B,SAAA,CAAU,sCACV,OAAA,CAAQ,MAAA,CACR,OAAA,CAAU+G,CAAAA,EAAM,CAEdA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,QAAU,OAClC,CAAA,CACF,CAAA,CACF,CAAA,CAKDoG,CAAAA,CAAiB,MAAA,CAAS,CAAA,EAAK,CAACnN,EAAK,UAAA,EACpCoE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACZ,QAAA,CAAA+I,CAAAA,CAAiB,MAAA,GAAW,GAAKA,CAAAA,CAAiB,CAAC,CAAA,CAElD/I,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAK+I,CAAAA,CAAiB,CAAC,EAAE,GAAA,CACzB,GAAA,CAAKA,CAAAA,CAAiB,CAAC,CAAA,CAAE,IAAA,CACzB,SAAA,CAAU,qCAAA,CACV,QAAQ,MAAA,CACR,QAAA,CAAS,OAAA,CACT,KAAA,CAAO,CACL,cAAA,CAAgB,MAAA,CAChB,wBAAA,CAA0B,SAC1B,kBAAA,CAAoB,QAAA,CACpB,SAAA,CAAW,eACb,CAAA,CACA,OAAA,CAAUpG,CAAAA,EAAM,CACdA,EAAE,aAAA,CAAc,KAAA,CAAM,OAAA,CAAU,OAClC,CAAA,CACF,CAAA,CAGA3C,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CACZ,QAAA,CAAA+I,CAAAA,CAAiB,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAACC,CAAAA,CAAKrK,CAAAA,GACtCuC,IAAAA,CAAC,KAAA,CAAA,CAAiB,SAAA,CAAU,UAAA,CAC1B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OACC,GAAA,CAAKgJ,CAAAA,CAAI,GAAA,CACT,GAAA,CAAKA,CAAAA,CAAI,IAAA,CACT,SAAA,CAAU,kCAAA,CACV,QAAQ,MAAA,CACR,QAAA,CAAS,OAAA,CACT,KAAA,CAAO,CACL,cAAA,CAAgB,MAAA,CAChB,wBAAA,CAA0B,SAC1B,kBAAA,CAAoB,QAAA,CACpB,SAAA,CAAW,eACb,CAAA,CACA,OAAA,CAAUrG,CAAAA,EAAM,CACdA,EAAE,aAAA,CAAc,KAAA,CAAM,OAAA,CAAU,OAClC,CAAA,CACF,CAAA,CAEChE,CAAAA,GAAU,CAAA,EAAKoK,EAAiB,MAAA,CAAS,CAAA,EACxC/I,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uEAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,QAAK,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,CAAA,GAAA,CAC7C6H,CAAAA,CAAiB,MAAA,CAAS,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,CAAA,CAAA,CAvBMC,EAAI,EAyBd,CACD,CAAA,CACH,CAAA,CAEJ,CAAA,CAIFhJ,GAAAA,CAAC,IAAA,CAAA,CACC,SAAA,CAAU,yBACV,KAAA,CAAO,CACL,cAAA,CAAgB8I,CAAAA,CAAc,cAAA,CAAiB,MAAA,CAC/C,OAAA,CAASA,CAAAA,CAAc,GAAM,CAC/B,CAAA,CAEC,QAAA,CAAAlN,CAAAA,CAAK,KAAA,CACR,CAAA,CAGCA,CAAAA,CAAK,WAAA,EACJoE,IAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8BAAA,CAAgC,QAAA,CAAApE,CAAAA,CAAK,WAAA,CAAY,CAAA,CAIhEsF,IAAAA,CAAC,OAAI,SAAA,CAAU,mCAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAAG,SAAA,CAAU,mBAAA,CAClD,QAAA,CAAA3C,IAACmB,EAAAA,CAAA,CACC,QAAA,CAAUvF,CAAAA,CAAK,SACf,QAAA,CAAWwF,CAAAA,EAAakH,CAAAA,GAAW1M,CAAAA,CAAK,EAAA,CAAI,CAAE,QAAA,CAAAwF,CAAS,CAAC,CAAA,CAC1D,CAAA,CACF,CAAA,CAGApB,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAAG,SAAA,CAAU,aAAA,CAClD,QAAA,CAAA3C,GAAAA,CAACmD,EAAAA,CAAA,CACC,SAAA,CACEvH,EAAK,SAAA,CACD,OAAOA,CAAAA,CAAK,SAAA,EAAc,QAAA,CACxBA,CAAAA,CAAK,SAAA,CACLA,CAAAA,CAAK,UAAU,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAC3C,MAAA,CAEN,QACEA,CAAAA,CAAK,OAAA,CACD,OAAOA,CAAAA,CAAK,OAAA,EAAY,QAAA,CACtBA,CAAAA,CAAK,OAAA,CACLA,EAAK,OAAA,CAAQ,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CACzC,OAEN,QAAA,CAAU,CAACwH,CAAAA,CAAWC,CAAAA,GACpBiF,CAAAA,GAAW1M,CAAAA,CAAK,EAAA,CAAI,CAAE,UAAAwH,CAAAA,CAAW,OAAA,CAAAC,CAAQ,CAAC,CAAA,CAE9C,CAAA,CACF,CAAA,CAGC0B,CAAAA,CAAe,OAAS,CAAA,EACvB/E,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAAG,UAAU,eAAA,CAClD,QAAA,CAAA3C,GAAAA,CAAC6E,EAAAA,CAAA,CACC,aAAA,CAAeC,CAAAA,CACf,cAAA,CAAgBC,EAChB,QAAA,CAAWmE,CAAAA,EACTZ,CAAAA,GAAW1M,CAAAA,CAAK,EAAA,CAAI,CAClB,eAAA,CAAiBsN,CAAAA,CAAM,IAAK5D,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CACxC,CAAC,CAAA,CAEL,CAAA,CACF,CAAA,CAIFtF,IAAC,KAAA,CAAA,CAAI,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAAG,SAAA,CAAU,uBAAA,CAClD,SAAA3C,GAAAA,CAACwG,EAAAA,CAAA,CACC,aAAA,CAAe5K,CAAAA,CAAK,EAAA,CACpB,YAAA,CACE,KAAA,CAAM,QAAQA,CAAAA,CAAK,YAAY,CAAA,CAC3BA,CAAAA,CAAK,YAAA,CAAa,GAAA,CAAKoK,CAAAA,EAAO,OAAOA,GAAM,QAAA,CAAWA,CAAAA,CAAIA,CAAAA,CAAE,MAAO,CAAA,CACnE,EAAC,CAEP,cAAA,CAAgBL,EAChB,QAAA,CAAWe,CAAAA,EAAiB4B,CAAAA,GAAW1M,CAAAA,CAAK,EAAA,CAAI,CAAE,YAAA,CAAA8K,CAAa,CAAC,CAAA,CAClE,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGC9K,CAAAA,CAAK,MAAA,EAAUA,CAAAA,CAAK,MAAA,CAAO,OAAS,CAAA,EACnCoE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACZ,QAAA,CAAApE,CAAAA,CAAK,MAAA,CAAO,MAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAKuN,CAAAA,EAC5BnJ,GAAAA,CAAC,MAAA,CAAA,CAAiB,SAAA,CAAU,eACzB,QAAA,CAAAmJ,CAAAA,CAAAA,CADQA,CAEX,CACD,CAAA,CACH,CAAA,CAID,OAAOvN,CAAAA,CAAK,UAAa,QAAA,EACxBsF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,UAAA,CAAQ,CAAA,CACrDkB,KAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAA,CAA0B,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CACjE,eAAK,KAAA,CAAMtF,CAAAA,CAAK,QAAQ,CAAA,CAAE,GAAA,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CACAoE,GAAAA,CAAC,OAAI,SAAA,CAAU,+CAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,iDAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO,CAAA,EAAG,IAAA,CAAK,GAAA,CAAI,GAAA,CAAK,IAAA,CAAK,GAAA,CAAI,CAAA,CAAGpE,EAAK,QAAQ,CAAC,CAAC,CAAA,CAAA,CAAA,CACnD,eAAA,CAAiB,SACnB,CAAA,CACF,CAAA,CACF,GACF,CAAA,CAAA,CAEJ,CAEJ,CAAA,CAEA,CAACwN,CAAAA,CAAWC,CAAAA,GAERD,CAAAA,CAAU,IAAA,CAAK,KAAOC,CAAAA,CAAU,IAAA,CAAK,EAAA,EACrCD,CAAAA,CAAU,IAAA,CAAK,KAAA,GAAUC,CAAAA,CAAU,IAAA,CAAK,OACxCD,CAAAA,CAAU,IAAA,CAAK,WAAA,GAAgBC,CAAAA,CAAU,IAAA,CAAK,WAAA,EAC9CD,CAAAA,CAAU,IAAA,CAAK,WAAaC,CAAAA,CAAU,IAAA,CAAK,QAAA,EAC3CD,CAAAA,CAAU,IAAA,CAAK,QAAA,GAAaC,CAAAA,CAAU,IAAA,CAAK,UAC3CD,CAAAA,CAAU,IAAA,CAAK,QAAA,GAAaC,CAAAA,CAAU,IAAA,CAAK,QAAA,EAC3CD,CAAAA,CAAU,IAAA,CAAK,QAAUC,CAAAA,CAAU,IAAA,CAAK,KAAA,EACxCD,CAAAA,CAAU,IAAA,CAAK,QAAA,GAAaC,CAAAA,CAAU,IAAA,CAAK,UAC3CD,CAAAA,CAAU,IAAA,CAAK,SAAA,GAAcC,CAAAA,CAAU,IAAA,CAAK,SAAA,EAC5CD,CAAAA,CAAU,IAAA,CAAK,UAAYC,CAAAA,CAAU,IAAA,CAAK,OAAA,EAC1CD,CAAAA,CAAU,UAAA,GAAeC,CAAAA,CAAU,UAAA,EACnC,IAAA,CAAK,UAAUD,CAAAA,CAAU,IAAA,CAAK,MAAM,CAAA,GAClC,IAAA,CAAK,SAAA,CAAUC,CAAAA,CAAU,IAAA,CAAK,MAAM,CAAA,EACtC,IAAA,CAAK,SAAA,CAAUD,CAAAA,CAAU,IAAA,CAAK,eAAe,CAAA,GAC3C,IAAA,CAAK,UAAUC,CAAAA,CAAU,IAAA,CAAK,eAAe,CAAA,EAC/C,IAAA,CAAK,SAAA,CAAUD,CAAAA,CAAU,IAAA,CAAK,YAAY,CAAA,GACxC,IAAA,CAAK,SAAA,CAAUC,CAAAA,CAAU,IAAA,CAAK,YAAY,CAAA,EAE5C,IAAA,CAAK,UAAUD,CAAAA,CAAU,IAAA,CAAK,WAAA,EAAa,GAAA,CAAK,CAAA,EAAM,CAAA,CAAE,EAAE,CAAC,IACzD,IAAA,CAAK,SAAA,CAAUC,CAAAA,CAAU,IAAA,CAAK,WAAA,EAAa,GAAA,CAAK,CAAA,EAAM,CAAA,CAAE,EAAE,CAAC,CAGnE,EAEArB,EAAAA,CAAK,WAAA,CAAc,MAAA,CCrUnB,IAAMsB,EAAAA,CAAgB,CACpB,IAAA,CAAQ,CACN,KAAA,CAAO,OAAA,CACP,MAAO,SAAA,CACP,IAAA,CAAM,QACR,CAAA,CACA,aAAA,CAAe,CACb,KAAA,CAAO,aAAA,CACP,MAAO,SAAA,CACP,IAAA,CAAM,YACR,CAAA,CACA,SAAA,CAAa,CACX,KAAA,CAAO,WAAA,CACP,MAAO,SAAA,CACP,IAAA,CAAM,cACR,CACF,CAAA,CAEMC,EAAAA,CAAa,CAAC,CAAE,KAAAC,CAAAA,CAAM,KAAA,CAAAvI,CAAM,CAAA,GAC5BuI,CAAAA,GAAS,QAAA,CAETxJ,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,6BAChE,QAAA,CAAAA,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,IAAI,MAAA,CAAQiB,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,CAAA,CAC3E,CAAA,CAIAuI,IAAS,YAAA,CAETtI,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,YAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,MAAA,CAAQiB,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,KAAK,MAAA,CAAO,CAAA,CACzEjB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAE,GAAA,CAAI,IAAA,CAAMiB,CAAAA,CAAO,CAAA,CAAA,CAC3C,CAAA,CAMFC,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,KAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,OAAQiB,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,IAAA,CAAMA,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,CAAA,CAC5FjB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gBAAA,CAAiB,MAAA,CAAQiB,CAAAA,CAAO,WAAA,CAAY,KAAA,CAAM,aAAA,CAAc,QAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CAAA,CACxG,CAAA,CAIG,SAASwI,EAAAA,CAAe,CAC7B,MAAA,CAAA/Q,EAAS,MAAA,CACT,QAAA,CAAA2I,CAAAA,CACA,SAAA,CAAAC,EACA,cAAA,CAAAoI,CAAAA,CAAiB,EACnB,EAAwB,CACtB,GAAM,CAACnI,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,EACpC,CAACmB,CAAAA,CAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,KAAM,CAAE,CAAC,CAAA,CAC9DqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,OAA0B,IAAI,CAAA,CAG1C+H,CAAAA,CAAiF,CACrF,GAAG,MAAA,CAAO,OAAA,CAAQL,EAAa,EAAE,GAAA,CAAI,CAAC,CAAC9B,CAAAA,CAAIvE,CAAM,CAAA,IAAO,CACtD,EAAA,CAAAuE,EACA,KAAA,CAAOvE,CAAAA,CAAO,KAAA,CACd,KAAA,CAAOA,CAAAA,CAAO,KAAA,CACd,IAAA,CAAMA,CAAAA,CAAO,IACf,CAAA,CAAE,CAAA,CACF,GAAGyG,CAAAA,CACA,MAAA,CAAOE,CAAAA,EAAM,CAAC,MAAA,CAAO,KAAKN,EAAa,CAAA,CAAE,QAAA,CAASM,CAAAA,CAAG,EAAE,CAAC,CAAA,CACxD,GAAA,CAAIA,IAAO,CACV,EAAA,CAAIA,CAAAA,CAAG,EAAA,CACP,KAAA,CAAOA,CAAAA,CAAG,KAAA,CACV,KAAA,CAAOA,EAAG,KAAA,EAAS,SAAA,CACnB,IAAA,CAAM,YACR,CAAA,CAAE,CACN,CAAA,CAGMC,CAAAA,CAAmB,IAAM,CAC7B,IAAMC,CAAAA,CAAgBR,EAAAA,CAAc5Q,CAAoB,CAAA,CACxD,GAAIoR,CAAAA,CACF,OAAO,CAAE,GAAGA,CAAAA,CAAe,EAAA,CAAIpR,CAAO,CAAA,CAExC,IAAMqR,CAAAA,CAAeL,EAAe,IAAA,CAAKE,CAAAA,EAAMA,CAAAA,CAAG,EAAA,GAAOlR,CAAM,CAAA,CAC/D,OAAIqR,CAAAA,CACK,CACL,EAAA,CAAIA,CAAAA,CAAa,EAAA,CACjB,KAAA,CAAOA,CAAAA,CAAa,KAAA,CACpB,KAAA,CAAOA,CAAAA,CAAa,OAAS,SAAA,CAC7B,IAAA,CAAM,YACR,CAAA,CAGK,CAAE,GAAGT,EAAAA,CAAc,IAAA,CAAS,GAAI,MAAO,CAChD,CAAA,CAGMxH,CAAAA,CAAW,IAAM,CACrB,GAAI,CAACD,EAAU,OAAA,CAAS,OAExB,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,EAAsB,CAC/CG,EAAiB,MAAA,CAAO,WAAA,CACxBC,CAAAA,CAAgB,MAAA,CAAO,UAAA,CACvBC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAa,IACbC,CAAAA,CAAM,CAAA,CAERC,CAAAA,CAAUN,CAAAA,CAAK,KAAA,CAAQG,CAAAA,CACvBG,CAAAA,CAAU,EAAA,GAAIA,EAAUN,CAAAA,CAAK,IAAA,CAAA,CAC7BM,CAAAA,CAAUH,CAAAA,CAAYD,CAAAA,CAAgB,EAAA,GACxCI,CAAAA,CAAUJ,CAAAA,CAAgBC,EAAY,EAAA,CAAA,CAGxC,IAAMI,CAAAA,CAAaN,CAAAA,CAAiBD,CAAAA,CAAK,MAAA,CACnCQ,CAAAA,CAAaR,CAAAA,CAAK,IACpBS,CAAAA,CAEAF,CAAAA,EAAcH,CAAAA,CAAaC,CAAAA,CAC7BI,CAAAA,CAAST,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACdG,GAAcJ,CAAAA,CAAaC,CAAAA,CACpCI,CAAAA,CAAST,CAAAA,CAAK,GAAA,CAAMI,CAAAA,CAAaC,CAAAA,CAEjCI,CAAAA,CAASF,GAAcC,CAAAA,CACnBR,CAAAA,CAAK,MAAA,CAASK,CAAAA,CACd,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIL,CAAAA,CAAK,IAAMI,CAAAA,CAAaC,CAAG,CAAA,CAG9CV,CAAAA,CAAgB,CAAE,GAAA,CAAKc,CAAAA,CAAQ,IAAA,CAAMH,CAAQ,CAAC,CAAA,CAC9Cb,CAAAA,CAAU,IAAI,EAChB,CAAA,CAKAf,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAE9CoC,CAAAA,CAAQ,OAAA,EACR,CAACA,CAAAA,CAAQ,QAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,CAAAA,CAAU,OAAA,EAAS,QAAA,CAAStC,EAAM,MAAc,CAAA,EAEjDiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,GAAID,CAAAA,CACF,gBAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,EAAE,GAAA,GAAQ,QAAA,EAAUnB,CAAAA,CAAU,KAAK,EACzC,CAAA,CAEA,GAAID,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAM,CAAC,CAAA,CAEX,IAAMqB,CAAAA,CAAgBoH,CAAAA,EAAsB,CAC1C3I,CAAAA,CAAS2I,CAAS,CAAA,CAClBxI,EAAU,KAAK,EACjB,CAAA,CAGMsB,CAAAA,CAAgB+G,CAAAA,EAAiB,CACjCI,CAAAA,CAAcnH,CAAAA,CAAc,MAElC,OACE5B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW,CAAA,SAAA,EAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CACzC,UAAAtB,GAAAA,CAAC,QAAA,CAAA,CACC,GAAA,CAAK6B,CAAAA,CACL,OAAA,CAAS,IAAMN,CAAAA,CAASC,CAAAA,CAAU,KAAK,CAAA,CAAIM,CAAAA,EAAS,CACpD,SAAA,CAAU,sHAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,GAAGmI,CAAW,CAAA,EAAA,CAAA,CAC1B,SAAA,CAAW,CAAA,UAAA,EAAaA,CAAW,CAAA,QAAA,CACrC,CAAA,CACA,KAAA,CAAOnH,EAAc,KAAA,CAErB,QAAA,CAAA9C,GAAAA,CAACuJ,EAAAA,CAAA,CAAW,IAAA,CAAMzG,CAAAA,CAAc,IAAA,CAAM,MAAOmH,CAAAA,CAAa,CAAA,CAC5D,CAAA,CAGC1I,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAgB,KAAC,KAAA,CAAA,CACC,GAAA,CAAKS,CAAAA,CACL,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,QACV,GAAA,CAAK,CAAA,EAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAa,IAAI,CAAA,EAAA,CAAA,CAC1B,MAAA,CAAQ,KAAA,CACR,QAAA,CAAU,OAAA,CACV,SAAA,CAAW,oBAAA,CACX,SAAA,CAAW,OACX,YAAA,CAAc,KAAA,CACd,UAAA,CAAY,6BAAA,CACZ,MAAA,CAAQ,6DAAA,CACR,SAAA,CAAW,oEACb,EAEF,QAAA,CAAA,CAAAzB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAa,kDAAmD,CAAA,CAEzE,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,gDAAA,CACV,KAAA,CAAO,CAAE,MAAO,0DAA2D,CAAA,CAC5E,QAAA,CAAA,QAAA,CAED,CAAA,CACF,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,OAEZ,QAAA,CAAA2J,CAAAA,CAAY,GAAA,CAAKO,CAAAA,EACdhJ,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM0B,EAAasH,CAAAA,CAAa,EAAE,CAAA,CAC3C,SAAA,CAAU,iHAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOA,EAAa,KAAA,CACpB,UAAA,CAAY,aACd,CAAA,CACA,YAAA,CAAevH,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,UAAA,CAAa,yDACrC,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,UAAA,CAAa,cACrC,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAACuJ,EAAAA,CAAA,CAAW,KAAMW,CAAAA,CAAa,IAAA,CAAM,KAAA,CAAOA,CAAAA,CAAa,KAAA,CAAO,CAAA,CAChElK,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,eAAA,CAAiB,QAAA,CAAAkK,CAAAA,CAAa,KAAA,CAAM,CAAA,CACnDxR,CAAAA,GAAWwR,CAAAA,CAAa,EAAA,EACvBlK,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,SAAA,CAAU,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,YAAY,IAAA,CAAK,MAAA,CACvE,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,wBAAA,CAAyB,MAAA,CAAO,UAAU,WAAA,CAAY,GAAA,CAAI,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CAChH,CAAA,CAAA,CAAA,CAnBGkK,EAAa,EAqBpB,CAEJ,CAAA,CACF,CAAA,CAAA,CACA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CChQO,SAASC,EAAAA,CAAW,CACzB,WAAA,CAAAvL,CAAAA,CACA,QAAA,CAAAwL,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CAAc,MACd,SAAA,CAAAhJ,CACF,CAAA,CAAoB,CAClB,GAAM,CAACC,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,SAAS,KAAK,CAAA,CACpC,CAACiK,CAAAA,CAAYC,CAAa,CAAA,CAAIlK,QAAAA,CAAS,KAAK,EAC5C,CAACmK,CAAAA,CAAUC,CAAW,CAAA,CAAIpK,QAAAA,CAAS1B,CAAW,CAAA,CAC9C,CAAC6C,EAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,GAAA,CAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC9DqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,MAAAA,CAA0B,IAAI,EAC1C+I,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,CAAA,CAG9CnB,SAAAA,CAAU,IAAM,CACd,GAAIc,GAAUM,CAAAA,CAAU,OAAA,CAAS,CAC/B,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,GAC/BH,CAAAA,CAAgB,CACd,GAAA,CAAKK,CAAAA,CAAK,MAAA,CAAS,MAAA,CAAO,OAAA,CAAU,CAAA,CACpC,KAAMA,CAAAA,CAAK,IAAA,CAAO,MAAA,CAAO,OAC3B,CAAC,EACH,CACF,CAAA,CAAG,CAACR,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,GAAsB,CAE9CoC,CAAAA,CAAQ,OAAA,EACR,CAACA,CAAAA,CAAQ,OAAA,CAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9C,CAACsC,CAAAA,CAAU,OAAA,EAAS,QAAA,CAAStC,CAAAA,CAAM,MAAc,CAAA,GAEjDiC,EAAU,KAAK,CAAA,CACfgJ,CAAAA,CAAc,KAAK,CAAA,EAEvB,CAAA,CAEA,GAAIjJ,CAAAA,CACF,gBAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACZnB,CAAAA,CAAU,KAAK,CAAA,CACfgJ,CAAAA,CAAc,KAAK,CAAA,CACnBE,CAAAA,CAAY9L,CAAW,CAAA,EAE3B,CAAA,CAEA,GAAI2C,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,oBAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAAA,CAAQ3C,CAAW,CAAC,EAGxB6B,SAAAA,CAAU,IAAM,CACV8J,CAAAA,EAAcI,CAAAA,CAAS,OAAA,GACzBA,CAAAA,CAAS,OAAA,CAAQ,OAAM,CACvBA,CAAAA,CAAS,OAAA,CAAQ,MAAA,EAAO,EAE5B,CAAA,CAAG,CAACJ,CAAU,CAAC,CAAA,CAEf,IAAMK,CAAAA,CAAoB,IAAM,CAC9BJ,CAAAA,CAAc,IAAI,CAAA,CAClBE,EAAY9L,CAAW,EACzB,CAAA,CAEMiM,CAAAA,CAAqB,IAAM,CAC/B,IAAMC,CAAAA,CAAeL,EAAS,IAAA,EAAK,CAC/BK,CAAAA,EAAgBA,CAAAA,GAAiBlM,CAAAA,EACnCwL,CAAAA,CAASU,CAAY,CAAA,CAEvBN,EAAc,KAAK,CAAA,CACnBhJ,CAAAA,CAAU,KAAK,CAAA,CACfkJ,CAAAA,CAAY9L,CAAW,EACzB,EAEMmM,CAAAA,CAAuBpI,CAAAA,EAA6C,CACpEA,CAAAA,CAAE,GAAA,GAAQ,OAAA,CACZkI,CAAAA,EAAmB,CACVlI,EAAE,GAAA,GAAQ,QAAA,GACnB6H,CAAAA,CAAc,KAAK,CAAA,CACnBE,CAAAA,CAAY9L,CAAW,CAAA,EAE3B,EAEA,OACEsC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW,CAAA,SAAA,EAAYI,CAAAA,EAAa,EAAE,CAAA,CAAA,CAEzC,UAAAtB,GAAAA,CAAC,QAAA,CAAA,CACC,GAAA,CAAK6B,CAAAA,CACL,OAAA,CAAS,IAAML,CAAAA,CAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,oFAAA,CACV,KAAA,CAAM,gBAAA,CACN,YAAA,CAAW,aAAA,CAEX,QAAA,CAAAL,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,OACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAI,CAAA,CAAE,KAAA,CAAM,IAAA,CAAK,cAAA,CAAe,EAClDA,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,GAAG,GAAA,CAAI,CAAA,CAAE,KAAA,CAAM,IAAA,CAAK,cAAA,CAAe,CAAA,CAClDA,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,KAAA,CAAM,IAAA,CAAK,cAAA,CAAe,CAAA,CAAA,CACrD,EACF,CAAA,CAGCuB,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAF,GAAAA,CAAC,KAAA,CAAA,CACC,IAAK2B,CAAAA,CACL,SAAA,CAAU,kDAAA,CACV,KAAA,CAAO,CACL,GAAA,CAAK,CAAA,EAAGF,CAAAA,CAAa,GAAG,CAAA,EAAA,CAAA,CACxB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAa,IAAI,CAAA,EAAA,CAAA,CAC1B,UAAA,CAAY,mDAAA,CACZ,YAAa,2BAAA,CACb,SAAA,CAAW,oEAAA,CACX,MAAA,CAAQ,KACV,CAAA,CAEC,QAAA,CAAA8I,CAAAA,CAECrJ,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,qEAAA,CAAsE,yBAEvF,CAAA,CACAA,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,MAAA,CACL,KAAA,CAAOF,EACP,QAAA,CAAW9H,CAAAA,EAAM+H,CAAAA,CAAY/H,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC3C,SAAA,CAAWoI,EACX,MAAA,CAAQF,CAAAA,CACR,SAAA,CAAU,4JAAA,CACV,WAAA,CAAY,aAAA,CACZ,SAAA,CAAW,EAAA,CACb,GACF,CAAA,CAGA3J,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,QAAA,CAAA,CACC,QAAS0J,CAAAA,CACT,SAAA,CAAU,mGAAA,CAEV,QAAA,CAAA,CAAA5K,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,IAAC,MAAA,CAAA,CACC,CAAA,CAAE,wCAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,QACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,kBAAM,CAAA,CAAA,CACtC,CAAA,CAGCsK,CAAAA,EAAeD,CAAAA,EACdnJ,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CAA6B,CAAA,CAC5CkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbmJ,CAAAA,EAAS,CACT7I,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAU,oGAAA,CAEV,UAAAN,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,4JAAA,CACF,OAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACAA,IAAC,MAAA,CAAA,CACC,CAAA,CAAE,oBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CACZ,aAAA,CAAc,QAChB,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,QAAA,CAAA,QAAA,CAAM,CAAA,CAAA,CACtC,GACF,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCtLO,IAAMgL,EAAAA,CAAS/C,IAAAA,CACpB,CAAC,CACC,MAAA,CAAApM,EACA,KAAA,CAAAwC,CAAAA,CACA,YAAA,CAAA4M,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,iBAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,cAAA,CAAAvG,CAAAA,CACA,QAAA,CAAAY,EACA,oBAAA,CAAA4F,CAAAA,CACA,UAAA,CAAAC,CAAAA,CAAa,GAAA,CACb,WAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,EACA,cAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,WAAA,CAAAtB,CAAAA,CAAc,KAAA,CACd,SAAA,CAAAhJ,CACF,CAAA,GAAM,CACJ,GAAM,CAAE,UAAA,CAAAmH,CAAAA,CAAY,MAAA,CAAAoD,CAAO,EAAIC,YAAAA,CAAa,CAC1C,EAAA,CAAIjQ,CAAAA,CAAO,EAAA,CACX,IAAA,CAAM,CACJ,IAAA,CAAM,SACN,MAAA,CAAAA,CACF,CACF,CAAC,EAEKkQ,CAAAA,CAAYnK,MAAAA,CAAuB,IAAI,CAAA,CAGvCoK,EACJT,CAAAA,EAAwBlT,EAAAA,CAAiBgG,CAAAA,CAAM,MAAM,CAAA,CAGjD4N,CAAAA,CAAcC,cAAAA,CAAe,CACjC,MAAO7N,CAAAA,CAAM,MAAA,CACb,gBAAA,CAAkB,IAAM0N,CAAAA,CAAU,OAAA,CAClC,YAAA,CAAc,IAAMP,EACpB,OAAA,CAASQ,CACX,CAAC,CAAA,CAGD,GAAIf,CAAAA,CACF,OACEjL,GAAAA,CAAC,OAAI,GAAA,CAAKyI,CAAAA,CAAY,SAAA,CAAWnH,CAAAA,CAC9B,QAAA,CAAA2J,CAAAA,CAAapP,CAAAA,CAAQwC,CAAK,EAC7B,CAAA,CAqBJ,IAAM8N,CAAAA,CAAAA,CAhBoB,IAAM,CAC9B,GAAI,CAACtQ,CAAAA,CAAO,SAAU,OAAO,CAAE,KAAA,CAAO,MAAA,CAAQ,UAAA,CAAY,CAAE,CAAA,CAE5D,IAAMuQ,EAAc/N,CAAAA,CAAM,MAAA,CAASxC,CAAAA,CAAO,QAAA,CAAY,GAAA,CAEtD,OAAIwC,CAAAA,CAAM,MAAA,CAASxC,EAAO,QAAA,CACjB,CAAE,KAAA,CAAO,UAAA,CAAY,UAAA,CAAAuQ,CAAW,CAAA,CAC9BA,CAAAA,EAAc,GAChB,CAAE,KAAA,CAAO,SAAA,CAAW,UAAA,CAAAA,CAAW,CAAA,CAC7BA,CAAAA,EAAc,EAAA,CAChB,CAAE,KAAA,CAAO,aAAA,CAAe,UAAA,CAAAA,CAAW,CAAA,CAEnC,CAAE,KAAA,CAAO,IAAA,CAAM,WAAAA,CAAW,CAErC,CAAA,GAEoC,CAC9BC,CAAAA,CAAiBF,CAAAA,CAAU,KAAA,GAAU,UAAA,CAGrCG,EAAqB,IAElB,qBAAA,CAGT,OACEpL,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKuH,CAAAA,CACL,SAAA,CAAWlR,EACT,eAAA,CACAsU,CAAAA,EAAU,gCAAA,CACVQ,CAAAA,EAAkB,+BAAA,CAClB/K,CACF,CAAA,CAGC,QAAA,CAAA,CAAA6J,EACCA,CAAAA,CAAatP,CAAAA,CAAQwC,CAAAA,CAAM,MAAM,CAAA,CAEjC6C,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,qBAAA,CAAuB,QAAA,CAAAnE,CAAAA,CAAO,KAAA,CAAM,EAClDqF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,EAAG+U,CAAAA,EAAoB,CAAA,CACrC,QAAA,CAAA,CAAAjO,CAAAA,CAAM,MAAA,CACNxC,CAAAA,CAAO,QAAA,EAAY,MAAMA,CAAAA,CAAO,QAAQ,CAAA,CAAA,CAAA,CAC3C,CAAA,CAECA,CAAAA,CAAO,QAAA,EAAYsQ,CAAAA,CAAU,KAAA,GAAU,QACtCjL,IAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,uCAAA,CACV,KAAA,CAAO,CAAA,EAAGiL,CAAAA,CAAU,UAAA,CAAW,QAAQ,CAAC,CAAC,CAAA,UAAA,EACvCtQ,CAAAA,CAAO,YAAA,GAAiB,MAAA,CACpB,kCAAA,CACA,+BACN,GAEC,QAAA,CAAA,CAAAsQ,CAAAA,CAAU,KAAA,GAAU,UAAA,EACnBjL,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,OAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,MAAM,CAAA,CACzDA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,sBAAA,CAAuB,MAAA,CAAO,OAAA,CAAQ,WAAA,CAAY,IAAI,aAAA,CAAc,OAAA,CAAQ,CAAA,CAAA,CACtF,CAAA,CAEDmM,CAAAA,CAAU,KAAA,GAAU,SAAA,EACnBjL,IAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAA,CAAoB,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,KAAA,CAAM,EACzDA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,kBAAA,CAAmB,MAAA,CAAO,OAAA,CAAQ,WAAA,CAAY,KAAA,CAAM,cAAc,OAAA,CAAQ,CAAA,CAAA,CACpF,CAAA,CAEDmM,CAAAA,CAAU,KAAA,GAAU,aAAA,EACnBnM,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,oDAAA,CAAqD,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,KAAA,CAAM,CAAA,CAC5F,EAEDmM,CAAAA,CAAU,KAAA,GAAU,IAAA,EACnBjL,IAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,GAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQ,KAAA,CAAM,CAAA,CACzDA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gBAAA,CAAiB,MAAA,CAAO,OAAA,CAAQ,WAAA,CAAY,GAAA,CAAI,aAAA,CAAc,QAAQ,cAAA,CAAe,OAAA,CAAQ,CAAA,CAAA,CACvG,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEA2L,CAAAA,EAAkBC,CAAAA,GAClB5L,GAAAA,CAACmK,GAAA,CACC,WAAA,CAAatO,CAAAA,CAAO,KAAA,CACpB,QAAA,CAAW4O,CAAAA,EAAakB,CAAAA,GAAiB9P,CAAAA,CAAO,GAAI4O,CAAQ,CAAA,CAC5D,QAAA,CAAUmB,CAAAA,CAAiB,IAAMA,CAAAA,CAAe/P,CAAAA,CAAO,EAAE,EAAI,MAAA,CAC7D,WAAA,CAAayO,CAAAA,CACf,CAAA,CAEDoB,CAAAA,EACC1L,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS0L,EACT,SAAA,CAAU,0DAAA,CACV,YAAA,CAAYD,CAAAA,CAAc,eAAA,CAAkB,iBAAA,CAE3C,QAAA,CAAAA,CAAAA,CAAc,SAAM,QAAA,CACvB,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAID,CAACA,CAAAA,EACAzL,GAAAA,CAAC,KAAA,CAAA,CACC,IAAK+L,CAAAA,CACL,SAAA,CAAU,qBAAA,CACV,KAAA,CAAO,CACL,SAAA,CAAWC,CAAAA,CAAoB,OAAA,CAAU,MAC3C,CAAA,CAEA,QAAA,CAAAhM,GAAAA,CAACuM,eAAAA,CAAA,CACC,KAAA,CAAOlO,CAAAA,CAAM,GAAA,CAAKzC,GAASA,CAAAA,CAAK,EAAE,CAAA,CAClC,QAAA,CAAU4Q,2BAAAA,CAET,QAAA,CAAAnO,CAAAA,CAAM,MAAA,GAAW,EAEhB+M,CAAAA,CACEA,CAAAA,CAAiBvP,CAAM,CAAA,CAEvBmE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACb,SAAAA,GAAAA,CAAC,GAAA,CAAA,CAAE,QAAA,CAAA,iBAAA,CAAe,CAAA,CACpB,CAAA,CAEAgM,CAAAA,CAEFhM,GAAAA,CAAC,KAAA,CAAA,CACC,MAAO,CACL,MAAA,CAAQ,CAAA,EAAGiM,CAAAA,CAAY,YAAA,EAAc,CAAA,EAAA,CAAA,CACrC,QAAA,CAAU,UACZ,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAY,eAAA,EAAgB,CAAE,GAAA,CAAKQ,CAAAA,EAAgB,CAClD,IAAM7Q,CAAAA,CAAOyC,CAAAA,CAAMoO,CAAAA,CAAY,KAAK,CAAA,CACpC,OAAK7Q,CAAAA,CAGHoE,GAAAA,CAAC,OAEC,KAAA,CAAO,CACL,QAAA,CAAU,UAAA,CACV,GAAA,CAAK,CAAA,CACL,IAAA,CAAM,CAAA,CACN,MAAO,MAAA,CACP,SAAA,CAAW,CAAA,WAAA,EAAcyM,CAAAA,CAAY,KAAK,CAAA,GAAA,CAC5C,CAAA,CAEA,QAAA,CAAAzM,IAACgI,EAAAA,CAAA,CACC,IAAA,CAAMpM,CAAAA,CACN,MAAA,CAAQsP,CAAAA,CACR,OAAA,CAASG,CAAAA,CACT,SAAUC,CAAAA,CACV,cAAA,CAAgBvG,CAAAA,CAChB,QAAA,CAAUY,CAAAA,CACZ,CAAA,CAAA,CAhBK/J,CAAAA,CAAK,EAiBZ,EArBgB,IAuBpB,CAAC,CAAA,CACH,CAAA,CAGAyC,CAAAA,CAAM,GAAA,CAAKzC,CAAAA,EACToE,GAAAA,CAACgI,GAAA,CAEC,IAAA,CAAMpM,CAAAA,CACN,MAAA,CAAQsP,CAAAA,CACR,OAAA,CAASG,CAAAA,CACT,QAAA,CAAUC,EACV,cAAA,CAAgBvG,CAAAA,CAChB,QAAA,CAAUY,CAAAA,CAAAA,CANL/J,CAAAA,CAAK,EAOZ,CACD,CAAA,CAEL,EACF,CAAA,CAAA,CAEJ,CAEJ,CAGF,EAEAoP,EAAAA,CAAO,WAAA,CAAc,QAAA,CCzRd,SAAS0B,EAAAA,CAAoB,CAClC,KAAA,CAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,SAAA,CAAAtL,CACF,CAAA,CAA6B,CAC3B,GAAM,CAACuL,CAAAA,CAAWC,CAAY,CAAA,CAAIxM,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAACyM,CAAAA,CAAWC,CAAY,CAAA,CAAI1M,QAAAA,CAASqM,CAAK,CAAA,CAC1ChC,EAAW/I,MAAAA,CAAyB,IAAI,CAAA,CAE9CnB,SAAAA,CAAU,IAAM,CACVoM,CAAAA,EAAalC,CAAAA,CAAS,UACxBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,EAAM,CACvBA,CAAAA,CAAS,OAAA,CAAQ,MAAA,EAAO,EAE5B,EAAG,CAACkC,CAAS,CAAC,CAAA,CAEd,IAAMI,CAAAA,CAAa,IAAM,CACvB,IAAMC,EAAUH,CAAAA,CAAU,IAAA,EAAK,CAC3BG,CAAAA,EAAWA,CAAAA,GAAYP,CAAAA,CACzBC,CAAAA,CAAOM,CAAO,EAEdF,CAAAA,CAAaL,CAAK,CAAA,CAEpBG,CAAAA,CAAa,KAAK,EACpB,CAAA,CAEMK,CAAAA,CAAiBxK,GAA2B,CAC5CA,CAAAA,CAAE,GAAA,GAAQ,OAAA,CACZsK,CAAAA,EAAW,CACFtK,CAAAA,CAAE,GAAA,GAAQ,WACnBqK,CAAAA,CAAaL,CAAK,CAAA,CAClBG,CAAAA,CAAa,KAAK,CAAA,EAEtB,CAAA,CAEA,OAAID,EAEA7M,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,MAAA,CACL,KAAA,CAAOoC,CAAAA,CACP,SAAWpK,CAAAA,EAAMqK,CAAAA,CAAarK,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC5C,MAAA,CAAQsK,CAAAA,CACR,UAAWE,CAAAA,CACX,SAAA,CAAW5V,CAAAA,CACT,+DAAA,CACA,yBAAA,CACA+J,CACF,CAAA,CACA,SAAA,CAAW,GACb,CAAA,CAKFtB,GAAAA,CAAC,IAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CAAG,oCAAA,CAAsC+J,CAAS,CAAA,CAC7D,QAAS,IAAMwL,CAAAA,CAAa,IAAI,CAAA,CAChC,KAAA,CAAM,eAAA,CAEL,QAAA,CAAAH,CAAAA,CACH,CAEJ,CCtBA,SAASS,EAAAA,CAAiBC,CAAAA,CAAcC,CAAAA,CAA6C,CACnF,IAAMC,CAAAA,CAAeF,CAAAA,CAAK,KAAA,CAAM,CAAA,CAAGC,CAAc,CAAA,CAC3CE,CAAAA,CAAUD,EAAa,WAAA,CAAY,GAAG,CAAA,CAE5C,GAAIC,CAAAA,GAAY,EAAA,CAAI,OAAO,IAAA,CAG3B,IAAMC,CAAAA,CAAaF,CAAAA,CAAaC,CAAAA,CAAU,CAAC,CAAA,CAC3C,GAAIA,CAAAA,CAAU,CAAA,EAAKC,GAAc,CAAC,IAAA,CAAK,IAAA,CAAKA,CAAU,CAAA,CACpD,OAAO,IAAA,CAGT,IAAMC,EAAUH,CAAAA,CAAa,KAAA,CAAMC,CAAAA,CAAU,CAAC,CAAA,CAG9C,OAAI,IAAA,CAAK,IAAA,CAAKE,CAAO,CAAA,CAAU,IAAA,CAExB,CACL,KAAA,CAAOF,CAAAA,CACP,GAAA,CAAKF,CAAAA,CACL,KAAA,CAAOI,EAAQ,WAAA,EACjB,CACF,CAKO,SAASC,EAAAA,CAAwBN,CAAAA,CAAcnE,CAAAA,CAAgC,CACpF,IAAM0E,CAAAA,CAAyB,EAAC,CAC1BC,CAAAA,CAAe,SAAA,CACjBC,CAAAA,CAEJ,KAAA,CAAQA,EAAQD,CAAAA,CAAa,IAAA,CAAKR,CAAI,CAAA,IAAO,IAAA,EAAM,CACjD,IAAMU,CAAAA,CAAcD,EAAM,CAAC,CAAA,EAAG,WAAA,EAAY,EAAK,EAAA,CAC/C,GAAI,CAACC,CAAAA,CAAa,SAClB,IAAM3I,CAAAA,CAAO8D,CAAAA,CAAM,IAAA,CAAK5D,CAAAA,EACtBA,CAAAA,CAAE,IAAA,CAAK,WAAA,GAAc,OAAA,CAAQ,MAAA,CAAQ,EAAE,CAAA,GAAMyI,GAC7CzI,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,GAAMyI,CAC3B,CAAA,CACI3I,CAAAA,EAAQ,CAACwI,CAAAA,CAAa,QAAA,CAASxI,CAAAA,CAAK,EAAE,CAAA,EACxCwI,EAAa,IAAA,CAAKxI,CAAAA,CAAK,EAAE,EAE7B,CAEA,OAAOwI,CACT,CAKA,SAASI,EAAAA,CAAYC,CAAAA,CAAsB,CACzC,OAAOA,CAAAA,CACJ,KAAA,CAAM,GAAG,CAAA,CACT,IAAIC,CAAAA,EAAKA,CAAAA,CAAE,CAAC,CAAC,CAAA,CACb,IAAA,CAAK,EAAE,CAAA,CACP,aAAY,CACZ,KAAA,CAAM,CAAA,CAAG,CAAC,CACf,CAMO,SAASC,EAAAA,CAAa,CAC3B,KAAA,CAAA/Q,CAAAA,CACA,QAAA,CAAAiE,CAAAA,CACA,QAAA,CAAA+M,CAAAA,CACA,KAAA,CAAAlF,CAAAA,CACA,YAAAmF,CAAAA,CACA,QAAA,CAAAC,CAAAA,CAAW,KAAA,CACX,YAAA,CAAAC,CAAAA,CAAe,KAAA,CACf,KAAA,CAAA5N,EAAQ,MAAA,CACR,MAAA,CAAA6N,CAAAA,CAAS,IAAA,CACT,WAAA,CAAAC,CACF,CAAA,CAAsB,CACpB,IAAMnL,CAAAA,CAAS3C,CAAAA,GAAU,MAAA,CACnB,CAAC+N,CAAAA,CAAcC,CAAe,CAAA,CAAIrO,QAAAA,CAAS,KAAK,CAAA,CAChD,CAACiF,CAAAA,CAAeqJ,CAAgB,CAAA,CAAItO,QAAAA,CAAwB,EAAE,EAC9D,CAACuO,CAAAA,CAAeC,CAAgB,CAAA,CAAIxO,QAAAA,CAAS,CAAC,CAAA,CAC9C,CAACyO,EAAcC,CAAe,CAAA,CAAI1O,QAAAA,CAA8B,IAAI,CAAA,CAEpEqK,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,EACxCqN,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,CAAA,CAGzCsN,CAAAA,CAAqBC,WAAAA,CAAY,CAAC9B,CAAAA,CAAc+B,IAAsB,CAC1E,IAAMtB,CAAAA,CAAQV,EAAAA,CAAiBC,CAAAA,CAAM+B,CAAS,CAAA,CAG9C,GAFAJ,EAAgBlB,CAAK,CAAA,CAEjBA,CAAAA,CAAO,CACT,IAAMuB,CAAAA,CAAWnG,CAAAA,CAAM,MAAA,CAAO9D,GAC5BA,CAAAA,CAAK,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAAS0I,CAAAA,CAAM,KAAK,CAAA,EAC3C1I,EAAK,KAAA,EAASA,CAAAA,CAAK,KAAA,CAAM,WAAA,EAAY,CAAE,QAAA,CAAS0I,CAAAA,CAAM,KAAK,CAC9D,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAEZc,CAAAA,CAAiBS,CAAQ,CAAA,CACzBV,EAAgBU,CAAAA,CAAS,MAAA,CAAS,CAAC,CAAA,CACnCP,CAAAA,CAAiB,CAAC,EACpB,CAAA,KACEH,EAAgB,KAAK,CAAA,CACrBC,CAAAA,CAAiB,EAAE,EAEvB,CAAA,CAAG,CAAC1F,CAAK,CAAC,CAAA,CAGJoG,CAAAA,CAAgB3M,CAAAA,EAAqC,CACzD,IAAMgF,CAAAA,CAAWhF,CAAAA,CAAE,OAAO,KAAA,CAC1BtB,CAAAA,CAASsG,CAAQ,CAAA,CACjBuH,CAAAA,CAAmBvH,CAAAA,CAAUhF,CAAAA,CAAE,MAAA,CAAO,gBAAkB,CAAC,EAC3D,CAAA,CAGMC,CAAAA,CAAe,IAAM,CACrB+H,CAAAA,CAAS,OAAA,EACXuE,EAAmB9R,CAAAA,CAAOuN,CAAAA,CAAS,OAAA,CAAQ,cAAA,EAAkB,CAAC,EAElE,CAAA,CAGM4E,CAAAA,CAAgBJ,YAAa/J,CAAAA,EAAsB,CACvD,GAAI,CAAC2J,CAAAA,EAAgB,CAACpE,CAAAA,CAAS,OAAA,CAAS,OAExC,IAAM6E,CAAAA,CAAgBpS,CAAAA,CAAM,KAAA,CAAM,CAAA,CAAG2R,CAAAA,CAAa,KAAK,CAAA,CACjDU,EAAerS,CAAAA,CAAM,KAAA,CAAM2R,CAAAA,CAAa,GAAG,CAAA,CAC3CW,CAAAA,CAAc,CAAA,CAAA,EAAItK,CAAAA,CAAK,KAAK,OAAA,CAAQ,MAAA,CAAQ,EAAE,CAAC,CAAA,CAAA,CAAA,CAE/CuC,CAAAA,CAAW6H,CAAAA,CAAgBE,CAAAA,CAAcD,EAC/CpO,CAAAA,CAASsG,CAAQ,CAAA,CAEjBgH,CAAAA,CAAgB,KAAK,CAAA,CACrBK,CAAAA,CAAgB,IAAI,EAEpB,UAAA,CAAW,IAAM,CACf,GAAIrE,CAAAA,CAAS,OAAA,CAAS,CACpB,IAAMgF,GAAeZ,CAAAA,CAAa,KAAA,CAAQW,CAAAA,CAAY,MAAA,CACtD/E,CAAAA,CAAS,OAAA,CAAQ,cAAA,CAAiBgF,EAAAA,CAClChF,EAAS,OAAA,CAAQ,YAAA,CAAegF,EAAAA,CAChChF,CAAAA,CAAS,QAAQ,KAAA,GACnB,CACF,CAAA,CAAG,CAAC,EACN,CAAA,CAAG,CAACoE,CAAAA,CAAc3R,CAAAA,CAAOiE,CAAQ,CAAC,CAAA,CAG5B8L,EAAiBxK,CAAAA,EAAuC,CAC5D,GAAI+L,CAAAA,EAAgBnJ,CAAAA,CAAc,MAAA,CAAS,CAAA,CACzC,OAAQ5C,EAAE,GAAA,EACR,KAAK,WAAA,CACHA,CAAAA,CAAE,cAAA,EAAe,CACjBmM,CAAAA,CAAiBc,GACfA,CAAAA,CAAOrK,CAAAA,CAAc,MAAA,CAAS,CAAA,CAAIqK,CAAAA,CAAO,CAAA,CAAI,CAC/C,CAAA,CACA,MACF,KAAK,SAAA,CACHjN,CAAAA,CAAE,cAAA,EAAe,CACjBmM,CAAAA,CAAiBc,CAAAA,EACfA,CAAAA,CAAO,EAAIA,CAAAA,CAAO,CAAA,CAAIrK,CAAAA,CAAc,MAAA,CAAS,CAC/C,CAAA,CACA,MACF,KAAK,QAAS,CACZ5C,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAMkN,CAAAA,CAAetK,CAAAA,CAAcsJ,CAAa,EAC5CgB,CAAAA,EAAcN,CAAAA,CAAcM,CAAY,CAAA,CAC5C,KACF,CACA,KAAK,KAAA,CAAO,CACVlN,CAAAA,CAAE,cAAA,EAAe,CACjB,IAAMmN,CAAAA,CAAkBvK,CAAAA,CAAcsJ,CAAa,CAAA,CAC/CiB,GAAiBP,CAAAA,CAAcO,CAAe,CAAA,CAClD,KACF,CACA,KAAK,QAAA,CACHnN,CAAAA,CAAE,gBAAe,CACjBgM,CAAAA,CAAgB,KAAK,CAAA,CACrB,KACJ,CAAA,KACShM,CAAAA,CAAE,GAAA,GAAQ,SAAW,CAACA,CAAAA,CAAE,QAAA,GACjCA,CAAAA,CAAE,cAAA,EAAe,CACjByL,CAAAA,EAAS,EAEb,EAGA,OAAA3N,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CAE1CsM,EAAY,OAAA,EACZ,CAACA,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAAStM,CAAAA,CAAE,MAAc,CAAA,EAC9CgI,EAAS,OAAA,EACT,CAACA,CAAAA,CAAS,OAAA,CAAQ,QAAA,CAAShI,CAAAA,CAAE,MAAc,CAAA,EAE3CgM,EAAgB,KAAK,EAEzB,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAalM,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,EAAE,EAGLhC,SAAAA,CAAU,IAAM,CACd,GAAIiO,CAAAA,EAAgBO,CAAAA,CAAY,OAAA,CAAS,CACvC,IAAMc,CAAAA,CAAkBd,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAASJ,CAAa,CAAA,CAC9DkB,CAAAA,EACFA,CAAAA,CAAgB,eAAe,CAAE,KAAA,CAAO,SAAU,CAAC,EAEvD,CACF,CAAA,CAAG,CAAClB,EAAeH,CAAY,CAAC,CAAA,CAG9BxN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CAEZ,QAAA,CAAA,CAAAuN,GACCzO,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiByO,CAAAA,CAAY,OAAS,SAAU,CAAA,CAExD,QAAA,CAAAA,CAAAA,CAAY,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,EAAE,WAAA,EAAY,EAAK,GAAA,CAClD,CAAA,CAGFvN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,iBACF,CAAA,CACE,QAAA,CAAA,CAAA2J,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,8CAAA,CACA+L,CAAAA,CAAS,aAAe,iCAC1B,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,OACL,KAAA,CAAOvN,CAAAA,CACP,QAAA,CAAUkS,CAAAA,CACV,QAAA,CAAU1M,CAAAA,CACV,SAAA,CAAWuK,CAAAA,CACX,YAAakB,CAAAA,GAAgBG,CAAAA,GAAW,IAAA,CAAO,0BAAA,CAA6B,oBAAA,CAAA,CAC5E,QAAA,CAAUF,CAAAA,EAAYC,CAAAA,CACtB,UAAWhX,CAAAA,CACT,4CAAA,CACA+L,CAAAA,CAAS,uCAAA,CAA0C,yCAAA,CAAA,CAClDgL,CAAAA,EAAYC,CAAAA,GAAiB,YAChC,EACF,CAAA,CACAvO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoO,CAAAA,CACT,QAAA,CAAUG,CAAAA,EAAgB,CAACnR,EAAM,IAAA,EAAK,EAAKkR,CAAAA,CAC3C,SAAA,CAAW/W,CAAAA,CACT,iCAAA,CACA6F,CAAAA,CAAM,IAAA,IAAU,CAACkR,CAAAA,CACH,0CAAA,CACThL,CAAAA,CAAS,iBAAmB,eAAA,CACjCiL,CAAAA,EAAgB,+BAClB,CAAA,CAEC,SAAAA,CAAAA,CACCvO,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gFAAA,CAAiF,CAAA,CAEhGA,GAAAA,CAACgQ,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAE9B,CAAA,CAAA,CACF,CAAA,CAGAhQ,GAAAA,CAACiQ,eAAAA,CAAA,CACE,SAAAvB,CAAAA,EAAgBnJ,CAAAA,CAAc,MAAA,CAAS,CAAA,EACtCvF,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,IAAKjB,CAAAA,CACL,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CACzB,SAAA,CAAW1X,CAAAA,CACT,yEAAA,CACA,+BAAA,CACA+L,EAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAAiC,CAAAA,CAAc,GAAA,CAAI,CAACH,CAAAA,CAAMzG,IACxBuC,IAAAA,CAAC,QAAA,CAAA,CAEC,IAAA,CAAK,QAAA,CACL,OAAA,CAAS,IAAMqO,CAAAA,CAAcnK,CAAI,EACjC,SAAA,CAAW7N,CAAAA,CACT,sEAAA,CACAoH,CAAAA,GAAUkQ,CAAAA,CACLvL,CAAAA,CAAS,aAAA,CAAgB,aAAA,CACzBA,EAAS,kBAAA,CAAqB,kBACrC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,MAAO,CAAE,eAAA,CAAiBoF,CAAAA,CAAK,KAAA,EAAS,SAAU,CAAA,CAEjD,QAAA,CAAA4I,EAAAA,CAAY5I,EAAK,IAAI,CAAA,CACxB,CAAA,CACAlE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CACZ,8BAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,SAAA8B,CAAAA,CAAK,IAAA,CACR,CAAA,CACCA,CAAAA,CAAK,KAAA,EACJpF,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,EACZ,kBAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CACG,QAAA,CAAA8B,CAAAA,CAAK,KAAA,CACR,GAEJ,CAAA,CAAA,CAAA,CA/BKA,CAAAA,CAAK,EAgCZ,CACD,CAAA,CACH,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CAKO,SAAS+K,EAAAA,CAAe,CAC7B,OAAA,CAAA3S,CAAAA,CACA,KAAA,CAAAmD,CAAAA,CAAQ,MACV,CAAA,CAGG,CACD,IAAM2C,CAAAA,CAAS3C,CAAAA,GAAU,MAAA,CACnByD,CAAAA,CAAuD,GACvDyJ,CAAAA,CAAe,SAAA,CACjBuC,CAAAA,CAAY,CAAA,CACZtC,CAAAA,CAEJ,KAAA,CAAQA,CAAAA,CAAQD,CAAAA,CAAa,KAAKrQ,CAAO,CAAA,IAAO,IAAA,EAC1CsQ,CAAAA,CAAM,KAAA,CAAQsC,CAAAA,EAChBhM,CAAAA,CAAM,IAAA,CAAK,CACT,IAAA,CAAM,MAAA,CACN,KAAA,CAAO5G,CAAAA,CAAQ,KAAA,CAAM4S,CAAAA,CAAWtC,CAAAA,CAAM,KAAK,CAC7C,CAAC,CAAA,CAEH1J,CAAAA,CAAM,IAAA,CAAK,CACT,IAAA,CAAM,SAAA,CACN,KAAA,CAAO0J,EAAM,CAAC,CAChB,CAAC,CAAA,CACDsC,CAAAA,CAAYtC,CAAAA,CAAM,KAAA,CAAQA,CAAAA,CAAM,CAAC,CAAA,CAAE,MAAA,CAGrC,OAAIsC,CAAAA,CAAY5S,CAAAA,CAAQ,MAAA,EACtB4G,CAAAA,CAAM,IAAA,CAAK,CACT,IAAA,CAAM,MAAA,CACN,KAAA,CAAO5G,CAAAA,CAAQ,KAAA,CAAM4S,CAAS,CAChC,CAAC,EAIDpQ,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,iCAAA,CACb,QAAA,CAAAoE,CAAAA,CAAM,GAAA,CAAI,CAACiM,EAAM1R,CAAAA,GACZ0R,CAAAA,CAAK,IAAA,GAAS,SAAA,CAEdrQ,GAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,+CACA,qBAAA,CACA+L,CAAAA,CACI,8BAAA,CACA,2BACN,CAAA,CAEC,QAAA,CAAA+M,CAAAA,CAAK,KAAA,CAAA,CATD1R,CAUP,CAAA,CAGGqB,GAAAA,CAAC,MAAA,CAAA,CAAkB,QAAA,CAAAqQ,CAAAA,CAAK,KAAA,CAAA,CAAb1R,CAAmB,CACtC,EACH,CAEJ,CChaA,IAAM2R,EAAAA,CAAa,CACjB,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,UACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,UACA,SACF,CAAA,CAmBO,SAASC,EAAAA,CAAU,CACxB,YAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,EACA,QAAA,CAAApP,CAAAA,CACA,WAAA,CAAAqP,CAAAA,CACA,KAAA,CAAA/P,CAAAA,CACA,QAAA,CAAA2N,CAAAA,CAAW,MACX,OAAA,CAASqC,CAAAA,CAAW,IACtB,CAAA,CAAmB,CAEjB,GAAM,CAACpP,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAAC2E,CAAAA,CAAaC,CAAc,CAAA,CAAI5E,SAAS,EAAE,CAAA,CAC3C,CAACsQ,CAAAA,CAAYC,CAAa,CAAA,CAAIvQ,QAAAA,CAAS,KAAK,EAC5C,CAACwQ,CAAAA,CAAaC,CAAc,CAAA,CAAIzQ,QAAAA,CAASgQ,EAAAA,CAAW,EAAE,CAAA,EAAK,SAAS,CAAA,CACpE,CAACU,CAAAA,CAAkBC,CAAmB,CAAA,CAAI3Q,QAAAA,CAAS,CAAE,GAAA,CAAK,EAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CACtE4Q,CAAAA,CAAetP,MAAAA,CAAuB,IAAI,CAAA,CAC1CC,EAAYD,MAAAA,CAA0B,IAAI,CAAA,CAC1CqN,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,CAAA,CACzC+I,CAAAA,CAAW/I,OAAyB,IAAI,CAAA,CAGxCuP,CAAAA,CAAeV,CAAAA,CAAc,MAAA,CAAOW,CAAAA,EACxCA,CAAAA,CAAI,IAAA,CAAK,aAAY,CAAE,QAAA,CAASnM,CAAAA,CAAY,WAAA,EAAa,CAC3D,CAAA,CAGMoM,CAAAA,CAAaZ,EAAc,IAAA,CAC/BW,CAAAA,EAAOA,CAAAA,CAAI,IAAA,CAAK,WAAA,EAAY,GAAMnM,CAAAA,CAAY,WAAA,EAChD,CAAA,CAGAxE,SAAAA,CAAU,IAAM,CACd,GAAIc,CAAAA,EAAUM,CAAAA,CAAU,OAAA,CAAS,CAC/B,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,qBAAA,EAAsB,CACrDoP,CAAAA,CAAoB,CAClB,IAAKlP,CAAAA,CAAK,MAAA,CAAS,CAAA,CACnB,IAAA,CAAMA,CAAAA,CAAK,IACb,CAAC,EACH,CACF,CAAA,CAAG,CAACR,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CAC5C,IAAMjC,CAAAA,CAASiC,CAAAA,CAAE,MAAA,CACX2O,CAAAA,CAAoBJ,EAAa,OAAA,EAAS,QAAA,CAASxQ,CAAM,CAAA,CACzD6Q,EAAAA,CAAmBtC,CAAAA,CAAY,OAAA,EAAS,QAAA,CAASvO,CAAM,CAAA,CAEzD,CAAC4Q,CAAAA,EAAqB,CAACC,EAAAA,GACzB/P,CAAAA,CAAU,KAAK,CAAA,CACf0D,EAAe,EAAE,CAAA,CACjB2L,CAAAA,CAAc,KAAK,CAAA,EAEvB,CAAA,CAEA,GAAItP,CAAAA,CACF,gBAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACVc,CAAAA,EAAUoJ,CAAAA,CAAS,OAAA,EACrBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,GAErB,CAAA,CAAG,CAACpJ,CAAM,CAAC,CAAA,CAEX,IAAMiQ,CAAAA,CAAmBJ,CAAAA,EAAiB,CACxC,IAAMhJ,EAAaoI,CAAAA,CAAa,IAAA,CAAKlJ,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAO8J,CAAAA,CAAI,EAAE,CAAA,CAEvD/P,EADE+G,CAAAA,CACOoI,CAAAA,CAAa,MAAA,CAAOlJ,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAO8J,CAAAA,CAAI,EAAE,EAExC,CAAC,GAAGZ,CAAAA,CAAcY,CAAG,CAFoB,EAItD,CAAA,CAEMK,CAAAA,CAAkB,SAAY,CAClC,GAAI,EAAA,CAACf,CAAAA,EAAe,CAACzL,CAAAA,CAAY,IAAA,EAAK,CAAA,CAEtC,CAAA4L,CAAAA,CAAc,IAAI,CAAA,CAClB,GAAI,CACF,IAAMa,CAAAA,CAAS,MAAMhB,CAAAA,CAAYzL,EAAY,IAAA,EAAK,CAAG6L,CAAW,CAAA,CAC5DY,CAAAA,GACFrQ,CAAAA,CAAS,CAAC,GAAGmP,EAAckB,CAAM,CAAC,CAAA,CAClCxM,CAAAA,CAAe,EAAE,CAAA,CACjB6L,CAAAA,CAAeT,EAAAA,CAAW,KAAK,KAAA,CAAM,IAAA,CAAK,MAAA,EAAO,CAAIA,EAAAA,CAAW,MAAM,CAAC,CAAA,EAAK,SAAS,CAAA,EAEzF,CAAA,OAAE,CACAO,CAAAA,CAAc,KAAK,EACrB,CAAA,CACF,CAAA,CAEMc,EAAkB,CAACC,CAAAA,CAAejP,CAAAA,GAAwB,CAC9DA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,CAASmP,EAAa,MAAA,CAAOlJ,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOsK,CAAK,CAAC,EACnD,CAAA,CAEMC,EAAY,CAChB,eAAA,CAAiB,CAAA,EAAGlR,CAAAA,CAAM,YAAY,CAAA,EAAA,CAAA,CACtC,MAAA,CAAQ,CAAA,UAAA,EAAaA,EAAM,WAAW,CAAA,CAAA,CACtC,KAAA,CAAOA,CAAAA,CAAM,aACf,CAAA,CAEA,OACEO,IAAAA,CAAC,OAAI,GAAA,CAAKgQ,CAAAA,CAAc,SAAA,CAAU,UAAA,CAEhC,QAAA,CAAA,CAAAhQ,IAAAA,CAAC,QAAA,CAAA,CACC,GAAA,CAAKW,EACL,IAAA,CAAK,QAAA,CACL,OAAA,CAAS,IAAM,CAACyM,CAAAA,EAAY9M,CAAAA,CAAU,CAACD,CAAM,CAAA,CAC7C,SAAA,CAAU,4FAAA,CACV,KAAA,CAAOsQ,CAAAA,CACP,QAAA,CAAUvD,CAAAA,CAEV,QAAA,CAAA,CAAAtO,IAAC8R,GAAAA,CAAA,CAAI,SAAA,CAAU,aAAA,CAAc,CAAA,CAC5BtB,CAAAA,CAAa,MAAA,CAAS,CAAA,CACrBtP,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACZ,QAAA,CAAA,CAAAsP,CAAAA,CAAa,KAAA,CAAM,CAAA,CAAG,CAAC,EAAE,GAAA,CAAIY,CAAAA,EAC5BpR,GAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAU,0EAAA,CACV,KAAA,CAAO,CAAE,gBAAiB,CAAA,EAAGoR,CAAAA,CAAI,KAAK,CAAA,EAAA,CAAA,CAAM,KAAA,CAAOA,CAAAA,CAAI,KAAM,CAAA,CAE5D,SAAAA,CAAAA,CAAI,IAAA,CAAA,CAJAA,CAAAA,CAAI,EAKX,CACD,CAAA,CACAZ,CAAAA,CAAa,MAAA,CAAS,GACrBtP,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOP,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CAC5D6P,CAAAA,CAAa,MAAA,CAAS,CAAA,CAAA,CAC1B,CAAA,CAAA,CAEJ,CAAA,CAEAxQ,GAAAA,CAAC,QAAK,QAAA,CAAA,SAAA,CAAO,CAAA,CAEfA,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOpR,CAAAA,CAAM,YAAa,CAAA,CAAG,CAAA,CAAA,CACzE,CAAA,CAGC,OAAO,QAAA,CAAa,KAAeE,YAAAA,CAClCb,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCL,IAAAA,CAACgP,MAAAA,CAAO,IAAP,CACC,GAAA,CAAKjB,CAAAA,CACL,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,KAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,UAAA,CAAY,CAAE,SAAU,GAAK,CAAA,CAC7B,SAAA,CAAU,0BAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,IAAK+B,CAAAA,CAAiB,GAAA,CACtB,IAAA,CAAMA,CAAAA,CAAiB,IAAA,CACvB,MAAA,CAAQ,KAAA,CACR,eAAA,CAAiBrQ,EAAM,SAAA,CACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,gCACb,EAGF,QAAA,CAAA,CAAAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cAAA,CAAe,KAAA,CAAO,CAAE,WAAA,CAAaW,EAAM,MAAO,CAAA,CAC/D,QAAA,CAAAX,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,OACL,KAAA,CAAO1F,CAAAA,CACP,QAAA,CAAWtC,CAAAA,EAAMuC,CAAAA,CAAevC,CAAAA,CAAE,MAAA,CAAO,KAAK,EAC9C,WAAA,CAAY,4BAAA,CACZ,SAAA,CAAU,oDAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBhC,CAAAA,CAAM,YACvB,KAAA,CAAOA,CAAAA,CAAM,WAAA,CACb,MAAA,CAAQ,aAAaA,CAAAA,CAAM,WAAW,CAAA,CACxC,CAAA,CACA,UAAYgC,CAAAA,EAAM,CACZA,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAWsC,CAAAA,CAAY,IAAA,EAAK,EAAK,CAACoM,CAAAA,EAAcX,CAAAA,EAC5De,CAAAA,GAEJ,CAAA,CACF,CAAA,CACF,CAAA,CAGCjB,CAAAA,CAAa,OAAS,CAAA,EACrBtP,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cAAA,CAAe,KAAA,CAAO,CAAE,WAAA,CAAaP,EAAM,MAAO,CAAA,CAC/D,QAAA,CAAA,CAAAX,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,gBAAA,CAAiB,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,eAAA,CAEpE,CAAA,CACAX,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CACZ,QAAA,CAAAwQ,CAAAA,CAAa,GAAA,CAAIY,CAAAA,EAChBlQ,IAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAU,8GACV,KAAA,CAAO,CAAE,eAAA,CAAiB,CAAA,EAAGkQ,CAAAA,CAAI,KAAK,CAAA,EAAA,CAAA,CAAM,KAAA,CAAOA,EAAI,KAAM,CAAA,CAC7D,OAAA,CAAUzO,CAAAA,EAAMgP,CAAAA,CAAgBP,CAAAA,CAAI,EAAA,CAAIzO,CAAC,EAExC,QAAA,CAAA,CAAAyO,CAAAA,CAAI,IAAA,CACLpR,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,IANlBZ,CAAAA,CAAI,EAOX,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAIFpR,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mCAAA,CACZ,QAAA,CAAAmR,CAAAA,CAAa,MAAA,CAAS,CAAA,CACrBA,CAAAA,CAAa,GAAA,CAAIC,CAAAA,EAAO,CACtB,IAAMhJ,CAAAA,CAAaoI,CAAAA,CAAa,IAAA,CAAKlJ,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAO8J,CAAAA,CAAI,EAAE,CAAA,CACzD,OACElQ,IAAAA,CAAC,QAAA,CAAA,CAEC,IAAA,CAAK,QAAA,CACL,OAAA,CAAS,IAAMsQ,EAAgBJ,CAAG,CAAA,CAClC,SAAA,CAAU,+EAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBhJ,CAAAA,CAAa,GAAGgJ,CAAAA,CAAI,KAAK,CAAA,EAAA,CAAA,CAAO,aAAA,CACjD,KAAA,CAAOzQ,CAAAA,CAAM,WACf,CAAA,CACA,aAAegC,CAAAA,EAAM,CACdyF,CAAAA,GAAYzF,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkBhC,CAAAA,CAAM,SACjE,CAAA,CACA,YAAA,CAAegC,CAAAA,EAAM,CACdyF,CAAAA,GAAYzF,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,aAAA,EAC3D,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBoR,CAAAA,CAAI,KAAM,CAAA,CACtC,CAAA,CACApR,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAoB,QAAA,CAAAoR,CAAAA,CAAI,IAAA,CAAK,CAAA,CAC5ChJ,CAAAA,EACCpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOb,CAAAA,CAAI,KAAM,CAAA,CAAG,CAAA,CAAA,CAAA,CArBrDA,EAAI,EAuBX,CAEJ,CAAC,CAAA,CACCnM,CAAAA,CAAY,IAAA,EAAK,CACnBjF,GAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CAA0B,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,uCAE/E,CAAA,CAEAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAA0B,KAAA,CAAO,CAAE,KAAA,CAAOW,EAAM,YAAa,CAAA,CAAG,QAAA,CAAA,8BAAA,CAE/E,CAAA,CAEJ,CAAA,CAGCsE,CAAAA,CAAY,IAAA,EAAK,EAAK,CAACoM,CAAAA,EAAcX,CAAAA,EACpCxP,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cAAA,CAAe,KAAA,CAAO,CAAE,YAAaP,CAAAA,CAAM,MAAO,CAAA,CAC/D,QAAA,CAAA,CAAAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,SAAAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,sBAAA,CAE7D,CAAA,CACF,CAAA,CAGAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACZ,SAAAsQ,EAAAA,CAAW,GAAA,CAAIrP,CAAAA,EACdjB,GAAAA,CAAC,QAAA,CAAA,CAEC,IAAA,CAAK,QAAA,CACL,OAAA,CAAS,IAAM+Q,CAAAA,CAAe9P,CAAK,CAAA,CACnC,SAAA,CAAU,2DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBA,EACjB,OAAA,CAAS6P,CAAAA,GAAgB7P,CAAAA,CAAQ,CAAA,UAAA,EAAaA,CAAK,CAAA,CAAA,CAAK,MAAA,CACxD,aAAA,CAAe,KACjB,GARKA,CASP,CACD,CAAA,CACH,CAAA,CAGAC,IAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,QAASuQ,CAAAA,CACT,QAAA,CAAUb,CAAAA,CACV,SAAA,CAAU,0GAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBE,EACjB,KAAA,CAAO,SAAA,CACP,OAAA,CAASF,CAAAA,CAAa,EAAA,CAAM,CAC9B,CAAA,CAEC,QAAA,CAAA,CAAAA,EACC5Q,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2EAAA,CAA4E,CAAA,CAE3FA,GAAAA,CAACkS,IAAAA,CAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAC1B,SAAA,CACMjN,CAAAA,CAAY,IAAA,EAAK,CAAE,GAAA,CAAA,CAC7B,CAAA,CAAA,CACF,GAEJ,CAAA,CAEF,CAAA,CACA,QAAA,CAAS,IACX,CAAA,CAAA,CACF,CAEJ,CAKO,SAASkN,GAAS,CAAE,GAAA,CAAAf,CAAAA,CAAK,QAAA,CAAAgB,CAAAA,CAAU,IAAA,CAAAC,CAAAA,CAAO,IAAK,EAInD,CAKD,OACEnR,IAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAW,CAAA,wDAAA,EANKmR,CAAAA,GAAS,IAAA,CACzB,4BACA,qBAIiF,CAAA,CAAA,CACjF,KAAA,CAAO,CAAE,eAAA,CAAiB,CAAA,EAAGjB,CAAAA,CAAI,KAAK,KAAM,KAAA,CAAOA,CAAAA,CAAI,KAAM,CAAA,CAE5D,QAAA,CAAA,CAAAA,CAAAA,CAAI,IAAA,CACJgB,CAAAA,EACCpS,IAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,GACFyP,CAAAA,GACF,CAAA,CACA,SAAA,CAAU,kBAAA,CAEV,QAAA,CAAApS,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,CAAA,CAAA,CAEJ,CAEJ,CAKO,SAASM,EAAAA,CAAQ,CACtB,IAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CAAa,CAAA,CACb,IAAA,CAAAH,CAAAA,CAAO,IACT,EAIG,CACD,GAAI,CAACE,CAAAA,EAAQA,CAAAA,CAAK,MAAA,GAAW,CAAA,CAAG,OAAO,KAEvC,IAAME,CAAAA,CAAcF,CAAAA,CAAK,KAAA,CAAM,CAAA,CAAGC,CAAU,CAAA,CACtCE,CAAAA,CAAcH,EAAK,MAAA,CAASC,CAAAA,CAElC,OACEtR,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACZ,QAAA,CAAA,CAAAuR,EAAY,GAAA,CAAIrB,CAAAA,EACfpR,GAAAA,CAACmS,EAAAA,CAAA,CAAsB,GAAA,CAAKf,CAAAA,CAAK,IAAA,CAAMiB,GAAxBjB,CAAAA,CAAI,EAA0B,CAC9C,CAAA,CACAsB,CAAAA,CAAc,CAAA,EACbxR,IAAAA,CAAC,MAAA,CAAA,CACC,UAAW,CAAA,kDAAA,EACTmR,CAAAA,GAAS,IAAA,CAAO,2BAAA,CAA8B,qBAChD,CAAA,CAAA,CACA,KAAA,CAAO,CAAE,gBAAiB,uBAAA,CAAyB,KAAA,CAAO,SAAU,CAAA,CACrE,QAAA,CAAA,CAAA,GAAA,CACGK,CAAAA,CAAAA,CACJ,CAAA,CAAA,CAEJ,CAEJ,CC5ZO,IAAMC,EAAAA,CAA2B,CACtC,CAAE,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,UAAW,KAAA,CAAO,SAAU,CAAA,CACnD,CAAE,IAAA,CAAM,YAAA,CAAW,KAAA,CAAO,SAAA,CAAW,MAAO,SAAU,CAAA,CACtD,CAAE,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACnD,CAAE,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,EACnD,CAAE,IAAA,CAAM,SAAA,CAAW,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACtD,CAAE,IAAA,CAAM,UAAA,CAAY,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACvD,CAAE,KAAM,MAAA,CAAQ,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACnD,CAAE,IAAA,CAAM,QAAS,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACpD,CAAE,IAAA,CAAM,WAAA,CAAa,MAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACxD,CAAE,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,UAAW,KAAA,CAAO,SAAU,CAAA,CACnD,CAAE,KAAM,YAAA,CAAc,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACzD,CAAE,IAAA,CAAM,WAAA,CAAU,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,EACrD,CAAE,IAAA,CAAM,SAAA,CAAW,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACtD,CAAE,IAAA,CAAM,QAAA,CAAU,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACrD,CAAE,KAAM,OAAA,CAAS,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CAAA,CACpD,CAAE,IAAA,CAAM,UAAW,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,SAAU,CACxD,CAAA,CCmBA,SAASC,EAAAA,CAAgBC,CAAAA,CAAkB9N,EAA6B,EAAC,CAAS,CAEhF,GAAI,OAAA,GAAW8N,CAAAA,EAAQ,EAAE,MAAA,GAAUA,GAAO,CACxC,IAAMjX,CAAAA,CAAOiX,CAAAA,CAGPC,CAAAA,CAAAA,CAAyBlX,CAAAA,CAAK,eAAA,EAAmB,IAAI,GAAA,CAAI4L,CAAAA,EAAM,CAEnE,IAAMpC,CAAAA,CAAOL,CAAAA,CAAe,IAAA,CAAKO,CAAAA,EAAMA,EAAU,EAAA,GAAOkC,CAAE,CAAA,CAC1D,OAAIpC,CAAAA,EAIG,IACT,CAAC,CAAA,CAAE,OAAQ2N,CAAAA,EAAqBA,CAAAA,GAAM,IAAI,CAAA,CAE1C,OAAO,CACL,EAAA,CAAInX,CAAAA,CAAK,GACT,IAAA,CAAMA,CAAAA,CAAK,KAAA,CACX,SAAA,CAAWA,CAAAA,CAAK,SAAA,CAAY,IAAI,IAAA,CAAKA,EAAK,SAAS,CAAA,CAAI,MAAA,CACvD,OAAA,CAASA,CAAAA,CAAK,OAAA,CAAU,IAAI,IAAA,CAAKA,EAAK,OAAO,CAAA,CAAI,MAAA,CACjD,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAY,CAAA,CAC3B,MAAA,CAAQA,EAAK,QAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAU,WAAA,EAAY,CACrC,SAAA,CAAAkX,CAAAA,CACA,aAAc,KAAA,CAAM,OAAA,CAAQlX,CAAAA,CAAK,YAAY,CAAA,CACzCA,CAAAA,CAAK,YAAA,CAAa,GAAA,CAAIoK,GAAK,OAAOA,CAAAA,EAAM,QAAA,CAAWA,CAAAA,CAAIA,CAAAA,CAAE,MAAM,CAAA,CAC/D,GACJ,IAAA,CAAMpK,CAAAA,CAAK,IAAA,CACX,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAU,GAAA,CAAIoX,CAAAA,GAAM,CACjC,EAAA,CAAIA,CAAAA,CAAE,EAAA,CACN,IAAA,CAAMA,CAAAA,CAAE,KAAA,CACR,QAAA,CAAUA,CAAAA,CAAE,UAAY,GAAA,CAAM,CAAA,CAC9B,SAAA,CAAW,IAAI,IAAA,CACf,OAAA,CAAS,IAAI,IACf,EAAE,CAAA,CACF,KAAA,CAAOpX,CAAAA,CAAK,KAAA,CACZ,WAAA,CAAaA,CAAAA,CAAK,WACpB,CACF,CACA,OAAOiX,CACT,CAGA,SAASI,EAAAA,CAAWpL,CAAAA,CAAYqL,CAAAA,CAA0B,CACxD,OAAO,CACL,GAAGA,CAAAA,CACH,KAAA,CAAOrL,CAAAA,CAAK,IAAA,CACZ,SAAA,CAAWA,CAAAA,CAAK,UAChB,OAAA,CAASA,CAAAA,CAAK,OAAA,CACd,QAAA,CAAUA,CAAAA,CAAK,QAAA,CACf,QAAA,CAAUA,CAAAA,CAAK,UAAU,WAAA,EAAY,CACrC,IAAA,CAAMA,CAAAA,CAAK,IAAA,CACX,WAAA,CAAcA,CAAAA,CAAa,WAAA,CAC3B,MAAOA,CAAAA,CAAK,KAAA,CACZ,QAAA,CAAUA,CAAAA,CAAK,MAAA,CAGf,eAAA,CAAiBqL,CAAAA,CAAa,eAChC,CACF,CAkEO,SAASC,EAAAA,CAAgB,CAC9B,IAAA,CAAAtL,CAAAA,CACA,MAAA,CAAAtG,CAAAA,CACA,QAAA6R,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,YAAA,CAAA/H,CAAAA,CACA,KAAA,CAAA3K,CAAAA,CAAQ,MAAA,CACR,OAAA6N,CAAAA,CAAS,IAAA,CACT,cAAA,CAAAzJ,CAAAA,CAAiB,EAAC,CAClB,aAAA,CAAA0L,CAAAA,CAAgB,EAAC,CACjB,WAAA,CAAAC,CAAAA,CACA,WAAA,CAAA4C,CAAAA,CAAc,EAAC,CACf,mBAAA,CAAAC,EACA,kBAAA,CAAAC,CAAAA,CACA,cAAA,CAAA7M,CAAAA,CAAiB,EAAC,CAClB,QAAA,CAAA8M,CAAAA,CAAW,EAAC,CACZ,YAAA,CAAAC,CAAAA,CACA,WAAA,CAAAjF,CAAAA,CACA,gBAAA,CAAAkF,CAAAA,CAAmB,EACrB,CAAA,CAAyB,CACvB,IAAMrQ,CAAAA,CAAS3C,CAAAA,GAAU,MAAA,CAGnBiT,CAAAA,CAAiB,CACrB,aAActQ,CAAAA,CAAS,SAAA,CAAY,SAAA,CACnC,aAAA,CAAeA,CAAAA,CAAS,SAAA,CAAY,SAAA,CACpC,WAAA,CAAaA,EAAS,SAAA,CAAY,SAAA,CAClC,WAAA,CAAaA,CAAAA,CAAS,uBAAA,CAA0B,iBAAA,CAChD,MAAA,CAAQA,CAAAA,CAAS,wBAA0B,iBAAA,CAC3C,SAAA,CAAWA,CAAAA,CAAS,SAAA,CAAY,SAAA,CAChC,WAAA,CAAaA,CAAAA,CAAS,SAAA,CAAY,UAClC,OAAA,CAASA,CAAAA,CAAS,wBAAA,CAA2B,kBAC/C,CAAA,CAGMuQ,CAAAA,CAAShM,CAAAA,EAAQ,OAAA,GAAWA,GAAQ,EAAE,MAAA,GAAUA,CAAAA,CAAAA,CAChDiM,CAAAA,CAAejM,CAAAA,CAGf,CAACkM,CAAAA,CAAcC,CAAe,EAAI1T,QAAAA,CAAsBuH,CAAAA,CAAO+K,EAAAA,CAAgB/K,CAAAA,CAAM9C,CAAc,CAAA,CAAI,IAAI,CAAA,CAC3G,CAACkP,CAAAA,CAAoBC,CAAqB,CAAA,CAAI5T,QAAAA,CAAS,KAAK,CAAA,CAC5D,CAAC6T,CAAAA,CAAsBC,CAAuB,CAAA,CAAI9T,QAAAA,CAAS,KAAK,CAAA,CAChE,CAAC+T,CAAAA,CAAuBC,CAAwB,CAAA,CAAIhU,SAAS,KAAK,CAAA,CAClE,CAACiU,CAAAA,CAAgBC,EAAiB,CAAA,CAAIlU,QAAAA,CAAiC,IAAI,EAC3E,CAACmU,EAAAA,CAAiBC,EAAkB,CAAA,CAAIpU,QAAAA,CAAS,IAAI,IAAM,CAAA,CAC3D,CAACqU,EAAAA,CAAiBC,EAAkB,CAAA,CAAItU,QAAAA,CAAS,KAAK,CAAA,CACtD,CAACuU,EAAAA,CAA0BC,CAA2B,CAAA,CAAIxU,QAAAA,CAAS,KAAK,CAAA,CACxE,CAACyU,CAAAA,CAAkBC,CAAmB,CAAA,CAAI1U,SAAS,EAAE,CAAA,CACrD,CAAC2U,CAAAA,CAAiBC,CAAkB,CAAA,CAAI5U,QAAAA,CAAS,KAAK,EAGtD,CAAC6U,CAAAA,CAAgBC,EAAiB,CAAA,CAAI9U,QAAAA,CAAS,KAAK,CAAA,CACpD,CAAC+U,GAAkBC,EAAmB,CAAA,CAAIhV,QAAAA,CAAS,KAAK,CAAA,CAGxD,CAACiV,EAAAA,CAAkBC,EAAmB,EAAIlV,QAAAA,CAAS,EAAE,CAAA,CACrDmV,EAAAA,CAAyB7T,MAAAA,CAA6C,IAAI,CAAA,CAG1E,CAAC8T,GAAeC,EAAgB,CAAA,CAAIrV,QAAAA,CAAS,EAAE,CAAA,CAC/CsV,EAAAA,CAAsBhU,MAAAA,CAA6C,IAAI,EAGvE,CAACiU,EAAAA,CAAaC,CAAc,CAAA,CAAIxV,QAAAA,CAAS,EAAE,CAAA,CAC3C,CAACyV,GAAqBC,EAAsB,CAAA,CAAI1V,QAAAA,CAAS,KAAK,CAAA,CAGpEG,SAAAA,CAAU,IAAM,CACd,GAAIoH,CAAAA,CAAM,CACR,IAAMoO,CAAAA,CAAiBrD,EAAAA,CAAgB/K,CAAAA,CAAM9C,CAAc,CAAA,CAC3DiP,EAAgBiC,CAAc,CAAA,CAC9BT,EAAAA,CAAqBS,CAAAA,CAAuB,WAAA,EAAe,EAAE,CAAA,CAC7DN,EAAAA,CAAiBM,EAAe,IAAA,EAAQ,EAAE,EAC5C,CACF,CAAA,CAAG,CAACpO,CAAAA,EAAM,EAAA,CAAI9C,CAAc,CAAC,CAAA,CAG7BtE,SAAAA,CAAU,IACD,IAAM,CACPgV,EAAAA,CAAuB,OAAA,EACzB,aAAaA,EAAAA,CAAuB,OAAO,CAAA,CAEzCG,EAAAA,CAAoB,OAAA,EACtB,YAAA,CAAaA,EAAAA,CAAoB,OAAO,EAE5C,CAAA,CACC,EAAE,CAAA,CAGL,IAAMM,EAAAA,CAAe/G,WAAAA,CAAagH,CAAAA,EAAsB,CACtDnC,CAAAA,CAAgBmC,CAAW,CAAA,CAGvBtC,CAAAA,EAAUvI,CAAAA,EAAgBwI,CAAAA,CAC5BxI,CAAAA,CAAa2H,EAAAA,CAAWkD,EAAarC,CAAoB,CAAC,CAAA,CACjDT,CAAAA,EACTA,CAAAA,CAAa8C,CAAW,EAE5B,CAAA,CAAG,CAACtC,CAAAA,CAAQC,CAAAA,CAAcxI,CAAAA,CAAc+H,CAAY,CAAC,CAAA,CAG/C+C,EAAAA,CAAoBjH,WAAAA,CAAY,IAAM,CAC1C+E,CAAAA,CAAsB,KAAK,CAAA,CAC3BE,CAAAA,CAAwB,KAAK,CAAA,CAC7BE,CAAAA,CAAyB,KAAK,CAAA,CAC9BE,EAAAA,CAAkB,IAAI,CAAA,CACtBM,CAAAA,CAA4B,KAAK,CAAA,CACjCE,CAAAA,CAAoB,EAAE,CAAA,CACtBE,CAAAA,CAAmB,KAAK,EAC1B,EAAG,EAAE,CAAA,CAGCmB,EAAAA,CAAkBlH,YAAY,CAACmH,CAAAA,CAAmBlZ,EAAAA,GAAe,CACrE,GAAI,CAAC2W,CAAAA,CAAc,OACnB,IAAMoC,CAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,CAACuC,CAAK,EAAGlZ,EAAM,EACtD8Y,EAAAA,CAAaC,CAAW,EAC1B,CAAA,CAAG,CAACpC,CAAAA,CAAcmC,EAAY,CAAC,EAGzBK,EAAAA,CAA0BpH,WAAAA,CAAa/R,CAAAA,EAAkB,CAE7DoY,EAAAA,CAAoBpY,CAAK,CAAA,CAGrBqY,EAAAA,CAAuB,SACzB,YAAA,CAAaA,EAAAA,CAAuB,OAAO,CAAA,CAI7CA,EAAAA,CAAuB,OAAA,CAAU,UAAA,CAAW,IAAM,CAChD,GAAI1B,CAAAA,CAAc,CAChB,IAAMoC,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,YAAa3W,CAAM,CAAA,CAC1D8Y,EAAAA,CAAaC,EAAW,EAC1B,CACF,CAAA,CAAG,GAAG,EACR,CAAA,CAAG,CAACpC,CAAAA,CAAcmC,EAAY,CAAC,CAAA,CAGzBM,EAAAA,CAAuBrH,WAAAA,CAAa/R,GAAkB,CAE1DuY,EAAAA,CAAiBvY,CAAK,CAAA,CAGlBwY,EAAAA,CAAoB,OAAA,EACtB,YAAA,CAAaA,EAAAA,CAAoB,OAAO,CAAA,CAI1CA,EAAAA,CAAoB,OAAA,CAAU,UAAA,CAAW,IAAM,CAC7C,GAAI7B,CAAAA,EAAgB3W,EAAM,IAAA,EAAK,CAAG,CAChC,IAAM+Y,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,KAAM3W,CAAAA,CAAM,IAAA,EAAO,CAAA,CAC1D8Y,EAAAA,CAAaC,EAAW,EAC1B,CACF,EAAG,GAAG,EACR,CAAA,CAAG,CAACpC,CAAAA,CAAcmC,EAAY,CAAC,CAAA,CAGzBO,EAAsBtH,WAAAA,CAAY,SAAY,CAClD,GAAI,EAAA,CAAC4E,CAAAA,EAAgB,CAAC8B,EAAAA,CAAY,MAAK,EAAK,CAACnC,CAAAA,CAAAA,CAE7C,CAAAsC,EAAAA,CAAuB,IAAI,CAAA,CAC3B,GAAI,CAEF,IAAMU,CAAAA,CAAmB/I,EAAAA,CAAwBkI,EAAAA,CAAalC,CAAgB,CAAA,CAC9E,MAAMD,CAAAA,CAAaK,EAAa,EAAA,CAAI8B,EAAAA,CAAY,IAAA,EAAK,CAAGa,CAAAA,CAAiB,MAAA,CAAS,CAAA,CAAIA,CAAAA,CAAmB,MAAS,CAAA,CAClHZ,CAAAA,CAAe,EAAE,EACnB,CAAA,OAAE,CACAE,EAAAA,CAAuB,KAAK,EAC9B,CAAA,CACF,CAAA,CAAG,CAACjC,CAAAA,CAAc8B,EAAAA,CAAanC,CAAAA,CAAcC,CAAgB,CAAC,EAGxDgD,EAAAA,CAAoBxH,WAAAA,CAAaxL,CAAAA,EAAwB,CAC7D,IAAMqC,EAAAA,CAAI,OAAOrC,CAAAA,EAAS,SAAW,IAAI,IAAA,CAAKA,CAAI,CAAA,CAAIA,CAAAA,CAEhDiT,EAAAA,CADM,IAAI,IAAA,GACG,OAAA,EAAQ,CAAI5Q,EAAAA,CAAE,OAAA,EAAQ,CACnC6Q,EAAAA,CAAW,IAAA,CAAK,KAAA,CAAMD,GAAS,GAAK,CAAA,CACpCE,EAAAA,CAAY,IAAA,CAAK,KAAA,CAAMF,EAAAA,CAAS,IAAO,CAAA,CACvCG,GAAW,IAAA,CAAK,KAAA,CAAMH,EAAAA,CAAS,KAAQ,CAAA,CAE7C,OAAIC,EAAAA,CAAW,CAAA,CAAUrI,IAAW,IAAA,CAAO,OAAA,CAAU,UAAA,CACjDqI,EAAAA,CAAW,EAAA,CAAWrI,CAAAA,GAAW,IAAA,CAAO,CAAA,KAAA,EAAQqI,EAAQ,CAAA,IAAA,CAAA,CAAS,CAAA,EAAGA,EAAQ,CAAA,KAAA,CAAA,CAC5EC,EAAAA,CAAY,EAAA,CAAWtI,CAAAA,GAAW,IAAA,CAAO,QAAQsI,EAAS,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,EAAS,CAAA,KAAA,CAAA,CAC5EC,EAAAA,CAAW,CAAA,CAAUvI,CAAAA,GAAW,KAAO,CAAA,KAAA,EAAQuI,EAAQ,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,EAAQ,CAAA,KAAA,CAAA,CAErE/Q,EAAAA,CAAE,kBAAA,CAAmBwI,IAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAC/D,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,SACP,CAAC,CACH,CAAA,CAAG,CAACA,CAAM,CAAC,CAAA,CAGLwI,EAAAA,CAAmB7H,WAAAA,CAAa8H,GAAqB,CACzD,GAAI,CAAClD,CAAAA,CAAc,OACnB,IAAImD,EAAAA,CAAWnD,CAAAA,CAAa,UAAY,CAAA,CACpCkD,CAAAA,GAAa,WAAA,CAAaC,EAAAA,CAAW,IAChCD,CAAAA,GAAa,aAAA,EAAiBC,EAAAA,GAAa,CAAA,CAAGA,GAAW,EAAA,CACzDD,CAAAA,GAAa,MAAA,GAAQC,EAAAA,CAAW,CAAA,CAAA,CAEzC,IAAMf,CAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,MAAA,CAAQkD,CAAAA,CAAiB,QAAA,CAAAC,EAAS,CAAA,CACzEhB,EAAAA,CAAaC,CAAW,EACxBjC,CAAAA,CAAsB,KAAK,EAC7B,CAAA,CAAG,CAACH,CAAAA,CAAcmC,EAAY,CAAC,EAGzBiB,EAAAA,CAAkBhI,WAAAA,CAAY,CAAC/L,CAAAA,CAA6BC,EAAAA,GAA8B,CAC9F,GAAI,CAAC0Q,EAAc,OACnB,IAAMoC,CAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,SAAA,CAAA3Q,CAAAA,CAAW,QAAAC,EAAQ,CAAA,CAC1D6S,EAAAA,CAAaC,CAAW,EAC1B,CAAA,CAAG,CAACpC,CAAAA,CAAcmC,EAAY,CAAC,CAAA,CAGzBkB,EAAAA,CAAoBjI,WAAAA,CAAY,IAAM,CAC1C,IAAMvL,CAAAA,CAAO6Q,GAAgB,WAAA,EAAY,CACnC5Q,EAAAA,CAAQ4Q,EAAAA,CAAgB,QAAA,EAAS,CACjC4C,CAAAA,CAAW,IAAI,KAAKzT,CAAAA,CAAMC,EAAAA,CAAO,CAAC,CAAA,CAElCyT,EAAAA,CADU,IAAI,IAAA,CAAK1T,CAAAA,CAAMC,GAAQ,CAAA,CAAG,CAAC,CAAA,CACf,OAAA,EAAQ,CAC9B0T,EAAAA,CAAiBF,CAAAA,CAAS,MAAA,GAE1B7T,EAAAA,CAAkD,EAAC,CAGnDgU,EAAAA,CAAmB,IAAI,IAAA,CAAK5T,CAAAA,CAAMC,EAAAA,CAAO,CAAC,CAAA,CAAE,OAAA,EAAQ,CAC1D,IAAA,IAAS5L,CAAAA,CAAIsf,EAAAA,CAAiB,CAAA,CAAGtf,CAAAA,EAAK,EAAGA,CAAAA,EAAAA,CACvCuL,EAAAA,CAAK,IAAA,CAAK,CACR,IAAA,CAAM,IAAI,IAAA,CAAKI,CAAAA,CAAMC,GAAQ,CAAA,CAAG2T,EAAAA,CAAmBvf,CAAC,CAAA,CACpD,cAAA,CAAgB,KAClB,CAAC,CAAA,CAIH,QAASA,CAAAA,CAAI,CAAA,CAAGA,CAAAA,EAAKqf,EAAAA,CAAarf,CAAAA,EAAAA,CAChCuL,EAAAA,CAAK,IAAA,CAAK,CACR,KAAM,IAAI,IAAA,CAAKI,CAAAA,CAAMC,EAAAA,CAAO5L,CAAC,CAAA,CAC7B,cAAA,CAAgB,IAClB,CAAC,CAAA,CAIH,IAAMwf,CAAAA,CAAgB,EAAA,CAAKjU,EAAAA,CAAK,MAAA,CAChC,IAAA,IAASvL,CAAAA,CAAI,EAAGA,CAAAA,EAAKwf,CAAAA,CAAexf,CAAAA,EAAAA,CAClCuL,EAAAA,CAAK,IAAA,CAAK,CACR,IAAA,CAAM,IAAI,KAAKI,CAAAA,CAAMC,EAAAA,CAAQ,CAAA,CAAG5L,CAAC,CAAA,CACjC,cAAA,CAAgB,KAClB,CAAC,EAGH,OAAOuL,EACT,CAAA,CAAG,CAACiR,EAAe,CAAC,CAAA,CAGdiD,EAAAA,CAAiBvI,YAAY,MAAOxM,CAAAA,EAAuB,CAK/D,GAJAA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,iBAAgB,CAClByS,EAAAA,CAAkB,KAAK,CAAA,CAEnB,CAACrB,CAAAA,EAAgB,CAACR,CAAAA,CAAqB,OAE3C,IAAMoE,EAAAA,CAAQ,KAAA,CAAM,IAAA,CAAKhV,CAAAA,CAAE,YAAA,CAAa,KAAK,CAAA,CAC7C,GAAIgV,EAAAA,CAAM,MAAA,GAAW,CAAA,CAErB,CAAArC,EAAAA,CAAoB,IAAI,CAAA,CACxB,GAAI,CACF,MAAM/B,CAAAA,CAAoBQ,CAAAA,CAAa,EAAA,CAAI4D,EAAK,EAClD,CAAA,OAAE,CACArC,GAAoB,KAAK,EAC3B,CAAA,CACF,CAAA,CAAG,CAACvB,CAAAA,CAAcR,CAAmB,CAAC,EAGhCqE,EAAAA,CAAwBzI,WAAAA,CAAY,MAAOxM,CAAAA,EAA2C,CAC1F,GAAI,CAACoR,CAAAA,EAAgB,CAACR,CAAAA,EAAuB,CAAC5Q,CAAAA,CAAE,MAAA,CAAO,KAAA,CAAO,OAE9D,IAAMgV,EAAAA,CAAQ,MAAM,IAAA,CAAKhV,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvC,GAAIgV,EAAAA,CAAM,MAAA,GAAW,EAErB,CAAArC,EAAAA,CAAoB,IAAI,CAAA,CACxB,GAAI,CACF,MAAM/B,CAAAA,CAAoBQ,EAAa,EAAA,CAAI4D,EAAK,EAClD,CAAA,OAAE,CACArC,EAAAA,CAAoB,KAAK,EAC3B,CAEA3S,CAAAA,CAAE,MAAA,CAAO,KAAA,CAAQ,GAAA,CACnB,EAAG,CAACoR,CAAAA,CAAcR,CAAmB,CAAC,EAGhCsE,EAAAA,CAAiB1I,WAAAA,CAAaxM,CAAAA,EAAuB,CACzDA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,iBAAgB,CAClByS,EAAAA,CAAkB,IAAI,EACxB,CAAA,CAAG,EAAE,CAAA,CAEC0C,GAAkB3I,WAAAA,CAAaxM,CAAAA,EAAuB,CAC1DA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,GACFyS,EAAAA,CAAkB,KAAK,EACzB,CAAA,CAAG,EAAE,CAAA,CAGC2C,EAAAA,CAAiB5I,YAAa6I,CAAAA,EAC9BA,CAAAA,CAAQ,IAAA,CAAa,CAAA,EAAGA,CAAK,CAAA,EAAA,CAAA,CAC7BA,CAAAA,CAAQ,IAAA,CAAO,KAAa,CAAA,EAAA,CAAIA,CAAAA,CAAQ,IAAA,EAAM,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA,CACrD,CAAA,EAAA,CAAIA,GAAS,IAAA,CAAO,IAAA,CAAA,EAAO,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA,CAC3C,EAAE,EAGCC,EAAAA,CAAc9I,WAAAA,CAAa+I,CAAAA,EAC3BA,CAAAA,CAAS,UAAA,CAAW,QAAQ,CAAA,CAAUC,KAAAA,CACtCD,EAAS,QAAA,CAAS,KAAK,CAAA,EAAKA,CAAAA,CAAS,QAAA,CAAS,UAAU,CAAA,CAAUE,QAAAA,CAC/DC,KACN,EAAE,CAAA,CAEL,OAAI,CAAC9W,CAAAA,EAAU,CAACwS,CAAAA,CAAqB,KAGnC/T,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EAAUwS,CAAAA,EACT7S,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,IAAA,CAAM,CAAE,QAAS,CAAE,CAAA,CACnB,OAAA,CAASkD,CAAAA,CACT,SAAA,CAAU,gCAAA,CACZ,CAAA,CAEAlS,IAAAA,CAACgP,OAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAK,EACnC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CAChC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CAChC,SAAA,CAAW3Y,CAAAA,CACT,sFAAA,CACA+L,EAAS,cAAA,CAAiB,UAC5B,CAAA,CAGA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sCAAA,CAEb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,4CAAA,CAA8C+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,EAC7G,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAW/gB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC/EpC,KAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,6BAAA,CAA+B+L,CAAAA,CAAS,4BAAA,CAA+B,2BAA2B,CAAA,CACnH,UAAAkL,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,MAAA,CAAO,SAAA,CAAA,CACtC,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACjF,QAAA,CAAAyQ,CAAAA,CAAa,GAAG,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAC7B,CAAA,CACA7S,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,EACjB,mFAAA,CACA+L,CAAAA,CAAS,yDAAA,CAA4D,mDACvE,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACuY,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CAAE,QAAA,CAAA,CAElC,CAAA,CAAA,CACF,CAAA,CACAvY,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,QAAA,CAAS,CAAA,CACxBA,GAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAWzI,CAAAA,CAAG,iCAAA,CAAmC+L,CAAAA,CAAS,mCAAqC,iCAAiC,CAAA,CACtI,QAAA,CAAAtD,GAAAA,CAACwY,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,EACjC,CAAA,CACAxY,GAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAWzI,CAAAA,CAAG,iCAAA,CAAmC+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CACtI,QAAA,CAAAtD,GAAAA,CAACyY,cAAAA,CAAA,CAAe,SAAA,CAAU,SAAA,CAAU,CAAA,CACtC,EACAzY,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,UAAW7b,CAAAA,CAAG,iCAAA,CAAmC+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CAEhI,QAAA,CAAAtD,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,GACF,CAAA,CAGAhS,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb,IAAM0Y,EAAc3E,CAAAA,CAAa,QAAA,GAAa,GAAA,CAAM,CAAA,CAAI,GAAA,CAElDoC,CAAAA,CAAc,CAAE,GAAGpC,EAAc,QAAA,CAAU2E,CAAAA,CAAa,MAAA,CAD5CA,CAAAA,GAAgB,GAAA,CAAM,WAAA,CAAc,MACiC,CAAA,CACvFxC,GAAaC,CAAW,EAC1B,CAAA,CACA,SAAA,CAAW5e,CAAAA,CACT,qGAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,IACtB,+BAAA,CACAzQ,CAAAA,CAAS,uCAAA,CAA0C,uCACzD,CAAA,CAEC,QAAA,CAAAyQ,CAAAA,CAAa,QAAA,GAAa,KACzB/T,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAEjD,CAAA,CACA3Y,GAAAA,CAAC,SACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAO0V,EAAAA,CACP,QAAA,CAAW/S,CAAAA,EAAM6T,EAAAA,CAAqB7T,CAAAA,CAAE,OAAO,KAAK,CAAA,CACpD,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,uBAAA,CAA0B,cAAA,CACzD,SAAA,CAAWjX,EACT,gFAAA,CACA,iCAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,GAAA,CACtB,6BAAA,CACCzQ,CAAAA,CAAS,uCAAA,CAA0C,yCAC1D,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qDAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAWphB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,EAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,QAAA,CAChC,EACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACboW,EAAAA,EAAkB,CAClBlC,CAAAA,CAAsB,CAACD,CAAkB,EAC3C,CAAA,CACA,SAAA,CAAW1c,CAAAA,CACT,sGAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,KAAOA,CAAAA,CAAa,MAAA,GAAW,WAAA,CACrD,gCAAA,CACCA,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAW,GAAMA,CAAAA,CAAa,MAAA,GAAW,aAAA,CAC9E,8BAAA,CACAzQ,CAAAA,CAAS,wBAAA,CAA2B,2BAC5C,CAAA,CAEC,SAAAyQ,CAAAA,CAAa,QAAA,GAAa,GAAA,EAAOA,CAAAA,CAAa,MAAA,GAAW,WAAA,CACrDvF,CAAAA,GAAW,IAAA,CAAO,aAAe,MAAA,CACjCuF,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAW,CAAA,EAAMA,CAAAA,CAAa,MAAA,GAAW,cAC7EvF,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,aAAA,CAClCA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,OAAA,CACzC,EAEAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAgE,CAAAA,EACC/S,IAAAA,CAAA6G,QAAAA,CAAA,CACE,UAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAMkU,CAAAA,CAAsB,KAAK,EAAG,CAAA,CACjFlU,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,UAAW3Y,CAAAA,CACT,wFAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAA,CACC,CAAE,GAAI,MAAA,CAAQ,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,OAAA,CAAS,KAAA,CAAO,aAAc,EACnF,CAAE,EAAA,CAAI,aAAA,CAAe,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,aAAA,CAAe,MAAO,aAAc,CAAA,CAClG,CAAE,EAAA,CAAI,YAAa,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,YAAA,CAAe,OAAQ,KAAA,CAAO,cAAe,CAC3F,CAAA,CAAE,GAAA,CAAK9V,CAAAA,EACLwI,IAAAA,CAAC,QAAA,CAAA,CAEC,QAAS,IAAM8V,EAAAA,CAAiBte,CAAAA,CAAO,EAAE,CAAA,CACzC,SAAA,CAAWnB,CAAAA,CACT,8EAAA,CACA+L,EAAS,kBAAA,CAAqB,kBAAA,CAC9ByQ,CAAAA,CAAa,MAAA,GAAWrb,CAAAA,CAAO,EAAA,GAAO4K,CAAAA,CAAS,YAAA,CAAe,aAChE,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,sBAAA,CAAwBmB,CAAAA,CAAO,KAAK,CAAA,CAAG,CAAA,CAC3DsH,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,SAAA5K,CAAAA,CAAO,KAAA,CAAM,CAAA,CAAA,CAAA,CATnEA,CAAAA,CAAO,EAUd,CACD,CAAA,CACH,CAAA,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CAGAwI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC4Y,KAAA,CAAK,SAAA,CAAWrhB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,EAC7EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,EAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,WAAA,CACnC,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CACC,QAAS,IAAM,CACbkV,EAAAA,EAAkB,CAClB9B,CAAAA,CAAyB,CAACD,CAAqB,EACjD,EACA,SAAA,CAAW9c,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEC,QAAA,CAAA,CAAAyQ,EAAa,SAAA,EAAaA,CAAAA,CAAa,SAAA,CAAU,MAAA,CAAS,CAAA,CACzD7S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACZ,QAAA,CAAA,CAAA6S,CAAAA,CAAa,SAAA,CAAU,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAAC8E,CAAAA,CAAU5gB,EAAAA,GACjD+H,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,sFAAA,CACV,KAAA,CAAO,CAAE,gBAAiB6Y,CAAAA,CAAS,KAAA,EAAS,SAAU,CAAA,CACtD,KAAA,CAAOA,CAAAA,CAAS,IAAA,CAEf,QAAA,CAAAA,EAAS,QAAA,EAAYA,CAAAA,CAAS,IAAA,CAAK,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,IAL3C5gB,EAMP,CACD,CAAA,CACA8b,CAAAA,CAAa,SAAA,CAAU,MAAA,CAAS,CAAA,EAC/B7S,IAAAA,CAAC,QAAK,SAAA,CAAW3J,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CACzEyQ,EAAa,SAAA,CAAU,MAAA,CAAS,CAAA,CAAA,CACpC,CAAA,CAAA,CAEJ,CAAA,CAEA/T,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,EAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,UAAY,KAAA,CACjC,CAAA,CAEFxO,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,EAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,CAAA,CAGAtD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,SAAAoE,CAAAA,EACCnT,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qBAAqB,OAAA,CAAS,IAAMsU,CAAAA,CAAyB,KAAK,CAAA,CAAG,CAAA,CACpFtU,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,sHAAA,CACA+L,CAAAA,CAAS,sCAAwC,iCACnD,CAAA,CAEC,QAAA,CAAAyB,CAAAA,CAAe,MAAA,CAAS,CAAA,CACvBA,CAAAA,CAAe,GAAA,CAAKK,GAAS,CAC3B,IAAMgD,EAAAA,CAAa2L,CAAAA,CAAa,SAAA,EAAW,IAAA,CAAKhB,CAAAA,EAAKA,CAAAA,CAAE,OAAS3N,CAAAA,CAAK,IAAI,CAAA,CACzE,OACElE,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACb,IAAM4X,CAAAA,CAAmB/E,CAAAA,CAAa,SAAA,EAAa,EAAC,CAChDgF,EAAAA,CACA3Q,EAAAA,CACF2Q,EAAAA,CAAeD,EAAiB,MAAA,CAAO/F,EAAAA,EAAKA,EAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAA,CAEhE2T,EAAAA,CAAe,CAAC,GAAGD,CAAAA,CAAkB1T,CAAI,CAAA,CAE3CiR,EAAAA,CAAgB,WAAA,CAAa0C,EAAY,EAC3C,EACA,SAAA,CAAWxhB,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B8E,EAAAA,GAAe9E,CAAAA,CAAS,aAAe,YAAA,CACzC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBoF,CAAAA,CAAK,KAAA,EAAS,SAAU,CAAA,CAEjD,QAAA,CAAAA,CAAAA,CAAK,QAAA,EAAYA,EAAK,IAAA,CAAK,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,CACtD,CAAA,CACApF,IAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,QAAA,CAAU+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAClE,SAAA8B,CAAAA,CAAK,IAAA,CACR,CAAA,CACCgD,EAAAA,EACCpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,yBAAyB,CAAA,CAAA,CAAA,CA3BvC7M,CAAAA,CAAK,IA6BZ,CAEJ,CAAC,CAAA,CAEDpF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5F,QAAA,CAAAkL,CAAAA,GAAW,KAAO,6BAAA,CAAgC,oBAAA,CACrD,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,OAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACgZ,YAAAA,CAAA,CAAa,SAAA,CAAWzhB,CAAAA,CAAG,UAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,EAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,SAAW,OAAA,CAChC,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbsT,EAAAA,CAAkBD,EAAiB,IAAA,CAAO,OAAO,CAAA,CACjDG,EAAAA,CAAmBX,CAAAA,CAAa,SAAA,EAAa,IAAI,IAAM,EACzD,CAAA,CACA,SAAA,CAAWxc,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,yCAAA,CAA4C,6CACvD,CAAA,CAEC,UAAAyQ,CAAAA,CAAa,SAAA,EAAW,kBAAA,CAAmBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,MAAO,OAAA,CAAS,GAAA,CAAK,SAAU,CAAC,CAAA,GAAMA,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,SACtJxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,MAAA,CAAQ+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,EAAG,QAAA,CAAA,QAAA,CAAC,CAAA,CAC1EyQ,CAAAA,CAAa,OAAA,EAAS,kBAAA,CAAmBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAS,CAAE,KAAA,CAAO,OAAA,CAAS,GAAA,CAAK,SAAU,CAAC,CAAA,GAAMA,CAAAA,GAAW,KAAO,KAAA,CAAQ,KAAA,CAAA,CAAA,CACnJ,CAAA,CAGAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAsE,CAAAA,EACCrT,KAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAMwU,EAAAA,CAAkB,IAAI,CAAA,CAAG,CAAA,CAC5EtT,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,GAAI,CAAA,CAC3B,SAAA,CAAW3Y,CAAAA,CACT,+EAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,EACA,OAAA,CAAUX,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACnF,QAAA,CAAA,CAAA,CAAA,IAAM,CACN,IAAMqB,CAAAA,CAAQ,IAAI,IAAA,CACZsU,EAAAA,CAAW,IAAI,IAAA,CAAKtU,CAAK,CAAA,CAAGsU,GAAS,OAAA,CAAQtU,CAAAA,CAAM,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtE,IAAMuU,CAAAA,CAAe,IAAI,KAAKvU,CAAK,CAAA,CAAGuU,CAAAA,CAAa,OAAA,CAAQvU,CAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,CAAA,CAAIA,EAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAChH,IAAMwU,EAAAA,CAAa,IAAI,IAAA,CAAKxU,CAAK,CAAA,CAAGwU,EAAAA,CAAW,OAAA,CAAQxU,CAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,EAAIA,CAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAC5G,IAAMyU,GAAc,IAAI,IAAA,CAAKzU,CAAK,CAAA,CAAGyU,EAAAA,CAAY,OAAA,CAAQzU,CAAAA,CAAM,OAAA,IAAc,CAAA,CAAIA,CAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,CAAK,CAAC,CAAA,CAC7G,IAAM0U,EAAAA,CAAW,IAAI,IAAA,CAAK1U,CAAK,CAAA,CAAG0U,EAAAA,CAAS,OAAA,CAAQ1U,CAAAA,CAAM,SAAQ,CAAI,EAAE,CAAA,CACvE,IAAM2U,EAAAA,CAAY,IAAI,IAAA,CAAK3U,CAAK,EAAG,OAAA2U,EAAAA,CAAU,OAAA,CAAQ3U,CAAAA,CAAM,OAAA,EAAQ,CAAI,EAAE,CAAA,CAEpD,CACnB,CAAE,KAAA,CAAO6J,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAAS,IAAA,CAAM7J,CAAAA,CAAO,QAASA,CAAAA,CAAM,kBAAA,CAAmB6J,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACxK,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAW,UAAA,CAAY,IAAA,CAAMyK,EAAAA,CAAU,OAAA,CAASA,GAAS,kBAAA,CAAmBzK,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACpL,CAAE,MAAOA,CAAAA,GAAW,IAAA,CAAO,oBAAA,CAAuB,cAAA,CAAgB,IAAA,CAAM0K,CAAAA,CAAc,OAAA,CAAS1K,CAAAA,GAAW,KAAO,SAAA,CAAS,MAAO,CAAA,CACjI,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAmB,YAAa,IAAA,CAAM2K,EAAAA,CAAY,OAAA,CAAS3K,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAO,CAAA,CACxH,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,0BAAA,CAA0B,cAAA,CAAgB,IAAA,CAAM4K,EAAAA,CAAa,OAAA,CAASA,GAAY,kBAAA,CAAmB5K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,MAAO,OAAQ,CAAC,CAAE,CAAA,CACzM,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,YAAc,SAAA,CAAW,IAAA,CAAM6K,EAAAA,CAAU,OAAA,CAASA,EAAAA,CAAS,kBAAA,CAAmB7K,CAAAA,GAAW,IAAA,CAAO,QAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,EAClL,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,SAAA,CAAW,IAAA,CAAM8K,EAAAA,CAAW,QAASA,EAAAA,CAAU,kBAAA,CAAmB9K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,UAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CACtL,CAAA,CAEoB,GAAA,CAAI,CAAC5J,EAAQ3M,CAAAA,GAC/BiJ,IAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,6BAAA,CAAgC,gCAC3C,CAAA,CACA,OAAA,CAAS,IAAM,CACb,GAAIiR,CAAAA,GAAmB,OAAA,CAAS,CAC9B,IAAMgF,EAAAA,CAAaxF,CAAAA,CAAa,OAAA,EAAWnP,CAAAA,CAAO,IAAA,CAAOmP,CAAAA,CAAa,OAAA,CAClEnP,CAAAA,CAAO,KACPmP,CAAAA,CAAa,OAAA,CACjBoD,EAAAA,CAAgBvS,CAAAA,CAAO,IAAA,CAAM2U,EAAU,CAAA,CACvC/E,EAAAA,CAAkB,KAAK,EACzB,CAAA,KAAO,CACL,IAAMgF,EAAAA,CAAezF,CAAAA,CAAa,SAAA,EAAanP,CAAAA,CAAO,KAAOmP,CAAAA,CAAa,SAAA,CACtEnP,CAAAA,CAAO,IAAA,CACPmP,EAAa,SAAA,CACjBoD,EAAAA,CAAgBqC,EAAAA,CAAc5U,CAAAA,CAAO,IAAI,CAAA,CACzC4P,EAAAA,CAAkB,IAAI,EACxB,CACF,CAAA,CAEA,QAAA,CAAA,CAAAxU,GAAAA,CAAC,QAAM,QAAA,CAAA4E,CAAAA,CAAO,KAAA,CAAM,CAAA,CACpB5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,UAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAsB,CAAAA,CAAO,OAAA,CACV,CAAA,CAAA,CAAA,CAxBK3M,CAyBP,CACD,CACH,CAAA,GAAG,CAEH+H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,qBAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAApC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbiW,EAAAA,CAAgB,MAAA,CAAW,MAAS,CAAA,CACpC3C,EAAAA,CAAkB,IAAI,EACxB,EACA,SAAA,CAAWjd,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,+BAAA,CAAkC,+BAC7C,CAAA,CAEA,QAAA,CAAA,CAAAtD,IAAC,MAAA,CAAA,CAAM,QAAA,CAAAwO,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAAc,CAAA,CACzDxO,GAAAA,CAACgS,EAAA,CAAE,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGA9Q,IAAAA,CAAC,OAAI,SAAA,CAAU,KAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,gCAAA,CAAkC+L,EAAS,2BAAA,CAA8B,2BAA2B,CAAA,CACpH,QAAA,CAAAiR,CAAAA,GAAmB,OAAA,CACf/F,CAAAA,GAAW,IAAA,CAAO,uCAAkC,6BAAA,CACpDA,CAAAA,GAAW,IAAA,CAAO,mCAAA,CAA+B,2BAAA,CACxD,CAAA,CAEAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,aAAe,eAAe,CAAA,CACvE,QAAA,CAAAmR,EAAAA,CAAgB,kBAAA,CAAmBjG,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAS,CAAE,KAAA,CAAO,MAAA,CAAQ,IAAA,CAAM,SAAU,CAAC,CAAA,CAC7G,CAAA,CACAtN,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM0U,GAAmB,IAAI,IAAM,CAAA,CAC5C,SAAA,CAAWnd,CAAAA,CACT,uCAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,iCAC5C,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAC7B,CAAA,CACAxO,GAAAA,CAAC,UACC,OAAA,CAAS,IAAM0U,EAAAA,CAAmB,IAAI,IAAA,CAAKD,EAAAA,CAAgB,WAAA,EAAY,CAAGA,GAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACzG,SAAA,CAAWld,CAAAA,CAAG,aAAA,CAAe+L,EAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,SAAA,CAAU,KAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,OAAA,CAAQ,WAAA,CAAY,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,cAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAQ,WAAA,CAAa,CAAA,CAAG,CAAA,CAAE,iBAAA,CAAkB,CAAA,CAAE,EAC1K,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM0U,EAAAA,CAAmB,IAAI,IAAA,CAAKD,GAAgB,WAAA,EAAY,CAAGA,EAAAA,CAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACzG,UAAWld,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAAC,OAAI,SAAA,CAAU,SAAA,CAAU,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,OAAA,CAAQ,WAAA,CAAY,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAQ,WAAA,CAAa,CAAA,CAAG,EAAE,cAAA,CAAe,CAAA,CAAE,CAAA,CACvK,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,6BAAA,CACX,QAAA,CAAA,CAAAwO,CAAAA,GAAW,IAAA,CACT,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,KAAM,IAAA,CAAM,IAAA,CAAM,OAAI,CAAA,CACzC,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,KAAM,IAAA,CAAM,IAAA,CAAM,IAAI,CAAA,EAC3C,IAAK1K,CAAAA,EACL9D,GAAAA,CAAC,KAAA,CAAA,CAAc,SAAA,CAAWzI,EAAG,kDAAA,CAAoD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACzH,QAAA,CAAAQ,CAAAA,CAAAA,CADOA,CAEV,CACD,CAAA,CACH,CAAA,CAGA9D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACZ,QAAA,CAAAoX,EAAAA,GAAoB,GAAA,CAAI,CAACpR,CAAAA,CAAG/N,EAAAA,GAAM,CACjC,IAAMwhB,CAAAA,CAAUzT,CAAAA,CAAE,KAAK,YAAA,EAAa,GAAM,IAAI,IAAA,EAAK,CAAE,YAAA,EAAa,CAC5D0T,EAAAA,CAAc3F,EAAa,SAAA,EAAW,YAAA,EAAa,GAAM/N,CAAAA,CAAE,IAAA,CAAK,YAAA,EAAa,CAC7E2T,EAAAA,CAAY5F,EAAa,OAAA,EAAS,YAAA,EAAa,GAAM/N,CAAAA,CAAE,IAAA,CAAK,YAAA,EAAa,CACzEoC,EAAAA,CAAasR,IAAeC,EAAAA,CAC5BC,EAAAA,CAAY7F,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,OAAA,EACvD/N,CAAAA,CAAE,IAAA,EAAQ+N,EAAa,SAAA,EAAa/N,CAAAA,CAAE,IAAA,EAAQ+N,CAAAA,CAAa,OAAA,CAE7D,OACE/T,GAAAA,CAAC,QAAA,CAAA,CAEC,QAAS,IAAM,CACb,IAAM6Z,EAAAA,CAAc,IAAI,IAAA,CAAK7T,CAAAA,CAAE,IAAI,EACnC,GAAIuO,CAAAA,GAAmB,OAAA,CAAS,CAC9B,IAAMgF,CAAAA,CAAaxF,CAAAA,CAAa,OAAA,EAAW8F,GAAc9F,CAAAA,CAAa,OAAA,CAClE8F,EAAAA,CACA9F,CAAAA,CAAa,OAAA,CACjBoD,EAAAA,CAAgB0C,EAAAA,CAAaN,CAAU,EACvC/E,EAAAA,CAAkB,KAAK,EACzB,CAAA,KAAO,CACL,IAAMgF,CAAAA,CAAezF,CAAAA,CAAa,WAAa8F,EAAAA,CAAc9F,CAAAA,CAAa,SAAA,CACtE8F,EAAAA,CACA9F,CAAAA,CAAa,SAAA,CACjBoD,EAAAA,CAAgBqC,CAAAA,CAAcK,EAAW,CAAA,CACzCrF,EAAAA,CAAkB,IAAI,EACxB,CACF,CAAA,CACA,SAAA,CAAWjd,CAAAA,CACT,kFACA,CAACyO,CAAAA,CAAE,cAAA,GAAmB1C,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAAA,CAClD0C,CAAAA,CAAE,cAAA,GAAmB1C,EAAS,YAAA,CAAe,eAAA,CAAA,CAC7CmW,CAAAA,EAAW,uBAAA,CACXC,EAAAA,EAAe,yBAAA,CACfC,EAAAA,EAAa,CAACD,IAAe,yBAAA,CAC7BE,EAAAA,EAAa,CAACxR,EAAAA,GAAe9E,CAAAA,CAAS,iBAAA,CAAoB,eAAA,CAAA,CAC1D,CAAC8E,KAAe9E,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CACjD,CAAA,CAEC,QAAA,CAAA0C,CAAAA,CAAE,IAAA,CAAK,OAAA,IA5BH/N,EA6BP,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,GACF,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAWviB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC7EtD,IAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,SAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CACnC,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACboW,EAAAA,EAAkB,CAClBhC,CAAAA,CAAwB,CAACD,CAAoB,EAC/C,CAAA,CACA,UAAW5c,CAAAA,CACT,uFAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,MAAA,EAAUA,CAAAA,CAAa,QAAA,GAAa,QAAA,CAC1D,6BACAA,CAAAA,CAAa,QAAA,GAAa,QAAA,CACxB,kCAAA,CACAA,CAAAA,CAAa,QAAA,GAAa,KAAA,CACxB,gCAAA,CACAzQ,EAAS,wBAAA,CAA2B,2BAC9C,CAAA,CAEC,QAAA,CAAAyQ,CAAAA,CAAa,QAAA,CACTA,CAAAA,CAAa,QAAA,GAAa,QAAUA,CAAAA,CAAa,QAAA,GAAa,QAAA,CAC1DvF,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CAC5BuF,CAAAA,CAAa,WAAa,QAAA,CACvBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAA,CAC5BA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MACjCA,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAC3C,CAAA,CAEAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,SAAAkE,CAAAA,EACCjT,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qBAAqB,OAAA,CAAS,IAAMoU,CAAAA,CAAwB,KAAK,EAAG,CAAA,CACnFpU,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,wFAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAA,CACC,CAAE,EAAA,CAAI,QAAA,CAAU,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,UAAY,QAAA,CAAU,KAAA,CAAO,YAAa,CAAA,CACnF,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAOA,IAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CAAQ,KAAA,CAAO,eAAgB,CAAA,CAC/E,CAAE,EAAA,CAAI,SAAU,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAA,CAAU,KAAA,CAAO,eAAgB,CAAA,CACpF,CAAE,EAAA,CAAI,KAAA,CAAO,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,KAAA,CAAO,KAAA,CAAO,cAAe,CAAA,CAC5E,CAAE,EAAA,CAAI,MAAA,CAAW,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,cAAe,KAAA,CAAO,aAAc,CAClG,CAAA,CAAE,GAAA,CAAKpN,CAAAA,EACLF,IAAAA,CAAC,QAAA,CAAA,CAEC,QAAS,IAAM,CACbmV,EAAAA,CAAgB,UAAA,CAAYjV,CAAAA,CAAS,EAAsB,CAAA,CAC3DgT,CAAAA,CAAwB,KAAK,EAC/B,CAAA,CACA,SAAA,CAAW7c,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9ByQ,EAAa,QAAA,GAAa3S,CAAAA,CAAS,EAAA,GAAOkC,CAAAA,CAAS,YAAA,CAAe,YAAA,CACpE,CAAA,CAEA,QAAA,CAAA,CAAAtD,IAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,sBAAA,CAAwB6J,CAAAA,CAAS,KAAK,CAAA,CAAG,CAAA,CAC7DpB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAAlC,CAAAA,CAAS,KAAA,CAAM,IAZrEA,CAAAA,CAAS,EAAA,EAAM,MAatB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,EAGAF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC+Z,KAAAA,CAAA,CAAM,UAAWxiB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC9EtD,GAAAA,CAAC,QAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,IAAW,IAAA,CAAO,aAAA,CAAa,UAAA,CAClC,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,UAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACnE,QAAA,CAAAyQ,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,QACpC,CAAA,EAAG,IAAA,CAAK,IAAA,CAAA,CAAMA,CAAAA,CAAa,OAAA,CAAQ,OAAA,EAAQ,CAAIA,CAAAA,CAAa,UAAU,OAAA,EAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAG,CAAC,CAAA,CAAA,EAAIvF,IAAW,IAAA,CAAO,SAAA,CAAS,MAAM,CAAA,CAAA,CAC7IA,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,SAAA,CACzC,GACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,kBAAA,CAAqB,iBAAiB,CAAA,CAAG,CAAA,CACtGtD,GAAAA,CAAC,QAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,IAAW,IAAA,CAAO,UAAA,CAAa,UAAA,CAClC,CAAA,CACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CACZ,UAAAyT,EAAAA,CACC3U,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,OAAA,CACL,GAAA,CAAI,GAAA,CACJ,GAAA,CAAI,MACJ,IAAA,CAAK,GAAA,CACL,KAAA,CAAO+T,CAAAA,CAAa,QAAA,EAAY,CAAA,CAChC,QAAA,CAAWpR,CAAAA,EAAM,CACf,IAAM+V,EAAAA,CAAc,QAAA,CAAS/V,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvCqH,CAAAA,CAAY+J,EAAa,MAAA,CACzB2E,EAAAA,GAAgB,GAAA,CAAK1O,CAAAA,CAAY,YAC5B0O,EAAAA,CAAc,CAAA,CAAG1O,CAAAA,CAAY,aAAA,CACjCA,EAAY,MAAA,CACjB,IAAMmM,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,QAAA,CAAU2E,EAAAA,CAAa,OAAQ1O,CAAiB,CAAA,CACvFkM,EAAAA,CAAaC,EAAW,EAC1B,CAAA,CACA,MAAA,CAAQ,IAAMvB,GAAmB,KAAK,CAAA,CACtC,SAAA,CAAWrd,CAAAA,CACT,sEAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAAA,CACzB,8NACF,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CAEAtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM4U,GAAmB,IAAI,CAAA,CACtC,SAAA,CAAWrd,CAAAA,CACT,sHAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAC3B,EAEA,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,oCAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,IAAM,cAAA,CAAiB,cACnD,CAAA,CACA,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAGA,CAAAA,CAAa,UAAY,CAAC,CAAA,CAAA,CAAI,CAAA,CACnD,CAAA,CACF,CAAA,CAEF7S,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,EAAG,kCAAA,CAAoC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC5F,QAAA,CAAA,CAAAyQ,CAAAA,CAAa,QAAA,EAAY,EAAE,GAAA,CAAA,CAC9B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGA7S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAAC8R,GAAAA,CAAA,CAAI,SAAA,CAAWva,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC5EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,MAAA,CACnC,CAAA,CACAxO,IAACuQ,EAAAA,CAAA,CACC,YAAA,CAAcwD,CAAAA,CAAa,IAAA,EAAQ,EAAC,CACpC,aAAA,CAAetD,EACf,QAAA,CAAWuJ,CAAAA,EAAY,CACrB3D,EAAAA,CAAgB,MAAA,CAAQ2D,CAAO,EACjC,CAAA,CACA,YAAatJ,CAAAA,CACb,KAAA,CAAOkD,CAAAA,CACT,CAAA,CAAA,CACF,CAAA,CAGA1S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCACb,QAAA,CAAA,CAAAlB,GAAAA,CAACia,KAAAA,CAAA,CAAM,SAAA,CAAW1iB,CAAAA,CAAG,gBAAA,CAAkB+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,EAAS,gBAAA,CAAmB,eAAe,CAAA,CACjF,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,YAAA,CAAe,WAAA,CACpC,EACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CAEZ,QAAA,CAAA,CAAA6S,CAAAA,CAAa,YAAA,EAAgBA,CAAAA,CAAa,aAAa,MAAA,CAAS,CAAA,EAC/D/T,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,QAAA,CAAA+T,CAAAA,CAAa,aAAa,GAAA,CAAKxN,CAAAA,EAAU,CACxC,IAAM2T,EAAAA,CAAUvT,CAAAA,CAAe,IAAA,CAAKW,CAAAA,EAAKA,EAAE,EAAA,GAAOf,CAAK,CAAA,CACvD,OACErF,IAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,4EACA+L,CAAAA,CAAS,8BAAA,CAAiC,2BAC5C,CAAA,CAEC,QAAA,CAAA,CAAA4W,EAAAA,EAAS,IAAA,EAAQ3T,CAAAA,CAAM,MAAM,CAAA,CAAG,CAAC,CAAA,CAClCvG,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb,IAAMuH,CAAAA,CAAAA,CAAWwM,CAAAA,CAAa,YAAA,EAAgB,EAAC,EAAG,MAAA,CAAOvM,EAAAA,EAAMA,EAAAA,GAAOjB,CAAK,CAAA,CAC3E8P,EAAAA,CAAgB,cAAA,CAAgB9O,CAAO,EACzC,CAAA,CACA,SAAA,CAAWhQ,CAAAA,CACT,+DACF,CAAA,CAEA,QAAA,CAAAyI,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,IAjBKzL,CAkBP,CAEJ,CAAC,CAAA,CACH,CAAA,CAIFrF,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbkV,EAAAA,EAAkB,CAClBtB,CAAAA,CAA4B,CAACD,EAAwB,EACvD,CAAA,CACA,UAAWtd,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,KAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAC9BlS,IAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,EAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,qBAAA,CAAwB,gBAAA,CAC7C,GACF,CAAA,CAGAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA4E,EAAAA,EACC3T,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAM,CACjD8U,EAA4B,KAAK,CAAA,CACjCE,CAAAA,CAAoB,EAAE,EACxB,CAAA,CAAG,CAAA,CACH9T,IAAAA,CAACgP,OAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,EAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,sGAAA,CACA+L,EAAS,qCAAA,CAAwC,iCACnD,CAAA,CAGA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,eAAgB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CAC/E,QAAA,CAAAtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,OACL,KAAA,CAAO+U,CAAAA,CACP,QAAA,CAAWpS,CAAAA,EAAMqS,CAAAA,CAAoBrS,CAAAA,CAAE,MAAA,CAAO,KAAK,EACnD,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,iBAAA,CAAoB,gBAAA,CACnD,SAAA,CAAWjX,CAAAA,CACT,kDAAA,CACA+L,EACI,oEAAA,CACA,qDACN,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CACF,CAAA,CAGAtD,GAAAA,CAAC,OAAI,SAAA,CAAU,+BAAA,CACZ,QAAA,CAAA2G,CAAAA,CAAe,MAAA,CAAS,CAAA,CACvBA,CAAAA,CACG,MAAA,CAAOW,GAAKA,CAAAA,CAAE,EAAA,GAAOyM,CAAAA,CAAa,EAAE,CAAA,CACpC,MAAA,CAAOzM,CAAAA,EACNyN,CAAAA,GAAqB,IACrBzN,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAASyN,CAAAA,CAAiB,WAAA,EAAa,CAC9D,CAAA,CACC,GAAA,CAAKmF,CAAAA,EAAY,CAChB,IAAM9R,EAAAA,CAAa2L,CAAAA,CAAa,YAAA,EAAc,SAASmG,CAAAA,CAAQ,EAAE,CAAA,CACjE,OACEhZ,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACb,IAAMiZ,CAAAA,CAAcpG,CAAAA,CAAa,YAAA,EAAgB,EAAC,CAC9CxM,EAAAA,CACAa,EAAAA,CACFb,GAAU4S,CAAAA,CAAY,MAAA,CAAO3S,EAAAA,EAAMA,EAAAA,GAAO0S,CAAAA,CAAQ,EAAE,CAAA,CAEpD3S,EAAAA,CAAU,CAAC,GAAG4S,CAAAA,CAAaD,CAAAA,CAAQ,EAAE,CAAA,CAEvC7D,EAAAA,CAAgB,cAAA,CAAgB9O,EAAO,EACzC,CAAA,CACA,SAAA,CAAWhQ,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B8E,EAAAA,GAAe9E,EAAS,YAAA,CAAe,YAAA,CACzC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,0EACA6Q,EAAAA,CACI,6BAAA,CACA9E,CAAAA,CAAS,iBAAA,CAAoB,iBACnC,CAAA,CAEC,QAAA,CAAA8E,EAAAA,EACCpI,IAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAE1C,CAAA,CACA/Q,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,gBAAA,CAAkB+L,CAAAA,CAAS,aAAe,eAAe,CAAA,CAC1E,QAAA,CAAA4W,CAAAA,CAAQ,IAAA,CACX,CAAA,CACAla,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAA4W,CAAAA,CAAQ,GAAG,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CApCKA,CAAAA,CAAQ,EAqCf,CAEJ,CAAC,CAAA,CAEHla,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAC5F,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,2BAAA,CAA8B,oBAAA,CACnD,CAAA,CAEJ,GACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCACb,QAAA,CAAA,CAAAlB,GAAAA,CAACoa,OAAAA,CAAA,CAAQ,UAAW7iB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAChFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAC1D,QAAA,CAAA,OAAA,CACrB,CAAA,CACApC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbkV,EAAAA,EAAkB,CAClBlB,CAAAA,CAAmB,CAACD,CAAe,EACrC,CAAA,CACA,SAAA,CAAW1d,EACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,sBAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB+T,CAAAA,CAAa,KAAA,EAAS,SAAU,CAAA,CAC5D,EACA/T,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,EACnE,QAAA,CAAAqP,EAAAA,CAAY,IAAA,CAAK0H,CAAAA,EAAKA,CAAAA,CAAE,KAAA,GAAUtG,CAAAA,CAAa,KAAK,GAAG,IAAA,GAASvF,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CAAA,CAC9F,CAAA,CACAxO,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,EAGAtD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAgF,CAAAA,EACC/T,IAAAA,CAAA6G,QAAAA,CAAA,CACE,UAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAMkV,CAAAA,CAAmB,KAAK,EAAG,CAAA,CAC9ElV,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,UAAW3Y,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEA,QAAA,CAAAtD,GAAAA,CAAC,OAAI,SAAA,CAAU,0BAAA,CACZ,QAAA,CAAA2S,EAAAA,CAAY,GAAA,CAAK1R,CAAAA,EAAU,CAC1B,IAAMmH,GAAa2L,CAAAA,CAAa,KAAA,GAAU9S,CAAAA,CAAM,KAAA,CAChD,OACEjB,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbqW,EAAAA,CAAgB,OAAA,CAASpV,CAAAA,CAAM,KAAK,CAAA,CACpCiU,CAAAA,CAAmB,KAAK,EAC1B,CAAA,CACA,SAAA,CAAW3d,CAAAA,CACT,sEAAA,CACA6Q,EAAAA,EAAc,sBAAA,CACd9E,CAAAA,CAAS,uBAAA,CAA0B,mBACrC,CAAA,CACA,KAAA,CAAO,CACL,eAAA,CAAiBrC,CAAAA,CAAM,KAAA,CACvB,YAAA,CAAcmH,EAAAA,CAAanH,EAAM,KAAA,CAAQ,MAC3C,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAM,IAAA,CAEZ,QAAA,CAAAmH,EAAAA,EACCpI,IAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAAA,CAjBvChR,CAAAA,CAAM,KAmBb,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAC,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACsa,OAAAA,CAAA,CAAQ,SAAA,CAAW/iB,CAAAA,CAAG,SAAA,CAAW+L,EAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAChFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,eAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,YAC9B,CAAA,CACAtN,IAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,wCAAA,CACf,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,KAAK,UAAA,CACL,OAAA,CAAS+T,CAAAA,CAAa,WAAA,EAAe,KAAA,CACrC,QAAA,CAAWpR,CAAAA,EAAM0T,EAAAA,CAAgB,cAAsB1T,CAAAA,CAAE,MAAA,CAAO,OAAO,CAAA,CACvE,SAAA,CAAWpL,CAAAA,CACT,2EAAA,CACAwc,CAAAA,CAAa,YACT,iCAAA,CACAzQ,CAAAA,CAAS,gCAAA,CAAmC,gCAAA,CAChD,iDACF,CAAA,CACF,CAAA,CACAtD,GAAAA,CAAC,QAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACnE,QAAA,CAAAkL,IAAW,IAAA,CAAO,kBAAA,CAAqB,mBAAA,CAC1C,CAAA,CAAA,CACF,GACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAApC,IAAAA,CAAC,OAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACua,QAAAA,CAAA,CAAS,SAAA,CAAWhjB,CAAAA,CAAG,UAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACjFtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,EAAG,uBAAA,CAAyB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,iBAAgB,aAAA,CACrC,CAAA,CAAA,CACF,CAAA,CACAxO,GAAAA,CAAC,UAAA,CAAA,CACC,KAAA,CAAOuV,EAAAA,CACP,QAAA,CAAW5S,GAAM4T,EAAAA,CAAwB5T,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvD,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,4BAA2B,oBAAA,CAC1D,SAAA,CAAWjX,CAAAA,CACT,8FAAA,CACA+L,CAAAA,CACI,oEAAA,CACA,uEACN,CAAA,CACF,EACApC,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,wDAAA,CACA+L,CAAAA,CAAS,uCAAA,CAA0C,uCACrD,EACE,QAAA,CAAA,CAAAtD,GAAAA,CAACuY,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CAC7B/J,CAAAA,GAAW,KAAO,gBAAA,CAAmB,eAAA,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,qBAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAAtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,EAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,wBAA0B,eAAA,CAC/C,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,+EAAA,CACA+L,CAAAA,CAAS,8CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,EACzB1D,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAAgC,6BAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAkL,IAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CACnC,CAAA,CACCuF,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAS,OAAS,CAAA,EACvD/T,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACZ,QAAA,CAAA+T,CAAAA,CAAa,QAAA,CAAS,IAAKyG,CAAAA,EAC1BtZ,IAAAA,CAAC,KAAA,CAAA,CAAqB,SAAA,CAAU,yBAAA,CAC9B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAWzI,CAAAA,CACd,wEAAA,CACAijB,CAAAA,CAAQ,QAAA,GAAa,GAAA,CACjB,+BAAA,CACAlX,CAAAA,CAAS,uCAAA,CAA0C,uCACzD,CAAA,CACG,QAAA,CAAAkX,CAAAA,CAAQ,QAAA,GAAa,GAAA,EACpBxa,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,UAAU,oBAAA,CAAqB,CAAA,CAEjD,CAAA,CACA3Y,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,SAAA,CACAijB,EAAQ,QAAA,GAAa,GAAA,CACjB,6BAAA,CACAlX,CAAAA,CAAS,YAAA,CAAe,eAC9B,CAAA,CACG,QAAA,CAAAkX,EAAQ,IAAA,CACX,CAAA,CAAA,CAAA,CAlBQA,CAAAA,CAAQ,EAmBlB,CACD,CAAA,CACH,CAAA,CAEFtZ,IAAAA,CAAC,UAAO,SAAA,CAAW3J,CAAAA,CACjB,+EAAA,CACA+L,CAAAA,CAAS,6CAAA,CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,IAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB1D,CAAAA,GAAW,IAAA,CAAO,kBAAA,CAAqB,eAC1C,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,oBAAA,CACA+L,CAAAA,CAAS,kBAAoB,iBAC/B,CAAA,CACE,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CACb,uBAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,SAAAkL,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAsB,YAAA,CAC3C,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAWzI,EACjB,+BAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,iCAChD,EACE,QAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,CACAhR,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,gFACA+L,CAAAA,CAAS,6CAAA,CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACya,UAAAA,CAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAC/BjM,CAAAA,GAAW,IAAA,CAAO,wBAAA,CAA2B,kBAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,CAGAtN,KAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,oBAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,UAAApC,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAW3J,CAAAA,CACb,4BAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,EACG,QAAA,CAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,UAAA,CAAa,aAAA,CAC/B8E,CAAAA,CAAY,MAAA,CAAS,CAAA,EACpBpS,KAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,0BAAA,CAA4B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,cAC1FgQ,CAAAA,CAAY,MAAA,CAAO,GAAA,CAAA,CACvB,CAAA,CAAA,CAEJ,CAAA,CAGCA,CAAAA,CAAY,MAAA,CAAS,CAAA,EACpBtT,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACZ,QAAA,CAAAsT,CAAAA,CAAY,GAAA,CAAKoH,CAAAA,EAAe,CAC/B,IAAMC,EAAAA,CAAW1C,EAAAA,CAAYyC,CAAAA,CAAW,IAAI,CAAA,CACtCE,CAAAA,CAAUF,CAAAA,CAAW,IAAA,CAAK,WAAW,QAAQ,CAAA,CAEnD,OACExZ,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,gEAAA,CACA+L,EAAS,8BAAA,CAAiC,8BAC5C,CAAA,CAGC,QAAA,CAAA,CAAAsX,CAAAA,EAAWF,CAAAA,CAAW,YAAA,CACrB1a,GAAAA,CAAC,OACC,GAAA,CAAK0a,CAAAA,CAAW,YAAA,CAChB,GAAA,CAAKA,CAAAA,CAAW,IAAA,CAChB,SAAA,CAAU,gCAAA,CACZ,EAEA1a,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,oDAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAC3B,EACE,QAAA,CAAAtD,GAAAA,CAAC2a,EAAAA,CAAA,CAAS,SAAA,CAAWpjB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAAG,CAAA,CACnF,CAAA,CAIFpC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,UAAAlB,GAAAA,CAAC,GAAA,CAAA,CACC,IAAA,CAAM0a,CAAAA,CAAW,GAAA,CACjB,MAAA,CAAO,QAAA,CACP,GAAA,CAAI,sBACJ,SAAA,CAAWnjB,CAAAA,CACT,oDAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CAEC,QAAA,CAAAoX,EAAW,IAAA,CACd,CAAA,CACA1a,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CACpE,QAAA,CAAAyU,EAAAA,CAAe2C,CAAAA,CAAW,IAAI,CAAA,CACjC,CAAA,CAAA,CACF,EAGClH,CAAAA,EACCxT,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMwT,CAAAA,CAAmBkH,CAAAA,CAAW,EAAE,EAC/C,SAAA,CAAWnjB,CAAAA,CACT,gEAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,+BAChD,CAAA,CACA,KAAA,CAAOkL,IAAW,IAAA,CAAO,UAAA,CAAa,QAAA,CAEtC,QAAA,CAAAxO,GAAAA,CAAC6a,MAAAA,CAAA,CAAO,SAAA,CAAU,UAAU,CAAA,CAC9B,CAAA,CAAA,CAAA,CAnDGH,CAAAA,CAAW,EAqDlB,CAEJ,CAAC,CAAA,CACH,CAAA,CAIFxZ,KAAC,KAAA,CAAA,CACC,UAAA,CAAY2W,EAAAA,CACZ,WAAA,CAAaC,EAAAA,CACb,MAAA,CAAQJ,EAAAA,CACR,SAAA,CAAWngB,EACT,0FAAA,CACA4d,CAAAA,CACK7R,CAAAA,CAAS,gCAAA,CAAmC,4BAAA,CAC5CA,CAAAA,CAAS,uCAAA,CAA0C,uCAAA,CACxD+R,IAAoB,gCACtB,CAAA,CAEA,QAAA,CAAA,CAAArV,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,QAAA,CAAQ,KACR,QAAA,CAAU4X,EAAAA,CACV,SAAA,CAAU,yDAAA,CACV,QAAA,CAAU,CAACrE,CAAAA,EAAuB8B,EAAAA,CACpC,EACCA,EAAAA,CACCnU,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+FAA+F,CAAA,CAC9GA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,cAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAEAtN,KAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC8a,MAAAA,CAAA,CAAO,SAAA,CAAWvjB,CAAAA,CACjB,uBACA4d,CAAAA,CAAiB,eAAA,CAAmB7R,CAAAA,CAAS,gBAAA,CAAmB,eAClE,CAAA,CAAG,CAAA,CACHtD,GAAAA,CAAC,KAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAA6R,EACI3G,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAA6B,iBAAA,CAC/CA,CAAAA,GAAW,IAAA,CACRtN,IAAAA,CAAA6G,QAAAA,CAAA,CAAE,QAAA,CAAA,CAAA,gCAAA,CAA2B/H,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,WAAA,CAAY,QAAA,CAAA,qBAAA,CAAmB,CAAA,CAAA,CAAO,CAAA,CACnFkB,KAAA6G,QAAAA,CAAA,CAAE,QAAA,CAAA,CAAA,0BAAA,CAAwB/H,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,WAAA,CAAY,QAAA,CAAA,iBAAA,CAAe,GAAO,CAAA,CAGtF,CAAA,CACC,CAACuT,CAAAA,EACAvT,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,eAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACzE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,sBAAA,CAAyB,uBAC9C,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAW3J,CAAAA,CACd,6BAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,4BAC5C,CAAA,CAEE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,OAAI,SAAA,CAAWzI,CAAAA,CACd,oBAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAApC,KAAC,IAAA,CAAA,CAAG,SAAA,CAAW3J,CAAAA,CACb,uBAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,UAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CAChCiF,CAAAA,CAAS,MAAA,CAAS,CAAA,EACjBvS,IAAAA,CAAC,QAAK,SAAA,CAAW3J,CAAAA,CAAG,0BAAA,CAA4B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CAC1FmQ,EAAS,MAAA,CAAO,GAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAGAzT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BACZ,QAAA,CAAAyT,CAAAA,CAAS,MAAA,CAAS,CAAA,CACjBzT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,SAAAyT,CAAAA,CAAS,GAAA,CAAKsH,CAAAA,EACb7Z,IAAAA,CAAC,KAAA,CAAA,CAAqB,SAAA,CAAU,YAAA,CAE9B,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB+a,CAAAA,CAAQ,IAAA,EAAM,OAAS,SAAU,CAAA,CAE1D,QAAA,CAAAA,CAAAA,CAAQ,IAAA,EAAM,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,EAAK,GAAA,CACpD,CAAA,CAEA7Z,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iBACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,qBAAA,CAAuB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAAyX,CAAAA,CAAQ,MAAM,IAAA,GAASvM,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,MAAA,CAAA,CACxD,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAqT,EAAAA,CAAkBoE,EAAQ,SAAS,CAAA,CACtC,CAAA,CAAA,CACF,CAAA,CACA/a,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,UAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAtD,GAAAA,CAACmQ,EAAAA,CAAA,CAAe,QAAS4K,CAAAA,CAAQ,OAAA,CAAS,KAAA,CAAOpa,CAAAA,CAAO,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CArBQoa,CAAAA,CAAQ,EAsBlB,CACD,CAAA,CACH,CAAA,CAGA7Z,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8DAAA,CACb,QAAA,CAAA,CAAAlB,IAACgb,aAAAA,CAAA,CAAc,SAAA,CAAWzjB,CAAAA,CACxB,gBAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,EAAG,CAAA,CACHtD,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CACZ,SAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CACG,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,wBAAA,CAA2B,oBAAA,CAChD,CAAA,CAAA,CACF,CAAA,CAEJ,EAGAxO,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,cAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,EACE,QAAA,CAAAtD,GAAAA,CAACmO,EAAAA,CAAA,CACC,MAAO0H,EAAAA,CACP,QAAA,CAAUC,CAAAA,CACV,QAAA,CAAUW,EACV,KAAA,CAAO9C,CAAAA,CACP,WAAA,CAAanF,CAAAA,GAAW,IAAA,CAAO,iDAAA,CAAoD,uCAAA,CACnF,QAAA,CAAU,CAACkF,CAAAA,CACX,YAAA,CAAcqC,EAAAA,CACd,KAAA,CAAOpV,CAAAA,CACP,MAAA,CAAQ6N,CAAAA,CACR,WAAA,CAAaC,EACf,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAEJ,CC/oDO,SAASwM,EAAAA,EAAmC,CACjD,GAAM,CAACC,CAAAA,CAAOC,CAAQ,EAAI7a,QAAAA,CAAoB,IAAM8a,SAAAA,CAAU,QAAA,EAAU,CAAA,CAExE3a,SAAAA,CAAU,IAEY2a,UAAU,SAAA,CAAWC,CAAAA,EAAa,CACpDF,CAAAA,CAASE,CAAQ,EACnB,CAAC,CAAA,CAGA,EAAE,CAAA,CAEL,IAAMC,CAAAA,CAAenM,WAAAA,CAAakM,CAAAA,EAAwB,CACxDD,SAAAA,CAAU,SAASC,CAAQ,EAC7B,CAAA,CAAG,EAAE,CAAA,CAEL,OAAO,CAACH,EAAOI,CAAY,CAC7B,CCnCO,SAASC,EAAAA,CAAY,CAC1B,KAAA,CAAAjgB,CAAAA,CACA,SAAA,CAAAkgB,EACA,WAAA,CAAAnQ,CAAAA,CACA,WAAA,CAAAoQ,CAAAA,CACA,MAAA,CAAAxY,CAAAA,CACA,cAAA,CAAA8B,CAAAA,CAAiB,EAAC,CAClB,SAAA,CAAAzD,CAAAA,CACA,KAAA,CAAAuH,CAAAA,CACA,SAAA,CAAA6S,CAAAA,CACA,KAAA,CAAAjjB,EACA,QAAA,CAAAqH,CAAAA,CACA,aAAA,CAAA2Q,CAAAA,CAAgB,EAAC,CACjB,WAAA,CAAAC,CAAAA,CACA,kBAAAiL,CAAAA,CACA,mBAAA,CAAApI,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CAEA,QAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,EACA,WAAA,CAAAjF,CAAAA,CACA,gBAAA,CAAAkF,CAAAA,CACA,UAAA,CAAAiI,CACF,CAAA,CAAsD,CACpD,GAAM,CAACC,CAAAA,CAAWP,CAAY,CAAA,CAAIL,EAAAA,EAAa,CAGzC,CAACa,CAAAA,CAAcC,CAAe,CAAA,CAAIzb,QAAAA,CAA0B,IAAI,CAAA,CAGhEP,CAAAA,CAAYkD,CAAAA,EAAQ,KAAA,EAAS,MAAA,CAC7BK,EAASvD,CAAAA,GAAc,MAAA,EAAUA,CAAAA,GAAc,SAAA,CAC/Cic,CAAAA,CAAa1Y,CAAAA,CAAS,MAAA,CAAS,EAAA,CAE/B2Y,EAAmB9M,WAAAA,CACvB,CAAC7I,CAAAA,CAAgB4V,CAAAA,GAA4C,CAC3DV,CAAAA,CAAU,YAAA,GAAelV,CAAAA,CAAQ4V,CAAO,EAC1C,CAAA,CACA,CAACV,CAAS,CACZ,CAAA,CAEMW,CAAAA,CAAqBhN,WAAAA,CACzB,CAACiN,CAAAA,CAAkB3R,CAAAA,GAAqB,CACtC+Q,CAAAA,CAAU,cAAA,GAAiBY,CAAAA,CAAU,CAAE,KAAA,CAAO3R,CAAS,CAAC,EAC1D,CAAA,CACA,CAAC+Q,CAAS,CACZ,CAAA,CAGMa,CAAAA,CAAqBlN,YACxBiN,CAAAA,EAAqB,CACpBZ,CAAAA,CAAU,cAAA,GAAiBY,CAAQ,EACrC,CAAA,CACA,CAACZ,CAAS,CACZ,CAAA,CAGMc,EAAAA,CAAqB,CAAC,MAAA,CAAQ,aAAA,CAAe,WAAW,CAAA,CAExDC,GAAUC,UAAAA,CACdC,SAAAA,CAAUC,aAAAA,CAAe,CACvB,oBAAA,CAAsB,CACpB,QAAA,CAAU,CACZ,CACF,CAAC,CAAA,CACDD,SAAAA,CAAUE,cAAAA,CAAgB,CACxB,gBAAA,CAAkBC,2BACpB,CAAC,CACH,CAAA,CAEMC,EAAAA,CAAgBC,OAAAA,CAAQ,IAAM,CAClC,IAAMC,CAAAA,CAAM,IAAI,IAEhB,OAAAzhB,CAAAA,CAAM,OAAA,CAAQ,OAAA,CAASO,CAAAA,EAAW,CAChC,IAAM1D,CAAAA,CAAc0D,EAAO,OAAA,CACxB,GAAA,CAAKyK,EAAAA,EAAWhL,CAAAA,CAAM,KAAA,CAAM,IAAA,CAAMM,EAAAA,EAASA,EAAAA,CAAK,KAAO0K,EAAM,CAAC,CAAA,CAC9D,MAAA,CAAQ1K,EAAAA,EAA2CA,EAAAA,GAAS,MAAS,CAAA,CACrE,KAAK,CAACmX,EAAAA,CAAGiK,EAAAA,GAAMjK,EAAAA,CAAE,SAAWiK,EAAAA,CAAE,QAAQ,CAAA,CAEzCD,CAAAA,CAAI,IAAIlhB,CAAAA,CAAO,EAAA,CAAI1D,CAAW,EAChC,CAAC,CAAA,CAEM4kB,CACT,CAAA,CAAG,CAACzhB,CAAAA,CAAM,KAAA,CAAOA,CAAAA,CAAM,OAAO,CAAC,CAAA,CAGzB2hB,EAAAA,CAAgCH,OAAAA,CAAQ,IACrCxhB,CAAAA,CAAM,KAAA,CAAM,GAAA,CAAIM,CAAAA,GAAS,CAC9B,EAAA,CAAIA,CAAAA,CAAK,EAAA,CACT,KAAMA,CAAAA,CAAK,KAAA,CACX,SAAA,CAAWA,CAAAA,CAAK,SAAA,CAAY,IAAI,IAAA,CAAKA,CAAAA,CAAK,SAAS,CAAA,CAAI,MAAA,CACvD,OAAA,CAASA,CAAAA,CAAK,OAAA,CAAU,IAAI,IAAA,CAAKA,CAAAA,CAAK,OAAO,CAAA,CAAI,MAAA,CACjD,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAY,CAAA,CAC3B,MAAA,CAAQA,CAAAA,CAAK,SACb,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAU,WAAA,EAAY,CACrC,YAAA,CAAc,KAAA,CAAM,OAAA,CAAQA,EAAK,YAAY,CAAA,CACzCA,CAAAA,CAAK,YAAA,CAAa,GAAA,CAAIoK,CAAAA,EAAK,OAAOA,CAAAA,EAAM,SAAWA,CAAAA,CAAIA,CAAAA,CAAE,MAAM,CAAA,CAC/D,EACN,CAAA,CAAE,CAAA,CACD,CAAC1K,CAAAA,CAAM,KAAK,CAAC,CAAA,CAEV4hB,EAAAA,CAAkB/N,WAAAA,CACrB5P,CAAAA,EAA0B,CACzB,GAAM,CAAE,MAAA,CAAA4d,CAAO,CAAA,CAAI5d,CAAAA,CACb3D,CAAAA,CAAON,CAAAA,CAAM,KAAA,CAAM,KAAM+e,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO8C,CAAAA,CAAO,EAAE,CAAA,CAEnDvhB,CAAAA,EACF0f,CAAAA,CAAa,CACX,UAAA,CAAY,IAAA,CACZ,aAAA,CAAe1f,CAAAA,CAAK,EAAA,CACpB,cAAA,CAAgBA,CAAAA,CAAK,QAAA,CACrB,eAAgBA,CAAAA,CAAK,QACvB,CAAC,EAEL,CAAA,CACA,CAACN,CAAAA,CAAM,KAAA,CAAOggB,CAAY,CAC5B,CAAA,CAEMzD,EAAAA,CAAiB1I,WAAAA,CACpB5P,CAAAA,EAAyB,CACxB,GAAM,CAAE,OAAA4d,CAAAA,CAAQ,IAAA,CAAAC,CAAK,CAAA,CAAI7d,CAAAA,CAIzB,GAHI,CAAC6d,CAAAA,EAGD,CADe9hB,CAAAA,CAAM,KAAA,CAAM,IAAA,CAAM+e,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO8C,CAAAA,CAAO,EAAE,EAC5C,OAEjB,IAAIE,EAAAA,CAAgC,IAAA,CAEhCD,CAAAA,CAAK,IAAA,CAAK,OAAA,EAAS,IAAA,GAAS,SAC9BC,EAAAA,CAAiBD,CAAAA,CAAK,EAAA,CACbA,CAAAA,CAAK,IAAA,CAAK,OAAA,EAAS,IAAA,GAAS,MAAA,GAErCC,GADiB/hB,CAAAA,CAAM,KAAA,CAAM,IAAA,CAAM+e,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO+C,CAAAA,CAAK,EAAE,GAC9B,QAAA,EAAY,IAAA,CAAA,CAGrCC,EAAAA,EAAkBA,EAAAA,GAAmBxB,CAAAA,CAAU,cAAA,EACjDP,CAAAA,CAAa,CACX,GAAGO,CAAAA,CACH,cAAA,CAAAwB,EACF,CAAC,EAEL,CAAA,CACA,CAAC/hB,CAAAA,CAAM,MAAOugB,CAAAA,CAAWP,CAAY,CACvC,CAAA,CAEMgC,CAAAA,CAAgBnO,WAAAA,CACpB,MAAO5P,CAAAA,EAAwB,CAC7B,GAAM,CAAE,MAAA,CAAA4d,CAAAA,CAAQ,IAAA,CAAAC,CAAK,CAAA,CAAI7d,CAAAA,CASzB,GAPA+b,CAAAA,CAAa,CACX,UAAA,CAAY,KAAA,CACZ,aAAA,CAAe,IAAA,CACf,cAAA,CAAgB,IAAA,CAChB,eAAgB,IAClB,CAAC,CAAA,CAEG,CAAC8B,CAAAA,CAAM,OAEX,IAAMG,EAAAA,CAAajiB,EAAM,KAAA,CAAM,IAAA,CAAM+e,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO8C,CAAAA,CAAO,EAAE,CAAA,CAC7D,GAAI,CAACI,EAAAA,CAAY,OAEjB,IAAIF,EAAAA,CACAG,EAAAA,CAEJ,GAAIJ,CAAAA,CAAK,KAAK,OAAA,EAAS,IAAA,GAAS,QAAA,CAAU,CACxCC,EAAAA,CAAiBD,CAAAA,CAAK,EAAA,CACtB,IAAMK,GAAoBZ,EAAAA,CAAc,GAAA,CAAIQ,EAAc,CAAA,EAAK,EAAC,CAChEG,EAAAA,CAAiBtlB,EAAAA,CAAsBulB,GAAmB,CAAC,EAC7D,CAAA,KAAO,CACL,IAAMC,EAAAA,CAAWpiB,CAAAA,CAAM,KAAA,CAAM,KAAM+e,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO+C,CAAAA,CAAK,EAAE,CAAA,CACzD,GAAI,CAACM,EAAAA,CAAU,OAEfL,EAAAA,CAAiBK,EAAAA,CAAS,QAAA,CAC1B,IAAMD,EAAAA,CAAoBZ,EAAAA,CAAc,GAAA,CAAIQ,EAAc,GAAK,EAAC,CAC1DM,EAAAA,CAAYF,EAAAA,CAAkB,SAAA,CAAWpD,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO+C,EAAK,EAAE,CAAA,CAErEI,EAAAA,CAAiBtlB,EAAAA,CAAsBulB,EAAAA,CAAmBE,EAAS,EACrE,CAEA,IAAMC,EAAAA,CAAetiB,CAAAA,CAAM,OAAA,CAAQ,IAAA,CAAMQ,EAAAA,EAAQA,EAAAA,CAAI,EAAA,GAAOuhB,EAAc,EAC1E,GAAIO,EAAAA,EAAgBA,EAAAA,CAAa,QAAA,EAAYA,EAAAA,CAAa,YAAA,GAAiB,MAAA,CAAQ,CACjF,IAAMH,EAAAA,CAAoBZ,EAAAA,CAAc,GAAA,CAAIQ,EAAc,CAAA,EAAK,EAAC,CAEhE,GAAIE,GAAW,QAAA,GAAaF,EAAAA,EACtBI,EAAAA,CAAkB,MAAA,EAAUG,EAAAA,CAAa,QAAA,CAAU,CACrDpC,CAAAA,CAAU,qBAAqBoC,EAAAA,CAAcL,EAAU,CAAA,CACvD,MACF,CAEJ,CAAA,CAGEA,EAAAA,CAAW,QAAA,GAAaF,IACxBE,EAAAA,CAAW,QAAA,GAAaC,EAAAA,GAExB,MAAMhC,CAAAA,CAAU,UAAA,GAAa+B,EAAAA,CAAW,EAAA,CAAIF,GAAgBG,EAAc,EAE9E,CAAA,CACA,CAACliB,CAAAA,CAAM,KAAA,CAAOA,CAAAA,CAAM,OAAA,CAASuhB,GAAerB,CAAAA,CAAWF,CAAY,CACrE,CAAA,CAIMuC,CAAAA,CAAkB1O,WAAAA,CACrBvT,CAAAA,EAAgC,CAC/BmgB,EAAgBngB,CAAI,CAAA,CACpByP,CAAAA,GAAczP,CAAI,CAAA,CAClBggB,CAAAA,GAAahgB,CAAAA,CAAK,EAAE,EACtB,CAAA,CACA,CAACyP,CAAAA,CAAauQ,CAAU,CAC1B,CAAA,CAGMkC,CAAAA,CAAwB3O,WAAAA,CAC3B4O,GAA0B,CACzBvC,CAAAA,CAAU,YAAA,GAAeuC,CAAAA,CAAY,EAAA,CAAIA,CAAW,CAAA,CACpDhC,CAAAA,CAAgBgC,CAAW,EAC7B,CAAA,CACA,CAACvC,CAAS,CACZ,CAAA,CAEA,OAAIE,CAAAA,CAEA1b,IAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgBykB,CAAAA,CAAY1a,CAAS,CAAA,CAAG,KAAA,CAAOuH,EAChE,QAAA,CAAA7I,GAAAA,CAACge,EAAAA,CAAA,CAAgB,WAAA,CAAa,CAAA,CAAG,CAAA,CACnC,CAAA,CAIAvlB,EAEAuH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgBykB,CAAAA,CAAY1a,CAAS,CAAA,CAAG,MAAOuH,CAAAA,CAChE,QAAA,CAAA7I,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8CAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,OAAI,SAAA,CAAU,aAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,mDAAA,CAAoD,QAAA,CAAA,qBAAA,CAEjE,EACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,oCAAA,CACV,QAAA,CAAA,OAAOvH,CAAAA,EAAU,QAAA,CAAWA,CAAAA,CAAQA,EAAM,OAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CAKFyI,IAAAA,CAACrB,EAAAA,CAAA,CAAoB,UAAWE,CAAAA,CAC9B,QAAA,CAAA,CAAAmB,IAAAA,CAAC+c,UAAAA,CAAA,CACC,OAAA,CAAS1B,EAAAA,CACT,kBAAA,CAAoB2B,eACpB,WAAA,CAAahB,EAAAA,CACb,UAAA,CAAYrF,EAAAA,CACZ,SAAA,CAAWyF,CAAAA,CAEX,QAAA,CAAA,CAAApc,IAAAA,CAAC,OAAI,SAAA,CAAW3J,CAAAA,CAAG,cAAA,CAAgBykB,CAAAA,CAAY1a,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CAAO,aAAY9I,CAAAA,CAClF,QAAA,CAAA,CAAAzE,CAAAA,CAAM,OAAA,CACJ,IAAA,CAAK,CAACyX,CAAAA,CAAGiK,CAAAA,GAAMjK,EAAE,QAAA,CAAWiK,CAAAA,CAAE,QAAQ,CAAA,CACtC,GAAA,CAAKnhB,CAAAA,EAAW,CACf,IAAMwC,EAAQwe,EAAAA,CAAc,GAAA,CAAIhhB,CAAAA,CAAO,EAAE,CAAA,EAAK,EAAC,CAGzCyO,CAAAA,CAAc,CAACgS,EAAAA,CAAmB,QAAA,CAASzgB,CAAAA,CAAO,EAAE,CAAA,CAE1D,OACEmE,GAAAA,CAACgL,EAAAA,CAAA,CAEC,MAAA,CAAQnP,CAAAA,CACR,KAAA,CAAOwC,CAAAA,CACP,UAAA,CAAYod,CAAAA,EAAa,UAAA,CACzB,YAAA,CAAcA,GAAa,YAAA,CAC3B,YAAA,CAAcA,CAAAA,EAAa,kBAAA,CAC3B,gBAAA,CAAkBA,CAAAA,EAAa,gBAAA,CAC/B,WAAA,CAAaoC,EACb,YAAA,CAAc5B,CAAAA,CACd,cAAA,CAAgBE,CAAAA,CAChB,eAAgBE,CAAAA,CAChB,WAAA,CAAa/R,CAAAA,CACb,cAAA,CAAgBvF,EAChB,QAAA,CAAUzJ,CAAAA,CAAM,KAAA,CAChB,oBAAA,CAAsB2H,CAAAA,EAAQ,oBAAA,CAC9B,UAAA,CAAYA,CAAAA,EAAQ,YAffpH,CAAAA,CAAO,EAgBd,CAEJ,CAAC,CAAA,CACFiE,CAAAA,CAAAA,CACH,CAAA,CAEAE,GAAAA,CAACme,YAAA,CACE,QAAA,CAAAtC,CAAAA,CAAU,aAAA,CACT7b,GAAAA,CAACgI,EAAAA,CAAA,CACC,IAAA,CACE1M,EAAM,KAAA,CAAM,IAAA,CAAM+e,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOwB,CAAAA,CAAU,aAAa,CAAA,CAE1D,OAAQJ,CAAAA,EAAa,iBAAA,EAAqBA,CAAAA,EAAa,UAAA,CACvD,WAAA,CAAW,IAAA,CACX,SAAA,CAAU,gCAAA,CACZ,EACE,IAAA,CACN,CAAA,CAAA,CACF,CAAA,CAIAzb,GAAAA,CAACmT,EAAAA,CAAA,CACC,IAAA,CAAM2I,CAAAA,CACN,OAAQ,CAAC,CAACA,CAAAA,CACV,OAAA,CAAS,IAAMC,CAAAA,CAAgB,IAAI,CAAA,CACnC,aAAc+B,CAAAA,CACd,KAAA,CAAOxa,CAAAA,CAAS,MAAA,CAAS,OAAA,CACzB,MAAA,CAAQL,CAAAA,EAAQ,MAAA,GAAW,KAAO,IAAA,CAAO,IAAA,CACzC,cAAA,CAAgB8B,CAAAA,CAChB,aAAA,CAAe0L,CAAAA,CACf,WAAA,CAAaC,CAAAA,CACb,YAAaoL,CAAAA,CAAeH,CAAAA,EAAmB,GAAA,CAAIG,CAAAA,CAAa,EAAE,CAAA,EAAK,EAAC,CAAI,EAAC,CAC7E,mBAAA,CAAqBvI,CAAAA,CACrB,kBAAA,CAAoBC,CAAAA,CACpB,cAAA,CAAgByJ,EAAAA,CAChB,QAAA,CAAUxJ,EACV,YAAA,CAAcC,CAAAA,CACd,WAAA,CAAajF,CAAAA,CACb,gBAAA,CAAkBkF,CAAAA,CACpB,CAAA,CAAA,CACF,CAEJ,CAEA,SAASqK,EAAAA,CAAgB,CAAE,WAAA,CAAAI,CAAY,CAAA,CAA4B,CACjE,OACEpe,IAAA+H,QAAAA,CAAA,CACG,QAAA,CAAA,KAAA,CAAM,IAAA,CAAK,CAAE,MAAA,CAAQqW,CAAY,CAAC,EAAE,GAAA,CAAI,CAACpmB,CAAAA,CAAGC,CAAAA,GAC3CiJ,IAAAA,CAAC,KAAA,CAAA,CAAY,SAAA,CAAU,eAAA,CACrB,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CAA2B,CAAA,CAC1CkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,CAAA,CACtCA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CAAuB,CAAA,CACtCA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,CAAA,CAAA,CACxC,CAAA,CAAA,CAAA,CANQ/H,CAOV,CACD,CAAA,CACH,CAEJ,CCvVA,IAAMomB,EAAAA,CAAgC,CACpC,MAAA,CAAQ,UACR,WAAA,CAAa,SAAA,CACb,MAAA,CAAQ,0BAAA,CACR,WAAA,CAAa,2BAAA,CACb,WAAA,CAAa,SAAA,CACb,cAAe,SAAA,CACf,YAAA,CAAc,SAAA,CACd,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,0BAAA,CACb,OAAA,CAAS,2BACX,CAAA,CAEMC,EAAAA,CAAiC,CACrC,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,MAAA,CAAQ,qBACR,WAAA,CAAa,qBAAA,CACb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,YAAA,CAAc,SAAA,CACd,OAAQ,SAAA,CACR,WAAA,CAAa,yBAAA,CACb,OAAA,CAAS,qBACX,CAAA,CAYMC,EAAAA,CAAiC,CACrC,QAAS,aAAA,CACT,YAAA,CAAc,qBAAA,CACd,MAAA,CAAQ,UAAA,CACR,SAAA,CAAW,KAAA,CACX,UAAA,CAAY,OACZ,WAAA,CAAa,OACf,CAAA,CAEMC,EAAAA,CAAiC,CACrC,OAAA,CAAS,UAAA,CACT,YAAA,CAAc,gBACd,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,KAAA,CACX,UAAA,CAAY,MAAA,CACZ,WAAA,CAAa,OACf,EAoCA,SAASC,EAAAA,CAAe,CAAE,OAAA,CAAAC,EAAS,QAAA,CAAAC,CAAAA,CAAU,KAAA,CAAAhe,CAAAA,CAAO,EAAA2G,CAAAA,CAAG,eAAA,CAAAsX,CAAgB,CAAA,CAAwB,CAC7F,GAAM,CAACrd,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC2O,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,CAAA,CAG/CnB,UAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAC5C0P,CAAAA,CAAY,OAAA,EAAW,CAACA,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAAS1P,CAAAA,CAAM,MAAc,CAAA,EAC3EiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMqB,CAAAA,CAAgBwZ,CAAAA,EAAqB,CACzCuC,CAAAA,CAASvC,CAAQ,CAAA,CACjB5a,EAAU,KAAK,EACjB,CAAA,CAEA,OACEN,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+N,CAAAA,CAAa,UAAU,UAAA,CAC/B,QAAA,CAAA,CAAA/N,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM1O,EAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,uEAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,oDACZ,KAAA,CAAO,SAAA,CACP,UAAA,CAAY,mBAAA,CACZ,UAAA,CAAY,GAAA,CACZ,SAAA,CAAW,mCACb,EACA,UAAA,CAAY,CACV,KAAA,CAAO,IAAA,CACP,SAAA,CAAW,oCACb,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAAvB,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,cAAc,CAAA,CAC9BlS,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA4e,CAAAA,EAAmBtX,CAAAA,CAAE,OAAA,CAAQ,CAAA,CACpCtH,IAAC+R,WAAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CAAE,SAAA,CAAWxQ,CAAAA,CAAS,iBAAmB,cAAe,CAAA,CACjE,CAAA,CAAA,CACF,CAAA,CAEAvB,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,GACCvB,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CAC1C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CACvC,UAAA,CAAY,CAAE,QAAA,CAAU,GAAA,CAAM,KAAM,SAAU,CAAA,CAC9C,SAAA,CAAU,4DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,YACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,iCACb,CAAA,CAEA,SAAAO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,iDACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAElC,QAAA,CAAA2G,CAAAA,CAAE,aACL,CAAA,CACCoX,CAAAA,CACE,IAAA,CAAK,CAAC3L,CAAAA,CAAGiK,CAAAA,GAAMjK,CAAAA,CAAE,QAAA,CAAWiK,EAAE,QAAQ,CAAA,CACtC,GAAA,CAAI,CAACnhB,CAAAA,CAAQ8C,CAAAA,GACZuC,IAAAA,CAACgP,MAAAA,CAAO,OAAP,CAEC,OAAA,CAAS,IAAMtN,CAAAA,CAAa/G,CAAAA,CAAO,EAAE,CAAA,CACrC,SAAA,CAAU,sEACV,KAAA,CAAO,CACL,eAAA,CAAiB,aAAA,CACjB,YAAA,CAAc8C,CAAAA,CAAQ+f,CAAAA,CAAQ,MAAA,CAAS,EAAI,CAAA,UAAA,EAAa/d,CAAAA,CAAM,WAAW,CAAA,CAAA,CAAK,MAChF,CAAA,CACA,UAAA,CAAY,CACV,gBAAiBA,CAAAA,CAAM,OACzB,CAAA,CACA,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,WAAY,CAAE,KAAA,CAAOhC,CAAAA,CAAQ,GAAK,EAGlC,QAAA,CAAA,CAAAqB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uBACV,KAAA,CAAO,CACL,eAAA,CAAiBnE,CAAAA,CAAO,KAAA,EAAS8E,CAAAA,CAAM,MACzC,CAAA,CACF,EACAO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,+BACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,CAAA,CAEjC,QAAA,CAAA9E,CAAAA,CAAO,MACV,CAAA,CACAqF,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOP,EAAM,YAAa,CAAA,CAElC,QAAA,CAAA,CAAA9E,CAAAA,CAAO,OAAA,CAAQ,MAAA,CAAO,GAAA,CAAEA,CAAAA,CAAO,QAAQ,MAAA,GAAW,CAAA,CAAI,OAAA,CAAU,QAAA,CAAA,CACnE,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAlCKA,CAAAA,CAAO,EAmCd,CACD,CAAA,CAAA,CACL,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CAWA,SAASgjB,EAAAA,CAAe,CAAE,KAAA,CAAAle,CAAAA,CAAO,CAAA,CAAG,WAAA,CAAAme,CAAAA,CAAa,YAAA,CAAAC,CAAAA,CAAc,aAAA,CAAAC,CAAc,CAAA,CAAwB,CACnG,GAAM,CAACzd,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAAC2e,CAAAA,CAAaC,CAAc,CAAA,CAAI5e,QAAAA,CAAwB,IAAI,CAAA,CAC5D2O,EAAcrN,MAAAA,CAAuB,IAAI,CAAA,CAkB/C,GAfAnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,EAAsBlD,CAAAA,EAAsB,CAC5C0P,CAAAA,CAAY,OAAA,EAAW,CAACA,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAAS1P,EAAM,MAAc,CAAA,EAC3EiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,CAAAA,EACF,SAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAIP,EAFiBud,CAAAA,EAAeC,GAAgBC,CAAAA,CAAAA,CAEjC,OAAO,IAAA,CAE1B,IAAMG,CAAAA,CAAgB,CACpB,CACE,EAAA,CAAI,MACJ,KAAA,CAAO,CAAA,CAAE,SAAA,CACT,WAAA,CAAa,iBAAA,CACb,IAAA,CAAMnf,GAAAA,CAACua,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,OAAA,CAASuE,CACX,CAAA,CACA,CACE,EAAA,CAAI,OACJ,KAAA,CAAO,CAAA,CAAE,UAAA,CACT,WAAA,CAAa,MAAA,CACb,IAAA,CAAM9e,GAAAA,CAACof,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,OAAA,CAASL,CACX,CAAA,CACA,CACE,EAAA,CAAI,QACJ,KAAA,CAAO,CAAA,CAAE,WAAA,CACT,WAAA,CAAa,aAAA,CACb,IAAA,CAAM/e,GAAAA,CAACqf,eAAAA,CAAA,CAAgB,SAAA,CAAU,SAAA,CAAU,CAAA,CAC3C,OAAA,CAASL,CACX,CACF,CAAA,CAAE,MAAA,CAAOM,GAAOA,CAAAA,CAAI,OAAO,CAAA,CAErBC,CAAAA,CAAe,MAAO/X,CAAAA,CAAYgY,CAAAA,GAAsD,CAC5F,GAAKA,CAAAA,CAEL,CAAAN,CAAAA,CAAe1X,CAAE,CAAA,CACjB,GAAI,CACF,MAAMgY,IACR,CAAA,MAAS/mB,CAAAA,CAAO,CACd,OAAA,CAAQ,KAAA,CAAM,CAAA,OAAA,EAAU+O,CAAE,WAAY/O,CAAK,EAC7C,CAAA,OAAE,CACAymB,CAAAA,CAAe,IAAI,CAAA,CACnB1d,CAAAA,CAAU,KAAK,EACjB,CAAA,CACF,CAAA,CAEA,OACEN,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+N,CAAAA,CAAa,UAAU,UAAA,CAC/B,QAAA,CAAA,CAAA/N,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM1O,EAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,uEAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBA,EAASZ,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,WAAA,CAC/C,MAAA,CAAQ,CAAA,UAAA,EAAaY,CAAAA,CAASZ,CAAAA,CAAM,OAASA,CAAAA,CAAM,WAAW,CAAA,CAAA,CAC9D,KAAA,CAAOY,CAAAA,CAAS,SAAA,CAAYZ,CAAAA,CAAM,aAAA,CAClC,WAAY,mBAAA,CACZ,UAAA,CAAY,GACd,CAAA,CACA,WAAY,CACV,KAAA,CAAO,IAAA,CACP,eAAA,CAAiBA,EAAM,MAAA,CACvB,KAAA,CAAO,SACT,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,EAExB,QAAA,CAAA,CAAAX,GAAAA,CAACyf,QAAAA,CAAA,CAAS,SAAA,CAAU,aAAA,CAAc,CAAA,CAClCzf,GAAAA,CAAC,QAAM,QAAA,CAAA,CAAA,CAAE,MAAA,CAAO,CAAA,CAChBA,GAAAA,CAAC+R,WAAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,MAAO,CAAE,SAAA,CAAWxQ,CAAAA,CAAS,gBAAA,CAAmB,cAAe,CAAA,CACjE,CAAA,CAAA,CACF,CAAA,CAEAvB,IAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCvB,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CAC1C,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CACtC,KAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CACvC,WAAY,CAAE,QAAA,CAAU,GAAA,CAAM,IAAA,CAAM,SAAU,CAAA,CAC9C,SAAA,CAAU,4DAAA,CACV,MAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,WAAA,CACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,GACjC,SAAA,CAAW,iCACb,CAAA,CAEA,QAAA,CAAAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACZ,SAAAmf,CAAAA,CAAc,GAAA,CAAI,CAACva,CAAAA,CAAQjG,CAAAA,GAC1BuC,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CAEC,OAAA,CAAS,IAAMqP,CAAAA,CAAa3a,CAAAA,CAAO,EAAA,CAAIA,CAAAA,CAAO,OAAO,CAAA,CACrD,SAAUqa,CAAAA,GAAgB,IAAA,CAC1B,SAAA,CAAU,qEAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiB,aAAA,CACjB,aAActgB,CAAAA,CAAQwgB,CAAAA,CAAc,MAAA,CAAS,CAAA,CAAI,CAAA,UAAA,EAAaxe,CAAAA,CAAM,WAAW,CAAA,CAAA,CAAK,MACtF,CAAA,CACA,UAAA,CAAY,CACV,eAAA,CAAiBA,CAAAA,CAAM,OACzB,CAAA,CACA,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,UAAA,CAAY,CAAE,KAAA,CAAOhC,CAAAA,CAAQ,GAAK,EAElC,QAAA,CAAA,CAAAqB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,qDAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBW,EAAM,WAAA,CACvB,KAAA,CAAOA,CAAAA,CAAM,MACf,CAAA,CAEC,QAAA,CAAAse,CAAAA,GAAgBra,CAAAA,CAAO,GACtB5E,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,MAAA,CAAQ,GAAI,EACvB,UAAA,CAAY,CAAE,QAAA,CAAU,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAA,CAAA,CAAU,IAAA,CAAM,QAAS,EAE5D,QAAA,CAAAlQ,GAAAA,CAACyf,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CAChC,CAAA,CAEA7a,EAAO,IAAA,CAEX,CAAA,CACA1D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,CAAA,CAEjC,SAAAiE,CAAAA,CAAO,KAAA,CACV,CAAA,CACA5E,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAElC,QAAA,CAAAiE,CAAAA,CAAO,WAAA,CACV,CAAA,CAAA,CACF,IA9CKA,CAAAA,CAAO,EA+Cd,CACD,CAAA,CACH,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CAQA,SAAS8a,EAAAA,CAAmB,CAAE,OAAA,CAAAvX,CAAAA,CAAS,KAAA,CAAAgB,CAAM,CAAA,CAA4B,CACvE,OACEjI,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS/H,CAAAA,CACT,SAAA,CAAU,wEACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,SAAA,CACP,UAAA,CAAY,mBAAA,CACZ,WAAY,GAAA,CACZ,SAAA,CAAW,mCACb,CAAA,CACA,WAAY,CACV,KAAA,CAAO,IAAA,CACP,SAAA,CAAW,oCACb,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAAnI,GAAAA,CAACkS,KAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAC9BlS,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAmJ,CAAAA,CAAM,GACf,CAEJ,CAEO,SAASwW,EAAAA,CAAc,CAC5B,OAAA,CAAAjB,CAAAA,CACA,YAAA,CAAAkB,EACA,eAAA,CAAAhB,CAAAA,CACA,KAAA,CAAAje,CAAAA,CAAQ,MAAA,CACR,MAAA,CAAA6N,CAAAA,CAAS,IAAA,CACT,kBAAAqR,CAAAA,CAAoB,KAAA,CACpB,WAAA,CAAAf,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,aAAAc,CACF,CAAA,CAAuB,CACrB,IAAMlf,CAAAA,CAAcD,CAAAA,GAAU,MAAA,CAAS0d,EAAAA,CAAYC,GAC7ChX,CAAAA,CAAuB,CAC3B,GAAIkH,CAAAA,GAAW,IAAA,CAAO+P,EAAAA,CAAcC,EAAAA,CACpC,GAAGsB,CACL,CAAA,CAEMC,CAAAA,CAAYjB,CAAAA,EAAeC,CAAAA,EAAgBC,CAAAA,CAIjD,OACEhf,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,oEAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBY,CAAAA,CAAY,MAAA,CAC7B,WAAA,CAAaA,CAAAA,CAAY,MAC3B,CAAA,CAGA,QAAA,CAAAM,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACZ,QAAA,CAAA,CAAA6e,CAAAA,EACC7e,KAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC6e,EAAAA,CAAA,CACC,KAAA,CAAOje,CAAAA,CACP,EAAG0G,CAAAA,CACH,WAAA,CAAawX,CAAAA,CACb,YAAA,CAAcC,CAAAA,CACd,aAAA,CAAeC,CAAAA,CACjB,CAAA,CACCY,GACC5f,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,UAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBY,CAAAA,CAAY,WAAY,CAAA,CACpD,CAAA,CAAA,CAEJ,CAAA,CAGDgf,CAAAA,GACCC,CAAAA,CACE7f,GAAAA,CAACye,EAAAA,CAAA,CACC,QAASC,CAAAA,CACT,QAAA,CAAUkB,CAAAA,CACV,KAAA,CAAOhf,CAAAA,CACP,CAAA,CAAG0G,CAAAA,CACH,eAAA,CAAiBsX,EACnB,CAAA,CAEA5e,GAAAA,CAAC0f,EAAAA,CAAA,CACC,OAAA,CAAS,IAAME,CAAAA,EAAa,CAC5B,MAAOhB,CAAAA,EAAmBtX,CAAAA,CAAE,OAAA,CAC9B,CAAA,CAAA,CAAA,CAGN,CAAA,CACF,CAEJ,CC1cO,SAAS0Y,EAAAA,CAAgB,CAC9B,WAAA,CAAAC,CAAAA,CACA,SAAA,CAAA3e,CAAAA,CACA,WAAA,CAAA+M,EAAc,yBAAA,CACd,WAAA,CAAA6R,CAAAA,CAAc,iBAAA,CACd,QAAA,CAAA5R,CAAAA,CAAW,KACb,CAAA,CAAyB,CACvB,GAAM,CAACzB,CAAAA,CAAWC,CAAY,CAAA,CAAIxM,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAACqM,CAAAA,CAAOwT,CAAQ,CAAA,CAAI7f,QAAAA,CAAS,EAAE,CAAA,CAE/B8f,CAAAA,CAAejR,WAAAA,CAAY,IAAM,CACrC,IAAMrE,CAAAA,CAAe6B,CAAAA,CAAM,IAAA,EAAK,CAC5B7B,CAAAA,GACFmV,CAAAA,CAAYnV,CAAY,CAAA,CACxBqV,CAAAA,CAAS,EAAE,CAAA,CACXrT,CAAAA,CAAa,KAAK,CAAA,EAEtB,CAAA,CAAG,CAACH,CAAAA,CAAOsT,CAAW,CAAC,CAAA,CAEjB9S,CAAAA,CAAgBgC,WAAAA,CACnBxM,CAAAA,EAA6C,CACxCA,EAAE,GAAA,GAAQ,OAAA,EACZA,CAAAA,CAAE,cAAA,EAAe,CACjByd,CAAAA,EAAa,EACJzd,CAAAA,CAAE,MAAQ,QAAA,GACnBwd,CAAAA,CAAS,EAAE,CAAA,CACXrT,CAAAA,CAAa,KAAK,CAAA,EAEtB,CAAA,CACA,CAACsT,CAAY,CACf,CAAA,CAEMC,CAAAA,CAAalR,WAAAA,CAAY,IAAM,CAEnC,UAAA,CAAW,IAAM,CACVxC,CAAAA,CAAM,IAAA,EAAK,EACdG,CAAAA,CAAa,KAAK,EAEtB,CAAA,CAAG,GAAG,EACR,CAAA,CAAG,CAACH,CAAK,CAAC,CAAA,CAEV,OAAIE,CAAAA,CAEA7M,IAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,8CAAA,CACA+J,CACF,CAAA,CAEA,QAAA,CAAAJ,IAAAA,CAAC,OAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAO2M,CAAAA,CACP,SAAWhK,CAAAA,EAAMwd,CAAAA,CAASxd,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACxC,SAAA,CAAWwK,CAAAA,CACX,OAAQkT,CAAAA,CACR,WAAA,CAAahS,CAAAA,CACb,SAAA,CAAS,IAAA,CACT,SAAA,CAAU,0BAAA,CACZ,CAAA,CACAnN,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASogB,CAAAA,CACT,SAAU,CAACzT,CAAAA,CAAM,IAAA,EAAK,CACtB,SAAA,CAAU,2BAAA,CACV,IAAA,CAAK,QAAA,CAEL,SAAA3M,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,QAEf,QAAA,CAAAA,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CACpC,CAAA,CACF,CAAA,CACAA,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbmgB,CAAAA,CAAS,EAAE,CAAA,CACXrT,CAAAA,CAAa,KAAK,EACpB,CAAA,CACA,SAAA,CAAU,2BAAA,CACV,IAAA,CAAK,QAAA,CAEL,QAAA,CAAA5L,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CAEf,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,CAAA,CACpCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKFA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+J,CAAS,CAAA,CAC/C,QAAA,CAAAJ,IAAAA,CAAC,UACC,OAAA,CAAS,IAAM4L,CAAAA,CAAa,IAAI,CAAA,CAChC,QAAA,CAAUwB,CAAAA,CACV,SAAA,CAAU,4BACV,IAAA,CAAK,QAAA,CAEL,QAAA,CAAA,CAAApN,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,cAAc,OAAA,CACd,cAAA,CAAe,OAAA,CAEf,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACvC,EACCkgB,CAAAA,CAAAA,CACH,CAAA,CACF,CAEJ,CC9GO,SAASI,EAAAA,CAAc,CAC5B,QAAA,CAAAlE,CAAAA,CACA,SAAA,CAAAmE,EACA,cAAA,CAAAxb,CAAAA,CAAiB,EAAC,CAClB,SAAA,CAAAzD,CAAAA,CACA,WAAA,CAAA+M,CAAAA,CACA,YAAA6R,CAAAA,CACA,QAAA,CAAA5R,CAAAA,CAAW,KAAA,CACX,KAAA,CAAA3N,CAAAA,CAAQ,MAAA,CACR,MAAA,CAAA6N,EAAS,IACX,CAAA,CAAuB,CACrB,GAAM,CAACgS,CAAAA,CAAYC,CAAa,CAAA,CAAIngB,SAAS,KAAK,CAAA,CAC5C,CAACiO,CAAAA,CAAcmS,CAAe,CAAA,CAAIpgB,QAAAA,CAAS,KAAK,EAChD,CAAC2N,CAAAA,CAAM0S,CAAO,CAAA,CAAIrgB,QAAAA,CAAS,EAAE,CAAA,CAC7B,CAACsgB,EAAmBC,CAAoB,CAAA,CAAIvgB,QAAAA,CAAmB,EAAE,CAAA,CACjE,CAAC8C,CAAAA,CAAW0d,CAAY,CAAA,CAAIxgB,QAAAA,CAAiB,EAAE,CAAA,CAC/C,CAAC+C,CAAAA,CAAS0d,CAAU,CAAA,CAAIzgB,SAAiB,EAAE,CAAA,CAC3C,CAACc,CAAAA,CAAU4f,CAAW,CAAA,CAAI1gB,QAAAA,CAAoD,EAAE,CAAA,CAChF,CAAC2gB,CAAAA,CAAeC,CAAgB,CAAA,CAAI5gB,QAAAA,CAAS,KAAK,CAAA,CAClD,CAAC6gB,CAAAA,CAAWC,CAAY,CAAA,CAAI9gB,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAAC+gB,CAAAA,CAAcC,CAAe,CAAA,CAAIhhB,SAAS,KAAK,CAAA,CAEhDqK,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,CAAA,CACxC2f,CAAAA,CAAU3f,MAAAA,CAAuB,IAAI,CAAA,CAGrC0F,EAAAA,CAAI,CACR,WAAA,CAAa+G,CAAAA,GAAgBG,CAAAA,GAAW,IAAA,CAAO,uBAAA,CAA0B,gBACzE,WAAA,CAAa0R,CAAAA,GAAgB1R,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,UAAA,CAAA,CACjE,IAAA,CAAMA,CAAAA,GAAW,KAAO,SAAA,CAAY,MAAA,CACpC,WAAA,CAAaA,CAAAA,GAAW,IAAA,CAAO,kBAAA,CAAqB,cAAA,CACpD,QAAA,CAAUA,IAAW,IAAA,CAAO,gBAAA,CAAmB,WAAA,CAC/C,WAAA,CAAaA,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAsB,cAAA,CACrD,UAAWA,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,OAAA,CACxC,OAAA,CAASA,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,MACnC,GAAA,CAAKA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,KAAA,CAChC,MAAA,CAAQA,CAAAA,GAAW,IAAA,CAAO,QAAU,QAAA,CACpC,IAAA,CAAMA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CACjC,MAAA,CAAQA,CAAAA,GAAW,KAAO,SAAA,CAAY,QACxC,CAAA,CAGMgT,EAAAA,CAAerS,WAAAA,CAAY,IAAM,CACrCwR,CAAAA,CAAQ,EAAE,CAAA,CACVE,CAAAA,CAAqB,EAAE,CAAA,CACvBC,CAAAA,CAAa,EAAE,CAAA,CACfC,EAAW,EAAE,CAAA,CACbC,CAAAA,CAAY,EAAE,CAAA,CACdE,CAAAA,CAAiB,KAAK,CAAA,CACtBE,EAAa,KAAK,CAAA,CAClBE,CAAAA,CAAgB,KAAK,CAAA,CACrBb,CAAAA,CAAc,KAAK,EACrB,EAAG,EAAE,CAAA,CAGLhgB,SAAAA,CAAU,IAAM,CACV+f,CAAAA,EAAc7V,CAAAA,CAAS,SACzBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,GAErB,CAAA,CAAG,CAAC6V,CAAU,CAAC,EAGf/f,SAAAA,CAAU,IAAM,CACd,GAAI,CAAC+f,CAAAA,CAAY,OAEjB,IAAM/d,EAAsBE,CAAAA,EAAkB,CACxC4e,CAAAA,CAAQ,OAAA,EAAW,CAACA,CAAAA,CAAQ,OAAA,CAAQ,QAAA,CAAS5e,EAAE,MAAc,CAAA,GAC1DsL,CAAAA,CAAK,IAAA,EAAK,EACbuT,EAAAA,EAAa,EAGnB,CAAA,CAEA,gBAAS,gBAAA,CAAiB,WAAA,CAAa/e,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAC+d,CAAAA,CAAYvS,CAAAA,CAAMuT,EAAY,CAAC,CAAA,CAEnC,IAAMpB,EAAAA,CAAejR,WAAAA,CAAY,SAAY,CAC3C,IAAMsS,CAAAA,CAAcxT,CAAAA,CAAK,IAAA,GACzB,GAAI,EAAA,CAACwT,CAAAA,EAAelT,CAAAA,CAAAA,CAEpB,CAAAmS,CAAAA,CAAgB,IAAI,CAAA,CAEpB,GAAI,CACF,MAAMH,CAAAA,CAAU,CACd,IAAA,CAAMkB,CAAAA,CACN,QAAA,CAAArF,CAAAA,CACA,YAAawE,CAAAA,CAAkB,MAAA,CAAS,CAAA,CAAIA,CAAAA,CAAoB,KAAA,CAAA,CAChE,SAAA,CAAWxd,CAAAA,CAAY,IAAI,KAAKA,CAAS,CAAA,CAAI,KAAA,CAAA,CAC7C,OAAA,CAASC,CAAAA,CAAU,IAAI,IAAA,CAAKA,CAAO,EAAI,KAAA,CAAA,CACvC,QAAA,CAAUjC,CAAAA,EAAY,KAAA,CACxB,CAAC,CAAA,CAGDuf,CAAAA,CAAQ,EAAE,EACVE,CAAAA,CAAqB,EAAE,CAAA,CACvBC,CAAAA,CAAa,EAAE,CAAA,CACfC,CAAAA,CAAW,EAAE,CAAA,CACbC,CAAAA,CAAY,EAAE,CAAA,CACdE,CAAAA,CAAiB,CAAA,CAAK,CAAA,CACtBE,CAAAA,CAAa,EAAK,CAAA,CAClBE,CAAAA,CAAgB,CAAA,CAAK,CAAA,CAErB3W,CAAAA,CAAS,OAAA,EAAS,KAAA,GACpB,OAASlS,CAAAA,CAAO,CACd,OAAA,CAAQ,KAAA,CAAM,sBAAA,CAAwBA,CAAK,EAC7C,CAAA,OAAE,CACAioB,CAAAA,CAAgB,KAAK,EACvB,CAAA,CACF,EAAG,CAACzS,CAAAA,CAAMmO,CAAAA,CAAUwE,CAAAA,CAAmBxd,EAAWC,CAAAA,CAASjC,CAAAA,CAAUmf,CAAAA,CAAWhS,CAAY,CAAC,CAAA,CAEvFpB,EAAAA,CAAgBgC,WAAAA,CACnBxM,GAA6C,CACxCA,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAW,CAACA,CAAAA,CAAE,QAAA,EAC1BA,CAAAA,CAAE,gBAAe,CACjByd,EAAAA,EAAa,EACJzd,CAAAA,CAAE,GAAA,GAAQ,QAAA,EACnB6e,EAAAA,GAEJ,EACA,CAACpB,EAAAA,CAAcoB,EAAY,CAC7B,CAAA,CAEME,EAAAA,CAAiBvS,WAAAA,CAAawS,CAAAA,EAAmB,CACrDd,CAAAA,CAAsBjR,CAAAA,EACpBA,CAAAA,CAAK,QAAA,CAAS+R,CAAM,CAAA,CAAI/R,CAAAA,CAAK,MAAA,CAAQpI,GAAOA,CAAAA,GAAOma,CAAM,CAAA,CAAI,CAAC,GAAG/R,CAAAA,CAAM+R,CAAM,CAC/E,EACF,CAAA,CAAG,EAAE,CAAA,CAGCre,EAAAA,CAAS3C,CAAAA,GAAU,MAAA,CAGzB,OAAK6f,EAkCHtf,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKqgB,CAAAA,CACL,SAAA,CAAWhqB,CAAAA,CACT,sCAAA,CACA+L,EAAAA,CAAS,eAAiB,UAAA,CAC1BhC,CACF,CAAA,CACA,KAAA,CAAO,CACL,MAAA,CAAQ,mBACV,CAAA,CAGA,UAAAJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,EACL,IAAA,CAAK,MAAA,CACL,KAAA,CAAOsD,CAAAA,CACP,QAAA,CAAWtL,CAAAA,EAAMge,CAAAA,CAAQhe,CAAAA,CAAE,OAAO,KAAK,CAAA,CACvC,SAAA,CAAWwK,EAAAA,CACX,WAAA,CAAa7F,EAAAA,CAAE,WAAA,CACf,QAAA,CAAUiH,EACV,SAAA,CAAWhX,CAAAA,CACT,8FAAA,CACA+L,EAAAA,CAAS,oCAAA,CAAuC,oCAClD,CAAA,CACF,CAAA,CAGApC,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CAEZ,QAAA,CAAA,CAAA6D,CAAAA,CAAe,MAAA,CAAS,CAAA,EACvB7D,IAAAA,CAAC,UACC,OAAA,CAAS,IAAMggB,CAAAA,CAAiB,CAACD,CAAa,CAAA,CAC9C,SAAA,CAAW1pB,CAAAA,CACT,2EACA0pB,CAAAA,EAAiBL,CAAAA,CAAkB,MAAA,CAAS,CAAA,CACxC,oCAAA,CACAtd,EAAAA,CACE,sDAAA,CACA,qDACR,EACA,IAAA,CAAK,QAAA,CACL,KAAA,CAAOgE,EAAAA,CAAE,WAAA,CAET,QAAA,CAAA,CAAApG,IAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,eAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,2CAAA,CAA4C,CAAA,CACpDA,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,CAAA,CAAA,CAC/B,EACC4gB,CAAAA,CAAkB,MAAA,CAAS,CAAA,EAC1B5gB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,QAAA,CAAU,QAAA,CAAA4gB,EAAkB,MAAA,CAAO,CAAA,CAAA,CAEvD,CAAA,CAIF5gB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMohB,CAAAA,CAAa,CAACD,CAAS,CAAA,CACtC,SAAA,CAAW5pB,CAAAA,CACT,0EAAA,CACA4pB,CAAAA,EAAa/d,CAAAA,EAAaC,CAAAA,CACtB,+BACAC,EAAAA,CACE,sDAAA,CACA,qDACR,CAAA,CACA,IAAA,CAAK,QAAA,CACL,KAAA,CAAOgE,EAAAA,CAAE,SAET,QAAA,CAAApG,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,YAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CACvDA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CACpCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAClCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAA,CACvC,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,UACC,OAAA,CAAS,IAAMshB,CAAAA,CAAgB,CAACD,CAAY,CAAA,CAC5C,SAAA,CAAW9pB,CAAAA,CACT,0EAAA,CACA8pB,CAAAA,EAAgBjgB,CAAAA,CACZA,CAAAA,GAAa,QAAA,CAAW,6BACtBA,CAAAA,GAAa,MAAA,CAAS,kCAAA,CACtBA,CAAAA,GAAa,QAAA,CAAW,kCAAA,CACxBA,CAAAA,GAAa,KAAA,CAAQ,iCACrB,kCAAA,CACFkC,EAAAA,CACE,sDAAA,CACA,qDACR,CAAA,CACA,IAAA,CAAK,QAAA,CACL,KAAA,CAAOgE,GAAE,WAAA,CAET,QAAA,CAAApG,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,2DAAA,CAA4D,CAAA,CACpEA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,GAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,CAGAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CAAS,CAAA,CAGxBA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASogB,EAAAA,CACT,SAAU,CAACnS,CAAAA,CAAK,IAAA,EAAK,EAAKM,CAAAA,CAC1B,SAAA,CAAWhX,CAAAA,CACT,sEAAA,CACA,sCACA,+EACF,CAAA,CACA,IAAA,CAAK,QAAA,CAEJ,QAAA,CAAAgX,CAAAA,CACCvO,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,2EAAA,CAA4E,CAAA,CAE3FsH,EAAAA,CAAE,IAAA,CAEN,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGC2Z,CAAAA,EAAiBlc,EAAe,MAAA,CAAS,CAAA,EACxC/E,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,gBAAA,CACA,UAAA,CACA+L,GAAS,kBAAA,CAAqB,iBAChC,CAAA,CACE,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,SAAA+E,CAAAA,CAAe,GAAA,CAAKK,CAAAA,EACnBlE,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMwgB,EAAAA,CAAetc,EAAK,EAAE,CAAA,CACrC,SAAA,CAAW7N,CAAAA,CACT,yEAAA,CACAqpB,CAAAA,CAAkB,QAAA,CAASxb,CAAAA,CAAK,EAAE,CAAA,CAC9B,2BAAA,CACA9B,EAAAA,CACE,+CAAA,CACA,6CACR,CAAA,CACA,IAAA,CAAK,QAAA,CAEJ,UAAA8B,CAAAA,CAAK,MAAA,CACJpF,GAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKoF,CAAAA,CAAK,MAAA,CAAQ,GAAA,CAAKA,EAAK,IAAA,CAAM,SAAA,CAAU,sBAAA,CAAuB,CAAA,CAExEpF,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,gFACAqpB,CAAAA,CAAkB,QAAA,CAASxb,CAAAA,CAAK,EAAE,CAAA,CAAI,2BAAA,CAA8B,2BACtE,CAAA,CACG,SAAAA,CAAAA,CAAK,IAAA,CAAK,MAAA,CAAO,CAAC,CAAA,CAAE,WAAA,EAAY,CACnC,CAAA,CAEFpF,IAAC,MAAA,CAAA,CAAM,QAAA,CAAAoF,CAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,EAAE,CAAA,CAAA,CAAA,CAtB1BA,CAAAA,CAAK,EAuBZ,CACD,CAAA,CACH,CAAA,CACF,CAAA,CAGD+b,CAAAA,EACCnhB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,gBAAA,CACA,UAAA,CACA+L,EAAAA,CAAS,kBAAA,CAAqB,iBAChC,EACE,QAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAWzI,CAAAA,CAAG,gDAAA,CAAkD+L,EAAAA,CAAS,eAAA,CAAkB,eAAe,EAC9G,QAAA,CAAAgE,EAAAA,CAAE,SAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,MAAOoD,CAAAA,CACP,QAAA,CAAWT,CAAAA,EAAMme,CAAAA,CAAane,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC5C,UAAWpL,CAAAA,CACT,2CAAA,CACA+L,EAAAA,CACI,6CAAA,CACA,0CACN,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACApC,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAWzI,CAAAA,CAAG,gDAAA,CAAkD+L,EAAAA,CAAS,gBAAkB,eAAe,CAAA,CAC9G,QAAA,CAAAgE,EAAAA,CAAE,OAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,OAAA,CAAA,CACC,KAAK,MAAA,CACL,KAAA,CAAOqD,CAAAA,CACP,QAAA,CAAWV,CAAAA,EAAMoe,CAAAA,CAAWpe,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC1C,SAAA,CAAWpL,CAAAA,CACT,2CAAA,CACA+L,GACI,6CAAA,CACA,0CACN,CAAA,CACF,CAAA,CAAA,CACF,GACF,CAAA,CACF,CAAA,CAGD+d,CAAAA,EACCrhB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,gBAAA,CACA,WACA+L,EAAAA,CAAS,kBAAA,CAAqB,iBAChC,CAAA,CACE,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBACX,QAAA,CAAA,CAAC,KAAA,CAAO,QAAA,CAAU,MAAA,CAAQ,QAAQ,CAAA,CAAY,GAAA,CAAKqE,CAAAA,EAQjDrE,IAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMghB,CAAAA,CAAY5f,CAAAA,GAAaiD,CAAAA,CAAI,EAAA,CAAKA,CAAC,EAClD,SAAA,CAAW9M,CAAAA,CACT,+DAAA,CACA6J,CAAAA,GAAaiD,CAAAA,CACT,CAAA,EAbK,CACb,GAAA,CAAK,eACL,MAAA,CAAQ,eAAA,CACR,IAAA,CAAM,eAAA,CACN,MAAA,CAAQ,YACV,CAAA,CAQoBA,CAAC,CAAC,CAAA,WAAA,CAAA,CACZf,EAAAA,CACE,+CAAA,CACA,6CACR,CAAA,CACA,IAAA,CAAK,QAAA,CAEJ,QAAA,CAAAgE,GAAEjD,CAAC,CAAA,CAAA,CAZCA,CAaP,CAEH,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAhREnD,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMuf,CAAAA,CAAc,IAAI,CAAA,CACjC,QAAA,CAAUnS,CAAAA,CACV,UAAW/W,CAAAA,CACT,iFAAA,CACA,yCAAA,CACA+L,EAAAA,CAAS,oBAAA,CAAuB,mBAAA,CAChCgL,CAAAA,EAAY,+BAAA,CACZhN,CACF,CAAA,CACA,IAAA,CAAK,QAAA,CAEL,QAAA,CAAA,CAAAJ,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,MACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CAEf,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CACrCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GACvC,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qBAAA,CAAuB,QAAA,CAAAsH,EAAAA,CAAE,WAAA,CAAY,GACvD,CAwPN,C9BtYO,IAAMsa,EAAAA,CAAN,cAAgCC,eAA+B,CAWpE,WAAA,CAAY5e,CAAAA,CAA2B,EAAC,CAAG,CACzC,KAAA,EAAM,CAXR,KAAS,EAAA,CAAK,QAAA,CACd,IAAA,CAAS,IAAA,CAAO,cAAA,CAChB,IAAA,CAAS,OAAA,CAAU,OAAA,CACnB,KAAS,WAAA,CAAc,EAAA,CACvB,IAAA,CAAS,IAAA,CAAO,EAAA,CAChB,IAAA,CAAS,gBAAA,CAAmC,CAAC,OAAQ,KAAA,CAAO,KAAA,CAAO,KAAK,CAAA,CAExE,IAAA,CAAQ,IAAA,CAAoB,IAAA,CAOxB,IAAA,CAAa,YAAc,2EAAA,CAC3B,IAAA,CAAa,IAAA,CAAO,WAAA,CAEtB,IAAA,CAAK,YAAA,CAAeA,CAAAA,CACpB,IAAA,CAAK,QAAU,CACb,UAAA,CAAYA,CAAAA,CAAO,WAAA,EAAa,UAAA,EAAc,IAAA,CAC9C,gBAAA,CAAkBA,CAAAA,CAAO,aAAa,gBAAA,EAAoB,KAAA,CAC1D,KAAA,CAAOA,CAAAA,CAAO,WAAA,EAAa,KAAA,EAAS,MAAA,CACpC,QAAA,CAAUA,EAAO,WAAA,EAAa,QAAA,EAAY,KAC5C,EACF,CAYA,KAAA,CAAM9C,CAAAA,CAAwB3E,CAAAA,CAA2B,CACnD,IAAA,CAAK,SAAA,EAAU,GACjB,OAAA,CAAQ,IAAA,CAAK,uDAAuD,CAAA,CACpE,IAAA,CAAK,SAAQ,CAAA,CAIf,IAAA,CAAK,SAAA,CAAY2E,CAAAA,CACjB,IAAA,CAAK,IAAA,CAAO3E,CAAAA,CAGZ,IAAA,CAAK,KAAOsmB,UAAAA,CAAW3hB,CAAS,CAAA,CAGhC,IAAA,CAAK,MAAA,EAAO,CAGZ,IAAA,CAAK,IAAA,CAAK,eAAgB,CAAE,MAAA,CAAQ,IAAA,CAAK,EAAA,CAAI,SAAA,CAAW,IAAA,CAAK,GAAA,EAAM,CAAC,EACtE,CAKA,OAAA,EAAgB,CACT,IAAA,CAAK,SAAA,EAAU,GAKpB,IAAA,CAAK,KAAK,gBAAA,CAAkB,CAAE,MAAA,CAAQ,IAAA,CAAK,EAAA,CAAI,SAAA,CAAW,IAAA,CAAK,GAAA,EAAM,CAAC,CAAA,CAGlE,IAAA,CAAK,IAAA,GACP,KAAK,IAAA,CAAK,OAAA,EAAQ,CAClB,IAAA,CAAK,KAAO,IAAA,CAAA,CAIV,IAAA,CAAK,SAAA,GACP,IAAA,CAAK,SAAA,CAAU,SAAA,CAAY,EAAA,CAC3B,IAAA,CAAK,UAAY,IAAA,CAAA,CAGnB,IAAA,CAAK,IAAA,CAAO,IAAA,EACd,CAOA,MAAA,CAAO3E,CAAAA,CAA2B,CAChC,GAAI,CAAC,IAAA,CAAK,SAAA,EAAU,CAAG,CACrB,OAAA,CAAQ,IAAA,CAAK,gDAAgD,EAC7D,MACF,CAEA,IAAA,CAAK,IAAA,CAAOA,CAAAA,CACZ,IAAA,CAAK,MAAA,EAAO,CAEZ,KAAK,IAAA,CAAK,cAAA,CAAgB,CAAE,MAAA,CAAQ,IAAA,CAAK,EAAA,CAAI,IAAA,CAAAA,CAAK,CAAC,EACrD,CAOA,SAAA,CAAUpC,CAAAA,CAA4B,CACpC,IAAA,CAAK,OAAA,CAAU,CAAE,GAAG,IAAA,CAAK,OAAA,CAAS,GAAGA,CAAQ,CAAA,CAGzC,IAAA,CAAK,SAAA,EAAU,EACjB,KAAK,MAAA,GAET,CAYA,MAAM,MAAA,CAAOkE,CAAAA,CAAgE,CAC3E,GAAI,CAAC,IAAA,CAAK,IAAA,CACR,MAAM,IAAI,KAAA,CAAM,mBAAmB,CAAA,CAGrC,OAAQA,GACN,KAAK,MAAA,CACH,OAAO,IAAA,CAAK,SAAA,CAAU,IAAA,CAAK,IAAA,CAAM,KAAM,CAAC,CAAA,CAE1C,KAAK,KAAA,CACH,OAAO,IAAA,CAAK,WAAA,EAAY,CAE1B,KAAK,KAAA,CACH,OAAO,IAAA,CAAK,WAAA,EAAY,CAE1B,KAAK,KAAA,CACH,OAAO,KAAK,WAAA,EAAY,CAE1B,QACE,MAAM,IAAI,KAAA,CAAM,CAAA,2BAAA,EAA8BA,CAAM,EAAE,CAC1D,CACF,CASQ,MAAA,EAAe,CACrB,GAAI,CAAC,IAAA,CAAK,MAAQ,CAAC,IAAA,CAAK,IAAA,CACtB,OAIF,IAAMhC,CAAAA,CAAQ,CACZ,EAAA,CAAI,KAAK,IAAA,CAAK,KAAA,EAAO,EAAA,EAAM,SAAA,CAC3B,KAAA,CAAO,IAAA,CAAK,IAAA,CAAK,KAAA,EAAO,OAAS,gBAAA,CACjC,OAAA,CAAS,IAAA,CAAK,IAAA,CAAK,OAAA,CACnB,KAAA,CAAO,IAAA,CAAK,IAAA,CAAK,KACnB,CAAA,CAGA,IAAA,CAAK,IAAA,CAAK,MAAA,CACR0E,GAAAA,CAACub,EAAAA,CAAA,CACC,KAAA,CAAOjgB,EACP,SAAA,CAAW,IAAA,CAAK,YAAA,CAAa,SAAA,EAAa,EAAC,CAC3C,WAAA,CAAa,IAAA,CAAK,aAAa,WAAA,CAC/B,WAAA,CAAa,IAAA,CAAK,YAAA,CAAa,WAAA,CAC/B,MAAA,CAAQ,IAAA,CAAK,YAAA,CAAa,OAC1B,cAAA,CAAgB,IAAA,CAAK,YAAA,CAAa,cAAA,CAClC,SAAA,CAAW,IAAA,CAAK,YAAA,CAAa,SAAA,CAC7B,MAAO,IAAA,CAAK,YAAA,CAAa,KAAA,CAC3B,CACF,EACF,CAKQ,WAAA,EAAsB,CAC5B,GAAI,CAAC,IAAA,CAAK,IAAA,CAAM,OAAO,EAAA,CAEvB,IAAMK,CAAAA,CAAmB,CACvB,CAAC,SAAA,CAAW,OAAA,CAAS,QAAA,CAAU,aAAA,CAAe,QAAA,CAAU,WAAA,CAAa,UAAA,CAAY,UAAU,CAC7F,CAAA,CAEA,OAAA,IAAA,CAAK,IAAA,CAAK,KAAA,CAAM,OAAA,CAASC,CAAAA,EAAe,CACtC,IAAMC,EAAS,IAAA,CAAK,IAAA,CAAM,OAAA,CAAQ,IAAA,CAAMC,CAAAA,EAAgBA,CAAAA,CAAI,EAAA,GAAOF,CAAAA,CAAK,QAAQ,CAAA,CAChFD,CAAAA,CAAK,IAAA,CAAK,CACRC,CAAAA,CAAK,EAAA,CACLA,CAAAA,CAAK,KAAA,CACLC,GAAQ,KAAA,EAAS,EAAA,CACjBD,CAAAA,CAAK,WAAA,EAAe,EAAA,CACpBA,CAAAA,CAAK,MAAA,EAAQ,IAAA,CAAK,IAAI,CAAA,EAAK,EAAA,CAC3BA,CAAAA,CAAK,eAAA,EAAiB,IAAA,CAAK,IAAI,CAAA,EAAKA,CAAAA,CAAK,YAAc,EAAA,CACvDA,CAAAA,CAAK,OAAA,EAAS,QAAA,EAAS,EAAK,EAAA,CAC5BA,CAAAA,CAAK,QAAA,CAAS,UAChB,CAAC,EACH,CAAC,CAAA,CAEMD,CAAAA,CAAK,GAAA,CAAKK,CAAAA,EAAQA,EAAI,GAAA,CAAK+lB,CAAAA,EAAS,CAAA,CAAA,EAAIA,CAAI,GAAG,CAAA,CAAE,IAAA,CAAK,GAAG,CAAC,EAAE,IAAA,CAAK;AAAA,CAAI,CAC9E,CAMA,MAAc,WAAA,EAA6B,CAGzC,MAAM,IAAI,KAAA,CAAM,+CAA+C,CACjE,CAMA,MAAc,aAA6B,CACzC,GAAI,CAAC,IAAA,CAAK,SAAA,CACR,MAAM,IAAI,KAAA,CAAM,kBAAkB,CAAA,CAMpC,IAAM1lB,CAAAA,CAAS,KAAA,CAFK,MAAM,OAAO,aAAa,CAAA,EAEb,OAAA,CAAQ,IAAA,CAAK,SAAA,CAAW,CACvD,eAAA,CAAiB,IAAA,CAAK,OAAA,CAAQ,KAAA,GAAU,MAAA,CAAS,SAAA,CAAY,UAC7D,KAAA,CAAO,CACT,CAAC,CAAA,CAED,OAAO,IAAI,OAAA,CAAQ,CAAC1C,CAAAA,CAAS0F,CAAAA,GAAW,CACtChD,CAAAA,CAAO,MAAA,CAAQwB,CAAAA,EAAS,CAClBA,CAAAA,CACFlE,CAAAA,CAAQkE,CAAI,CAAA,CAEZwB,CAAAA,CAAO,IAAI,MAAM,2BAA2B,CAAC,EAEjD,CAAA,CAAG,WAAW,EAChB,CAAC,CACH,CACF,EAsBO,SAAS2iB,EAAAA,CAAiB/e,CAAAA,CAA2B,EAAC,CAAsB,CACjF,OAAO,IAAI2e,EAAAA,CAAkB3e,CAAM,CACrC,C+B3TO,IAAMgf,EAAAA,CAAN,cAA4BC,SAAkD,CACnF,WAAA,CAAYC,CAAAA,CAA2B,CACrC,KAAA,CAAMA,CAAK,CAAA,CAuCb,IAAA,CAAA,UAAA,CAAa,IAAY,CACvB,IAAA,CAAK,QAAA,CAAS,CACZ,QAAA,CAAU,MACV,KAAA,CAAO,IAAA,CACP,SAAA,CAAW,IACb,CAAC,EACH,EA5CE,IAAA,CAAK,KAAA,CAAQ,CACX,QAAA,CAAU,KAAA,CACV,KAAA,CAAO,KACP,SAAA,CAAW,IACb,EACF,CAEA,OAAO,wBAAA,CAAyB1pB,EAA2C,CACzE,OAAO,CACL,QAAA,CAAU,IAAA,CACV,KAAA,CAAAA,CACF,CACF,CAEA,iBAAA,CAAkBA,CAAAA,CAAc2pB,CAAAA,CAA4B,CAC1D,GAAM,CAAE,OAAA,CAAAC,CAAAA,CAAS,aAAA,CAAAxnB,CAAc,CAAA,CAAI,KAAK,KAAA,CAcxC,GAXI,OAAA,CAAQ,GAAA,CAAI,QAAA,GAAa,aAAA,GAC3B,OAAA,CAAQ,KAAA,CAAM,CAAA,SAAA,EAAYA,CAAAA,EAAiB,WAAW,CAAA,CAAA,CAAA,CAAKpC,CAAK,CAAA,CAChE,QAAQ,KAAA,CAAM,aAAA,CAAe2pB,CAAS,CAAA,CAAA,CAIxC,IAAA,CAAK,QAAA,CAAS,CACZ,SAAA,CAAAA,CACF,CAAC,CAAA,CAGGC,CAAAA,CACF,GAAI,CACFA,CAAAA,CAAQ5pB,CAAAA,CAAO2pB,CAAS,EAC1B,CAAA,MAASE,CAAAA,CAAc,CACrB,OAAA,CAAQ,KAAA,CAAM,yBAAA,CAA2BA,CAAY,EACvD,CAEJ,CAUA,QAAoB,CAClB,GAAM,CAAE,QAAA,CAAAC,CAAAA,CAAU,KAAA,CAAA9pB,CAAM,CAAA,CAAI,IAAA,CAAK,KAAA,CAC3B,CAAE,QAAA,CAAAqH,CAAAA,CAAU,SAAA0iB,CAAAA,CAAU,aAAA,CAAA3nB,CAAc,CAAA,CAAI,IAAA,CAAK,KAAA,CAEnD,OAAI0nB,CAAAA,EAAY9pB,CAAAA,CAEV+pB,CAAAA,CACKA,CAAAA,CAAS/pB,CAAAA,CAAO,IAAA,CAAK,UAAU,EAKtCuH,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uBAAA,CACV,KAAA,CAAO,CACL,WAAY,mDAAA,CACZ,WAAA,CAAa,wBACf,CAAA,CAEA,QAAA,CAAAkB,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAM,4BAAA,CACN,SAAA,CAAU,eAAA,CAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,IAAA,CAAK,MAAA,CAAO,UAAU,WAAA,CAAY,GAAA,CAAI,CAAA,CAChEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,UAAA,CAAW,MAAA,CAAO,SAAA,CAAU,WAAA,CAAY,GAAA,CAAI,aAAA,CAAc,OAAA,CAAQ,CAAA,CAC1EA,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,IAAI,IAAA,CAAK,SAAA,CAAU,CAAA,CAAA,CAC/C,CAAA,CAEAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,QAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,yCAAA,CACX,QAAA,CAAAnF,CAAAA,CAAgB,CAAA,SAAA,EAAYA,CAAa,CAAA,CAAA,CAAK,sBAAA,CACjD,CAAA,CACAmF,GAAAA,CAAC,KAAE,SAAA,CAAU,4BAAA,CACV,QAAA,CAAAvH,CAAAA,CAAM,OAAA,EAAW,8BAAA,CACpB,EAEC,OAAA,CAAQ,GAAA,CAAI,QAAA,GAAa,aAAA,EACxByI,IAAAA,CAAC,SAAA,CAAA,CAAQ,UAAU,MAAA,CACjB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SAAA,CAAA,CAAQ,SAAA,CAAU,+DAAA,CAAgE,QAAA,CAAA,kCAAA,CAEnF,CAAA,CACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sEAAA,CACZ,QAAA,CAAAvH,CAAAA,CAAM,MACT,CAAA,CAAA,CACF,CAAA,CAGFuH,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAA,CAAK,WACd,SAAA,CAAU,sGAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,EAC3B,QAAA,CAAA,WAAA,CAED,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAIGF,CACT,CACF,EAMO,SAAS2iB,EAAAA,CACdP,CAAAA,CACAQ,CAAAA,CACA,CACA,IAAMC,EAAoBR,CAAAA,EACxBniB,GAAAA,CAACiiB,EAAAA,CAAA,CAAe,GAAGS,CAAAA,CACjB,SAAA1iB,GAAAA,CAACkiB,CAAAA,CAAA,CAAW,GAAGC,CAAAA,CAAO,CAAA,CACxB,EAGF,OAAAQ,CAAAA,CAAiB,WAAA,CAAc,CAAA,kBAAA,EAAqBT,CAAAA,CAAU,WAAA,EAAeA,CAAAA,CAAU,IAAA,EAAQ,WAAW,CAAA,CAAA,CAAA,CAEnGS,CACT,CC/HO,SAASC,EAAAA,CAAe,CAC7B,KAAA,CAAAtnB,CAAAA,CACA,YAAA,CAAAunB,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,iBAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,EACA,aAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CAAAA,CAAW,GAAA,CACX,SAAA,CAAA/hB,EAAY,EACd,CAAA,CAAwB,CACtB,GAAM,CAACC,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACgjB,CAAAA,CAAQC,CAAS,EAAIjjB,QAAAA,CAAS,EAAE,CAAA,CACjC,CAACkjB,CAAAA,CAAMC,CAAO,EAAInjB,QAAAA,CAAsB,MAAM,CAAA,CAC9C,CAACojB,CAAAA,CAAgBC,CAAiB,EAAIrjB,QAAAA,CAAiB,EAAE,CAAA,CACzD,CAACwb,CAAAA,CAAcC,CAAe,EAAIzb,QAAAA,CAAiB,EAAE,CAAA,CAG3DG,SAAAA,CAAU,IAAM,CACd,IAAM0M,CAAAA,CAAiBxK,CAAAA,EAAqB,CAAA,CACrCA,CAAAA,CAAE,OAAA,EAAWA,CAAAA,CAAE,UAAYA,CAAAA,CAAE,GAAA,GAAQ0gB,CAAAA,GACxC1gB,CAAAA,CAAE,cAAA,EAAe,CACjBnB,EAAWoiB,CAAAA,EAAS,CAACA,CAAI,CAAA,CAAA,CAIvBjhB,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACZnB,CAAAA,CAAU,KAAK,CAAA,CACfiiB,CAAAA,CAAQ,MAAM,CAAA,CACdF,CAAAA,CAAU,EAAE,CAAA,EAEhB,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWpW,CAAa,EAC3C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAa,CACpE,EAAG,CAACkW,CAAQ,CAAC,CAAA,CAGb5iB,SAAAA,CAAU,IAAM,CACTc,CAAAA,GACHkiB,CAAAA,CAAQ,MAAM,CAAA,CACdF,CAAAA,CAAU,EAAE,CAAA,CACZI,EAAkB,EAAE,CAAA,CACpB5H,CAAAA,CAAgB,EAAE,CAAA,EAEtB,CAAA,CAAG,CAACxa,CAAM,CAAC,CAAA,CAEX,IAAMsiB,CAAAA,CAAc1U,WAAAA,CAAY,IAAM,CACpC3N,CAAAA,CAAU,KAAK,EACjB,CAAA,CAAG,EAAE,CAAA,CAECsiB,CAAAA,CAAsB3U,WAAAA,CACzB/R,CAAAA,EAAkB,CAEjB,GAAM,CAACrC,EAAQgpB,CAAK,CAAA,CAAI3mB,CAAAA,CAAM,KAAA,CAAM,GAAG,CAAA,CAEvC,OAAQrC,CAAAA,EACN,KAAK,aAAA,CACH0oB,CAAAA,CAAQ,aAAa,EACrB,MAEF,KAAK,gBAAA,CACHE,CAAAA,CAAkBI,CAAAA,EAAS,EAAE,CAAA,CAE7B,MAEF,KAAK,UAAA,CACCA,CAAAA,EACFjB,CAAAA,GAAmBiB,CAAK,CAAA,CACxBF,GAAY,EAEZJ,CAAAA,CAAQ,UAAU,CAAA,CAEpB,MAEF,KAAK,SACHV,CAAAA,GAAWO,CAAM,CAAA,CACjBO,CAAAA,EAAY,CACZ,MAEF,KAAK,UAAA,CACHJ,CAAAA,CAAQ,UAAU,CAAA,CAClB,MAEF,KAAK,cAAA,CACC3H,CAAAA,EAAgBiI,CAAAA,GAClBf,CAAAA,GAAmBlH,CAAAA,CAAciI,CAAiB,CAAA,CAClDF,CAAAA,IAEF,MAEF,KAAK,QAAA,CACHJ,CAAAA,CAAQ,QAAQ,CAAA,CAChB,MAEF,KAAK,aAAA,CACC3H,CAAAA,EAAgBiI,CAAAA,GAClBd,CAAAA,GAAenH,CAAAA,CAAciI,CAAK,CAAA,CAClCF,CAAAA,EAAY,CAAA,CAEd,MAEF,KAAK,IAAA,CACHJ,CAAAA,CAAQ,IAAI,CAAA,CACZ,MAEF,KAAK,kBAAA,CACHP,CAAAA,IAAiB,CACjBW,GAAY,CACZ,MAEF,KAAK,kBAAA,CACHV,CAAAA,IAAiB,CACjBU,GAAY,CACZ,MAEF,KAAK,UAAA,CACHT,CAAAA,IAAgB,CAChBS,GAAY,CACZ,MAEF,KAAK,MAAA,CACHJ,CAAAA,CAAQ,MAAM,CAAA,CACd,MAIJ,CACF,CAAA,CACA,CACEH,CAAAA,CACAxH,EACA+G,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,EACAC,CAAAA,CACAS,CACF,CACF,CAAA,CAEMG,CAAAA,CAAmB7U,WAAAA,CAAY,IAAM,CACrCuU,CAAAA,EAAkBJ,CAAAA,CAAO,IAAA,EAAK,GAChCT,CAAAA,GAAea,EAAgBJ,CAAAA,CAAO,IAAA,EAAM,CAAA,CAC5CO,CAAAA,EAAY,EAEhB,EAAG,CAACH,CAAAA,CAAgBJ,CAAAA,CAAQT,CAAAA,CAAcgB,CAAW,CAAC,EAEtD,OAAKtiB,CAAAA,CAGHvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAF,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAA0B,OAAA,CAAS6jB,CAAAA,CAChD,QAAA,CAAA7jB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW,CAAA,gBAAA,EAAmBsB,CAAS,CAAA,CAAA,CACvC,OAAA,CAAUqB,CAAAA,EAAMA,EAAE,eAAA,EAAgB,CAElC,QAAA,CAAAzB,IAAAA,CAAC+iB,OAAAA,CAAA,CAAQ,MAAOX,CAAAA,CAAQ,aAAA,CAAeC,CAAAA,CAAW,KAAA,CAAM,cAAA,CACtD,QAAA,CAAA,CAAAriB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,QAEf,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAC9BA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,kBAAA,CAAmB,CAAA,CAAA,CAC7B,CAAA,CACAA,GAAAA,CAACikB,OAAAA,CAAQ,KAAA,CAAR,CACC,WAAA,CACET,IAAS,aAAA,EAAiBE,CAAAA,CACtB,oCAAA,CACAF,CAAAA,GAAS,aAAA,CACT,0BAAA,CACA,8BAEN,SAAA,CAAU,uBAAA,CACV,SAAA,CAAY7gB,CAAAA,EAAM,CACZA,CAAAA,CAAE,MAAQ,OAAA,EAAW6gB,CAAAA,GAAS,aAAA,EAAiBE,CAAAA,EACjDM,CAAAA,GAEJ,CAAA,CACF,CAAA,CACA9iB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAK,QAAA,CAAA,SAAA,CAAU,QAAA,CAAS,QAAA,CAAS,KAAK,CAAA,CAAI,QAAA,CAAM,OAAO,CAAA,CACxDA,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACR,CAAA,CAAA,CACF,EAEAkB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CAAa,SAAA,CAAU,sBAAA,CACtB,QAAA,CAAA,CAAAjkB,GAAAA,CAACikB,OAAAA,CAAQ,KAAA,CAAR,CAAc,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,mBAAA,CAEjD,EAGCT,CAAAA,GAAS,MAAA,EACRtiB,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,KAAC+iB,OAAAA,CAAQ,KAAA,CAAR,CAAc,OAAA,CAAQ,SAAA,CAAU,SAAA,CAAU,wBACzC,QAAA,CAAA,CAAA/iB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,aAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA5iB,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CAChDA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,iBAAiB,CAAA,CAAA,CAC3B,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,aAAA,CAAW,CAAA,CACjBA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CAAgC,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CAClD,CAAA,CAEAkB,KAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,UAAA,CACN,QAAA,CAAUH,EACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA5iB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,IAAA,CAAK,CAAA,CAC/BA,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,kBAAA,CAAmB,CAAA,CACpCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GACvC,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,kBAAA,CAAgB,CAAA,CACtBA,GAAAA,CAAC,OAAI,SAAA,CAAU,+BAAA,CAAgC,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CAClD,CAAA,CAEAkB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,QAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,uBAEV,QAAA,CAAA,CAAA5iB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAC9BA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAmB,CAAA,CAAA,CAC7B,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,cAAA,CAAY,CAAA,CAClBA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CAAgC,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CAClD,CAAA,CAAA,CACF,EAEAA,GAAAA,CAACikB,OAAAA,CAAQ,KAAA,CAAR,CAAc,OAAA,CAAQ,aAAA,CAAc,UAAU,uBAAA,CAC7C,QAAA,CAAA/iB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,MAAM,IAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,8CAAA,CAEV,QAAA,CAAA,CAAA5iB,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,4BAAA,CAA6B,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,mBAAA,CAAoB,CAAA,CAC5BA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAA,CAAoB,GAC9B,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,aAAA,CAAW,CAAA,CACjBA,GAAAA,CAAC,OAAI,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,IAAA,CAAE,CAAA,CAAA,CAChD,CAAA,CACF,CAAA,CAEAA,GAAAA,CAACikB,OAAAA,CAAQ,KAAA,CAAR,CAAc,OAAA,CAAQ,OAAA,CAAQ,SAAA,CAAU,uBAAA,CACtC,SAAA3oB,CAAAA,CAAM,KAAA,CAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,IAAKM,CAAAA,EAC5BsF,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CAEC,KAAA,CAAO,YAAYroB,CAAAA,CAAK,EAAE,CAAA,CAAA,CAC1B,QAAA,CAAUkoB,CAAAA,CACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA9jB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,0BAAA,CACV,KAAA,CAAO,CACL,WACEpE,CAAAA,CAAK,QAAA,GAAa,QAAA,CACd,SAAA,CACAA,CAAAA,CAAK,QAAA,GAAa,OAClB,SAAA,CACAA,CAAAA,CAAK,QAAA,GAAa,QAAA,CAClB,SAAA,CACA,SACR,EACF,CAAA,CACAoE,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAApE,CAAAA,CAAK,KAAA,CAAM,EACjBA,CAAAA,CAAK,MAAA,EAAUA,CAAAA,CAAK,MAAA,CAAO,MAAA,CAAS,CAAA,EACnCoE,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,QAAA,CAAApE,CAAAA,CAAK,MAAA,CAAO,MAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAKuN,CAAAA,EAC5BnJ,GAAAA,CAAC,QAAiB,SAAA,CAAU,4BAAA,CACzB,QAAA,CAAAmJ,CAAAA,CAAAA,CADQA,CAEX,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CA1BGvN,CAAAA,CAAK,EA4BZ,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAID4nB,IAAS,aAAA,EACRtiB,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,IAAAA,CAAC+iB,QAAQ,IAAA,CAAR,CACC,KAAA,CAAM,MAAA,CACN,QAAA,CAAUH,CAAAA,CACV,UAAU,sBAAA,CAEV,QAAA,CAAA,CAAA9jB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,yBAAA,CAA0B,EACpC,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,MAAA,CAAI,CAAA,CAAA,CACZ,CAAA,CAEAA,IAACikB,OAAAA,CAAQ,KAAA,CAAR,CACC,OAAA,CAAQ,eAAA,CACR,SAAA,CAAU,uBAAA,CAET,QAAA,CAAA3oB,CAAAA,CAAM,OAAA,CAAQ,GAAA,CAAKO,CAAAA,EAClBqF,IAAAA,CAAC+iB,OAAAA,CAAQ,KAAR,CAEC,KAAA,CAAO,CAAA,eAAA,EAAkBpoB,CAAAA,CAAO,EAAE,CAAA,CAAA,CAClC,SAAUioB,CAAAA,CACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA9jB,GAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,GAAA,CAAI,MAAA,CAAO,KAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CACjD,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAM,SAAAnE,CAAAA,CAAO,KAAA,CAAM,CAAA,CACpBqF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CACZ,QAAA,CAAA,CAAArF,CAAAA,CAAO,OAAA,CAAQ,MAAA,CAAO,QAAA,CAAA,CACzB,CAAA,CAAA,CAAA,CAlBKA,CAAAA,CAAO,EAmBd,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAID2nB,CAAAA,GAAS,UAAA,EACRtiB,KAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,MAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA9jB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,yBAAA,CAA0B,CAAA,CACpC,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,MAAA,CAAI,CAAA,CAAA,CACZ,CAAA,CAEAA,GAAAA,CAACikB,OAAAA,CAAQ,KAAA,CAAR,CAAc,OAAA,CAAQ,WAAA,CAAY,SAAA,CAAU,uBAAA,CAC1C,QAAA,CAAA3oB,CAAAA,CAAM,MAAM,GAAA,CAAKM,CAAAA,EAAS,CACzB,IAAMC,CAAAA,CAASP,CAAAA,CAAM,QAAQ,IAAA,CAAM+e,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOze,CAAAA,CAAK,QAAQ,EAC/D,OACEsF,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CAEC,KAAA,CAAO,YAAYroB,CAAAA,CAAK,EAAE,CAAA,CAAA,CAC1B,QAAA,CAAUkoB,CAAAA,CACV,SAAA,CAAU,uBACV,QAAA,CAAU,CAACloB,CAAAA,CAAK,KAAA,CAAOA,CAAAA,CAAK,WAAA,EAAe,GAAI,GAAIA,CAAAA,CAAK,MAAA,EAAU,EAAG,CAAA,CAErE,UAAAoE,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,0BAAA,CACV,KAAA,CAAO,CACL,UAAA,CACEpE,CAAAA,CAAK,QAAA,GAAa,QAAA,CACd,SAAA,CACAA,CAAAA,CAAK,QAAA,GAAa,MAAA,CAClB,UACAA,CAAAA,CAAK,QAAA,GAAa,QAAA,CAClB,SAAA,CACA,SACR,CAAA,CACF,EACAsF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAK,QAAA,CAAApE,CAAAA,CAAK,KAAA,CAAM,CAAA,CACjBoE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACZ,QAAA,CAAAnE,CAAAA,EAAQ,KAAA,CACX,CAAA,CAAA,CACF,CAAA,CACCD,CAAAA,CAAK,QAAUA,CAAAA,CAAK,MAAA,CAAO,MAAA,CAAS,CAAA,EACnCoE,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,6BAAA,CACZ,QAAA,CAAApE,CAAAA,CAAK,MAAA,CAAO,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAKuN,CAAAA,EAC5BnJ,GAAAA,CAAC,MAAA,CAAA,CAAiB,SAAA,CAAU,4BAAA,CACzB,QAAA,CAAAmJ,CAAAA,CAAAA,CADQA,CAEX,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CAhCGvN,CAAAA,CAAK,EAkCZ,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAID4nB,CAAAA,GAAS,MACRtiB,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,IAAAA,CAAC+iB,OAAAA,CAAQ,KAAR,CACC,KAAA,CAAM,MAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,sBAAA,CAEV,QAAA,CAAA,CAAA9jB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,yBAAA,CAA0B,CAAA,CACpC,EACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,MAAA,CAAI,CAAA,CAAA,CACZ,CAAA,CAEAkB,IAAAA,CAAC+iB,OAAAA,CAAQ,KAAA,CAAR,CAAc,OAAA,CAAQ,aAAA,CAAc,SAAA,CAAU,uBAAA,CAC7C,QAAA,CAAA,CAAA/iB,KAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,kBAAA,CACN,QAAA,CAAUH,EACV,SAAA,CAAU,8CAAA,CAEV,QAAA,CAAA,CAAA5iB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,6BAA6B,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAA,CAAoB,CAAA,CAC5BA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAA,CAAoB,CAAA,CAAA,CAC9B,CAAA,CACAA,GAAAA,CAAC,QAAK,QAAA,CAAA,uBAAA,CAAqB,CAAA,CAC3BA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,IAAA,CAAE,CAAA,CAAA,CAChD,CAAA,CAEAkB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,KAAA,CAAM,mBACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,8CAAA,CAEV,QAAA,CAAA,CAAA5iB,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,qFAAA,CAAsF,CAAA,CAC9FA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,OAAA,CAAQ,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CAC3C,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,eAAA,CAAa,CAAA,CACnBA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CAA6B,cAAE,CAAA,CAAA,CAChD,CAAA,CAEAkB,IAAAA,CAAC+iB,OAAAA,CAAQ,IAAA,CAAR,CACC,MAAM,UAAA,CACN,QAAA,CAAUH,CAAAA,CACV,SAAA,CAAU,8CAAA,CAEV,QAAA,CAAA,CAAA5iB,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gDAAgD,CAAA,CAAA,CAC1D,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,kBAAA,CAAgB,CAAA,CACtBA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,IAAA,CAAE,CAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,GAEJ,CAAA,CAEAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,kBAAC,CAAA,CACNA,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,QAAA,CAAC,CAAA,CACNA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,UAAA,CAAQ,CAAA,CAAA,CAChB,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,OAAA,CAAK,CAAA,CACVA,GAAAA,CAAC,MAAA,CAAA,CAAK,kBAAM,CAAA,CAAA,CACd,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,KAAA,CAAG,CAAA,CACRA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,OAAA,CAAK,CAAA,CAAA,CACb,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CAjZkB,IAmZtB,CCjlBA,SAASkkB,EAAAA,CACPC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,EACAC,CAAAA,CACA,CAEA,IAAMC,CAAAA,CAAW,QAAA,CAAS,cAAA,CAAe,4BAA4B,CAAA,CACjEA,CAAAA,EAAUA,CAAAA,CAAS,MAAA,EAAO,CAG9B,IAAMC,EAAW,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC7CA,CAAAA,CAAS,EAAA,CAAK,4BAAA,CACdA,CAAAA,CAAS,SAAA,CAAY,qBAAA,CACrBA,CAAAA,CAAS,KAAA,CAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA,CAAA,CAYzB,IAAMC,CAAAA,CAAM,QAAA,CAAS,aAAA,CAAc,KAAK,EACxCA,CAAAA,CAAI,GAAA,CAAMP,CAAAA,CACVO,CAAAA,CAAI,IAAMN,CAAAA,CACVM,CAAAA,CAAI,UAAY,2BAAA,CAChBA,CAAAA,CAAI,MAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA,CAAA,CAMpBA,CAAAA,CAAI,QAAW/hB,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAGvC,IAAMgiB,EAAO,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACzCA,CAAAA,CAAK,UAAY,0BAAA,CACjBA,CAAAA,CAAK,YAAc,sCAAA,CACnBA,CAAAA,CAAK,MAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA,CAAA,CAWrB,IAAMC,CAAAA,CAAgB,IAAM,CAC1BH,CAAAA,CAAS,MAAA,GACT,QAAA,CAAS,mBAAA,CAAoB,UAAWtX,CAAa,EACvD,EAGMA,CAAAA,CAAiBxK,CAAAA,EAAqB,CAC1C,GAAIA,CAAAA,CAAE,MAAQ,QAAA,CACZiiB,CAAAA,WACSjiB,CAAAA,CAAE,GAAA,GAAQ,aAAe0hB,CAAAA,CAAU,MAAA,CAAS,EAAG,CACxD,IAAMQ,EAASP,CAAAA,CAAe,CAAA,CAAIA,EAAe,CAAA,CAAID,CAAAA,CAAU,OAAS,CAAA,CACxEO,CAAAA,GACAL,CAAAA,CAAWM,CAAM,EACnB,CAAA,KAAA,GAAWliB,CAAAA,CAAE,MAAQ,YAAA,EAAgB0hB,CAAAA,CAAU,OAAS,CAAA,CAAG,CACzD,IAAMQ,CAAAA,CAASP,CAAAA,CAAeD,EAAU,MAAA,CAAS,CAAA,CAAIC,EAAe,CAAA,CAAI,CAAA,CACxEM,GAAc,CACdL,CAAAA,CAAWM,CAAM,EACnB,CACF,EAMA,GAJAJ,CAAAA,CAAS,QAAUG,CAAAA,CACnB,QAAA,CAAS,iBAAiB,SAAA,CAAWzX,CAAa,EAG9CkX,CAAAA,CAAU,MAAA,CAAS,EAAG,CAExB,IAAMS,EAAO,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACzCA,CAAAA,CAAK,UAAY,0BAAA,CACjBA,CAAAA,CAAK,MAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA,CAWrBA,CAAAA,CAAK,OAAA,CAAWniB,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAExC0hB,CAAAA,CAAU,OAAA,CAAQ,CAACrsB,CAAAA,CAAG+sB,CAAAA,GAAQ,CAC5B,IAAMC,CAAAA,CAAM,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CAC3CA,CAAAA,CAAI,SAAA,CAAY,CAAA,wBAAA,EAA2BD,CAAAA,GAAQT,CAAAA,CAAe,QAAA,CAAW,EAAE,CAAA,CAAA,CAC/EU,CAAAA,CAAI,KAAA,CAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA,oBAAA,EAIJD,CAAAA,GAAQT,CAAAA,CAAe,OAAA,CAAU,0BAA0B,CAAA;AAAA;AAAA;AAAA;AAAA,MAAA,CAAA,CAK3EU,CAAAA,CAAI,OAAA,CAAWriB,CAAAA,EAAM,CACnBA,EAAE,eAAA,EAAgB,CAClBiiB,CAAAA,EAAc,CACdL,CAAAA,CAAWQ,CAAG,EAChB,CAAA,CACAD,EAAK,WAAA,CAAYE,CAAG,EACtB,CAAC,CAAA,CAGD,IAAMC,CAAAA,CAAU,QAAA,CAAS,cAAc,QAAQ,CAAA,CAC/CA,CAAAA,CAAQ,SAAA,CAAY,4DACpBA,CAAAA,CAAQ,SAAA,CAAY,+KAAA,CACpBA,CAAAA,CAAQ,MAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA,CAcxBA,CAAAA,CAAQ,YAAA,CAAe,IAAM,CAAEA,CAAAA,CAAQ,MAAM,OAAA,CAAU,IAAI,CAAA,CAC3DA,CAAAA,CAAQ,YAAA,CAAe,IAAM,CAAEA,CAAAA,CAAQ,KAAA,CAAM,OAAA,CAAU,MAAM,CAAA,CAC7DA,CAAAA,CAAQ,OAAA,CAAWtiB,CAAAA,EAAM,CACvBA,CAAAA,CAAE,eAAA,EAAgB,CAClB,IAAMkiB,CAAAA,CAASP,EAAe,CAAA,CAAIA,CAAAA,CAAe,CAAA,CAAID,CAAAA,CAAU,MAAA,CAAS,CAAA,CACxEO,GAAc,CACdL,CAAAA,CAAWM,CAAM,EACnB,CAAA,CAEA,IAAMK,EAAU,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CAC/CA,CAAAA,CAAQ,SAAA,CAAY,2DAAA,CACpBA,CAAAA,CAAQ,SAAA,CAAY,8KAAA,CACpBA,CAAAA,CAAQ,KAAA,CAAM,OAAA,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAA,CAAA,CAcxBA,EAAQ,YAAA,CAAe,IAAM,CAAEA,CAAAA,CAAQ,KAAA,CAAM,QAAU,IAAI,CAAA,CAC3DA,CAAAA,CAAQ,YAAA,CAAe,IAAM,CAAEA,CAAAA,CAAQ,MAAM,OAAA,CAAU,MAAM,EAC7DA,CAAAA,CAAQ,OAAA,CAAWviB,CAAAA,EAAM,CACvBA,EAAE,eAAA,EAAgB,CAClB,IAAMkiB,CAAAA,CAASP,CAAAA,CAAeD,EAAU,MAAA,CAAS,CAAA,CAAIC,CAAAA,CAAe,CAAA,CAAI,EACxEM,CAAAA,EAAc,CACdL,EAAWM,CAAM,EACnB,EAEAJ,CAAAA,CAAS,WAAA,CAAYK,CAAI,CAAA,CACzBL,EAAS,WAAA,CAAYQ,CAAO,EAC5BR,CAAAA,CAAS,WAAA,CAAYS,CAAO,EAC9B,CAEAT,CAAAA,CAAS,WAAA,CAAYC,CAAG,CAAA,CACxBD,CAAAA,CAAS,YAAYE,CAAI,CAAA,CACzB,SAAS,IAAA,CAAK,WAAA,CAAYF,CAAQ,CAAA,CAGlC,WAAW,IAAM,CACfE,EAAK,KAAA,CAAM,UAAA,CAAa,oBACxBA,CAAAA,CAAK,KAAA,CAAM,QAAU,IACvB,CAAA,CAAG,GAAI,EACT,CAwBA,SAAS5M,EAAAA,CAAeC,CAAAA,CAAuB,CAC7C,GAAIA,CAAAA,GAAU,CAAA,CAAG,OAAO,UACxB,IAAMmN,CAAAA,CAAI,KACJC,CAAAA,CAAQ,CAAC,QAAS,IAAA,CAAM,IAAA,CAAM,IAAI,CAAA,CAClCntB,EAAI,IAAA,CAAK,KAAA,CAAM,KAAK,GAAA,CAAI+f,CAAK,EAAI,IAAA,CAAK,GAAA,CAAImN,CAAC,CAAC,EAClD,OAAO,IAAA,CAAK,MAAOnN,CAAAA,CAAQ,IAAA,CAAK,IAAImN,CAAAA,CAAGltB,CAAC,EAAK,GAAG,CAAA,CAAI,IAAM,GAAA,CAAMmtB,CAAAA,CAAMntB,CAAC,CACzE,CAKA,SAASggB,EAAAA,CAAYoN,CAAAA,CAAsB,CACzC,OAAIA,EAAK,UAAA,CAAW,QAAQ,EAAU,iBAAA,CAClCA,CAAAA,CAAK,WAAW,QAAQ,CAAA,CAAU,WAAA,CAClCA,CAAAA,CAAK,WAAW,QAAQ,CAAA,CAAU,YAClCA,CAAAA,CAAK,QAAA,CAAS,KAAK,CAAA,CAAU,WAAA,CAC7BA,CAAAA,CAAK,QAAA,CAAS,MAAM,CAAA,EAAKA,CAAAA,CAAK,SAAS,UAAU,CAAA,CAAU,YAC3DA,CAAAA,CAAK,QAAA,CAAS,OAAO,CAAA,EAAKA,CAAAA,CAAK,SAAS,OAAO,CAAA,CAAU,YACzDA,CAAAA,CAAK,QAAA,CAAS,cAAc,CAAA,EAAKA,CAAAA,CAAK,QAAA,CAAS,YAAY,EAAU,iBAAA,CACrEA,CAAAA,CAAK,SAAS,KAAK,CAAA,EAAKA,EAAK,QAAA,CAAS,KAAK,CAAA,EAAKA,CAAAA,CAAK,SAAS,YAAY,CAAA,CAAU,kBACpFA,CAAAA,CAAK,QAAA,CAAS,MAAM,CAAA,CAAU,WAAA,CAC3B,WACT,CAKA,SAASzK,EAAAA,CAAQyK,CAAAA,CAAuB,CACtC,OAAOA,CAAAA,CAAK,WAAW,QAAQ,CACjC,CAEO,SAASC,GAAmB,CACjC,WAAA,CAAAhS,EAAc,EAAC,CACf,SAAAiS,CAAAA,CACA,QAAA,CAAAlb,CAAAA,CACA,SAAA,CAAAmb,EAAY,EAAA,CACZ,YAAA,CAAAC,EACA,QAAA,CAAAC,CAAAA,CAAW,EACb,CAAA,CAA4B,CAC1B,GAAM,CAAC/c,EAAYgd,CAAa,CAAA,CAAIrlB,SAAS,KAAK,CAAA,CAC5C,CAACslB,CAAAA,CAAaC,CAAc,CAAA,CAAIvlB,QAAAA,CAAS,KAAK,CAAA,CAC9C,CAAC7H,EAAOqtB,CAAQ,CAAA,CAAIxlB,SAAwB,IAAI,CAAA,CAChDylB,EAAenkB,MAAAA,CAAyB,IAAI,EAE5CokB,CAAAA,CAAiBpkB,MAAAA,CAAO0R,CAAW,CAAA,CACzC0S,CAAAA,CAAe,QAAU1S,CAAAA,CAGzB,IAAM2S,CAAAA,CAAmB9W,WAAAA,CAAY,CAACuL,CAAAA,CAAwB/X,CAAAA,GAAwB,CACpFA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,EAAgB,CAElB,IAAMoG,EAAmBid,CAAAA,CAAe,OAAA,CAAQ,OAAOjT,CAAAA,EAAK6H,EAAAA,CAAQ7H,EAAE,IAAI,CAAC,CAAA,CACrEuR,CAAAA,CAAevb,EAAiB,SAAA,CAAUgK,CAAAA,EAAKA,EAAE,EAAA,GAAO2H,CAAAA,CAAW,EAAE,CAAA,CAErEwL,CAAAA,CAAkBC,GAAqB,CAC3C,IAAMC,EAAOJ,CAAAA,CAAe,OAAA,CAAQ,OAAOjT,EAAAA,EAAK6H,EAAAA,CAAQ7H,GAAE,IAAI,CAAC,CAAA,CACzDsT,EAAAA,CAASD,EAAKD,CAAQ,CAAA,CACxBE,IACFnC,EAAAA,CAAmBmC,EAAAA,CAAO,IAAKA,EAAAA,CAAO,IAAA,CAAMD,CAAAA,CAAMD,CAAAA,CAAUD,CAAc,EAE9E,CAAA,CAEAhC,GAAmBxJ,CAAAA,CAAW,GAAA,CAAKA,EAAW,IAAA,CAAM3R,CAAAA,CAAkBub,CAAAA,CAAc4B,CAAc,EACpG,CAAA,CAAG,EAAE,CAAA,CAGCI,CAAAA,CAAgBnX,YACnBwI,CAAAA,EAAuD,CACtD,IAAM4O,CAAAA,CAAgB,GAChBhoB,CAAAA,CAAmB,GAGzB,OAAI+U,CAAAA,CAAY,OAASqE,CAAAA,CAAM,MAAA,CAAS+N,CAAAA,EACtCnnB,CAAAA,CAAO,KAAK,CAAA,QAAA,EAAWmnB,CAAQ,gBAAgB,CAAA,CACxC,CAAE,MAAAa,CAAAA,CAAO,MAAA,CAAAhoB,CAAO,CAAA,GAGzBoZ,EAAM,OAAA,CAASvY,CAAAA,EAAS,CAGtB,GADeA,CAAAA,CAAK,KAAQ,OAAA,CACfomB,CAAAA,CAAW,CACtBjnB,CAAAA,CAAO,KAAK,CAAA,EAAGa,CAAAA,CAAK,IAAI,CAAA,mBAAA,EAAsBomB,CAAS,KAAK,CAAA,CAC5D,MACF,CAGA,GAAIC,GAAgB,CAACA,CAAAA,CAAa,KAAMJ,CAAAA,EAASjmB,CAAAA,CAAK,KAAK,KAAA,CAAMimB,CAAI,CAAC,CAAA,CAAG,CACvE9mB,CAAAA,CAAO,IAAA,CAAK,GAAGa,CAAAA,CAAK,IAAI,wBAAwB,CAAA,CAChD,MACF,CAEAmnB,CAAAA,CAAM,KAAKnnB,CAAI,EACjB,CAAC,CAAA,CAEM,CAAE,MAAAmnB,CAAAA,CAAO,MAAA,CAAAhoB,CAAO,CAAA,CACzB,EACA,CAAC+U,CAAAA,CAAY,OAAQoS,CAAAA,CAAUF,CAAAA,CAAWC,CAAY,CACxD,CAAA,CAGMe,EAAerX,WAAAA,CACnB,MAAOwI,GAAkB,CACvB,GAAM,CAAE,KAAA,CAAA4O,CAAAA,CAAO,OAAAhoB,CAAO,CAAA,CAAI+nB,CAAAA,CAAc3O,CAAK,EAE7C,GAAIpZ,CAAAA,CAAO,OAAS,CAAA,CAAG,CACrBunB,EAASvnB,CAAAA,CAAO,IAAA,CAAK,IAAI,CAAC,EAC1B,UAAA,CAAW,IAAMunB,EAAS,IAAI,CAAA,CAAG,GAAI,CAAA,CACrC,MACF,CAEA,GAAIS,EAAM,MAAA,GAAW,CAAA,CAErB,CAAAV,CAAAA,CAAe,IAAI,EACnBC,CAAAA,CAAS,IAAI,EAEb,GAAI,CACF,MAAMP,CAAAA,GAAWgB,CAAK,EACxB,CAAA,MAASE,CAAAA,CAAK,CACZX,CAAAA,CAASW,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAI,QAAU,eAAe,CAAA,CAC7D,WAAW,IAAMX,CAAAA,CAAS,IAAI,CAAA,CAAG,GAAI,EACvC,CAAA,OAAE,CACAD,CAAAA,CAAe,KAAK,EACtB,CAAA,CACF,CAAA,CACA,CAACS,CAAAA,CAAef,CAAQ,CAC1B,CAAA,CAGMmB,EAAkBvX,WAAAA,CAAaxM,CAAAA,EAAuB,CAC1DA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,GACFgjB,CAAAA,CAAc,IAAI,EACpB,CAAA,CAAG,EAAE,CAAA,CAEC7N,CAAAA,CAAkB3I,YAAaxM,CAAAA,EAAuB,CAC1DA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,GACFgjB,CAAAA,CAAc,KAAK,EACrB,CAAA,CAAG,EAAE,CAAA,CAEC9N,EAAiB1I,WAAAA,CAAaxM,CAAAA,EAAuB,CACzDA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,eAAA,GACJ,CAAA,CAAG,EAAE,CAAA,CAECgkB,EAAaxX,WAAAA,CAChBxM,CAAAA,EAAuB,CACtBA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,iBAAgB,CAClBgjB,CAAAA,CAAc,KAAK,CAAA,CAEnB,IAAMhO,EAAQ,KAAA,CAAM,IAAA,CAAKhV,CAAAA,CAAE,YAAA,CAAa,KAAK,CAAA,CAC7C6jB,CAAAA,CAAa7O,CAAK,EACpB,CAAA,CACA,CAAC6O,CAAY,CACf,CAAA,CAGM5O,CAAAA,CAAwBzI,YAC3BxM,CAAAA,EAA2C,CAC1C,IAAMgV,CAAAA,CAAQhV,CAAAA,CAAE,OAAO,KAAA,CAAQ,KAAA,CAAM,IAAA,CAAKA,CAAAA,CAAE,OAAO,KAAK,CAAA,CAAI,EAAC,CAC7D6jB,CAAAA,CAAa7O,CAAK,CAAA,CAEdoO,CAAAA,CAAa,UACfA,CAAAA,CAAa,OAAA,CAAQ,MAAQ,EAAA,EAEjC,CAAA,CACA,CAACS,CAAY,CACf,EAGMI,CAAAA,CAAczX,WAAAA,CAAY,IAAM,CACpC4W,EAAa,OAAA,EAAS,KAAA,GACxB,CAAA,CAAG,EAAE,CAAA,CAGCc,CAAAA,CAAe1X,WAAAA,CAClB2X,CAAAA,EAAyB,CACpB,OAAA,CAAQ,kDAAkD,GAC5Dzc,CAAAA,GAAWyc,CAAY,EAE3B,CAAA,CACA,CAACzc,CAAQ,CACX,EAEA,OACEnJ,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CAEb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,UAAW,CAAA,oBAAA,EAAuByH,CAAAA,CAAa,WAAa,EAAE,CAAA,CAAA,EAAIid,EAAc,WAAA,CAAc,EAAE,GAChG,WAAA,CAAac,CAAAA,CACb,WAAA,CAAa5O,CAAAA,CACb,WAAYD,CAAAA,CACZ,MAAA,CAAQ8O,EACR,OAAA,CAASC,CAAAA,CAET,UAAA5mB,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK+lB,CAAAA,CACL,KAAK,MAAA,CACL,QAAA,CAAQ,KACR,QAAA,CAAUnO,CAAAA,CACV,MAAO,CAAE,OAAA,CAAS,MAAO,CAAA,CACzB,OAAQ6N,CAAAA,EAAc,IAAA,CAAK,GAAG,CAAA,CAChC,CAAA,CAEAzlB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BACZ,QAAA,CAAA4lB,CAAAA,CACC1kB,KAAA6G,QAAAA,CAAA,CACE,UAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,oBAAA,CAAqB,CAAA,CACpCA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,0BAAA,CAA2B,QAAA,CAAA,cAAA,CAAY,GACtD,CAAA,CAEAkB,IAAAA,CAAA6G,SAAA,CACE,QAAA,CAAA,CAAA7G,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CACN,SAAA,CAAU,2BAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QACC,CAAA,CAAE,sKAAA,CACF,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,QACd,cAAA,CAAe,OAAA,CACjB,EACAA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAE,gBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,IACZ,aAAA,CAAc,OAAA,CACd,eAAe,OAAA,CACjB,CAAA,CACAA,IAAC,MAAA,CAAA,CACC,CAAA,CAAE,UAAA,CACF,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CACZ,cAAc,OAAA,CACd,cAAA,CAAe,QACjB,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,0BAAA,CACV,QAAA,CAAA2I,EAAa,iBAAA,CAAoB,wBAAA,CACpC,EACA3I,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,6BAAA,CAA8B,QAAA,CAAA,oBAAA,CAAkB,EAC7DkB,IAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,0BAAA,CAA2B,QAAA,CAAA,CAAA,MAAA,CACjCskB,EAAU,YAAA,CAAMlS,CAAAA,CAAY,MAAA,CAAO,GAAA,CAAEoS,EAAS,QAAA,CAAA,CACrD,CAAA,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CAGCjtB,GACCyI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,uBAAA,CAAwB,QAAA,CAAA,cAAA,CAAE,EAC1CA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAyB,SAAAvH,CAAAA,CAAM,CAAA,CAAA,CACjD,EAID6a,CAAAA,CAAY,MAAA,CAAS,GACpBtT,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,iBAAA,CACZ,QAAA,CAAAsT,EAAY,GAAA,CAAKoH,CAAAA,EAChBxZ,KAAC,KAAA,CAAA,CAAwB,SAAA,CAAU,kBACjC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qBACZ,QAAA,CAAA4a,EAAAA,CAAQF,EAAW,IAAI,CAAA,EAAKA,EAAW,GAAA,CACtCxZ,IAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,SAAA,CAAU,0BAAA,CACV,QAAUyB,CAAAA,EAAMsjB,CAAAA,CAAiBvL,EAAY/X,CAAC,CAAA,CAC9C,KAAA,CAAM,yBAAA,CAEN,UAAA3C,GAAAA,CAAC,KAAA,CAAA,CACC,IAAK0a,CAAAA,CAAW,YAAA,EAAgBA,EAAW,GAAA,CAC3C,GAAA,CAAKA,EAAW,IAAA,CAChB,SAAA,CAAU,uBACZ,CAAA,CACA1a,GAAAA,CAAC,OAAI,SAAA,CAAU,8BAAA,CACb,SAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,OAAO,IAAA,CAAK,OAAA,CAAQ,YAAY,IAAA,CAAK,MAAA,CAAO,MAAM,4BAAA,CAChE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,YAAA,CAAa,MAAA,CAAO,eAAe,WAAA,CAAY,GAAA,CAAI,cAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CACvGA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,aAAa,MAAA,CAAO,cAAA,CAAe,YAAY,GAAA,CAAI,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,QAAO,CAAA,CACvGA,GAAAA,CAAC,QAAK,CAAA,CAAE,aAAA,CAAc,OAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAAI,aAAA,CAAc,QAAQ,cAAA,CAAe,OAAA,CAAO,EACxGA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,aAAA,CAAc,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,IAAI,aAAA,CAAc,OAAA,CAAQ,eAAe,OAAA,CAAO,CAAA,CAAA,CAC1G,EACF,CAAA,CAAA,CACF,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,iBAAA,CAAmB,QAAA,CAAAiY,GAAYyC,CAAAA,CAAW,IAAI,EAAE,CAAA,CAEnE,CAAA,CAEAxZ,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KACC,IAAA,CAAM0a,CAAAA,CAAW,IACjB,MAAA,CAAO,QAAA,CACP,GAAA,CAAI,qBAAA,CACJ,UAAU,iBAAA,CACV,KAAA,CAAOA,EAAW,IAAA,CAEjB,QAAA,CAAAA,EAAW,IAAA,CACd,CAAA,CACAxZ,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,iBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kBAAmB,QAAA,CAAA+X,EAAAA,CAAe2C,CAAAA,CAAW,IAAI,EAAE,CAAA,CACnE1a,GAAAA,CAAC,QAAK,SAAA,CAAU,sBAAA,CAAuB,kBAAC,CAAA,CACxCA,GAAAA,CAAC,QAAK,SAAA,CAAU,iBAAA,CACb,aAAI,IAAA,CAAK0a,CAAAA,CAAW,UAAU,CAAA,CAAE,kBAAA,GACnC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEA1a,GAAAA,CAAC,UACC,OAAA,CAAS,IAAM6mB,EAAanM,CAAAA,CAAW,EAAE,EACzC,SAAA,CAAU,mBAAA,CACV,KAAA,CAAM,mBAAA,CACN,KAAK,QAAA,CAEL,QAAA,CAAA1a,IAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,KAAA,CAAM,6BAEN,QAAA,CAAAA,GAAAA,CAAC,QACC,CAAA,CAAE,sBAAA,CACF,OAAO,cAAA,CACP,WAAA,CAAY,IACZ,aAAA,CAAc,OAAA,CACd,eAAe,OAAA,CACjB,CAAA,CACF,EACF,CAAA,CAAA,CAAA,CApEQ0a,CAAAA,CAAW,EAqErB,CACD,EACH,CAAA,CAAA,CAIJ,CAEJ,CC5eO,SAASqM,EAAAA,CAAgB,CAC9B,IAAA,CAAAnrB,CAAAA,CACA,OAAA2F,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,QAAA,CAAA9K,EACA,QAAA,CAAA+B,CAAAA,CACA,eAAAtF,CAAAA,CAAiB,GACjB,QAAA,CAAA0O,CAAAA,CAAW,EAAC,CACZ,WAAAuT,CAAAA,CAAa,GACb,UAAA,CAAAC,CAAAA,CAAa,EAAC,CACd,WAAA,CAAA3T,CAAAA,CAAc,GACd,YAAA,CAAAI,CAAAA,CACA,gBAAAwT,CAAAA,CACA,mBAAA,CAAA3T,EACA,kBAAA,CAAAC,CAAAA,CACA,iBAAA,CAAA2T,CAAAA,CACA,mBAAAC,CAAAA,CACA,gBAAA,CAAAC,EACA,aAAA,CAAAC,CAAAA,CAAgB,QAClB,CAAA,CAAyB,CACvB,GAAM,CAACC,EAAWC,CAAY,CAAA,CAAIlnB,SAAkB,SAAS,CAAA,CACvD,CAACuM,CAAAA,CAAWC,CAAY,EAAIxM,QAAAA,CAAS,KAAK,EAC1C,CAACmnB,CAAAA,CAAYC,CAAa,CAAA,CAAIpnB,QAAAA,CAAwB,EAAE,CAAA,CACxD,CAACqnB,CAAAA,CAAYC,CAAa,CAAA,CAAItnB,QAAAA,CAAS,EAAE,CAAA,CACzC,CAACunB,EAAWC,CAAY,CAAA,CAAIxnB,QAAAA,CAAS,KAAK,EAC1C,CAACynB,CAAAA,CAAeC,CAAgB,CAAA,CAAI1nB,QAAAA,CAIvC,EAAE,CAAA,CAEL,GAAI,CAACiB,GAAU,CAAC3F,CAAAA,CAAM,OAAO,IAAA,CAE7B,IAAMioB,EAAc1U,WAAAA,CAAY,IAAM,CACpCrC,CAAAA,CAAa,KAAK,EAClB4a,CAAAA,CAAc,EAAE,CAAA,CAChBF,CAAAA,CAAa,SAAS,CAAA,CACtBI,CAAAA,CAAc,EAAE,CAAA,CAChBI,EAAiB,EAAE,EACnB5U,CAAAA,GACF,EAAG,CAACA,CAAO,CAAC,CAAA,CAENnG,GAAakC,WAAAA,CAAY,IAAM,CAC/B7G,CAAAA,EAAY,MAAA,CAAO,KAAKmf,CAAU,CAAA,CAAE,MAAA,CAAS,CAAA,GAC/Cnf,EAAS1M,CAAAA,CAAK,EAAA,CAAI6rB,CAAU,CAAA,CAC5BC,CAAAA,CAAc,EAAE,CAAA,CAChB5a,EAAa,KAAK,CAAA,EAEtB,EAAG,CAAClR,CAAAA,CAAK,GAAI6rB,CAAAA,CAAYnf,CAAQ,CAAC,CAAA,CAE5Bue,EAAAA,CAAe1X,WAAAA,CAAY,IAAM,CAEnC9E,CAAAA,EACA,MAAA,CAAO,QAAQ,4CAA4C,CAAA,GAE3DA,EAASzO,CAAAA,CAAK,EAAE,CAAA,CAChBioB,CAAAA,IAEJ,CAAA,CAAG,CAACjoB,EAAK,EAAA,CAAIyO,CAAAA,CAAUwZ,CAAW,CAAC,CAAA,CAE7BoE,EAAAA,CAAmB9Y,WAAAA,CAAY,IAAM,CACrCuE,CAAAA,EAAgBiU,EAAW,IAAA,EAAK,GAClCjU,EAAa9X,CAAAA,CAAK,EAAA,CAAI+rB,CAAAA,CAAW,IAAA,EAAM,CAAA,CACvCC,CAAAA,CAAc,EAAE,CAAA,EAEpB,CAAA,CAAG,CAAChsB,CAAAA,CAAK,EAAA,CAAI+rB,CAAAA,CAAYjU,CAAY,CAAC,CAAA,CAEhCwU,EAAAA,CAAwB/Y,YAAY,SAAY,CACpD,GAAKgY,CAAAA,CACL,CAAAW,CAAAA,CAAa,IAAI,EACjB,GAAI,CACF,IAAMK,CAAAA,CAAc,MAAMhB,EAAkBvrB,CAAI,CAAA,CAChDosB,CAAAA,CAAkBpY,CAAAA,GAAU,CAAE,GAAGA,CAAAA,CAAM,UAAWuY,CAAY,CAAA,CAAE,EAClE,CAAA,MAAS1vB,CAAAA,CAAO,CACd,OAAA,CAAQ,KAAA,CAAM,8BAA+BA,CAAK,EACpD,QAAE,CACAqvB,CAAAA,CAAa,KAAK,EACpB,CAAA,CACF,CAAA,CAAG,CAAClsB,EAAMurB,CAAiB,CAAC,EAEtBiB,EAAAA,CAAyBjZ,WAAAA,CAAY,SAAY,CACrD,GAAKiY,CAAAA,CACL,CAAAU,EAAa,IAAI,CAAA,CACjB,GAAI,CACF,IAAMO,EAAW,MAAMjB,CAAAA,CAAmBxrB,CAAI,CAAA,CAC9CosB,EAAkBpY,CAAAA,GAAU,CAAE,GAAGA,CAAAA,CAAM,QAAA,CAAAyY,CAAS,CAAA,CAAE,EACpD,OAAS5vB,CAAAA,CAAO,CACd,QAAQ,KAAA,CAAM,8BAAA,CAAgCA,CAAK,EACrD,CAAA,OAAE,CACAqvB,CAAAA,CAAa,KAAK,EACpB,CAAA,CACF,EAAG,CAAClsB,CAAAA,CAAMwrB,CAAkB,CAAC,CAAA,CAEvBkB,GAAuBnZ,WAAAA,CAAY,SAAY,CACnD,GAAKkY,EACL,CAAAS,CAAAA,CAAa,IAAI,CAAA,CACjB,GAAI,CACF,IAAMS,CAAAA,CAAS,MAAMlB,CAAAA,CAAiBzrB,CAAI,CAAA,CAC1CosB,CAAAA,CAAkBpY,IAAU,CAAE,GAAGA,EAAM,MAAA,CAAA2Y,CAAO,EAAE,EAClD,CAAA,MAAS9vB,EAAO,CACd,OAAA,CAAQ,MAAM,4BAAA,CAA8BA,CAAK,EACnD,CAAA,OAAE,CACAqvB,CAAAA,CAAa,KAAK,EACpB,CAAA,CACF,CAAA,CAAG,CAAClsB,CAAAA,CAAMyrB,CAAgB,CAAC,CAAA,CAErBmB,CAAAA,CAAc,CAAE,GAAG5sB,EAAM,GAAG6rB,CAAW,EAEvC3iB,CAAAA,CAAgBC,CAAAA,CAAe,OAAQK,CAAAA,EAC3CojB,CAAAA,CAAY,eAAA,EAAiB,QAAA,CAASpjB,EAAK,EAAE,CAC/C,EAEA,OACEpF,GAAAA,CAACE,GAAA,CACC,QAAA,CAAAF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,qBAAA,CAAsB,OAAA,CAAS6jB,EAC5C,QAAA,CAAA3iB,IAAAA,CAAC,OACC,SAAA,CAAU,mBAAA,CACV,OAAA,CAAUyB,CAAAA,EAAMA,EAAE,eAAA,EAAgB,CAGlC,UAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,oBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,2BACV,KAAA,CAAO,CACL,UAAA,CACEwoB,CAAAA,CAAY,WAAa,QAAA,CACrB,SAAA,CACAA,EAAY,QAAA,GAAa,MAAA,CACzB,UACAA,CAAAA,CAAY,QAAA,GAAa,SACzB,SAAA,CACA,SACR,EACF,CAAA,CACC3b,CAAAA,CACC7M,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,OACL,KAAA,CAAOynB,CAAAA,CAAW,KAAA,EAASe,CAAAA,CAAY,MACvC,QAAA,CAAW7lB,CAAAA,EACT+kB,EAAc,CAAE,GAAGD,EAAY,KAAA,CAAO9kB,CAAAA,CAAE,MAAA,CAAO,KAAM,CAAC,CAAA,CAExD,SAAA,CAAU,0BACV,WAAA,CAAY,YAAA,CACd,EAEA3C,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,mBAAA,CAAqB,SAAAwoB,CAAAA,CAAY,KAAA,CAAM,GAEzD,CAAA,CAEAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,4BAAA,CACZ,UAAA2L,CAAAA,CACC3L,IAAAA,CAAA6G,SAAA,CACE,QAAA,CAAA,CAAA/H,IAAC,QAAA,CAAA,CACC,OAAA,CAASiN,GACT,SAAA,CAAU,yCAAA,CACX,QAAA,CAAA,MAAA,CAED,CAAA,CACAjN,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb8M,CAAAA,CAAa,KAAK,CAAA,CAClB4a,CAAAA,CAAc,EAAE,EAClB,CAAA,CACA,SAAA,CAAU,kBACX,QAAA,CAAA,QAAA,CAED,CAAA,CAAA,CACF,EAEAxmB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM4L,EAAa,IAAI,CAAA,CAChC,UAAU,iBAAA,CAEV,QAAA,CAAA,CAAA5L,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,uDAAA,CAAwD,CAAA,CAChEA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,wDAAwD,CAAA,CAAA,CAClE,CAAA,CAAM,MAAA,CAAA,CAER,CAAA,CAGFkB,KAAC,QAAA,CAAA,CAAO,OAAA,CAAS2lB,GAAc,SAAA,CAAU,wCAAA,CACvC,UAAA3lB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,eAAe,CAAA,CAChCA,GAAAA,CAAC,QAAK,CAAA,CAAE,0EAAA,CAA2E,CAAA,CAAA,CACrF,CAAA,CAAM,UAER,CAAA,CAEAA,GAAAA,CAAC,UAAO,OAAA,CAAS6jB,CAAAA,CAAa,UAAU,uBAAA,CACtC,QAAA,CAAA3iB,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,EACpCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GACtC,CAAA,CACF,CAAA,CAAA,CACF,GACF,CAAA,CAGAkB,IAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,UACC,OAAA,CAAS,IAAMsmB,EAAa,SAAS,CAAA,CACrC,UAAW,CAAA,gBAAA,EAAmBD,CAAAA,GAAc,SAAA,CAAY,QAAA,CAAW,EAAE,CAAA,CAAA,CAErE,QAAA,CAAA,CAAArmB,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,uDAAA,CAAwD,CAAA,CAChEA,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,iBAAiB,CAAA,CAClCA,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,KAAK,CAAA,CACrCA,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,KAAK,CAAA,CACrCA,GAAAA,CAAC,YAAS,MAAA,CAAO,cAAA,CAAe,GAClC,CAAA,CAAM,SAAA,CAAA,CAER,EAEAkB,IAAAA,CAAC,QAAA,CAAA,CACC,QAAS,IAAMsmB,CAAAA,CAAa,UAAU,CAAA,CACtC,SAAA,CAAW,CAAA,gBAAA,EAAmBD,CAAAA,GAAc,WAAa,QAAA,CAAW,EAAE,GAEtE,QAAA,CAAA,CAAAvnB,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,0DAAA,CAA2D,CAAA,CACrE,EAAM,UAAA,CAELyT,CAAAA,CAAS,OAAS,CAAA,EACjBzT,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,wBAAyB,QAAA,CAAAyT,CAAAA,CAAS,OAAO,CAAA,CAAA,CAE7D,CAAA,CAEAvS,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMsmB,CAAAA,CAAa,UAAU,CAAA,CACtC,SAAA,CAAW,mBAAmBD,CAAAA,GAAc,UAAA,CAAa,SAAW,EAAE,CAAA,CAAA,CAEtE,QAAA,CAAA,CAAAvnB,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAAA,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,kCAAkC,CAAA,CACrD,CAAA,CAAM,WAELgnB,CAAAA,CAAW,MAAA,CAAS,GACnBhnB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,uBAAA,CAAyB,QAAA,CAAAgnB,EAAW,MAAA,CAAO,CAAA,CAAA,CAE/D,CAAA,CAEA9lB,IAAAA,CAAC,UACC,OAAA,CAAS,IAAMsmB,EAAa,aAAa,CAAA,CACzC,UAAW,CAAA,gBAAA,EAAmBD,CAAAA,GAAc,aAAA,CAAgB,QAAA,CAAW,EAAE,CAAA,CAAA,CAEzE,QAAA,CAAA,CAAAvnB,IAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,+GAAA,CAAgH,CAAA,CAC1H,EAAM,aAAA,CAELsT,CAAAA,CAAY,OAAS,CAAA,EACpBtT,GAAAA,CAAC,QAAK,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAAsT,CAAAA,CAAY,OAAO,CAAA,CAAA,CAEhE,CAAA,CAEApS,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMsmB,CAAAA,CAAa,IAAI,CAAA,CAChC,SAAA,CAAW,mBAAmBD,CAAAA,GAAc,IAAA,CAAO,SAAW,EAAE,CAAA,CAAA,CAEhE,UAAArmB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,4BAAA,CAA6B,EACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,mBAAA,CAAoB,CAAA,CAC5BA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,mBAAA,CAAoB,CAAA,CAAA,CAC9B,EAAM,aAAA,CAENA,GAAAA,CAAC,QAAK,SAAA,CAAU,gDAAA,CAAiD,QAAA,CAAA,IAAA,CAEjE,CAAA,CAAA,CACF,GACF,CAAA,CAGAkB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CAEZ,UAAAqmB,CAAAA,GAAc,SAAA,EACbrmB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,qBAAA,CAEb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,oBAAoB,QAAA,CAAA,aAAA,CAAW,CAAA,CAC/C6M,EACC7M,GAAAA,CAAC,UAAA,CAAA,CACC,MAAOynB,CAAAA,CAAW,WAAA,EAAee,CAAAA,CAAY,WAAA,EAAe,GAC5D,QAAA,CAAW7lB,CAAAA,EACT+kB,EAAc,CAAE,GAAGD,EAAY,WAAA,CAAa9kB,CAAAA,CAAE,MAAA,CAAO,KAAM,CAAC,CAAA,CAE9D,SAAA,CAAU,uBACV,WAAA,CAAY,sBAAA,CACZ,KAAM,CAAA,CACR,CAAA,CAEA3C,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,kBAAA,CACV,QAAA,CAAAwoB,EAAY,WAAA,EAAe,gBAAA,CAC9B,GAEJ,CAAA,CAGAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,mBAAA,CAAoB,QAAA,CAAA,aAAA,CAAW,EAC/C6M,CAAAA,CACC7M,GAAAA,CAAC,QAAA,CAAA,CACC,QAAA,CAAQ,KACR,KAAA,CAAOynB,CAAAA,CAAW,iBAAmBe,CAAAA,CAAY,eAAA,EAAmB,EAAC,CACrE,QAAA,CAAW7lB,CAAAA,EAAM,CACf,IAAM8lB,CAAAA,CAAW,KAAA,CAAM,KAAK9lB,CAAAA,CAAE,MAAA,CAAO,gBAAkBiC,CAAAA,EAAWA,CAAAA,CAAO,KAAK,CAAA,CAC9E8iB,EAAc,CACZ,GAAGD,EACH,eAAA,CAAiBgB,CACnB,CAAC,EACH,CAAA,CACA,UAAU,sBAAA,CACV,KAAA,CAAO,CAAE,MAAA,CAAQ,OAAA,CAAS,QAAS,UAAW,CAAA,CAE7C,SAAA1jB,CAAAA,CAAe,GAAA,CAAKK,CAAAA,EACnBpF,GAAAA,CAAC,UAAqB,KAAA,CAAOoF,CAAAA,CAAK,GAC/B,QAAA,CAAAA,CAAAA,CAAK,MADKA,CAAAA,CAAK,EAElB,CACD,CAAA,CACH,EAEApF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CACZ,QAAA,CAAA8E,EAAc,MAAA,CAAS,CAAA,CACtBA,CAAAA,CAAc,GAAA,CAAKM,GACjBlE,IAAAA,CAAC,KAAA,CAAA,CAAkB,UAAU,kBAAA,CAC3B,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,0BACV,KAAA,CAAO,CAAE,WAAYoF,CAAAA,CAAK,KAAM,EAE/B,QAAA,CAAAA,CAAAA,CAAK,SACR,CAAA,CACApF,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAoF,EAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAPTA,EAAK,EAQf,CACD,EAEDpF,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAA,CAAoB,sBAAU,CAAA,CAElD,CAAA,CAAA,CAEJ,EAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,qBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,mBAAA,CAAoB,QAAA,CAAA,UAAA,CAAQ,EAC5C6M,CAAAA,CACC3L,IAAAA,CAAC,UACC,KAAA,CAAOumB,CAAAA,CAAW,QAAA,EAAYe,CAAAA,CAAY,UAAY,EAAA,CACtD,QAAA,CAAW7lB,GACT+kB,CAAAA,CAAc,CACZ,GAAGD,CAAAA,CACH,QAAA,CAAW9kB,CAAAA,CAAE,MAAA,CAAO,OAAS,MAC/B,CAAC,EAEH,SAAA,CAAU,sBAAA,CACV,MAAO,CAAE,MAAA,CAAQ,MAAA,CAAQ,OAAA,CAAS,UAAW,CAAA,CAE7C,QAAA,CAAA,CAAA3C,IAAC,QAAA,CAAA,CAAO,KAAA,CAAM,GAAG,QAAA,CAAA,MAAA,CAAI,CAAA,CACrBA,GAAAA,CAAC,QAAA,CAAA,CAAO,MAAM,KAAA,CAAM,QAAA,CAAA,KAAA,CAAG,EACvBA,GAAAA,CAAC,QAAA,CAAA,CAAO,MAAM,QAAA,CAAS,QAAA,CAAA,QAAA,CAAM,EAC7BA,GAAAA,CAAC,QAAA,CAAA,CAAO,MAAM,MAAA,CAAO,QAAA,CAAA,MAAA,CAAI,EACzBA,GAAAA,CAAC,QAAA,CAAA,CAAO,MAAM,QAAA,CAAS,QAAA,CAAA,QAAA,CAAM,CAAA,CAAA,CAC/B,CAAA,CAEAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OACC,SAAA,CAAU,0BAAA,CACV,KAAA,CAAO,CACL,WACEwoB,CAAAA,CAAY,QAAA,GAAa,SACrB,SAAA,CACAA,CAAAA,CAAY,WAAa,MAAA,CACzB,SAAA,CACAA,CAAAA,CAAY,QAAA,GAAa,SACzB,SAAA,CACA,SACR,EACF,CAAA,CACAxoB,GAAAA,CAAC,QAAM,QAAA,CAAAwoB,CAAAA,CAAY,UAAY,MAAA,CAAO,CAAA,CAAA,CACxC,GAEJ,CAAA,CAGAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,mBAAA,CAAoB,kBAAM,CAAA,CAC3CA,GAAAA,CAAC,OAAI,SAAA,CAAU,oBAAA,CACZ,SAAAwoB,CAAAA,CAAY,MAAA,EAAUA,CAAAA,CAAY,MAAA,CAAO,OAAS,CAAA,CACjDA,CAAAA,CAAY,OAAO,GAAA,CAAKrf,CAAAA,EACtBnJ,IAAC,MAAA,CAAA,CAAiB,SAAA,CAAU,uBAAA,CACzB,QAAA,CAAAmJ,GADQA,CAEX,CACD,EAEDnJ,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,mBAAA,CAAoB,QAAA,CAAA,WAAA,CAAS,EAEjD,CAAA,CAAA,CACF,CAAA,CAGAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SAAM,SAAA,CAAU,mBAAA,CAAoB,sBAAU,CAAA,CAC9C6M,CAAAA,CACC7M,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CACEynB,EAAW,SAAA,CACP,IAAI,KAAKA,CAAAA,CAAW,SAAS,EAAE,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,EAAE,CAAC,CAAA,CACzDe,EAAY,SAAA,CACZ,IAAI,KAAKA,CAAAA,CAAY,SAAS,CAAA,CAAE,WAAA,GAAc,KAAA,CAAM,GAAG,EAAE,CAAC,CAAA,CAC1D,GAEN,QAAA,CAAW7lB,CAAAA,EACT+kB,CAAAA,CAAc,CACZ,GAAGD,CAAAA,CACH,SAAA,CAAW9kB,EAAE,MAAA,CAAO,KAAA,EAAS,MAC/B,CAAC,CAAA,CAEH,SAAA,CAAU,sBAAA,CACV,MAAO,CAAE,MAAA,CAAQ,OAAQ,OAAA,CAAS,UAAW,EAC/C,CAAA,CAEA3C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBACb,QAAA,CAAAwoB,CAAAA,CAAY,UACT,IAAI,IAAA,CAAKA,EAAY,SAAS,CAAA,CAAE,oBAAmB,CACnD,SAAA,CACN,GAEJ,CAAA,CAEAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,mBAAA,CAAoB,oBAAQ,CAAA,CAC5C6M,CAAAA,CACC7M,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,OACL,KAAA,CACEynB,CAAAA,CAAW,OAAA,CACP,IAAI,KAAKA,CAAAA,CAAW,OAAO,EAAE,WAAA,EAAY,CAAE,MAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CACvDe,EAAY,OAAA,CACZ,IAAI,KAAKA,CAAAA,CAAY,OAAO,EAAE,WAAA,EAAY,CAAE,MAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CACxD,EAAA,CAEN,SAAW7lB,CAAAA,EACT+kB,CAAAA,CAAc,CACZ,GAAGD,CAAAA,CACH,OAAA,CAAS9kB,CAAAA,CAAE,OAAO,KAAA,EAAS,MAC7B,CAAC,CAAA,CAEH,SAAA,CAAU,uBACV,KAAA,CAAO,CAAE,MAAA,CAAQ,MAAA,CAAQ,QAAS,UAAW,CAAA,CAC/C,EAEA3C,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,kBAAA,CACb,QAAA,CAAAwoB,CAAAA,CAAY,OAAA,CACT,IAAI,IAAA,CAAKA,CAAAA,CAAY,OAAO,CAAA,CAAE,kBAAA,GAC9B,SAAA,CACN,CAAA,CAAA,CAEJ,GACF,CAAA,CAGAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,mBAAA,CAAoB,QAAA,CAAA,iBAAA,CAAe,CAAA,CACnD6M,CAAAA,CACC7M,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,SACL,GAAA,CAAI,GAAA,CACJ,KAAK,KAAA,CACL,KAAA,CAAOynB,CAAAA,CAAW,aAAA,EAAiBe,EAAY,aAAA,EAAiB,EAAA,CAChE,SAAW7lB,CAAAA,EACT+kB,CAAAA,CAAc,CACZ,GAAGD,CAAAA,CACH,aAAA,CAAe9kB,CAAAA,CAAE,OAAO,KAAA,CAAQ,UAAA,CAAWA,EAAE,MAAA,CAAO,KAAK,EAAI,MAC/D,CAAC,CAAA,CAEH,SAAA,CAAU,uBACV,KAAA,CAAO,CAAE,OAAQ,MAAA,CAAQ,OAAA,CAAS,UAAW,CAAA,CAC7C,WAAA,CAAY,aAAA,CACd,CAAA,CAEA3C,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBACb,QAAA,CAAAwoB,CAAAA,CAAY,eAAiB,eAAA,CAChC,CAAA,CAAA,CAEJ,CAAA,CAGAtnB,IAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,mBAAA,CAAoB,QAAA,CAAA,cAAA,CAAY,CAAA,CACjDA,GAAAA,CAAC,OAAI,SAAA,CAAU,0BAAA,CACZ,SAAAwoB,CAAAA,CAAY,YAAA,EAAgBA,EAAY,YAAA,CAAa,MAAA,CAAS,EAC7DA,CAAAA,CAAY,YAAA,CAAa,IAAKE,CAAAA,EAAQ,CACpC,IAAMniB,CAAAA,CAAQ,OAAOmiB,GAAQ,QAAA,CAAWA,CAAAA,CAAMA,CAAAA,CAAI,MAAA,CAClD,OACExnB,IAAAA,CAAC,MAAA,CAAA,CAAiB,UAAU,wBAAA,CAAyB,QAAA,CAAA,CAAA,QAAA,CAC5CqF,EAAM,KAAA,CAAM,EAAE,CAAA,CAAA,CAAA,CADZA,CAEX,CAEJ,CAAC,CAAA,CAEDvG,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,oBAAoB,QAAA,CAAA,iBAAA,CAAe,CAAA,CAEvD,CAAA,CAAA,CACF,CAAA,CAGAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SAAM,SAAA,CAAU,mBAAA,CAAoB,mBAAO,CAAA,CAC5CA,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CACb,SAAAwoB,CAAAA,CAAY,SAAA,CACT,IAAI,IAAA,CAAKA,CAAAA,CAAY,SAAS,CAAA,CAAE,gBAAe,CAC/C,SAAA,CACN,GACF,CAAA,CAAA,CACF,CAAA,CAIDjB,IAAc,UAAA,EACbrmB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,0BAAA,CACb,UAAAlB,GAAAA,CAAC,UAAA,CAAA,CACC,KAAA,CAAO2nB,CAAAA,CACP,SAAWhlB,CAAAA,EAAMilB,CAAAA,CAAcjlB,EAAE,MAAA,CAAO,KAAK,EAC7C,SAAA,CAAU,8BAAA,CACV,YAAY,oBAAA,CACZ,IAAA,CAAM,EACR,CAAA,CACA3C,GAAAA,CAAC,UACC,OAAA,CAASioB,EAAAA,CACT,SAAU,CAACN,CAAAA,CAAW,IAAA,EAAK,CAC3B,UAAU,yCAAA,CACX,QAAA,CAAA,aAAA,CAED,GACF,CAAA,CAGA3nB,GAAAA,CAAC,OAAI,SAAA,CAAU,2BAAA,CACZ,QAAA,CAAAyT,CAAAA,CAAS,OAAS,CAAA,CACjBA,CAAAA,CAAS,IAAKsH,CAAAA,EAAY,CACxB,IAAM4N,CAAAA,CAAS5jB,CAAAA,CAAe,IAAA,CAAMO,CAAAA,EAAMA,EAAE,EAAA,GAAOyV,CAAAA,CAAQ,QAAQ,CAAA,CACnE,OACE7Z,KAAC,KAAA,CAAA,CAAqB,SAAA,CAAU,qBAAA,CAC9B,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,4BAAA,CACZ,QAAA,CAAA,CAAAynB,CAAAA,EACC3oB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,0BACV,KAAA,CAAO,CAAE,WAAY2oB,CAAAA,CAAO,KAAM,CAAA,CAEjC,QAAA,CAAAA,EAAO,QAAA,CACV,CAAA,CAEFznB,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iCAAA,CACZ,QAAA,CAAA2oB,GAAQ,IAAA,EAAQ,SAAA,CACnB,EACA3oB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,0BAAA,CACZ,QAAA,CAAA,IAAI,KAAK+a,CAAAA,CAAQ,SAAS,EAAE,cAAA,EAAe,CAC9C,GACF,CAAA,CAAA,CACF,CAAA,CACCmM,GACClnB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMknB,EAAgBnM,CAAAA,CAAQ,EAAE,EACzC,SAAA,CAAU,4BAAA,CAEV,SAAA7Z,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,eAAe,CAAA,CAChCA,GAAAA,CAAC,QAAK,CAAA,CAAE,0EAAA,CAA2E,GACrF,CAAA,CACF,CAAA,CAAA,CAEJ,EACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,6BAAA,CAA+B,QAAA,CAAA+a,EAAQ,OAAA,CAAQ,CAAA,CAAA,CAAA,CAvCpDA,CAAAA,CAAQ,EAwClB,CAEJ,CAAC,CAAA,CAED7Z,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,KAAA,CAEZ,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,0DAAA,CAA2D,CAAA,CACrE,EACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,2BAAe,CAAA,CAClBA,GAAAA,CAAC,QAAK,QAAA,CAAA,yBAAA,CAAuB,CAAA,CAAA,CAC/B,EAEJ,CAAA,CAAA,CACF,CAAA,CAIDunB,IAAc,UAAA,EACbvnB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACZ,QAAA,CAAAgnB,CAAAA,CAAW,OAAS,CAAA,CACnBhnB,GAAAA,CAAC,OAAI,SAAA,CAAU,2BAAA,CACZ,QAAA,CAAAgnB,CAAAA,CAAW,IAAK4B,CAAAA,EAAa,CAC5B,IAAMxjB,CAAAA,CAAOL,CAAAA,CAAe,KAAMO,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOsjB,CAAAA,CAAS,MAAM,CAAA,CAChE,OACE1nB,KAAC,KAAA,CAAA,CAAsB,SAAA,CAAU,4BAC/B,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BACZ,QAAA,CAAA,CAAA0nB,CAAAA,CAAS,KAAK,QAAA,CAAS,SAAS,GAAK,QAAA,CACrCA,CAAAA,CAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,EAAK,cAAA,CACrCA,EAAS,IAAA,CAAK,QAAA,CAAS,OAAO,CAAA,EAAK,cAAA,CACnCA,CAAAA,CAAS,IAAA,CAAK,SAAS,SAAS,CAAA,EAAK,kBACrCA,CAAAA,CAAS,IAAA,CAAK,SAAS,SAAS,CAAA,EAAK,WAAA,CACrCA,CAAAA,CAAS,KAAK,QAAA,CAAS,UAAU,GAAK,WAAA,CACtCA,CAAAA,CAAS,KAAK,QAAA,CAAS,UAAU,GAAK,WAAA,CACtCA,CAAAA,CAAS,KAAK,QAAA,CAAS,OAAO,GAAK,iBAAA,CACnCA,CAAAA,CAAS,KAAK,QAAA,CAAS,YAAY,CAAA,EAAK,WAAA,CAAA,CAC3C,EACA1nB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,8BAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CAAQ,QAAA,CAAAoF,GAAM,IAAA,EAAQ,SAAA,CAAU,EAAU,GAAA,CAC1CwjB,CAAAA,CAAS,IAAA,CAAK,OAAA,CAAQ,KAAM,GAAG,CAAA,CAAE,aAAY,CAC7CA,CAAAA,CAAS,UACR1nB,IAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,4BAAA,CACb,QAAA,CAAA,CAAA,GAAA,CAAI,MACFlB,GAAAA,CAAC,QAAA,CAAA,CAAQ,SAAA4oB,CAAAA,CAAS,QAAA,CAAS,GAChC,CAAA,CAAA,CAEJ,CAAA,CACA5oB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,2BAAA,CACZ,QAAA,CAAA,IAAI,KAAK4oB,CAAAA,CAAS,SAAS,EAAE,cAAA,EAAe,CAC/C,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CA1BQA,EAAS,EA2BnB,CAEJ,CAAC,CAAA,CACH,CAAA,CAEA1nB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,KAAA,CAEZ,QAAA,CAAAA,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,kCAAkC,CAAA,CACrD,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,2BAAe,CAAA,CAClBA,GAAAA,CAAC,QAAK,QAAA,CAAA,2BAAA,CAAyB,CAAA,CAAA,CACjC,EAEJ,CAAA,CAIDunB,CAAAA,GAAc,aAAA,EACbvnB,GAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,SAAAA,GAAAA,CAACslB,EAAAA,CAAA,CACC,MAAA,CAAQ1pB,CAAAA,CAAK,EAAA,CACb,WAAA,CAAa0X,EACb,QAAA,CAAUC,CAAAA,CAAuBoE,GAAUpE,CAAAA,CAAoB3X,CAAAA,CAAK,GAAI+b,CAAK,CAAA,CAAI,MAAA,CACjF,QAAA,CAAUnE,EACV,aAAA,CAAe8T,CAAAA,CACf,UAAW,EAAA,CACX,QAAA,CAAU,GACZ,CAAA,CACF,CAAA,CAIDC,CAAAA,GAAc,IAAA,EACbrmB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iBAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAG,SAAA,CAAU,wBAAA,CAAyB,kCAAsB,CAAA,CAE7DkB,IAAAA,CAAC,UACC,OAAA,CAASgnB,EAAAA,CACT,QAAA,CAAUL,CAAAA,EAAa,CAACV,CAAAA,CACxB,SAAA,CAAU,qBAEV,QAAA,CAAA,CAAAjmB,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,0CAA0C,CAAA,CAClDA,GAAAA,CAAC,UAAO,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,CAAA,CAAA,CAC/B,EAAM,uBAAA,CAAA,CAER,CAAA,CAEAkB,KAAC,QAAA,CAAA,CACC,OAAA,CAASknB,GACT,QAAA,CAAUP,CAAAA,EAAa,CAACT,CAAAA,CACxB,UAAU,oBAAA,CAEV,QAAA,CAAA,CAAAlmB,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,CAAA,CACnCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CACrCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CACrCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,GAAA,CAAI,GAAG,MAAA,CAAO,EAAA,CAAG,IAAI,CAAA,CACrCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,GAAG,MAAA,CAAO,EAAA,CAAG,KAAK,CAAA,CACvCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,GAAG,MAAA,CAAO,EAAA,CAAG,KAAK,CAAA,CAAA,CACzC,CAAA,CAAM,qBAER,CAAA,CAEAkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASonB,GACT,QAAA,CAAUT,CAAAA,EAAa,CAACR,CAAAA,CACxB,SAAA,CAAU,qBAEV,QAAA,CAAA,CAAAnmB,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,IAAA,CAAK,CAAA,CAC/BA,GAAAA,CAAC,YAAS,MAAA,CAAO,kBAAA,CAAmB,GACtC,CAAA,CAAM,iBAAA,CAAA,CAER,GACF,CAAA,CAGC+nB,CAAAA,CAAc,SAAA,EACb7mB,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACb,UAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,gCAAoB,CAAA,CACvB+nB,CAAAA,CAAc,UAAU,GAAA,CAAI,CAACc,EAAYlqB,CAAAA,GAAU,CAClD,IAAMyG,CAAAA,CAAOL,CAAAA,CAAe,KAAMO,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOujB,CAAAA,CAAW,MAAM,CAAA,CAClE,OACE3nB,KAAC,KAAA,CAAA,CAAgB,SAAA,CAAU,4BACxB,QAAA,CAAA,CAAAkE,CAAAA,EACCpF,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,yBAAA,CACV,KAAA,CAAO,CAAE,UAAA,CAAYoF,CAAAA,CAAK,KAAM,CAAA,CAE/B,QAAA,CAAAA,CAAAA,CAAK,QAAA,CACR,EAEFlE,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,gCAAA,CACZ,QAAA,CAAAoF,GAAM,IAAA,CACT,CAAA,CACApF,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCACZ,QAAA,CAAA6oB,CAAAA,CAAW,UACd,CAAA,CACA3nB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAuC,QAAA,CAAA,CAAA,cAAA,CAAA,CACtC2nB,CAAAA,CAAW,WAAa,GAAA,EAAK,OAAA,CAAQ,CAAC,CAAA,CAAE,GAAA,CAAA,CACxD,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAnBQlqB,CAoBV,CAEJ,CAAC,GACH,CAAA,CAGDopB,CAAAA,CAAc,UACb7mB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,UAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,8BAAkB,CAAA,CACrB+nB,CAAAA,CAAc,SAAS,GAAA,CAAI,CAACvN,EAAS7b,CAAAA,GACpCuC,IAAAA,CAAC,OAAgB,SAAA,CAAU,wBAAA,CACzB,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,8BAAA,CACZ,QAAA,CAAAwa,CAAAA,CAAQ,KAAA,CACX,EACCA,CAAAA,CAAQ,WAAA,EACPxa,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BACZ,QAAA,CAAAwa,CAAAA,CAAQ,WAAA,CACX,CAAA,CAEDA,EAAQ,aAAA,EACPtZ,IAAAA,CAAC,OAAI,SAAA,CAAU,6BAAA,CAA8B,kBACrCsZ,CAAAA,CAAQ,aAAA,CAAc,GAAA,CAAA,CAC9B,CAAA,CAAA,CAAA,CAZM7b,CAcV,CACD,CAAA,CAAA,CACH,EAGDopB,CAAAA,CAAc,MAAA,EACb7mB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,IAAA,CAAA,CAAG,QAAA,CAAA,iBAAA,CAAe,EACnBkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,6BAAA,CACZ,QAAA,CAAA,CAAA6mB,EAAc,MAAA,CAAO,KAAA,CAAM,UAC9B,CAAA,CACA7mB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAmC,QAAA,CAAA,CAAA,cAAA,CAAA,CAClC6mB,CAAAA,CAAc,OAAO,UAAA,CAAa,GAAA,EAAK,QAAQ,CAAC,CAAA,CAAE,GAAA,CAAA,CAClE,CAAA,CAAA,CACF,GACF,CAAA,CAIDd,CAAAA,CAAW,OAAS,CAAA,EACnB/lB,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,uBAAW,CAAA,CACdinB,CAAAA,CAAW,IAAK6B,CAAAA,EACf5nB,IAAAA,CAAC,OAEC,SAAA,CAAW,CAAA,8CAAA,EAAiD4nB,CAAAA,CAAQ,QAAA,CAAS,aAAa,CAAA,CAAA,CAE1F,UAAA5nB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,+BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,8BAAA,CACb,QAAA,CAAA8oB,EAAQ,KAAA,CACX,CAAA,CACA9oB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,iCAAA,CACb,QAAA,CAAA8oB,EAAQ,QAAA,CACX,CAAA,CAAA,CACF,EACA9oB,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,6BAAA,CACV,QAAA,CAAA8oB,EAAQ,WAAA,CACX,CAAA,CACCA,EAAQ,eAAA,EACP5nB,IAAAA,CAAC,OAAI,SAAA,CAAU,+BAAA,CAAgC,uBACzC4nB,CAAAA,CAAQ,eAAA,CAAA,CACd,CAAA,CAAA,CAAA,CAjBGA,CAAAA,CAAQ,EAmBf,CACD,CAAA,CAAA,CACH,EAGD,CAACf,CAAAA,CAAc,WACd,CAACA,CAAAA,CAAc,QAAA,EACf,CAACA,EAAc,MAAA,EACfd,CAAAA,CAAW,SAAW,CAAA,EACpB/lB,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,MAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,4BAAA,CAA6B,EACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,mBAAA,CAAoB,EAC5BA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,mBAAA,CAAoB,CAAA,CAAA,CAC9B,EACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,QAAA,CAAA,gBAAA,CAAc,CAAA,CACjBA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,iDAAA,CAA+C,GACvD,CAAA,CAAA,CAEN,CAAA,CAAA,CAEJ,GACF,CAAA,CACF,CAAA,CACF,CAEJ,CC18BO,SAAS+oB,GAAa,CAC3B,UAAA,CAAAC,EACA,MAAA,CAAAznB,CAAAA,CACA,QAAA6R,CAAAA,CACA,QAAA,CAAAtT,CAAAA,CACA,KAAA,CAAAmpB,EAAQ,GAAA,CACR,eAAA,CAAAC,EAAkB,GAAA,CAClB,SAAA,CAAA5nB,EAAY,EACd,CAAA,CAAsB,CACpB,GAAM,CAAC6nB,EAAUC,CAAW,CAAA,CAAI9oB,SAAS,CAAE,GAAA,CAAK,EAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CACtDqB,EAAUC,MAAAA,CAAuB,IAAI,EAGrCjK,CAAAA,CAAoBwX,WAAAA,CAAY,IAAM,CAC1C,GAAI,CAAC6Z,CAAAA,CAAW,QAAS,OAAO,CAAE,IAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAA,CAElD,IAAMjnB,CAAAA,CAAOinB,CAAAA,CAAW,QAAQ,qBAAA,EAAsB,CAChDhnB,EAAiB,MAAA,CAAO,WAAA,CACxBC,EAAgB,MAAA,CAAO,UAAA,CACvBG,EAAM,CAAA,CAGRC,CAAAA,CAAUN,EAAK,IAAA,CACfM,CAAAA,CAAU4mB,EAAQhnB,CAAAA,CAAgB,EAAA,GACpCI,EAAUJ,CAAAA,CAAgBgnB,CAAAA,CAAQ,EAAA,CAAA,CAEhC5mB,CAAAA,CAAU,KAAIA,CAAAA,CAAU,EAAA,CAAA,CAG5B,IAAMC,CAAAA,CAAaN,CAAAA,CAAiBD,EAAK,MAAA,CACnCQ,CAAAA,CAAaR,CAAAA,CAAK,GAAA,CACpBS,EAEJ,OAAIF,CAAAA,EAAc4mB,EAAkB9mB,CAAAA,CAElCI,CAAAA,CAAST,EAAK,MAAA,CAASK,CAAAA,CACdG,CAAAA,EAAc2mB,CAAAA,CAAkB9mB,EAEzCI,CAAAA,CAAST,CAAAA,CAAK,IAAMmnB,CAAAA,CAAkB9mB,CAAAA,CAGlCE,GAAcC,CAAAA,CAChBC,CAAAA,CAAST,EAAK,MAAA,CAASK,CAAAA,CAEvBI,EAAS,IAAA,CAAK,GAAA,CAAI,GAAIT,CAAAA,CAAK,GAAA,CAAMmnB,EAAkB9mB,CAAG,CAAA,CAInD,CAAE,GAAA,CAAKI,EAAQ,IAAA,CAAMH,CAAQ,CACtC,CAAA,CAAG,CAAC2mB,EAAYC,CAAAA,CAAOC,CAAe,CAAC,CAAA,CAuDvC,OApDAzoB,SAAAA,CAAU,IAAM,CACVc,CAAAA,EACF6nB,CAAAA,CAAYzxB,GAAmB,EAEnC,CAAA,CAAG,CAAC4J,EAAQ5J,CAAiB,CAAC,EAM9B8I,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMkB,CAAAA,CAAsBE,CAAAA,EAAkB,CAC5C,IAAMjC,CAAAA,CAASiC,EAAE,MAAA,CAEfhB,CAAAA,CAAQ,OAAA,EACR,CAACA,EAAQ,OAAA,CAAQ,QAAA,CAASjB,CAAM,CAAA,EAChCsoB,CAAAA,CAAW,SACX,CAACA,CAAAA,CAAW,OAAA,CAAQ,QAAA,CAAStoB,CAAM,CAAA,EAEnC0S,CAAAA,GAEJ,CAAA,CAGMiW,CAAAA,CAAY,WAAW,IAAM,CACjC,QAAA,CAAS,gBAAA,CAAiB,YAAa5mB,CAAkB,EAC3D,EAAG,CAAC,CAAA,CAEJ,OAAO,IAAM,CACX,aAAa4mB,CAAS,CAAA,CACtB,SAAS,mBAAA,CAAoB,WAAA,CAAa5mB,CAAkB,EAC9D,CACF,EAAG,CAAClB,CAAAA,CAAQ6R,CAAAA,CAAS4V,CAAU,CAAC,CAAA,CAGhCvoB,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMmB,CAAAA,CAAgBC,GAAqB,CACrCA,CAAAA,CAAE,MAAQ,QAAA,GACZA,CAAAA,CAAE,gBAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClByQ,GAAQ,EAEZ,CAAA,CAEA,gBAAS,gBAAA,CAAiB,SAAA,CAAW1Q,CAAY,CAAA,CAC1C,IAAM,SAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CACnE,CAAA,CAAG,CAACnB,CAAAA,CAAQ6R,CAAO,CAAC,CAAA,CAEf7R,CAAAA,CAGHvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAF,GAAAA,CAAC,OACC,GAAA,CAAK2B,CAAAA,CACL,UAAW,CAAA,cAAA,EAAiBL,CAAS,CAAA,CAAA,CACrC,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,IAAK,CAAA,EAAG6nB,CAAAA,CAAS,GAAG,CAAA,EAAA,CAAA,CACpB,IAAA,CAAM,CAAA,EAAGA,CAAAA,CAAS,IAAI,CAAA,EAAA,CAAA,CACtB,KAAA,CAAO,GAAGF,CAAK,CAAA,EAAA,CAAA,CACf,UAAW,oBAAA,CACX,SAAA,CAAW,OACX,MAAA,CAAQ,KAAA,CACR,QAAS,KAAA,CACT,UAAA,CAAY,8BACZ,MAAA,CAAQ,6DAAA,CACR,aAAc,KAAA,CACd,SAAA,CAAW,+BAAA,CACX,SAAA,CAAW,+BACb,CAAA,CAEC,QAAA,CAAAnpB,EACH,CAAA,CACF,CAAA,CAzBkB,IA2BtB,CChKO,IAAMwpB,EAAAA,CAAqC,CAChD,KAAM,CAGJ,SAAA,CAAW,UACX,WAAA,CAAa,SAAA,CACb,OAAQ,SAAA,CACR,SAAA,CAAW,0BAAA,CAGX,MAAA,CAAQ,UACR,WAAA,CAAa,SAAA,CAGb,YAAa,SAAA,CACb,aAAA,CAAe,UACf,YAAA,CAAc,SAAA,CAGd,MAAA,CAAQ,SAAA,CACR,YAAa,SAAA,CACb,WAAA,CAAa,2BAGb,cAAA,CAAgB,SAAA,CAChB,gBAAiB,SAAA,CACjB,aAAA,CAAe,SAAA,CAIf,UAAA,CAAY,UACZ,eAAA,CAAiB,SAAA,CACjB,aAAc,SAAA,CACd,iBAAA,CAAmB,0BAGnB,KAAA,CAAO,SAAA,CACP,UAAA,CAAY,yBAAA,CACZ,UAAW,SAAA,CACX,cAAA,CAAgB,0BAGhB,UAAA,CAAY,SAAA,CACZ,iBAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,OAAA,CAAS,4BACT,SAAA,CAAW,SACb,EAEA,KAAA,CAAO,CAGL,UAAW,SAAA,CACX,WAAA,CAAa,UACb,MAAA,CAAQ,SAAA,CACR,UAAW,yBAAA,CAGX,MAAA,CAAQ,UACR,WAAA,CAAa,SAAA,CAGb,YAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,YAAA,CAAc,UAGd,MAAA,CAAQ,SAAA,CACR,YAAa,SAAA,CACb,WAAA,CAAa,0BAGb,cAAA,CAAgB,SAAA,CAChB,eAAA,CAAiB,SAAA,CACjB,cAAe,SAAA,CAIf,UAAA,CAAY,UACZ,eAAA,CAAiB,SAAA,CACjB,aAAc,SAAA,CACd,iBAAA,CAAmB,wBAAA,CAGnB,KAAA,CAAO,UACP,UAAA,CAAY,wBAAA,CACZ,UAAW,SAAA,CACX,cAAA,CAAgB,2BAGhB,UAAA,CAAY,SAAA,CACZ,iBAAkB,SAAA,CAClB,eAAA,CAAiB,UAGjB,OAAA,CAAS,qBAAA,CACT,UAAW,SACb,CAAA,CAEA,QAAS,CAGP,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,UACb,MAAA,CAAQ,SAAA,CACR,UAAW,wBAAA,CAGX,MAAA,CAAQ,UACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,cAAe,SAAA,CACf,YAAA,CAAc,UAGd,MAAA,CAAQ,SAAA,CACR,YAAa,SAAA,CACb,WAAA,CAAa,wBAAA,CAGb,cAAA,CAAgB,UAChB,eAAA,CAAiB,SAAA,CACjB,cAAe,SAAA,CAIf,UAAA,CAAY,UACZ,eAAA,CAAiB,SAAA,CACjB,aAAc,SAAA,CACd,iBAAA,CAAmB,yBAGnB,KAAA,CAAO,SAAA,CACP,WAAY,wBAAA,CACZ,SAAA,CAAW,UACX,cAAA,CAAgB,wBAAA,CAGhB,UAAA,CAAY,SAAA,CACZ,iBAAkB,SAAA,CAClB,eAAA,CAAiB,UAGjB,OAAA,CAAS,sBAAA,CACT,UAAW,SACb,CACF,ECxCA,IAAMC,EAAAA,CAAmB,CAAC,KAAA,CAAO,SAAU,MAAA,CAAQ,QAAQ,EACrDC,EAAAA,CAAiB,CAAC,OAAQ,aAAA,CAAe,QAAA,CAAU,MAAM,CAAA,CAExD,SAASC,EAAAA,CAAkB,CAChC,KAAA7tB,CAAAA,CACA,MAAA,CAAA2F,EACA,OAAA,CAAA6R,CAAAA,CACA,QAAA,CAAA9K,CAAAA,CACA,SAAUohB,CAAAA,CACV,cAAA,CAAA3kB,EAAiB,EAAC,CAClB,SAAA0O,CAAAA,CAAW,EAAC,CACZ,UAAA,CAAAuT,EAAa,EAAC,CACd,aAAAtT,CAAAA,CACA,eAAA,CAAiBiW,EACjB,WAAA,CAAAlb,CAAAA,CACA,uBAAA,CAAyBmb,CAAAA,CACzB,mBAAoBC,CAAAA,CACpB,eAAA,CAAiBC,EACjB,gBAAA,CAAAC,CAAAA,CAAmB,EAAC,CACpB,eAAA,CAAAC,EAAkB,EAAC,CACnB,cAAAvZ,CAAAA,CAAgB,GAChB,WAAA,CAAAC,CAAAA,CAEA,mBAAoBuZ,CAAAA,CACpB,iBAAA,CAAmBC,CAAAA,CACnB,KAAA,CAAAvpB,EACA,gBAAA,CAAAwpB,CAAAA,CACA,YAAA7W,CAAAA,CAAc,GACd,mBAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CACF,EAA2B,CAEzB,IAAMhT,EAAcP,EAAAA,EAAe,CAC7BF,EAAYY,CAAAA,EAASH,CAAAA,EAAa,SAAA,EAAa,MAAA,CAG/C,CAAC4pB,CAAAA,CAAWC,CAAY,EAAI/pB,QAAAA,CAAsB1E,CAAI,EAEtD,CAAC0uB,CAAAA,CAAsBC,CAAuB,CAAA,CAAIjqB,QAAAA,CAAS,KAAK,CAAA,CAChE,CAAC+nB,GAAUmC,EAAW,CAAA,CAAIlqB,SAAoB1E,CAAAA,EAAM,QAAA,EAAY,EAAE,EAClE,CAAC6uB,EAAAA,CAAiBC,EAAkB,CAAA,CAAIpqB,QAAAA,CAAS,KAAK,CAAA,CACtD,CAACqqB,EAAAA,CAAiBC,EAAkB,EAAItqB,QAAAA,CAAS,EAAE,EACnD,CAACuV,CAAAA,CAAaC,CAAc,CAAA,CAAIxV,QAAAA,CAAS,EAAE,CAAA,CAC3C,CAACuqB,CAAAA,CAAgBC,CAAiB,EAAIxqB,QAAAA,CAAyC,KAAK,EAKpF,CAACyqB,CAAAA,CAAgBC,CAAiB,CAAA,CAAI1qB,QAAAA,CAAS,KAAK,CAAA,CACpD,CAAC2qB,GAAkBC,EAAmB,CAAA,CAAI5qB,SAAS,KAAK,CAAA,CACxD,CAAC6qB,EAAAA,CAAkBC,EAAmB,CAAA,CAAI9qB,QAAAA,CAAS,KAAK,CAAA,CACxD,CAAC+qB,GAAeC,EAAgB,CAAA,CAAIhrB,QAAAA,CAAS,KAAK,EAClD,CAACiU,EAAAA,CAAgBC,EAAiB,CAAA,CAAIlU,QAAAA,CAAS,KAAK,CAAA,CACpD,CAACirB,EAAAA,CAAgBC,EAAiB,EAAIlrB,QAAAA,CAAS,KAAK,EAGpDmrB,CAAAA,CAAW7pB,MAAAA,CAA2B,IAAI,CAAA,CAC1C8pB,EAAAA,CAAiB9pB,MAAAA,CAA4B,IAAI,EACjD+pB,EAAAA,CAAa/pB,MAAAA,CAA4B,IAAI,CAAA,CAC7CgqB,EAAAA,CAAgBhqB,OAAuB,IAAI,CAAA,CAC3CiqB,EAAAA,CAAkBjqB,MAAAA,CAAuB,IAAI,CAAA,CAC7CkqB,EAAAA,CAAkBlqB,OAAuB,IAAI,CAAA,CAC7CmqB,GAAenqB,MAAAA,CAAuB,IAAI,CAAA,CAC1CoqB,EAAAA,CAAgBpqB,OAAyB,IAAI,CAAA,CAE7CqqB,EAAerqB,MAAAA,CAA0B,IAAI,EAC7CsqB,EAAAA,CAAiBtqB,MAAAA,CAA0B,IAAI,CAAA,CAC/CuqB,GAAiBvqB,MAAAA,CAA0B,IAAI,EAC/CwqB,EAAAA,CAAcxqB,MAAAA,CAA0B,IAAI,CAAA,CAIlDnB,SAAAA,CAAU,IAAM,CACV7E,CAAAA,EAAQ,CAACwuB,CAAAA,EACXC,CAAAA,CAAa,CAAE,GAAGzuB,CAAK,CAAC,CAAA,CACxB4uB,EAAAA,CAAY5uB,CAAAA,CAAK,QAAA,EAAY,EAAE,CAAA,EACtBA,GAAQwuB,CAAAA,EAAaxuB,CAAAA,CAAK,KAAOwuB,CAAAA,CAAU,EAAA,GACpDC,CAAAA,CAAa,CAAE,GAAGzuB,CAAK,CAAC,EACxB4uB,EAAAA,CAAY5uB,CAAAA,CAAK,UAAY,EAAE,CAAA,EAEnC,CAAA,CAAG,CAACA,CAAAA,CAAMwuB,CAAS,CAAC,CAAA,CAGpB3pB,SAAAA,CAAU,IAAM,CACd,IAAMgC,EAAsBE,EAAAA,EAAkB,CAC5C,IAAMjC,EAAAA,CAASiC,EAAAA,CAAE,OAEbipB,EAAAA,CAAc,OAAA,EAAW,CAACA,EAAAA,CAAc,OAAA,CAAQ,QAAA,CAASlrB,EAAM,GACjEsqB,CAAAA,CAAkB,KAAK,EAErBa,EAAAA,CAAgB,OAAA,EAAW,CAACA,EAAAA,CAAgB,OAAA,CAAQ,QAAA,CAASnrB,EAAM,GACrEwqB,EAAAA,CAAoB,KAAK,EAEvBY,EAAAA,CAAgB,OAAA,EAAW,CAACA,EAAAA,CAAgB,OAAA,CAAQ,QAAA,CAASprB,EAAM,GACrE0qB,EAAAA,CAAoB,KAAK,EAEvBW,EAAAA,CAAa,OAAA,EAAW,CAACA,EAAAA,CAAa,OAAA,CAAQ,SAASrrB,EAAM,CAAA,EAC/D4qB,GAAiB,KAAK,EAE1B,EAEA,GAAIP,CAAAA,EAAkBE,IAAoBE,EAAAA,EAAoBE,EAAAA,CAC5D,OAAA,QAAA,CAAS,gBAAA,CAAiB,YAAa5oB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,CAI7E,CAAA,CAAG,CAACsoB,EAAgBE,EAAAA,CAAkBE,EAAAA,CAAkBE,EAAa,CAAC,CAAA,CAGtE5qB,UAAU,IAAM,CACd,GAAI,CAACc,EAAQ,OAEb,IAAM4L,EAAiBxK,EAAAA,EAAqB,CAE1C,IAAMjC,EAAAA,CAASiC,EAAAA,CAAE,MAAA,CACX0pB,EAAAA,CACJ3rB,GAAO,OAAA,GAAY,OAAA,EACnBA,GAAO,OAAA,GAAY,UAAA,EACnBA,GAAO,iBAAA,CAGT,GAAIiC,EAAAA,CAAE,GAAA,GAAQ,SAAU,CACtBA,EAAAA,CAAE,gBAAe,CACbooB,CAAAA,EAAkBE,IAAoBE,EAAAA,EAAoBE,EAAAA,EAAiB9W,EAAAA,EAAkBgX,EAAAA,EAC/FP,EAAkB,KAAK,CAAA,CACvBE,GAAoB,KAAK,CAAA,CACzBE,GAAoB,KAAK,CAAA,CACzBE,EAAAA,CAAiB,KAAK,EACtB9W,EAAAA,CAAkB,KAAK,EACvBgX,EAAAA,CAAkB,KAAK,GACba,EAAAA,EACVjZ,CAAAA,GAEF,MACF,CAGA,GAAIiZ,EAAAA,EAAY1pB,EAAAA,CAAE,MAAQ,QAAA,CAAU,OAEpC,IAAM2pB,EAAAA,CAAQ3pB,EAAAA,CAAE,OAAA,EAAWA,EAAAA,CAAE,QAG7B,OAAQA,EAAAA,CAAE,IAAI,WAAA,EAAY,EACxB,KAAK,GAAA,CACHA,EAAAA,CAAE,cAAA,GACFqoB,CAAAA,CAAkB,IAAI,EACtB,MACF,KAAK,IACHroB,EAAAA,CAAE,cAAA,EAAe,CACjByoB,EAAAA,CAAoB,IAAI,CAAA,CACxB,MACF,KAAK,GAAA,CACHzoB,EAAAA,CAAE,gBAAe,CACjBuoB,EAAAA,CAAoB,IAAI,CAAA,CACxB,MACF,KAAK,GAAA,CACHvoB,EAAAA,CAAE,gBAAe,CACjB2oB,EAAAA,CAAiB,IAAI,CAAA,CACrB,MACF,KAAK,GAAA,CACEgB,KACH3pB,EAAAA,CAAE,cAAA,GACF6R,EAAAA,CAAkB,IAAI,EACtB,UAAA,CAAW,IAAMwX,EAAAA,CAAc,OAAA,EAAS,OAAM,CAAG,CAAC,GAEpD,MACF,KAAK,IACEM,EAAAA,GACH3pB,EAAAA,CAAE,cAAA,EAAe,CACjB6oB,GAAkB,IAAI,CAAA,CAAA,CAExB,MACF,KAAK,GAAA,CACH7oB,GAAE,cAAA,EAAe,CACjB4nB,EAAwB,IAAI,CAAA,CAC5B,WAAW,IAAMmB,EAAAA,CAAe,SAAS,KAAA,EAAM,CAAG,CAAC,CAAA,CACnD,MACF,KAAK,GAAA,CACH/oB,GAAE,cAAA,EAAe,CACjB+nB,GAAmB,IAAI,CAAA,CACvB,MACF,KAAK,GAAA,CACH/nB,EAAAA,CAAE,cAAA,GACFgpB,EAAAA,CAAW,OAAA,EAAS,OAAM,CAC1B,KACJ,CACF,CAAA,CAEA,OAAA,MAAA,CAAO,gBAAA,CAAiB,SAAA,CAAWxe,CAAa,CAAA,CACzC,IAAM,OAAO,mBAAA,CAAoB,SAAA,CAAWA,CAAa,CAChE,CAAA,CAAG,CAAC5L,CAAAA,CAAQ6R,EAAS2X,CAAAA,CAAgBE,EAAAA,CAAkBE,GAAkBE,EAAAA,CAAe9W,EAAAA,CAAgBgX,EAAc,CAAC,CAAA,CAIzH,IAAMgB,EAAAA,CAAoBpd,YACvBxM,CAAAA,EAA2C,CAC1C,IAAM8H,EAAAA,CAAW9H,CAAAA,CAAE,cAAc,WAAA,EAAa,IAAA,EAAK,EAAK,EAAA,CACxD,GAAIynB,CAAAA,EAAa3f,EAAAA,GAAa2f,EAAU,KAAA,CAAO,CAC7C,IAAMoC,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,MAAO3f,EAAS,CAAA,CAChD4f,EAAamC,EAAO,CAAA,CACpBlkB,IAAW8hB,CAAAA,CAAU,EAAA,CAAI,CAAE,KAAA,CAAO3f,EAAS,CAAC,EAC9C,CACF,EACA,CAAC2f,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEMmkB,EAAAA,CAAqBtd,WAAAA,CACxBxM,GAA+C,CAC1CA,CAAAA,CAAE,MAAQ,OAAA,GACZA,CAAAA,CAAE,gBAAe,CACjBA,CAAAA,CAAE,aAAA,CAAc,IAAA,IAEdA,CAAAA,CAAE,GAAA,GAAQ,WACZA,CAAAA,CAAE,cAAA,GACFA,CAAAA,CAAE,aAAA,CAAc,WAAA,CAAcynB,CAAAA,EAAW,OAAS,EAAA,CAClDznB,CAAAA,CAAE,cAAc,IAAA,EAAK,EAEzB,EACA,CAACynB,CAAS,CACZ,CAAA,CAIMsC,EAAAA,CAAwBvd,YAAY,IAAM,CAC1Cib,GAAaxuB,CAAAA,EAAQwuB,CAAAA,CAAU,cAAgBxuB,CAAAA,CAAK,WAAA,EACtD0M,CAAAA,GAAW8hB,CAAAA,CAAU,GAAI,CAAE,WAAA,CAAaA,EAAU,WAAY,CAAC,EAEjEG,CAAAA,CAAwB,KAAK,EAC/B,CAAA,CAAG,CAACH,CAAAA,CAAWxuB,CAAAA,CAAM0M,CAAQ,CAAC,CAAA,CAExBqkB,GAAqBxd,WAAAA,CACxBzW,CAAAA,EAAmB,CAClB,GAAI0xB,EAAW,CACb,IAAMoC,GAAU,CAAE,GAAGpC,EAAW,QAAA,CAAU1xB,CAAO,EACjD2xB,CAAAA,CAAamC,EAAO,EACpBlkB,CAAAA,GAAW8hB,CAAAA,CAAU,GAAI,CAAE,QAAA,CAAU1xB,CAAO,CAAC,CAAA,CAC7CsyB,CAAAA,CAAkB,KAAK,EACzB,CACF,CAAA,CACA,CAACZ,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEMskB,EAAAA,CAAuBzd,WAAAA,CAC1B/N,CAAAA,EAAqB,CACpB,GAAIgpB,CAAAA,CAAW,CACb,IAAMoC,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,QAAA,CAAUhpB,CAAgB,EAC1DipB,CAAAA,CAAamC,EAAO,EACpBlkB,CAAAA,GAAW8hB,CAAAA,CAAU,GAAI,CAAE,QAAA,CAAUhpB,CAAgB,CAAC,EACtD8pB,EAAAA,CAAoB,KAAK,EAC3B,CACF,CAAA,CACA,CAACd,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEMukB,GAAuB1d,WAAAA,CAC1BwS,CAAAA,EAAmB,CAClB,GAAIyI,CAAAA,CAAW,CACb,IAAMtR,EAAAA,CAAmBsR,CAAAA,CAAU,eAAA,EAAmB,EAAC,CACjDrR,EAAAA,CAAeD,GAAiB,QAAA,CAAS6I,CAAM,EACjD7I,EAAAA,CAAiB,MAAA,CAAQtR,EAAAA,EAAOA,EAAAA,GAAOma,CAAM,CAAA,CAC7C,CAAC,GAAG7I,EAAAA,CAAkB6I,CAAM,EAE1B6K,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,eAAA,CAAiBrR,EAAa,CAAA,CAC9DsR,CAAAA,CAAamC,EAAO,CAAA,CACpBlkB,CAAAA,GAAW8hB,EAAU,EAAA,CAAI,CAAE,eAAA,CAAiBrR,EAAa,CAAC,EAC5D,CACF,EACA,CAACqR,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEMwkB,EAAAA,CAAoB3d,WAAAA,CACvBhG,GAAkB,CACjB,GAAIihB,EAAW,CACb,IAAM2C,GAAgB3C,CAAAA,CAAU,MAAA,EAAU,EAAC,CACrC4C,GAAYD,EAAAA,CAAc,QAAA,CAAS5jB,CAAK,CAAA,CAC1C4jB,EAAAA,CAAc,OAAQE,EAAAA,EAAMA,EAAAA,GAAM9jB,CAAK,CAAA,CACvC,CAAC,GAAG4jB,EAAAA,CAAe5jB,CAAK,EAEtBqjB,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,MAAA,CAAQ4C,EAAU,CAAA,CAClD3C,EAAamC,EAAO,CAAA,CACpBlkB,IAAW8hB,CAAAA,CAAU,EAAA,CAAI,CAAE,MAAA,CAAQ4C,EAAU,CAAC,EAChD,CACF,CAAA,CACA,CAAC5C,EAAW9hB,CAAQ,CACtB,EAGM4kB,CAAAA,CAAmB/d,WAAAA,CACtBoD,CAAAA,EAAoB,CACnB,GAAI6X,CAAAA,CAAW,CACb,IAAMoC,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,IAAA,CAAA7X,CAAK,CAAA,CACrC8X,CAAAA,CAAamC,EAAO,CAAA,CACpBlkB,CAAAA,GAAW8hB,EAAU,EAAA,CAAI,CAAE,KAAA7X,CAAK,CAAQ,EAC1C,CACF,EACA,CAAC6X,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEM6kB,GAAmBhe,WAAAA,CACtBxM,CAAAA,EAA2C,CAC1C,GAAIynB,EAAW,CACb,IAAMgD,GAAUzqB,CAAAA,CAAE,MAAA,CAAO,MACnB6pB,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,QAASgD,EAAQ,CAAA,CACjD/C,EAAamC,EAAO,CAAA,CACpBlkB,IAAW8hB,CAAAA,CAAU,EAAA,CAAI,CAAE,OAAA,CAASgD,EAAQ,CAAC,CAAA,CAC7C5Y,GAAkB,KAAK,EACzB,CACF,CAAA,CACA,CAAC4V,CAAAA,CAAW9hB,CAAQ,CACtB,CAAA,CAEM+kB,CAAAA,CAAmBle,YACtBme,CAAAA,EAAkB,CACjB,GAAIlD,CAAAA,CAAW,CACb,IAAMoC,EAAAA,CAAU,CAAE,GAAGpC,CAAAA,CAAW,cAAe,UAAA,CAAWkD,CAAK,GAAK,CAAE,CAAA,CACtEjD,CAAAA,CAAamC,EAAO,EACpBlkB,CAAAA,GAAW8hB,CAAAA,CAAU,GAAI,CAAE,aAAA,CAAe,WAAWkD,CAAK,CAAA,EAAK,CAAE,CAAC,EACpE,CACF,CAAA,CACA,CAAClD,EAAW9hB,CAAQ,CACtB,EAEMilB,EAAAA,CAAmBpe,WAAAA,CAAY,IAAM,CACzC,GAAIwb,EAAAA,CAAgB,IAAA,IAAUP,CAAAA,CAAW,CACvC,IAAMoD,CAAAA,CAAsB,CAC1B,EAAA,CAAI,CAAA,QAAA,EAAW,KAAK,GAAA,EAAK,GACzB,KAAA,CAAO7C,EAAAA,CAAgB,MAAK,CAC5B,SAAA,CAAW,KAAA,CACX,SAAA,CAAW,IAAI,IACjB,CAAA,CACM8C,GAAkB,CAAC,GAAGpF,GAAUmF,CAAU,CAAA,CAChDhD,GAAYiD,EAAe,CAAA,CAC3B7C,GAAmB,EAAE,CAAA,CACrBF,GAAmB,KAAK,CAAA,CAExBP,IAAmBC,CAAAA,CAAU,EAAA,CAAIqD,EAAe,EAClD,CACF,CAAA,CAAG,CAAC9C,GAAiBtC,EAAAA,CAAU+B,CAAAA,CAAWD,CAAgB,CAAC,CAAA,CAErDuD,EAAAA,CAAsBve,WAAAA,CACzB3H,GAAe,CACd,IAAMimB,GAAkBpF,EAAAA,CAAS,GAAA,CAAKsF,IACpCA,EAAAA,CAAG,EAAA,GAAOnmB,CAAAA,CAAK,CAAE,GAAGmmB,EAAAA,CAAI,SAAA,CAAW,CAACA,EAAAA,CAAG,SAAA,CAAW,UAAW,IAAI,IAAO,EAAIA,EAC9E,CAAA,CACAnD,GAAYiD,EAAe,CAAA,CAEvBrD,GACFD,CAAAA,GAAmBC,CAAAA,CAAU,GAAIqD,EAAe,EAEpD,CAAA,CACA,CAACpF,GAAU+B,CAAAA,CAAWD,CAAgB,CACxC,CAAA,CAEMyD,EAAAA,CAAsBze,YACzB3H,CAAAA,EAAe,CACd,IAAMimB,EAAAA,CAAkBpF,GAAS,MAAA,CAAQsF,EAAAA,EAAOA,GAAG,EAAA,GAAOnmB,CAAE,EAC5DgjB,EAAAA,CAAYiD,EAAe,CAAA,CAEvBrD,CAAAA,EACFD,IAAmBC,CAAAA,CAAU,EAAA,CAAIqD,EAAe,EAEpD,CAAA,CACA,CAACpF,EAAAA,CAAU+B,CAAAA,CAAWD,CAAgB,CACxC,EAEM0D,EAAAA,CAAoB1e,WAAAA,CAAY,IAAM,CACtC0G,CAAAA,CAAY,MAAK,EAAKuU,CAAAA,EAAa1W,CAAAA,GACrCA,CAAAA,CAAa0W,EAAU,EAAA,CAAIvU,CAAAA,CAAY,MAAM,CAAA,CAC7CC,EAAe,EAAE,CAAA,EAErB,CAAA,CAAG,CAACD,EAAauU,CAAAA,CAAW1W,CAAY,CAAC,CAAA,CAEnCoa,EAAAA,CAAuB3e,YAC1BxM,CAAAA,EAAgD,CAAA,CAC1CA,CAAAA,CAAE,OAAA,EAAWA,EAAE,OAAA,GAAYA,CAAAA,CAAE,MAAQ,OAAA,GACxCA,CAAAA,CAAE,gBAAe,CACjBkrB,EAAAA,IAEJ,CAAA,CACA,CAACA,EAAiB,CACpB,CAAA,CA2BME,EAAkB1gB,CAAAA,EAEpBrN,GAAAA,CAACguB,GAAA,CACC,aAAA,CAAe,CAACC,EAAS,EACzB,aAAA,CAAe,CAACC,EAAc,CAAA,CAC9B,UAAA,CAAY,CACV,CAAA,CAAG,CAAC,CAAE,IAAA,CAAAC,GAAM,GAAGhM,EAAM,IAAMniB,GAAAA,CAAC,GAAA,CAAA,CAAG,GAAGmiB,EAAAA,CAAO,MAAA,CAAO,QAAA,CAAS,GAAA,CAAI,sBAAsB,CACrF,CAAA,CAEC,SAAA9U,CAAAA,CACH,CAAA,CAKE+gB,EAAmBpH,CAAAA,CAAW,MAAA,CAAQ4B,GACtCiC,CAAAA,GAAmB,UAAA,CACdjC,EAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,CAErCiC,CAAAA,GAAmB,UACd,CAACjC,CAAAA,CAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,CAEnC,IACR,EAID,GAAI,CAACrnB,GAAU,CAAC3F,CAAAA,CACd,OAAO,IAAA,CAIT,IAAMyyB,EAAAA,CAAcjE,CAAAA,EAAaxuB,EAE3BkJ,EAAAA,CAAgBC,CAAAA,CAAe,OAAQK,CAAAA,EAC3CipB,EAAAA,CAAY,eAAA,EAAiB,QAAA,CAASjpB,EAAK,EAAE,CAC/C,EAEMkpB,EAAAA,CAAyBjG,EAAAA,CAAS,OAAQsF,CAAAA,EAAOA,CAAAA,CAAG,SAAS,CAAA,CAAE,MAAA,CAErE,OACE3tB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAF,GAAAA,CAAC,OACC,SAAA,CAAU,mBAAA,CACV,OAAA,CAASoT,CAAAA,CACT,MAAO,CACL,QAAA,CAAU,QACV,KAAA,CAAO,GAAA,CACP,OAAQ,IAAA,CACR,UAAA,CAAY,oBAAA,CACZ,OAAA,CAAS,OACT,UAAA,CAAY,QAAA,CACZ,eAAgB,QAClB,CAAA,CAEA,SAAAlS,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,QAAUyB,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAClC,IAAA,CAAK,SACL,YAAA,CAAW,MAAA,CACX,iBAAA,CAAgB,aAAA,CAChB,aAAY5C,CAAAA,CAGZ,QAAA,CAAA,CAAAmB,KAAC,QAAA,CAAA,CAAO,SAAA,CAAU,kBAChB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CACC,EAAA,CAAG,cACH,GAAA,CAAKyrB,CAAAA,CACL,UAAU,gBAAA,CACV,eAAA,CAAe,KACf,8BAAA,CAA8B,IAAA,CAC9B,MAAA,CAAQc,EAAAA,CACR,UAAWE,EAAAA,CAEV,QAAA,CAAA4B,GAAY,KAAA,CACf,CAAA,CAEAntB,KAAC,GAAA,CAAA,CAAE,SAAA,CAAU,oBAAA,CACX,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,QAAA,CAAA,QAAA,CAAC,CAAA,CAAO,yEAE7C,CAAA,CAEAA,GAAAA,CAAC,UAAO,SAAA,CAAU,gBAAA,CAAiB,QAASoT,CAAAA,CAAS,YAAA,CAAW,QAC9D,QAAA,CAAAlS,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,GAAA,CAAI,GAAG,IAAA,CAAK,CAAA,CACpCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CAAA,CACtC,EACF,CAAA,CAAA,CACF,CAAA,CA4FAkB,KAAC,SAAA,CAAA,CAAQ,SAAA,CAAU,oBAEjB,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CAAyB,GAAA,CAAK0qB,EAAAA,CAC3C,UAAA1qB,IAAAA,CAAC,QAAA,CAAA,CACC,IAAK+qB,CAAAA,CACL,SAAA,CAAU,iBACV,OAAA,CAAS,IAAMjB,CAAAA,CAAkB,CAACD,CAAc,CAAA,CAEhD,QAAA,CAAA,CAAA7pB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,EAAE,IAAA,CAAK,CAAA,CAC/BA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,aAAA,CAAc,CAAA,CAAA,CACxB,EACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,kBAAM,CAAA,CACZA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAoB,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACtC,EACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CAAwB,QAAA,CAAAquB,EAAAA,CAAY,QAAA,EAAY,YAAY,CAAA,CAAA,CAC7E,CAAA,CACAruB,IAAC+oB,EAAAA,CAAA,CACC,WAAYkD,CAAAA,CACZ,MAAA,CAAQlB,EACR,OAAA,CAAS,IAAMC,EAAkB,KAAK,CAAA,CACtC,MAAO,GAAA,CACP,eAAA,CAAiB,IAEf,QAAA,CAAA,CAAAjB,CAAAA,CAAiB,MAAA,CAAS,CAAA,CAAIA,EAAmBP,EAAAA,CAAe,GAAA,CAAIxW,IAAM,CAAE,EAAA,CAAIA,EAAG,KAAA,CAAOA,CAAE,CAAA,CAAE,CAAA,EAAG,IAAKlX,CAAAA,EACtGkE,GAAAA,CAAC,UAEC,SAAA,CAAW,CAAA,sBAAA,EACTquB,GAAY,QAAA,GAAavyB,CAAAA,CAAI,EAAA,CAAK,QAAA,CAAW,EAC/C,CAAA,CAAA,CACA,OAAA,CAAS,IAAM6wB,EAAAA,CAAmB7wB,CAAAA,CAAI,EAAE,CAAA,CAEvC,QAAA,CAAAA,EAAI,KAAA,CAAA,CANAA,CAAAA,CAAI,EAOX,CACD,CAAA,CACH,GACF,CAAA,CAGAoF,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CAAyB,GAAA,CAAK4qB,EAAAA,CAC3C,UAAA5qB,IAAAA,CAAC,QAAA,CAAA,CACC,IAAKgrB,EAAAA,CACL,SAAA,CAAU,iBACV,OAAA,CAAS,IAAMd,EAAAA,CAAoB,CAACD,EAAgB,CAAA,CAEpD,QAAA,CAAA,CAAAjqB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,0CAA0C,CAAA,CAClDA,GAAAA,CAAC,UAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAE,GAAA,CAAI,CAAA,CAAA,CAC/B,EACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,qBAAS,CAAA,CACfA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAoB,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACtC,EACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CACZ,QAAA,CAAA8E,EAAAA,CAAc,MAAA,CAAS,EACtB9E,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,kBAAA,CACZ,QAAA,CAAA8E,GAAc,GAAA,CAAKM,CAAAA,EAClBpF,IAAC,KAAA,CAAA,CAEC,SAAA,CAAU,kBACV,KAAA,CAAO,CAAE,WAAYoF,CAAAA,CAAK,KAAM,EAChC,KAAA,CAAOA,CAAAA,CAAK,IAAA,CAEX,QAAA,CAAAA,EAAK,QAAA,CAAA,CALDA,CAAAA,CAAK,EAMZ,CACD,CAAA,CACH,EAEApF,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gBAAA,CAAiB,iBAAK,CAAA,CAE1C,CAAA,CAAA,CACF,EACAA,GAAAA,CAAC+oB,EAAAA,CAAA,CACC,UAAA,CAAYmD,EAAAA,CACZ,MAAA,CAAQf,EAAAA,CACR,QAAS,IAAMC,EAAAA,CAAoB,KAAK,CAAA,CACxC,KAAA,CAAO,IACP,eAAA,CAAiB,GAAA,CAEhB,QAAA,CAAArmB,CAAAA,CAAe,IAAKK,CAAAA,EACnBlE,IAAAA,CAAC,UAEC,SAAA,CAAW,CAAA,sBAAA,EACTmtB,GAAY,eAAA,EAAiB,QAAA,CAASjpB,CAAAA,CAAK,EAAE,EAAI,QAAA,CAAW,EAC9D,GACA,OAAA,CAAS,IAAMynB,GAAqBznB,CAAAA,CAAK,EAAE,CAAA,CAE3C,QAAA,CAAA,CAAApF,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,wBACV,KAAA,CAAO,CAAE,WAAYoF,CAAAA,CAAK,KAAM,CAAA,CAE/B,QAAA,CAAAA,EAAK,QAAA,CACR,CAAA,CACCA,EAAK,IAAA,CACLipB,EAAAA,CAAY,iBAAiB,QAAA,CAASjpB,CAAAA,CAAK,EAAE,CAAA,EAC5CpF,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CACZ,KAAA,CAAO,CAAE,UAAA,CAAY,MAAO,EAE5B,QAAA,CAAAA,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,iBAAiB,CAAA,CACpC,CAAA,CAAA,CAAA,CAxBGoF,EAAK,EA0BZ,CACD,EACH,CAAA,CAAA,CACF,CAAA,CAGAlE,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CAAyB,GAAA,CAAK2qB,GAC3C,QAAA,CAAA,CAAA3qB,IAAAA,CAAC,UACC,GAAA,CAAKirB,EAAAA,CACL,UAAU,gBAAA,CACV,OAAA,CAAS,IAAMjB,EAAAA,CAAoB,CAACD,EAAgB,CAAA,CAEpD,QAAA,CAAA,CAAA/pB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,qFAAA,CAAsF,CAAA,CAC9FA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CACrCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,GAAG,OAAA,CAAQ,EAAA,CAAG,KAAK,CAAA,CAAA,CAC3C,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,oBAAQ,CAAA,CACdA,GAAAA,CAAC,OAAI,SAAA,CAAU,mBAAA,CAAoB,aAAC,CAAA,CAAA,CACtC,CAAA,CACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CACZ,QAAA,CAAAquB,GAAY,QAAA,EAAY,MAAA,CAC3B,GACF,CAAA,CACAntB,IAAAA,CAAC6nB,EAAAA,CAAA,CACC,WAAYoD,EAAAA,CACZ,MAAA,CAAQlB,GACR,OAAA,CAAS,IAAMC,GAAoB,KAAK,CAAA,CACxC,KAAA,CAAO,GAAA,CACP,gBAAiB,GAAA,CAEhB,QAAA,CAAA,CAAA3B,GAAiB,GAAA,CAAKnoB,CAAAA,EACrBpB,IAAC,QAAA,CAAA,CAEC,SAAA,CAAW,CAAA,+BAAA,EAAkCoB,CAAAA,CAAS,aAAa,CAAA,CAAA,EACjEitB,GAAY,QAAA,GAAajtB,CAAAA,CAAW,SAAW,EACjD,CAAA,CAAA,CACA,OAAA,CAAS,IAAMwrB,GAAqBxrB,CAAQ,CAAA,CAE3C,SAAAA,CAAAA,CAAAA,CANIA,CAOP,CACD,CAAA,CACDpB,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,wBACV,OAAA,CAAS,IAAM4sB,GAAqB,EAAE,CAAA,CACvC,gBAED,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAGCnc,CAAAA,CAAc,MAAA,CAAS,GAAKC,CAAAA,CAC3B1Q,GAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACb,SAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CAAiB,MAAO,CAAE,MAAA,CAAQ,SAAU,CAAA,CACzD,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,6EAAA,CAA8E,CAAA,CACtFA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,GAAA,CAAI,GAAG,MAAA,CAAO,EAAA,CAAG,IAAI,CAAA,CAAA,CACvC,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,qBAAS,CAAA,CAAA,CACjB,CAAA,CACAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACb,QAAA,CAAAA,GAAAA,CAACuQ,EAAAA,CAAA,CACC,aAAgB8d,EAAAA,CAAoB,IAAA,EAAQ,EAAC,CAC7C,aAAA,CAAe5d,EACf,QAAA,CAAUyc,CAAAA,CACV,WAAA,CAAaxc,CAAAA,CACb,MAAO4Y,EAAAA,CAAYvpB,CAAS,GAAKupB,EAAAA,CAAY,IAAA,CAC/C,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAEApoB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CAAyB,GAAA,CAAK6qB,GAC3C,QAAA,CAAA,CAAA7qB,IAAAA,CAAC,UACC,GAAA,CAAKkrB,EAAAA,CACL,SAAA,CAAU,gBAAA,CACV,QAAS,IAAMd,EAAAA,CAAiB,CAACD,EAAa,CAAA,CAE9C,UAAAnqB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,6EAAA,CAA8E,CAAA,CACtFA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,GAAG,GAAA,CAAI,EAAA,CAAG,OAAO,EAAA,CAAG,GAAA,CAAI,CAAA,CAAA,CACvC,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,QAAA,CAAM,EACZA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CAAoB,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACtC,CAAA,CACAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACZ,QAAA,CAAAquB,EAAAA,CAAY,QAAUA,EAAAA,CAAY,MAAA,CAAO,MAAA,CAAS,CAAA,CACjDruB,IAAC,MAAA,CAAA,CAAM,QAAA,CAAAquB,GAAY,MAAA,CAAO,IAAA,CAAK,IAAI,CAAA,CAAE,CAAA,CAErCruB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,iBAAiB,QAAA,CAAA,OAAA,CAAK,CAAA,CAE1C,GACF,CAAA,CACAA,GAAAA,CAAC+oB,GAAA,CACC,UAAA,CAAYqD,EAAAA,CACZ,MAAA,CAAQf,GACR,OAAA,CAAS,IAAMC,GAAiB,KAAK,CAAA,CACrC,MAAO,GAAA,CACP,eAAA,CAAiB,GAAA,CAEf,QAAA,CAAA,CAAAtB,EAAgB,MAAA,CAAS,CAAA,CAAIA,EAAkB,CAAC,KAAA,CAAO,UAAW,aAAA,CAAe,eAAe,CAAA,EAAG,GAAA,CAAK7gB,GACxGjI,IAAAA,CAAC,QAAA,CAAA,CAEC,UAAW,CAAA,sBAAA,EACTmtB,EAAAA,CAAY,QAAQ,QAAA,CAASllB,CAAK,EAAI,QAAA,CAAW,EACnD,GACA,OAAA,CAAS,IAAM2jB,GAAkB3jB,CAAK,CAAA,CAErC,UAAAA,CAAAA,CACAklB,EAAAA,CAAY,MAAA,EAAQ,QAAA,CAASllB,CAAK,CAAA,EACjCnJ,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CACZ,KAAA,CAAO,CAAE,UAAA,CAAY,MAAO,CAAA,CAE5B,QAAA,CAAAA,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,iBAAiB,CAAA,CACpC,CAAA,CAAA,CAAA,CAlBGmJ,CAoBP,CACD,CAAA,CACH,GACF,CAAA,CAIFjI,IAAAA,CAAC,UACC,SAAA,CAAU,gBAAA,CACV,QAAS,IAAM,CACbsT,GAAkB,CAACD,EAAc,CAAA,CACjC,UAAA,CAAW,IAAMyX,EAAAA,CAAc,OAAA,EAAS,cAAa,CAAG,CAAC,EAC3D,CAAA,CAEA,QAAA,CAAA,CAAA9qB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,EAAE,GAAA,CAAI,KAAA,CAAM,KAAK,MAAA,CAAO,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CACvDA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,GAAA,CAAI,GAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CACpCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,GAAA,CAAI,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAClCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAA,CACvC,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,UAAA,CAAQ,EACdA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CAAoB,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACtC,CAAA,CACAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACZ,QAAA,CAAAquB,EAAAA,CAAY,QACT,IAAI,IAAA,CAAKA,EAAAA,CAAY,OAAO,EAAE,kBAAA,EAAmB,CACjD,UACN,CAAA,CACAruB,GAAAA,CAAC,SACC,GAAA,CAAKgsB,EAAAA,CACL,IAAA,CAAK,MAAA,CACL,MACE,OAAOqC,EAAAA,CAAY,SAAY,QAAA,CAC3BA,EAAAA,CAAY,QAAQ,KAAA,CAAM,GAAG,EAAE,CAAC,CAAA,CAChCA,GAAY,OAAA,CAAA,CACX,IAAM,CAEL,IAAMroB,CAAAA,CAAI,IAAI,IAAA,CAAKqoB,EAAAA,CAAY,OAAO,CAAA,CAChCzqB,GAAOoC,CAAAA,CAAE,cAAA,GACTnC,EAAAA,CAAQ,MAAA,CAAOmC,EAAE,WAAA,EAAY,CAAI,CAAC,CAAA,CAAE,SAAS,CAAA,CAAG,GAAG,EACnDlC,EAAAA,CAAM,MAAA,CAAOkC,EAAE,UAAA,EAAY,CAAA,CAAE,QAAA,CAAS,EAAG,GAAG,CAAA,CAClD,OAAO,CAAA,EAAGpC,EAAI,IAAIC,EAAK,CAAA,CAAA,EAAIC,EAAG,CAAA,CAChC,CAAA,IACA,EAAA,CAEN,QAAA,CAAUqpB,GACV,KAAA,CAAO,CAAE,SAAU,UAAA,CAAY,OAAA,CAAS,CAAA,CAAG,aAAA,CAAe,MAAO,CAAA,CACnE,CAAA,CAAA,CACF,EAGAjsB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,QAAA,CAAA,CACC,UAAU,gBAAA,CACV,OAAA,CAAS,IAAMsqB,EAAAA,CAAkB,CAACD,EAAc,CAAA,CAEhD,QAAA,CAAA,CAAArqB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CAAE,KAAK,CAAA,CAC/BA,GAAAA,CAAC,YAAS,MAAA,CAAO,kBAAA,CAAmB,CAAA,CAAA,CACtC,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,gBAAA,CAAc,EACpBA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CAAoB,QAAA,CAAA,GAAA,CAAC,CAAA,CAAA,CACtC,CAAA,CACAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACZ,QAAA,CAAAquB,EAAAA,CAAY,cAAgB,CAAA,EAAGA,EAAAA,CAAY,aAAa,CAAA,CAAA,CAAA,CAAM,SAAA,CACjE,GACF,CAAA,CACC9C,EAAAA,EACCvrB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBACb,QAAA,CAAAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,SACL,GAAA,CAAI,GAAA,CACJ,KAAK,KAAA,CACL,WAAA,CAAY,QACZ,KAAA,CAAOquB,EAAAA,CAAY,aAAA,EAAiB,EAAA,CACpC,SAAW1rB,CAAAA,EAAM0qB,CAAAA,CAAiB1qB,EAAE,MAAA,CAAO,KAAK,EAChD,SAAA,CAAU,qBAAA,CACV,SAAA,CAAS,IAAA,CACT,OAAQ,IAAM6oB,EAAAA,CAAkB,KAAK,CAAA,CACvC,CAAA,CACF,GAEJ,CAAA,CAAA,CACF,CAAA,CAGAtqB,KAAC,SAAA,CAAA,CAAQ,SAAA,CAAU,mBACjB,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,wDAAwD,CAAA,CAChEA,GAAAA,CAAC,YAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CAClCA,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,IAAI,EAAA,CAAG,IAAA,CAAK,EACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,GAAA,CAAI,GAAG,IAAA,CAAK,CAAA,CACrCA,GAAAA,CAAC,UAAA,CAAA,CAAS,OAAO,cAAA,CAAe,CAAA,CAAA,CAClC,EACAA,GAAAA,CAAC,IAAA,CAAA,CAAG,uBAAW,CAAA,CAAA,CACjB,CAAA,CAECsqB,CAAAA,CACCtqB,GAAAA,CAAC,YACC,SAAA,CAAU,mBAAA,CACV,MAAOquB,EAAAA,CAAY,WAAA,EAAe,GAClC,QAAA,CAAW1rB,CAAAA,EAAM,CACf,GAAIynB,EAAW,CACb,IAAMoC,GAAgB,CAAE,GAAGpC,EAAW,WAAA,CAAaznB,CAAAA,CAAE,MAAA,CAAO,KAAM,EAClE0nB,CAAAA,CAAamC,EAAO,EACtB,CACF,CAAA,CACA,OAAQE,EAAAA,CACR,WAAA,CAAY,+BAAA,CACZ,SAAA,CAAS,KACX,CAAA,CAEA1sB,GAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CAAmB,QAAS,IAAMuqB,CAAAA,CAAwB,IAAI,CAAA,CAC1E,SAAA8D,EAAAA,CAAY,WAAA,CACXruB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAqB,QAAA,CAAA+tB,CAAAA,CAAeM,EAAAA,CAAY,WAAW,EAAE,CAAA,CAE5EntB,IAAAA,CAAC,KAAE,SAAA,CAAU,sBAAA,CACX,UAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,uDAAA,CAAwD,EAChEA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,uDAAA,CAAwD,CAAA,CAAA,CAClE,CAAA,CAAM,oBAAA,CAAA,CAER,EAEJ,CAAA,CAAA,CAEJ,CAAA,CAGAkB,KAAC,SAAA,CAAA,CAAQ,SAAA,CAAU,mBACjB,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,gBAAA,CAAiB,CAAA,CACzBA,GAAAA,CAAC,QAAK,CAAA,CAAE,uDAAA,CAAwD,GAClE,CAAA,CACAA,GAAAA,CAAC,MAAG,QAAA,CAAA,UAAA,CAAQ,CAAA,CACXqoB,EAAAA,CAAS,MAAA,CAAS,GACjBnnB,IAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,gBAAA,CACb,QAAA,CAAA,CAAAotB,GAAuB,GAAA,CAAEjG,EAAAA,CAAS,MAAA,CAAA,CACrC,CAAA,CAEFnnB,KAAC,QAAA,CAAA,CAAO,SAAA,CAAU,sBAAsB,OAAA,CAAS,IAAMwpB,GAAmB,IAAI,CAAA,CAC5E,UAAAxpB,IAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CACrCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,GAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAA,CACvC,CAAA,CAAM,OAER,CAAA,CAAA,CACF,CAAA,CAEAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CACZ,QAAA,CAAA,CAAAmnB,GAAS,GAAA,CAAK7N,CAAAA,EACbtZ,KAAC,KAAA,CAAA,CAEC,SAAA,CAAW,oBAAoBsZ,CAAAA,CAAQ,SAAA,CAAY,WAAA,CAAc,EAAE,GAEnE,QAAA,CAAA,CAAAxa,GAAAA,CAAC,UACC,SAAA,CAAU,2BAAA,CACV,QAAS,IAAM0tB,EAAAA,CAAoBlT,CAAAA,CAAQ,EAAE,EAE5C,QAAA,CAAAA,CAAAA,CAAQ,UACPtZ,IAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,YAAY,IAAA,CAAK,cAAA,CACnD,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,IAAA,CAAK,EAC/BA,GAAAA,CAAC,MAAA,CAAA,CACC,EAAE,eAAA,CACF,MAAA,CAAO,QACP,WAAA,CAAY,GAAA,CACZ,IAAA,CAAK,MAAA,CACP,GACF,CAAA,CAEAA,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAAA,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,IAAA,CAAK,EACjC,CAAA,CAEJ,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAA0B,QAAA,CAAAwa,CAAAA,CAAQ,MAAM,CAAA,CACxDxa,GAAAA,CAAC,UACC,SAAA,CAAU,yBAAA,CACV,QAAS,IAAM4tB,EAAAA,CAAoBpT,CAAAA,CAAQ,EAAE,EAE7C,QAAA,CAAAtZ,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,IAAC,UAAA,CAAA,CAAS,MAAA,CAAO,cAAA,CAAe,CAAA,CAChCA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,2EAA2E,CAAA,CAAA,CACrF,CAAA,CACF,IA9CKwa,CAAAA,CAAQ,EA+Cf,CACD,CAAA,CAEAiQ,EAAAA,EACCzqB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BACb,QAAA,CAAAA,GAAAA,CAAC,SACC,IAAA,CAAK,MAAA,CACL,WAAA,CAAY,kBAAA,CACZ,MAAO2qB,EAAAA,CACP,QAAA,CAAWhoB,GAAMioB,EAAAA,CAAmBjoB,CAAAA,CAAE,OAAO,KAAK,CAAA,CAClD,SAAA,CAAYA,CAAAA,EAAM,CACZA,CAAAA,CAAE,GAAA,GAAQ,SAAS4qB,EAAAA,EAAiB,CACpC5qB,EAAE,GAAA,GAAQ,QAAA,GACZ+nB,EAAAA,CAAmB,KAAK,EACxBE,EAAAA,CAAmB,EAAE,GAEzB,CAAA,CACA,MAAA,CAAQ2C,GACR,SAAA,CAAS,IAAA,CACT,SAAA,CAAU,wBAAA,CACZ,EACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,GAGEha,CAAAA,EAAuBD,CAAAA,CAAY,OAAS,CAAA,GAC5CpS,IAAAA,CAAC,SAAA,CAAA,CAAQ,SAAA,CAAU,mBACjB,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gHAAgH,CAAA,CAC1H,CAAA,CACAA,IAAC,IAAA,CAAA,CAAG,QAAA,CAAA,aAAA,CAAW,EACdsT,CAAAA,CAAY,MAAA,CAAS,GACpBtT,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,gBAAA,CAAkB,QAAA,CAAAsT,EAAY,MAAA,CAAO,CAAA,CAAA,CAEzD,CAAA,CAEAtT,GAAAA,CAACslB,GAAA,CACC,MAAA,CAAQ+I,GAAY,EAAA,CACpB,WAAA,CAAa/a,EACb,QAAA,CAAUC,CAAAA,CAAuBoE,CAAAA,EAAUpE,CAAAA,CAAoB8a,GAAY,EAAA,CAAI1W,CAAK,EAAI,MAAA,CACxF,QAAA,CAAUnE,EACV,SAAA,CAAW,EAAA,CACX,QAAA,CAAU,EAAA,CACZ,GACF,CAAA,CAIFtS,IAAAA,CAAC,WAAQ,SAAA,CAAU,kBAAA,CACjB,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,eACP,WAAA,CAAY,GAAA,CAEZ,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,0DAAA,CAA2D,CAAA,CACrE,CAAA,CACAA,GAAAA,CAAC,MAAG,QAAA,CAAA,UAAA,CAAQ,CAAA,CACZkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAW,mBAAmB6qB,CAAAA,GAAmB,KAAA,CAAQ,SAAW,EAAE,CAAA,CAAA,CACtE,QAAS,IAAMC,CAAAA,CAAkB,KAAK,CAAA,CACvC,QAAA,CAAA,KAAA,CAED,EACA9qB,GAAAA,CAAC,QAAA,CAAA,CACC,UAAW,CAAA,gBAAA,EAAmB6qB,CAAAA,GAAmB,WAAa,QAAA,CAAW,EAAE,CAAA,CAAA,CAC3E,OAAA,CAAS,IAAMC,CAAAA,CAAkB,UAAU,EAC5C,QAAA,CAAA,UAAA,CAED,CAAA,CACA9qB,IAAC,QAAA,CAAA,CACC,SAAA,CAAW,CAAA,gBAAA,EAAmB6qB,CAAAA,GAAmB,UAAY,QAAA,CAAW,EAAE,GAC1E,OAAA,CAAS,IAAMC,EAAkB,SAAS,CAAA,CAC3C,QAAA,CAAA,SAAA,CAED,CAAA,CAAA,CACF,GACF,CAAA,CAGA5pB,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACZ,UAAAuN,CAAAA,EACCzO,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAkB,KAAA,CAAO,CAAE,WAAYyO,CAAAA,CAAY,KAAM,EACrE,QAAA,CAAAA,CAAAA,CAAY,QAAA,CACf,CAAA,CAEFvN,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,YACC,GAAA,CAAK2rB,EAAAA,CACL,SAAA,CAAU,2BAAA,CACV,YAAY,oBAAA,CACZ,KAAA,CAAO9V,EACP,QAAA,CAAWlT,CAAAA,EAAMmT,EAAenT,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC9C,UAAWmrB,EAAAA,CACX,IAAA,CAAM,EACR,CAAA,CACA5sB,IAAAA,CAAC,OAAI,SAAA,CAAU,0BAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CAAO,SAAA,CAAU,0BAA0B,KAAA,CAAM,aAAA,CAChD,QAAA,CAAAA,GAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gHAAgH,CAAA,CAC1H,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,UAAO,SAAA,CAAU,yBAAA,CAA0B,MAAM,cAAA,CAChD,QAAA,CAAAkB,KAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,GAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,GAAA,CAAI,EAC9BA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,6CAAA,CAA8C,GACxD,CAAA,CACF,CAAA,CACAA,IAAC,QAAA,CAAA,CAAO,SAAA,CAAU,0BAA0B,KAAA,CAAM,WAAA,CAChD,QAAA,CAAAkB,IAAAA,CAAC,OACC,KAAA,CAAM,IAAA,CACN,OAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,OAAO,cAAA,CACP,WAAA,CAAY,IAEZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,UAAO,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CAAE,IAAA,CAAK,CAAA,CAC/BA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,0BAA0B,CAAA,CAClCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,GAAG,MAAA,CAAO,EAAA,CAAG,IAAI,CAAA,CACrCA,GAAAA,CAAC,QAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,GAAG,OAAA,CAAQ,EAAA,CAAG,IAAI,CAAA,CAAA,CACzC,CAAA,CACF,GACF,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,uBACV,OAAA,CAAS6tB,EAAAA,CACT,SAAU,CAAChY,CAAAA,CAAY,MAAK,CAC7B,QAAA,CAAA,MAAA,CAED,CAAA,CAAA,CACF,CAAA,CAAA,CACF,GACF,CAAA,CAGA3U,IAAAA,CAAC,OAAI,SAAA,CAAU,mBAAA,CACZ,UAAAktB,CAAAA,CAAiB,GAAA,CAAKxF,CAAAA,EAAa,CAClC,IAAMxjB,EAAAA,CAAOL,CAAAA,CAAe,KAAMO,EAAAA,EAAMA,EAAAA,CAAE,KAAOsjB,CAAAA,CAAS,MAAM,CAAA,CAGhE,GAFkBA,EAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,CAEnC,CACb,IAAM7N,EAAAA,CAAUtH,CAAAA,CAAS,KAAM4G,EAAAA,EAAMA,EAAAA,CAAE,KAAOuO,CAAAA,CAAS,QAAA,EAAU,SAAS,CAAA,CAC1E,OAAK7N,GAGH7Z,IAAAA,CAAC,KAAA,CAAA,CAAsB,SAAA,CAAU,qCAAA,CAC9B,UAAAkE,EAAAA,EACCpF,GAAAA,CAAC,OAAI,SAAA,CAAU,iBAAA,CAAkB,MAAO,CAAE,UAAA,CAAYoF,EAAAA,CAAK,KAAM,EAC9D,QAAA,CAAAA,EAAAA,CAAK,SACR,CAAA,CAEFlE,IAAAA,CAAC,OAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,0BAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,wBAAA,CACb,QAAA,CAAAoF,IAAM,IAAA,EAAQ,SAAA,CACjB,EACApF,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,wBAAA,CACb,QAAA,CAAA,IAAI,KAAK4oB,CAAAA,CAAS,SAAS,CAAA,CAAE,cAAA,GAChC,CAAA,CAAA,CACF,CAAA,CACA5oB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAyB,QAAA,CAAA+a,EAAAA,CAAQ,OAAA,CAAQ,CAAA,CAAA,CAC1D,IAhBQ6N,CAAAA,CAAS,EAiBnB,EApBmB,IAsBvB,CAGA,OACE1nB,IAAAA,CAAC,KAAA,CAAA,CAAsB,SAAA,CAAU,qCAAA,CAC/B,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uBAAA,CACZ,QAAA,CAAA,CAAA0nB,EAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,EAAK,QAAA,CACrCA,EAAS,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,EAAK,cAAA,CACrCA,EAAS,IAAA,CAAK,QAAA,CAAS,OAAO,CAAA,EAAK,eACnCA,CAAAA,CAAS,IAAA,CAAK,SAAS,SAAS,CAAA,EAAK,kBACrCA,CAAAA,CAAS,IAAA,CAAK,QAAA,CAAS,UAAU,GAAK,WAAA,CACtCA,CAAAA,CAAS,KAAK,QAAA,CAAS,UAAU,GAAK,WAAA,CACtCA,CAAAA,CAAS,IAAA,CAAK,QAAA,CAAS,OAAO,CAAA,EAAK,iBAAA,CAAA,CACtC,EACA1nB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,2BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBACb,QAAA,CAAAoF,EAAAA,EAAM,IAAA,EAAQ,SAAA,CACjB,EAAQ,GAAA,CACPwjB,CAAAA,CAAS,KAAK,OAAA,CAAQ,IAAA,CAAM,GAAG,CAAA,CAAE,WAAA,EAAY,CAC7CA,CAAAA,CAAS,UACR1nB,IAAAA,CAAA6G,QAAAA,CAAA,CACG,QAAA,CAAA,CAAA,MAAA,CACD/H,GAAAA,CAAC,UAAQ,QAAA,CAAA4oB,CAAAA,CAAS,QAAA,CAAS,CAAA,CAAA,CAC7B,GAEJ,CAAA,CACA5oB,GAAAA,CAAC,QAAK,SAAA,CAAU,wBAAA,CACb,aAAI,IAAA,CAAK4oB,CAAAA,CAAS,SAAS,CAAA,CAAE,cAAA,GAChC,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CA1BQA,EAAS,EA2BnB,CAEJ,CAAC,CAAA,CAEAwF,CAAAA,CAAiB,MAAA,GAAW,CAAA,EAC3BltB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAE,QAAA,CAAA,iBAAA,CAAe,CAAA,CAClBA,GAAAA,CAAC,MAAA,CAAA,CAAK,qCAAyB,CAAA,CAAA,CACjC,CAAA,CAAA,CAEJ,GACF,CAAA,CAAA,CACF,CAAA,CACF,EACF,CAEJ,CCn5CA,SAASuuB,EAAAA,CAAc,CAAE,MAAA,CAAApR,CAAAA,CAAQ,QAAAqR,CAAQ,CAAA,CAAQ,CAC/C,OAAI,CAACrR,CAAAA,EAAU,CAACqR,GAAW,CAACA,CAAAA,CAAQ,OAAe,IAAA,CAGjDttB,IAAAA,CAAC,OAAI,SAAA,CAAU,eAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAE,SAAA,CAAU,qBAAA,CAAuB,SAAAwuB,CAAAA,CAAQ,CAAC,EAAE,OAAA,CAAQ,MAAA,CAAO,EAC7DA,CAAAA,CAAQ,GAAA,CAAI,CAACp0B,CAAAA,CAAYuE,CAAAA,GACxBuC,KAAC,GAAA,CAAA,CAAc,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,KAAA,CAAO9G,CAAAA,CAAM,KAAM,CAAA,CACxE,QAAA,CAAA,CAAAA,EAAM,IAAA,CAAK,IAAA,CAAE4F,IAAC,QAAA,CAAA,CAAQ,QAAA,CAAA5F,CAAAA,CAAM,KAAA,CAAM,EAAS,QAAA,CAAA,CAAA,CADtCuE,CAER,CACD,CAAA,CAAA,CACH,CAEJ,CAEO,SAAS8vB,EAAAA,CAAc,CAC5B,IAAA,CAAAjzB,EACA,KAAA,CAAAmR,CAAAA,CAAQ,gBACR,MAAA,CAAA+hB,CAAAA,CAAS,IACT,WAAA,CAAAC,CAAAA,CAAc,IAAA,CACd,WAAA,CAAAC,EAAc,IAChB,CAAA,CAAuB,CAErB,IAAMC,CAAAA,CAAkBrzB,EAAK,GAAA,CAAKszB,CAAAA,GAAW,CAC3C,GAAGA,EACH,OAAA,CACEA,CAAAA,CAAM,SACNtzB,CAAAA,CAAK,MAAA,CAAO,CAACuzB,CAAAA,CAAK1qB,CAAAA,GAAM0qB,CAAAA,CAAM1qB,CAAAA,CAAE,UAAW,CAAC,CAAA,CAAI7I,EAAK,MACzD,CAAA,CAAE,EAEF,OACE0F,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBACZ,QAAA,CAAA,CAAAyL,CAAAA,EAAS3M,IAAC,IAAA,CAAA,CAAG,SAAA,CAAU,cAAe,QAAA,CAAA2M,CAAAA,CAAM,EAE7C3M,GAAAA,CAACgvB,mBAAAA,CAAA,CAAoB,KAAA,CAAM,MAAA,CAAO,OAAQN,CAAAA,CACxC,QAAA,CAAAxtB,KAAC+tB,SAAAA,CAAA,CACC,IAAA,CAAMJ,CAAAA,CACN,OAAQ,CAAE,GAAA,CAAK,EAAG,KAAA,CAAO,EAAA,CAAI,KAAM,EAAA,CAAI,MAAA,CAAQ,CAAE,CAAA,CAEjD,UAAA7uB,GAAAA,CAACkvB,aAAAA,CAAA,CAAc,eAAA,CAAgB,KAAA,CAAM,OAAO,0BAAA,CAA2B,CAAA,CACvElvB,GAAAA,CAACmvB,KAAAA,CAAA,CACC,OAAA,CAAQ,QAAA,CACR,OAAO,0BAAA,CACP,KAAA,CAAO,CAAE,QAAA,CAAU,MAAO,EAC5B,CAAA,CACAnvB,GAAAA,CAACovB,MAAA,CACC,MAAA,CAAO,2BACP,KAAA,CAAO,CAAE,SAAU,MAAO,CAAA,CAC5B,CAAA,CACApvB,GAAAA,CAACqvB,QAAA,CAAQ,OAAA,CAASrvB,IAACuuB,EAAAA,CAAA,EAAc,EAAI,CAAA,CACrCvuB,GAAAA,CAACsvB,MAAAA,CAAA,CACC,aAAc,CAAE,QAAA,CAAU,OAAQ,KAAA,CAAO,0BAA2B,EACtE,CAAA,CAGAtvB,GAAAA,CAACuvB,IAAAA,CAAA,CACC,KAAK,UAAA,CACL,OAAA,CAAQ,YACR,MAAA,CAAO,SAAA,CACP,YAAa,CAAA,CACb,IAAA,CAAK,YACL,GAAA,CAAK,CAAE,KAAM,SAAA,CAAW,CAAA,CAAG,CAAE,CAAA,CAC7B,SAAA,CAAW,CAAE,CAAA,CAAG,CAAE,CAAA,CACpB,CAAA,CAGCX,GACC5uB,GAAAA,CAACuvB,IAAAA,CAAA,CACC,IAAA,CAAK,UAAA,CACL,QAAQ,SAAA,CACR,MAAA,CAAO,SAAA,CACP,WAAA,CAAa,EACb,eAAA,CAAgB,KAAA,CAChB,KAAK,SAAA,CACL,GAAA,CAAK,CAAE,IAAA,CAAM,SAAA,CAAW,CAAA,CAAG,CAAE,EAC/B,CAAA,CAIDZ,CAAAA,EACC3uB,IAACuvB,IAAAA,CAAA,CACC,KAAK,UAAA,CACL,OAAA,CAAQ,SAAA,CACR,MAAA,CAAO,UACP,WAAA,CAAa,CAAA,CACb,gBAAgB,KAAA,CAChB,IAAA,CAAK,UACL,GAAA,CAAK,KAAA,CACP,CAAA,CAAA,CAEJ,CAAA,CACF,EAGAruB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,aAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,QAAA,CAAA,iBAAA,CAAe,CAAA,CAClDA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kBAAA,CAAmB,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,EAC1D,QAAA,CAAAxE,CAAAA,CAAK,OAAO,CAACuzB,CAAAA,CAAKD,IAAUC,CAAAA,CAAMD,CAAAA,CAAM,UAAW,CAAC,CAAA,CACvD,GACF,CAAA,CACA5tB,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,4BAAgB,CAAA,CACnDA,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,KAAA,CAAO,CAAE,MAAO,SAAU,CAAA,CACzD,UAAAxE,CAAAA,CAAK,MAAA,CAAO,CAACuzB,CAAAA,CAAKD,CAAAA,GAAUC,CAAAA,CAAMD,CAAAA,CAAM,UAAW,CAAC,CAAA,CAAItzB,EAAK,MAAA,EAAQ,OAAA,CAAQ,CAAC,CAAA,CAClF,CAAA,CAAA,CACF,EACCozB,CAAAA,EAAepzB,CAAAA,CAAK,KAAM6I,CAAAA,EAAMA,CAAAA,CAAE,OAAO,CAAA,EACxCnD,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,yBAAa,CAAA,CAChDA,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,KAAA,CAAO,CAAE,MAAO,SAAU,CAAA,CAC1D,SAAAxE,CAAAA,CAAK,MAAA,CAAO,CAACuzB,CAAAA,CAAKD,CAAAA,GAAUC,CAAAA,EAAOD,CAAAA,CAAM,SAAW,CAAA,CAAA,CAAI,CAAC,EAC5D,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,GACF,CAEJ,CCxHA,SAASP,GAAc,CAAE,MAAA,CAAApR,CAAAA,CAAQ,OAAA,CAAAqR,CAAQ,CAAA,CAAQ,CAC/C,OAAI,CAACrR,CAAAA,EAAU,CAACqR,CAAAA,EAAW,CAACA,CAAAA,CAAQ,MAAA,CAAe,KAGjDttB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,eAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,GAAA,CAAA,CAAE,SAAA,CAAU,qBAAA,CAAuB,QAAA,CAAAwuB,EAAQ,CAAC,CAAA,CAAE,QAAQ,GAAA,CAAI,CAAA,CAC1DA,EAAQ,GAAA,CAAI,CAACp0B,CAAAA,CAAYuE,CAAAA,GACxBuC,KAAC,GAAA,CAAA,CAAc,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,MAAO9G,CAAAA,CAAM,KAAM,CAAA,CACxE,QAAA,CAAA,CAAAA,EAAM,IAAA,CAAK,IAAA,CAAE4F,IAAC,QAAA,CAAA,CAAQ,QAAA,CAAA5F,EAAM,KAAA,CAAM,CAAA,CAAS,WADtCuE,CAER,CACD,GACH,CAEJ,CAEO,SAAS6wB,EAAAA,CAAc,CAC5B,KAAAh0B,CAAAA,CACA,KAAA,CAAAmR,CAAAA,CAAQ,iBAAA,CACR,OAAA+hB,CAAAA,CAAS,GAAA,CACT,WAAAe,CAAAA,CACA,OAAA,CAAAC,EAAU,KACZ,CAAA,CAAuB,CAErB,IAAMC,EAAQF,CAAAA,GAAej0B,CAAAA,CAAK,CAAC,CAAA,EAAG,KAAA,EAASA,EAAK,CAAC,CAAA,EAAG,SAAA,EAAa,CAAA,CAAA,CAG/Do0B,EAAmBp0B,CAAAA,CAAKA,CAAAA,CAAK,OAAS,CAAC,CAAA,EAAG,WAAa,CAAA,CACvDq0B,CAAAA,CAAiBr0B,EAAKA,CAAAA,CAAK,MAAA,CAAS,CAAC,CAAA,EAAG,KAAA,EAAS,EACjD0b,CAAAA,CAAWyY,CAAAA,CAAQ,GAAMA,CAAAA,CAAQC,CAAAA,EAAoBD,CAAAA,CAAS,GAAA,CAAM,EACpEG,CAAAA,CAAYF,CAAAA,EAAoBC,EAItC,OACE3uB,IAAAA,CAAC,OAAI,SAAA,CAAU,iBAAA,CACZ,QAAA,CAAA,CAAAyL,CAAAA,EAAS3M,IAAC,IAAA,CAAA,CAAG,SAAA,CAAU,cAAe,QAAA,CAAA2M,CAAAA,CAAM,EAE7C3M,GAAAA,CAACgvB,mBAAAA,CAAA,CAAoB,KAAA,CAAM,OAAO,MAAA,CAAQN,CAAAA,CACxC,SAAAxtB,IAAAA,CAPiBwuB,CAAAA,CAAUK,UAAYd,SAAAA,CAOtC,CACC,KAAMzzB,CAAAA,CACN,MAAA,CAAQ,CAAE,GAAA,CAAK,CAAA,CAAG,MAAO,EAAA,CAAI,IAAA,CAAM,GAAI,MAAA,CAAQ,CAAE,CAAA,CAEjD,QAAA,CAAA,CAAAwE,IAACkvB,aAAAA,CAAA,CAAc,gBAAgB,KAAA,CAAM,MAAA,CAAO,2BAA2B,CAAA,CACvElvB,GAAAA,CAACmvB,KAAAA,CAAA,CACC,QAAQ,KAAA,CACR,MAAA,CAAO,2BACP,KAAA,CAAO,CAAE,SAAU,MAAO,CAAA,CAC5B,CAAA,CACAnvB,GAAAA,CAACovB,MAAA,CACC,MAAA,CAAO,2BACP,KAAA,CAAO,CAAE,SAAU,MAAO,CAAA,CAC5B,CAAA,CACApvB,GAAAA,CAACqvB,QAAA,CAAQ,OAAA,CAASrvB,IAACuuB,EAAAA,CAAA,EAAc,EAAI,CAAA,CACrCvuB,GAAAA,CAACsvB,MAAAA,CAAA,CACC,aAAc,CAAE,QAAA,CAAU,OAAQ,KAAA,CAAO,0BAA2B,EACtE,CAAA,CAECI,CAAAA,CACCxuB,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAACgwB,KAAA,CACC,IAAA,CAAK,WACL,OAAA,CAAQ,OAAA,CACR,MAAA,CAAO,SAAA,CACP,KAAK,yBAAA,CACL,WAAA,CAAa,EACb,eAAA,CAAgB,KAAA,CAChB,KAAK,OAAA,CACP,CAAA,CAEAhwB,IAACgwB,IAAAA,CAAA,CACC,KAAK,UAAA,CACL,OAAA,CAAQ,YACR,MAAA,CAAQF,CAAAA,CAAY,UAAY,SAAA,CAChC,IAAA,CAAMA,CAAAA,CAAY,yBAAA,CAA4B,yBAC9C,WAAA,CAAa,CAAA,CACb,KAAK,WAAA,CACP,CAAA,CAAA,CACF,EAEA5uB,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,IAACuvB,IAAAA,CAAA,CACC,KAAK,QAAA,CACL,OAAA,CAAQ,QACR,MAAA,CAAO,SAAA,CACP,WAAA,CAAa,CAAA,CACb,gBAAgB,KAAA,CAChB,IAAA,CAAK,QACL,GAAA,CAAK,CAAE,KAAM,SAAA,CAAW,CAAA,CAAG,CAAE,CAAA,CAC/B,CAAA,CAEAvvB,IAACuvB,IAAAA,CAAA,CACC,KAAK,UAAA,CACL,OAAA,CAAQ,YACR,MAAA,CAAQO,CAAAA,CAAY,SAAA,CAAY,SAAA,CAChC,YAAa,CAAA,CACb,IAAA,CAAK,YACL,GAAA,CAAK,CAAE,KAAMA,CAAAA,CAAY,SAAA,CAAY,SAAA,CAAW,CAAA,CAAG,CAAE,CAAA,CACrD,SAAA,CAAW,CAAE,CAAA,CAAG,CAAE,EACpB,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAGA5uB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,kBAAA,CAAmB,QAAA,CAAA,UAAA,CAAQ,EAC3CkB,IAAAA,CAAC,MAAA,CAAA,CACC,UAAU,kBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOgW,GAAY,EAAA,CAAK,SAAA,CAAY,SAAU,CAAA,CAEtD,QAAA,CAAA,CAAAA,EAAS,OAAA,CAAQ,CAAC,CAAA,CAAE,GAAA,CAAA,CACvB,GACF,CAAA,CACAhW,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kBAAA,CAAmB,qBAAS,CAAA,CAC5CA,GAAAA,CAAC,QACC,SAAA,CAAU,kBAAA,CACV,MAAO,CAAE,KAAA,CAAO8vB,EAAY,SAAA,CAAY,SAAU,EAEjD,QAAA,CAAAF,CAAAA,CACH,GACF,CAAA,CACA1uB,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,kBAAM,CAAA,CACzCA,GAAAA,CAAC,QACC,SAAA,CAAU,kBAAA,CACV,KAAA,CAAO,CACL,WAAY8vB,CAAAA,CACR,0BAAA,CACA,0BACJ,KAAA,CAAOA,CAAAA,CAAY,UAAY,SACjC,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAY,kBAAe,eAAA,CAC9B,CAAA,CAAA,CACF,GACF,CAAA,CAAA,CACF,CAEJ,CCjJA,IAAMG,GAA0C,CAC9C,MAAA,CAAQ,UACR,IAAA,CAAM,SAAA,CACN,MAAA,CAAQ,SAAA,CACR,IAAK,SACP,CAAA,CAGMC,GAAiB,CAAC,SAAA,CAAW,UAAW,SAAA,CAAW,SAAA,CAAW,UAAW,SAAS,CAAA,CAKxF,SAASC,EAAAA,CAAe,CACtB,GAAAC,CAAAA,CACA,EAAA,CAAAC,EACA,QAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,YAAAC,CAAAA,CACA,OAAA,CAAAC,CACF,CAAA,CAAQ,CACN,IAAMC,CAAAA,CAASH,CAAAA,CAAAA,CAAeC,CAAAA,CAAcD,CAAAA,EAAe,GACrD95B,CAAAA,CAAI25B,CAAAA,CAAKM,EAAS,IAAA,CAAK,GAAA,CAAI,CAACJ,CAAAA,EAAY,IAAA,CAAK,EAAA,CAAK,GAAA,CAAI,EACtD55B,CAAAA,CAAI25B,CAAAA,CAAKK,EAAS,IAAA,CAAK,GAAA,CAAI,CAACJ,CAAAA,EAAY,IAAA,CAAK,GAAK,GAAA,CAAI,CAAA,CAE5D,OAAIG,CAAAA,CAAU,GAAA,CAAa,KAGzBzwB,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CACH,CAAA,CAAGC,CAAAA,CACH,IAAA,CAAK,QACL,UAAA,CAAYD,CAAAA,CAAI25B,EAAK,OAAA,CAAU,KAAA,CAC/B,iBAAiB,SAAA,CACjB,KAAA,CAAO,CAAE,QAAA,CAAU,OAAQ,UAAA,CAAY,GAAI,EAE1C,QAAA,CAAA,CAAA,EAAA,CAAIK,CAAAA,CAAU,KAAK,OAAA,CAAQ,CAAC,CAAC,CAAA,CAAA,CAAA,CAChC,CAEJ,CAKA,SAASlC,GAAc,CAAE,MAAA,CAAApR,EAAQ,OAAA,CAAAqR,CAAQ,CAAA,CAAQ,CAC/C,GAAI,CAACrR,CAAAA,EAAU,CAACqR,CAAAA,EAAW,CAACA,EAAQ,MAAA,CAAQ,OAAO,IAAA,CAEnD,IAAMhzB,EAAOgzB,CAAAA,CAAQ,CAAC,EAAE,OAAA,CAClBmB,CAAAA,CAAQnB,EAAQ,CAAC,CAAA,CAAE,OAAA,CAAQ,UAAA,EAAc,EACzCpiB,CAAAA,CAAaujB,CAAAA,CAAQ,GAAMn0B,CAAAA,CAAK,KAAA,CAAQm0B,EAAS,GAAA,EAAK,OAAA,CAAQ,CAAC,CAAA,CAAI,IAEzE,OACEzuB,IAAAA,CAAC,OAAI,SAAA,CAAU,eAAA,CACb,UAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,qBAAA,CAAuB,QAAA,CAAAxE,EAAK,IAAA,CAAK,CAAA,CAC9C0F,KAAC,GAAA,CAAA,CAAE,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,KAAA,CAAO1F,CAAAA,CAAK,OAASgzB,CAAAA,CAAQ,CAAC,EAAE,KAAM,CAAA,CAAG,oBAC5ExuB,GAAAA,CAAC,QAAA,CAAA,CAAQ,QAAA,CAAAxE,CAAAA,CAAK,MAAM,CAAA,CAAA,CAC7B,CAAA,CACA0F,KAAC,GAAA,CAAA,CAAE,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,KAAA,CAAO,0BAA2B,EAAG,QAAA,CAAA,CAAA,cAAA,CACnEA,IAAAA,CAAC,UAAQ,QAAA,CAAA,CAAAkL,CAAAA,CAAW,KAAC,CAAA,CAAA,CACnC,CAAA,CAAA,CACF,CAEJ,CAEO,SAASukB,GAAmB,CACjC,IAAA,CAAAn1B,EACA,KAAA,CAAAmR,CAAAA,CAAQ,eACR,IAAA,CAAA0Y,CAAAA,CAAO,KAAA,CACP,MAAA,CAAAqJ,EAAS,GAAA,CACT,eAAA,CAAAkC,EAAkB,IACpB,CAAA,CAA4B,CAE1B,IAAMjB,CAAAA,CAAQn0B,CAAAA,CAAK,MAAA,CAAO,CAACuzB,CAAAA,CAAKD,CAAAA,GAAUC,EAAMD,CAAAA,CAAM,KAAA,CAAO,CAAC,CAAA,CACxD+B,CAAAA,CAAgBr1B,CAAAA,CAAK,GAAA,CAAKszB,IAAW,CACzC,GAAGA,EACH,UAAA,CAAYa,CAAAA,CACZ,MAAOb,CAAAA,CAAM,KAAA,EAASmB,GAAgBnB,CAAAA,CAAM,IAAI,GAAKoB,EAAAA,CAAe10B,CAAAA,CAAK,QAAQszB,CAAK,CAAA,CAAIoB,GAAe,MAAM,CACjH,CAAA,CAAE,CAAA,CAGIY,EAASD,CAAAA,CAAc,GAAA,CAAK/B,GAAUA,CAAAA,CAAM,KAAK,EAEvD,OACE5tB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBACZ,QAAA,CAAA,CAAAyL,CAAAA,EAAS3M,IAAC,IAAA,CAAA,CAAG,SAAA,CAAU,cAAe,QAAA,CAAA2M,CAAAA,CAAM,CAAA,CAE7C3M,GAAAA,CAACgvB,oBAAA,CAAoB,KAAA,CAAM,OAAO,MAAA,CAAQN,CAAAA,CACvC,SAAArJ,CAAAA,GAAS,KAAA,CACRnkB,IAAAA,CAAC6vB,QAAAA,CAAA,CACC,QAAA,CAAA,CAAA/wB,GAAAA,CAACgxB,IAAA,CACC,IAAA,CAAMH,EACN,EAAA,CAAG,KAAA,CACH,EAAA,CAAG,KAAA,CACH,UAAW,KAAA,CACX,KAAA,CAAOD,EAAkBT,EAAAA,CAAiB,KAAA,CAC1C,YAAazB,CAAAA,CAAS,GAAA,CACtB,IAAA,CAAK,SAAA,CACL,QAAQ,OAAA,CAEP,QAAA,CAAAmC,EAAc,GAAA,CAAI,CAAC74B,EAAG2G,CAAAA,GACrBqB,GAAAA,CAACixB,IAAAA,CAAA,CAA2B,KAAMH,CAAAA,CAAOnyB,CAAK,GAAnC,CAAA,KAAA,EAAQA,CAAK,EAAyB,CAClD,CAAA,CACH,EACAqB,GAAAA,CAACqvB,OAAAA,CAAA,CAAQ,OAAA,CAASrvB,GAAAA,CAACuuB,GAAA,EAAc,CAAA,CAAI,EACrCvuB,GAAAA,CAACsvB,MAAAA,CAAA,CACC,YAAA,CAAc,CAAE,QAAA,CAAU,MAAA,CAAQ,MAAO,0BAA2B,CAAA,CACpE,UAAW,CAAClyB,CAAAA,CAAO8zB,CAAAA,GAAqB,CACtC,IAAMpC,CAAAA,CAAQoC,CAAAA,CAAY,QACpB9kB,CAAAA,CAAaujB,CAAAA,CAAQ,GAAMb,CAAAA,CAAM,KAAA,CAAQa,CAAAA,CAAS,GAAA,EAAK,QAAQ,CAAC,CAAA,CAAI,IAC1E,OAAO,CAAA,EAAGvyB,CAAK,CAAA,EAAA,EAAK0xB,CAAAA,CAAM,KAAK,CAAA,GAAA,EAAM1iB,CAAU,IACjD,CAAA,CACF,CAAA,CAAA,CACF,EAEAlL,IAAAA,CAACiwB,UAAAA,CAAA,CACC,IAAA,CAAMN,CAAAA,CACN,MAAA,CAAQ,CAAE,IAAK,CAAA,CAAG,KAAA,CAAO,GAAI,IAAA,CAAM,EAAA,CAAI,OAAQ,CAAE,CAAA,CAEjD,QAAA,CAAA,CAAA7wB,GAAAA,CAACkvB,cAAA,CAAc,eAAA,CAAgB,MAAM,MAAA,CAAO,0BAAA,CAA2B,EACvElvB,GAAAA,CAACmvB,KAAAA,CAAA,CACC,OAAA,CAAQ,OACR,MAAA,CAAO,0BAAA,CACP,MAAO,CAAE,QAAA,CAAU,MAAO,CAAA,CAC5B,CAAA,CACAnvB,IAACovB,KAAAA,CAAA,CACC,OAAO,0BAAA,CACP,KAAA,CAAO,CAAE,QAAA,CAAU,MAAO,EAC5B,CAAA,CACApvB,GAAAA,CAACqvB,OAAAA,CAAA,CAAQ,QAASrvB,GAAAA,CAACuuB,EAAAA,CAAA,EAAc,CAAA,CAAI,CAAA,CACrCvuB,IAACsvB,MAAAA,CAAA,CACC,YAAA,CAAc,CAAE,SAAU,MAAA,CAAQ,KAAA,CAAO,0BAA2B,CAAA,CACtE,CAAA,CACAtvB,IAACoxB,GAAAA,CAAA,CAAI,OAAA,CAAQ,OAAA,CAAQ,KAAK,OAAA,CAAQ,MAAA,CAAQ,CAAC,CAAA,CAAG,CAAA,CAAG,EAAG,CAAC,CAAA,CAClD,QAAA,CAAAP,CAAAA,CAAc,IAAI,CAAC74B,CAAAA,CAAG2G,IACrBqB,GAAAA,CAACixB,IAAAA,CAAA,CAA2B,IAAA,CAAMH,CAAAA,CAAOnyB,CAAK,CAAA,CAAA,CAAnC,QAAQA,CAAK,CAAA,CAAyB,CAClD,CAAA,CACH,CAAA,CAAA,CACF,EAEJ,CAAA,CAGAuC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,YAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kBAAA,CAAmB,uBAAW,CAAA,CAC9CA,GAAAA,CAAC,QAAK,SAAA,CAAU,kBAAA,CAAmB,MAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAC1D,QAAA,CAAA2vB,EACH,CAAA,CAAA,CACF,CAAA,CACAzuB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,aACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,QAAA,CAAA,YAAA,CAAU,CAAA,CAC7CA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,EAC1D,QAAA,CAAAxE,CAAAA,CAAK,OACR,CAAA,CAAA,CACF,CAAA,CACCA,EAAK,MAAA,CAAS,CAAA,EACb0F,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,YAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,QAAA,CAAA,kBAAA,CAAgB,CAAA,CACnDA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAmB,KAAA,CAAO,CAAE,MAAO,SAAU,CAAA,CAC1D,SAAAxE,CAAAA,CAAK,MAAA,CAAO,CAAC61B,CAAAA,CAAKvC,IAAWA,CAAAA,CAAM,KAAA,CAAQuC,EAAI,KAAA,CAAQvC,CAAAA,CAAQuC,CAAI,CAAA,CAAE,IAAA,CACxE,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,GACF,CAEJ,CCxKO,IAAMC,EAAAA,CAAwBrpB,KACnC,CAAC,CACC,cAAAspB,CAAAA,CACA,cAAA,CAAAxsB,EAAiB,EAAC,CAClB,iBAAAysB,CAAAA,CACA,SAAA,CAAAhW,EACA,OAAA,CAAAkD,CAAAA,CAAU,EAAC,CACX,gBAAAsL,CAAAA,CAAkB,EACpB,CAAA,GAAM,CACJ,GAAM,CAACiB,CAAAA,CAAkBC,CAAmB,CAAA,CAAI5qB,SAAS,KAAK,CAAA,CACxD,CAACmxB,CAAAA,CAAcC,CAAe,EAAIpxB,QAAAA,CAAS,KAAK,CAAA,CAChD,CAACqxB,EAAcC,CAAe,CAAA,CAAItxB,SAAS,KAAK,CAAA,CAChD,CAAC+qB,CAAAA,CAAeC,CAAgB,CAAA,CAAIhrB,QAAAA,CAAS,KAAK,CAAA,CAExD,GAAIixB,EAAc,MAAA,GAAW,CAAA,CAAG,OAAO,IAAA,CAEvC,IAAMM,CAAAA,CAAUN,CAAAA,CAAc,IAAK31B,CAAAA,EAASA,CAAAA,CAAK,EAAE,CAAA,CAE7Ck2B,CAAAA,CAAwB1wB,GAAuB,CACnDoa,CAAAA,CAAU,YAAA,GAAeqW,CAAAA,CAAS,CAAE,QAAA,CAAAzwB,CAAS,CAAC,CAAA,CAC9C8pB,CAAAA,CAAoB,KAAK,EAC3B,CAAA,CAEM6G,CAAAA,CAAc3V,CAAAA,EAAqB,CACvCZ,CAAAA,CAAU,UAAA,GAAaqW,EAASzV,CAAQ,CAAA,CACxCsV,EAAgB,KAAK,CAAA,CACrBF,IACF,CAAA,CAEMQ,EAAqBC,CAAAA,EAAsB,CAC/CzW,EAAU,YAAA,GAAeqW,CAAAA,CAAS,CAAE,eAAA,CAAiBI,CAAQ,CAAC,CAAA,CAC9DL,EAAgB,KAAK,EACvB,EAEMM,CAAAA,CAAmBC,CAAAA,EAAqB,CAE5C,IAAMC,CAAAA,CAAiB,IAAI,GAAA,CAC3Bb,EAAc,OAAA,CAAS31B,CAAAA,EAAS,CAC9BA,CAAAA,CAAK,MAAA,EAAQ,QAASuN,CAAAA,EAAUipB,CAAAA,CAAe,GAAA,CAAIjpB,CAAK,CAAC,EAC3D,CAAC,EAGD,IAAMkpB,CAAAA,CAAY,MAAM,IAAA,CAAK,IAAI,IAAI,CAAC,GAAGD,EAAgB,GAAGD,CAAM,CAAC,CAAC,CAAA,CAEpE3W,EAAU,YAAA,GAAeqW,CAAAA,CAAS,CAAE,MAAA,CAAQQ,CAAU,CAAC,CAAA,CACvD/G,EAAiB,KAAK,EACxB,EAEMzE,CAAAA,CAAe,IAAM,CACrB,OAAA,CAAQ,UAAU0K,CAAAA,CAAc,MAAM,kCAAkC,CAAA,GAC1E/V,CAAAA,CAAU,eAAeqW,CAAO,CAAA,CAChCL,CAAAA,EAAiB,EAErB,EAEA,OACExxB,GAAAA,CAAC,OAAI,SAAA,CAAU,qBAAA,CACb,SAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,6BAAA,CAEb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BACZ,QAAA,CAAA,CAAAqwB,CAAAA,CAAc,OAAO,OAAA,CAAMA,CAAAA,CAAc,MAAA,GAAW,CAAA,CAAI,IAAM,EAAA,CAAG,WAAA,CAAA,CACpE,EAGArwB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,6BAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CACC,SAAA,CAAU,6BACV,OAAA,CAAS,IAAMkrB,CAAAA,CAAoB,CAACD,CAAgB,CAAA,CACpD,KAAA,CAAM,kBAEN,QAAA,CAAAjrB,GAAAA,CAAC,QAAK,SAAA,CAAU,SAAA,CAAU,QAAA,CAAA,UAAA,CAAQ,CAAA,CACpC,EACCirB,CAAAA,EACCjrB,GAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CACX,UAAC,KAAA,CAAO,QAAA,CAAU,MAAA,CAAQ,QAAQ,EAAiB,GAAA,CAAKoB,CAAAA,EACxDF,KAAC,QAAA,CAAA,CAEC,SAAA,CAAU,wBACV,OAAA,CAAS,IAAM4wB,CAAAA,CAAqB1wB,CAAQ,EAE5C,QAAA,CAAA,CAAApB,GAAAA,CAAC,QACC,SAAA,CAAWzI,CAAAA,CACT,sBACA6J,CAAAA,GAAa,KAAA,EAAS,wBAAA,CACtBA,CAAAA,GAAa,UAAY,2BAAA,CACzBA,CAAAA,GAAa,QAAU,yBAAA,CACvBA,CAAAA,GAAa,UAAY,2BAC3B,CAAA,CACF,EACCA,CAAAA,CAAAA,CAAAA,CAbIA,CAcP,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,EAGCsd,CAAAA,CAAQ,MAAA,CAAS,GAChBxd,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,UAAU,4BAAA,CACV,OAAA,CAAS,IAAM0xB,CAAAA,CAAgB,CAACD,CAAY,CAAA,CAC5C,MAAM,gBAAA,CAEN,QAAA,CAAAzxB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,QAAA,CAAA,MAAA,CAAI,CAAA,CAChC,CAAA,CACCyxB,CAAAA,EACCzxB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBACZ,QAAA,CAAA0e,CAAAA,CAAQ,IAAK7iB,CAAAA,EACZmE,GAAAA,CAAC,UAEC,SAAA,CAAU,uBAAA,CACV,QAAS,IAAM+xB,CAAAA,CAAWl2B,EAAO,EAAE,CAAA,CAElC,SAAAA,CAAAA,CAAO,KAAA,CAAA,CAJHA,CAAAA,CAAO,EAKd,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,EAIDkJ,CAAAA,CAAe,MAAA,CAAS,GACvB7D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,UAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,UAAU,4BAAA,CACV,OAAA,CAAS,IAAM4xB,CAAAA,CAAgB,CAACD,CAAY,CAAA,CAC5C,MAAM,cAAA,CAEN,QAAA,CAAA3xB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,QAAA,CAAA,QAAA,CAAM,CAAA,CAClC,EACC2xB,CAAAA,EACC3xB,GAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CACZ,SAAA+E,CAAAA,CAAe,GAAA,CAAKK,GACnBlE,IAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAU,uBAAA,CACV,QAAS,IAAM8wB,CAAAA,CAAkB,CAAC5sB,CAAAA,CAAK,EAAE,CAAC,CAAA,CAE1C,QAAA,CAAA,CAAApF,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,2EAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBoF,CAAAA,CAAK,KAAM,CAAA,CAEpC,QAAA,CAAAA,CAAAA,CAAK,QAAA,CACR,EACCA,CAAAA,CAAK,IAAA,CAAA,CAAA,CAVDA,EAAK,EAWZ,CACD,EACH,CAAA,CAAA,CAEJ,CAAA,CAID4kB,CAAAA,CAAgB,MAAA,CAAS,GACxB9oB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CACC,SAAA,CAAU,4BAAA,CACV,OAAA,CAAS,IAAMsrB,CAAAA,CAAiB,CAACD,CAAa,CAAA,CAC9C,KAAA,CAAM,aAEN,QAAA,CAAArrB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,QAAA,CAAA,QAAA,CAAM,CAAA,CAClC,EACCqrB,CAAAA,EACCrrB,GAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CACZ,QAAA,CAAAgqB,CAAAA,CAAgB,IAAK7gB,CAAAA,EACpBnJ,GAAAA,CAAC,UAEC,SAAA,CAAU,uBAAA,CACV,QAAS,IAAMkyB,CAAAA,CAAgB,CAAC/oB,CAAK,CAAC,EAErC,QAAA,CAAAA,CAAAA,CAAAA,CAJIA,CAKP,CACD,CAAA,CACH,GAEJ,CAAA,CAIFnJ,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,+DACV,OAAA,CAAS6mB,CAAAA,CACT,MAAM,uBAAA,CAEN,QAAA,CAAA7mB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,QAAA,CAAA,QAAA,CAAM,EAClC,CAAA,CAGAA,GAAAA,CAAC,UACC,SAAA,CAAU,4BAAA,CACV,QAASwxB,CAAAA,CACT,KAAA,CAAM,iBAAA,CAEN,QAAA,CAAAxxB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,QAAA,CAAA,QAAA,CAAC,CAAA,CAC7B,GACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CACF,EAEAsxB,GAAsB,WAAA,CAAc,uBAAA,CCnMpC,SAASgB,GACPj0B,CAAAA,CACAk0B,CAAAA,CACAxtB,CAAAA,CACY,CACZ,GAAIwtB,CAAAA,GAAY,MAAA,CACd,OAAO,EAAC,CAGV,IAAMC,CAAAA,CAAU,IAAI,GAAA,CAGpB,OAAAn0B,EAAM,OAAA,CAASzC,CAAAA,EAAS,CACtB,IAAI62B,CAAAA,CACAC,EACAC,CAAAA,CACAC,CAAAA,CACAC,EAEJ,OAAQN,CAAAA,EACN,KAAK,UAAA,CAEH,IAAMO,CAAAA,CAAkBl3B,CAAAA,CAAK,kBAAoBA,CAAAA,CAAK,UAAA,CAAa,CAACA,CAAAA,CAAK,UAAU,CAAA,CAAI,IAEnFk3B,CAAAA,CAAgB,MAAA,CAAS,EAC3BA,CAAAA,CAAgB,OAAA,CAASnR,CAAAA,EAAmB,CAC1C,IAAMvc,CAAAA,CAAOL,CAAAA,EAAgB,KAAMO,CAAAA,EAAMA,CAAAA,CAAE,KAAOqc,CAAM,CAAA,CACxD+Q,CAAAA,CAAS,CAAA,SAAA,EAAY/Q,CAAM,CAAA,CAAA,CAC3BgR,CAAAA,CAAYvtB,GAAM,IAAA,EAAQ,CAAA,KAAA,EAAQuc,CAAM,CAAA,CAAA,CACxCiR,CAAAA,CAAYxtB,CAAAA,EAAM,KAAA,CAClBytB,EAAWztB,CAAAA,EAAM,MAAA,CAEZotB,EAAQ,GAAA,CAAIE,CAAM,GACrBF,CAAAA,CAAQ,GAAA,CAAIE,CAAAA,CAAQ,CAClB,GAAIA,CAAAA,CACJ,KAAA,CAAOC,EACP,UAAA,CAAYhR,CAAAA,CACZ,QAAS,EAAC,CACV,KAAA,CAAOiR,CAAAA,CACP,KAAMC,CACR,CAAC,EAEHL,CAAAA,CAAQ,GAAA,CAAIE,CAAM,CAAA,CAAG,OAAA,CAAQ,IAAA,CAAK92B,CAAAA,CAAK,EAAE,EAC3C,CAAC,GAGD82B,CAAAA,CAAS,qBAAA,CACTC,EAAY,YAAA,CACZC,CAAAA,CAAY,UACZC,CAAAA,CAAW,WAAA,CAENL,EAAQ,GAAA,CAAIE,CAAM,GACrBF,CAAAA,CAAQ,GAAA,CAAIE,EAAQ,CAClB,EAAA,CAAIA,CAAAA,CACJ,KAAA,CAAOC,EACP,UAAA,CAAY,IAAA,CACZ,QAAS,EAAC,CACV,MAAOC,CAAAA,CACP,IAAA,CAAMC,CACR,CAAC,EAEHL,CAAAA,CAAQ,GAAA,CAAIE,CAAM,CAAA,CAAG,OAAA,CAAQ,KAAK92B,CAAAA,CAAK,EAAE,CAAA,CAAA,CAE3C,MAEF,KAAK,UAAA,CACH62B,CAAAA,CAAa72B,EAAK,QAAA,EAAY,MAAA,CAC9B82B,EAAS,CAAA,SAAA,EAAYD,CAAU,GAW/B,IAAMxvB,CAAAA,CARiB,CACrB,MAAA,CAAQ,CAAE,MAAO,kBAAA,CAAa,KAAA,CAAO,SAAU,CAAA,CAC/C,IAAA,CAAM,CAAE,KAAA,CAAO,iBAAW,KAAA,CAAO,SAAU,EAC3C,MAAA,CAAQ,CAAE,MAAO,kBAAA,CAAa,KAAA,CAAO,SAAU,CAAA,CAC/C,IAAK,CAAE,KAAA,CAAO,gBAAU,KAAA,CAAO,SAAU,EACzC,IAAA,CAAM,CAAE,KAAA,CAAO,oBAAA,CAAiB,MAAO,SAAU,CACnD,EAE8BwvB,CAAyC,CAAA,CACvEE,EAAY1vB,CAAAA,CAAO,KAAA,CACnB2vB,EAAY3vB,CAAAA,CAAO,KAAA,CAEduvB,EAAQ,GAAA,CAAIE,CAAM,GACrBF,CAAAA,CAAQ,GAAA,CAAIE,EAAQ,CAClB,EAAA,CAAIA,CAAAA,CACJ,KAAA,CAAOC,EACP,UAAA,CAAAF,CAAAA,CACA,QAAS,EAAC,CACV,MAAOG,CACT,CAAC,CAAA,CAEHJ,CAAAA,CAAQ,IAAIE,CAAM,CAAA,CAAG,QAAQ,IAAA,CAAK92B,CAAAA,CAAK,EAAE,CAAA,CACzC,MAEF,KAAK,OAAA,CACCA,EAAK,MAAA,EAAUA,CAAAA,CAAK,OAAO,MAAA,CAAS,CAAA,CACtCA,EAAK,MAAA,CAAO,OAAA,CAASuN,CAAAA,EAAkB,CACrCupB,EAAS,CAAA,MAAA,EAASvpB,CAAK,GACvBwpB,CAAAA,CAAYxpB,CAAAA,CACZypB,EAAY,SAAA,CAEPJ,CAAAA,CAAQ,GAAA,CAAIE,CAAM,GACrBF,CAAAA,CAAQ,GAAA,CAAIE,EAAQ,CAClB,EAAA,CAAIA,EACJ,KAAA,CAAOC,CAAAA,CACP,UAAA,CAAYxpB,CAAAA,CACZ,QAAS,EAAC,CACV,MAAOypB,CACT,CAAC,EAEHJ,CAAAA,CAAQ,GAAA,CAAIE,CAAM,CAAA,CAAG,QAAQ,IAAA,CAAK92B,CAAAA,CAAK,EAAE,EAC3C,CAAC,GAGD82B,CAAAA,CAAS,YAAA,CACTC,EAAY,WAAA,CACZC,CAAAA,CAAY,UAEPJ,CAAAA,CAAQ,GAAA,CAAIE,CAAM,CAAA,EACrBF,CAAAA,CAAQ,IAAIE,CAAAA,CAAQ,CAClB,EAAA,CAAIA,CAAAA,CACJ,MAAOC,CAAAA,CACP,UAAA,CAAY,KACZ,OAAA,CAAS,GACT,KAAA,CAAOC,CACT,CAAC,CAAA,CAEHJ,EAAQ,GAAA,CAAIE,CAAM,EAAG,OAAA,CAAQ,IAAA,CAAK92B,EAAK,EAAE,CAAA,CAAA,CAE3C,KACJ,CACF,CAAC,CAAA,CAEM,KAAA,CAAM,KAAK42B,CAAAA,CAAQ,MAAA,EAAQ,CAAA,CAAE,IAAA,CAAK,CAACzf,CAAAA,CAAGiK,CAAAA,GAEpCjK,EAAE,KAAA,CAAM,aAAA,CAAciK,EAAE,KAAK,CACrC,CACH,CAKO,SAAS+V,EAAAA,CAAkB,CAChC,MAAAz3B,CAAAA,CACA,cAAA,CAAA03B,EACA,cAAA,CAAAjuB,CAAAA,CACA,UAAAyW,CAAAA,CACA,SAAA,CAAAla,CACF,CAAA,CAA2B,CACzB,GAAM,CAAC2xB,EAAgBC,CAAiB,CAAA,CAAI5yB,SAAsB,IAAI,GAAK,CAAA,CAGrE6yB,CAAAA,CAAYrW,QAAQ,IACjBwV,EAAAA,CACLh3B,EAAM,KAAA,CACN03B,CAAAA,CAAe,QACfjuB,CACF,CAAA,CACC,CAACzJ,CAAAA,CAAM,KAAA,CAAO03B,EAAe,OAAA,CAASjuB,CAAc,CAAC,CAAA,CAGlDquB,CAAAA,CAAqBjkB,YAAaujB,CAAAA,EAAmB,CACzDQ,CAAAA,CAAmBtjB,CAAAA,EAAS,CAC1B,IAAMyjB,CAAAA,CAAO,IAAI,GAAA,CAAIzjB,CAAI,EACzB,OAAIyjB,CAAAA,CAAK,GAAA,CAAIX,CAAM,EACjBW,CAAAA,CAAK,MAAA,CAAOX,CAAM,CAAA,CAElBW,CAAAA,CAAK,IAAIX,CAAM,CAAA,CAEVW,CACT,CAAC,EACH,CAAA,CAAG,EAAE,CAAA,CAGL,OAAIL,EAAe,OAAA,GAAY,MAAA,EAAUG,CAAAA,CAAU,MAAA,GAAW,EAE1DnzB,GAAAA,CAACub,EAAAA,CAAA,CACC,KAAA,CAAOjgB,CAAAA,CACP,UAAWkgB,CAAAA,CACX,cAAA,CAAgBzW,CAAAA,CAChB,SAAA,CAAWzD,EACb,CAAA,CAKFJ,IAAAA,CAAC,OAAI,SAAA,CAAW3J,CAAAA,CAAG,uBAAwB+J,CAAS,CAAA,CACjD,QAAA,CAAA,CAAA6xB,CAAAA,CAAU,IAAKG,CAAAA,EAAS,CACvB,IAAM7nB,CAAAA,CAAcwnB,CAAAA,CAAe,IAAIK,CAAAA,CAAK,EAAE,CAAA,CAGxCC,CAAAA,CAAYj4B,EAAM,KAAA,CAAM,MAAA,CAAQM,GACpC03B,CAAAA,CAAK,OAAA,CAAQ,SAAS13B,CAAAA,CAAK,EAAE,CAC/B,CAAA,CAGM43B,CAAAA,CAAmB,CACvB,GAAGl4B,CAAAA,CACH,MAAOi4B,CACT,CAAA,CAEA,OACEryB,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,wEAAA,CAGV,UAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,UAAU,mJAAA,CACV,OAAA,CAAS,IAAM8xB,CAAAA,CAAe,WAAA,EAAeI,CAAAA,CAAmBE,CAAAA,CAAK,EAAE,CAAA,CACvE,KAAA,CAAO,CACL,UAAA,CAAYA,CAAAA,CAAK,MAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAK,KAAK,CAAA,CAAA,CAAK,MACvD,CAAA,CAEA,QAAA,CAAA,CAAApyB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACZ,QAAA,CAAA,CAAAoyB,CAAAA,CAAK,MACJtzB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,uBAAA,CAAyB,QAAA,CAAAszB,EAAK,IAAA,CAAK,CAAA,CAErDtzB,IAAC,IAAA,CAAA,CACC,SAAA,CAAU,uBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOszB,CAAAA,CAAK,KAAM,CAAA,CAE1B,QAAA,CAAAA,EAAK,KAAA,CACR,CAAA,CACApyB,IAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,mCAAA,CAAoC,QAAA,CAAA,CAAA,GAAA,CAChDoyB,EAAK,OAAA,CAAQ,MAAA,CAAO,IAAEA,CAAAA,CAAK,OAAA,CAAQ,MAAA,GAAW,CAAA,CAAI,OAAS,OAAA,CAAQ,GAAA,CAAA,CACvE,GACF,CAAA,CAECN,CAAAA,CAAe,aACdhzB,GAAAA,CAAC,QAAA,CAAA,CACC,UAAU,kDAAA,CACV,YAAA,CAAYyL,EAAc,aAAA,CAAgB,eAAA,CAEzC,SAAAA,CAAAA,CAAc,QAAA,CAAM,SACvB,CAAA,CAAA,CAEJ,CAAA,CAGC,CAACA,CAAAA,EACAzL,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BACb,QAAA,CAAAA,GAAAA,CAACub,GAAA,CACC,KAAA,CAAOiY,CAAAA,CACP,SAAA,CAAWhY,EACX,cAAA,CAAgBzW,CAAAA,CAClB,EACF,CAAA,CAAA,CAAA,CA5CGuuB,CAAAA,CAAK,EA8CZ,CAEJ,CAAC,CAAA,CAGAH,CAAAA,CAAU,SAAW,CAAA,EACpBjyB,IAAAA,CAAC,OAAI,SAAA,CAAU,iCAAA,CACb,UAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,+BAAmB,CAAA,CAC1CA,GAAAA,CAAC,KAAE,SAAA,CAAU,cAAA,CAAe,wEAE5B,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCtRA,IAAMyzB,EAAAA,CAAoC,CACxC,CACE,KAAA,CAAO,MAAA,CACP,KAAA,CAAO,aAAA,CACP,KAAM,WAAA,CACN,WAAA,CAAa,4BACf,CAAA,CACA,CACE,MAAO,UAAA,CACP,KAAA,CAAO,cACP,IAAA,CAAM,WAAA,CACN,YAAa,8BACf,CAAA,CACA,CACE,KAAA,CAAO,UAAA,CACP,MAAO,aAAA,CACP,IAAA,CAAM,WAAA,CACN,WAAA,CAAa,+BACf,CAAA,CACA,CACE,MAAO,OAAA,CACP,KAAA,CAAO,WACP,IAAA,CAAM,iBAAA,CACN,WAAA,CAAa,0BACf,CACF,CAAA,CAKO,SAASC,GAAgB,CAC9B,KAAA,CAAAt2B,EACA,QAAA,CAAAiE,CAAAA,CACA,SAAA,CAAAC,CACF,EAAyB,CACvB,GAAM,CAACC,CAAAA,CAAQC,CAAS,EAAIlB,QAAAA,CAAS,KAAK,EACpCqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,OAA0B,IAAI,CAAA,CAE1C+xB,EAAgBF,EAAAA,CAAiB,IAAA,CAAMnU,CAAAA,EAAQA,CAAAA,CAAI,QAAUliB,CAAK,CAAA,EAAKq2B,GAAiB,CAAC,CAAA,CAG/FhzB,UAAU,IAAM,CACd,SAASgC,CAAAA,CAAmBlD,EAAyB,CAEjDoC,CAAAA,CAAQ,SACR,CAACA,CAAAA,CAAQ,QAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9CsC,EAAU,OAAA,EACV,CAACA,EAAU,OAAA,CAAQ,QAAA,CAAStC,EAAM,MAAc,CAAA,EAEhDiC,EAAU,KAAK,EAEnB,CAEA,GAAID,CAAAA,CACF,gBAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,CAG7E,EAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMqB,CAAAA,CAAgBgC,CAAAA,EAA0B,CAC9CvD,CAAAA,CAASuD,CAAM,EACfpD,CAAAA,CAAU,KAAK,EACjB,CAAA,CAEA,OACEN,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAW3J,CAAAA,CAAG,uBAAA,CAAyB+J,CAAS,CAAA,CAEnD,QAAA,CAAA,CAAAJ,KAAC,QAAA,CAAA,CACC,GAAA,CAAKW,CAAAA,CACL,OAAA,CAAS,IAAML,CAAAA,CAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,qJAEV,QAAA,CAAA,CAAAvB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAA0B,QAAA,CAAA2zB,CAAAA,CAAc,KAAK,CAAA,CAC7D3zB,GAAAA,CAAC,QAAM,QAAA,CAAA2zB,CAAAA,CAAc,KAAA,CAAM,CAAA,CAC3B3zB,IAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,EACT,8BAAA,CACAgK,CAAAA,EAAU,YACZ,CAAA,CACA,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,eACP,OAAA,CAAQ,WAAA,CAER,SAAAvB,GAAAA,CAAC,MAAA,CAAA,CACC,cAAc,OAAA,CACd,cAAA,CAAe,QACf,WAAA,CAAa,CAAA,CACb,EAAE,gBAAA,CACJ,CAAA,CACF,GACF,CAAA,CAGCuB,CAAAA,EACCL,KAAC,KAAA,CAAA,CACC,GAAA,CAAKS,CAAAA,CACL,SAAA,CAAU,mLAEV,QAAA,CAAA,CAAA3B,GAAAA,CAAC,OAAI,SAAA,CAAU,oCAAA,CACb,SAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,8DAAA,CAA+D,oBAE/E,CAAA,CACF,CAAA,CAEAA,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,OACZ,QAAA,CAAAyzB,EAAAA,CAAiB,GAAA,CAAK7uB,CAAAA,EACrB1D,KAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM0B,CAAAA,CAAagC,CAAAA,CAAO,KAAK,CAAA,CACxC,SAAA,CAAWrN,EACT,oFAAA,CACA6F,CAAAA,GAAUwH,EAAO,KAAA,EAAS,YAC5B,EAEA,QAAA,CAAA,CAAA5E,GAAAA,CAAC,QAAK,SAAA,CAAU,6BAAA,CACb,QAAA,CAAA4E,CAAAA,CAAO,KACV,CAAA,CACA1D,IAAAA,CAAC,OAAI,SAAA,CAAU,gBAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,kCAAA,CACb,QAAA,CAAA4E,EAAO,KAAA,CACV,CAAA,CACCxH,CAAAA,GAAUwH,CAAAA,CAAO,OAChB5E,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,uBAAA,CAAwB,QAAA,CAAA,QAAA,CAAC,GAE7C,CAAA,CACAA,GAAAA,CAAC,KAAE,SAAA,CAAU,8BAAA,CACV,SAAA4E,CAAAA,CAAO,WAAA,CACV,GACF,CAAA,CAAA,CAAA,CAtBKA,CAAAA,CAAO,KAuBd,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCvIO,IAAMgvB,GAAwC,CACnD,CACE,IAAA,CAAM,SAAA,CACN,OAAQ,aAAA,CACR,WAAA,CAAa,wBACf,CAAA,CACA,CACE,KAAM,WAAA,CACN,MAAA,CAAQ,eAAA,CACR,WAAA,CAAa,wBACf,CAAA,CACA,CACE,KAAM,WAAA,CACN,MAAA,CAAQ,gBACR,WAAA,CAAa,6BACf,CAAA,CACA,CACE,KAAM,YAAA,CACN,MAAA,CAAQ,iBACR,WAAA,CAAa,yBACf,EACA,CACE,IAAA,CAAM,OAAA,CACN,MAAA,CAAQ,YACR,WAAA,CAAa,oBACf,EACA,CACE,IAAA,CAAM,SACN,MAAA,CAAQ,aAAA,CACR,WAAA,CAAa,uBACf,EACA,CACE,IAAA,CAAM,SACN,MAAA,CAAQ,aAAA,CACR,YAAa,sBAAA,CACb,SAAA,CAAW,CAAE,KAAA,CAAO,IAAK,CAC3B,CAAA,CACA,CACE,KAAM,GAAA,CACN,MAAA,CAAQ,WACR,WAAA,CAAa,iBAAA,CACb,SAAA,CAAW,CAAE,KAAM,IAAK,CAC1B,EACA,CACE,IAAA,CAAM,IACN,MAAA,CAAQ,QAAA,CACR,WAAA,CAAa,6BAAA,CACb,UAAW,CAAE,IAAA,CAAM,IAAK,CAC1B,CAAA,CACA,CACE,IAAA,CAAM,GAAA,CACN,MAAA,CAAQ,MAAA,CACR,YAAa,cAAA,CACb,SAAA,CAAW,CAAE,IAAA,CAAM,IAAK,CAC1B,CAAA,CACA,CACE,KAAM,GAAA,CACN,MAAA,CAAQ,OACR,WAAA,CAAa,kBAAA,CACb,UAAW,CAAE,IAAA,CAAM,IAAK,CAC1B,CAAA,CACA,CACE,IAAA,CAAM,IACN,MAAA,CAAQ,MAAA,CACR,YAAa,yBAAA,CACb,SAAA,CAAW,CAAE,IAAA,CAAM,IAAK,CAC1B,CAAA,CACA,CACE,IAAA,CAAM,GAAA,CACN,OAAQ,YAAA,CACR,WAAA,CAAa,mBACb,SAAA,CAAW,CAAE,IAAA,CAAM,IAAK,CAC1B,CAAA,CACA,CACE,KAAM,QAAA,CACN,MAAA,CAAQ,eACR,WAAA,CAAa,oBACf,EACA,CACE,IAAA,CAAM,IACN,MAAA,CAAQ,gBAAA,CACR,YAAa,8BAAA,CACb,SAAA,CAAW,CAAE,KAAA,CAAO,IAAK,CAC3B,CACF,EAKA,SAASC,EAAAA,CAAgBt0B,EAAsB8jB,CAAAA,CAAqC,CAIlF,GAAI,CAAA,CAHS,KAAA,CAAM,OAAA,CAAQA,CAAAA,CAAS,IAAI,CAAA,CAAIA,CAAAA,CAAS,KAAO,CAACA,CAAAA,CAAS,IAAI,CAAA,EAClD,IAAA,CAAMrgB,CAAAA,EAAQzD,CAAAA,CAAM,MAAQyD,CAAAA,EAAOzD,CAAAA,CAAM,OAASyD,CAAG,CAAA,CAE5D,OAAO,MAAA,CAExB,IAAM8wB,CAAAA,CAAYzQ,CAAAA,CAAS,WAAa,EAAC,CACnC0Q,EAAYD,CAAAA,CAAU,IAAA,CAAQv0B,EAAM,OAAA,EAAWA,CAAAA,CAAM,OAAA,CAAW,CAACA,EAAM,OAAA,EAAW,CAACA,EAAM,OAAA,CACzFy0B,CAAAA,CAAaF,EAAU,KAAA,CAAQv0B,CAAAA,CAAM,QAAA,CAAW,CAACA,EAAM,QAAA,CACvD00B,CAAAA,CAAWH,EAAU,GAAA,CAAMv0B,CAAAA,CAAM,OAAS,CAACA,CAAAA,CAAM,MAAA,CACjD20B,CAAAA,CAAYJ,EAAU,IAAA,CAAOv0B,CAAAA,CAAM,QAAU,IAAA,CAEnD,OAAOw0B,GAAaC,CAAAA,EAAcC,CAAAA,EAAYC,CAChD,CAwBO,SAASC,GACd/6B,CAAAA,CAAuC,GACX,CAC5B,GAAM,CACJ,SAAA,CAAAg7B,CAAAA,CAAYR,EAAAA,CACZ,OAAA,CAAAz4B,EAAU,IAAA,CACV,cAAA,CAAAk5B,EAAiB,IACnB,CAAA,CAAIj7B,EAEEk7B,CAAAA,CAAe1yB,MAAAA,CAA2BwyB,CAAS,CAAA,CACnDG,EAAa3yB,MAAAA,CAAOzG,CAAO,EAGjCsF,SAAAA,CAAU,IAAM,CACd6zB,CAAAA,CAAa,OAAA,CAAUF,CAAAA,CACvBG,CAAAA,CAAW,QAAUp5B,EACvB,CAAA,CAAG,CAACi5B,CAAAA,CAAWj5B,CAAO,CAAC,CAAA,CAGvB,IAAMq5B,EAAmBrlB,WAAAA,CAAakU,CAAAA,EAA+B,CACnEiR,CAAAA,CAAa,OAAA,CAAU,CAAC,GAAGA,CAAAA,CAAa,QAASjR,CAAQ,EAC3D,CAAA,CAAG,EAAE,CAAA,CAGCoR,CAAAA,CAAqBtlB,YAAapU,CAAAA,EAA2B,CACjEu5B,EAAa,OAAA,CAAUA,CAAAA,CAAa,OAAA,CAAQ,MAAA,CAAQthB,GAAMA,CAAAA,CAAE,MAAA,GAAWjY,CAAM,EAC/E,CAAA,CAAG,EAAE,CAAA,CAGL,OAAA0F,SAAAA,CAAU,IAAM,CACd,SAAS0M,EAAc5N,CAAAA,CAA4B,CACjD,GAAI,CAACg1B,CAAAA,CAAW,QAAS,OAGzB,IAAM7zB,EAASnB,CAAAA,CAAM,MAAA,CACrB,GACE,EAAA,CAAAmB,CAAAA,CAAO,UAAY,OAAA,EACnBA,CAAAA,CAAO,OAAA,GAAY,UAAA,EACnBA,EAAO,iBAAA,GAGHnB,CAAAA,CAAM,MAAQ,QAAA,EAAY,CAACA,EAAM,OAAA,EAAW,CAACA,CAAAA,CAAM,OAAA,CAAA,CAAA,CAMzD,QAAW8jB,CAAAA,IAAYiR,CAAAA,CAAa,QAClC,GAAIT,EAAAA,CAAgBt0B,EAAO8jB,CAAQ,CAAA,CAAG,CAChCgR,CAAAA,EACF90B,EAAM,cAAA,EAAe,CAIvB,IAAMm1B,CAAAA,CAAc,IAAI,YAAY,iBAAA,CAAmB,CACrD,MAAA,CAAQrR,CAAAA,CAAS,OACjB,OAAA,CAAS,IAAA,CACT,WAAY,IACd,CAAC,EACD,MAAA,CAAO,aAAA,CAAcqR,CAAW,CAAA,CAEhC,KACF,CAAA,CAEJ,CAEA,cAAO,gBAAA,CAAiB,SAAA,CAAWvnB,CAAa,CAAA,CACzC,IAAM,MAAA,CAAO,mBAAA,CAAoB,UAAWA,CAAa,CAClE,EAAG,CAACknB,CAAc,CAAC,CAAA,CAEZ,CACL,gBAAA,CAAAG,CAAAA,CACA,mBAAAC,CAAAA,CACA,SAAA,CAAWt5B,CACb,CACF,CC9MA,SAASw5B,GAAU3xB,CAAAA,CAAqB,CAWtC,OAVuC,CACrC,OAAA,CAAS,SACT,SAAA,CAAW,QAAA,CACX,SAAA,CAAW,QAAA,CACX,WAAY,QAAA,CACZ,KAAA,CAAO,SACP,MAAA,CAAQ,KAAA,CACR,OAAQ,KAAA,CACR,GAAA,CAAK,OACP,CAAA,CACcA,CAAG,CAAA,EAAKA,CAAAA,CAAI,aAC5B,CAKA,SAAS4xB,EAAAA,CAAgBvR,CAAAA,CAAoC,CAC3D,IAAMjf,EAAkB,EAAC,CACnBywB,EAAQ,OAAO,SAAA,CAAc,KAAe,SAAA,CAAU,QAAA,CAAS,SAAS,KAAK,CAAA,CAEnF,OAAIxR,CAAAA,CAAS,SAAA,EAAW,MACtBjf,CAAAA,CAAM,IAAA,CAAKywB,EAAQ,QAAA,CAAM,MAAM,CAAA,CAE7BxR,CAAAA,CAAS,WAAW,KAAA,EACtBjf,CAAAA,CAAM,KAAK,OAAO,CAAA,CAEhBif,EAAS,SAAA,EAAW,GAAA,EACtBjf,CAAAA,CAAM,IAAA,CAAKywB,EAAQ,QAAA,CAAM,KAAK,EAE5BxR,CAAAA,CAAS,SAAA,EAAW,MACtBjf,CAAAA,CAAM,IAAA,CAAK,QAAG,CAAA,CAGTA,EAAM,IAAA,CAAK,KAAK,CACzB,CAKA,SAAS0wB,GAAmBzR,CAAAA,CAAoC,CAC9D,IAAM0R,CAAAA,CAAO,KAAA,CAAM,QAAQ1R,CAAAA,CAAS,IAAI,EAAIA,CAAAA,CAAS,IAAA,CAAK,CAAC,CAAA,CAAIA,CAAAA,CAAS,IAAA,CAClEyQ,CAAAA,CAAYc,GAAgBvR,CAAQ,CAAA,CACpCrgB,EAAM+xB,CAAAA,CAAOJ,EAAAA,CAAUI,CAAI,CAAA,CAAI,EAAA,CAErC,OAAOjB,CAAAA,CAAY,GAAGA,CAAS,CAAA,GAAA,EAAM9wB,CAAG,CAAA,CAAA,CAAKA,CAC/C,CAKA,SAASgyB,EAAAA,CAAeZ,CAAAA,CAAmE,CACzF,IAAMa,CAAAA,CAA6C,CACjD,WAAY,EAAC,CACb,QAAS,EAAC,CACV,OAAA,CAAS,GACT,SAAA,CAAW,EACb,CAAA,CAEA,OAAAb,EAAU,OAAA,CAAS/Q,CAAAA,EAAa,CAC1BA,CAAAA,CAAS,OAAO,QAAA,CAAS,UAAU,EACrC4R,CAAAA,CAAO,UAAA,EAAY,KAAK5R,CAAQ,CAAA,CACvBA,CAAAA,CAAS,MAAA,CAAO,SAAS,QAAQ,CAAA,CAC1C4R,EAAO,SAAA,EAAW,IAAA,CAAK5R,CAAQ,CAAA,CACtB,CAAC,MAAA,CAAQ,MAAA,CAAQ,MAAM,CAAA,CAAE,QAAA,CAASA,EAAS,MAAM,CAAA,CAC1D4R,EAAO,OAAA,EAAS,IAAA,CAAK5R,CAAQ,CAAA,CAE7B4R,CAAAA,CAAO,SAAS,IAAA,CAAK5R,CAAQ,EAEjC,CAAC,CAAA,CAEM4R,CACT,CAKO,SAASC,EAAAA,CAAsB,CACpC,UAAAd,CAAAA,CAAYR,EAAAA,CACZ,OAAAryB,CAAAA,CACA,OAAA,CAAA6R,EACA,SAAA,CAAA9R,CACF,CAAA,CAA+B,CAC7B,GAAM,CAAC6zB,CAAAA,CAAWC,CAAY,CAAA,CAAI90B,QAAAA,CAAS,KAAK,CAAA,CAqBhD,GAnBAG,SAAAA,CAAU,IAAM,CACd20B,CAAAA,CAAa,IAAI,EACnB,CAAA,CAAG,EAAE,CAAA,CAGL30B,SAAAA,CAAU,IAAM,CACd,SAAS0M,EAAc5N,CAAAA,CAA4B,CAC7CA,EAAM,GAAA,GAAQ,QAAA,EAAYgC,GAC5B6R,CAAAA,GAEJ,CAEA,GAAI7R,EACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,UAAW4L,CAAa,CAAA,CAC3C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAa,CAGtE,CAAA,CAAG,CAAC5L,EAAQ6R,CAAO,CAAC,EAEhB,CAAC+hB,CAAAA,EAAa,CAAC5zB,CAAAA,CAAQ,OAAO,IAAA,CAElC,IAAM0zB,EAASD,EAAAA,CAAeZ,CAAS,EAEvC,OACElzB,IAAAA,CAAC,OAAI,SAAA,CAAW3J,CAAAA,CAAG,0DAA2D+J,CAAS,CAAA,CAErF,UAAAtB,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,gEAAA,CACV,OAAA,CAASoT,CAAAA,CACX,CAAA,CAGAlS,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4NAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OAAI,SAAA,CAAU,2FAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,OACC,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAG,SAAA,CAAU,0EAAA,CACZ,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAA,CAAW,wBAAE,CAAA,CAAO,oBAAA,CAAA,CAEtC,EACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,+CAAA,CAAgD,QAAA,CAAA,6CAAA,CAE7D,GACF,CAAA,CACAA,GAAAA,CAAC,UACC,OAAA,CAASoT,CAAAA,CACT,UAAU,4KAAA,CACV,YAAA,CAAW,QACZ,QAAA,CAAA,MAAA,CAED,CAAA,CAAA,CACF,CAAA,CAGApT,GAAAA,CAAC,OAAI,SAAA,CAAU,oDAAA,CACb,SAAAA,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uCAAA,CACZ,QAAA,CAAA,MAAA,CAAO,OAAA,CAAQi1B,CAAM,EAAE,GAAA,CAAI,CAAC,CAACI,CAAAA,CAAUC,CAAiB,IACnDA,CAAAA,CAAkB,MAAA,GAAW,CAAA,CAAU,IAAA,CAGzCp0B,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,KAAC,IAAA,CAAA,CAAG,SAAA,CAAU,sFACZ,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,SAAA,CAAU,kCAAA,CAAmC,EAClDq1B,CAAAA,CAAAA,CACH,CAAA,CACAr1B,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YACZ,QAAA,CAAAs1B,CAAAA,CAAkB,GAAA,CAAKjS,CAAAA,EACtBniB,KAAC,KAAA,CAAA,CAEC,SAAA,CAAU,+IAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,SAAA,CAAU,0CAAA,CACb,QAAA,CAAAqjB,CAAAA,CAAS,YACZ,CAAA,CACArjB,GAAAA,CAAC,OAAI,SAAA,CAAU,uNAAA,CACZ,SAAA80B,EAAAA,CAAmBzR,CAAQ,CAAA,CAC9B,CAAA,CAAA,CAAA,CARKA,EAAS,MAShB,CACD,EACH,CAAA,CAAA,CAAA,CAnBQgS,CAoBV,CAEH,CAAA,CACH,CAAA,CACF,EAGAr1B,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,oFAAA,CACb,QAAA,CAAAkB,KAAC,GAAA,CAAA,CAAE,SAAA,CAAU,uDAAuD,QAAA,CAAA,CAAA,QAAA,CAC5DlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oFAAoF,QAAA,CAAA,GAAA,CAAC,CAAA,CAAM,8BAClH,CAAA,CACF,CAAA,CAAA,CACF,GACF,CAEJ,CCvLO,IAAMu1B,EAAAA,CAAoC,CAC/C,CACE,EAAA,CAAI,aACJ,IAAA,CAAM,YAAA,CACN,YAAa,uBAAA,CACb,IAAA,CAAM,YACN,QAAA,CAAU,aAAA,CACV,SAAU,CACR,KAAA,CAAO,SACP,WAAA,CAAa,CAAA;AAAA;;AAAA;;AAAA;;AAAA,gBAAA,CAAA,CACb,QAAA,CAAU,OACV,MAAA,CAAQ,CAAC,KAAK,CAChB,CACF,CAAA,CACA,CACE,EAAA,CAAI,iBAAA,CACJ,KAAM,iBAAA,CACN,WAAA,CAAa,uBAAA,CACb,IAAA,CAAM,QAAA,CACN,QAAA,CAAU,cACV,QAAA,CAAU,CACR,KAAA,CAAO,YAAA,CACP,WAAA,CAAa,CAAA;;AAAA;;AAAA;;AAAA,uBAAA,CAAA,CACb,QAAA,CAAU,QAAA,CACV,MAAA,CAAQ,CAAC,SAAA,CAAW,aAAa,CACnC,CACF,CAAA,CACA,CACE,EAAA,CAAI,MAAA,CACJ,KAAM,MAAA,CACN,WAAA,CAAa,uBAAA,CACb,IAAA,CAAM,WAAA,CACN,QAAA,CAAU,UACV,QAAA,CAAU,CACR,KAAA,CAAO,EAAA,CACP,WAAA,CAAa,CAAA;;AAAA;AAAA;;AAAA,UAAA,CAAA,CACb,SAAU,QACZ,CACF,EACA,CACE,EAAA,CAAI,WACJ,IAAA,CAAM,UAAA,CACN,YAAa,gCAAA,CACb,IAAA,CAAM,YACN,QAAA,CAAU,SAAA,CACV,SAAU,CACR,KAAA,CAAO,cACP,WAAA,CAAa,CAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA,aAAA,CAAA,CACb,QAAA,CAAU,MACV,MAAA,CAAQ,CAAC,UAAU,CACrB,CACF,CAAA,CACA,CACE,EAAA,CAAI,eAAA,CACJ,KAAM,eAAA,CACN,WAAA,CAAa,oBAAA,CACb,IAAA,CAAM,WAAA,CACN,QAAA,CAAU,gBACV,QAAA,CAAU,CACR,KAAA,CAAO,SAAA,CACP,WAAA,CAAa,CAAA;;AAAA;;AAAA;AAAA,EAAA,CAAA,CACb,QAAA,CAAU,MACV,MAAA,CAAQ,CAAC,eAAe,CAC1B,CACF,CAAA,CACA,CACE,EAAA,CAAI,SAAA,CACJ,KAAM,SAAA,CACN,WAAA,CAAa,uBAAA,CACb,IAAA,CAAM,WAAA,CACN,QAAA,CAAU,gBACV,QAAA,CAAU,CACR,KAAA,CAAO,WAAA,CACP,WAAA,CAAa,CAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,MAAA,CAAA,CACb,QAAA,CAAU,QAAA,CACV,MAAA,CAAQ,CAAC,SAAS,CACpB,CACF,CACF,EAKO,SAASC,EAAAA,CAAqB,CACnC,SAAA,CAAAC,CAAAA,CACA,iBAAAC,CAAAA,CACA,SAAA,CAAAp0B,CACF,CAAA,CAA8B,CAC5B,GAAM,CAACC,CAAAA,CAAQC,CAAS,EAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpCqB,CAAAA,CAAUC,OAAuB,IAAI,CAAA,CACrCC,CAAAA,CAAYD,MAAAA,CAA0B,IAAI,CAAA,CAGhDnB,SAAAA,CAAU,IAAM,CACd,SAASgC,CAAAA,CAAmBlD,CAAAA,CAAyB,CAEjDoC,EAAQ,OAAA,EACR,CAACA,CAAAA,CAAQ,OAAA,CAAQ,SAASpC,CAAAA,CAAM,MAAc,CAAA,EAC9CsC,CAAAA,CAAU,SACV,CAACA,CAAAA,CAAU,OAAA,CAAQ,QAAA,CAAStC,EAAM,MAAc,CAAA,EAEhDiC,CAAAA,CAAU,KAAK,EAEnB,CAEA,GAAID,CAAAA,CACF,OAAA,QAAA,CAAS,iBAAiB,WAAA,CAAakB,CAAkB,CAAA,CAClD,IAAM,SAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAAClB,CAAM,CAAC,EAEX,IAAMqB,CAAAA,CAAgB+yB,CAAAA,EAA2B,CAC/CD,EAAiBC,CAAQ,CAAA,CACzBn0B,CAAAA,CAAU,KAAK,EACjB,CAAA,CAGMo0B,CAAAA,CAAmBH,CAAAA,CAAU,MAAA,CAAO,CAACI,CAAAA,CAAKF,CAAAA,GAAa,CAC3D,IAAMN,EAAWM,CAAAA,CAAS,QAAA,EAAY,OAAA,CACtC,OAAKE,EAAIR,CAAQ,CAAA,GACfQ,CAAAA,CAAIR,CAAQ,EAAI,EAAC,CAAA,CAEnBQ,CAAAA,CAAIR,CAAQ,CAAA,CAAE,IAAA,CAAKM,CAAQ,CAAA,CACpBE,CACT,CAAA,CAAG,EAAoC,CAAA,CAEvC,OACE30B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,wBAAyB+J,CAAS,CAAA,CAEnD,QAAA,CAAA,CAAAJ,IAAAA,CAAC,UACC,GAAA,CAAKW,CAAAA,CACL,OAAA,CAAS,IAAML,EAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,mGACV,KAAA,CAAO,CACL,eAAA,CAAiB,2BAAA,CACjB,YAAa,6BAAA,CACb,KAAA,CAAO,2BACT,CAAA,CACA,YAAA,CAAeoB,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,0BAAA,CACxCA,CAAAA,CAAE,cAAc,KAAA,CAAM,WAAA,CAAc,gCACtC,CAAA,CACA,aAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,2BAAA,CACxCA,CAAAA,CAAE,aAAA,CAAc,MAAM,WAAA,CAAc,8BACtC,CAAA,CACA,KAAA,CAAM,uBAEN,QAAA,CAAA,CAAA3C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAyB,QAAA,CAAA,WAAA,CAAE,CAAA,CAC3CA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,WAAA,CAAS,CAAA,CACfA,GAAAA,CAAC,KAAA,CAAA,CACC,UAAWzI,CAAAA,CACT,8BAAA,CACAgK,CAAAA,EAAU,YACZ,EACA,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,QAAQ,WAAA,CAER,QAAA,CAAAvB,GAAAA,CAAC,MAAA,CAAA,CACC,cAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACf,WAAA,CAAa,EACb,CAAA,CAAE,gBAAA,CACJ,CAAA,CACF,CAAA,CAAA,CACF,EAGCuB,CAAAA,EACCL,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKS,EACL,SAAA,CAAU,4JAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiB,yBAAA,CACjB,WAAA,CAAa,6BACf,EAEA,QAAA,CAAA,CAAAT,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,mDACV,KAAA,CAAO,CACL,WAAA,CAAa,6BAAA,CACb,gBAAiB,2BACnB,CAAA,CAEA,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QACC,SAAA,CAAU,4CAAA,CACV,KAAA,CAAO,CAAE,MAAO,2BAA4B,CAAA,CAC7C,QAAA,CAAA,gBAAA,CAED,CAAA,CACAA,IAAC,GAAA,CAAA,CACC,SAAA,CAAU,gBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,4BAA6B,CAAA,CAC9C,QAAA,CAAA,uCAAA,CAED,CAAA,CAAA,CACF,CAAA,CAEC,MAAA,CAAO,OAAA,CAAQ41B,CAAgB,CAAA,CAAE,GAAA,CAAI,CAAC,CAACP,EAAUS,CAAiB,CAAA,GACjE50B,IAAAA,CAAC,KAAA,CAAA,CAAmB,UAAU,MAAA,CAC5B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,WAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,IAAA,CAAA,CACC,UAAU,gDAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,6BAA8B,CAAA,CAE7C,QAAA,CAAAq1B,CAAAA,CACH,CAAA,CACF,EACAr1B,GAAAA,CAAC,KAAA,CAAA,CACE,QAAA,CAAA81B,CAAAA,CAAkB,GAAA,CAAKH,CAAAA,EACtBz0B,IAAAA,CAAC,QAAA,CAAA,CAEC,QAAS,IAAM0B,CAAAA,CAAa+yB,CAAQ,CAAA,CACpC,UAAU,sFAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,YAAA,CAAehzB,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,2BAC1C,EACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,CAAA,CAEA,UAAA3C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA21B,CAAAA,CAAS,IAAA,CACZ,CAAA,CACAz0B,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,uBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAE3C,QAAA,CAAA21B,EAAS,IAAA,CACZ,CAAA,CACCA,CAAAA,CAAS,WAAA,EACR31B,IAAC,GAAA,CAAA,CACC,SAAA,CAAU,gBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,4BAA6B,CAAA,CAE5C,QAAA,CAAA21B,EAAS,WAAA,CACZ,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,CA7BKA,CAAAA,CAAS,EA8BhB,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CA5CQN,CA6CV,CACD,CAAA,CAEAI,CAAAA,CAAU,MAAA,GAAW,GACpBz1B,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uBAAA,CACV,MAAO,CAAE,KAAA,CAAO,4BAA6B,CAAA,CAE7C,SAAAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,kCAAsB,CAAA,CAC/C,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAEJ,CC7PO,SAAS+1B,EAAAA,CAAkB,CAChC,KAAA,CAAAz6B,CAAAA,CACA,MAAA,CAAAiG,CAAAA,CACA,QAAA6R,CAAAA,CACA,QAAA,CAAA4iB,CAAAA,CACA,eAAA,CAAAC,EACA,SAAA,CAAA30B,CACF,CAAA,CAA2B,CACzB,GAAM,CAACimB,CAAAA,CAAWC,CAAY,CAAA,CAAIlnB,SAA8B,QAAQ,CAAA,CAClE,CAAC41B,CAAAA,CAAgBC,CAAiB,CAAA,CAAI71B,QAAAA,CAAuB,MAAM,CAAA,CACnE,CAAC81B,CAAAA,CAAcC,CAAe,CAAA,CAAI/1B,QAAAA,CAA8B,IAAI,CAAA,CACpEylB,CAAAA,CAAenkB,MAAAA,CAAyB,IAAI,CAAA,CAElD,GAAI,CAACL,CAAAA,CAAQ,OAAO,IAAA,CAEpB,IAAMge,CAAAA,CAAe,SAAY,CAC/B,IAAMrjB,CAAAA,CAAe+5B,CAAAA,EAAiB,OAAA,EAAW,OAC3Cz4B,CAAAA,CAAU,MAAMH,EAAAA,CAAY/B,CAAAA,CAAO46B,EAAgBh6B,CAAY,CAAA,CACrEqB,EAAAA,CAAeC,CAAAA,CAAS04B,CAAc,EACxC,CAAA,CAEMI,CAAAA,CAAmB,MAAO/2B,GAA+C,CAC7E,IAAMH,CAAAA,CAAOG,CAAAA,CAAM,MAAA,CAAO,KAAA,GAAQ,CAAC,CAAA,CACnC,GAAKH,CAAAA,CAEL,CAAA,GAAI,CACF,IAAM5B,EAAU,MAAM2B,EAAAA,CAASC,CAAI,CAAA,CAC7B9B,EAAS8B,CAAAA,CAAK,IAAA,CAAK,QAAA,CAAS,OAAO,EAAI,MAAA,CAAS,KAAA,CAChDnF,CAAAA,CAASiF,EAAAA,CAAY1B,EAASF,CAAM,CAAA,CAE1C+4B,CAAAA,CAAgBp8B,CAAM,EAElBA,CAAAA,CAAO,OAAA,EAAW+7B,CAAAA,EACpBA,CAAAA,CAAS/7B,EAAQuD,CAAO,EAE5B,CAAA,MAAS/E,CAAAA,CAAO,CACd49B,CAAAA,CAAgB,CACd,OAAA,CAAS,MACT,MAAA,CAAQ,CAAC,CAAA,qBAAA,EAAwB59B,CAAAA,YAAiB,MAAQA,CAAAA,CAAM,OAAA,CAAU,eAAe,CAAA,CAAE,CAC7F,CAAC,EACH,CAGIstB,CAAAA,CAAa,UACfA,CAAAA,CAAa,OAAA,CAAQ,KAAA,CAAQ,EAAA,EAAA,CAEjC,EAEA,OACE7kB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,EAAG,yDAAA,CAA2D+J,CAAS,CAAA,CAErF,QAAA,CAAA,CAAAtB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+CAAA,CAAgD,OAAA,CAASoT,EAAS,CAAA,CAGjFlS,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kJAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uEACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,KAAC,IAAA,CAAA,CAAG,SAAA,CAAU,uDAAA,CACZ,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAA,CAAW,QAAA,CAAA,WAAA,CAAE,EAAO,iBAAA,CAAA,CAEtC,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,4BAAA,CAA6B,QAAA,CAAA,0BAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACAA,IAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAU,yGAAA,CACV,YAAA,CAAW,OAAA,CACZ,QAAA,CAAA,MAAA,CAED,GACF,CAAA,CAGAlS,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMwnB,CAAAA,CAAa,QAAQ,CAAA,CACpC,SAAA,CAAWjwB,EACT,kDAAA,CACAgwB,CAAAA,GAAc,QAAA,CACV,uCAAA,CACA,mCACN,CAAA,CACD,QAAA,CAAA,QAAA,CAED,CAAA,CACAvnB,GAAAA,CAAC,UACC,OAAA,CAAS,IAAMwnB,CAAAA,CAAa,QAAQ,EACpC,SAAA,CAAWjwB,CAAAA,CACT,kDAAA,CACAgwB,CAAAA,GAAc,QAAA,CACV,uCAAA,CACA,mCACN,CAAA,CACD,kBAED,CAAA,CAAA,CACF,CAAA,CAGArmB,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,KAAA,CACZ,QAAA,CAAA,CAAAqmB,CAAAA,GAAc,QAAA,EACbrmB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,gDAAA,CAAiD,QAAA,CAAA,eAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACX,QAAA,CAAA,CAAC,MAAA,CAAQ,MAAO,KAAK,CAAA,CAAqB,GAAA,CAAK1C,CAAAA,EAC/C4D,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMi1B,EAAkB74B,CAAM,CAAA,CACvC,SAAA,CAAW/F,CAAAA,CACT,qDACA2+B,CAAAA,GAAmB54B,CAAAA,CACf,2CAAA,CACA,sEACN,EAEA,QAAA,CAAA,CAAA4D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBACZ,QAAA,CAAA,CAAA5D,CAAAA,GAAW,MAAA,EAAU,WAAA,CACrBA,IAAW,KAAA,EAAS,WAAA,CACpBA,CAAAA,GAAW,KAAA,EAAS,aACvB,CAAA,CACA0C,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCACZ,QAAA,CAAA1C,CAAAA,CACH,CAAA,CAAA,CAAA,CAhBKA,CAiBP,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAEA4D,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,IAAA,CAAA,CAAG,SAAA,CAAU,0CAAA,CAA2C,QAAA,CAAA,SAAA,CAAO,EAChEkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,CAAA,SAAA,CAAOlB,GAAAA,CAAC,QAAK,SAAA,CAAU,eAAA,CAAiB,QAAA,CAAA1E,CAAAA,CAAM,OAAS,UAAA,CAAW,CAAA,CAAA,CAAO,CAAA,CAC9E4F,IAAAA,CAAC,OAAI,QAAA,CAAA,CAAA,WAAA,CAASlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAiB,QAAA,CAAA1E,CAAAA,CAAM,OAAA,CAAQ,OAAO,CAAA,CAAA,CAAO,CAAA,CAC3E4F,IAAAA,CAAC,KAAA,CAAA,CAAI,oBAAOlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAiB,SAAA1E,CAAAA,CAAM,KAAA,CAAM,MAAA,CAAO,CAAA,CAAA,CAAO,GACzE,CAAA,CAAA,CACF,CAAA,CAEA0E,GAAAA,CAAC,QAAA,CAAA,CACC,QAASuf,CAAAA,CACT,SAAA,CAAU,mLAAA,CACX,QAAA,CAAA,cAAA,CAED,GACF,CAAA,CAGDgI,CAAAA,GAAc,QAAA,EACbrmB,IAAAA,CAAC,OAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,gDAAA,CAAiD,QAAA,CAAA,aAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,SACC,GAAA,CAAK+lB,CAAAA,CACL,IAAA,CAAK,MAAA,CACL,OAAO,YAAA,CACP,QAAA,CAAUuQ,CAAAA,CACV,SAAA,CAAU,SACZ,CAAA,CACAp1B,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM6kB,CAAAA,CAAa,OAAA,EAAS,KAAA,EAAM,CAC3C,UAAU,4IAAA,CAEV,QAAA,CAAA,CAAA/lB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,eAAA,CAAgB,QAAA,CAAA,WAAA,CAAE,CAAA,CACjCA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,QAAA,CAAA,sBAAA,CAAoB,EACxDA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAA,CAAwB,uCAA2B,CAAA,CAAA,CACpE,CAAA,CAAA,CACF,CAAA,CAECo2B,CAAAA,EACCl1B,KAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,gBAAA,CACA6+B,EAAa,OAAA,CACT,4CAAA,CACA,wCACN,CAAA,CAEA,UAAAp2B,GAAAA,CAAC,IAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,qBACA6+B,CAAAA,CAAa,OAAA,CAAU,gBAAA,CAAmB,cAC5C,EAEC,QAAA,CAAAA,CAAAA,CAAa,OAAA,CAAU,0BAAA,CAAwB,sBAAA,CAClD,CAAA,CACCA,CAAAA,CAAa,OAAA,EACZl1B,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,QAAA,CAAA,CAAA,kBAAA,CAAiBk1B,CAAAA,CAAa,aAAA,CAAA,CAAc,EACjDl1B,IAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,CAAA,oBAAA,CAAmBk1B,CAAAA,CAAa,iBAAgB,CAAA,CAAA,CACvD,CAAA,CAEDA,CAAAA,CAAa,MAAA,EAAUA,EAAa,MAAA,CAAO,MAAA,CAAS,CAAA,EACnDp2B,GAAAA,CAAC,OAAI,SAAA,CAAU,cAAA,CACZ,QAAA,CAAAo2B,CAAAA,CAAa,OAAO,GAAA,CAAI,CAAC39B,CAAAA,CAAOkG,CAAAA,GAC/BuC,IAAAA,CAAC,KAAA,CAAA,CAAgB,SAAA,CAAU,cAAA,CAAe,oBACrCzI,CAAAA,CAAAA,CAAAA,CADKkG,CAEV,CACD,CAAA,CACH,GAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CC7NA,IAAM4qB,EAAAA,CAA+B,CAAC,QAAA,CAAU,MAAA,CAAQ,QAAA,CAAU,KAAK,EAEjEgN,EAAAA,CAAwD,CAC5D,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,MAAO,CAAA,CAC/B,CAAE,KAAA,CAAO,SAAA,CAAW,KAAA,CAAO,cAAe,EAC1C,CAAE,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,UAAW,CAAA,CACvC,CAAE,KAAA,CAAO,SAAA,CAAW,MAAO,UAAW,CAAA,CACtC,CAAE,KAAA,CAAO,QAAS,KAAA,CAAO,OAAQ,CAAA,CACjC,CAAE,MAAO,UAAA,CAAY,KAAA,CAAO,UAAW,CACzC,EAEMC,EAAAA,CAAkE,CACtE,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,aAAc,CAAA,CACtC,CAAE,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,aAAc,EAC1C,CAAE,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,aAAc,CAAA,CAC1C,CAAE,KAAA,CAAO,OAAA,CAAS,MAAO,UAAW,CACtC,CAAA,CAEO,SAASC,GAAU,CACxB,OAAA,CAAAC,CAAAA,CACA,IAAA,CAAAC,EACA,eAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,QAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,oBAAA,CAAAC,CAAAA,CACA,cAAA,CAAAlyB,EAAiB,EAAC,CAClB,eAAA,CAAAilB,CAAAA,CAAkB,EAAC,CACnB,gBAAA,CAAkBkN,CAAAA,CAAoB,GACtC,gBAAA,CAAAC,CAAAA,CAAmB,IAAA,CACnB,OAAA,CAAAC,EAAU,KAAA,CACV,OAAA,CAAA7E,CAAAA,CAAU,MAAA,CACV,gBAAA8E,CACF,CAAA,CAAmB,CACjB,GAAM,CAAC5rB,CAAAA,CAAa6rB,CAAc,CAAA,CAAIh3B,QAAAA,CAAS,IAAI,CAAA,CAE7Ci3B,CAAAA,CAAqBpoB,WAAAA,CACxBxM,CAAAA,EAA2C,CAC1Ci0B,CAAAA,CAAgB,CAAE,MAAA,CAAQj0B,EAAE,MAAA,CAAO,KAAM,CAAC,EAC5C,EACA,CAACi0B,CAAe,CAClB,CAAA,CAEMY,EAAyBroB,WAAAA,CAC5BxM,CAAAA,EAA4C,CAC3Ci0B,CAAAA,CAAgB,CAAE,UAAA,CAAYj0B,CAAAA,CAAE,MAAA,CAAO,KAAa,CAAC,EACvD,CAAA,CACA,CAACi0B,CAAe,CAClB,CAAA,CAEMa,CAAAA,CAAmBtoB,WAAAA,CACtBxM,CAAAA,EAA4C,CAC3Ck0B,CAAAA,CAAa,CAAE,EAAA,CAAIl0B,CAAAA,CAAE,MAAA,CAAO,KAAgB,CAAC,EAC/C,EACA,CAACk0B,CAAY,CACf,CAAA,CAEMa,EAAwBvoB,WAAAA,CAAY,IAAM,CAC9C0nB,CAAAA,CAAa,CAAE,KAAA,CAAOF,CAAAA,CAAK,KAAA,GAAU,KAAA,CAAQ,OAAS,KAAM,CAAC,EAC/D,CAAA,CAAG,CAACA,CAAAA,CAAK,KAAA,CAAOE,CAAY,CAAC,EAEvBc,CAAAA,CACJjB,CAAAA,CAAQ,MAAA,EACRA,CAAAA,CAAQ,aAAe,KAAA,EACvBA,CAAAA,CAAQ,UAAA,CAAW,MAAA,CAAS,CAAA,EAC5BA,CAAAA,CAAQ,SAAA,CAAU,MAAA,CAAS,GAC3BA,CAAAA,CAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,EACxBC,EAAK,EAAA,GAAO,MAAA,CAEd,OACEz1B,IAAAA,CAAC,OACC,SAAA,CAAW,CAAA,WAAA,EAAck2B,CAAAA,CAAU,qBAAA,CAAwB,EAAE,CAAA,CAAA,EAAI3rB,CAAAA,CAAc,uBAAA,CAA0B,EAAE,GAE3G,QAAA,CAAA,CAAAvK,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,qBACV,OAAA,CAAS,IAAMo2B,CAAAA,CAAe,CAAC7rB,CAAW,CAAA,CAC1C,KAAA,CAAO,CACL,MAAA,CAAQ,UACR,OAAA,CAAS,MAAA,CACT,UAAA,CAAY,QAAA,CACZ,IAAK,KAAA,CACL,YAAA,CAAcA,CAAAA,CAAc,GAAA,CAAM,OAClC,OAAA,CAAS,SAAA,CACT,YAAA,CAAc,KAAA,CACd,WAAY,eACd,CAAA,CACA,YAAA,CAAe9I,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,EAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,YACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CACZ,KAAA,CAAO,CACL,SAAA,CAAWyL,EAAc,gBAAA,CAAmB,cAAA,CAC5C,UAAA,CAAY,gBAAA,CACZ,MAAO,6BACT,CAAA,CAEA,QAAA,CAAAzL,GAAAA,CAAC,YAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CACpC,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mBAAA,CAAoB,KAAA,CAAO,CAAE,UAAA,CAAY,GAAA,CAAK,QAAA,CAAU,UAAA,CAAY,KAAA,CAAO,2BAA4B,CAAA,CAAG,QAAA,CAAA,oBAAA,CAE1H,EACC23B,CAAAA,EACCz2B,IAAAA,CAAC,MAAA,CAAA,CACC,KAAA,CAAO,CACL,KAAA,CAAO,6BAAA,CACP,QAAA,CAAU,SAAA,CACV,WAAY,GACd,CAAA,CACD,QAAA,CAAA,CAAA,GAAA,CACG,CAACw1B,EAAQ,MAAA,EAAU,QAAA,CAAUA,CAAAA,CAAQ,UAAA,GAAe,OAAS,MAAA,CAAQA,CAAAA,CAAQ,UAAA,CAAW,MAAA,CAAS,GAAK,UAAA,CAAYA,CAAAA,CAAQ,SAAA,CAAU,MAAA,CAAS,GAAK,UAAA,CAAYA,CAAAA,CAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,EAAK,OAAA,CAASC,CAAAA,CAAK,EAAA,GAAO,QAAU,MAAM,CAAA,CAAE,MAAA,CAAO,OAAO,EAAE,MAAA,CAAO,UAAA,CAAA,CAC7P,CAAA,CAAA,CAEJ,CAAA,CAEC,CAAClrB,CAAAA,EACAvK,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBACZ,QAAA,CAAA,CAAAi2B,CAAAA,EACCj2B,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CAAoB,KAAA,CAAO,CAAE,YAAA,CAAc,MAAO,CAAA,CAC/D,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,mBAAA,CAAoB,QAAA,CAAA,QAAA,CAAM,CAAA,CACzC+2B,CAAAA,EACC/2B,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS+2B,CAAAA,CACT,UAAU,uBAAA,CACV,KAAA,CAAM,oBAAA,CACP,QAAA,CAAA,UAAA,CAED,EAEDC,CAAAA,EACCh3B,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASg3B,EACT,SAAA,CAAU,uBAAA,CACV,KAAA,CAAM,oBAAA,CACP,mBAED,CAAA,CAEDC,CAAAA,EACCj3B,GAAAA,CAAC,QAAA,CAAA,CACC,QAASi3B,CAAAA,CACT,SAAA,CAAU,uBAAA,CACV,KAAA,CAAM,2BACP,QAAA,CAAA,eAAA,CAED,CAAA,CAAA,CAEJ,CAAA,CAGF/1B,IAAAA,CAAC,OAAI,SAAA,CAAU,kBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CACb,QAAA,CAAAA,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,WAAA,CAAY,kBACZ,KAAA,CAAO02B,CAAAA,CAAQ,MAAA,CACf,QAAA,CAAUa,EACV,SAAA,CAAU,oBAAA,CACZ,CAAA,CACF,CAAA,CAEAv3B,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CACb,QAAA,CAAAkB,KAAC,QAAA,CAAA,CACC,KAAA,CAAOw1B,CAAAA,CAAQ,UAAA,CACf,SAAUc,CAAAA,CACV,SAAA,CAAU,oBAAA,CAEV,QAAA,CAAA,CAAAx3B,IAAC,QAAA,CAAA,CAAO,KAAA,CAAM,KAAA,CAAM,QAAA,CAAA,WAAA,CAAS,CAAA,CAC7BA,GAAAA,CAAC,QAAA,CAAA,CAAO,KAAA,CAAM,UAAU,QAAA,CAAA,SAAA,CAAO,CAAA,CAC/BA,GAAAA,CAAC,QAAA,CAAA,CAAO,MAAM,OAAA,CAAQ,QAAA,CAAA,OAAA,CAAK,CAAA,CAC3BA,GAAAA,CAAC,UAAO,KAAA,CAAM,WAAA,CAAY,QAAA,CAAA,WAAA,CAAS,CAAA,CAAA,CACrC,EACF,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBACb,QAAA,CAAAkB,IAAAA,CAAC,QAAA,CAAA,CACC,KAAA,CAAOw1B,EAAQ,UAAA,CAAW,CAAC,CAAA,EAAK,KAAA,CAChC,SAAW/zB,CAAAA,EAAM,CACf,IAAMvF,CAAAA,CAAQuF,CAAAA,CAAE,MAAA,CAAO,KAAA,CACvBi0B,CAAAA,CAAgB,CACd,UAAA,CAAYx5B,CAAAA,GAAU,KAAA,CAAQ,GAAK,CAACA,CAAiB,CACvD,CAAC,EACH,CAAA,CACA,SAAA,CAAU,oBAAA,CAEV,QAAA,CAAA,CAAA4C,IAAC,QAAA,CAAA,CAAO,KAAA,CAAM,KAAA,CAAM,QAAA,CAAA,gBAAA,CAAc,EACjCupB,EAAAA,CAAiB,GAAA,CAAKnoB,CAAAA,EACrBpB,GAAAA,CAAC,UAAsB,KAAA,CAAOoB,CAAAA,CAC3B,QAAA,CAAAA,CAAAA,CAAAA,CADUA,CAEb,CACD,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CAEC2D,CAAAA,CAAe,MAAA,CAAS,CAAA,EACvB/E,GAAAA,CAAC,OAAI,SAAA,CAAU,mBAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,UACC,KAAA,CAAOw1B,CAAAA,CAAQ,SAAA,CAAU,CAAC,GAAK,KAAA,CAC/B,QAAA,CAAW/zB,CAAAA,EAAM,CACf,IAAMvF,CAAAA,CAAQuF,CAAAA,CAAE,MAAA,CAAO,KAAA,CACvBi0B,EAAgB,CACd,SAAA,CAAWx5B,CAAAA,GAAU,KAAA,CAAQ,EAAC,CAAI,CAACA,CAAK,CAC1C,CAAC,EACH,CAAA,CACA,SAAA,CAAU,oBAAA,CAEV,QAAA,CAAA,CAAA4C,GAAAA,CAAC,QAAA,CAAA,CAAO,KAAA,CAAM,MAAM,QAAA,CAAA,eAAA,CAAa,CAAA,CAChC+E,CAAAA,CAAe,GAAA,CAAKK,GACnBpF,GAAAA,CAAC,QAAA,CAAA,CAAqB,KAAA,CAAOoF,CAAAA,CAAK,GAC/B,QAAA,CAAAA,CAAAA,CAAK,IAAA,CAAA,CADKA,CAAAA,CAAK,EAElB,CACD,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CAGD4kB,EAAgB,MAAA,CAAS,CAAA,EACxBhqB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,mBAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,QAAA,CAAA,CACC,MAAOw1B,CAAAA,CAAQ,MAAA,CAAO,CAAC,CAAA,EAAK,KAAA,CAC5B,QAAA,CAAW/zB,CAAAA,EAAM,CACf,IAAMvF,CAAAA,CAAQuF,CAAAA,CAAE,MAAA,CAAO,KAAA,CACvBi0B,EAAgB,CACd,MAAA,CAAQx5B,CAAAA,GAAU,KAAA,CAAQ,EAAC,CAAI,CAACA,CAAK,CACvC,CAAC,EACH,CAAA,CACA,SAAA,CAAU,oBAAA,CAEV,UAAA4C,GAAAA,CAAC,QAAA,CAAA,CAAO,KAAA,CAAM,KAAA,CAAM,sBAAU,CAAA,CAC7BgqB,CAAAA,CAAgB,GAAA,CAAK7gB,CAAAA,EACpBnJ,IAAC,QAAA,CAAA,CAAmB,KAAA,CAAOmJ,CAAAA,CACxB,QAAA,CAAAA,CAAAA,CAAAA,CADUA,CAEb,CACD,CAAA,CAAA,CACH,EACF,CAAA,CAGFjI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qCACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,oBAAoB,KAAA,CAAO,CAAE,KAAA,CAAO,6BAA8B,EAAG,QAAA,CAAA,OAAA,CAAK,CAAA,CAC1FA,GAAAA,CAAC,QAAA,CAAA,CACC,MAAO22B,CAAAA,CAAK,EAAA,CACZ,QAAA,CAAUc,CAAAA,CACV,UAAU,2CAAA,CAET,QAAA,CAAAlB,EAAAA,CAAa,GAAA,CAAK3xB,GACjB5E,GAAAA,CAAC,QAAA,CAAA,CAA0B,KAAA,CAAO4E,CAAAA,CAAO,KAAA,CACtC,QAAA,CAAAA,CAAAA,CAAO,KAAA,CAAA,CADGA,EAAO,KAEpB,CACD,CAAA,CACH,CAAA,CACC+xB,EAAK,EAAA,GAAO,MAAA,EACX32B,GAAAA,CAAC,QAAA,CAAA,CACC,QAAS03B,CAAAA,CACT,SAAA,CAAU,yBAAA,CACV,KAAA,CAAO,QAAQf,CAAAA,CAAK,KAAA,GAAU,KAAA,CAAQ,YAAA,CAAe,WAAW,CAAA,CAAA,CAE/D,QAAA,CAAAA,CAAAA,CAAK,KAAA,GAAU,MAAQ,QAAA,CAAM,QAAA,CAChC,CAAA,CAAA,CAEJ,CAAA,CAECU,GACCr3B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,QAAA,CAAA,CACC,KAAA,CAAOuyB,EACP,QAAA,CAAW5vB,CAAAA,EAAM00B,CAAAA,CAAgB10B,CAAAA,CAAE,OAAO,KAAsB,CAAA,CAChE,SAAA,CAAU,oBAAA,CACV,MAAO,CACL,UAAA,CAAY,GAAA,CACZ,WAAA,CAAa,KACf,CAAA,CAEC,QAAA,CAAA6zB,EAAAA,CAAgB,GAAA,CAAK5xB,GACpB5E,GAAAA,CAAC,QAAA,CAAA,CAA0B,KAAA,CAAO4E,CAAAA,CAAO,MACtC,QAAA,CAAAA,CAAAA,CAAO,KAAA,CAAA,CADGA,CAAAA,CAAO,KAEpB,CACD,CAAA,CACH,CAAA,CACF,CAAA,CAGD+yB,CAAAA,EACC33B,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS82B,EACT,SAAA,CAAU,mBAAA,CACV,KAAA,CAAM,mBAAA,CACP,iBAED,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CC1TO,SAASc,EAAAA,CAAW,CACzB,aAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,SAAA,CAAAz2B,CAAAA,CACA,QAAA,CAAA02B,EAAW,QAAA,CACX,gBAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,EACA,gBAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,CACF,EAAoB,CAClB,GAAM,CAAC72B,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpCqB,EAAUC,MAAAA,CAAuB,IAAI,CAAA,CAE3CnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAC5CoC,CAAAA,CAAQ,OAAA,EAAW,CAACA,CAAAA,CAAQ,QAAQ,QAAA,CAASpC,CAAAA,CAAM,MAAc,CAAA,EACnEiC,EAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,GACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,EAGpD,IAAM,CACX,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,EAC9D,CACF,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAM82B,EAAmBt9B,CAAAA,EAAuB,CAC9CA,CAAAA,EAAO,CACPyG,EAAU,KAAK,EACjB,CAAA,CAEA,OACEN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,WAAY+J,CAAS,CAAA,CAAG,GAAA,CAAKK,CAAAA,CAC9C,UAAAT,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMM,EAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,yFACV,KAAA,CAAO,CACL,eAAA,CAAiB,2BAAA,CACjB,YAAa,6BAAA,CACb,KAAA,CAAO,6BACT,CAAA,CACA,aAAeoB,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,0BAAA,CACxCA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,KAAA,CAAQ,4BAChC,CAAA,CACA,aAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,2BAAA,CACxCA,CAAAA,CAAE,aAAA,CAAc,MAAM,KAAA,CAAQ,8BAChC,CAAA,CACA,YAAA,CAAW,qBACX,eAAA,CAAepB,CAAAA,CAEf,QAAA,CAAA,CAAAL,IAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,eAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAC9BA,GAAAA,CAAC,QAAK,CAAA,CAAE,6FAAA,CAA8F,CAAA,CAAA,CACxG,CAAA,CACAA,IAAC,MAAA,CAAA,CAAK,QAAA,CAAA,QAAA,CAAM,CAAA,CAAA,CACd,CAAA,CAECuB,GACCL,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,6EAAA,CACV,MAAO,CACL,eAAA,CAAiB,2BAAA,CACjB,WAAA,CAAa,6BACf,CAAA,CAGC,QAAA,CAAA,CAAA82B,CAAAA,GAAa,QAAA,CACZ92B,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,CAAAA,CAAgBR,CAAY,CAAA,CAC3C,SAAA,CAAU,0FAAA,CACV,MAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,aAAel1B,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gEAAA,CAAiE,CAAA,CAC3E,EAAM,QAAA,CAAA,CAER,CAAA,CAEAkB,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,CAAAA,CAAgB,SAAY,MAAMJ,CAAAA,IAAoB,CAAA,CACrE,SAAA,CAAU,0FAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,YAAA,CAAet1B,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAAzB,IAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,eAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,4DAAA,CAA6D,CAAA,CACrEA,GAAAA,CAAC,YAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CAClCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,KAAK,CAAA,CACrCA,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,eAAe,CAAA,CAAA,CAClC,CAAA,CAAM,YAAA,CAAA,CAER,CAAA,CACAkB,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,CAAAA,CAAgB,SAAY,MAAMH,CAAAA,IAAsB,CAAA,CACvE,UAAU,0FAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,YAAA,CAAev1B,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,2BAC1C,EACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,CAAA,CAEA,UAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,OAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,OAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,6DAA6D,CAAA,CACrEA,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,iBAAiB,CAAA,CAClCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,CAAA,CACtCA,GAAAA,CAAC,MAAA,CAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACvC,CAAA,CAAM,gBAER,CAAA,CACAkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,CAAAA,CAAgB,SAAY,MAAMF,KAAoB,CAAA,CACrE,SAAA,CAAU,0FAAA,CACV,MAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,aAAex1B,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAAzB,IAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,OAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,IAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CACvDA,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,KAAA,CAAM,EAAA,CAAG,MAAM,CAAA,CAAE,KAAA,CAAM,CAAA,CAClCA,GAAAA,CAAC,YAAS,MAAA,CAAO,kBAAA,CAAmB,CAAA,CAAA,CACtC,CAAA,CAAM,YAAA,CAAA,CAER,CAAA,CACAkB,IAAAA,CAAC,QAAA,CAAA,CACC,QAAS,IAAMm3B,CAAAA,CAAgB,IAAMD,CAAAA,IAAoB,CAAA,CACzD,SAAA,CAAU,0FAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,YAAA,CAAez1B,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,eAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,4DAAA,CAA6D,CAAA,CACrEA,GAAAA,CAAC,YAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CAClCA,GAAAA,CAAC,QAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,GAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CACrCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAA,CACvC,CAAA,CAAM,YAAA,CAAA,CAER,CAAA,CAAA,CACF,EAGFkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,EAAgBP,CAAY,CAAA,CAC3C,SAAA,CAAU,0FAAA,CACV,MAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAC5C,aAAen1B,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,YAAA,CAAeA,GAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAAzB,KAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,KAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,OAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,KAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAC9BA,GAAAA,CAAC,QAAK,CAAA,CAAE,oFAAA,CAAqF,CAAA,CAAA,CAC/F,CAAA,CAAM,UAER,CAAA,CAEAkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMm3B,CAAAA,CAAgBN,CAAe,CAAA,CAC9C,SAAA,CAAU,2FACV,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,EAC5C,YAAA,CAAep1B,CAAAA,EAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,2BAC1C,CAAA,CACA,aAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAAzB,KAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,KAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,EAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,KAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CAChDA,GAAAA,CAAC,QAAK,CAAA,CAAE,0EAAA,CAA2E,CAAA,CAAA,CACrF,CAAA,CAAM,aAER,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCrNO,IAAMqe,EAAAA,CAAmB,CAC9B,IAAA,CAAM,MAAA,CACN,WAAA,CAAa,iBAAA,CACb,MAAO,WAAA,CACP,MAAA,CAAQ,CAEN,SAAA,CAAW,UACX,WAAA,CAAa,SAAA,CACb,UAAA,CAAY,SAAA,CACZ,OAAQ,SAAA,CACR,OAAA,CAAS,SAAA,CACT,QAAA,CAAU,UACV,OAAA,CAAS,SAAA,CAGT,WAAA,CAAa,SAAA,CACb,cAAe,SAAA,CACf,YAAA,CAAc,SAAA,CACd,YAAA,CAAc,UACd,WAAA,CAAa,SAAA,CAGb,aAAA,CAAe,0BAAA,CACf,eAAA,CAAiB,2BAAA,CACjB,aAAA,CAAe,SAAA,CACf,YAAa,SAAA,CACb,YAAA,CAAc,SAAA,CAGd,aAAA,CAAe,UACf,WAAA,CAAa,SAAA,CACb,kBAAA,CAAoB,SAAA,CACpB,wBAAyB,SAAA,CACzB,wBAAA,CAA0B,yBAAA,CAC1B,4BAAA,CAA8B,0BAC9B,iCAAA,CAAmC,yBAAA,CAGnC,OAAA,CAAS,SAAA,CACT,QAAS,SAAA,CACT,KAAA,CAAO,SAAA,CACP,IAAA,CAAM,UACN,MAAA,CAAQ,SAAA,CACR,YAAA,CAAc,wBAAA,CACd,iBAAkB,wBAAA,CAClB,qBAAA,CAAuB,wBACzB,CAAA,CACA,OAAA,CAAS,CACP,EAAA,CAAI,8BAAA,CACJ,GAAI,+BAAA,CACJ,EAAA,CAAI,gCACN,CAAA,CACA,MAAO,CACL,EAAA,CAAI,KAAA,CACJ,EAAA,CAAI,MACJ,EAAA,CAAI,MAAA,CACJ,IAAA,CAAM,QACR,EACA,OAAA,CAAS,CACP,EAAA,CAAI,KAAA,CACJ,GAAI,KAAA,CACJ,EAAA,CAAI,MAAA,CACJ,EAAA,CAAI,OACJ,EAAA,CAAI,MACN,CACF,CAAA,CAOaC,GAAoB,CAC/B,IAAA,CAAM,OAAA,CACN,WAAA,CAAa,kBAAA,CACb,KAAA,CAAO,cAAA,CACP,MAAA,CAAQ,CAEN,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,WAAY,SAAA,CACZ,MAAA,CAAQ,SAAA,CACR,OAAA,CAAS,UACT,QAAA,CAAU,SAAA,CACV,OAAA,CAAS,SAAA,CAGT,YAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,YAAA,CAAc,UACd,YAAA,CAAc,SAAA,CACd,WAAA,CAAa,SAAA,CAGb,cAAe,oBAAA,CACf,eAAA,CAAiB,qBAAA,CACjB,aAAA,CAAe,UACf,WAAA,CAAa,SAAA,CACb,YAAA,CAAc,SAAA,CAGd,aAAA,CAAe,SAAA,CACf,WAAA,CAAa,SAAA,CACb,mBAAoB,SAAA,CACpB,uBAAA,CAAyB,SAAA,CACzB,wBAAA,CAA0B,0BAC1B,4BAAA,CAA8B,0BAAA,CAC9B,iCAAA,CAAmC,0BAAA,CAGnC,QAAS,SAAA,CACT,OAAA,CAAS,SAAA,CACT,KAAA,CAAO,UACP,IAAA,CAAM,SAAA,CACN,MAAA,CAAQ,SAAA,CACR,aAAc,wBAAA,CACd,gBAAA,CAAkB,yBAAA,CAClB,qBAAA,CAAuB,yBACzB,CAAA,CACA,OAAA,CAAS,CACP,EAAA,CAAI,gCACJ,EAAA,CAAI,gCAAA,CACJ,EAAA,CAAI,gCACN,CAAA,CACA,KAAA,CAAO,CACL,EAAA,CAAI,MACJ,EAAA,CAAI,KAAA,CACJ,EAAA,CAAI,MAAA,CACJ,KAAM,QACR,CAAA,CACA,OAAA,CAAS,CACP,GAAI,KAAA,CACJ,EAAA,CAAI,KAAA,CACJ,EAAA,CAAI,OACJ,EAAA,CAAI,MAAA,CACJ,EAAA,CAAI,MACN,CACF,CAAA,CAOaga,EAAAA,CAAsB,CACjC,IAAA,CAAM,UACN,KAAA,CAAO,QAAA,CACP,WAAA,CAAa,eAAA,CACb,OAAQ,CAEN,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,UAAA,CAAY,SAAA,CACZ,MAAA,CAAQ,UACR,OAAA,CAAS,SAAA,CACT,QAAA,CAAU,SAAA,CACV,QAAS,SAAA,CAGT,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,UACf,YAAA,CAAc,SAAA,CACd,YAAA,CAAc,SAAA,CACd,YAAa,SAAA,CAGb,aAAA,CAAe,SAAA,CACf,eAAA,CAAiB,UACjB,aAAA,CAAe,SAAA,CACf,WAAA,CAAa,SAAA,CACb,aAAc,SAAA,CAGd,aAAA,CAAe,SAAA,CACf,WAAA,CAAa,UACb,kBAAA,CAAoB,SAAA,CACpB,uBAAA,CAAyB,SAAA,CACzB,wBAAA,CAA0B,uBAAA,CAC1B,4BAAA,CAA8B,wBAAA,CAC9B,kCAAmC,wBAAA,CAGnC,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,UACT,KAAA,CAAO,SAAA,CACP,IAAA,CAAM,SAAA,CACN,OAAQ,SAAA,CACR,YAAA,CAAc,wBAAA,CACd,gBAAA,CAAkB,0BAClB,qBAAA,CAAuB,yBACzB,CAAA,CACA,OAAA,CAAS,CACP,EAAA,CAAI,8BAAA,CACJ,EAAA,CAAI,gCAAA,CACJ,GAAI,iCACN,CAAA,CACA,KAAA,CAAO,CACL,GAAI,KAAA,CACJ,EAAA,CAAI,KAAA,CACJ,EAAA,CAAI,MAAA,CACJ,IAAA,CAAM,QACR,CAAA,CACA,QAAS,CACP,EAAA,CAAI,KAAA,CACJ,EAAA,CAAI,MACJ,EAAA,CAAI,MAAA,CACJ,EAAA,CAAI,MAAA,CACJ,GAAI,MACN,CACF,CAAA,CAKahP,EAAAA,CAAmC,CAC9C,IAAA,CAAMjL,EAAAA,CACN,KAAA,CAAOC,EAAAA,CACP,QAASga,EACX,CAAA,CAKaC,EAAAA,CAA0B,OClOhC,IAAMC,EAAAA,CAAe/4B,cAA6C,MAAS,CAAA,CAE5Eg5B,EAAAA,CAAc,cAAA,CAQb,SAASC,EAAAA,CAAc,CAC5B,QAAA,CAAA54B,EACA,YAAA,CAAc64B,CAAAA,CAAeJ,EAAAA,CAC7B,UAAA,CAAAK,EAAaH,EACf,CAAA,CAAuB,CACrB,GAAM,CAAC93B,CAAAA,CAAOk4B,CAAa,CAAA,CAAIv4B,QAAAA,CAAoB,IAAM,CAEvD,GAAI,OAAO,MAAA,CAAW,IAAa,CACjC,IAAMw4B,CAAAA,CAAS,YAAA,CAAa,QAAQF,CAAU,CAAA,CAC9C,GAAIE,CAAAA,GAAWA,IAAW,MAAA,EAAUA,CAAAA,GAAW,OAAA,EAAWA,CAAAA,GAAW,SAAA,CAAA,CACnE,OAAOA,CAEX,CACA,OAAOH,CACT,CAAC,CAAA,CAEKI,CAAAA,CAAW5pB,YACd6pB,CAAAA,EAAwB,CACvBH,CAAAA,CAAcG,CAAQ,EAClB,OAAO,MAAA,CAAW,GAAA,EACpB,YAAA,CAAa,QAAQJ,CAAAA,CAAYI,CAAQ,EAE7C,CAAA,CACA,CAACJ,CAAU,CACb,CAAA,CAGAn4B,SAAAA,CAAU,IAAM,CACd,GAAI,OAAO,MAAA,CAAW,IAAa,OAEnC,IAAMw4B,CAAAA,CAAO,QAAA,CAAS,eAAA,CAChBC,CAAAA,CAAe5P,EAAAA,CAAO3oB,CAAK,EAMjC,MAAA,CAAO,OAAA,CAAQu4B,CAAAA,CAAa,MAAM,EAAE,OAAA,CAAQ,CAAC,CAACl2B,CAAAA,CAAK5F,CAAK,CAAA,GAAM,CACxDA,CAAAA,EACF67B,CAAAA,CAAK,MAAM,WAAA,CAAY,CAAA,QAAA,EAAWE,EAAAA,CAAan2B,CAAG,CAAC,CAAA,CAAA,CAAI5F,CAAK,EAEhE,CAAC,EA+CD,MAAA,CAAO,OAAA,CA5CkC,CAEvC,SAAA,CAAW,oCACX,WAAA,CAAa,qCAAA,CACb,UAAA,CAAY,oCAAA,CACZ,MAAA,CAAQ,gCAAA,CACR,OAAA,CAAS,iCAAA,CACT,SAAU,kCAAA,CACV,OAAA,CAAS,iCAAA,CAGT,WAAA,CAAa,8BACb,aAAA,CAAe,+BAAA,CACf,YAAA,CAAc,8BAAA,CACd,aAAc,8BAAA,CACd,WAAA,CAAa,6BAAA,CAGb,aAAA,CAAe,gCACf,eAAA,CAAiB,iCAAA,CACjB,aAAA,CAAe,+BAAA,CACf,YAAa,6BAAA,CACb,YAAA,CAAc,8BAAA,CAGd,aAAA,CAAe,gCACf,WAAA,CAAa,6BAAA,CACb,kBAAA,CAAoB,oCAAA,CACpB,wBAAyB,yCAAA,CACzB,wBAAA,CAA0B,0CAAA,CAC1B,4BAAA,CAA8B,8CAAA,CAC9B,iCAAA,CAAmC,mDAAA,CAGnC,OAAA,CAAS,gCACT,OAAA,CAAS,+BAAA,CACT,KAAA,CAAO,6BAAA,CACP,KAAM,4BAAA,CACN,MAAA,CAAQ,uBAAA,CACR,YAAA,CAAc,+BACd,gBAAA,CAAkB,kCAAA,CAClB,qBAAA,CAAuB,uCACzB,CAEuB,CAAA,CAAE,OAAA,CAAQ,CAAC,CAACg8B,EAAUC,CAAM,CAAA,GAAM,CACvD,IAAMj8B,EAAQ87B,CAAAA,CAAa,MAAA,CAAOE,CAA4C,CAAA,CAC1Eh8B,GACF67B,CAAAA,CAAK,KAAA,CAAM,WAAA,CAAYI,CAAAA,CAAQj8B,CAAK,EAExC,CAAC,CAAA,CAGD67B,CAAAA,CAAK,aAAa,YAAA,CAAct4B,CAAK,CAAA,CAGrCs4B,CAAAA,CAAK,UAAU,MAAA,CAAO,YAAA,CAAc,aAAA,CAAe,eAAe,EAClEA,CAAAA,CAAK,SAAA,CAAU,GAAA,CAAI,CAAA,MAAA,EAASt4B,CAAK,CAAA,CAAE,EACrC,CAAA,CAAG,CAACA,CAAK,CAAC,CAAA,CAEV,IAAMvD,CAAAA,CAA2B,CAC/B,KAAA,CAAAuD,CAAAA,CACA,QAAA,CAAAo4B,CAAAA,CACA,OAAAzP,EACF,CAAA,CAEA,OAAOtpB,GAAAA,CAACw4B,EAAAA,CAAa,QAAA,CAAb,CAAsB,KAAA,CAAOp7B,EAAQ,QAAA,CAAA0C,CAAAA,CAAS,CACxD,CAKO,SAASw5B,EAAAA,EAAW,CACzB,IAAMx+B,CAAAA,CAAU6E,WAAW64B,EAAY,CAAA,CACvC,GAAI,CAAC19B,EACH,MAAM,IAAI,KAAA,CAAM,4CAA4C,EAE9D,OAAOA,CACT,CAKA,SAASq+B,GAAaI,CAAAA,CAAqB,CACzC,OAAOA,CAAAA,CAAI,QAAQ,oBAAA,CAAsB,OAAO,CAAA,CAAE,WAAA,EACpD,CCzIO,SAASC,EAAAA,CAAW,CAAE,MAAA,CAAAj4B,CAAAA,CAAQ,OAAA,CAAA6R,CAAAA,CAAS,UAAA9R,CAAU,CAAA,CAAoB,CAC1E,GAAM,CAAE,KAAA,CAAAX,CAAAA,CAAO,QAAA,CAAAo4B,CAAS,EAAIO,EAAAA,EAAS,CAErC,OAAK/3B,CAAAA,CAGHL,KAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,yDAAA,CAA2D+J,CAAS,CAAA,CACrF,QAAA,CAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+CAAA,CAAgD,OAAA,CAASoT,CAAAA,CAAS,EAEjFlS,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,6DAAA,CACV,MAAO,CACL,eAAA,CAAiB,2BAAA,CACjB,WAAA,CAAa,6BACf,CAAA,CAEA,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sDAAA,CAAuD,KAAA,CAAO,CAAE,WAAA,CAAa,6BAA8B,CAAA,CACxH,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,UAAU,oBAAA,CAAqB,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CAAG,QAAA,CAAA,cAAA,CAElF,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAU,2EACV,KAAA,CAAO,CAAE,KAAA,CAAO,6BAA8B,EAC9C,YAAA,CAAW,OAAA,CACZ,QAAA,CAAA,MAAA,CAED,CAAA,CAAA,CACF,EAEApT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,eAAA,CACZ,gBAAO,OAAA,CAAQspB,EAAM,CAAA,CAAE,GAAA,CAAI,CAAC,CAACtmB,CAAAA,CAAKy2B,CAAS,CAAA,GAC1Cv4B,KAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACb63B,EAAS/1B,CAAU,CAAA,CACnBoQ,CAAAA,GACF,CAAA,CACA,SAAA,CAAW7b,CAAAA,CACT,uEAAA,CACAoJ,IAAUqC,CAAAA,CACN,gCAAA,CACA,uCACN,CAAA,CACA,MAAO,CACL,eAAA,CAAiBrC,CAAAA,GAAUqC,CAAAA,CAAM,gCAAkC,aACrE,CAAA,CAEA,QAAA,CAAA,CAAAhD,GAAAA,CAAC,OAAI,SAAA,CAAU,UAAA,CAAY,QAAA,CAAAy5B,CAAAA,CAAU,MAAM,CAAA,CAC3Cv4B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAgB,KAAA,CAAO,CAAE,KAAA,CAAO,2BAA4B,CAAA,CACxE,QAAA,CAAAy5B,CAAAA,CAAU,WAAA,CACb,EACAv4B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,SAAA,CAAU,MAAO,CAAE,KAAA,CAAO,6BAA8B,CAAA,CACpE,UAAA8B,CAAAA,GAAQ,MAAA,EAAU,gDAAA,CAClBA,CAAAA,GAAQ,SAAW,sCAAA,CACnBA,CAAAA,GAAQ,SAAA,EAAa,sBAAA,CAAA,CACxB,GACF,CAAA,CACCrC,CAAAA,GAAUqC,CAAAA,EACThD,GAAAA,CAAC,OAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAAA,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,iBAAA,CAAkB,CAAA,CAC5B,IA7BGgD,CA+BP,CACD,CAAA,CACH,CAAA,CAAA,CACF,GACF,CAAA,CAjEkB,IAmEtB,CCtEO,SAAS02B,GAAmB35B,CAAAA,CAA0C,MAAA,CAAoB,CAE/F,GAAI,OAAO,MAAA,CAAW,GAAA,EAAe,OAAO,gBAAA,CAAqB,IAC/D,OAAOupB,EAAAA,CAAOvpB,CAAS,CAAA,EAAKupB,GAAO,IAAA,CAIrC,IAAM2P,CAAAA,CAAO,QAAA,CAAS,gBAChBU,CAAAA,CAAS,gBAAA,CAAiBV,CAAI,CAAA,CAG9BW,EAAS,CAACC,CAAAA,CAAiBrX,CAAAA,GACjBmX,CAAAA,CAAO,iBAAiBE,CAAO,CAAA,CAAE,IAAA,EAAK,EACpCrX,EA6DlB,OAzDiC,CAE/B,SAAA,CAAWoX,CAAAA,CAAO,oBAAA,CAAsBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,SAAS,CAAA,CACnE,WAAA,CAAa65B,CAAAA,CAAO,sBAAA,CAAwBtQ,GAAOvpB,CAAS,CAAA,CAAE,WAAW,CAAA,CACzE,OAAQ65B,CAAAA,CAAO,iBAAA,CAAmBtQ,EAAAA,CAAOvpB,CAAS,EAAE,MAAM,CAAA,CAC1D,SAAA,CAAW65B,CAAAA,CAAO,mBAAoBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,SAAS,EAGjE,MAAA,CAAQ65B,CAAAA,CAAO,wBAAA,CAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,MAAM,CAAA,CACjE,WAAA,CAAa65B,CAAAA,CAAO,uBAAA,CAAyBtQ,EAAAA,CAAOvpB,CAAS,EAAE,WAAW,CAAA,CAG1E,WAAA,CAAa65B,CAAAA,CAAO,uBAAwBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,WAAW,EACzE,aAAA,CAAe65B,CAAAA,CAAO,wBAAA,CAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,aAAa,CAAA,CAC/E,YAAA,CAAc65B,EAAO,uBAAA,CAAyBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,YAAY,CAAA,CAG5E,MAAA,CAAQ65B,CAAAA,CAAO,wBAAA,CAA0BtQ,GAAOvpB,CAAS,CAAA,CAAE,MAAM,CAAA,CACjE,WAAA,CAAa65B,CAAAA,CAAO,sBAAA,CAAwBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,WAAW,CAAA,CACzE,WAAA,CAAa65B,EAAO,wBAAA,CAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,WAAW,CAAA,CAG3E,cAAA,CAAgB65B,CAAAA,CAAO,wBAAA,CAA0BtQ,GAAOvpB,CAAS,CAAA,CAAE,cAAc,CAAA,CACjF,gBAAiB65B,CAAAA,CAAO,sBAAA,CAAwBtQ,EAAAA,CAAOvpB,CAAS,EAAE,eAAe,CAAA,CACjF,aAAA,CAAe65B,CAAAA,CAAO,uBAAwBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,aAAA,EAAiB,SAAS,CAAA,CAG1F,UAAA,CAAY65B,CAAAA,CAAO,2BAA4BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,UAAU,EAC3E,eAAA,CAAiB65B,CAAAA,CAAO,0BAAA,CAA4BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,eAAe,CAAA,CACrF,YAAA,CAAc65B,EAAO,eAAA,CAAiBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,YAAY,CAAA,CACpE,iBAAA,CAAmB65B,CAAAA,CAAO,eAAA,CAAiBtQ,GAAOvpB,CAAS,CAAA,CAAE,iBAAiB,CAAA,CAI9E,MAAOA,CAAAA,GAAc,OAAA,CACjB65B,CAAAA,CAAO,wBAAA,CAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,KAAK,EACxDA,CAAAA,GAAc,SAAA,CACd65B,CAAAA,CAAO,sBAAA,CAAwBtQ,GAAOvpB,CAAS,CAAA,CAAE,KAAK,CAAA,CACtD65B,EAAO,eAAA,CAAiBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,KAAK,CAAA,CACnD,UAAA,CAAYA,CAAAA,GAAc,OAAA,CACtB65B,EAAO,wBAAA,CAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,UAAU,CAAA,CAC7DA,CAAAA,GAAc,SAAA,CACd65B,CAAAA,CAAO,uBAAwBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,UAAU,CAAA,CAC3D65B,CAAAA,CAAO,eAAA,CAAiBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,UAAU,CAAA,CACxD,SAAA,CAAW65B,EAAO,iBAAA,CAAmBtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,SAAS,CAAA,CAChE,cAAA,CAAgB65B,CAAAA,CAAO,iBAAA,CAAmBtQ,GAAOvpB,CAAS,CAAA,CAAE,cAAc,CAAA,CAG1E,WAAY65B,CAAAA,CAAO,uBAAA,CAAyBtQ,EAAAA,CAAOvpB,CAAS,EAAE,UAAU,CAAA,CACxE,gBAAA,CAAkB65B,CAAAA,CAAO,yBAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,gBAAgB,CAAA,CACrF,eAAA,CAAiB65B,CAAAA,CAAO,iBAAA,CAAmBtQ,GAAOvpB,CAAS,CAAA,CAAE,eAAe,CAAA,CAG5E,QAAS65B,CAAAA,CAAO,kBAAA,CAAoBtQ,EAAAA,CAAOvpB,CAAS,EAAE,OAAO,CAAA,CAC7D,SAAA,CAAW65B,CAAAA,CAAO,yBAA0BtQ,EAAAA,CAAOvpB,CAAS,CAAA,CAAE,SAAS,CACzE,CAGF,CC6EO,IAAM+5B,EAAAA,CAAwB,CACnC,OAAA,CAAS,CACP,QAAA,CAAU,WAAA,CACV,UAAW,YAAA,CACX,OAAA,CAAS,UAAA,CACT,QAAA,CAAU,WACV,SAAA,CAAW,WAAA,CACX,MAAA,CAAQ,QAAA,CACR,SAAU,YAAA,CACV,QAAA,CAAU,UACZ,CAAA,CAEA,QAAS,CACP,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,MACL,IAAA,CAAM,MAAA,CACN,KAAA,CAAO,OAAA,CACP,OAAQ,QAAA,CACR,SAAA,CAAW,eAAA,CACX,SAAA,CAAW,eAAA,CACX,SAAA,CAAW,eAAA,CACX,WAAA,CAAa,kBACb,eAAA,CAAiB,sBAAA,CACjB,IAAA,CAAM,MAAA,CACN,KAAM,MAAA,CACN,UAAA,CAAY,UAAA,CAEZ,OAAA,CAAS,cACT,OAAA,CAAS,SAAA,CACT,MAAA,CAAQ,QAAA,CACR,SAAU,UAAA,CAEV,SAAA,CAAW,KAAA,CACX,gBAAA,CAAkB,aAClB,gBAAA,CAAkB,aAAA,CAClB,eAAA,CAAiB,WAAA,CAEjB,OAAQ,QAAA,CACR,QAAA,CAAU,kBAAA,CACV,aAAA,CAAe,iBACf,oBAAA,CAAsB,sBAAA,CACtB,oBAAA,CAAsB,iCAAA,CACtB,mBAAA,CAAqB,0BAAA,CACrB,WAAA,CAAa,cACf,EAGA,WAAA,CAAa,CACX,QAAA,CAAU,WAAA,CACV,WAAY,aAAA,CACZ,cAAA,CAAgB,iBAAA,CAChB,aAAA,CAAe,kBACf,YAAA,CAAc,eAAA,CACd,SAAA,CAAW,YAAA,CACX,WAAY,aACd,CAAA,CAEA,OAAA,CAAS,CACP,KAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,YACX,UAAA,CAAY,aAAA,CACZ,MAAA,CAAQ,QAAA,CACR,QAAS,SAAA,CACT,MAAA,CAAQ,SAAA,CACR,QAAA,CAAU,WAAA,CACV,SAAA,CAAW,YAAA,CACX,SAAA,CAAW,aACX,WAAA,CAAa,cACf,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,OAAA,CACN,UAAA,CAAY,aAAA,CACZ,UAAW,WACb,CAAA,CAEA,MAAA,CAAQ,CACN,SAAU,UAAA,CACV,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,OACN,GAAA,CAAK,KAAA,CACL,QAAA,CAAU,UAAA,CACV,UAAW,WAAA,CACX,YAAA,CAAc,eAAA,CACd,OAAA,CAAS,UACT,IAAA,CAAM,MAAA,CACN,OAAA,CAAS,cAAA,CACT,OAAA,CAAS,UAAA,CACT,OAAA,CAAS,UAAA,CACT,QAAS,YAAA,CACT,KAAA,CAAO,OAAA,CACP,KAAA,CAAO,QACP,IAAA,CAAM,MAAA,CACN,eAAA,CAAiB,uBACnB,EAEA,EAAA,CAAI,CACF,WAAA,CAAa,4DAAA,CACb,SAAU,aAAA,CACV,WAAA,CAAa,CACX,QAAA,CAAU,kCACV,UAAA,CAAY,8BAAA,CACZ,UAAA,CAAY,iCAAA,CACZ,YAAa,iCAAA,CACb,SAAA,CAAW,2BAAA,CACX,UAAA,CAAY,sCACZ,UAAA,CAAY,oBAAA,CACZ,UAAA,CAAY,4BACd,CAAA,CACA,MAAA,CAAQ,CACN,YAAA,CAAc,iBACd,WAAA,CAAa,cAAA,CACb,eAAA,CAAiB,kBAAA,CACjB,gBAAiB,wBAAA,CACjB,cAAA,CAAgB,iBAAA,CAChB,eAAA,CAAiB,0BACnB,CACF,CAAA,CAEA,MAAA,CAAQ,CACN,YAAa,eAAA,CACb,UAAA,CAAY,aAAA,CACZ,MAAA,CAAQ,UACR,QAAA,CAAU,WAAA,CACV,SAAA,CAAW,YAAA,CACX,QAAS,UAAA,CACT,WAAA,CAAa,cAAA,CACb,QAAA,CAAU,YACV,GAAA,CAAK,KAAA,CACL,EAAA,CAAI,IAAA,CACJ,eAAA,CAAiB,8BACnB,CAAA,CAEA,UAAA,CAAY,CACV,KAAA,CAAO,OAAA,CACP,MAAA,CAAQ,OAAA,CACR,KAAM,cACR,CACF,CAAA,CAKaC,EAAAA,CAAwB,CACnC,OAAA,CAAS,CACP,QAAA,CAAU,iBAAA,CACV,UAAW,cAAA,CACX,OAAA,CAAS,WAAA,CACT,QAAA,CAAU,cACV,SAAA,CAAW,WAAA,CACX,MAAA,CAAQ,QAAA,CACR,SAAU,cAAA,CACV,QAAA,CAAU,WACZ,CAAA,CAEA,QAAS,CACP,KAAA,CAAO,KAAA,CACP,GAAA,CAAK,QAAA,CACL,IAAA,CAAM,QAAA,CACN,KAAA,CAAO,MACP,MAAA,CAAQ,UAAA,CACR,SAAA,CAAW,gBAAA,CACX,UAAW,gBAAA,CACX,SAAA,CAAW,gBAAA,CACX,WAAA,CAAa,mBACb,eAAA,CAAiB,uBAAA,CACjB,IAAA,CAAM,UAAA,CACN,KAAM,SAAA,CACN,UAAA,CAAY,aAAA,CAEZ,OAAA,CAAS,WACT,OAAA,CAAS,UAAA,CACT,MAAA,CAAQ,QAAA,CACR,SAAU,WAAA,CAEV,SAAA,CAAW,OAAA,CACX,gBAAA,CAAkB,gBAClB,gBAAA,CAAkB,aAAA,CAClB,eAAA,CAAiB,aAAA,CAEjB,MAAA,CAAQ,SAAA,CACR,QAAA,CAAU,oBAAA,CACV,cAAe,0BAAA,CACf,oBAAA,CAAsB,4BAAA,CACtB,oBAAA,CAAsB,0CACtB,mBAAA,CAAqB,gCAAA,CACrB,WAAA,CAAa,gBACf,EAGA,WAAA,CAAa,CACX,QAAA,CAAU,cAAA,CACV,WAAY,kBAAA,CACZ,cAAA,CAAgB,mBAAA,CAChB,aAAA,CAAe,qBACf,YAAA,CAAc,mBAAA,CACd,SAAA,CAAW,eAAA,CACX,WAAY,gBACd,CAAA,CAEA,OAAA,CAAS,CACP,KAAM,QAAA,CACN,MAAA,CAAQ,UAAA,CACR,SAAA,CAAW,UAAA,CACX,UAAA,CAAY,kBAAA,CACZ,MAAA,CAAQ,iBACR,OAAA,CAAS,iBAAA,CACT,MAAA,CAAQ,cAAA,CACR,SAAU,aAAA,CACV,SAAA,CAAW,eAAA,CACX,SAAA,CAAW,kBACX,WAAA,CAAa,oBACf,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,WAAA,CACN,UAAA,CAAY,aAAA,CACZ,UAAW,YACb,CAAA,CAEA,MAAA,CAAQ,CACN,SAAU,UAAA,CACV,QAAA,CAAU,aAAA,CACV,IAAA,CAAM,UACN,GAAA,CAAK,QAAA,CACL,QAAA,CAAU,UAAA,CACV,SAAA,CAAW,MAAA,CACX,YAAA,CAAc,iBAAA,CACd,QAAS,UAAA,CACT,IAAA,CAAM,OAAA,CACN,OAAA,CAAS,oBACT,OAAA,CAAS,eAAA,CACT,OAAA,CAAS,aAAA,CACT,QAAS,aAAA,CACT,KAAA,CAAO,OAAA,CACP,KAAA,CAAO,MACP,IAAA,CAAM,QAAA,CACN,eAAA,CAAiB,gCACnB,EAEA,EAAA,CAAI,CACF,WAAA,CAAa,sFAAA,CACb,SAAU,aAAA,CACV,WAAA,CAAa,CACX,QAAA,CAAU,8CACV,UAAA,CAAY,0CAAA,CACZ,UAAA,CAAY,8CAAA,CACZ,WAAA,CAAa,iDAAA,CACb,SAAA,CAAW,kCAAA,CACX,WAAY,6CAAA,CACZ,UAAA,CAAY,4BAAA,CACZ,UAAA,CAAY,oCACd,CAAA,CACA,MAAA,CAAQ,CACN,YAAA,CAAc,sBACd,WAAA,CAAa,mBAAA,CACb,eAAA,CAAiB,yBAAA,CACjB,gBAAiB,+BAAA,CACjB,cAAA,CAAgB,qBAAA,CAChB,eAAA,CAAiB,6BACnB,CACF,CAAA,CAEA,MAAA,CAAQ,CACN,YAAa,gBAAA,CACb,UAAA,CAAY,cAAA,CACZ,MAAA,CAAQ,cACR,QAAA,CAAU,iBAAA,CACV,SAAA,CAAW,cAAA,CACX,OAAA,CAAS,WAAA,CACT,WAAA,CAAa,SAAA,CACb,SAAU,UAAA,CACV,GAAA,CAAK,OAAA,CACL,EAAA,CAAI,KACJ,eAAA,CAAiB,yCACnB,CAAA,CAEA,UAAA,CAAY,CACV,KAAA,CAAO,OAAA,CACP,MAAA,CAAQ,OAAA,CACR,KAAM,mBACR,CACF,CAAA,CAKaja,EAAAA,CAA2D,CACtE,EAAA,CAAAga,EAAAA,CACA,EAAA,CAAAC,EACF,EAMO,SAASC,EAAAA,CAAgBxrB,CAAAA,CAAqD,CACnF,OAAOsR,EAAAA,CAAatR,CAAyB,CAAA,EAAKsR,EAAAA,CAAa,EACjE,CAMO,SAASma,EAAAA,CACdzrB,EACA0rB,CAAAA,CACmB,CACnB,IAAMC,CAAAA,CAAOH,GAAgBxrB,CAAM,CAAA,CAEnC,OAAK0rB,CAAAA,CAIE,CACL,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,QAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,QAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,WAAA,CAAa,CAAE,GAAGC,CAAAA,CAAK,WAAA,CAAa,GAAGD,CAAAA,CAAmB,WAAY,CAAA,CACtE,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,EAAmB,OAAQ,CAAA,CAC1D,MAAA,CAAQ,CAAE,GAAGC,CAAAA,CAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,CAAA,CACvD,MAAA,CAAQ,CAAE,GAAGC,EAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,EACvD,EAAA,CAAI,CACF,GAAGC,CAAAA,CAAK,GACR,GAAGD,CAAAA,CAAmB,EAAA,CACtB,WAAA,CAAa,CAAE,GAAGC,CAAAA,CAAK,EAAA,CAAG,WAAA,CAAa,GAAGD,CAAAA,CAAmB,EAAA,EAAI,WAAY,CAAA,CAC7E,OAAQ,CAAE,GAAGC,CAAAA,CAAK,EAAA,CAAG,OAAQ,GAAGD,CAAAA,CAAmB,EAAA,EAAI,MAAO,CAChE,CAAA,CACA,MAAA,CAAQ,CAAE,GAAGC,EAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,EACvD,UAAA,CAAY,CAAE,GAAGC,CAAAA,CAAK,WAAY,GAAGD,CAAAA,CAAmB,UAAW,CACrE,CAAA,CAlBSC,CAmBX,CCjeO,IAAMC,GAAmB36B,aAAAA,CAAiCq6B,EAAE,EAc5D,SAASO,IAAkC,CAChD,OAAO16B,UAAAA,CAAWy6B,EAAgB,CACpC,CCyBA,SAASvb,EAAAA,CAAe,CAAE,KAAA,CAAAle,CAAAA,CAAO,YAAA25B,CAAAA,CAAa,WAAA,CAAAC,CAAAA,CAAa,aAAA,CAAAvb,EAAe,WAAA,CAAAF,CAAAA,CAAa,YAAA,CAAAC,CAAAA,CAAc,iBAAA,CAAAyb,CAAkB,CAAA,CAAwB,CAC7I,GAAM,CAACj5B,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,SAAS,KAAK,CAAA,CACpC,CAAC2e,CAAAA,CAAaC,CAAc,CAAA,CAAI5e,QAAAA,CAAwB,IAAI,CAAA,CAC5D2O,EAAcrN,MAAAA,CAAuB,IAAI,CAAA,CACzC0F,CAAAA,CAAI+yB,IAAa,CAkBvB,GAfA55B,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAC5C0P,EAAY,OAAA,EAAW,CAACA,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAAS1P,CAAAA,CAAM,MAAc,CAAA,EAC3EiC,EAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,GACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,EAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAIP,EAFiB+4B,CAAAA,EAAeC,CAAAA,EAAevb,GAAiBF,CAAAA,EAAeC,CAAAA,EAAgByb,CAAAA,CAAAA,CAEhF,OAAO,KAE1B,IAAMrb,CAAAA,CAAgB,CACpB,CACE,EAAA,CAAI,KAAA,CACJ,KAAA,CAAO,KAAA,CACP,YAAa,OAAA,CACb,IAAA,CAAMnf,GAAAA,CAACy6B,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,CAAA,CACrC,OAAA,CAASH,CACX,CAAA,CACA,CACE,EAAA,CAAI,KAAA,CACJ,MAAO,KAAA,CACP,WAAA,CAAa,UAAA,CACb,IAAA,CAAMt6B,IAACua,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,EACpC,OAAA,CAASggB,CACX,CAAA,CACA,CACE,GAAI,OAAA,CACJ,KAAA,CAAO,OAAA,CACP,WAAA,CAAa,aAAA,CACb,IAAA,CAAMv6B,GAAAA,CAACqf,eAAAA,CAAA,CAAgB,SAAA,CAAU,SAAA,CAAU,CAAA,CAC3C,OAAA,CAASL,CACX,CAAA,CACA,CACE,EAAA,CAAI,KAAA,CACJ,MAAO,KAAA,CACP,WAAA,CAAa,iBAAA,CACb,IAAA,CAAMhf,IAACua,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,EACpC,OAAA,CAASuE,CACX,CAAA,CACA,CACE,GAAI,MAAA,CACJ,KAAA,CAAO,MAAA,CACP,WAAA,CAAa,OACb,IAAA,CAAM9e,GAAAA,CAACof,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,OAAA,CAASL,CACX,CAAA,CACA,CACE,EAAA,CAAI,WAAA,CACJ,MAAO,YAAA,CACP,WAAA,CAAa,KAAA,CACb,IAAA,CAAM/e,IAAC06B,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,EACxC,OAAA,CAASF,CACX,CACF,CAAA,CAAE,OAAOlb,CAAAA,EAAOA,CAAAA,CAAI,OAAO,CAAA,CAErBC,EAAe,MAAO/X,CAAAA,CAAYgY,CAAAA,GAAsD,CAC5F,GAAKA,CAAAA,CAEL,CAAAN,CAAAA,CAAe1X,CAAE,CAAA,CACjB,GAAI,CACF,MAAMgY,IACR,CAAA,MAAS/mB,CAAAA,CAAO,CACd,QAAQ,KAAA,CAAM,CAAA,OAAA,EAAU+O,CAAE,CAAA,QAAA,CAAA,CAAY/O,CAAK,EAC7C,CAAA,OAAE,CACAymB,CAAAA,CAAe,IAAI,CAAA,CACnB1d,CAAAA,CAAU,KAAK,EACjB,EACF,CAAA,CAEA,OACEN,IAAAA,CAAC,KAAA,CAAA,CAAI,IAAK+N,CAAAA,CAAa,SAAA,CAAU,UAAA,CAC/B,QAAA,CAAA,CAAA/N,KAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM1O,CAAAA,CAAU,CAACD,CAAM,CAAA,CAChC,UAAU,uEAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBA,EAASZ,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,WAAA,CAC/C,OAAQ,CAAA,UAAA,EAAaY,CAAAA,CAASZ,CAAAA,CAAM,MAAA,CAASA,EAAM,WAAW,CAAA,CAAA,CAC9D,KAAA,CAAOY,CAAAA,CAAS,UAAYZ,CAAAA,CAAM,aAAA,CAClC,UAAA,CAAY,mBAAA,CACZ,WAAY,GACd,CAAA,CACA,UAAA,CAAY,CACV,MAAO,IAAA,CACP,eAAA,CAAiBA,CAAAA,CAAM,MAAA,CACvB,KAAA,CAAO,SACT,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAAX,IAACyf,QAAAA,CAAA,CAAS,SAAA,CAAU,aAAA,CAAc,EAClCzf,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAsH,CAAAA,CAAE,QAAQ,MAAA,CAAO,CAAA,CACxBtH,GAAAA,CAAC+R,WAAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CAAE,UAAWxQ,CAAAA,CAAS,gBAAA,CAAmB,cAAe,CAAA,CACjE,GACF,CAAA,CAEAvB,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCvB,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,EAC1C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CACtC,KAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,KAAA,CAAO,GAAK,CAAA,CACvC,UAAA,CAAY,CAAE,QAAA,CAAU,GAAA,CAAM,IAAA,CAAM,SAAU,CAAA,CAC9C,SAAA,CAAU,4DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,WAAA,CACvB,MAAA,CAAQ,aAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,iCACb,CAAA,CAEA,QAAA,CAAAX,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,MAAA,CACZ,QAAA,CAAAmf,CAAAA,CAAc,GAAA,CAAI,CAACva,CAAAA,CAAQjG,CAAAA,GAC1BuC,IAAAA,CAACgP,MAAAA,CAAO,OAAP,CAEC,OAAA,CAAS,IAAMqP,CAAAA,CAAa3a,EAAO,EAAA,CAAIA,CAAAA,CAAO,OAAO,CAAA,CACrD,QAAA,CAAUqa,CAAAA,GAAgB,IAAA,CAC1B,SAAA,CAAU,sEACV,KAAA,CAAO,CACL,eAAA,CAAiB,aAAA,CACjB,aAActgB,CAAAA,CAAQwgB,CAAAA,CAAc,MAAA,CAAS,CAAA,CAAI,aAAaxe,CAAAA,CAAM,WAAW,CAAA,CAAA,CAAK,MACtF,EACA,UAAA,CAAY,CACV,eAAA,CAAiBA,CAAAA,CAAM,OACzB,CAAA,CACA,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,UAAA,CAAY,CAAE,KAAA,CAAOhC,EAAQ,GAAK,CAAA,CAElC,QAAA,CAAA,CAAAqB,GAAAA,CAAC,OACC,SAAA,CAAU,qDAAA,CACV,KAAA,CAAO,CACL,gBAAiBW,CAAAA,CAAM,WAAA,CACvB,KAAA,CAAOA,CAAAA,CAAM,MACf,CAAA,CAEC,QAAA,CAAAse,CAAAA,GAAgBra,CAAAA,CAAO,GACtB5E,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,QAAS,CAAE,MAAA,CAAQ,GAAI,CAAA,CACvB,WAAY,CAAE,QAAA,CAAU,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAA,CAAA,CAAU,IAAA,CAAM,QAAS,CAAA,CAE5D,SAAAlQ,GAAAA,CAACyf,QAAAA,CAAA,CAAS,SAAA,CAAU,UAAU,CAAA,CAChC,CAAA,CAEA7a,CAAAA,CAAO,IAAA,CAEX,EACA1D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,EAEjC,QAAA,CAAAiE,CAAAA,CAAO,KAAA,CACV,CAAA,CACA5E,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,EAElC,QAAA,CAAAiE,CAAAA,CAAO,WAAA,CACV,CAAA,CAAA,CACF,IA9CKA,CAAAA,CAAO,EA+Cd,CACD,CAAA,CACH,EACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CAWA,SAAS+1B,EAAAA,CAAiB,CAAE,OAAA,CAAAvhC,CAAAA,CAAS,MAAAgE,CAAAA,CAAO,QAAA,CAAAiE,CAAAA,CAAU,KAAA,CAAAV,EAAO,QAAA,CAAAi6B,CAAAA,CAAW,eAAgB,CAAA,CAA0B,CAChH,OACE56B,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sCACV,KAAA,CAAO,CACL,eAAA,CAAiBW,CAAAA,CAAM,YACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,WAAW,EACxC,CAAA,CAEC,QAAA,CAAAvH,CAAAA,CAAQ,GAAA,CAAKwL,GAAW,CACvB,IAAMi2B,CAAAA,CAAWz9B,CAAAA,GAAUwH,EAAO,KAAA,CAClC,OACE1D,IAAAA,CAACgP,MAAAA,CAAO,OAAP,CAEC,OAAA,CAAS,IAAM7O,CAAAA,CAASuD,EAAO,KAAK,CAAA,CACpC,SAAA,CAAU,8GAAA,CACV,MAAO,CACL,KAAA,CAAOi2B,CAAAA,CAAWl6B,CAAAA,CAAM,WAAA,CAAcA,CAAAA,CAAM,YAAA,CAC5C,UAAA,CAAY,oBACZ,UAAA,CAAYk6B,CAAAA,CAAW,GAAA,CAAM,GAAA,CAC7B,OAAQA,CAAAA,CAAW,CAAA,CAAI,CACzB,CAAA,CACA,WAAY,CAAE,KAAA,CAAO,IAAK,CAAA,CAC1B,SAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAEvB,UAAAA,CAAAA,EACC76B,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,QAAA,CAAU0qB,CAAAA,CACV,SAAA,CAAU,6BAAA,CACV,MAAO,CACL,eAAA,CAAiBj6B,CAAAA,CAAM,MAAA,CACvB,SAAA,CAAW,8BACb,CAAA,CACA,UAAA,CAAY,CACV,IAAA,CAAM,QAAA,CACN,SAAA,CAAW,GAAA,CACX,QAAS,EACX,CAAA,CACF,CAAA,CAEDiE,CAAAA,CAAO,MACN5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAgB,MAAO,CAAE,KAAA,CAAO66B,CAAAA,CAAW,SAAA,CAAYl6B,EAAM,YAAa,CAAA,CACvF,QAAA,CAAAiE,CAAAA,CAAO,KACV,CAAA,CAEF5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gBAAgB,KAAA,CAAO,CAAE,KAAA,CAAO66B,CAAAA,CAAW,SAAA,CAAYl6B,CAAAA,CAAM,YAAa,CAAA,CACvF,SAAAiE,CAAAA,CAAO,KAAA,CACV,CAAA,CAAA,CAAA,CAlCKA,CAAAA,CAAO,KAmCd,CAEJ,CAAC,CAAA,CACH,CAEJ,CAaA,SAASk2B,EAAAA,CAAY,CAAE,OAAA,CAAA1hC,EAAS,KAAA,CAAAgE,CAAAA,CAAO,QAAA,CAAAiE,CAAAA,CAAU,MAAAV,CAAM,CAAA,CAAqB,CAC1E,OACEX,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CACZ,QAAA,CAAA5G,EAAQ,GAAA,CAAKwL,CAAAA,EAAW,CACvB,IAAMi2B,CAAAA,CAAWz9B,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,CAClC,OACE1D,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CAEC,QAAS,IAAM7O,CAAAA,CAASuD,CAAAA,CAAO,KAAK,EACpC,SAAA,CAAU,6CAAA,CACV,KAAA,CAAO,CACL,MAAOi2B,CAAAA,CAAWl6B,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,aACvC,UAAA,CAAY,mBAAA,CACZ,UAAA,CAAYk6B,CAAAA,CAAW,IAAM,GAC/B,CAAA,CACA,UAAA,CAAY,CAAE,MAAOA,CAAAA,CAAWl6B,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,aAAc,CAAA,CACnE,QAAA,CAAU,CAAE,MAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAAX,GAAAA,CAAC,QAAM,QAAA,CAAA4E,CAAAA,CAAO,KAAA,CAAM,CAAA,CAEnBi2B,GACC76B,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,SAAS,oBAAA,CACT,SAAA,CAAU,qDAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBvP,CAAAA,CAAM,MAAO,CAAA,CACvC,WAAY,CACV,IAAA,CAAM,QAAA,CACN,SAAA,CAAW,IACX,OAAA,CAAS,EACX,CAAA,CACF,CAAA,CAAA,CAAA,CAvBGiE,CAAAA,CAAO,KAyBd,CAEJ,CAAC,EACH,CAEJ,CAYA,SAASm2B,EAAAA,CAAgB,CAAE,KAAA,CAAAp6B,CAAAA,CAAO,KAAA,CAAAvD,CAAAA,CAAO,SAAAiE,CAAS,CAAA,CAAyB,CACzE,GAAM,CAACE,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC2O,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,EACzC0F,CAAAA,CAAI+yB,EAAAA,EAAa,CAGvB55B,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAC5C0P,CAAAA,CAAY,OAAA,EAAW,CAACA,EAAY,OAAA,CAAQ,QAAA,CAAS1P,CAAAA,CAAM,MAAc,GAC3EiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMy5B,CAAAA,CAAiB,CACrB,CAAE,KAAA,CAAO,SAAA,CAAyB,KAAA,CAAO1zB,CAAAA,CAAE,OAAA,CAAQ,OAAA,EAAW,SAAU,EACxE,CAAE,KAAA,CAAO,aAAA,CAA6B,KAAA,CAAOA,EAAE,OAAA,CAAQ,MAAA,EAAU,QAAS,CAAA,CAC1E,CAAE,KAAA,CAAO,UAAA,CAA0B,KAAA,CAAOA,CAAAA,CAAE,QAAQ,QAAA,EAAY,UAAW,CAC7E,CAAA,CAEM2zB,EAAeD,CAAAA,CAAe,IAAA,CAAK1b,CAAAA,EAAOA,CAAAA,CAAI,QAAUliB,CAAK,CAAA,EAAG,KAAA,EAAS,QAAA,CAE/E,OACE8D,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+N,CAAAA,CAAa,SAAA,CAAU,UAAA,CAC/B,QAAA,CAAA,CAAAjP,GAAAA,CAACkQ,OAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM1O,EAAU,CAACD,CAAM,CAAA,CAChC,SAAA,CAAU,iEACV,KAAA,CAAO,CACL,eAAA,CAAiBA,CAAAA,CAASZ,EAAM,WAAA,CAAcA,CAAAA,CAAM,WAAA,CACpD,MAAA,CAAQ,aAAaY,CAAAA,CAASZ,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,WAAW,CAAA,CAAA,CAC9D,KAAA,CAAOY,CAAAA,CAASZ,CAAAA,CAAM,OAASA,CAAAA,CAAM,aACvC,CAAA,CACA,UAAA,CAAY,CACV,eAAA,CAAiBA,CAAAA,CAAM,OAAA,CACvB,MAAO,IACT,CAAA,CACA,QAAA,CAAU,CAAE,MAAO,GAAK,CAAA,CACxB,KAAA,CAAO,CAAA,EAAG2G,EAAE,OAAA,CAAQ,OAAA,EAAW,SAAS,CAAA,EAAA,EAAK2zB,CAAY,CAAA,CAAA,CAEzD,QAAA,CAAAj7B,GAAAA,CAACk7B,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,CAAA,CAC7B,CAAA,CAEAl7B,IAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCvB,IAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,KAAA,CAAO,GAAK,CAAA,CAC1C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,MAAO,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CACvC,UAAA,CAAY,CAAE,QAAA,CAAU,IAAM,IAAA,CAAM,SAAU,CAAA,CAC9C,SAAA,CAAU,4DACV,KAAA,CAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,WAAA,CACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,iCACb,CAAA,CAEA,SAAAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACZ,SAAAg7B,CAAAA,CAAe,GAAA,CAAI,CAACp2B,CAAAA,CAAQjG,IAAU,CACrC,IAAMk8B,CAAAA,CAAWz9B,CAAAA,GAAUwH,EAAO,KAAA,CAClC,OACE1D,IAAAA,CAACgP,MAAAA,CAAO,OAAP,CAEC,OAAA,CAAS,IAAM,CACb7O,EAASuD,CAAAA,CAAO,KAAK,CAAA,CACrBpD,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAU,8EACV,KAAA,CAAO,CACL,eAAA,CAAiBq5B,CAAAA,CAAWl6B,EAAM,WAAA,CAAc,aAAA,CAChD,YAAA,CAAchC,CAAAA,CAAQq8B,EAAe,MAAA,CAAS,CAAA,CAAI,CAAA,UAAA,EAAar6B,CAAAA,CAAM,WAAW,CAAA,CAAA,CAAK,MACvF,CAAA,CACA,UAAA,CAAY,CACV,eAAA,CAAiBk6B,CAAAA,CAAWl6B,CAAAA,CAAM,WAAA,CAAcA,EAAM,OACxD,CAAA,CACA,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAE,CAAA,CAC5B,UAAA,CAAY,CAAE,MAAOhC,CAAAA,CAAQ,GAAK,CAAA,CAElC,QAAA,CAAA,CAAAqB,IAAC,MAAA,CAAA,CACC,SAAA,CAAU,SAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO66B,CAAAA,CAAWl6B,CAAAA,CAAM,MAAA,CAASA,EAAM,WAAA,CACvC,UAAA,CAAY,mBAAA,CACZ,UAAA,CAAYk6B,EAAW,GAAA,CAAM,GAC/B,CAAA,CAEC,QAAA,CAAAj2B,EAAO,KAAA,CACV,CAAA,CACCi2B,CAAAA,EACC76B,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,aAAA,CAAc,MAAO,CAAE,KAAA,CAAOtR,CAAAA,CAAM,MAAO,EAAG,CAAA,CAAA,CAAA,CA5B5DiE,CAAAA,CAAO,KA8Bd,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CAaA,SAASu2B,EAAAA,CAAe,CAAE,MAAAx6B,CAAAA,CAAO,KAAA,CAAAvD,CAAAA,CAAO,QAAA,CAAAiE,CAAS,CAAA,CAAwB,CACvE,GAAM,CAACE,EAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,EACpC2O,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,CAAA,CACzC0F,EAAI+yB,EAAAA,EAAa,CAGvB55B,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBlD,CAAAA,EAAsB,CAC5C0P,EAAY,OAAA,EAAW,CAACA,CAAAA,CAAY,OAAA,CAAQ,SAAS1P,CAAAA,CAAM,MAAc,CAAA,EAC3EiC,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,OAAID,CAAAA,EACF,SAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAM65B,CAAAA,CAAgB,CACpB,CACE,KAAA,CAAO,KAAA,CACP,KAAA,CAAO9zB,CAAAA,CAAE,QAAQ,SAAA,EAAa,WAAA,CAC9B,WAAA,CAAaA,CAAAA,CAAE,QAAQ,aAAA,EAAiB,gBAC1C,CAAA,CACA,CACE,MAAO,YAAA,CACP,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,kBAAoB,iBAAA,CACrC,WAAA,CAAaA,CAAAA,CAAE,OAAA,CAAQ,sBAAwB,sBACjD,CAAA,CACA,CACE,KAAA,CAAO,aAAA,CACP,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,kBAAoB,aAAA,CACrC,WAAA,CAAaA,CAAAA,CAAE,OAAA,CAAQ,sBAAwB,iCACjD,CAAA,CACA,CACE,KAAA,CAAO,YACP,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,eAAA,EAAmB,YACpC,WAAA,CAAaA,CAAAA,CAAE,OAAA,CAAQ,mBAAA,EAAuB,0BAChD,CACF,CAAA,CAEM+zB,CAAAA,CAAkBj+B,CAAAA,GAAU,MAElC,OACE8D,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+N,EAAa,SAAA,CAAU,UAAA,CAC/B,QAAA,CAAA,CAAA/N,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM1O,CAAAA,CAAU,CAACD,CAAM,CAAA,CAChC,UAAU,uEAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiB85B,GAAuC95B,CAAAA,CAArBZ,CAAAA,CAAM,WAAA,CAA4CA,CAAAA,CAAM,YAC3F,MAAA,CAAQ,CAAA,UAAA,EAAa06B,CAAAA,EAAmB95B,CAAAA,CAASZ,EAAM,MAAA,CAASA,CAAAA,CAAM,WAAW,CAAA,CAAA,CACjF,MAAO06B,CAAAA,EAAmB95B,CAAAA,CAASZ,CAAAA,CAAM,MAAA,CAASA,EAAM,aAAA,CACxD,UAAA,CAAY,mBAAA,CACZ,UAAA,CAAY,GACd,CAAA,CACA,UAAA,CAAY,CACV,gBAAiBA,CAAAA,CAAM,WAAA,CACvB,WAAA,CAAaA,CAAAA,CAAM,OACnB,KAAA,CAAOA,CAAAA,CAAM,MAAA,CACb,KAAA,CAAO,IACT,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAAX,GAAAA,CAACs7B,MAAAA,CAAA,CAAO,SAAA,CAAU,aAAA,CAAc,CAAA,CAChCt7B,GAAAA,CAAC,QAAM,QAAA,CAAAsH,CAAAA,CAAE,OAAA,CAAQ,MAAA,EAAU,SAAS,CAAA,CACnC+zB,CAAAA,EACCr7B,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,OAAA,CAAS,CAAE,MAAO,CAAE,CAAA,CACpB,OAAA,CAAS,CAAE,MAAO,CAAE,CAAA,CACpB,SAAA,CAAU,iFAAA,CACV,MAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,MAAA,CACvB,MAAO,SACT,CAAA,CACD,QAAA,CAAA,GAAA,CAED,CAAA,CAEFX,IAAC+R,WAAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,MAAO,CAAE,SAAA,CAAWxQ,CAAAA,CAAS,gBAAA,CAAmB,cAAe,CAAA,CACjE,CAAA,CAAA,CACF,CAAA,CAEAvB,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCL,KAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,MAAO,GAAK,CAAA,CAC1C,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,EACvC,UAAA,CAAY,CAAE,QAAA,CAAU,GAAA,CAAM,IAAA,CAAM,SAAU,CAAA,CAC9C,SAAA,CAAU,4DACV,KAAA,CAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,YACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,GACjC,SAAA,CAAW,iCACb,CAAA,CAGA,QAAA,CAAA,CAAAX,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAaW,CAAAA,CAAM,WAAY,CAAA,CAExC,SAAAX,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,qBAAA,CACV,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,EAElC,QAAA,CAAA2G,CAAAA,CAAE,OAAA,CAAQ,QAAA,EAAY,mBACzB,CAAA,CACF,CAAA,CAGAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,MAAA,CACZ,QAAA,CAAAo7B,CAAAA,CAAc,GAAA,CAAI,CAACx2B,CAAAA,CAAQjG,CAAAA,GAAU,CACpC,IAAMk8B,EAAWz9B,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,CAClC,OACE1D,KAACgP,MAAAA,CAAO,MAAA,CAAP,CAEC,OAAA,CAAS,IAAM,CACb7O,CAAAA,CAASuD,CAAAA,CAAO,KAAK,EACrBpD,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAU,oEAAA,CACV,KAAA,CAAO,CACL,gBAAiBq5B,CAAAA,CAAWl6B,CAAAA,CAAM,WAAA,CAAc,aAClD,EACA,UAAA,CAAY,CACV,eAAA,CAAiBk6B,CAAAA,CAAWl6B,EAAM,WAAA,CAAcA,CAAAA,CAAM,OACxD,CAAA,CACA,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,UAAA,CAAY,CAAE,KAAA,CAAOhC,CAAAA,CAAQ,GAAK,CAAA,CAGlC,QAAA,CAAA,CAAAqB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,+EACV,KAAA,CAAO,CACL,WAAA,CAAa66B,CAAAA,CAAWl6B,EAAM,MAAA,CAASA,CAAAA,CAAM,MAAA,CAC7C,eAAA,CAAiBk6B,EAAWl6B,CAAAA,CAAM,MAAA,CAAS,aAC7C,CAAA,CAEC,SAAAk6B,CAAAA,EACC76B,GAAAA,CAACiS,KAAAA,CAAA,CAAM,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAAG,CAAA,CAE5D,CAAA,CAGA/Q,IAAAA,CAAC,OAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,qBAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO66B,CAAAA,CAAWl6B,CAAAA,CAAM,MAAA,CAASA,EAAM,WACzC,CAAA,CAEC,QAAA,CAAAiE,CAAAA,CAAO,MACV,CAAA,CACA5E,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,qBACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAElC,QAAA,CAAAiE,CAAAA,CAAO,WAAA,CACV,GACF,CAAA,CAAA,CAAA,CA7CKA,CAAAA,CAAO,KA8Cd,CAEJ,CAAC,CAAA,CACH,CAAA,CAGCy2B,CAAAA,EACCr7B,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAaW,CAAAA,CAAM,WAAY,CAAA,CAExC,SAAAX,GAAAA,CAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,QAAS,IAAM,CACb7O,CAAAA,CAAS,KAAK,EACdG,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,UAAU,kCAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOb,EAAM,YACf,CAAA,CACA,UAAA,CAAY,CACV,gBAAiBA,CAAAA,CAAM,OAAA,CACvB,KAAA,CAAOA,CAAAA,CAAM,aACf,CAAA,CAEC,QAAA,CAAA2G,CAAAA,CAAE,QAAQ,WAAA,EAAe,cAAA,CAC5B,CAAA,CACF,CAAA,CAAA,CAEJ,EAEJ,CAAA,CAAA,CACF,CAEJ,CAEO,SAASi0B,GAAa,CAC3B,KAAA,CAAA56B,CAAAA,CACA,SAAA,CAAA66B,EACA,iBAAA,CAAAC,CAAAA,CACA,IAAA,CAAAC,CAAAA,CACA,aAAAC,CAAAA,CACA,YAAA,CAAAzC,CAAAA,CACA,aAAA,CAAA0C,EACA,UAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,kBAAAC,CAAAA,CAAoB,KAAA,CACpB,oBAAA,CAAAC,CAAAA,CAAuB,KAAA,CACvB,eAAA,CAAApd,CAAAA,CACA,YAAA,CAAAgB,EACA,UAAA,CAAAqc,CAAAA,CAAa,KAAA,CACb,kBAAA,CAAAC,EACA,WAAA,CAAA5B,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,cAAAvb,CAAAA,CACA,WAAA,CAAAF,CAAAA,CACA,YAAA,CAAAC,EACA,iBAAA,CAAAyb,CACF,CAAA,CAAsB,CACpB,IAAMlzB,CAAAA,CAAI+yB,EAAAA,EAAa,CACjBta,CAAAA,CAAYua,GAAeC,CAAAA,EAAevb,CAAAA,EAAiBF,CAAAA,EAAeC,CAAAA,EAAgByb,EAG1F2B,CAAAA,CAAmB,CACvB,CAAE,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO70B,CAAAA,CAAE,OAAA,CAAQ,GAAI,CAAA,CACrC,CAAE,KAAA,CAAO,MAAA,CAAQ,MAAOA,CAAAA,CAAE,OAAA,CAAQ,IAAK,CAAA,CACvC,CAAE,KAAA,CAAO,OAAA,CAAS,KAAA,CAAOA,CAAAA,CAAE,QAAQ,KAAM,CAC3C,CAAA,CAIM80B,CAAAA,CAAe,CACnB,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,OAAQ,IAAA,CAAMp8B,GAAAA,CAACq8B,IAAAA,CAAA,CAAK,UAAU,aAAA,CAAc,CAAG,CAAA,CACvE,CAAE,MAAO,OAAA,CAAS,KAAA,CAAO,OAAA,CAAS,IAAA,CAAMr8B,IAACs8B,GAAAA,CAAA,CAAI,SAAA,CAAU,aAAA,CAAc,CAAG,CAAA,CACxE,CAAE,KAAA,CAAO,SAAA,CAAW,MAAO,KAAA,CAAO,IAAA,CAAMt8B,GAAAA,CAACoa,OAAAA,CAAA,CAAQ,SAAA,CAAU,aAAA,CAAc,CAAG,CAC9E,EAEA,OACElZ,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uDACV,KAAA,CAAO,CACL,eAAA,CAAiBP,CAAAA,CAAM,OACvB,WAAA,CAAaA,CAAAA,CAAM,MACrB,CAAA,CAGA,QAAA,CAAA,CAAAO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC86B,EAAAA,CAAA,CACC,QAASqB,CAAAA,CACT,KAAA,CAAOX,CAAAA,CACP,QAAA,CAAWe,GAAQd,CAAAA,CAAkBc,CAAgB,CAAA,CACrD,KAAA,CAAO57B,EACT,CAAA,CAGAX,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,WACV,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,WAAY,CAAA,CAC9C,CAAA,CAGAO,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAMyrB,EAAa,IAAA,CAAK,GAAA,CAAI,EAAA,CAAKD,CAAAA,CAAO,EAAG,CAAC,CAAA,CACrD,SAAA,CAAU,iCAAA,CACV,MAAO,CACL,eAAA,CAAiB,aAAA,CACjB,KAAA,CAAO/6B,EAAM,aACf,CAAA,CACA,UAAA,CAAY,CACV,gBAAiBA,CAAAA,CAAM,OAAA,CACvB,KAAA,CAAO,IACT,EACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,EAExB,QAAA,CAAAX,GAAAA,CAACw8B,OAAAA,CAAA,CAAQ,SAAA,CAAU,aAAA,CAAc,CAAA,CACnC,CAAA,CAEAt7B,KAAC,KAAA,CAAA,CACC,SAAA,CAAU,mEAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOP,CAAAA,CAAM,aAAA,CACb,UAAA,CAAY,oBACZ,UAAA,CAAY,GACd,CAAA,CAEC,QAAA,CAAA,CAAA,IAAA,CAAK,MAAM+6B,CAAAA,CAAO,GAAG,CAAA,CAAE,GAAA,CAAA,CAC1B,EAEA17B,GAAAA,CAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,QAAS,IAAMyrB,CAAAA,CAAa,IAAA,CAAK,GAAA,CAAI,EAAGD,CAAAA,CAAO,EAAG,CAAC,CAAA,CACnD,SAAA,CAAU,iCAAA,CACV,KAAA,CAAO,CACL,gBAAiB,aAAA,CACjB,KAAA,CAAO/6B,CAAAA,CAAM,aACf,EACA,UAAA,CAAY,CACV,eAAA,CAAiBA,CAAAA,CAAM,QACvB,KAAA,CAAO,IACT,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAAX,IAACy8B,MAAAA,CAAA,CAAO,SAAA,CAAU,aAAA,CAAc,EAClC,CAAA,CAAA,CACF,CAAA,CAGAz8B,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,UAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,WAAY,CAAA,CAC9C,CAAA,CAGAX,IAAC+6B,EAAAA,CAAA,CACC,KAAA,CAAOp6B,CAAAA,CACP,MAAOk7B,CAAAA,CACP,QAAA,CAAUC,CAAAA,CACZ,CAAA,CAGCI,GACCh7B,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,UAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,WAAY,CAAA,CAC9C,EAGAX,GAAAA,CAACm7B,EAAAA,CAAA,CACC,KAAA,CAAOx6B,EACP,KAAA,CAAOs7B,CAAAA,CACP,QAAA,CAAUC,CAAAA,CACZ,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGAh7B,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CAEZ,QAAA,CAAA,CAAA86B,CAAAA,EAAwBpc,GACvB1e,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA7G,KAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS0P,EACT,SAAA,CAAU,uEAAA,CACV,KAAA,CAAO,CACL,WAAY,mDAAA,CACZ,KAAA,CAAO,SAAA,CACP,UAAA,CAAY,oBACZ,UAAA,CAAY,GAAA,CACZ,SAAA,CAAW,mCACb,EACA,UAAA,CAAY,CACV,KAAA,CAAO,IAAA,CACP,SAAA,CAAW,oCACb,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,QAAA,CAAA,CAAA5f,IAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,EAC9BlS,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA4e,CAAAA,EAAmBtX,EAAE,OAAA,CAAQ,UAAA,CAAW,CAAA,CAAA,CACjD,CAAA,CAAA,CACEyY,GAAagc,CAAAA,GACb/7B,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,WACV,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,WAAY,CAAA,CAC9C,CAAA,CAAA,CAEJ,CAAA,CAGDof,CAAAA,EACC7e,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,IAAC6e,EAAAA,CAAA,CACC,KAAA,CAAOle,CAAAA,CACP,YAAa25B,CAAAA,CACb,WAAA,CAAaC,CAAAA,CACb,aAAA,CAAevb,EACf,WAAA,CAAaF,CAAAA,CACb,YAAA,CAAcC,CAAAA,CACd,kBAAmByb,CAAAA,CACrB,CAAA,CACCuB,CAAAA,EACC/7B,GAAAA,CAAC,OACC,SAAA,CAAU,UAAA,CACV,KAAA,CAAO,CAAE,gBAAiBW,CAAAA,CAAM,WAAY,CAAA,CAC9C,CAAA,CAAA,CAEJ,EAEDo7B,CAAAA,EACC/7B,GAAAA,CAAC26B,EAAAA,CAAA,CACC,OAAA,CAASyB,CAAAA,CACT,KAAA,CAAOlD,CAAAA,CACP,SAAWqD,CAAAA,EAAQX,CAAAA,CAAcW,CAAY,CAAA,CAC7C,MAAO57B,CAAAA,CACT,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CCz2BO,SAAS+7B,EAAAA,CAAc,CAAE,OAAA,CAAAhe,EAAS,cAAA,CAAAie,CAAAA,CAAgB,KAAA,CAAAh8B,CAAM,EAAuB,CACpF,GAAM,CAACY,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACmB,CAAAA,CAAcC,CAAe,CAAA,CAAIpB,QAAAA,CAAS,CAAE,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAE,CAAC,CAAA,CACzDqB,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,EACrCC,CAAAA,CAAYD,MAAAA,CAA0B,IAAI,CAAA,CAEhDnB,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMkB,CAAAA,CAAsBE,GAAkB,CACxChB,CAAAA,CAAQ,OAAA,EAAW,CAACA,EAAQ,OAAA,CAAQ,QAAA,CAASgB,CAAAA,CAAE,MAAc,GAC/DnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEA,gBAAS,gBAAA,CAAiB,WAAA,CAAaiB,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMwoB,CAAAA,CAAmBrL,CAAAA,CAAQ,OAAO5iB,CAAAA,EAAOA,CAAAA,CAAI,EAAA,GAAO,MAAM,EAEhE,OACEoF,IAAAA,CAAA6G,QAAAA,CAAA,CACE,UAAA/H,GAAAA,CAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,IAAKrO,CAAAA,CACL,OAAA,CAAS,IAAM,CACb,GAAI,CAACN,CAAAA,EAAUM,CAAAA,CAAU,OAAA,CAAS,CAChC,IAAME,CAAAA,CAAOF,CAAAA,CAAU,OAAA,CAAQ,uBAAsB,CACrDH,CAAAA,CAAgB,CAAE,CAAA,CAAGK,CAAAA,CAAK,IAAA,CAAM,CAAA,CAAGA,CAAAA,CAAK,OAAS,CAAE,CAAC,EACtD,CACAP,EAAU,CAACD,CAAM,EACnB,CAAA,CACA,UAAU,0DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBZ,EAAM,WAAA,CACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,WAAW,CAAA,CAAA,CACtC,KAAA,CAAOA,CAAAA,CAAM,aACf,EACA,UAAA,CAAY,CACV,eAAA,CAAiBA,CAAAA,CAAM,QACvB,KAAA,CAAO,IACT,CAAA,CACA,QAAA,CAAU,CAAE,KAAA,CAAO,GAAK,CAAA,CAExB,SAAAX,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,UAAU,CAAA,CAC5B,CAAA,CAEAlS,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCvB,GAAAA,CAACE,EAAAA,CAAA,CACC,QAAA,CAAAF,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,GAAA,CAAKvO,CAAAA,CACL,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,KAAA,CAAO,GAAA,CAAM,CAAA,CAAG,GAAI,CAAA,CAC3C,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,KAAA,CAAO,CAAA,CAAG,CAAA,CAAG,CAAE,EACtC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,GAAA,CAAM,CAAA,CAAG,GAAI,CAAA,CACxC,WAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC7B,UAAU,uEAAA,CACV,KAAA,CAAO,CACL,IAAA,CAAM,GAAGF,CAAAA,CAAa,CAAC,CAAA,EAAA,CAAA,CACvB,GAAA,CAAK,GAAGA,CAAAA,CAAa,CAAC,CAAA,EAAA,CAAA,CACtB,eAAA,CAAiBd,EAAM,WAAA,CACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CACnC,CAAA,CAEA,QAAA,CAAAO,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,4CAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOW,CAAAA,CAAM,YAAA,CACb,UAAA,CAAY,oBACZ,UAAA,CAAY,GACd,CAAA,CACD,QAAA,CAAA,YAAA,CAED,EACCopB,CAAAA,CAAiB,GAAA,CAAKluB,CAAAA,EACrBqF,IAAAA,CAAC,UAEC,OAAA,CAAS,IAAM,CACby7B,CAAAA,CAAe9gC,EAAO,EAAE,EAC1B,CAAA,CACA,SAAA,CAAU,wFAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO8E,EAAM,WAAA,CACb,eAAA,CAAiB,aAAA,CACjB,UAAA,CAAY,mBACd,CAAA,CACA,YAAA,CAAegC,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkBhC,CAAAA,CAAM,QAChD,CAAA,CACA,YAAA,CAAegC,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,cAC1C,EAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAnE,EAAO,KAAA,CAAM,CAAA,CACnBA,CAAAA,CAAO,OAAA,EACNmE,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,KAAA,CAAOtR,CAAAA,CAAM,MAAO,CAAA,CAAG,CAAA,CAAA,CAAA,CAnBxD9E,CAAAA,CAAO,EAqBd,CACD,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,GACF,CAEJ,CC7EO,SAAS+gC,EAAAA,CAAY,CAAE,OAAAr7B,CAAAA,CAAQ,CAAA,CAAA9K,CAAAA,CAAG,CAAA,CAAAC,EAAG,KAAA,CAAAmmC,CAAAA,CAAO,OAAA,CAAAzpB,CAAAA,CAAS,MAAAzS,CAAM,CAAA,CAAqB,CACrF,IAAMgB,EAAUC,MAAAA,CAAuB,IAAI,CAAA,CAErC,CAACk7B,EAAkBC,CAAmB,CAAA,CAAIz8B,QAAAA,CAAS,CAAE,EAAA7J,CAAAA,CAAG,CAAA,CAAAC,CAAE,CAAC,EA+DjE,GA5DA+J,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAGb,IAAMW,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAa06B,CAAAA,CAAM,OAAS,EAAA,CAAK,CAAA,CACjCG,CAAAA,CAAU,CAAA,CAGV/6B,EAAgB,MAAA,CAAO,UAAA,CACvBD,CAAAA,CAAiB,MAAA,CAAO,YAE1Bi7B,CAAAA,CAAYxmC,CAAAA,CACZymC,CAAAA,CAAYxmC,CAAAA,CAGZD,EAAIyL,CAAAA,CAAY86B,CAAAA,CAAU/6B,CAAAA,GAC5Bg7B,CAAAA,CAAYxmC,EAAIyL,CAAAA,CAEZ+6B,CAAAA,CAAYD,CAAAA,GACdC,CAAAA,CAAYD,IAKZtmC,CAAAA,CAAIyL,CAAAA,CAAa66B,CAAAA,CAAUh7B,CAAAA,GAC7Bk7B,CAAAA,CAAYl7B,CAAAA,CAAiBG,CAAAA,CAAa66B,CAAAA,CAEtCE,EAAYF,CAAAA,GACdE,CAAAA,CAAYF,CAAAA,CAAAA,CAAAA,CAIhBD,CAAAA,CAAoB,CAAE,CAAA,CAAGE,CAAAA,CAAW,CAAA,CAAGC,CAAU,CAAC,EACpD,CAAA,CAAG,CAAC37B,CAAAA,CAAQ9K,EAAGC,CAAAA,CAAGmmC,CAAAA,CAAM,MAAM,CAAC,EAE/Bp8B,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMkB,CAAAA,CAAsBE,GAAkB,CACxChB,CAAAA,CAAQ,OAAA,EAAW,CAACA,EAAQ,OAAA,CAAQ,QAAA,CAASgB,CAAAA,CAAE,MAAc,GAC/DyQ,CAAAA,GAEJ,CAAA,CAEM1Q,CAAAA,CAAgBC,GAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EACZyQ,IAEJ,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,YAAa3Q,CAAkB,CAAA,CACzD,QAAA,CAAS,gBAAA,CAAiB,UAAWC,CAAY,CAAA,CAE1C,IAAM,CACX,SAAS,mBAAA,CAAoB,WAAA,CAAaD,CAAkB,CAAA,CAC5D,SAAS,mBAAA,CAAoB,SAAA,CAAWC,CAAY,EACtD,CACF,CAAA,CAAG,CAACnB,CAAAA,CAAQ6R,CAAO,CAAC,CAAA,CAEhB,CAAC7R,CAAAA,CAAQ,OAAO,IAAA,CAIpB,IAAM47B,CAAAA,CAAsBl8B,CAAAA,EAEtBA,EAAM,UAAA,CAAW,GAAG,CAAA,GAAMA,CAAAA,CAAM,SAAW,CAAA,EAAKA,CAAAA,CAAM,MAAA,GAAW,CAAA,CAAA,CAC5DA,EAIWN,CAAAA,CAAM,SAAA,EAAW,QAAA,CAAS,GAAG,GAAKA,CAAAA,CAAM,SAAA,EAAW,QAAA,CAAS,GAAG,GAC/DA,CAAAA,CAAM,WAAA,EAAa,WAAA,EAAY,CAAE,QAAA,CAAS,KAAK,CAAA,EAC/CA,CAAAA,CAAM,aAAa,WAAA,EAAY,CAAE,QAAA,CAAS,OAAO,EAChD,SAAA,CAAY,SAAA,CAGnC,OACEX,GAAAA,CAACiQ,gBAAA,CACC,QAAA,CAAAjQ,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,GAAA,CAAKvO,CAAAA,CACL,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAA,CAAM,EAAG,GAAI,CAAA,CAC3C,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,QAAS,CAAA,CAAG,KAAA,CAAO,GAAA,CAAM,CAAA,CAAG,GAAI,CAAA,CACxC,UAAA,CAAY,CAAE,QAAA,CAAU,IAAM,IAAA,CAAM,CAAC,EAAA,CAAK,CAAA,CAAG,GAAK,CAAC,CAAE,CAAA,CACrD,SAAA,CAAU,0CACV,KAAA,CAAO,CACL,IAAA,CAAM,CAAA,EAAGm7B,EAAiB,CAAC,CAAA,EAAA,CAAA,CAC3B,GAAA,CAAK,CAAA,EAAGA,EAAiB,CAAC,CAAA,EAAA,CAAA,CAC1B,eAAA,CAAiBK,CAAAA,CAAmBx8B,CAAAA,CAAM,WAAW,CAAA,CACrD,MAAA,CAAQ,aAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,gEACX,cAAA,CAAgB,MAClB,CAAA,CAEA,QAAA,CAAAX,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACZ,QAAA,CAAA68B,EAAM,GAAA,CAAKhqB,CAAAA,EACV3R,IAAAA,CAAC,KAAA,CAAA,CACE,UAAA2R,CAAAA,CAAK,SAAA,EACJ7S,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,WAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBW,EAAM,WAAY,CAAA,CAC9C,CAAA,CAEFO,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACR2R,EAAK,QAAA,GACRA,CAAAA,CAAK,OAAA,EAAQ,CACbO,GAAQ,EAEZ,CAAA,CACA,QAAA,CAAUP,CAAAA,CAAK,SACf,SAAA,CAAU,8EAAA,CACV,KAAA,CAAO,CACL,MAAOA,CAAAA,CAAK,QAAA,CAAWlS,CAAAA,CAAM,YAAA,CAAeA,EAAM,WAAA,CAClD,eAAA,CAAiB,aAAA,CACjB,UAAA,CAAY,oBACZ,MAAA,CAAQkS,CAAAA,CAAK,QAAA,CAAW,aAAA,CAAgB,UACxC,OAAA,CAASA,CAAAA,CAAK,QAAA,CAAW,EAAA,CAAM,CACjC,CAAA,CACA,YAAA,CAAelQ,CAAAA,EAAM,CACdkQ,CAAAA,CAAK,QAAA,GACRlQ,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkBhC,CAAAA,CAAM,OAAA,EAElD,CAAA,CACA,aAAegC,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,cAC1C,CAAA,CAEC,QAAA,CAAA,CAAAkQ,EAAK,IAAA,EACJ7S,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,aAAc,CAAA,CACvC,SAAAkS,CAAAA,CAAK,IAAA,CACR,CAAA,CAEF7S,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,QAAA,CAAU,QAAA,CAAA6S,EAAK,KAAA,CAAM,CAAA,CACpCA,CAAAA,CAAK,OAAA,EACJ7S,IAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAU,aAAA,CAAc,MAAO,CAAE,KAAA,CAAOz8B,CAAAA,CAAM,YAAa,EAAG,CAAA,CAAA,CAEhF,CAAA,CAAA,CAAA,CAzCQkS,CAAAA,CAAK,EA0Cf,CACD,CAAA,CACH,CAAA,CACF,CAAA,CACF,CAEJ,CAGO,IAAMwqB,EAAAA,CAAY,CACvB,IAAA,CAAMr9B,IAACs9B,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,EACjC,MAAA,CAAQt9B,GAAAA,CAACu9B,MAAAA,CAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CACpC,MAAA,CAAQv9B,GAAAA,CAAC6a,OAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,IAAK7a,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,UAAU,CAAA,CAC/B,UAAA,CAAYlS,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACtC,MAAA,CAAQlS,IAACw9B,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,EACnC,IAAA,CAAMx9B,GAAAA,CAACia,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,CAAA,CACjC,QAAA,CAAUja,IAACy9B,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,EACzC,IAAA,CAAMz9B,GAAAA,CAAC09B,WAAAA,CAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CACvC,OAAA,CAAS19B,GAAAA,CAAC29B,QAAA,CAAQ,SAAA,CAAU,SAAA,CAAU,CAAA,CACtC,SAAU39B,GAAAA,CAAC49B,SAAAA,CAAA,CAAU,SAAA,CAAU,UAAU,CAAA,CACzC,IAAA,CAAM59B,GAAAA,CAAC69B,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAClC,IAAA,CAAM79B,GAAAA,CAAC89B,GAAAA,CAAA,CAAI,SAAA,CAAU,UAAU,CAAA,CAC/B,QAAA,CAAU99B,GAAAA,CAAC+9B,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACxC,KAAA,CAAO/9B,IAACg+B,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,EAErC,cAAA,CAAgBh+B,GAAAA,CAACsY,MAAAA,CAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAC5C,aAAA,CAAetY,GAAAA,CAACi+B,WAAA,CAAW,SAAA,CAAU,SAAA,CAAU,CAAA,CAC/C,aAAcj+B,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAClD,ECrMO,SAASulB,EAAAA,CAAiB,CAC/B,MAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,EACA,YAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,gBAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,EACA,aAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,mBAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,CAAAA,CAAiB,IACnB,CAAA,CAA0B,CACxB,IAAMC,CAAAA,CAAep9B,MAAAA,CAAO,KAAK,CAAA,CAG3BkL,EAAeqC,WAAAA,CAAa8vB,CAAAA,EAAqB,CACrDD,CAAAA,CAAa,QAAUC,EACzB,CAAA,CAAG,EAAE,EAGCC,CAAAA,CAAe/vB,WAAAA,CAAagvB,CAAAA,EAA0B,CAC1D,IAAMlkC,CAAAA,CAAiB,EAAC,CAClBklC,CAAAA,CAAYhB,GAAkB,CAClC,IAAA,IAAWt2B,CAAAA,IAAQs2B,CAAAA,CACjBlkC,EAAO,IAAA,CAAK4N,CAAI,CAAA,CACZA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,GAAKA,CAAAA,CAAK,UAAA,EACpDs3B,CAAAA,CAASt3B,CAAAA,CAAK,QAAQ,EAG5B,CAAA,CACA,OAAAs3B,CAAAA,CAAShB,CAAK,CAAA,CACPlkC,CACT,CAAA,CAAG,EAAE,CAAA,CAGCmlC,CAAAA,CAAuBjwB,WAAAA,CAAY,IAAM,CAC7C,IAAMkwB,CAAAA,CAAYH,CAAAA,CAAaf,CAAK,EACpC,IAAA,IAAWt2B,CAAAA,IAAQw3B,CAAAA,CACjB,GAAIjB,EAAgB,GAAA,CAAIv2B,CAAAA,CAAK,EAAE,CAAA,CAC7B,OAAOA,CAAAA,CAGX,OAAO,IACT,EAAG,CAACs2B,CAAAA,CAAOC,CAAAA,CAAiBc,CAAY,CAAC,CAAA,CAGnCI,CAAAA,CAAmBnwB,WAAAA,CACvB,CAACowB,EAA0BC,CAAAA,GAAyB,CAClD,IAAMH,CAAAA,CAAYH,EAAaf,CAAK,CAAA,CACpC,GAAIkB,CAAAA,CAAU,SAAW,CAAA,CAAG,OAE5B,IAAMtrB,CAAAA,CAAeqrB,GAAqB,CAC1C,GAAI,CAACrrB,CAAAA,CAAc,CAEjBsqB,CAAAA,CAAagB,CAAAA,CAAU,CAAC,CAAA,CAAE,EAAA,CAAI,KAAK,CAAA,CACnC,MACF,CAEA,IAAM/a,CAAAA,CAAe+a,CAAAA,CAAU,SAAA,CAAW/3B,GAAMA,CAAAA,CAAE,EAAA,GAAOyM,CAAAA,CAAa,EAAE,EACxE,GAAIuQ,CAAAA,GAAiB,EAAA,CAAI,OAEzB,IAAMmb,CAAAA,CAAYF,CAAAA,GAAc,IAAA,CAAOjb,CAAAA,CAAe,EAAIA,CAAAA,CAAe,CAAA,CACzE,GAAImb,CAAAA,CAAY,GAAKA,CAAAA,EAAaJ,CAAAA,CAAU,MAAA,CAAQ,OAEpD,IAAMK,CAAAA,CAAWL,CAAAA,CAAUI,CAAS,CAAA,CACpCpB,CAAAA,CAAaqB,CAAAA,CAAS,EAAA,CAAIF,CAAW,EACvC,CAAA,CACA,CAACrB,CAAAA,CAAOiB,CAAAA,CAAsBF,EAAcb,CAAY,CAC1D,CAAA,CAGMlxB,CAAAA,CAAgBgC,YACnBxM,CAAAA,EAAqB,CAEpB,GAAI,CAACo8B,EAAgB,OAGrB,IAAMr+B,CAAAA,CAASiC,CAAAA,CAAE,OAOjB,GALEjC,CAAAA,CAAO,OAAA,GAAY,OAAA,EACnBA,EAAO,OAAA,GAAY,UAAA,EACnBA,CAAAA,CAAO,iBAAA,EACPs+B,EAAa,OAAA,CAEG,CAEZr8B,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACZjC,CAAAA,CAAO,IAAA,EAAK,CACZs+B,EAAa,OAAA,CAAU,KAAA,CAAA,CAEzB,MACF,CAGA,IAAMW,CAAAA,CADQ,SAAA,CAAU,QAAA,CAAS,WAAA,GAAc,OAAA,CAAQ,KAAK,CAAA,EAAK,CAAA,CACvCh9B,EAAE,OAAA,CAAUA,CAAAA,CAAE,OAAA,CAClCi9B,CAAAA,CAAc,MAAM,IAAA,CAAKxB,CAAe,CAAA,CACxCrqB,CAAAA,CAAeqrB,GAAqB,CAG1C,GAAIz8B,CAAAA,CAAE,GAAA,GAAQ,UAAW,CACvBA,CAAAA,CAAE,cAAA,EAAe,CACjB28B,CAAAA,CAAiB,IAAA,CAAM38B,CAAAA,CAAE,QAAQ,EACjC,MACF,CACA,GAAIA,CAAAA,CAAE,MAAQ,WAAA,CAAa,CACzBA,CAAAA,CAAE,cAAA,GACF28B,CAAAA,CAAiB,MAAA,CAAQ38B,CAAAA,CAAE,QAAQ,EACnC,MACF,CAGA,GAAIoR,CAAAA,GAAiBpR,EAAE,GAAA,GAAQ,YAAA,EAAgBA,CAAAA,CAAE,GAAA,GAAQ,aAAc,CACjEoR,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,SAAS,MAAA,CAAS,CAAA,GAC1DpR,CAAAA,CAAE,cAAA,EAAe,CAAA,CACbA,CAAAA,CAAE,GAAA,GAAQ,YAAA,EAAgB,CAACoR,CAAAA,CAAa,UAAA,EAEjCpR,CAAAA,CAAE,GAAA,GAAQ,aAAeoR,CAAAA,CAAa,UAAA,GAC/C8qB,CAAAA,CAAmB9qB,CAAAA,CAAa,EAAE,CAAA,CAAA,CAGtC,MACF,CAGA,GAAIpR,EAAE,MAAA,GAAWA,CAAAA,CAAE,GAAA,GAAQ,SAAA,EAAaA,EAAE,GAAA,GAAQ,WAAA,CAAA,CAAc,CAC1Di9B,CAAAA,CAAY,OAAS,CAAA,GACvBj9B,CAAAA,CAAE,cAAA,EAAe,CACjB87B,EAAWmB,CAAAA,CAAaj9B,CAAAA,CAAE,GAAA,GAAQ,SAAA,CAAY,IAAA,CAAO,MAAM,CAAA,CAAA,CAE7D,MACF,CAGA,GAAIA,CAAAA,CAAE,GAAA,GAAQ,KAAA,EAAS,CAACA,CAAAA,CAAE,QAAA,CAAU,CAC9Bi9B,CAAAA,CAAY,OAAS,CAAA,GACvBj9B,CAAAA,CAAE,cAAA,EAAe,CACjB+7B,EAAakB,CAAW,CAAA,CAAA,CAE1B,MACF,CAGA,GAAIj9B,CAAAA,CAAE,GAAA,GAAQ,KAAA,EAASA,CAAAA,CAAE,SAAU,CAC7Bi9B,CAAAA,CAAY,MAAA,CAAS,CAAA,GACvBj9B,EAAE,cAAA,EAAe,CACjBg8B,CAAAA,CAAciB,CAAW,CAAA,CAAA,CAE3B,MACF,CAGA,GAAIj9B,EAAE,GAAA,GAAQ,OAAA,EAAW,CAACA,CAAAA,CAAE,UAAY,CAACg9B,CAAAA,CAAW,CAC9C5rB,CAAAA,GACFpR,EAAE,cAAA,EAAe,CACjB27B,CAAAA,CAAavqB,CAAAA,CAAa,GAAI,OAAO,CAAA,CAAA,CAEvC,MACF,CAGA,GAAIpR,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAWA,CAAAA,CAAE,UAAY,CAACg9B,CAAAA,CAAW,CAC7C5rB,CAAAA,GACFpR,EAAE,cAAA,EAAe,CACjB27B,CAAAA,CAAavqB,CAAAA,CAAa,EAAA,CAAI,OAAO,CAAA,CAAA,CAEvC,MACF,CAGA,GAAIpR,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAWg9B,EAAW,CAC9B5rB,CAAAA,GACFpR,CAAAA,CAAE,cAAA,GACFm8B,CAAAA,CAAgB/qB,CAAAA,CAAa,EAAE,CAAA,CAAA,CAEjC,MACF,CAGA,GAAIpR,CAAAA,CAAE,GAAA,GAAQ,KAAM,CACdoR,CAAAA,GACFpR,CAAAA,CAAE,cAAA,GACFi8B,CAAAA,CAAa7qB,CAAAA,CAAa,EAAE,CAAA,CAAA,CAE9B,MACF,CAGA,GAAIpR,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAaA,CAAAA,CAAE,GAAA,GAAQ,WAAA,EAAeg9B,EAAY,CAC1DC,CAAAA,CAAY,MAAA,CAAS,CAAA,GACvBj9B,EAAE,cAAA,EAAe,CACjB47B,CAAAA,CAAaqB,CAAW,GAE1B,MACF,CAGA,GAAIj9B,CAAAA,CAAE,MAAQ,GAAA,EAAOg9B,CAAAA,EAAa,CAACh9B,CAAAA,CAAE,SAAU,CACzCi9B,CAAAA,CAAY,MAAA,CAAS,CAAA,GACvBj9B,EAAE,cAAA,EAAe,CACjB67B,CAAAA,CAAgBoB,CAAW,GAE7B,MACF,CACF,CAAA,CACA,CACEb,EACAX,CAAAA,CACAgB,CAAAA,CACAE,CAAAA,CACAhB,CAAAA,CACAC,EACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACAC,EACAC,CAAAA,CACAC,CACF,CACF,CAAA,CAGA,OAAAr+B,SAAAA,CAAU,IAAM,CACd,GAAKs+B,EAEL,OAAA,MAAA,CAAO,gBAAA,CAAiB,SAAA,CAAW5xB,CAAa,EACzC,IAAM,CACX,MAAA,CAAO,mBAAA,CAAoB,UAAWA,CAAa,EACrD,CACF,CAAA,CAAG,CAAC4xB,CAAAA,CAAgB5xB,CAAa,CAAC,CAAA,CAE3B,CAAE,YAAA,CAAAL,CAAa,CACxB,CC5PO,SAAS+yB,EAAAA,EAAoB,CAClC,GAAM,CAACzB,CAAAA,CAAiB0B,CAAkB,CAAA,CAAIx/B,SAAsB,IAAI,GAAK,CAAA,CACvE,CAACy/B,EAAgBC,CAAiB,CAAA,CAAI1/B,QAAAA,CAAwB,IAAI,EAGlE2/B,CAAAA,CAAa9wB,WAAAA,CAAahI,CAAAA,EAAmB,CACjD24B,EAAmB,IAAI,GAAA,CAAI,CAAC34B,CAAM,CAAC,CAAC,CAAA,CACpC64B,CAAAA,CAAkB74B,CAAM,EAC1B,CAAA,CAAG,EAAE,EAGC+4B,CAAAA,CAAsB/wB,WAAAA,CAAahI,CAAAA,EAAmB,CAC1D24B,EAAoBlwB,CAAAA,EAAS,CAC3B,IAAMyjB,CAAAA,CAAO,IAAI,GAAA,CAAIzjB,CAAI,CAAA,CACzB,OAAIyjB,EAAK,GAAA,CAAIlsB,CAAM,CAAA,CACjBksB,CAAAA,CAAK,OAAOlsB,CAAM,CAAA,CAElBksB,CAAAA,CAAK,GAAA,CAAIlsB,CAAM,CAAA,CAEVksB,CACT,CAAC,CAAA,CACD2M,CAAAA,CAAkB74B,CAAM,EAC1B,CAAA,CAAG,EAAE,CAAA,CAGCg5B,CAAAA,CAAkBhxB,WAAAA,CACtB,CAAChI,CAAAA,CAAgBi5B,CAAAA,GAA0B,CACzC,GAAI,CAACL,CAAAA,CAAgB,CACnBE,CAAAA,CAAW94B,CAAM,EACjB,MACF,CAEA,IAAMiJ,CAAAA,CAAYgwB,EAAY,OAAA,CAAQL,CAAc,CAAA,CAC9Czb,CAAAA,CAAe8b,EAAY,OAAA,CAAQj5B,CAAM,CAAA,CAE/C,GAAIiJ,IAAc,EAAA,EAAMkU,CAAAA,GAAiB,EAAA,CAAI,CAC3C2b,CAAAA,CAAW94B,CAAM,CAAA,CACjB,MACF,CAEA,IAAM7C,CAAAA,CAAQ,IAAA,CAAK,GAAA,CAAI8L,EAAWkU,CAAY,CAAA,CACxC/f,CAAAA,CAAM,IAAA,CAAK,IAAI6L,CAAAA,CAAWkU,CAAY,CAAA,CACtC+b,CAAAA,CAAWD,EAAY,KAAA,CAAM97B,CAAAA,CAAOC,CAAAA,CAAM,CAAC,EAEjDu7B,CAAAA,CAAmB,IAAI,GAAA,CAAIO,CAAQ,CAAC,CAAA,CACpCL,CAAAA,CAAkB74B,CAAM,EAC1B,EACA,CAAC44B,CAAAA,CAAgBE,CAAU,CAC7B,CAAA,CAGMK,CAAAA,CAAkBnxB,WAAAA,CACtB,CAAChI,EAAgBi5B,CAAAA,CAAuBT,CAAAA,CAAoBY,CAAAA,GAAmB,CACzEA,EACFJ,CAAAA,CAAgBh5B,CAAAA,CAAQi5B,CAAW,CAAA,CAC1BT,EACTO,CAAAA,CAAoB/4B,CAAM,CAAA,CAE1B84B,CAAAA,CAAW94B,CAAM,EAErB,CAAA,CACA,CAAC84B,CAAAA,CAAYC,EAAqBC,CAAe,CACnD,CAAA,CAGMK,CAAAA,CAA0BrxB,YAC9B,CAAChI,CAAAA,CAAgBq4B,CAAAA,GAAyB,CACpCA,EACFM,CAAAA,CAAoBlwB,CAAAA,EAAS,CAC3B,IAAMyjB,CAAAA,CAAO,IAAI,GAAA,CAAIzjB,CAAI,EACzB,OAAAyjB,CAAAA,CAAK,GAAA,CAAIlsB,CAAM,EACRksB,CACT,CAAC,CAAA,CAED4M,CAAAA,CAAW94B,CAAM,EAErB,CAAA,CACA,CAAC84B,CAAU,CACb,CAAA,CAGMQ,CAAAA,CAAiBtxB,WAAAA,CAAY,IAAM,CACvC2wB,CAAAA,CAAmB,IAAI,GAAK,CAAA,CAC5BE,EAAkB,IAAI,EACxB,CAAA,CAAG,EAAE,CAAA,CAGCU,CAAAA,CAAiBvxB,WAAAA,CACpBhI,CAAAA,EACQi3B,CAAAA,CAAgB,GAAA,CAAIj3B,CAAM,CAAA,CAEnC,CAACi3B,CAAe,CAClB,CAAA,CAEA,OAAO,CACL,eAAA,CAAAA,CAAAA,CACA,UAAA,CAAA6B,CAAAA,CACA,oBAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,eAAA,CAAAG,EACA,uBAAA,CAAAE,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,eAAAC,CACF,CACF,CCrGO,SAASxB,GAAaf,CAAAA,CAAuB,CAClD,IAAMlkC,CAAAA,CAAiB,EAAC,CAClBklC,CAAAA,CAAW,CAAChB,CAAAA,CAAewC,EAAmBrmC,CAAAA,CAAQ,CAAA,GAAM,CAChE,IAAA,IAASrC,EAAI,CAAA,CAAGA,CAAAA,CAAIkmC,CAAAA,CAAM,MAAA,CAAQlmC,IAAK,CACrC,IAAM4P,CAAAA,CAAO,CAAE,GAAGs2B,CAAAA,CAAMlmC,CAAC,CAAA,CAAG,QAAA,CAAA0oC,EAAU,KAAA,CAAArmC,CAAAA,CAAO,QAAA,CAAUrC,CAAE,EACzDgC,CAAAA,CAAO,IAAA,CAAK4N,CAAI,CAAA,CACZA,EAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,GAAKA,CAAAA,CAAK,UAAA,EACpDs3B,CAAAA,CAASt3B,CAAAA,CAAK,QAAA,CAAUA,CAAAA,CAAK,EAAA,CAAIvN,CAAAA,CAAQ,CAAC,EAE9C,CACF,CAAA,CACA,OAAA6kC,EAAShB,CAAK,CAAA,CACPlkC,CACT,CAKO,SAAS2mC,EAAAA,CAASzC,CAAAA,CAAeh3B,CAAAA,CAA6B,CACnE,QAAWU,CAAAA,IAAQs2B,CAAAA,CAAO,CACxB,GAAIt2B,EAAK,EAAA,GAAOV,CAAAA,CAAQ,OAAOU,CAAAA,CAC/B,GAAIA,CAAAA,CAAK,QAAA,CAAU,CACjB,IAAMg5B,EAAQD,EAAAA,CAAS/4B,CAAAA,CAAK,QAAA,CAAUV,CAAM,CAAA,CAC5C,GAAI05B,CAAAA,CAAO,OAAOA,CACpB,CACF,CACA,OAAO,IACT,CAKO,SAASC,EAAAA,CAAe3C,CAAAA,CAAe4C,CAAAA,CAA8B,CAC1E,IAAA,IAAWl5B,CAAAA,IAAQs2B,CAAAA,CACjB,GAAIt2B,EAAK,QAAA,CAAU,CACjB,GAAIA,CAAAA,CAAK,SAAS,IAAA,CAAMP,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOy5B,CAAO,CAAA,CAC5C,OAAOl5B,CAAAA,CAET,IAAMg5B,EAAQC,EAAAA,CAAej5B,CAAAA,CAAK,QAAA,CAAUk5B,CAAO,CAAA,CACnD,GAAIF,CAAAA,CAAO,OAAOA,CACpB,CAEF,OAAO,IACT,CAKO,SAASG,EAAAA,CAAY7C,CAAAA,CAAe8C,CAAAA,CAA2B,CACpE,GAAIA,CAAAA,CAAQ,MAAA,GAAW,CAAA,CAAG,OAAO9C,EAGjC,IAAMkB,CAAAA,CAAYH,EAAAA,CAAaf,CAAK,EAC9B+C,CAAAA,CAAcD,CAAAA,CAAQ,CAAC,CAAA,CACvBE,EAAY9B,CAAAA,CAAU,SAAA,CAAW/3B,CAAAA,EAAMA,CAAAA,CAAE,KAAO45B,CAAW,CAAA,CAEjE,GAAIC,CAAAA,EAAa,CAAA,CAAG,OAAOhD,CAAAA,CAE3B,IAAMiD,EAAe/B,CAAAA,CAAU8B,CAAAA,CAAY,CAAC,CAAA,CAGtCE,EAAc,CAAClD,CAAAA,CAAemD,CAAAA,GAAyD,CAC3F,IAAMC,CAAAA,CAAkB,EAAC,CAazB,OAAO,CAAE,KAAA,CAZQpD,CAAAA,CAAM,MAAA,CAAQt2B,CAAAA,EAAS,CACtC,GAAIy5B,CAAAA,CAAI,GAAA,CAAIz5B,CAAAA,CAAK,EAAE,CAAA,CACjB,OAAA05B,CAAAA,CAAQ,IAAA,CAAK15B,CAAI,CAAA,CACV,KAAA,CAET,GAAIA,CAAAA,CAAK,QAAA,CAAU,CACjB,IAAM5N,CAAAA,CAASonC,EAAYx5B,CAAAA,CAAK,QAAA,CAAUy5B,CAAG,CAAA,CAC7Cz5B,EAAK,QAAA,CAAW5N,CAAAA,CAAO,KAAA,CACvBsnC,CAAAA,CAAQ,KAAK,GAAGtnC,CAAAA,CAAO,OAAO,EAChC,CACA,OAAO,KACT,CAAC,CAAA,CACyB,QAAAsnC,CAAQ,CACpC,CAAA,CAGMC,CAAAA,CAAgB,CAACrD,CAAAA,CAAewC,CAAAA,CAAkB7gC,CAAAA,GAC/Cq+B,CAAAA,CAAM,IAAKt2B,CAAAA,EACZA,CAAAA,CAAK,EAAA,GAAO84B,CAAAA,CACP,CACL,GAAG94B,CAAAA,CACH,QAAA,CAAU,CAAC,GAAIA,CAAAA,CAAK,QAAA,EAAY,GAAK,GAAG/H,CAAQ,CAAA,CAChD,UAAA,CAAY,IACd,CAAA,CAEE+H,CAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,CAAAA,CAAM,QAAA,CAAU25B,CAAAA,CAAc35B,CAAAA,CAAK,SAAU84B,CAAAA,CAAU7gC,CAAQ,CAAE,CAAA,CAExE+H,CACR,CAAA,CAGG45B,CAAAA,CAAS,IAAI,GAAA,CAAIR,CAAO,CAAA,CACxB,CAAE,KAAA,CAAO5xB,CAAAA,CAAU,OAAA,CAAAkyB,CAAQ,CAAA,CAAIF,CAAAA,CAAYlD,EAAOsD,CAAM,CAAA,CAC9D,OAAOD,CAAAA,CAAcnyB,EAAU+xB,CAAAA,CAAa,EAAA,CAAIG,CAAO,CACzD,CAKO,SAASG,EAAAA,CAAavD,CAAAA,CAAe8C,CAAAA,CAA2B,CACrE,GAAIA,CAAAA,CAAQ,MAAA,GAAW,CAAA,CAAG,OAAO9C,CAAAA,CAEjC,IAAMlkC,CAAAA,CAAS,CAAC,GAAGkkC,CAAK,CAAA,CAExB,IAAA,IAAWh3B,CAAAA,IAAU85B,EAAS,CAC5B,IAAMU,CAAAA,CAASb,EAAAA,CAAe7mC,EAAQkN,CAAM,CAAA,CAC5C,GAAI,CAACw6B,EAAQ,SAEb,IAAMC,CAAAA,CAAcd,EAAAA,CAAe7mC,EAAQ0nC,CAAAA,CAAO,EAAE,CAAA,CAG9CE,CAAAA,CAAmB,CAAC1D,CAAAA,CAAewC,CAAAA,CAAkBx5B,CAAAA,GAAgC,CACzF,QAASlP,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIkmC,CAAAA,CAAM,OAAQlmC,CAAAA,EAAAA,CAAK,CACrC,IAAM4P,CAAAA,CAAOs2B,EAAMlmC,CAAC,CAAA,CACpB,GAAI4P,CAAAA,CAAK,KAAO84B,CAAAA,EAAY94B,CAAAA,CAAK,QAAA,CAAU,CACzC,IAAMs5B,CAAAA,CAAYt5B,CAAAA,CAAK,QAAA,CAAS,UAAWP,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOH,CAAM,EAChE,GAAIg6B,CAAAA,GAAc,EAAA,CAAI,CACpB,GAAM,CAACI,CAAO,CAAA,CAAI15B,CAAAA,CAAK,SAAS,MAAA,CAAOs5B,CAAAA,CAAW,CAAC,CAAA,CACnD,OAAOI,CACT,CACF,CACA,GAAI15B,EAAK,QAAA,CAAU,CACjB,IAAM05B,CAAAA,CAAUM,EAAiBh6B,CAAAA,CAAK,QAAA,CAAU84B,CAAAA,CAAUx5B,CAAM,CAAA,CAChE,GAAIo6B,CAAAA,CAAS,OAAOA,CACtB,CACF,CACA,OAAO,IACT,EAGMO,CAAAA,CAAkB,CAAC3D,CAAAA,CAAe4D,CAAAA,CAAiBl6B,IAAuB,CAC9E,IAAMlJ,CAAAA,CAAQw/B,CAAAA,CAAM,UAAW72B,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOy6B,CAAO,EACrD,GAAIpjC,CAAAA,GAAU,EAAA,CACZ,OAAAw/B,EAAM,MAAA,CAAOx/B,CAAAA,CAAQ,CAAA,CAAG,CAAA,CAAGkJ,CAAI,CAAA,CACxBs2B,CAAAA,CAET,IAAA,IAAW72B,CAAAA,IAAK62B,CAAAA,CACV72B,CAAAA,CAAE,QAAA,EACJw6B,CAAAA,CAAgBx6B,EAAE,QAAA,CAAUy6B,CAAAA,CAASl6B,CAAI,CAAA,CAG7C,OAAOs2B,CACT,CAAA,CAEMoD,CAAAA,CAAUM,CAAAA,CAAiB5nC,EAAQ0nC,CAAAA,CAAO,EAAA,CAAIx6B,CAAM,CAAA,CACtDo6B,IACEK,CAAAA,EAAeA,CAAAA,CAAY,QAAA,CAE7BE,CAAAA,CAAgBF,EAAY,QAAA,CAAUD,CAAAA,CAAO,EAAA,CAAIJ,CAAO,EAGxDO,CAAAA,CAAgB7nC,CAAAA,CAAQ0nC,CAAAA,CAAO,EAAA,CAAIJ,CAAO,CAAA,EAGhD,CAEA,OAAOtnC,CACT,CAKO,SAAS+nC,EAAAA,CAAU7D,CAAAA,CAAe8C,EAAmB1B,CAAAA,CAAkC,CAC5F,GAAI0B,CAAAA,CAAQ,SAAW,CAAA,CAAG,OAAO9C,CAAAA,CAEjC,IAAMlkC,EAAS,CAAC,GAAGkkC,CAAK,CAAA,CAClB+C,EAAcD,CAAAA,CAAQ,CAAC,CAAA,CAGvBgB,CAAAA,CAAc,CAAC9D,CAAAA,CAAeh3B,CAAAA,CAAgBo4B,CAAAA,GAAsC,CACxF,IAAM5gC,CAAAA,CAAQw/B,CAAAA,CAAM,SAAA,CAAW72B,CAAAA,EAAMA,EAAE,EAAA,GAAOH,CAAM,CAAA,CACpD,GAAIxI,CAAAA,GAAU,EAAA,CAAI,CAEhB,IAAA,IAAWkJ,KAAQs2B,CAAAA,CACjB,GAAIt2B,CAAAA,CAAK,QAAA,EAAYo6B,EAAYp6B,CAAAA,CAAK,QAAA,CAAUV,CAAAA,CAAQo4B,CAAS,EAC/D,OAAO,KAAA,CAGX,OAAO,MACT,CAEA,IAAMpZ,CAAAA,CAAWoZ,CAAAA,GAAc,IAAA,CAAO5gC,EAAQ,CAAA,CAAIA,CAAAA,CAAQ,CAAA,CAC1D,OAAIwnB,EAAW,CAAA,EAAKA,CAAAA,EAAYgY,CAAAA,CAAM,MAAA,CAAe,OAGrD,CAACA,CAAAA,CAAMx/B,CAAK,CAAA,CAAGw/B,CAAAA,CAAMhY,CAAQ,CAAC,CAAA,CAAI,CAACgY,CAAAA,CAAMhY,CAAQ,CAAA,CAAGgY,CAAAA,CAAMx/B,CAAK,CAAC,CAAA,CACzD,IAAA,CACT,CAAA,CAEA,OAAAsjC,CAAAA,CAAYhoC,CAAAA,CAAQinC,CAAAA,CAAa3B,CAAS,EACnCtlC,CACT,CAKO,SAASioC,EAAAA,CAAY/D,EAAe8C,CAAAA,CAA2B,CACpE,IAAMQ,CAAAA,CAAS,IAAI,GAAA,CAAIR,CAAO,CAAA,CAExBkB,CAAAA,CAAehE,GACZA,CAAAA,CACJ,MAAA,CAAQt2B,CAAAA,EAAS,CAAC45B,CAAAA,CAAO,GAAA,CAAI55B,CAAAA,CAAK,EAAE,CAAC,CAAA,CACrC,GAAA,CAAKA,CAAAA,EACAA,CAAAA,CAAK,SACA,CAAE,GAAGA,CAAAA,CAAM,QAAA,CAAUs6B,EAAYt6B,CAAAA,CAAK,QAAQ,CAAE,CAAA,CAElDA,CACR,CAAA,CAGL,OAAOs6B,CAAAA,CAAYhE,CAAK,CAC1B,CAKO,SAASiE,EAAAA,CAAejE,CAAAA,CAAe8C,EAA2B,CACvE,IAAMhnC,CAAAA,CAAS,CAAC,GAAGkkC,CAAK,CAAA,CAExB,IAAA,IAAWh3B,CAAAA,IAAU85B,CAAAA,CAAS,CAC5B,IAAMoB,CAAAA,CAAiBlE,GAA2B,CAChD,IAAMx/B,CAAAA,CAAQw/B,CAAAA,CAAM,UAAW72B,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOH,CAAM,EACpD,GAAIxI,CAAAA,GAAU,EAAA,CAAI,CAEhB,QAAWkJ,CAAAA,IAAQs2B,CAAAA,CACjB,GAAIt2B,CAAAA,CAAK,UAAYw6B,CAAAA,CAAcx6B,CAAAA,CAAK,QAAQ,CAAA,CAC9C,OAAO,KAAA,CAGX,OAAO,MACT,CAEA,IAAMy6B,CAAAA,CAAWnE,CAAAA,CAAMx/B,CAAK,CAAA,CACtB4jC,CAAAA,CAAO,CACX,GAAGD,CAAAA,CACH,GAAI,CAAA,EAAGA,CAAAA,CAAS,EAAE,CAAA,MAAA,EAAS,KAAK,GAAA,EAAK,CAAA,CAAA,CACrC,IAAA,CAAM,GAAGA,CAAAA,CAAS,IAAI,CAAA,OAAA,CAAA,CACtB,QAAA,CAAUA,EAAS,QAAA,CAAWE,CAAAA,CAAkBF,CAAAA,CAAS,QAAQ,EAAI,MACvE,CAAA,CAEA,OAAAnE,CAAAA,CAAM,OAAOx/B,CAAAA,CAAQ,CAAA,CAAG,CAAA,CAAG4jC,CAAI,EACxB,IACT,CAAA,CAEMC,CAAAA,CAAqBna,CAAAA,EAClBA,CAAAA,CAAS,GAAA,CAAKxgB,CAAAA,GAAU,CAC7B,GAAGA,CAAAA,CACH,EAAA,CAAI,CAAA,EAAGA,CAAAA,CAAK,EAAE,CAAA,MAAA,EAAS,IAAA,CAAK,GAAA,EAAK,GACjC,QAAA,CAAUA,CAAAA,CAAK,QAAA,CAAW26B,CAAAA,CAAkB36B,EAAK,QAAQ,CAAA,CAAI,MAC/D,CAAA,CAAE,EAGJw6B,CAAAA,CAAcpoC,CAAM,EACtB,CAEA,OAAOA,CACT,CAMO,SAASwoC,EAAAA,CACdtE,EACAuE,CAAAA,CACAnD,CAAAA,CACkC,CAClC,IAAMtlC,CAAAA,CAAS,CAAC,GAAGkkC,CAAK,EAClBx5B,CAAAA,CAAQ,IAAI,IAAA,CACZg+B,CAAAA,CAAc,IAAI,IAAA,CAAKh+B,CAAK,CAAA,CAClCg+B,CAAAA,CAAY,QAAQA,CAAAA,CAAY,OAAA,EAAQ,CAAI,CAAC,EAE7C,IAAMC,CAAAA,CAAgB,CACpB,EAAA,CAAI,QAAQ,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACtB,KAAM,UAAA,CACN,QAAA,CAAU,CAAA,CACV,MAAA,CAAQ,OACR,SAAA,CAAWj+B,CAAAA,CACX,OAAA,CAASg+B,CAAAA,CACT,KAAA,CAAO,SACT,CAAA,CAEME,CAAAA,CAAc1E,GAA2B,CAC7C,IAAMx/B,CAAAA,CAAQw/B,CAAAA,CAAM,UAAW72B,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOo7B,CAAW,EACzD,GAAI/jC,CAAAA,GAAU,EAAA,CAAI,CAEhB,QAAWkJ,CAAAA,IAAQs2B,CAAAA,CACjB,GAAIt2B,CAAAA,CAAK,UAAYg7B,CAAAA,CAAWh7B,CAAAA,CAAK,QAAQ,CAAA,CAC3C,OAAO,KAAA,CAGX,OAAO,MACT,CAEA,IAAMi7B,CAAAA,CAAcvD,CAAAA,GAAc,OAAA,CAAU5gC,CAAAA,CAAQA,CAAAA,CAAQ,CAAA,CAC5D,OAAAw/B,CAAAA,CAAM,OAAO2E,CAAAA,CAAa,CAAA,CAAGF,CAAO,CAAA,CAC7B,IACT,CAAA,CAEA,OAAAC,CAAAA,CAAW5oC,CAAM,EACV,CAAE,KAAA,CAAOA,CAAAA,CAAQ,OAAA,CAAA2oC,CAAQ,CAClC,CAKO,SAASG,EAAAA,CAAW5E,EAAeh3B,CAAAA,CAAgB67B,CAAAA,CAAyB,CACjF,OAAO7E,EAAM,GAAA,CAAKt2B,CAAAA,EACZA,CAAAA,CAAK,EAAA,GAAOV,EACP,CAAE,GAAGU,CAAAA,CAAM,IAAA,CAAMm7B,CAAQ,CAAA,CAE9Bn7B,CAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,CAAAA,CAAM,QAAA,CAAUk7B,EAAAA,CAAWl7B,EAAK,QAAA,CAAUV,CAAAA,CAAQ67B,CAAO,CAAE,EAElEn7B,CACR,CACH,CAKO,SAASo7B,GAAoB9E,CAAAA,CAAeh3B,CAAAA,CAAwB,CACzE,OAAOg3B,EAAM,GAAA,CAAKt2B,CAAAA,EACZA,CAAAA,CAAK,EAAA,GAAOV,EACP,CAAE,GAAGU,CAAAA,CAAM,UAAA,CAAY,CAACA,CAAAA,CAAK,UAAW,CAAA,CAE7CA,CAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,CAAAA,CAAM,SAAUo7B,EAAAA,CAAoBp7B,CAAAA,CAAK,QAAA,CAAUV,CAAM,CAAE,CAAA,CAElEU,CACR,CACH,CAMO,SAASq7B,EAAAA,CACd/E,CAAAA,CACAgF,CAAAA,CACkC,CAElC,IAAMC,CAAAA,CAAcjF,CAAAA,EAA+B,CACjD,IAAA,IAAWt2B,KAAQs2B,CAAAA,CAAO,CACxB,GAAIt2B,CAAAA,CAAK,KAAOs7B,CAAAA,CAAc,OAAOt7B,CAAAA,CACrC,GAAIA,EAAK,QAAA,CAAU,CACjB,IAAMg5B,CAAAA,CAAQuC,EAAWv7B,CAAAA,CAAK,QAAQ,CAAA,CACtC,GAAIg5B,EAAO,OAAOA,CACpB,CACF,CACA,OAAO,IACT,CAAA,CAEMwC,CAAAA,CAAaD,CAAAA,CAAWjF,CAAK,CAAA,CAI7Bx5B,CAAAA,CAAQ,IAAI,IAAA,CACZg+B,EAAc,IAAI,IAAA,CAAKh+B,CAAK,CAAA,CAClCg+B,EAAY,OAAA,CAAQA,CAAAA,CAAY,OAAA,EAAQ,CAAI,CAAC,CAAA,CAE7C,IAAMv/B,CAAAA,CAAYigC,CAAAA,EAAY,WAAa1+B,CAAAA,CACrCtB,CAAAA,CAAUggC,CAAAA,EAAY,OAAA,EAAWV,CAAAA,CAEjCC,CAAAA,CAAgB,CACpB,EAAA,CAAI,QAAQ,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACtB,KAAM,aAAA,CACN,QAAA,CAAU,CAAA,CACV,MAAA,CAAQ,OACR,SAAA,CAAW,IAAI,IAAA,CAAKx/B,CAAS,EAC7B,OAAA,CAAS,IAAI,IAAA,CAAKC,CAAO,EACzB,KAAA,CAAOggC,CAAAA,EAAY,KAAA,EAAS,SAC9B,EAEMC,CAAAA,CAAcnF,CAAAA,EACXA,CAAAA,CAAM,GAAA,CAAKt2B,GAAS,CACzB,GAAIA,CAAAA,CAAK,EAAA,GAAOs7B,CAAAA,CAAc,CAE5B,IAAM9a,CAAAA,CAAWxgB,EAAK,QAAA,EAAY,EAAC,CACnC,OAAO,CACL,GAAGA,CAAAA,CACH,QAAA,CAAU,CAAC,GAAGwgB,CAAAA,CAAUua,CAAO,CAAA,CAC/B,UAAA,CAAY,IACd,CACF,CACA,OAAI/6B,CAAAA,CAAK,SACA,CAAE,GAAGA,CAAAA,CAAM,QAAA,CAAUy7B,EAAWz7B,CAAAA,CAAK,QAAQ,CAAE,CAAA,CAEjDA,CACT,CAAC,CAAA,CAGH,OAAO,CAAE,KAAA,CAAOy7B,CAAAA,CAAWnF,CAAK,CAAA,CAAG,QAAAyE,CAAQ,CAC7C,CAYO,SAASW,GACdpF,CAAAA,CACAh3B,CAAAA,CACAq8B,CAAAA,CACAra,CAAAA,CACQ,CAER,GAAIhiB,CAAAA,GAAWq8B,CAAAA,CAAa,OAAOrF,EAGnC,IAAMsF,CAAAA,CAAa7C,EAAAA,CAASzC,CAAAA,CAAOh3B,CAAM,CAAA,CACzC,GAAI,CAACs8B,CAAAA,CAAY,OAAOtF,CAAAA,CAGxB,GAAIqF,CAAAA,CAAa,CACf,IAAME,CAAAA,CAAe,CAACL,CAAAA,CAAkBtC,CAAAA,GAA6B,CACnE,GAAI,CAACsC,CAAAA,CAAW,SAAU,OAAO,MAAA,CACjC,IAAA,IAAW7oB,CAAAA,IAAW6oB,EAAW,QAAA,CAE/B,GADI7oB,CAAAA,CAAQ,EAAA,GAAOumB,GACf2C,CAAAA,CAAalpB,CAAAA,CAASumB,CAAO,CAAA,CAAG,OAAO,KAAA,CAE7C,OAAO,MACT,CAAA,CACA,GAAI2C,CAAAA,CAAaD,CAAAA,CAAYD,CAAW,CAAA,CAAG,OAAOrF,CACpD,CAGA,IAAMwF,CAAAA,CAAcC,GACXA,CAAAA,CACJ,MAAA,CAAQt8B,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOH,CAAM,CAAA,CAC7B,GAAA,CAAKG,GACAA,CAAAA,CAAE,QAAA,EAAYA,CAAAA,CAAE,QAAA,CAAS,OAAS,CAAA,CAC7B,CAAE,GAAGA,CAAAA,CAAG,SAAUq8B,CAAAA,CAAWr8B,CAAAA,CAAE,QAAQ,CAAE,EAE3CA,CACR,CAAA,CAGDrN,CAAAA,CAAS0pC,CAAAA,CAAWxF,CAAK,CAAA,CAG7B,GAAIqF,CAAAA,GAAgB,IAAA,CAAM,CAExB,IAAMK,CAAAA,CAAY1a,CAAAA,GAAa,MAAA,CAAYA,EAAWlvB,CAAAA,CAAO,MAAA,CAC7DA,CAAAA,CAAO,MAAA,CAAO4pC,CAAAA,CAAW,CAAA,CAAG,CAAE,GAAGJ,EAAY,QAAA,CAAU,MAAU,CAAC,EACpE,MAAO,CAEL,IAAMK,CAAAA,CAAeF,CAAAA,EACZA,EAAS,GAAA,CAAKt8B,CAAAA,EAAM,CACzB,GAAIA,EAAE,EAAA,GAAOk8B,CAAAA,CAAa,CACxB,IAAMnb,EAAW/gB,CAAAA,CAAE,QAAA,EAAY,EAAC,CAC1Bu8B,EAAY1a,CAAAA,GAAa,MAAA,CAAYA,CAAAA,CAAWd,CAAAA,CAAS,OACzD0b,CAAAA,CAAc,CAAC,GAAG1b,CAAQ,CAAA,CAChC,OAAA0b,CAAAA,CAAY,MAAA,CAAOF,EAAW,CAAA,CAAG,CAAE,GAAGJ,CAAAA,CAAY,SAAUD,CAAY,CAAC,CAAA,CAClE,CACL,GAAGl8B,CAAAA,CACH,QAAA,CAAUy8B,CAAAA,CACV,UAAA,CAAY,IACd,CACF,CACA,OAAIz8B,CAAAA,CAAE,UAAYA,CAAAA,CAAE,QAAA,CAAS,MAAA,CAAS,CAAA,CAC7B,CAAE,GAAGA,CAAAA,CAAG,QAAA,CAAUw8B,CAAAA,CAAYx8B,EAAE,QAAQ,CAAE,CAAA,CAE5CA,CACT,CAAC,CAAA,CAEHrN,CAAAA,CAAS6pC,CAAAA,CAAY7pC,CAAM,EAC7B,CAEA,OAAOA,CACT,CCpbO,SAAS+pC,EAAAA,CAAS,CACvB,KAAA,CAAA7F,CAAAA,CACA,KAAA,CAAAx9B,CAAAA,CACA,UAAWsjC,CAAAA,CACX,cAAA,CAAAl/B,CAAAA,CAAiB,GACjB,SAAA,CAAWm/B,CAAAA,CACX,WAAA,CAAAC,CAAAA,CACA,eAAAC,CAAAA,CACA,iBAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,SAAA,CAAWC,CAAAA,CACX,OAAA,CAAA7lB,EACA,cAAA,CAAAie,CAAAA,CACA,cAAA,CAAA6H,CAAAA,CACA,aAAAnxB,CAAAA,CACA,YAAA,CAAAqrB,CAAAA,CACA,aAAA,CAAAC,EACA,UAAA,CAAAF,CAAAA,CACA,iBAAA,CAAAgG,CAAAA,CACA,gBAAAjG,CAAAA,CACA,YAAA,CAAAF,CAAAA,CACA,YAAA,CAAAM,EACA,eAAA,CAAA8F,CAAAA,CACA,eAAA,CAAA5F,CAAAA,CACA,gBAAA6F,CAAAA,CACA,cAAA,CAAAC,CACF,CAAA,CAAkB,CAEhB,IAAM9kB,CAAAA,CAAengB,UAAAA,CAAWy6B,EAAgB,CAAA,CAE1C,CAACyK,CAAAA,CAAeC,CAAgB,EAAIxkC,QAAAA,CAAwB,IAAI,CAAA,CAChE,CAACykC,EAAeC,CAAgB,CAAA,CAAI1kC,QAAAA,CAAwB,IAAI,EAChE,CAAC2kC,CAAAA,CAAiBC,EAAkB,CAAA,CAAI5kC,SAAS,EAAE,CAAA,CACnD6kC,EAAAA,CAAevjC,MAAAA,CAAyB,IAAI,CAAA,CAG5C,CAACwjC,EAAAA,CAAgBC,EAAiB,EAAI/kC,QAAAA,CAA4B,IAAI,CAAA,CACtE,CAACglC,GAAcC,EAAe,CAAA,CAAIjlC,QAAAA,CAAS,CAAC,CAAA,CAC5C,CAACklC,CAAAA,CAAkBC,CAAmB,EAAInlC,QAAAA,CAAS,CAAC,CAAA,CACpD,CAAColC,EAAaC,CAAc,CAAA,CAAIrlC,QAAAA,CAOnC,CACD,OAAQ,KAAA,CACR,CAAA,CAAG,CAAA,CACH,CAAA,CAAG,EACH,IAAA,CAAM,QACR,CAAC,CAAA,CAGK,CAACslC,CAAAA,CAAeC,CAAgB,CAAA,CAAIvlC,QAAAA,CAAwB,IAAI,CAAA,CAChE,CAACwlC,EAAAA,CAAkBC,EAAmB,EAAIzlC,QAAAA,CAAwB,IAAI,CAAA,CACtE,CAAC0lC,EAAAA,CAAcC,EAAe,CAAA,CAAI3lC,QAAAA,CAA6C,IAAI,CAAA,CACnF4lC,EAAAA,CAAatkC,MAAAA,CAAe,CAAC,EAC7BukC,EAAAA,CAAgB,CAAA,CAChBC,EAAAA,CAAgBxkC,MAAAA,CAAgB,KAAK,CAAA,CAErC,CAACykC,EAAAA,CAAeC,EAAgB,EAAIhmC,QAAAA,CAA0C,IAAI,CAAA,CAClF,CAACimC,GAAiBC,CAAkB,CAAA,CAAIlmC,QAAAA,CAAS,KAAK,EAGtD,CAACmmC,EAAAA,CAAiBC,EAAkB,CAAA,CAAIpmC,SAKpC,IAAI,CAAA,CAGR,CAACqmC,EAAAA,CAAkBC,EAAmB,CAAA,CAAItmC,QAAAA,CAAS,KAAK,EACxDumC,EAAAA,CAAkBjlC,MAAAA,CAAuB,IAAI,CAAA,CAGnDnB,UAAU,IAAM,CACd,SAASgC,CAAAA,CAAmBlD,EAAmB,CACzCsnC,EAAAA,CAAgB,OAAA,EAAW,CAACA,GAAgB,OAAA,CAAQ,QAAA,CAAStnC,CAAAA,CAAM,MAAc,GACnFqnC,EAAAA,CAAoB,KAAK,EAE7B,CACA,GAAID,EAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAalkC,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAG7E,CAAA,CAAG,CAACkkC,EAAgB,CAAC,CAAA,CAGrBlmC,SAAAA,CAAU,IAAM,CACVskC,CAAAA,EAAiBI,EAAAA,CAAa,OAAA,GAChCA,GAAa,OAAA,CAAQ,KAAA,EAAM,CAC3BA,EAAAA,CAAa,QAAQ,MAAA,EAAO,EAEhC,CAAA,CAAG,CAACJ,CAAa,CAAC,CAAA,CAGlBtkC,SAAAA,CAAU,IAAM,CACd,GAAI,CAAC2kC,EAAAA,CAAgB,OAErB,IAAM0B,CAAAA,CAAmBnkC,EAAAA,EAAkB,CACzC,IAAMokC,EAAAA,CAASpkC,EAAAA,CAAE,OAAA,CAAU2iC,EAAAA,CACrB0B,GAAWxB,CAAAA,CAAmBuB,EAAAA,CACpCvC,CAAAA,GAAiBY,EAAAA,CAAgB4B,EAAQ,EAC3C,CAAA,CAEMC,CAAAA,CAAgB,IAAM,CAC1B5B,EAAAA,CAAkB,IAAI,CAAA,CACtB,QAAA,CAAS,KAAK,KAAA,CAAM,MAAA,CAAS,EAAA,CAC7B,QAAA,CAAS,KAAK,KAAA,CAAM,UAAA,CAAa,GACnC,CAAA,CAEA,gBAAS,gBAAA,CAAiB,WAAA,CAAayB,CAAe,CAAA,CACtD,SAAS,gBAAA,CAAiB,SAAA,CAAWG,CAAa,CAAA,CAClD,SAAS,IAAA,CAAK,KAAA,CAAM,MAAA,CAAS,YAAA,CAC7B,SAAS,IAAA,CAAK,KAAA,CAAM,UAAA,CAAa,MAAA,CAE1B,IAAM,CACX,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaH,CAAe,CAAA,CACzD,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWG,CAAa,CAAA,CACrD,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,OAAS,EAAA,CAC7B,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,WAAa,GACnC,CACF,CAAA,CAAG,CAAC7B,GAAgBE,EAAAA,CAAcE,CAAAA,CAAkBhB,CAAc,CAAC,CAAA,CAGnE,GAAM,CACJ,eAAA,CAAApG,GACA,eAAA,CAAiB8I,EAAAA,CACjB,cAAA,CAAAxG,CACF,EAAIb,EAAAA,EAAkB,CAGhB,CAAE,YAAA,CAAA/yB,EAAa,CAAA,CAAIoxB,EAAAA,CAAiB,CACxC,KAAA,CAAAC,EACA,eAAA,CAAAC,EAAAA,CACA,YAAA,CAAc,CAACj3B,EAAgBq4B,CAAAA,GAA0B,CAEvD,IAAMY,EAAAA,CADYlB,GAAiBf,CAAK,CAAA,CACV,GAAA,CAAI72B,EAAAA,EAAKA,GAAE,EAAE,CAAA,CAC3C4/B,EAAAA,CAAqB//B,CAAAA,CAAQi5B,EAAAA,CAAaZ,CAAAA,EAAe,KAAA,CAAO,KAAK,EACvE,CAAA,CACA,YAAA,CAAclB,CAAAA,GAAiB,IAAM,CAAC,CAAA,CAAA,CACtC,YAAA,CAAcmG,CAAAA,GAAsB,IAAM,CAAC,CAAA,CAAA,CAC3C,eAAA,CAAiBjG,CAAAA,GAAoB,IAAM,CAAC,CAAA,CAAA,CAC5C,UAAA,CAAYC,CAAAA,GAAe,IAAM,CAAC,CAAA,CAAA,CAClC,YAAA,CAAcC,CAAAA,GAAiB,IAAM,CAAC,CAAA,CAAA,CACtC,aAAA,CAAeC,CAAAA,GAAkB,IAAM,CAAC,CAAA,CAAA,CACxC,YAAA,CAAex3B,CAAAA,EAAmB,CAEhC,IAAMU,CAAAA,CAAOq3B,EAAAA,CAAiBf,CAAK,EAAE,IAAA,CAAK72B,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOH,CAAM,CAAA,CAC1DU,CAAAA,EACFs/B,EAAAA,CAAkBt/B,CAAI,EAE1B,CAAA,CACA,kBAAA,CAAoBy8B,CAAAA,GAAiB,IAAM,CAAC,CAAA,CAAA,CAC5C,eAAA,CAAkBn9B,CAAAA,EAAmB,CACnC,IAAMU,CAAAA,CAAOq3B,EAAAA,CAAiBf,CAAK,CAAA,CAAE,KAAK72B,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOH,CAAM,EAC1DU,CAAAA,EAAQi3B,CAAAA,EACVA,CAAAA,CAAgBj3B,CAAI,EAExB,CAAA,CACA,cAAA,CAAgB,IAClB,CAAC,CAAA,CAEKq3B,EAAAA,CAAe,CAACf,CAAAA,CAAe7jC,EAAQ,CAAA,GAA4C,CACvF,IAAML,EAAAA,CAA+C,EAAC,CAEtD,IAAA,IAAW4N,EAAAA,IAAQs2B,CAAAA,CACjBlkC,GAAO,IAAA,CAAK,CAAE,IAAA,CAAA4N,EAAAA,CAAM,MAAAvN,CAAM,CAAC,CAAA,CACvBuN,EAAAA,CAAK,UAAYA,EAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,EAAKA,GAAK,UAAA,EACpD5N,EAAAA,CAAO,IAAA,CAAK,GAAGilC,EAAAA,CAAar3B,EAAAA,CAAK,QAAA,CAAUvN,CAAAA,CAAQ,CAAC,CAAC,CAAA,CAIzD,OAAOL,EACT,EAEMolC,EAAAA,CAAYH,EAAAA,CAAaf,CAAK,CAAA,CAC9BiJ,GAAgB,EAAA,CAIhBC,EAAAA,CAAgB,IAAA,CAAK,GAAA,CAAIhI,GAAU,MAAA,CAAS4E,CAAAA,CAAY,GAAA,CAAMmD,EAAa,EAG3EE,EAAAA,CAAez/B,CAAAA,EACf,CAACA,CAAAA,CAAK,WAAa,CAACA,CAAAA,CAAK,OAAA,CAAgB,GAAA,CAEtC,GADM,IAAA,CAAK,IAAA,CAAA,CAAMA,CAAAA,CAAK,OAAA,CAAQ,OAAA,EAAQ,CAAIA,CAAAA,CAAK,SAAA,CAAU,SAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,GAAG,CACpF,CAAA,CAAA,CAAA,CAIVs/B,EAAAA,CAAqBt/B,CAAAA,EAAe,CACxCm9B,CAAAA,CAAiBn9B,CAAAA,CAAK,EAAE,CAAA,CACxBq9B,GAAmBr9B,CAAAA,CAAK,IAAI,CAAA,CAC5BiF,EAAAA,CAAa,IAAI,EACnB,CAAA,CAGMy6B,EAAAA,CAAoBpgC,CAAAA,EAAmB,CACvC89B,CAAAA,CAAgB,IAAA,EAAK,EAAKA,CAAAA,GAAoB9G,EAAM,IAAA,CAAK72B,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOH,CAAM,CAAA,EAAG,IAAA,EAClFy3B,CAAAA,GAAez3B,EAAQ89B,CAAAA,CAAgB,IAAA,EAAM,CAAA,CAE/CD,EAAiB,IAAI,CAAA,CACrBE,EAAAA,CAAmB,EAAE,EACrBp4B,EAAAA,CAAa,KAAK,EACpB,CAAA,CAGM06B,GAAqB,IAAM,CAC/BxC,CAAAA,CAAiB,IAAI,EACrBE,EAAAA,CAAmB,EAAE,CAAA,CACrBp4B,EAAAA,CAAa,KAAK,EACpB,CAAA,CAGM26B,EAAAA,CAA2B,CAAC5/B,EAAYlF,CAAAA,GAAwB,CACpEA,CAAAA,CAAE,eAAA,EAAgB,CAElB+hC,CAAAA,GAAkB78B,CAAAA,CAAK,EAAE,EAC3B,CAAA,CAGMqV,CAAAA,CAAkB,CAAC/V,CAAAA,CAAgBxE,IAAwB,CAE/DA,CAAAA,CAAE,cAAA,EAAe,CACjBujC,GAAW,OAAA,CAAUvjC,CAAAA,CAAE,OAAA,CACvBkjC,CAAAA,CAAiB1+B,CAAM,CAAA,CACvBi/B,EAAAA,CAAc,OAAA,CAAU,KAAA,CACxBI,EAAmB,KAAK,CAAA,CAExBF,EAAAA,CAAiB,CAAE,EAAG3jC,CAAAA,CAAE,OAAA,CAAS,CAAA,CAAGA,CAAAA,CAAE,OAAQ,CAAC,EACjD,CAAA,CAEM+kC,EAAAA,CAAkB/kC,CAAAA,EAAkB,CAYxC,GAXI,CAACijC,IAEU,IAAA,CAAK,GAAA,CAAIjjC,CAAAA,CAAE,OAAA,CAAUujC,GAAW,OAAO,CAAA,CACzCC,EAAAA,EAAiB,CAACC,GAAc,OAAA,GAC3CA,EAAAA,CAAc,OAAA,CAAU,IAAA,CACxBI,EAAmB,IAAI,CAAA,CAAA,CAIzBF,EAAAA,CAAiB,CAAE,EAAG3jC,CAAAA,CAAE,OAAA,CAAS,CAAA,CAAGA,CAAAA,CAAE,OAAQ,CAAC,CAAA,CAE3C,CAACyjC,EAAAA,CAAc,SAAS,OAG5B,IAAMzqC,EAAAA,CAAO,QAAA,CAAS,gBAAA,CAAiB,iBAAiB,CAAA,CACpDgsC,EAAAA,CAA6B,KAC7Bxe,EAAAA,CAA+C,IAAA,CAEnDxtB,EAAAA,CAAK,OAAA,CAASK,GAAQ,CACpB,IAAM+F,EAAAA,CAAO/F,CAAAA,CAAI,uBAAsB,CACjCmL,EAAAA,CAASnL,CAAAA,CAAI,YAAA,CAAa,eAAe,CAAA,CAE/C,GAAImL,EAAAA,EAAUA,EAAAA,GAAWy+B,GAAiBjjC,CAAAA,CAAE,OAAA,EAAWZ,EAAAA,CAAK,GAAA,EAAOY,EAAE,OAAA,EAAWZ,EAAAA,CAAK,MAAA,CAAQ,CAC3F4lC,GAAcxgC,EAAAA,CAGd,IAAMygC,EAAAA,CAAYjlC,CAAAA,CAAE,OAAA,CAAUZ,EAAAA,CAAK,GAAA,CAC7B8lC,EAAAA,CAAY9lC,GAAK,MAAA,CAEnB6lC,EAAAA,CAAYC,EAAAA,CAAY,GAAA,CAC1B1e,GAAW,OAAA,CACFye,EAAAA,CAAYC,EAAAA,CAAY,GAAA,CACjC1e,GAAW,OAAA,CAGXA,EAAAA,CAAW,QAEf,CACF,CAAC,CAAA,CAED4c,EAAAA,CAAoB4B,EAAW,CAAA,CAC/B1B,GAAgB9c,EAAQ,EAC1B,CAAA,CAEM7L,CAAAA,CAAgB,IAAM,CAC1B,GAAI8oB,EAAAA,CAAc,OAAA,EAAWR,GAAiBE,EAAAA,EAAoBE,EAAAA,CAAAA,CAEhE,GAAIA,EAAAA,GAAiB,OAAA,CAEnBpB,CAAAA,GAAiBgB,CAAAA,CAAeE,EAAgB,UACvCE,EAAAA,GAAiB,OAAA,EAAWA,EAAAA,GAAiB,OAAA,CAAS,CAE/D,IAAM5C,CAAAA,CAAa,CAACjF,EAAAA,CAAe2J,GAAkBnG,CAAAA,CAAwB,IAAA,GAAwB,CACnG,IAAA,IAAWr6B,MAAK62B,EAAAA,CAAO,CACrB,GAAI72B,EAAAA,CAAE,KAAOwgC,EAAAA,CAAU,OAAOnG,CAAAA,CAC9B,GAAIr6B,GAAE,QAAA,CAAU,CACd,IAAMu5B,EAAAA,CAAQuC,EAAW97B,EAAAA,CAAE,QAAA,CAAUwgC,EAAAA,CAAUxgC,EAAAA,CAAE,EAAE,CAAA,CACnD,GAAIu5B,EAAAA,GAAU,OAAW,OAAOA,EAClC,CACF,CAEF,EAEMO,CAAAA,CAAegC,CAAAA,CAAWjF,CAAAA,CAAO2H,EAAAA,CAAkB,IAAI,CAAA,CAGvDiC,EAAAA,CAAyB,CAACnE,EAAAA,CAAkBkE,KAA6B,CAC7E,IAAM/iB,CAAAA,CAAM6e,EAAAA,CAAS,UAAUt8B,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOwgC,EAAQ,EACrD,OAAO9B,EAAAA,GAAiB,OAAA,CAAUjhB,CAAAA,CAAM,EAAIA,CAC9C,CAAA,CAEA,GAAIqc,CAAAA,GAAiB,IAAA,CAAM,CAEzB,IAAM4G,EAAAA,CAAMD,GAAuB5J,CAAAA,CAAO2H,EAAgB,CAAA,CAC1DlB,CAAAA,GAAiBgB,EAAe,IAAA,CAAMoC,EAAG,EAC3C,CAAA,KAAO,CAEL,IAAM3E,EAAAA,CAAahE,EAAAA,CAAU,IAAA,CAAK4I,IAAMA,EAAAA,CAAG,IAAA,CAAK,EAAA,GAAO7G,CAAY,GAAG,IAAA,CACtE,GAAIiC,EAAAA,EAAY,QAAA,CAAU,CACxB,IAAM2E,EAAAA,CAAMD,EAAAA,CAAuB1E,EAAAA,CAAW,SAAUyC,EAAgB,CAAA,CACxElB,CAAAA,GAAiBgB,CAAAA,CAAexE,CAAAA,CAAc4G,EAAG,EACnD,CACF,CACF,CAAA,CAIFnC,CAAAA,CAAiB,IAAI,CAAA,CACrBE,GAAoB,IAAI,CAAA,CACxBE,EAAAA,CAAgB,IAAI,EACpBK,EAAAA,CAAiB,IAAI,CAAA,CACrBF,EAAAA,CAAc,QAAU,KAAA,CACxBI,CAAAA,CAAmB,KAAK,EAC1B,EAGA/lC,SAAAA,CAAU,IAAM,CACd,GAAImlC,EACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAa8B,EAAc,EACrD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWpqB,CAAa,EAClD,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,MAAA,CAAS,WAC7B,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,UAAA,CAAa,OAE1B,IAAM,CACX,QAAA,CAAS,mBAAA,CAAoB,YAAaoqB,EAAc,CAAA,CACxD,QAAA,CAAS,mBAAA,CAAoB,UAAWpqB,CAAa,CAAA,CACrD,QAAA,CAAS,IAAA,CAAK,MAAM,MAAA,CAAS,EAAA,CAC7B,QAAA,CAAS,IAAA,CAAK,MAAM,UAAA,CAAa,GACnC,CAGJ,CAAA,CAAG,CAACsoB,CAAAA,CAAeE,EAAAA,CAAkBE,EAAY,CAAC,CAAA,CAGlD,IAAMkC,EAAAA,CAAoB,CAACrsC,EAAqBgM,CAAAA,CAAYvN,EAAAA,GAAkB,CAC5E,OAAQuB,EAAO,EAAA,EACb,KAAK,MAAA,CACH,IAAMgR,EAAAA,CAAYk4B,CAAAA,GAAkBl9B,CAAAA,CAAK,EAAA,CACnCsgC,GAAYtD,CAAAA,GAAkBh9B,CAAAA,CAAK,EAAA,CAEzC,OACE3G,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iDAAA,CAAkD,KAAA,CAAO,CAAE,WAAA,CAAa,CAAA,EAAG5G,EAAAA,CAAQ,EAAE,IAAK,CAAA,CAEtG,QAAA,CAAA,CAAAsqC,CAAAA,EACC5kC,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,iGAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOW,CAAAA,CAAM,YAAA,CACb,OAAA,CAASwnC,GAAY,CAAA,CAAI,EAC3B,CAAA,CACA,WAAA,CAAcxlC,GAAMua,CAAAA,CAAgBrV,CAAAA,CAAK,EAAA,CAAIlF,CAAC,EAC9C,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAA3C,GAAAA,CAACooC,aAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,EAIDvgC,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,OAAS,CAAA,CACvC7H,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,GACF2hC,CAAAA,GAAez8B,CAAAA,CAAK,EAAE,EACxB,EACA,SAAA,CAAU,mEAAA,CACV,KAAA,CAAO,CAAE,MAAOlH,CAAAA,CAAM,aAAc,CAAA,CAEnC,QAAA,CAAAkH,EAAK,UAAA,CACJ7H,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAEjC/R,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CAEtC,CAAA,CAGAp9B,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wDAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,6BAAA,CACV,MAAO,CACL,eAAA,CAAiB6H,CAAAA,CAAK,KAAA,EAAS,UAC/B,OAAA,CAASA,CAAAA,CAAK,QAAA,CAAW,EAAA,CAAM,EAC/B,WAAA,CAAaA,CAAAA,CAAK,WAAA,CAAclH,CAAAA,CAAM,OAAS,aAAA,CAC/C,WAAA,CAAakH,CAAAA,CAAK,WAAA,CAAc,MAAQ,KAC1C,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAK,YAAc,WAAA,CAAcA,CAAAA,CAAK,QAAA,CAAW,SAAA,CAAY,OACtE,CAAA,CACF,CAAA,CAIDgF,EAAAA,CACC7M,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAKmlC,EAAAA,CACL,IAAA,CAAK,OACL,KAAA,CAAOF,CAAAA,CACP,QAAA,CAAWtiC,CAAAA,EAAMuiC,GAAmBviC,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAClD,UAAYA,CAAAA,EAAM,CACZA,CAAAA,CAAE,GAAA,GAAQ,QACZ4kC,EAAAA,CAAiB1/B,CAAAA,CAAK,EAAE,CAAA,CACflF,EAAE,GAAA,GAAQ,QAAA,EACnB6kC,EAAAA,GAEJ,EACA,MAAA,CAAQ,IAAMD,EAAAA,CAAiB1/B,CAAAA,CAAK,EAAE,CAAA,CACtC,SAAA,CAAU,8CAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBlH,CAAAA,CAAM,SAAA,CACvB,YAAaA,CAAAA,CAAM,MAAA,CACnB,KAAA,CAAOA,CAAAA,CAAM,YACb,UAAA,CAAY,mBAAA,CACZ,QAAA,CAAU,MAAA,CACV,WAAY,GACd,CAAA,CACA,OAAA,CAAUgC,CAAAA,EAAMA,EAAE,eAAA,EAAgB,CACpC,CAAA,CAEAzB,IAAAA,CAAA6G,SAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,MAAA,CAAA,CACC,UAAU,QAAA,CACV,KAAA,CAAO,CAKL,KAAA,CAAQ6H,EAAK,QAAA,CAETlH,CAAAA,CAAM,aAAA,CADNA,CAAAA,CAAM,WAAA,CAEV,UAAA,CAAY,mBAAA,CACZ,QAAA,CAAWkH,EAAK,QAAA,CAEZ,MAAA,CADA,MAAA,CAGJ,UAAA,CAAYA,EAAK,WAAA,CACb,GAAA,CACCA,CAAAA,CAAK,QAAA,CAEJ,IADA,GAAA,CAEN,aAAA,CAAgBA,CAAAA,CAAK,QAAA,CAEjB,IADA,SAEN,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAK,KAEX,QAAA,CAAAA,CAAAA,CAAK,IAAA,CACR,CAAA,CAGCsgC,IAAa,CAACt7B,EAAAA,EACb3L,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,8BAAA,CAA+B,OAAA,CAAUyB,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAE9E,QAAA,CAAA,CAAA3C,GAAAA,CAAC,QAAA,CAAA,CACC,QAAU2C,CAAAA,EAAM8kC,EAAAA,CAAyB5/B,CAAAA,CAAMlF,CAAC,EAChD,SAAA,CAAU,mDAAA,CACV,KAAA,CAAO,CACL,MAAOhC,CAAAA,CAAM,YAAA,CACb,eAAA,CAAiB,aACnB,EACA,KAAA,CAAM,gBAAA,CAEN,QAAA,CAAAX,GAAAA,CAACkS,KAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAChC,EAGAlS,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBwkC,EAAAA,CAAkBt/B,CAAI,EACxB,CAAA,CACA,SAAA,CAAU,oDACV,KAAA,CAAO,CACL,KAAA,CAAOlH,CAAAA,CAAM,aACb,eAAA,CAAiB,aACnB,CAAA,CACA,KAAA,CAAM,cAEN,QAAA,CAAAX,GAAAA,CAACs9B,KAAAA,CAAA,CAAM,UAAU,aAAA,CAAc,CAAA,CACjC,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,GAEJ,CAAA,CAGJ,KAAK,WAAA,CACL,KAAK,UAEH,IAAM+K,EAAAA,CADcxsC,CAAAA,CAAO,EAAA,GAAO,YACF,WAAA,CAAc,SAAA,CACxCysC,EAAAA,CAAYzgC,CAAAA,CAAKwgC,EAAS,CAAA,CAC1BE,EAAAA,CAAmB9B,EAAAA,EAAiB,SAAW5+B,CAAAA,CAAK,EAAA,EAAM4+B,EAAAA,EAAiB,KAAA,GAAU4B,GAErFG,EAAAA,CAAqB7kC,CAAAA,EACpBA,CAAAA,CAAAA,CACK,OAAOA,GAAS,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAI,EAAIA,CAAAA,EAC7C,kBAAA,CAAmB,OAAA,CAAS,CAAE,IAAK,SAAA,CAAW,KAAA,CAAO,SAAA,CAAW,IAAA,CAAM,SAAU,CAAC,CAAA,CAFxE,GAAA,CAKpB,OACEzC,KAAC,KAAA,CAAA,CACC,SAAA,CAAU,kDAAA,CACV,OAAA,CAAUyB,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAElC,UAAAzB,IAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,UAAU,wFAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOP,EAAM,aAAc,CAAA,CACpC,OAAA,CAAUgC,CAAAA,EAAM,CACd,GAAI4lC,EAAAA,CACF7B,EAAAA,CAAmB,IAAI,OAClB,CACL,IAAM3kC,EAAAA,CAAOY,CAAAA,CAAE,cAAc,qBAAA,EAAsB,CACnD+jC,EAAAA,CAAmB,CACjB,OAAQ7+B,CAAAA,CAAK,EAAA,CACb,KAAA,CAAOwgC,EAAAA,CACP,KAAA,CAAQC,EAAAA,CAAa,OAAOA,EAAAA,EAAc,SAAW,IAAI,IAAA,CAAKA,EAAS,CAAA,CAAIA,GAAa,IAAI,IAAA,CAC5F,QAAA,CAAU,CAAE,IAAKvmC,EAAAA,CAAK,MAAA,CAAS,CAAA,CAAG,IAAA,CAAMA,GAAK,IAAK,CACpD,CAAC,EACH,CACF,CAAA,CAEA,QAAA,CAAA,CAAA/B,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,KAAA,CAAO,CAAE,MAAO9nC,CAAAA,CAAM,YAAa,CAAA,CAAG,CAAA,CACpEX,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAwoC,EAAAA,CAAkBF,EAAS,CAAA,CAAE,CAAA,CAAA,CACtC,CAAA,CAGCC,EAAAA,EAAoB,OAAO,QAAA,CAAa,GAAA,EAAe1nC,YAAAA,CACtDK,IAAAA,CAAA6G,SAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CAAyB,OAAA,CAAS,IAAM0mC,EAAAA,CAAmB,IAAI,CAAA,CAAG,CAAA,CACjFxlC,IAAAA,CAACgP,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,GAAI,CAAA,CAC3B,SAAA,CAAU,6DACV,KAAA,CAAO,CACL,eAAA,CAAiBvP,CAAAA,CAAM,UACvB,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,GACjC,GAAA,CAAK8lC,EAAAA,EAAiB,QAAA,CAAS,GAAA,CAC/B,KAAMA,EAAAA,EAAiB,QAAA,CAAS,IAClC,CAAA,CACA,QAAU9jC,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YAAY,KAAA,CAAO,CAAE,WAAA,CAAa,CAAA,UAAA,EAAaP,EAAM,MAAM,CAAA,CAAG,CAAA,CACzE,QAAA,CAAA,CAAA,CAAA,IAAM,CACN,IAAMgE,CAAAA,CAAQ,IAAI,IAAA,CACZsU,GAAW,IAAI,IAAA,CAAKtU,CAAK,CAAA,CAAGsU,GAAS,OAAA,CAAQtU,CAAAA,CAAM,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtE,IAAM+jC,EAAAA,CAAW,IAAI,KAAK/jC,CAAK,CAAA,CAAG+jC,EAAAA,CAAS,OAAA,CAAQ/jC,EAAM,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtE,IAAM0U,EAAAA,CAAW,IAAI,IAAA,CAAK1U,CAAK,EAAG,OAAA0U,EAAAA,CAAS,OAAA,CAAQ1U,CAAAA,CAAM,SAAQ,CAAI,EAAE,CAAA,CAEvD,CACd,CAAE,KAAA,CAAO,KAAA,CAAO,IAAA,CAAMA,CAAM,EAC5B,CAAE,KAAA,CAAO,WAAA,CAAU,IAAA,CAAMsU,EAAS,CAAA,CAClC,CAAE,KAAA,CAAO,mBAAA,CAAkB,KAAMyvB,EAAS,CAAA,CAC1C,CAAE,KAAA,CAAO,WAAA,CAAa,IAAA,CAAMrvB,EAAS,CACvC,EAEe,GAAA,CAAI,CAACiG,EAAAA,CAAKrnB,EAAAA,GACvB+H,IAAC,QAAA,CAAA,CAEC,IAAA,CAAK,QAAA,CACL,SAAA,CAAU,yDACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,CAAA,CAClC,YAAA,CAAegC,EAAAA,EAAOA,EAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkBhC,CAAAA,CAAM,OAAA,EAAW,yBAC/E,YAAA,CAAegC,EAAAA,EAAOA,EAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,aAAA,CAC9D,OAAA,CAAS,IAAM,CACb0Q,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CAAE,CAACwgC,EAAS,EAAG/oB,EAAAA,CAAI,IAAK,CAAC,CAAA,CACjDonB,EAAAA,CAAmB,IAAI,EACzB,CAAA,CAEC,QAAA,CAAApnB,EAAAA,CAAI,KAAA,CAAA,CAXArnB,EAYP,CACD,CACH,CAAA,GAAG,CACH+H,IAAC,KAAA,CAAA,CAAI,KAAA,CAAO,CAAE,SAAA,CAAW,aAAaW,CAAAA,CAAM,MAAM,CAAA,CAAA,CAAI,MAAA,CAAQ,WAAY,CAAA,CAAG,CAAA,CAC7EX,GAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,SAAA,CAAU,wDAAA,CACV,MAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAC1B,aAAe2C,CAAAA,EAAOA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBhC,CAAAA,CAAM,OAAA,EAAW,wBAAA,CAC/E,YAAA,CAAegC,GAAOA,CAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkB,cAC9D,OAAA,CAAS,IAAM,CACb0Q,CAAAA,GAAexL,EAAK,EAAA,CAAI,CAAE,CAACwgC,EAAS,EAAG,MAAU,CAAC,CAAA,CAClD3B,EAAAA,CAAmB,IAAI,EACzB,CAAA,CACD,QAAA,CAAA,QAAA,CAED,GACF,CAAA,CAGAxlC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yCACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,OAAA,CAAS,IAAM0mC,EAAAA,CAAmB92B,CAAAA,EAAQA,EAAO,CAAE,GAAGA,CAAAA,CAAM,KAAA,CAAO,IAAI,IAAA,CAAKA,CAAAA,CAAK,KAAA,CAAM,WAAA,GAAeA,CAAAA,CAAK,KAAA,CAAM,QAAA,EAAS,CAAI,CAAC,CAAE,CAAA,CAAI,IAAI,EACzI,SAAA,CAAU,+BAAA,CAEV,QAAA,CAAA5P,GAAAA,CAAC2oC,YAAA,CAAY,SAAA,CAAU,aAAA,CAAc,KAAA,CAAO,CAAE,KAAA,CAAOhoC,CAAAA,CAAM,aAAc,CAAA,CAAG,EAC9E,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,CAAA,CACrE,QAAA,CAAA8lC,EAAAA,EAAiB,KAAA,CAAM,mBAAmB,OAAA,CAAS,CAAE,KAAA,CAAO,MAAA,CAAQ,IAAA,CAAM,SAAU,CAAC,CAAA,CACxF,EACAzmC,GAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,QAAS,IAAM0mC,EAAAA,CAAmB92B,CAAAA,EAAQA,CAAAA,CAAO,CAAE,GAAGA,CAAAA,CAAM,KAAA,CAAO,IAAI,KAAKA,CAAAA,CAAK,KAAA,CAAM,WAAA,EAAY,CAAGA,EAAK,KAAA,CAAM,QAAA,EAAS,CAAI,CAAC,CAAE,CAAA,CAAI,IAAI,CAAA,CACzI,SAAA,CAAU,gCAEV,QAAA,CAAA5P,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAU,aAAA,CAAc,KAAA,CAAO,CAAE,MAAOz8B,CAAAA,CAAM,aAAc,CAAA,CAAG,CAAA,CAC/E,GACF,CAAA,CACAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCACZ,QAAA,CAAA,CAAC,GAAA,CAAK,GAAA,CAAK,GAAA,CAAK,IAAK,GAAA,CAAK,GAAA,CAAK,GAAG,CAAA,CAAE,IAAI,CAACgG,CAAAA,CAAG/N,EAAAA,GAC3C+H,GAAAA,CAAC,OAAY,SAAA,CAAU,sDAAA,CAAuD,KAAA,CAAO,CAAE,MAAOW,CAAAA,CAAM,YAAa,CAAA,CAAI,QAAA,CAAAqF,CAAAA,CAAAA,CAA3G/N,EAA6G,CACxH,CAAA,CACH,EACA+H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACX,cAAM,CACN,IAAM6D,CAAAA,CAAQ4iC,EAAAA,EAAiB,OAAS,IAAI,IAAA,CACtC7iC,EAAAA,CAAOC,CAAAA,CAAM,aAAY,CAAG+kC,EAAAA,CAAI/kC,CAAAA,CAAM,QAAA,GACtCwT,EAAAA,CAAW,IAAI,IAAA,CAAKzT,EAAAA,CAAMglC,GAAG,CAAC,CAAA,CAAE,MAAA,EAAO,CACvCtxB,GAAc,IAAI,IAAA,CAAK1T,EAAAA,CAAMglC,EAAAA,CAAI,CAAA,CAAG,CAAC,CAAA,CAAE,OAAA,GACvCjkC,EAAAA,CAAQ,IAAI,IAAA,CACZnB,EAAAA,CAA+D,EAAC,CAEtE,IAAA,IAASvL,EAAAA,CAAIof,EAAAA,CAAW,EAAGpf,EAAAA,EAAK,CAAA,CAAGA,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,KAAK,CAAE,GAAA,CAAK,IAAI,IAAA,CAAKI,GAAMglC,EAAAA,CAAG,CAAC3wC,EAAC,CAAA,CAAE,SAAQ,CAAG,IAAA,CAAM,IAAI,IAAA,CAAK2L,GAAMglC,EAAAA,CAAI,CAAA,CAAG,IAAI,IAAA,CAAKhlC,EAAAA,CAAMglC,EAAAA,CAAG,CAAC3wC,EAAC,EAAE,OAAA,EAAS,CAAA,CAAG,cAAA,CAAgB,KAAM,CAAC,CAAA,CAC/K,IAAA,IAASA,EAAAA,CAAI,EAAGA,EAAAA,EAAKqf,EAAAA,CAAarf,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,KAAK,CAAE,GAAA,CAAKvL,EAAAA,CAAG,IAAA,CAAM,IAAI,IAAA,CAAK2L,EAAAA,CAAMglC,EAAAA,CAAG3wC,EAAC,EAAG,cAAA,CAAgB,IAAK,CAAC,CAAA,CAC7G,IAAM4wC,EAAAA,CAAY,EAAA,CAAKrlC,EAAAA,CAAK,MAAA,CAC5B,IAAA,IAASvL,EAAAA,CAAI,CAAA,CAAGA,EAAAA,EAAK4wC,GAAW5wC,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,IAAA,CAAK,CAAE,IAAKvL,EAAAA,CAAG,IAAA,CAAM,IAAI,IAAA,CAAK2L,GAAMglC,EAAAA,CAAI,CAAA,CAAG3wC,EAAC,CAAA,CAAG,eAAgB,KAAM,CAAC,CAAA,CAEhH,OAAOuL,GAAK,GAAA,CAAI,CAACwC,EAAAA,CAAG/N,EAAAA,GAAM,CACxB,IAAMwhB,EAAAA,CAAUzT,EAAAA,CAAE,IAAA,CAAK,cAAa,GAAMrB,EAAAA,CAAM,YAAA,EAAa,CAEvDyD,EAAAA,CAAAA,CADmBkgC,EAAAA,CAAa,OAAOA,EAAAA,EAAc,SAAW,IAAI,IAAA,CAAKA,EAAS,CAAA,CAAIA,GAAa,IAAA,GACpE,YAAA,EAAa,GAAMtiC,EAAAA,CAAE,KAAK,YAAA,EAAa,CAE5E,OACEhG,GAAAA,CAAC,UAEC,IAAA,CAAK,QAAA,CACL,SAAA,CAAU,qFAAA,CACV,MAAO,CACL,KAAA,CAAQgG,EAAAA,CAAE,cAAA,CAAsCoC,GAAa,MAAA,CAASzH,CAAAA,CAAM,WAAA,CAAjDA,CAAAA,CAAM,aACjC,eAAA,CAAiByH,EAAAA,CAAa,SAAA,CAAY,aAAA,CAC1C,SAAA,CAAWqR,EAAAA,EAAW,CAACrR,EAAAA,CAAa,0BAA4B,MAClE,CAAA,CACA,OAAA,CAAS,IAAM,CACbiL,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CAAE,CAACwgC,EAAS,EAAGriC,EAAAA,CAAE,IAAK,CAAC,CAAA,CAC/C0gC,EAAAA,CAAmB,IAAI,EACzB,EAEC,QAAA,CAAA1gC,EAAAA,CAAE,GAAA,CAAA,CAbE/N,EAcP,CAEJ,CAAC,CACH,CAAA,GAAG,CACL,GACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACA,QAAA,CAAS,IACX,CAAA,CAAA,CACF,CAAA,CAGJ,KAAK,WACH,OACE+H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0CACb,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,uBACV,KAAA,CAAO,CACL,KAAA,CAAOW,CAAAA,CAAM,cACb,UAAA,CAAY,mBAAA,CACZ,UAAA,CAAY,GACd,EAEC,QAAA,CAAA2mC,EAAAA,CAAYz/B,CAAI,CAAA,CACnB,EACF,CAAA,CAGJ,KAAK,WAAA,CACH,IAAMihC,GAA4B/jC,CAAAA,CAAe,MAAA,CAAOK,CAAAA,EACtDyC,CAAAA,CAAK,SAAA,EAAW,IAAA,CAAKkL,EAAAA,EAAKA,EAAAA,CAAE,OAAS3N,CAAAA,CAAK,IAAA,EAAQ2N,EAAAA,CAAE,QAAA,GAAa3N,EAAK,QAAQ,CAChF,CAAA,CAEA,OACEpF,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,yCAAA,CACV,OAAA,CAAU2C,GAAMA,CAAAA,CAAE,eAAA,EAAgB,CAElC,QAAA,CAAA3C,IAAC6E,EAAAA,CAAA,CACC,aAAA,CAAeikC,EAAAA,CACf,eAAgB/jC,CAAAA,CAChB,QAAA,CAAWmE,CAAAA,EAAkB,CAC3B,IAAM6P,EAAAA,CAAe7P,CAAAA,CAAM,GAAA,CAAI5D,EAAAA,GAAM,CACnC,EAAA,CAAIA,EAAAA,CAAE,EAAA,CACN,IAAA,CAAMA,GAAE,IAAA,CACR,QAAA,CAAUA,EAAAA,CAAE,QAAA,CACZ,MAAOA,EAAAA,CAAE,KACX,CAAA,CAAE,CAAA,CACF+N,IAAexL,CAAAA,CAAK,EAAA,CAAI,CACtB,SAAA,CAAWkR,GAAa,MAAA,CAAS,CAAA,CAAIA,EAAAA,CAAe,MACtD,CAAC,EACH,CAAA,CACF,CAAA,CACF,CAAA,CAGJ,KAAK,QAAA,CACH,OACE/Y,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,yCAAA,CACV,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAElC,QAAA,CAAA3C,GAAAA,CAACyJ,GAAA,CACC,MAAA,CAAQ5B,CAAAA,CAAK,MAAA,EAAU,OACvB,QAAA,CAAWnP,CAAAA,EAAW,CACpB2a,CAAAA,GAAexL,EAAK,EAAA,CAAI,CACtB,MAAA,CAAAnP,CAAAA,CACA,SAAUA,CAAAA,GAAW,WAAA,CAAc,GAAA,CAAMmP,CAAAA,CAAK,QAChD,CAAC,EACH,CAAA,CACF,CAAA,CACF,EAGJ,KAAK,UAAA,CACH,OACE3G,IAAAA,CAAC,OAAI,SAAA,CAAU,+CAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wDAAA,CAAyD,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,WAAY,CAAA,CAClH,SAAAX,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oCAAA,CACV,MAAO,CACL,KAAA,CAAO,CAAA,EAAG6H,CAAAA,CAAK,QAAQ,CAAA,CAAA,CAAA,CACvB,eAAA,CAAiBA,CAAAA,CAAK,QAAA,GAAa,IAAMlH,CAAAA,CAAM,eAAA,CAAkBA,CAAAA,CAAM,MACzE,EACF,CAAA,CACF,CAAA,CACAO,IAAAA,CAAC,MAAA,CAAA,CACC,UAAU,8CAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOP,CAAAA,CAAM,YAAA,CACb,UAAA,CAAY,mBAAA,CACZ,WAAY,GACd,CAAA,CAEC,QAAA,CAAA,CAAAkH,CAAAA,CAAK,SAAS,GAAA,CAAA,CACjB,CAAA,CAAA,CACF,CAAA,CAIJ,KAAK,WAEH,IAAMkhC,EAAAA,CAA+E,CACnF,GAAA,CAAK,MACL,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,MAAA,CACN,OAAQ,QACV,CAAA,CACMC,EAAAA,CAAkF,CACtF,IAAK,KAAA,CACL,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,OACN,MAAA,CAAQ,QACV,CAAA,CACMC,CAAAA,CAAuBF,EAAAA,CAAuBlhC,CAAAA,CAAK,QAAA,EAAY,QAAQ,GAAK,QAAA,CAElF,OACE7H,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,yCAAA,CACV,OAAA,CAAU2C,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAElC,QAAA,CAAA3C,GAAAA,CAACmB,EAAAA,CAAA,CACC,QAAA,CAAU8nC,CAAAA,CACV,QAAA,CAAWpmC,CAAAA,EAAgB,CACrBA,CAAAA,EACFwQ,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CACtB,QAAA,CAAUmhC,EAAAA,CAA0BnmC,CAAW,CAAA,EAAK,QACtD,CAAC,EAEL,CAAA,CACF,CAAA,CACF,CAAA,CAGJ,QACE,OAAO,IACX,CACF,CAAA,CAGMqmC,EAAAA,CAA6B9sB,CAAAA,EAC1B,CACL,CACE,EAAA,CAAI,MAAA,CACJ,KAAA,CAAO,aAAA,CACP,KAAMihB,EAAAA,CAAU,IAAA,CAChB,OAAA,CAAS,IAAMV,EAAevgB,CAAQ,CAAA,CACtC,QAAA,CAAUA,CAAAA,GAAa,MACzB,CAAA,CACA,CAAE,EAAA,CAAI,MAAA,CAAQ,MAAO,EAAA,CAAI,OAAA,CAAS,IAAM,CAAC,EAAG,SAAA,CAAW,IAAK,CAAA,CAC5D,CACE,EAAA,CAAI,SAAA,CACJ,KAAA,CAAO,gBAAA,CACP,KAAMihB,EAAAA,CAAU,OAAA,CAChB,OAAA,CAAS,IAAM,CAEf,CACF,CAAA,CACA,CACE,EAAA,CAAI,WACJ,KAAA,CAAO,iBAAA,CACP,IAAA,CAAMA,EAAAA,CAAU,SAChB,OAAA,CAAS,IAAM,CAEf,CACF,CACF,CAAA,CAKI8L,EAAAA,CAA2BthC,CAAAA,EACVA,CAAAA,CAAK,UAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,CAIpD,CAEL,CACE,EAAA,CAAI,YAAA,CACJ,KAAA,CAAOiY,CAAAA,EAAc,WAAA,EAAa,UAAA,EAAc,aAAA,CAChD,KAAMud,EAAAA,CAAU,GAAA,CAChB,OAAA,CAAS,IAAM,CACbqH,CAAAA,GAAkB78B,CAAAA,CAAK,EAAE,EAC3B,CACF,CAAA,CAEA,CAAE,EAAA,CAAI,MAAA,CAAQ,MAAO,EAAA,CAAI,OAAA,CAAS,IAAM,CAAC,EAAG,SAAA,CAAW,IAAK,CAAA,CAE5D,CACE,GAAI,QAAA,CACJ,KAAA,CAAOiY,CAAAA,EAAc,WAAA,EAAa,YAAc,aAAA,CAChD,IAAA,CAAMud,EAAAA,CAAU,MAAA,CAChB,QAAS,IAAM,CACTsH,CAAAA,CACFA,CAAAA,CAAgB98B,EAAK,EAAA,CAAIA,CAAAA,CAAK,IAAI,CAAA,CAElC48B,IAAoB,CAAC58B,CAAAA,CAAK,EAAE,CAAC,EAEjC,CACF,CACF,CAAA,CAIK,CAEL,CACE,EAAA,CAAI,MAAA,CACJ,KAAA,CAAOiY,CAAAA,EAAc,aAAa,QAAA,EAAY,WAAA,CAC9C,IAAA,CAAMud,EAAAA,CAAU,OAChB,OAAA,CAAS,IAAM,CACb+G,CAAAA,GAAiBv8B,CAAI,EACvB,CACF,CAAA,CAEA,CACE,EAAA,CAAI,YAAA,CACJ,KAAA,CAAOiY,CAAAA,EAAc,aAAa,UAAA,EAAc,aAAA,CAChD,IAAA,CAAMud,EAAAA,CAAU,IAChB,OAAA,CAAS,IAAM,CACbqH,CAAAA,GAAkB78B,EAAK,EAAE,EAC3B,CACF,CAAA,CAEA,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAO,EAAA,CAAI,QAAS,IAAM,CAAC,CAAA,CAAG,SAAA,CAAW,IAAK,CAAA,CAE5D,CACE,EAAA,CAAI,gBAAA,CACJ,MAAOiY,CAAAA,EAAc,WAAA,EAAa,cAAA,EAAkB,iBAAA,CACpD,IAAA,CAAMud,EAAAA,CAAU,cAAA,CAChB,OAAA,CAAS,IAAM,CACbhqB,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CAAE,MAAA,CAAQ,MAAA,CAAQ,QAAA,CAAU,CAAE,CAAC,EACzD,CAAA,CACA,QAAA,CAAUA,CAAAA,CAAK,SAAW,MAC5B,CAAA,CAEA,CACE,EAAA,CAAI,gBACJ,KAAA,CAAOiY,CAAAA,EAAc,WAAA,EAAa,aAAA,EAAiB,kBACnD,IAAA,CAAMud,EAAAA,CAAU,aAAA,CAChB,OAAA,CAAS,IAAM,CACbhqB,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CAAE,MAAA,CAAQ,aAAc,CAAC,EACnD,CAAA,CACA,QAAA,CAAUA,CAAAA,CAAK,MAAA,GAAW,aAC5B,CAAA,CAEA,CACE,EAAA,CAAI,cAAA,CACJ,MAAOiY,CAAAA,EAAc,WAAA,EAAa,YAAA,EAAgB,eAAA,CAClD,KAAMud,EAAAA,CAAU,YAAA,CAChB,OAAA,CAAS,IAAM,CACbhqB,CAAAA,GAAexL,CAAAA,CAAK,EAAA,CAAI,CAAE,OAAQ,WAAA,CAAa,QAAA,CAAU,GAAI,CAAC,EAChE,CAAA,CACA,QAAA,CAAUA,CAAAA,CAAK,MAAA,GAAW,WAC5B,CAAA,CAEA,CAAE,EAAA,CAAI,OAAQ,KAAA,CAAO,EAAA,CAAI,OAAA,CAAS,IAAM,CAAC,CAAA,CAAG,SAAA,CAAW,IAAK,CAAA,CAE5D,CACE,EAAA,CAAI,OAAA,CACJ,KAAA,CAAOiY,CAAAA,EAAc,aAAa,SAAA,EAAa,YAAA,CAC/C,IAAA,CAAMud,EAAAA,CAAU,MAChB,OAAA,CAAS,IAAM,CAAC,CAAA,CAEhB,SAAU,IACZ,CAAA,CAEA,CAAE,EAAA,CAAI,OAAQ,KAAA,CAAO,EAAA,CAAI,OAAA,CAAS,IAAM,CAAC,CAAA,CAAG,SAAA,CAAW,IAAK,EAE5D,CACE,EAAA,CAAI,QAAA,CACJ,KAAA,CAAOvd,GAAc,WAAA,EAAa,UAAA,EAAc,aAAA,CAChD,IAAA,CAAMud,GAAU,MAAA,CAChB,OAAA,CAAS,IAAM,CACTsH,EAEFA,CAAAA,CAAgB98B,CAAAA,CAAK,EAAA,CAAIA,CAAAA,CAAK,IAAI,CAAA,CAGlC48B,CAAAA,GAAoB,CAAC58B,CAAAA,CAAK,EAAE,CAAC,EAEjC,CACF,CACF,EAGIuhC,EAAAA,CAAiB1qB,CAAAA,CAAQ,MAAA,CAAO5iB,CAAAA,EAAOA,CAAAA,CAAI,OAAO,CAAA,CAGlDutC,EAAAA,CAAoBD,GAAe,MAAA,CAAO,CAACra,CAAAA,CAAKjzB,CAAAA,GAAQizB,EAAMjzB,CAAAA,CAAI,KAAA,CAAO,CAAC,CAAA,CAIhF,OACEoF,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,wBAAA,CACV,MAAO,CACL,eAAA,CAAiBP,CAAAA,CAAM,SAAA,CACvB,SAAU0oC,EACZ,CAAA,CAGA,QAAA,CAAA,CAAAnoC,IAAAA,CAAC,OACC,SAAA,CAAU,qCAAA,CACV,KAAA,CAAO,CACL,gBAAiBP,CAAAA,CAAM,MAAA,CACvB,MAAA,CAAQ,CAAA,EAAGymC,EAAa,CAAA,EAAA,CAAA,CACxB,WAAA,CAAa,KAAA,CACb,aAAc,CAAA,UAAA,EAAazmC,CAAAA,CAAM,MAAM,CAAA,CAAA,CACvC,UAAW,YACb,CAAA,CAGA,QAAA,CAAA,CAAAX,GAAAA,CAAC,OAAI,SAAA,CAAU,kCAAA,CACd,QAAA,CAAAopC,EAAAA,CAAe,IAAI,CAACvtC,CAAAA,CAAQytC,CAAAA,GAAa,CACxC,IAAMC,EAAAA,CAAeD,CAAAA,GAAaF,EAAAA,CAAe,MAAA,CAAS,EACpDI,EAAAA,CAAe3tC,CAAAA,CAAO,EAAA,GAAO,MAAA,CAEnC,OACAqF,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAW,CAAA,qFAAA,EACTsoC,GAAe,EAAA,CAAK,gBACtB,CAAA,CAAA,CACA,KAAA,CAAO,CAEL,KAAA,CAAO,CAAA,EAAG3tC,CAAAA,CAAO,KAAK,KACtB,QAAA,CAAU,CAAA,EAAGA,CAAAA,CAAO,QAAA,GAAa2tC,GAAe,GAAA,CAAM,EAAA,CAAG,CAAA,EAAA,CAAA,CACzD,QAAA,CAAU,GAAG3tC,CAAAA,CAAO,QAAA,EAAY,GAAI,CAAA,EAAA,CAAA,CACpC,WAAY,CAAA,CACZ,QAAA,CAAU,CAAA,CAEV,WAAA,CAAc0tC,GAAkD,MAAA,CAAnC,CAAA,UAAA,EAAa5oC,CAAAA,CAAM,WAAW,GAC3D,MAAA,CAAQ,MAAA,CACR,SAAA,CAAW,YAAA,CACX,QAAA,CAAU,QACZ,CAAA,CACA,aAAA,CAAgBgC,IAAM,CACpBA,EAAAA,CAAE,cAAA,EAAe,CACjBgjC,EAAe,CACb,MAAA,CAAQ,IAAA,CACR,CAAA,CAAGhjC,GAAE,OAAA,CACL,CAAA,CAAGA,EAAAA,CAAE,OAAA,CACL,KAAM,QAAA,CACN,QAAA,CAAU9G,CAAAA,CAAO,EACnB,CAAC,EACH,CAAA,CACA,YAAA,CAAe8G,EAAAA,EAAM,CACnBA,EAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,eAAA,CAAkBhC,EAAM,QAChD,CAAA,CACA,YAAA,CAAegC,EAAAA,EAAM,CACnBA,EAAAA,CAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,cAC1C,CAAA,CAEA,QAAA,CAAA,CAAA3C,GAAAA,CAAC,QACC,SAAA,CAAU,kCAAA,CACV,KAAA,CAAO,CACL,MAAOW,CAAAA,CAAM,YAAA,CACb,UAAA,CAAY,mBAAA,CACZ,WAAY,GAAA,CAEZ,QAAA,CAAU,QAAA,CACV,YAAA,CAAc,WACd,UAAA,CAAY,QAAA,CACZ,QAAA,CAAU,CAAA,CAEV,aAAc,GAChB,CAAA,CACA,KAAA,CAAO9E,CAAAA,CAAO,MAEb,QAAA,CAAAA,CAAAA,CAAO,KAAA,CACV,CAAA,CAMCA,CAAAA,CAAO,SAAA,EACNmE,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,2EAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO,MACP,WAAA,CAAa,MAAA,CACb,eAAA,CAAiBolC,EAAAA,GAAmBvpC,EAAO,EAAA,CAAK,CAAA,EAAG8E,CAAAA,CAAM,MAAM,KAAO,aAAA,CACtE,MAAA,CAAQ,CACV,CAAA,CACA,YAAcgC,EAAAA,EAAM,CAClBA,EAAAA,CAAE,cAAA,GACFA,EAAAA,CAAE,eAAA,EAAgB,CAClB0iC,EAAAA,CAAkBxpC,EAAO,EAAE,CAAA,CAC3B0pC,EAAAA,CAAgB5iC,EAAAA,CAAE,OAAO,CAAA,CACzB8iC,CAAAA,CAAoB5pC,CAAAA,CAAO,KAAK,EAClC,CAAA,CACA,KAAA,CAAM,uBAAA,CAGN,SAAAmE,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,8EAAA,CACV,MAAO,CACL,IAAA,CAAM,KAAA,CACN,KAAA,CAAO,MACP,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CACvB,YAAA,CAAc,KAChB,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAAA,CArFG9E,CAAAA,CAAO,EAuFd,CAEF,CAAC,CAAA,CACD,CAAA,CAGAqF,KAAC,KAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,QAAA,CACV,KAAA,CAAO,EACP,MAAA,CAAQ,MAAA,CACR,eAAA,CAAiBP,CAAAA,CAAM,OACvB,MAAA,CAAQ,CACV,CAAA,CAEA,QAAA,CAAA,CAAAX,IAAC08B,EAAAA,CAAA,CACC,OAAA,CAAShe,CAAAA,CACT,eAAgBie,CAAAA,CAChB,KAAA,CAAOh8B,CAAAA,CACT,CAAA,CACAX,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM4mC,EAAAA,CAAoB,CAACD,EAAgB,CAAA,CACpD,SAAA,CAAU,qDAAA,CACV,MAAO,CAAE,KAAA,CAAOhmC,CAAAA,CAAM,YAAa,CAAA,CACnC,KAAA,CAAM,oBAAA,CAEN,QAAA,CAAAX,IAACypC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,EAChC,CAAA,CAGC9C,EAAAA,EACCzlC,IAAAA,CAAC,KAAA,CAAA,CACC,IAAK2lC,EAAAA,CACL,SAAA,CAAU,6EAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBlmC,CAAAA,CAAM,SAAA,CACvB,MAAA,CAAQ,aAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,KAAA,CAAOA,EAAM,WACf,CAAA,CACA,OAAA,CAAUgC,CAAAA,EAAMA,EAAE,eAAA,EAAgB,CAElC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sDAAA,CAAuD,KAAA,CAAO,CAAE,WAAA,CAAaP,CAAAA,CAAM,MAAO,CAAA,CACvG,UAAAX,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,uBAAA,CAAwB,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,WAAY,EAAG,QAAA,CAAA,oBAAA,CAAkB,CAAA,CAC7FX,GAAAA,CAAC,QAAA,CAAA,CAAO,QAAS,IAAM4mC,EAAAA,CAAoB,KAAK,CAAA,CAAG,UAAU,+CAAA,CAAgD,KAAA,CAAO,CAAE,KAAA,CAAOjmC,EAAM,YAAa,CAAA,CAAG,QAAA,CAAA,OAAA,CAAK,CAAA,CAAA,CAC1J,CAAA,CACAO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,aAAc,CAAA,CAAG,sBAAU,CAAA,CACvFO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,oBAAA,CAAkB,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,EAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,EAAG,QAAA,CAAA,iBAAA,CAAK,CAAA,CAAA,CAAM,CAAA,CACjPO,IAAAA,CAAC,OAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,cAAA,CAAY,CAAA,CAAOX,GAAAA,CAAC,OAAI,SAAA,CAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,EAAM,WAAY,CAAA,CAAG,QAAA,CAAA,yBAAA,CAAa,CAAA,CAAA,CAAM,EACnPO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,MAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,kBAAA,CAAgB,EAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,MAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,MAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,kBAAA,CAAgB,CAAA,CAAA,CAAM,CAAA,CAAA,CAC5P,CAAA,CAAA,CACF,CAAA,CACAO,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CAAuB,KAAA,CAAO,CAAE,KAAA,CAAOW,EAAM,aAAc,CAAA,CAAG,QAAA,CAAA,WAAA,CAAS,CAAA,CACtFO,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,EAAM,YAAa,CAAA,CAAG,QAAA,CAAA,aAAA,CAAW,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,MAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,MAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,KAAA,CAAG,GAAM,CAAA,CACxOO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,wBAAY,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,EAAG,QAAA,CAAA,aAAA,CAAW,CAAA,CAAA,CAAM,CAAA,CACjPO,IAAAA,CAAC,OAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,iBAAA,CAAe,CAAA,CAAOX,GAAAA,CAAC,OAAI,SAAA,CAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,gBAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,iBAAA,CAAK,CAAA,CAAA,CAAM,CAAA,CAAA,CAChP,CAAA,CAAA,CACF,CAAA,CACAO,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,aAAc,EAAG,QAAA,CAAA,SAAA,CAAO,CAAA,CACpFO,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,WAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,EAAG,QAAA,CAAA,mBAAA,CAAiB,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,gBAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,OAAA,CAAK,CAAA,CAAA,CAAM,CAAA,CAChPO,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,IAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,EAAM,YAAa,CAAA,CAAG,QAAA,CAAA,mBAAA,CAAiB,CAAA,CAAOX,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,EAAM,WAAY,CAAA,CAAG,QAAA,CAAA,eAAA,CAAa,CAAA,CAAA,CAAM,EACxPO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,UAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,MAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,iBAAA,CAAe,EAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,MAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,MAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,kBAAA,CAAgB,GAAM,CAAA,CACzPO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,MAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,EAAG,QAAA,CAAA,aAAA,CAAW,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,EAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,EAAG,QAAA,CAAA,IAAA,CAAE,CAAA,CAAA,CAAM,CAAA,CAAA,CACzO,CAAA,CAAA,CACF,EACAO,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAI,SAAA,CAAU,sBAAA,CAAuB,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,aAAc,CAAA,CAAG,mBAAO,CAAA,CACpFO,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,6BAAiB,CAAA,CAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAwC,KAAA,CAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,OAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,uBAAA,CAAW,CAAA,CAAA,CAAM,CAAA,CACtPO,IAAAA,CAAC,OAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,aAAA,CAAW,CAAA,CAAOX,GAAAA,CAAC,OAAI,SAAA,CAAU,uCAAA,CAAwC,KAAA,CAAO,CAAE,gBAAiBW,CAAAA,CAAM,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,QAAA,CAAM,CAAA,CAAA,CAAM,CAAA,CAC3OO,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,MAAOW,CAAAA,CAAM,YAAa,CAAA,CAAG,QAAA,CAAA,gBAAA,CAAc,EAAOX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,MAAO,CAAE,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CAAQ,MAAOA,CAAAA,CAAM,WAAY,CAAA,CAAG,QAAA,CAAA,cAAA,CAAY,GAAM,CAAA,CAAA,CACtP,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,GAEJ,CAAA,CAAA,CACF,CAAA,CAIAX,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wBAAA,CAAyB,KAAA,CAAO,CAAE,SAAA,CAAWqnC,EAAc,CAAA,CACzE,QAAA,CAAAhI,EAAAA,CAAU,IAAI,CAAC,CAAE,IAAA,CAAAx3B,CAAAA,CAAM,MAAAvN,CAAM,CAAA,CAAGqE,EAAAA,GAAU,CACzC,IAAMyJ,EAAAA,CAAas4B,CAAAA,CAAe74B,CAAAA,CAAK,EAAE,EAGnC6hC,EAAAA,CAAe5D,EAAAA,GAAqBj+B,CAAAA,CAAK,EAAA,CACzC8hC,EAAgBD,EAAAA,EAAgB1D,EAAAA,GAAiB,OAAA,CACjD4D,EAAAA,CAAgBF,IAAgB1D,EAAAA,GAAiB,OAAA,CACjD6D,EAAAA,CAAgBH,EAAAA,EAAgB1D,KAAiB,OAAA,CACjD8D,EAAAA,CAAkC,EAAC,CACzC,OAAID,EAAAA,GACFC,EAAAA,CAAW,eAAA,CAAkB,GAAGnpC,CAAAA,CAAM,MAAM,CAAA,EAAA,CAAA,CAC5CmpC,EAAAA,CAAW,UAAY,CAAA,gBAAA,EAAmBnpC,CAAAA,CAAM,MAAM,CAAA,CAAA,CAAA,CAItDO,KAACgP,MAAAA,CAAO,GAAA,CAAP,CAEC,eAAA,CAAerI,EAAK,EAAA,CACpB,SAAA,CAAW,CAAA,uCAAA,EAA0C+9B,CAAAA,GAAkB/9B,EAAK,EAAA,CAAK,YAAA,CAAe,EAAE,CAAA,CAAA,CAClG,MAAO,CACL,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,GAAGo8B,CAAU,CAAA,EAAA,CAAA,CACrB,UAAA,CAAY77B,EAAAA,CAAa,CAAA,UAAA,EAAazH,CAAAA,CAAM,MAAM,CAAA,CAAA,CAAK,wBACvD,eAAA,CAAiByH,EAAAA,CACbzH,CAAAA,CAAM,WAAA,CACNkpC,GACE,CAAA,EAAGlpC,CAAAA,CAAM,MAAM,CAAA,EAAA,CAAA,CACdhC,GAAQ,CAAA,GAAM,CAAA,CAAIgC,CAAAA,CAAM,SAAA,CAAYA,EAAM,MAAA,CACjD,GAAGmpC,EACL,CAAA,CACA,aAAc,IAAMhF,CAAAA,CAAiBj9B,CAAAA,CAAK,EAAE,EAC5C,YAAA,CAAc,IAAMi9B,CAAAA,CAAiB,IAAI,EACzC,OAAA,CAAUniC,EAAAA,EAAM,CAEd,IAAMy9B,GADYlB,EAAAA,CAAiBf,CAAK,CAAA,CACV,GAAA,CAAI72B,GAAKA,CAAAA,CAAE,EAAE,CAAA,CAErCq4B,CAAAA,CADQ,UAAU,QAAA,CAAS,WAAA,EAAY,CAAE,OAAA,CAAQ,KAAK,CAAA,EAAK,CAAA,CACvCh9B,EAAAA,CAAE,OAAA,CAAUA,GAAE,OAAA,CAGxCukC,EAAAA,CAAqBr/B,CAAAA,CAAK,EAAA,CAAIu4B,GAAaT,CAAAA,CAAWh9B,EAAAA,CAAE,QAAQ,CAAA,CAGhEwhC,IAAct8B,CAAI,EACpB,CAAA,CACA,aAAA,CAAgBlF,IAAM,CAEpBA,EAAAA,CAAE,eAAA,EAAgB,CAClByhC,CAAAA,GAAiBv8B,CAAI,EACvB,CAAA,CACA,cAAgBlF,EAAAA,EAAM,CACpBA,EAAAA,CAAE,cAAA,GACFgjC,CAAAA,CAAe,CACb,MAAA,CAAQ,IAAA,CACR,EAAGhjC,EAAAA,CAAE,OAAA,CACL,CAAA,CAAGA,EAAAA,CAAE,QACL,IAAA,CAAM,MAAA,CACN,IAAA,CAAAkF,CACF,CAAC,CAAA,CAGDw8B,CAAAA,GAAoBx8B,CAAAA,CAAMlF,EAAC,EAC7B,CAAA,CACA,UAAA,CAAY,CACV,eAAA,CAAiByF,GAAazH,CAAAA,CAAM,WAAA,CAAcA,CAAAA,CAAM,OAC1D,CAAA,CAGC,QAAA,CAAA,CAAAgpC,CAAAA,EACC3pC,GAAAA,CAAC,OACC,KAAA,CAAO,CACL,QAAA,CAAU,UAAA,CACV,IAAK,CAAA,CACL,IAAA,CAAM,CAAA,CACN,KAAA,CAAO,EACP,MAAA,CAAQ,KAAA,CACR,eAAA,CAAiBW,CAAAA,CAAM,OACvB,MAAA,CAAQ,EACV,CAAA,CACF,CAAA,CAIDipC,IACC5pC,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAO,CACL,SAAU,UAAA,CACV,MAAA,CAAQ,CAAA,CACR,IAAA,CAAM,EACN,KAAA,CAAO,CAAA,CACP,MAAA,CAAQ,KAAA,CACR,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CACvB,MAAA,CAAQ,EACV,CAAA,CACF,CAAA,CAGHyoC,EAAAA,CAAe,GAAA,CAAI,CAACvtC,EAAAA,CAAQytC,EAAAA,GAAa,CACxC,IAAMC,GAAeD,EAAAA,GAAaF,EAAAA,CAAe,MAAA,CAAS,CAAA,CACpDI,GAAe3tC,EAAAA,CAAO,EAAA,GAAO,MAAA,CAEnC,OACAmE,IAAC,KAAA,CAAA,CAEC,SAAA,CAAW,CAAA,uBAAA,EACTwpC,EAAAA,CAAe,gBAAkB,gBACnC,CAAA,CAAA,CACA,KAAA,CAAO,CAEL,MAAO,CAAA,EAAG3tC,EAAAA,CAAO,KAAK,CAAA,EAAA,CAAA,CACtB,QAAA,CAAU,CAAA,EAAGA,EAAAA,CAAO,QAAA,GAAa2tC,GAAe,GAAA,CAAM,EAAA,CAAG,CAAA,EAAA,CAAA,CACzD,QAAA,CAAU,GAAG3tC,EAAAA,CAAO,QAAA,EAAY,GAAI,CAAA,EAAA,CAAA,CACpC,WAAY,CAAA,CACZ,QAAA,CAAU,CAAA,CAEV,WAAA,CAAc0tC,GAA6F,MAAA,CAA9E,CAAA,UAAA,EAAa1E,CAAAA,GAAkBh9B,CAAAA,CAAK,GAAKlH,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,WAAW,GACtG,MAAA,CAAQ,MAAA,CACR,SAAA,CAAW,YAAA,CACX,SAAU,QACZ,CAAA,CAEC,QAAA,CAAAunC,EAAAA,CAAkBrsC,EAAAA,CAAQgM,CAAAA,CAAM2hC,EAAAA,CAAelvC,CAAAA,CAAQ,CAAC,CAAA,CAAA,CAlBpD,CAAA,EAAGuN,CAAAA,CAAK,EAAE,IAAIhM,EAAAA,CAAO,EAAE,CAAA,CAmB9B,CAEF,CAAC,CAAA,CAAA,CAAA,CA3GMgM,CAAAA,CAAK,EA4GZ,CAEJ,CAAC,CAAA,CACD,CAAA,CAGA7H,GAAAA,CAAC48B,EAAAA,CAAA,CACC,MAAA,CAAQ8I,CAAAA,CAAY,MAAA,CACpB,CAAA,CAAGA,EAAY,CAAA,CACf,CAAA,CAAGA,CAAAA,CAAY,CAAA,CACf,MACEA,CAAAA,CAAY,IAAA,GAAS,QAAA,EAAYA,CAAAA,CAAY,QAAA,CACzCwD,EAAAA,CAA0BxD,CAAAA,CAAY,QAAQ,EAC9CA,CAAAA,CAAY,IAAA,GAAS,MAAA,EAAUA,CAAAA,CAAY,KAC3CyD,EAAAA,CAAwBzD,CAAAA,CAAY,IAAI,CAAA,CACxC,EAAC,CAEP,OAAA,CAAS,IAAMC,CAAAA,CAAe,CAAE,GAAGD,CAAAA,CAAa,MAAA,CAAQ,KAAM,CAAC,CAAA,CAC/D,KAAA,CAAO/kC,CAAAA,CACT,CAAA,CAGC4lC,IAAmBF,EAAAA,EAAiBT,CAAAA,EAAiB,OAAO,QAAA,CAAa,KAAe/kC,YAAAA,CACvFb,GAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAO,CACL,QAAA,CAAU,OAAA,CACV,IAAA,CAAMqmC,GAAc,CAAA,CAAI,EAAA,CACxB,GAAA,CAAKA,EAAAA,CAAc,EAAI,EAAA,CACvB,MAAA,CAAQ,KAAA,CACR,aAAA,CAAe,MACjB,CAAA,CAGE,QAAA,CAAA,CAAA,IAAM,CACN,IAAM0D,EAAc1K,EAAAA,CAAU,IAAA,CAAK4I,CAAAA,EAAMA,CAAAA,CAAG,KAAK,EAAA,GAAOrC,CAAa,CAAA,EAAG,IAAA,CACxE,OAAOmE,CAAAA,CACL/pC,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,4CACV,KAAA,CAAO,CACL,eAAA,CAAiB,2BAAA,CACjB,eAAgB,WAClB,CAAA,CAEA,QAAA,CAAAA,GAAAA,CAAC,QACC,SAAA,CAAU,qBAAA,CACV,KAAA,CAAO,CACL,MAAOW,CAAAA,CAAM,aAAA,CACb,OAAA,CAAS,EACX,EAEC,QAAA,CAAAopC,CAAAA,CAAY,IAAA,CACf,CAAA,CACF,EACE,IACN,CAAA,GAAG,CACL,CAAA,CACA,SAAS,IACX,CAAA,CAAA,CACF,CAEJ,CCtzCO,SAAS9uB,EAAAA,CAAa+uB,CAAAA,CAAkBC,EAAiC,CAC9E,GAAM,CAACC,CAAAA,CAAUC,CAAW,CAAA,CAAI7pC,QAAAA,CAAmB,MAAM,CAAA,CACnD,CAAC8pC,CAAAA,CAAYC,CAAa,CAAA,CAAI/pC,QAAAA,CAAS,CAAC,CAAA,CACxC,CAACgqC,CAAAA,CAAQC,CAAS,CAAA,CAAIjqC,QAAAA,CAAS0pC,CAAQ,CAAA,CACvC,CAACQ,CAAAA,CAAYC,CAAa,CAAA,CAAInqC,QAAAA,CAAS2pC,CAAY,CAAA,CACnD,CAACS,CAAAA,CAAgBC,CAAiB,EAAIrqC,QAAAA,CAA0C,IAAI,CAAA,CACpF,CAACukC,EAAeC,CAAgB,CAAA,CAAIxkC,QAAAA,CAAwB,IAAI,EAChE,CAACsqC,CAAAA,CAAYC,CAAa,CAAA,CAAIvqC,SAAqB,IAAI,CAAA,CAGvD,CAACwqC,CAAAA,CAAqBC,CAAsB,CAAA,CAAIzqC,QAAAA,CAAwB,IAAI,CAAA,CAC5E,CAAC0qC,CAAAA,CAAsBC,CAAuB,CAAA,CAAI3qC,SAAS,CAAC,CAAA,CAC5D,CAAC4qC,CAAAA,CAAoBC,CAAqB,CAAA,CAAI7qC,QAAAA,CAAS,CAAC,CAAA,CACxD,CAAC8qC,CAAAA,CAAqBC,CAAsB,CAAA,CAAI/qC,QAAAA,CAAwB,IAAI,CAAA,CAC5E,CAAC6nC,CAAAA,CAAWmD,CAAY,EAAIhrC,QAAAA,CAAS,KAAK,CAAA,CAmBhD,OAAO,CACL,QAAA,CAAA4pC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,WAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,EACA,aAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,kBAAAC,CAAAA,CACA,aAAA,CAAA9F,CAAAA,CACA,gBAAA,CAAAC,EACA,UAAA,CAAA8F,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,oBAAAC,CAAAA,CACA,sBAAA,CAAAC,CAAAA,CACA,oBAAA,CAAAC,EACA,uBAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,sBAAAC,CAAAA,CACA,mBAAA,CAAAC,CAAAA,CACA,sBAAA,CAAAC,EACA,SAAA,CAAAlD,CAAAA,CACA,YAAA,CAAAmD,CAAAA,CACA,UAAA,CAzCiBpB,CAAAA,GAAa,MAAA,CA0C9B,UAAA,CAzCiBA,IAAa,cAAA,EAAkBA,CAAAA,GAAa,YAAA,CA0C7D,YAAA,CAzCmBA,IAAa,SAAA,CA0ChC,cAAA,CAvCqB,CAACzzC,CAAAA,CAAWwyB,KAAkB,CACnDkhB,CAAAA,CAAY,MAAM,CAAA,CAClBQ,EAAkB,IAAI,CAAA,CACtB7F,CAAAA,CAAiB,IAAI,EACrByF,CAAAA,CAAU9zC,CAAC,CAAA,CACXg0C,CAAAA,CAAcxhB,EAAK,CAAA,CACnBkiB,CAAAA,CAAsB,CAAC,CAAA,CACvBJ,EAAuB,IAAI,CAAA,CAC3BE,CAAAA,CAAwB,CAAC,EAC3B,CA+BA,CACF,CCvFO,SAASM,EAAAA,CAAQ,CACtB,IAAA,CAAA1jC,CAAAA,CACA,CAAA,CAAApR,CAAAA,CACA,EAAAC,CAAAA,CACA,KAAA,CAAAuyB,CAAAA,CACA,KAAA,CAAAtoB,EACA,QAAA,CAAA6qC,CAAAA,CACA,SAAA,CAAApoC,CAAAA,CACA,UAAAqyB,CAAAA,CACA,OAAA,CAAAttB,CAAAA,CACA,aAAA,CAAAsjC,EACA,aAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CAAmB,EAAC,CACpB,UAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CACF,CAAA,CAAiB,CAEf,IAAMlwB,CAAAA,CAAYZ,GAAaxkB,CAAAA,CAAGwyB,CAAK,CAAA,CACjC+iB,CAAAA,CAASpqC,OAAoB,IAAI,CAAA,CAGjCqqC,CAAAA,CAAwBrqC,MAAAA,CAAsB,IAAI,CAAA,CAClDsqC,CAAAA,CAAoBtqC,MAAAA,CAA0B,IAAI,EAGlD,CACJ,QAAA,CAAAsoC,CAAAA,CAAU,WAAA,CAAAC,EACV,UAAA,CAAAC,CAAAA,CAAY,aAAA,CAAAC,CAAAA,CACZ,MAAA,CAAAC,CAAAA,CAAQ,SAAA,CAAAC,CAAAA,CACR,WAAAC,CAAAA,CAAY,aAAA,CAAAC,CAAAA,CACZ,cAAA,CAAAC,EAAgB,iBAAA,CAAAC,CAAAA,CAChB,aAAA,CAAA9F,CAAAA,CAAe,iBAAAC,EAAAA,CACf,UAAA,CAAA8F,EAAAA,CAAY,aAAA,CAAAC,GACZ,mBAAA,CAAAC,EAAAA,CAAqB,sBAAA,CAAAC,EAAAA,CACrB,qBAAAC,EAAAA,CAAsB,uBAAA,CAAAC,CAAAA,CACtB,kBAAA,CAAAC,EAAoB,qBAAA,CAAAC,CAAAA,CACpB,mBAAA,CAAAC,CAAAA,CAAqB,uBAAAC,CAAAA,CACrB,SAAA,CAAAlD,CAAAA,CAAW,YAAA,CAAAmD,EAAAA,CACX,UAAA,CAAA3iC,EAAAA,CAAY,UAAA,CAAAwjC,GAAY,YAAA,CAAAC,EAAAA,CACxB,cAAA,CAAAC,EACF,EAAIxwB,CAAAA,CAEE6S,EAAAA,CAAS,EAAA,CACT4d,EAAAA,CAAe,EAGfC,EAAAA,CAAY1kC,CAAAA,CAAK,OAAA,EAAWA,CAAAA,CAAK,QAAU,IAAI,IAAA,EAAUA,CAAAA,CAAK,QAAA,CAAW,IACzE2kC,EAAAA,CAAW3kC,CAAAA,CAAK,cAAA,CAChB4kC,EAAAA,CAAiB9rC,EAAM,IAAA,GAAS,SAAA,EAAaA,CAAAA,CAAM,KAAA,GAAU,UAE7DmI,CAAAA,CAAcjB,CAAAA,CAAK,MAAA,GAAW,WAAA,EAAeA,CAAAA,CAAK,QAAA,GAAa,GAAA,CAI/DooB,EAAAA,CAA0C,CAC9C,GAAA,CAAK,SAAA,CACL,GAAA,CAAK,SAAA,CACL,OAAQ,SAAA,CACR,MAAA,CAAQ,SAAA,CACR,IAAA,CAAM,UACN,IAAA,CAAM,SAAA,CACN,MAAA,CAAQ,SAAA,CACR,OAAQ,SACV,CAAA,CAUMyc,EAAAA,CANA7kC,CAAAA,CAAK,gBAAkB0kC,EAAAA,CAAkB,SAAA,CACzC1kC,CAAAA,CAAK,KAAA,CAAcA,EAAK,KAAA,CACxBA,CAAAA,CAAK,QAAA,EAAYooB,EAAAA,CAAgBpoB,EAAK,QAAQ,CAAA,CAAUooB,EAAAA,CAAgBpoB,CAAAA,CAAK,QAAQ,CAAA,CAClFlH,CAAAA,CAAM,cAAA,CAaTgsC,IAPiBC,CAAAA,EACjBA,CAAAA,EAAY,EAAA,CAAW,EAAA,CACvBA,GAAY,EAAA,CAAW,EAAA,CACvBA,CAAAA,EAAY,EAAA,CAAW,GACpB,EAAA,EAGyB3jB,CAAK,CAAA,CACjC4jB,EAAAA,CAAa5jB,EAAQ,EAAA,CACrB6jB,EAAAA,CAAiB7jB,CAAAA,CAAQ,EAAA,CAI/BxoB,UAAU,IAAM,CACd,GAAIsrC,CAAAA,CACF,GAAI5D,CAAAA,EAAa,CAACx/B,EAAAA,EAAc,CAACd,EAAK,QAAA,CAAU,CAC9C,IAAMklC,CAAAA,CAAYr2C,CAAAA,CAAI,GAAA,CACtBq1C,CAAAA,CAAc,CACZ,KAAAlkC,CAAAA,CACA,CAAA,CAAApR,CAAAA,CACA,CAAA,CAAAC,EACA,KAAA,CAAAuyB,CAAAA,CACA,MAAA,CAAAyF,EAAAA,CACA,UAAAqe,CACF,CAAC,EACH,CAAA,KACEhB,EAAc,IAAI,EAGxB,CAAA,CAAG,CAAC5D,EAAWx/B,EAAAA,CAAYd,CAAAA,CAAMpR,CAAAA,CAAGC,CAAAA,CAAGuyB,EAAOyF,EAAAA,CAAQqd,CAAa,CAAC,CAAA,CAGpE,IAAMiB,CAAAA,CAAcrpC,CAAAA,EACXA,CAAAA,CAAK,kBAAA,CAAmB,OAAA,CAAS,CACtC,KAAA,CAAO,OAAA,CACP,IAAK,SAAA,CACL,IAAA,CAAM,SACR,CAAC,EAIG2jC,EAAAA,CAAc,IAAM,CACxB,IAAM9jC,EAAO,IAAA,CAAK,IAAA,CAAA,CAAMqE,CAAAA,CAAK,OAAA,CAAS,SAAQ,CAAIA,CAAAA,CAAK,SAAA,CAAW,OAAA,IAAc,KAAoB,CAAA,CACpG,OAAO,CAAA,EAAGrE,CAAI,CAAA,IAAA,EAAOA,CAAAA,GAAS,CAAA,CAAI,GAAA,CAAM,EAAE,CAAA,CAC5C,CAAA,CAGMypC,EAAAA,CAAaC,CAAAA,EACC,IAAA,CAAK,KAAA,CAAMA,CAAAA,CAAS1B,CAAQ,EAAIA,CAAAA,CAK9C2B,EAAAA,CAAeD,CAAAA,EAAyB,CAC5C,IAAM1pC,EAAAA,CAAO,IAAA,CAAK,KAAA,CAAM0pC,CAAAA,CAAS1B,CAAQ,CAAA,CACnCpe,EAAAA,CAAU,IAAI,IAAA,CAAKhqB,CAAS,CAAA,CAClC,OAAAgqB,EAAAA,CAAQ,OAAA,CAAQA,GAAQ,OAAA,EAAQ,CAAI5pB,EAAI,CAAA,CACjC4pB,EACT,CAAA,CAGMggB,EAAAA,CAAkB,CAACC,CAAAA,CAAgBC,KAAkC,CACzE,IAAA,IAAWC,EAAAA,IAAW1B,CAAAA,CAAkB,CAEtC,GAAI0B,EAAAA,CAAQ,EAAA,GAAO1lC,EAAK,EAAA,CAAI,SAG5B,IAAMm1B,EAAAA,CAAU,EAChB,GACEqQ,CAAAA,EAAUE,EAAAA,CAAQ,CAAA,CAAIvQ,IACtBqQ,CAAAA,EAAUE,EAAAA,CAAQ,CAAA,CAAIA,EAAAA,CAAQ,MAAQvQ,EAAAA,EACtCsQ,EAAAA,EAAUC,EAAAA,CAAQ,CAAA,CAAIvQ,IACtBsQ,EAAAA,EAAUC,EAAAA,CAAQ,CAAA,CAAIA,EAAAA,CAAQ,OAASvQ,EAAAA,CAEvC,OAAOuQ,EAAAA,CAAQ,EAEnB,CACA,OAAO,IACT,CAAA,CAoBMC,EAAAA,CAAkBr+B,YAAY,CAACxM,CAAAA,CAAqB8qC,EAAAA,CAAiBC,EAAAA,GAAsB,CAC/F/qC,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,iBAAgB,CAElB,IAAMgrC,EAAAA,CAAa3B,CAAAA,CAAO,SAAS,eAAA,CACnC,GAAI,CAAC2B,EAAAA,CAAY,OAEjB,IAAM7e,EAAAA,CAAQ6e,EAAAA,CAAW,cAAA,GACzB7e,EAAAA,CAAM,CAAA,CAAInsB,CAAAA,CAAE,OAAA,CACZmsB,GAAM,CAAA,CAAInsB,CAAAA,CAAE,OAAA,CACZ,IAAMirC,GAAW9e,EAAAA,CAAM,eAAA,CAAgB6e,EAAAA,CAAW,YAAA,EAAa,EAAG,OAAA,EAAS,CAAA,CAGrEE,EAAaH,EAAAA,GAAa,MAAA,CAAYA,EAAAA,CAAWj3C,CAAAA,CAGnDq3C,EAAaL,EAAAA,CACjB,GAAI,CAACK,CAAAA,CAAY,CACf,IAAMC,EAAAA,CAAYH,EAAAA,CAAS,CAAA,CAAIC,EAG3BlrC,CAAAA,CAAE,QAAA,EAEJmrC,CAAAA,CAAa,SAAA,CACbnD,EAAkB,CAAE,CAAA,CAAGl0C,CAAAA,CAAIwyB,CAAAA,CAAO,EAAGvyB,CAAAA,CAAIg4B,EAAAA,CAAS,CAAE,CAAC,GAC5C/rB,CAAAA,CAAE,OAAA,EAAWA,CAAAA,CAAE,OAAA,CAExBmrC,CAAAA,CAAa,MAAA,CACJnrC,CAAAA,CAAE,MAAA,CAEXmrC,EAAaC,EAAAA,CAAY9kB,CAAAA,CAAQ,CAAA,CAAI,cAAA,CAAiB,aAG/C6jB,EAAAA,CAEHiB,EAAAA,CAAY9kB,CAAAA,CAAQ,CAAA,CACtB6kB,EAAa,MAAA,CAEbA,CAAAA,CAAa,YAAA,CAENjB,EAAAA,CAELkB,IAAapB,EAAAA,CAAc,CAAA,CAC7BmB,CAAAA,CAAa,cAAA,CACJC,IAAa9kB,CAAAA,CAAQ0jB,EAAAA,CAAc,CAAA,CAC5CmB,CAAAA,CAAa,aAEbA,CAAAA,CAAa,MAAA,CAIXC,EAAAA,EAAapB,EAAAA,CACfmB,EAAa,cAAA,CACJC,EAAAA,EAAa9kB,CAAAA,CAAQ0jB,EAAAA,CAC9BmB,CAAAA,CAAa,YAAA,CAEbA,CAAAA,CAAa,OAGnB,CAEA3D,CAAAA,CAAY2D,CAAU,CAAA,CACtBxC,EAAAA,CAAa,KAAK,CAAA,CAClBT,EAAAA,CAAc,IAAI,CAAA,CAEdiD,IAAe,MAAA,CAEjBzD,CAAAA,CAAcuD,EAAAA,CAAS,CAAA,CAAIC,CAAU,CAAA,CAC5BC,CAAAA,GAAe,SAAA,CACxBnD,CAAAA,CAAkB,CAAE,CAAA,CAAGl0C,CAAAA,CAAIwyB,CAAAA,CAAO,CAAA,CAAGvyB,EAAIg4B,EAAAA,CAAS,CAAE,CAAC,CAAA,CAErD2b,EAAc,CAAC,CAAA,CAGjBE,CAAAA,CAAUsD,CAAU,CAAA,CACpBpD,CAAAA,CAAcxhB,CAAK,EACrB,EAAG,CAACxyB,CAAAA,CAAGwyB,CAAAA,CAAOvyB,CAAAA,CAAGg4B,EAAM,CAAC,CAAA,CAGlBsf,EAAAA,CAAoB7+B,WAAAA,CAAaxM,GAAkB,CACvD,IAAMgrC,EAAAA,CAAa3B,CAAAA,CAAO,SAAS,eAAA,CACnC,GAAI,CAAC2B,EAAAA,CAAY,OAGjB,IAAMM,EAAAA,CAAiBN,EAAAA,CAAW,OAAA,CAAQ,wBAAwB,CAAA,CAClE,GAAI,CAACM,EAAAA,CAAgB,OAErB,IAAMlsC,EAAAA,CAAOksC,EAAAA,CAAe,qBAAA,EAAsB,CAC5CC,EAAAA,CAAgB,EAAA,CAChBC,EAAAA,CAAc,GAEhBC,CAAAA,CAAc,CAAA,CAGlB,GAAIzrC,CAAAA,CAAE,QAAUZ,EAAAA,CAAK,IAAA,CAAOmsC,EAAAA,CAAe,CACzC,IAAMG,CAAAA,CAAWtsC,EAAAA,CAAK,IAAA,CAAOmsC,EAAAA,CAAgBvrC,EAAE,OAAA,CAC/CyrC,CAAAA,CAAc,CAAC,IAAA,CAAK,IAAID,EAAAA,CAAaE,CAAAA,CAAW,CAAC,EACnD,SAES1rC,CAAAA,CAAE,OAAA,CAAUZ,EAAAA,CAAK,KAAA,CAAQmsC,GAAe,CAC/C,IAAMG,CAAAA,CAAW1rC,CAAAA,CAAE,OAAA,EAAWZ,EAAAA,CAAK,KAAA,CAAQmsC,EAAAA,CAAAA,CAC3CE,EAAc,IAAA,CAAK,GAAA,CAAID,EAAAA,CAAaE,CAAAA,CAAW,CAAC,EAClD,CAEA,OAAID,CAAAA,GAAgB,IAClBH,EAAAA,CAAe,UAAA,EAAcG,CAAAA,CAAAA,CAGxBA,CAAAA,GAAgB,CACzB,CAAA,CAAG,EAAE,CAAA,CAGCtH,GAAkB33B,WAAAA,CAAaxM,CAAAA,EAAkB,CACrD,GAAIunC,IAAa,MAAA,CAAQ,OAGzBgC,CAAAA,CAAkB,OAAA,CAAUvpC,EAE5B,IAAMgrC,EAAAA,CAAa3B,CAAAA,CAAO,OAAA,EAAS,eAAA,CACnC,GAAI,CAAC2B,EAAAA,CAAY,OAGjB,GAAIzD,CAAAA,GAAa,MAAA,EAAUA,CAAAA,GAAa,gBAAkBA,CAAAA,GAAa,YAAA,CAAc,CACnF,IAAMoE,GAAcN,EAAAA,CAAkBrrC,CAAC,CAAA,CAGnC2rC,EAAAA,EAAe,CAACrC,CAAAA,CAAsB,OAAA,CACxCA,CAAAA,CAAsB,OAAA,CAAU,OAAO,WAAA,CAAY,IAAM,CACnDC,CAAAA,CAAkB,UACpB8B,EAAAA,CAAkB9B,CAAAA,CAAkB,OAAO,CAAA,CAE3CpF,GAAgBoF,CAAAA,CAAkB,OAAO,CAAA,EAE7C,CAAA,CAAG,EAAE,CAAA,CACI,CAACoC,EAAAA,EAAerC,CAAAA,CAAsB,UAE/C,MAAA,CAAO,aAAA,CAAcA,CAAAA,CAAsB,OAAO,EAClDA,CAAAA,CAAsB,OAAA,CAAU,IAAA,EAEpC,CAEA,IAAMnd,EAAAA,CAAQ6e,EAAAA,CAAW,cAAA,EAAe,CACxC7e,GAAM,CAAA,CAAInsB,CAAAA,CAAE,OAAA,CACZmsB,EAAAA,CAAM,EAAInsB,CAAAA,CAAE,OAAA,CACZ,IAAMirC,EAAAA,CAAW9e,GAAM,eAAA,CAAgB6e,EAAAA,CAAW,YAAA,EAAa,EAAG,SAAS,CAAA,CAE3E,GAAIzD,CAAAA,GAAa,SAAA,CAAW,CAE1BS,CAAAA,CAAkB,CAAE,EAAGiD,EAAAA,CAAS,CAAA,CAAG,CAAA,CAAGA,EAAAA,CAAS,CAAE,CAAC,CAAA,CAGlD,IAAMW,EAAAA,CAAenB,GAAgBQ,EAAAA,CAAS,CAAA,CAAGA,EAAAA,CAAS,CAAC,EAC3D9I,EAAAA,CAAiByJ,EAAY,EAC/B,CAAA,KAAA,GAAWrE,IAAa,MAAA,CAAQ,CAE9B,IAAMsE,EAAAA,CAAUZ,GAAS,CAAA,CAAIxD,CAAAA,CACvBqE,EAAAA,CAAWxB,EAAAA,CAAUuB,EAAO,CAAA,CAClCjE,CAAAA,CAAUkE,EAAQ,CAAA,CAClBhE,CAAAA,CAAcxhB,CAAK,CAAA,CAGnB,IAAMylB,EAAY,IAAA,CAAK,KAAA,CAAA,CAAOD,EAAAA,CAAWh4C,CAAAA,EAAK+0C,CAAQ,CAAA,CAItD,GAHAM,CAAAA,GAAajkC,CAAAA,CAAK,GAAI6mC,CAAAA,CAAW,IAAI,CAAA,CAGjC7mC,CAAAA,CAAK,UAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,EAAKijC,KAAwB,IAAA,CAAM,CAC7E,IAAM6D,CAAAA,CAAgBF,GAAWzD,EAAAA,CACjCG,CAAAA,CAAsBwD,CAAa,EACrC,CACF,CAAA,KAAA,GAAWzE,CAAAA,GAAa,cAAA,CAAgB,CAEtC,IAAM0E,EAAAA,CAAchB,EAAAA,CAAS,CAAA,CACvBiB,GAAe5B,EAAAA,CAAU2B,EAAW,CAAA,CACpC5H,CAAAA,CAAYvwC,EAAIwyB,CAAAA,CAAS4lB,EAAAA,CAG3B7H,CAAAA,EAAYwE,CAAAA,GACdjB,EAAUsE,EAAY,CAAA,CACtBpE,CAAAA,CAAczD,CAAQ,GAE1B,CAAA,KAAA,GAAWkD,CAAAA,GAAa,YAAA,CAAc,CAEpC,IAAM4E,EAAAA,CAAYlB,EAAAA,CAAS,CAAA,CAErB5G,CAAAA,CADaiG,GAAU6B,EAAS,CAAA,CACRr4C,CAAAA,CAG1BuwC,CAAAA,EAAYwE,GACdf,CAAAA,CAAczD,CAAQ,EAE1B,CACF,CAAA,CAAG,CAACkD,CAAAA,CAAUzzC,CAAAA,CAAGwyB,EAAOuiB,CAAAA,CAAUpB,CAAAA,CAAYviC,CAAAA,CAAMolC,EAAAA,CAAWnC,GAAqBE,EAAAA,CAAsBoC,EAAAA,CAAiBtI,EAAAA,CAAkB6F,CAAAA,CAAmBJ,EAAWE,CAAAA,CAAeU,CAAAA,CAAuBW,CAAAA,CAAYkC,EAAiB,CAAC,CAAA,CAGzO/G,EAAAA,CAAgB93B,WAAAA,CAAY,IAAM,CAQtC,GANI88B,CAAAA,CAAsB,OAAA,GACxB,MAAA,CAAO,cAAcA,CAAAA,CAAsB,OAAO,CAAA,CAClDA,CAAAA,CAAsB,QAAU,IAAA,CAAA,CAElCC,CAAAA,CAAkB,OAAA,CAAU,IAAA,CAExBhC,CAAAA,GAAa,MAAA,CAEjB,CAAA,GAAIA,CAAAA,GAAa,UAEXrF,CAAAA,EAAiB+G,CAAAA,EACnBA,CAAAA,CAAmB/jC,CAAAA,CAAMg9B,CAAa,CAAA,CAExC8F,CAAAA,CAAkB,IAAI,CAAA,CACtB7F,GAAiB,IAAI,CAAA,CAAA,KAChB,CACL,IAAMiK,EAAelnC,CAAAA,CAAK,OAAA,CAAS,OAAA,EAAQ,CAAIA,EAAK,SAAA,CAAW,OAAA,EAAQ,CACnE2R,EAAAA,CACAD,GACAy1B,EAAAA,CAAU,IAAA,CAEd,GAAI9E,CAAAA,GAAa,QAMf,GAJA1wB,EAAAA,CAAe2zB,EAAAA,CAAY7C,CAAM,CAAA,CACjC/wB,EAAAA,CAAa,IAAI,IAAA,CAAKC,GAAa,OAAA,EAAQ,CAAIu1B,CAAY,CAAA,CAGvDlnC,EAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,GAAKijC,EAAAA,GAAwB,IAAA,CAAM,CAC7E,IAAMmE,GAAY,IAAA,CAAK,KAAA,CAAM/D,CAAAA,CAAqBM,CAAQ,EACpD0D,EAAAA,CAAkBrnC,CAAAA,CAAK,QAAA,CAAS,GAAA,CAAI,CAACsnC,EAAAA,CAAKpqB,EAAAA,GAAQ,CAEtD,GAAIA,KAAQ+lB,EAAAA,CAAqB,CAC/B,IAAMsE,CAAAA,CAAc,IAAI,IAAA,CAAKD,EAAAA,CAAI,SAAS,EACpCE,EAAAA,CAAY,IAAI,IAAA,CAAKF,EAAAA,CAAI,OAAO,CAAA,CACtC,OAAAC,CAAAA,CAAY,OAAA,CAAQA,EAAY,OAAA,EAAQ,CAAIH,EAAS,CAAA,CACrDI,GAAU,OAAA,CAAQA,EAAAA,CAAU,OAAA,EAAQ,CAAIJ,EAAS,CAAA,CAC1C,CAAE,SAAA,CAAWG,CAAAA,CAAa,QAASC,EAAU,CACtD,CAEA,OAAOF,EACT,CAAC,CAAA,CAGKG,CAAAA,CAAWJ,EAAAA,CAAgB,QAAQl8B,EAAAA,EAAK,CAACA,EAAAA,CAAE,SAAA,CAAWA,GAAE,OAAO,CAAC,CAAA,CAChEu8B,CAAAA,CAAe,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,GAAGD,EAAS,GAAA,CAAItpC,EAAAA,EAAKA,EAAAA,CAAE,OAAA,EAAS,CAAC,CAAC,CAAA,CACnEwpC,EAAAA,CAAa,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,GAAGF,EAAS,GAAA,CAAItpC,EAAAA,EAAKA,EAAAA,CAAE,OAAA,EAAS,CAAC,CAAC,CAAA,CAGvE2lC,CAAAA,GAAe,CAAE,GAAG9jC,CAAAA,CAAM,QAAA,CAAUqnC,EAAgB,CAAA,CAAGK,CAAAA,CAAcC,EAAU,CAAA,CAE/EnD,GAAe51C,CAAAA,CAAGwyB,CAAK,CAAA,CACvB,MACF,OACSihB,CAAAA,GAAa,cAAA,EAEtB1wB,EAAAA,CAAe2zB,EAAAA,CAAY7C,CAAM,CAAA,CACjC/wB,EAAAA,CAAa1R,CAAAA,CAAK,OAAA,CAGd2R,GAAeD,EAAAA,GACjB,OAAA,CAAQ,IAAA,CAAK,oEAAoE,EACjFy1B,EAAAA,CAAU,KAAA,CAAA,EAEH9E,CAAAA,GAAa,YAAA,EAEtB1wB,GAAe3R,CAAAA,CAAK,SAAA,CACpB0R,EAAAA,CAAa4zB,EAAAA,CAAY7C,CAAAA,CAASE,CAAU,CAAA,CAGxCjxB,EAAAA,CAAaC,KACf,OAAA,CAAQ,IAAA,CAAK,mEAAmE,CAAA,CAChFw1B,GAAU,KAAA,CAAA,EAIZA,EAAAA,CAAU,KAAA,CAIRA,EAAAA,EAAWx1B,IAAiBD,EAAAA,GAE1BA,EAAAA,CAAW,OAAA,EAAQ,CAAIC,GAAa,OAAA,EAAQ,CAC9C,OAAA,CAAQ,IAAA,CAAK,0DAA0D,CAAA,CAGvEmyB,CAAAA,GAAe9jC,CAAAA,CAAM2R,EAAAA,CAAcD,EAAU,CAAA,EAGnD,CAGAuyB,CAAAA,GAAajkC,CAAAA,CAAK,GAAI,CAAA,CAAG,KAAK,CAAA,CAG9BwkC,EAAAA,CAAe51C,CAAAA,CAAGwyB,CAAK,EAAA,CACzB,CAAA,CAAG,CAACihB,CAAAA,CAAUI,CAAAA,CAAQE,CAAAA,CAAY3iC,CAAAA,CAAM8jC,EAAc9G,CAAAA,CAAe+G,CAAAA,CAAoBn1C,CAAAA,CAAGwyB,CAAAA,CAAOuiB,EAAU2B,EAAAA,CAAajC,CAAAA,CAAoBJ,EAAAA,CAAqBuB,EAAAA,CAAgBP,CAAU,CAAC,CAAA,CAG9LrrC,SAAAA,CAAU,IAAM,CACd,GAAIypC,CAAAA,GAAa,MAAA,CAAQ,OAEzB,IAAMuF,CAAAA,CAAyB9sC,EAAAA,EAAkB,CAC/CmkC,EAAAA,CAAgBnkC,EAAC,EACnB,CAAA,CAEM+sC,EAAAA,CAAsB,IAAM,CAChCzI,EAAAA,GACF,CAAA,CAEA,cAAO,gBAAA,CAAiB,WAAA,CAAawI,CAAqB,CAAA,CAC1D,OAAO,gBAAA,CAAiB,SAAA,CAAWC,EAAmB,CAAA,CAE/C,IAAM,CACX,MAAA,CAAO,mBAAA,CAAoB,WAAA,CAAaD,CAAqB,CAAA,CAC7D,MAAA,CAAO,mBAAA,CAAoB,SAAA,CAAWC,EAAmB,CAAA,CAErDzD,CAAAA,CAAsB,OAAA,GACxB,MAAA,CAAO,cAAcA,CAAAA,CAAsB,OAAO,CAAA,CAClDA,CAAAA,CAAsB,QAAU,IAAA,EAEpC,CACF,CAAA,CAAG,CAAC/B,CAAAA,CAAUpD,EAAAA,CAAiBG,EAAa,CAAC,EAG7C,IAAM0I,EAAAA,CAAWhnC,EAAAA,EAAc,CAACyjC,GAAe9B,CAAAA,CAAS7zC,CAAAA,CAClDm5C,EAAAA,CAAejnC,EAAAA,EAAc,CAACyjC,EAAAA,CAAe5B,CAAAA,CAAavhB,CAAAA,CAI1D4mB,CAAAA,CAAcpa,EAAU,SAAA,CAAU5tB,CAAI,CAAA,CAU5C,OACE3G,KAAC,GAAA,CAAA,CACC,GAAA,CAAK8qC,CAAAA,CACL,eAAA,CAAc,OACd,OAAA,CAAS,IAAM,CAACrjC,EAAAA,EAAcR,IAAUN,CAAI,CAAA,CAC5C,aAAA,CAAgBlF,CAAAA,EAAM,CACfgG,EAAAA,GACHhG,CAAAA,CAAE,eAAA,GACF8oC,CAAAA,GAAgB5jC,CAAI,CAAA,EAExB,CAAA,CACA,cAAgBlF,CAAAA,EAAM,CACpBA,CAAAA,CAAE,cAAA,GACF+oC,CAAAA,GAAgB7jC,CAAAA,CAAMlF,CAAQ,EAChC,EACA,YAAA,CAAc,IAAM,CAACgG,EAAAA,EAAc2iC,GAAa,IAAI,CAAA,CACpD,YAAA,CAAc,IAAM,CACb3iC,EAAAA,GACH2iC,EAAAA,CAAa,KAAK,CAAA,CAClBT,GAAc,IAAI,CAAA,EAEtB,CAAA,CAIA,QAAA,CAAA,CAAA7qC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CACH,EAAGC,CAAAA,CACH,KAAA,CAAOuyB,CAAAA,CA9Be,EAAA,CA+BtB,OAAQyF,EAAAA,CACR,IAAA,CAAK,aAAA,CACL,KAAA,CAAO,CAAE,aAAA,CAAe,KAAM,CAAA,CAChC,CAAA,CAGCyZ,GAAa,CAACx/B,EAAAA,EAAc,CAACkkC,EAAAA,EAAc,CAAChlC,CAAAA,CAAK,QAAA,EAChD3G,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,EACH,CAAA,CAAGC,CAAAA,CACH,KAAA,CAAOi2C,EAAAA,CACP,MAAA,CAAQje,EAAAA,CACR,IAAA,CAAMkc,EAAAA,GAAe,eAAiBjqC,CAAAA,CAAM,MAAA,CAAS,aAAA,CACrD,OAAA,CAASiqC,KAAe,cAAA,CAAiB,GAAA,CAAO,CAAA,CAChD,KAAA,CAAO,CAAE,MAAA,CAAQ,WAAA,CAAa,aAAA,CAAe,KAAM,EACnD,YAAA,CAAc,IAAMC,EAAAA,CAAc,cAAc,EAChD,WAAA,CAAcloC,CAAAA,EAAM6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,cAAc,CAAA,CAC9D,CAAA,CAEA3C,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CAAIk2C,EAAAA,CACP,CAAA,CAAGj2C,CAAAA,CACH,KAAA,CAAOuyB,CAAAA,CAAQ0jB,EAAAA,CAAc,CAAA,CAC7B,OAAQje,EAAAA,CACR,IAAA,CAAMkc,EAAAA,GAAe,MAAA,CAASjqC,EAAM,MAAA,CAAS,aAAA,CAC7C,OAAA,CAASiqC,EAAAA,GAAe,OAAS,EAAA,CAAM,CAAA,CACvC,KAAA,CAAO,CAAE,OAAQ,MAAA,CAAQ,aAAA,CAAe,KAAM,CAAA,CAC9C,aAAc,IAAMC,EAAAA,CAAc,MAAM,CAAA,CACxC,YAAcloC,CAAAA,EAAM6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,MAAM,EACtD,CAAA,CAEA3C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ0jB,EAAAA,CACf,CAAA,CAAGj2C,EACH,KAAA,CAAOi2C,EAAAA,CACP,MAAA,CAAQje,EAAAA,CACR,KAAMkc,EAAAA,GAAe,YAAA,CAAejqC,CAAAA,CAAM,MAAA,CAAS,cACnD,OAAA,CAASiqC,EAAAA,GAAe,YAAA,CAAe,GAAA,CAAO,EAC9C,KAAA,CAAO,CAAE,MAAA,CAAQ,WAAA,CAAa,cAAe,KAAM,CAAA,CACnD,YAAA,CAAc,IAAMC,GAAc,YAAY,CAAA,CAC9C,WAAA,CAAcloC,CAAAA,EAAM6qC,GAAgB7qC,CAAAA,CAAU,YAAY,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,CAIDwlC,CAAAA,EAAa,CAACx/B,EAAAA,EAAcmkC,IAC3B5rC,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,IAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CACH,CAAA,CAAGC,EACH,KAAA,CAAOuyB,CAAAA,CAAQ,CAAA,CACf,MAAA,CAAQyF,GACR,IAAA,CAAMkc,EAAAA,GAAe,MAAA,CAASjqC,CAAAA,CAAM,OAAS,aAAA,CAC7C,OAAA,CAASiqC,EAAAA,GAAe,MAAA,CAAS,GAAM,CAAA,CACvC,KAAA,CAAO,CAAE,MAAA,CAAQ,OAAQ,aAAA,CAAe,KAAM,CAAA,CAC9C,YAAA,CAAc,IAAMC,EAAAA,CAAc,MAAM,CAAA,CACxC,YAAcloC,CAAAA,EAAM6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,MAAM,EACtD,CAAA,CAEA3C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,EAAIwyB,CAAAA,CAAQ,CAAA,CACf,CAAA,CAAGvyB,CAAAA,CACH,MAAOuyB,CAAAA,CAAQ,CAAA,CACf,MAAA,CAAQyF,EAAAA,CACR,KAAMkc,EAAAA,GAAe,YAAA,CAAejqC,CAAAA,CAAM,MAAA,CAAS,cACnD,OAAA,CAASiqC,EAAAA,GAAe,YAAA,CAAe,EAAA,CAAM,EAC7C,KAAA,CAAO,CAAE,MAAA,CAAQ,WAAA,CAAa,aAAA,CAAe,KAAM,CAAA,CACnD,YAAA,CAAc,IAAMC,EAAAA,CAAc,YAAY,CAAA,CAC9C,WAAA,CAAcloC,GAAM6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,YAAY,CAAA,CAC5D,EAECwlC,CAAAA,EACCnoC,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,EAAA,CAAIzZ,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAChB,GAAIvyB,CAAAA,CAAI,CAAA,CACR,EAAA,CAAID,CAAAA,CAAIwyB,EAAQ,CAAA,CAChB,EAAA,CAAIvyB,CAAAA,CAAIg4B,EAAAA,CAAS,EACjB,MAAA,CAAQ/tB,CAAAA,CAAM,YAAA,CACd,WAAA,CAAa,CAAA,CACb,eAAA,CAAgB,KAAA,CAChB,OAAA,CAAS,GACT,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,OAAA,CAAS,CAAE,OAAA,CAAS,EAAI,EACxB,UAAA,CAAY,CAAE,QAAA,CAAU,EAAI,EAC5B,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EACjC,CAAA,CAAA,CAEJ,CAAA,CAMDgI,EAAAA,EAAc,CAACyjC,IAAgB,CAACvkC,CAAAA,CAAK,QAAA,EACpC7H,GAAAA,CAACkQ,OAAO,IAAA,CAAP,CACC,CAAA,CAAGo6B,CAAAA,CACH,CAAA,CAAG5zC,CAAAA,CACH,KAAA,CAAO8zC,CAAAA,CACP,OAAQ9b,EAAAA,CACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAM3rC,EAAM,MAAA,CACZ,OAAA,CAAS,EAAA,CACT,MAAA,CAAQA,EAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,eAAA,CAAgB,MAChB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,OAAA,CAAS,CAAE,OAAA,CAAS,EAAI,EACxB,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,EAC7B,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EACjC,CAAA,CAOD,CAACkH,CAAAA,CAAK,QAAA,EACL7H,IAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAGy/B,GACH,CAAA,CAAGj5C,CAAAA,CACH,KAAA,CAAOk5C,EAAAA,CACP,OAAQlhB,EAAAA,CACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAMI,GACN,iBAAA,CAAiBmD,CAAAA,CACjB,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CACnC,QAAS,CACP,OAAA,CAASlnC,EAAAA,EAAc,CAACyjC,GACpB,GAAA,CACAvkC,CAAAA,CAAK,QAAA,CACL,EAAA,CACAsgC,CAAAA,CACA,EAAA,CACA,EAAA,CACJ,KAAA,CAAOA,GAAa,CAACx/B,EAAAA,CAAa,IAAA,CAAO,CAC3C,EACA,UAAA,CAAY,CACV,QAAA,CAAU,EAAA,CACV,KAAM,CAAC,EAAA,CAAK,CAAA,CAAG,EAAA,CAAK,CAAC,CACvB,CAAA,CACA,WAAA,CAAchG,CAAAA,EAAM6qC,GAAgB7qC,CAAQ,CAAA,CAC5C,KAAA,CAAO,CACL,OAAQgG,EAAAA,CAAcyjC,EAAAA,CAAe,WAAA,CAAcD,EAAAA,CAAa,YAAc,UAAA,CAAc,MAAA,CAC5F,aAAA,CAAe,KACjB,CAAA,CACF,CAAA,CAOD,CAACtkC,CAAAA,CAAK,UACL7H,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CACH,EAAGj5C,CAAAA,CACH,KAAA,CAAOk5C,EAAAA,EAAgB/nC,CAAAA,CAAK,SAAW,GAAA,CAAA,CACvC,MAAA,CAAQ6mB,EAAAA,CACR,EAAA,CAAI4d,GACJ,IAAA,CAAMI,EAAAA,CACN,OAAA,CAAS,CAAA,CACT,MAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,EAID7kC,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,IAAI,CAACioC,CAAAA,CAAS/qB,EAAAA,GAAQ,CACpD,IAAMgrB,EAAAA,CAAAA,CAAkBD,CAAAA,CAAQ,SAAA,CAAU,SAAQ,CAAI1sC,CAAAA,CAAU,OAAA,EAAQ,EAAM,MAAwBooC,CAAAA,CAEhGwE,EAAAA,CAAAA,CADgBF,CAAAA,CAAQ,OAAA,CAAQ,SAAQ,CAAI1sC,CAAAA,CAAU,OAAA,EAAQ,GAAM,IAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAA,CAAOooC,CAAAA,CAC/DuE,GAAgBvE,CAAAA,CAG7CyE,EAAAA,CAAwBtnC,EAAAA,EAAcuhC,CAAAA,GAAa,QAAUY,EAAAA,GAAwB/lB,EAAAA,CACrFmrB,CAAAA,CAAuB9E,CAAAA,GAAwBrmB,GAC/CorB,CAAAA,CAAkBF,EAAAA,CAAwBF,EAAAA,CAAgB7E,CAAAA,CAAqB6E,EAAAA,CAErF,OACE7uC,IAAAA,CAAC,GAAA,CAAA,CAEC,aAAc,IAAM,CAACyH,EAAAA,EAAc0iC,CAAAA,CAAuBtmB,EAAG,CAAA,CAC7D,YAAA,CAAc,IAAM,CAACpc,IAAc0iC,CAAAA,CAAuB,IAAI,CAAA,CAM9D,QAAA,CAAA,CAAArrC,IAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAGigC,EACH,CAAA,CAAGz5C,CAAAA,CACH,KAAA,CAAOs5C,EAAAA,CACP,OAAQthB,EAAAA,CACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAMI,GACN,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CACnC,OAAA,CAAS,CACP,OAAA,CAASuD,EAAAA,EAELpoC,CAAAA,CAAK,QAAA,CADL,GAGAqoC,CAAAA,CACA,EAAA,CACA,EAAA,CACJ,KAAA,CAAOA,GAAwB,CAACvnC,EAAAA,CAAa,IAAA,CAAO,CACtD,EACA,UAAA,CAAY,CACV,QAAA,CAAU,EAAA,CACV,KAAM,CAAC,EAAA,CAAK,CAAA,CAAG,EAAA,CAAK,CAAC,CACvB,CAAA,CACA,WAAA,CAAchG,EAAAA,EAAM,CAElBA,EAAAA,CAAE,eAAA,EAAgB,CAClBooC,EAAAA,CAAuBhmB,EAAG,CAAA,CAC1BkmB,CAAAA,CAAwB8E,EAAa,EACrCvC,EAAAA,CAAgB7qC,EAAAA,CAAU,MAAA,CAAWotC,EAAa,EACpD,CAAA,CACA,KAAA,CAAO,CACL,MAAA,CAAQpnC,GAAcyjC,EAAAA,CAAe,WAAA,CAAcD,EAAAA,CAAa,WAAA,CAAc,WAAc,MAAA,CAC5F,aAAA,CAAe,KACjB,CAAA,CACF,EAIAnsC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGmwC,CAAAA,CACH,EAAGz5C,CAAAA,CACH,KAAA,CAAOs5C,EAAAA,EAAgBnoC,CAAAA,CAAK,SAAW,GAAA,CAAA,CACvC,MAAA,CAAQ6mB,EAAAA,CACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAMI,EAAAA,CACN,OAAA,CAAS,EACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EACjC,CAAA,CAAA,CAAA,CAtDK,CAAA,QAAA,EAAW3nB,EAAG,CAAA,CAuDrB,CAEJ,CAAC,CAAA,CAIA0nB,EAAAA,GAAmBF,EAAAA,EAAaC,KAAa,CAAC3kC,CAAAA,CAAK,QAAA,EAClD3G,IAAAA,CAAA6G,SAAA,CAEG,QAAA,CAAA,CAAAykC,EAAAA,EAAY,CAACD,IACZvsC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CACH,EAAGj5C,CAAAA,CACH,KAAA,CAAOk5C,EAAAA,CACP,MAAA,CAAQlhB,GACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAK,MAAA,CACL,OAAQ3rC,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,gBAAgB,KAAA,CAChB,OAAA,CAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAID4rC,IACCvsC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CACH,EAAGj5C,CAAAA,CACH,KAAA,CAAOk5C,EAAAA,CACP,MAAA,CAAQlhB,GACR,EAAA,CAAI4d,EAAAA,CACJ,IAAA,CAAK,wBAAA,CACL,QAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAAA,CAEJ,CAAA,CAKDsD,GAAe,EAAA,EAAM,CAAC/nC,CAAAA,CAAK,QAAA,EAAA,CAAa,IAAM,CAC7C,IAAMsB,CAAAA,CAAQssB,CAAAA,CAAU,UAAU5tB,CAAI,CAAA,CAChCuoC,EAAAA,CAAY,OAAOjnC,GAAU,QAAA,CAAWA,CAAAA,CAAQtB,CAAAA,CAAK,IAAA,CACrDwoC,GAAYD,EAAAA,CAAU,MAAA,CAAS,IAAA,CAAK,KAAA,CAAMR,GAAe,CAAC,CAAA,CAC5D,CAAA,EAAGQ,EAAAA,CAAU,UAAU,CAAA,CAAG,IAAA,CAAK,KAAA,CAAMR,EAAAA,CAAe,CAAC,CAAC,CAAC,CAAA,GAAA,CAAA,CACvDQ,GAEJ,OACEpwC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,GAAW,EAAA,CACd,CAAA,CAAGj5C,CAAAA,CAAIg4B,EAAAA,CAAS,EAChB,gBAAA,CAAiB,QAAA,CACjB,IAAA,CAAM5lB,CAAAA,CAAc,2BAA6B,SAAA,CACjD,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,MACX,UAAA,CAAW,mBAAA,CACX,KAAA,CAAO,CACL,cAAe,MAAA,CACf,UAAA,CAAY,MAAA,CAEZ,cAAA,CAAgBA,EAAc,cAAA,CAAiB,MACjD,CAAA,CAEC,QAAA,CAAAunC,EAAAA,CACH,CAEJ,CAAA,GAAG,CAIFT,GAAe,GAAA,EAAO/nC,CAAAA,CAAK,QAAA,CAAW,CAAA,EAAKA,EAAK,QAAA,CAAW,GAAA,EAAO,CAACc,EAAAA,EAAc,CAACd,CAAAA,CAAK,QAAA,EACtF3G,IAAAA,CAAC,MAAA,CAAA,CACC,EAAGyuC,EAAAA,CAAWC,EAAAA,CAAe,EAAA,CAC7B,CAAA,CAAGl5C,EAAIg4B,EAAAA,CAAS,CAAA,CAChB,gBAAA,CAAiB,QAAA,CACjB,WAAW,KAAA,CACX,IAAA,CAAK,0BAAA,CACL,QAAA,CAAS,KACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CACX,KAAA,CAAO,CAAE,aAAA,CAAe,MAAA,CAAQ,WAAY,MAAO,CAAA,CAElD,QAAA,CAAA,CAAA7mB,CAAAA,CAAK,SAAS,GAAA,CAAA,CACjB,CAAA,CAKDA,CAAAA,CAAK,MAAA,EAAU+nC,GAAe,EAAA,EAAM,CAACjnC,EAAAA,EAAc,CAACd,EAAK,QAAA,EACxD3G,IAAAA,CAAC,GAAA,CAAA,CAAE,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CAC/B,QAAA,CAAA,CAAA2G,EAAK,MAAA,GAAW,WAAA,EACf7H,GAAAA,CAAC,QAAA,CAAA,CACC,GAAI2vC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAC9B,EAAA,CAAIl5C,CAAAA,CAAI,CAAA,CACR,CAAA,CAAG,CAAA,CACH,KAAMiK,CAAAA,CAAM,eAAA,CACZ,MAAA,CAAO,SAAA,CACP,YAAa,GAAA,CACf,CAAA,CAEDkH,CAAAA,CAAK,MAAA,GAAW,eACf7H,GAAAA,CAAC,QAAA,CAAA,CACC,EAAA,CAAI2vC,EAAAA,CAAWC,GAAe,CAAA,CAC9B,EAAA,CAAIl5C,CAAAA,CAAI,CAAA,CACR,EAAG,CAAA,CACH,IAAA,CAAMiK,CAAAA,CAAM,gBAAA,CACZ,OAAO,SAAA,CACP,WAAA,CAAa,GAAA,CACb,OAAA,CAAS,GACX,CAAA,CAAA,CAEJ,CAAA,CAAA,CAIAwnC,CAAAA,EAAagE,EAAAA,GAAe,CAACC,EAAAA,EAAgB,CAACvkC,CAAAA,CAAK,UACnD3G,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA7G,KAAC,GAAA,CAAA,CAEC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,EAAG2vC,EAAAA,CAAW,CAAA,CACd,CAAA,CAAGj5C,CAAAA,CACH,MAAO,EAAA,CACP,MAAA,CAAQg4B,EAAAA,CACR,IAAA,CAAK,cACL,KAAA,CAAO,CAAE,MAAA,CAAQ,WAAY,EAC7B,YAAA,CAAc,IAAMmc,EAAAA,CAAc,cAAc,EAChD,YAAA,CAAc,IAAMA,EAAAA,CAAc,IAAI,CAAA,CACtC,WAAA,CAAcloC,CAAAA,EAAM,CAClBA,EAAE,eAAA,EAAgB,CAClB6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,cAAc,EAC1C,CAAA,CACF,CAAA,CAEA3C,GAAAA,CAACkQ,OAAO,IAAA,CAAP,CACC,CAAA,CAAGy/B,EAAAA,CAAW,EACd,CAAA,CAAGj5C,CAAAA,CAAI,CAAA,CACP,KAAA,CAAO,EACP,MAAA,CAAQg4B,EAAAA,CAAS,EAAA,CACjB,EAAA,CAAI,IACJ,IAAA,CAAMkc,EAAAA,GAAe,cAAA,EAAkBV,CAAAA,GAAa,eAAiB,SAAA,CAAY,uBAAA,CACjF,KAAA,CAAO,CAAE,cAAe,MAAO,CAAA,CAC/B,OAAA,CAAS,CAAE,QAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,QAAS,CAAE,CAAA,CACtB,UAAA,CAAY,CAAE,SAAU,GAAK,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,CAGAhpC,KAAC,GAAA,CAAA,CAEC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,EAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,EAAA,CAC7B,CAAA,CAAGl5C,EACH,KAAA,CAAO,EAAA,CACP,MAAA,CAAQg4B,EAAAA,CACR,KAAK,aAAA,CACL,KAAA,CAAO,CAAE,MAAA,CAAQ,WAAY,CAAA,CAC7B,YAAA,CAAc,IAAMmc,GAAc,YAAY,CAAA,CAC9C,YAAA,CAAc,IAAMA,GAAc,IAAI,CAAA,CACtC,WAAA,CAAcloC,CAAAA,EAAM,CAClBA,CAAAA,CAAE,eAAA,EAAgB,CAClB6qC,EAAAA,CAAgB7qC,EAAU,YAAY,EACxC,CAAA,CACF,CAAA,CAEA3C,IAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAGy/B,GAAWC,EAAAA,CAAe,CAAA,CAC7B,CAAA,CAAGl5C,CAAAA,CAAI,EACP,KAAA,CAAO,CAAA,CACP,MAAA,CAAQg4B,EAAAA,CAAS,EAAA,CACjB,EAAA,CAAI,GAAA,CACJ,IAAA,CAAMkc,KAAe,YAAA,EAAgBV,CAAAA,GAAa,YAAA,CAAe,SAAA,CAAY,wBAC7E,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EAC/B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,EAC/B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAIFlqC,GAAAA,CAACiQ,gBAAA,CACE,QAAA,CAAAk4B,CAAAA,EAAa,CAACx/B,EAAAA,EAAc,CAACd,CAAAA,CAAK,QAAA,EACjC3G,KAACgP,MAAAA,CAAO,CAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,IAAA,CAAM,CAAE,OAAA,CAAS,CAAE,CAAA,CACnB,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAG7B,QAAA,CAAA,CAAAlQ,IAAC,QAAA,CAAA,CACC,EAAA,CAAIvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,GAChB,EAAA,CAAIvyB,CAAAA,CAAIg4B,EAAAA,CAAS,CAAA,CACjB,CAAA,CAAG,EAAA,CACH,IAAA,CAAK,aAAA,CACL,MAAO,CAAE,MAAA,CAAQ,WAAY,CAAA,CAC7B,aAAc,IAAMmc,EAAAA,CAAc,SAAS,CAAA,CAC3C,aAAc,IAAMA,EAAAA,CAAc,IAAI,CAAA,CACtC,YAAcloC,CAAAA,EAAM,CAClBA,CAAAA,CAAE,eAAA,GACF6qC,EAAAA,CAAgB7qC,CAAAA,CAAU,SAAS,EACrC,EACF,CAAA,CAEA3C,GAAAA,CAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,EAAA,CAAIzZ,CAAAA,CAAIwyB,CAAAA,CAAQ,EAAA,CAChB,EAAA,CAAIvyB,CAAAA,CAAIg4B,EAAAA,CAAS,CAAA,CACjB,EAAG,CAAA,CACH,IAAA,CAAM/tB,CAAAA,CAAM,MAAA,CACZ,OAAO,SAAA,CACP,WAAA,CAAa,GAAA,CACb,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CAC/B,OAAA,CAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,OAAA,CAAS,CACP,KAAA,CAAOiqC,EAAAA,GAAe,SAAA,CAAY,GAAA,CAAM,CAC1C,CAAA,CACA,IAAA,CAAM,CAAE,KAAA,CAAO,CAAE,CAAA,CACjB,UAAA,CAAY,CACV,QAAA,CAAU,GAAA,CACV,IAAA,CAAM,QAAA,CACN,SAAA,CAAW,IACX,OAAA,CAAS,EACX,CAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAAA,CAGCwB,EAAAA,EAAgB1B,CAAAA,EACfxpC,IAAAA,CAAC,KAAE,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EAChC,QAAA,CAAA,CAAAlB,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,EAAA,CAAIzZ,CAAAA,CAAIwyB,CAAAA,CACR,EAAA,CAAIvyB,EAAIg4B,EAAAA,CAAS,CAAA,CACjB,EAAA,CAAIgc,CAAAA,CAAe,EACnB,EAAA,CAAIA,CAAAA,CAAe,CAAA,CACnB,MAAA,CAAQ7F,CAAAA,CAAgBlkC,CAAAA,CAAM,eAAA,CAAkBA,CAAAA,CAAM,OACtD,WAAA,CAAakkC,CAAAA,CAAgB,CAAA,CAAI,CAAA,CACjC,gBAAgB,KAAA,CAChB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,OAAA,CAASA,EAAgB,CAAA,CAAI,EAAI,CAAA,CAC5C,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC/B,CAAA,CACA7kC,IAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,EAAA,CAAIw6B,EAAe,CAAA,CACnB,EAAA,CAAIA,CAAAA,CAAe,CAAA,CACnB,CAAA,CAAG7F,CAAAA,CAAgB,CAAA,CAAI,CAAA,CACvB,KAAMA,CAAAA,CAAgBlkC,CAAAA,CAAM,eAAA,CAAkBA,CAAAA,CAAM,OACpD,MAAA,CAAO,SAAA,CACP,WAAA,CAAa,CAAA,CACb,QAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,QAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,WAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC/B,EAECkkC,CAAAA,EACC7kC,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAGw6B,CAAAA,CAAe,CAAA,CAAI,EAAA,CACtB,CAAA,CAAGA,CAAAA,CAAe,CAAA,CAClB,gBAAA,CAAiB,SACjB,IAAA,CAAM/pC,CAAAA,CAAM,eAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CACX,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG+pC,EAAe,CAAA,CAAI,EAAG,CAAA,CAChD,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAGA,CAAAA,CAAe,EAAI,EAAG,CAAA,CAChD,UAAA,CAAY,CAAE,SAAU,EAAI,CAAA,CAC7B,QAAA,CAAA,SAAA,CAED,CAAA,CAAA,CAEJ,CAAA,CAAA,CAIAvC,CAAAA,EAAax/B,EAAAA,GAAe,CAACyjC,IAAgB,CAACvkC,CAAAA,CAAK,QAAA,EACnD7H,GAAAA,CAACkQ,OAAO,IAAA,CAAP,CACC,CAAA,CAAGy/B,EAAAA,CAAW,EACd,CAAA,CAAGj5C,CAAAA,CAAI,CAAA,CACP,KAAA,CAAOk5C,GAAe,CAAA,CACtB,MAAA,CAAQlhB,EAAAA,CAAS,CAAA,CACjB,GAAI4d,EAAAA,CAAe,CAAA,CACnB,IAAA,CAAK,MAAA,CACL,OAAQ3jC,EAAAA,CAAahI,CAAAA,CAAM,MAAA,CAASA,CAAAA,CAAM,eAC1C,WAAA,CAAa,CAAA,CACb,OAAA,CAASgI,EAAAA,CAAa,EAAA,CAAM,EAAA,CAC5B,OAAA,CAAS,CAAE,QAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,QAASA,EAAAA,CAAa,EAAA,CAAM,EAAI,CAAA,CAC3C,WAAY,CAAE,QAAA,CAAU,EAAI,CAAA,CAC5B,MAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,EAIDwjC,EAAAA,EACCjrC,IAAAA,CAAA6G,QAAAA,CAAA,CACE,UAAA/H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAIsqC,CAAAA,CACJ,GAAI,CAAA,CACJ,EAAA,CAAIA,CAAAA,CACJ,EAAA,CAAI,GAAA,CACJ,MAAA,CAAQ3pC,CAAAA,CAAM,MAAA,CACd,YAAa,CAAA,CACb,eAAA,CAAgB,KAAA,CAChB,OAAA,CAAS,GACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EACjC,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAIsqC,EAASE,CAAAA,CACb,EAAA,CAAI,CAAA,CACJ,EAAA,CAAIF,EAASE,CAAAA,CACb,EAAA,CAAI,GAAA,CACJ,MAAA,CAAQ7pC,EAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,eAAA,CAAgB,MAChB,OAAA,CAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAAA,CACF,EAMFX,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAk4B,GAAa,CAACx/B,EAAAA,EAAc,CAACd,CAAAA,CAAK,UAAY,CAACkkC,CAAAA,EAAAA,CAAkB,IAAM,CAMtE,IAAMgB,EAAAA,CAAYr2C,CAAAA,CAAI,GAAA,CAGhB45C,EAAAA,CAAWvD,GACbr2C,CAAAA,CAAIg4B,EAAAA,CAAS,EAAA,CACbh4B,CAAAA,CAAI,GAAgB,EAAA,CAGlB65C,EAAAA,CAAYxD,EAAAA,CACd,CAAA,EAAA,EAAK4C,GAAWC,EAAAA,CAAe,CAAA,CAAI,CAAC,CAAA,CAAA,EAAIl5C,CAAAA,CAAIg4B,EAAAA,CAAS,CAAC,CAAA,GAAA,EAAMihB,GAAWC,EAAAA,CAAe,CAAC,CAAA,CAAA,EAAIl5C,CAAAA,CAAIg4B,GAAS,EAAE,CAAA,GAAA,EAAMihB,EAAAA,CAAWC,EAAAA,CAAe,EAAI,CAAC,CAAA,CAAA,EAAIl5C,CAAAA,CAAIg4B,EAAAA,CAAS,CAAC,CAAA,CAAA,CACjK,CAAA,EAAA,EAAKihB,EAAAA,CAAWC,EAAAA,CAAe,EAAI,CAAC,CAAA,CAAA,EAAIl5C,CAAAA,CAAI,EAAE,MAAMi5C,EAAAA,CAAWC,EAAAA,CAAe,CAAC,CAAA,CAAA,EAAIl5C,EAAI,CAAC,CAAA,GAAA,EAAMi5C,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,CAAC,CAAA,CAAA,EAAIl5C,CAAAA,CAAI,EAAE,CAAA,CAAA,CAGrI85C,EAAAA,CAAQF,EAAAA,CAAW,EAAA,CACnBG,EAAQH,EAAAA,CAAW,EAAA,CACnBI,CAAAA,CAAQJ,EAAAA,CAAW,GACnBK,EAAAA,CAAaL,EAAAA,CAAW,EAAA,CACxBM,EAAAA,CAAS7D,GAAYuD,EAAAA,CAAW,EAAA,CAAgB,CAAA,CAAI55C,CAAAA,CAAI,GAE9D,OACEwK,IAAAA,CAACgP,MAAAA,CAAO,CAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG68B,EAAAA,CAAY,GAAA,CAAM,EAAG,CAAA,CAC/C,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAGA,EAAAA,CAAY,GAAA,CAAM,EAAG,EAC5C,UAAA,CAAY,CAAE,QAAA,CAAU,EAAI,EAC5B,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,EAG/B,QAAA,CAAA,CAAA/sC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGuwC,GACH,IAAA,CAAM5vC,CAAAA,CAAM,WAAA,CACZ,MAAA,CAAQA,EAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACf,CAAA,CAGAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CAAWC,GAAe,CAAA,CAAI,GAAA,CACjC,CAAA,CAAGU,EAAAA,CACH,MAAO,GAAA,CACP,MAAA,CAAQ,EAAA,CACR,EAAA,CAAI,EACJ,IAAA,CAAM3vC,CAAAA,CAAM,WAAA,CACZ,MAAA,CAAQA,EAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,MAAA,CAAO,8CACT,CAAA,CAGAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,GAAWC,EAAAA,CAAe,CAAA,CAC7B,CAAA,CAAGY,EAAAA,CACH,WAAW,QAAA,CACX,IAAA,CAAM7vC,CAAAA,CAAM,WAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,WAAW,mBAAA,CAEV,QAAA,CAAAkH,CAAAA,CAAK,IAAA,CAAK,OAAS,EAAA,CAAK,CAAA,EAAGA,CAAAA,CAAK,IAAA,CAAK,UAAU,CAAA,CAAG,EAAE,CAAC,CAAA,GAAA,CAAA,CAAQA,EAAK,IAAA,CACrE,CAAA,CAGA7H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,GAAA,CACjC,EAAGa,CAAAA,CACH,IAAA,CAAM9vC,CAAAA,CAAM,YAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,QAAA,CAED,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,GAAWC,EAAAA,CAAe,CAAA,CAAI,EAAA,CACjC,CAAA,CAAGa,EACH,IAAA,CAAM9vC,CAAAA,CAAM,aAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CAEV,SAAAqsC,CAAAA,CAAWnlC,CAAAA,CAAK,SAAU,CAAA,CAC7B,EAEA7H,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CAAWC,GAAe,CAAA,CAAI,GAAA,CACjC,CAAA,CAAGc,CAAAA,CACH,KAAM/vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,MAAA,CAED,CAAA,CACAX,IAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,EAAI,EAAA,CACjC,CAAA,CAAGc,CAAAA,CACH,IAAA,CAAM/vC,EAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,MACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAAqsC,CAAAA,CAAWnlC,EAAK,OAAQ,CAAA,CAC3B,CAAA,CAGA7H,GAAAA,CAAC,QACC,CAAA,CAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,GACjC,CAAA,CAAGa,CAAAA,CACH,IAAA,CAAM9vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,oBACZ,QAAA,CAAA,WAAA,CAED,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,EAAA,CACjC,EAAGa,CAAAA,CACH,IAAA,CAAM9vC,CAAAA,CAAM,aAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,oBAEV,QAAA,CAAA2mC,EAAAA,EAAY,CACf,CAAA,CAGAtnC,IAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,EAAI,EAAA,CACjC,CAAA,CAAGc,CAAAA,CACH,IAAA,CAAM/vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,IAAA,CACT,WAAW,mBAAA,CACZ,QAAA,CAAA,WAAA,CAED,CAAA,CACAO,IAAAA,CAAC,QACC,CAAA,CAAGyuC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,GACjC,CAAA,CAAGc,CAAAA,CACH,IAAA,CAAM/vC,CAAAA,CAAM,cACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,WAAW,mBAAA,CAEV,QAAA,CAAA,CAAAkH,CAAAA,CAAK,QAAA,CAAS,KACjB,CAAA,CAGCA,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,UAAU,MAAA,CAAS,CAAA,EACzC3G,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAG2vC,EAAAA,CAAWC,EAAAA,CAAe,CAAA,CAAI,GAAA,CACjC,EAAGe,EAAAA,CACH,IAAA,CAAMhwC,CAAAA,CAAM,YAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,YAAA,CAED,EACAO,IAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGyuC,EAAAA,CAAWC,GAAe,CAAA,CAAI,EAAA,CACjC,CAAA,CAAGe,EAAAA,CACH,KAAMhwC,CAAAA,CAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,WAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAA,CAAAkH,EAAK,SAAA,CAAU,GAAA,CAAIkL,EAAAA,EAAKA,EAAAA,CAAE,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,CAAE,UAAU,CAAA,CAAG,EAAE,CAAA,CAC1DlL,CAAAA,CAAK,UAAU,GAAA,CAAIkL,EAAAA,EAAKA,EAAAA,CAAE,IAAI,EAAE,IAAA,CAAK,IAAI,CAAA,CAAE,MAAA,CAAS,GAAK,KAAA,CAAQ,EAAA,CAAA,CACpE,CAAA,CAAA,CACF,CAAA,CAID,CAACg6B,EAAAA,EACA/sC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG2vC,GAAWC,EAAAA,CAAe,CAAA,CAC7B,CAAA,CAAGgB,EAAAA,CACH,UAAA,CAAW,QAAA,CACX,IAAA,CAAMjwC,CAAAA,CAAM,aACZ,QAAA,CAAS,GAAA,CACT,UAAA,CAAW,mBAAA,CACX,MAAO,CAAE,OAAA,CAAS,EAAI,CAAA,CAErB,SAAAmsC,EAAAA,CACG,iCAAA,CACAD,EAAAA,CACA,oDAAA,CACA,8EAEN,CAAA,CAAA,CAEJ,CAEJ,CAAA,GAAG,CACL,GACF,CAEJ,CCzyCO,SAASgE,EAAAA,CAAY,CAAE,WAAA,CAAAC,CAAAA,CAAa,KAAA,CAAAnwC,CAAM,EAAqB,CACpE,GAAI,CAACmwC,CAAAA,CAAa,OAAO,IAAA,CAEzB,IAAM,CAAE,IAAA,CAAAjpC,EAAM,CAAA,CAAApR,CAAAA,CAAG,CAAA,CAAAC,CAAAA,CAAG,MAAAuyB,CAAAA,CAAO,MAAA,CAAAyF,CAAAA,CAAQ,SAAA,CAAAqe,CAAU,CAAA,CAAI+D,CAAAA,CAE3CC,CAAAA,CAAgB,EAAA,CAChBC,EAAa,EAAA,CAGbV,CAAAA,CAAWvD,CAAAA,CACbr2C,CAAAA,CAAIg4B,CAAAA,CAASsiB,CAAAA,CACbt6C,CAAAA,CAAIq6C,CAAAA,CAAgBC,EAGlBT,CAAAA,CAAYxD,CAAAA,CACd,CAAA,EAAA,EAAKt2C,CAAAA,CAAIwyB,EAAQ,CAAA,CAAI,CAAC,CAAA,CAAA,EAAIvyB,CAAAA,CAAIg4B,EAAS,CAAC,CAAA,GAAA,EAAMj4B,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAC,CAAA,CAAA,EAAIvyB,CAAAA,CAAIg4B,CAAAA,CAAS,EAAE,MAAMj4B,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,CAAC,IAAIvyB,CAAAA,CAAIg4B,CAAAA,CAAS,CAAC,CAAA,CAAA,CACvH,KAAKj4B,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,CAAC,CAAA,CAAA,EAAIvyB,CAAAA,CAAI,EAAE,CAAA,GAAA,EAAMD,EAAIwyB,CAAAA,CAAQ,CAAC,CAAA,CAAA,EAAIvyB,CAAAA,CAAI,CAAC,CAAA,GAAA,EAAMD,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,CAAC,CAAA,CAAA,EAAIvyB,CAAAA,CAAI,EAAE,CAAA,CAAA,CAG3F85C,EAAQF,CAAAA,CAAW,EAAA,CACnBG,CAAAA,CAAQH,CAAAA,CAAW,GACnBI,CAAAA,CAAQJ,CAAAA,CAAW,EAAA,CACnBK,CAAAA,CAAaL,EAAW,EAAA,CAGxBtD,CAAAA,CAAcrpC,CAAAA,EACXA,CAAAA,CAAK,mBAAmB,OAAA,CAAS,CACtC,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,SAAA,CACL,IAAA,CAAM,SACR,CAAC,CAAA,CAIG2jC,CAAAA,CAAc,IAAM,CACxB,GAAI,CAACz/B,CAAAA,CAAK,SAAA,EAAa,CAACA,EAAK,OAAA,CAAS,OAAO,KAAA,CAC7C,IAAMrE,EAAO,IAAA,CAAK,IAAA,CAAA,CAAMqE,CAAAA,CAAK,OAAA,CAAQ,SAAQ,CAAIA,CAAAA,CAAK,SAAA,CAAU,OAAA,KAAc,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAG,EAClG,OAAO,CAAA,EAAGrE,CAAI,CAAA,IAAA,EAAOA,CAAAA,GAAS,CAAA,CAAI,GAAA,CAAM,EAAE,EAC5C,CAAA,CAMA,OACExD,GAAAA,CAACiQ,gBAAA,CACC,QAAA,CAAA/O,IAAAA,CAACgP,MAAAA,CAAO,EAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG68B,CAAAA,CAAY,GAAA,CAAM,EAAG,EAC/C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAGA,CAAAA,CAAY,IAAM,EAAG,CAAA,CAC5C,UAAA,CAAY,CAAE,SAAU,EAAI,CAAA,CAC5B,KAAA,CAAO,CAAE,cAAe,MAAO,CAAA,CAG/B,QAAA,CAAA,CAAA/sC,GAAAA,CAAC,QACCuwC,CAAAA,CACA,IAAA,CAAM5vC,CAAAA,CAAM,WAAA,CACZ,OAAQA,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACf,EAGAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,EAAQ,CAAA,CAAI,GAAA,CACnB,CAAA,CAAGqnB,CAAAA,CACH,MAAO,GAAA,CACP,MAAA,CAAQS,CAAAA,CACR,EAAA,CAAI,EACJ,IAAA,CAAMpwC,CAAAA,CAAM,WAAA,CACZ,MAAA,CAAQA,EAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,MAAA,CAAO,8CACT,CAAA,CAGAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,EAAIwyB,CAAAA,CAAQ,CAAA,CACf,CAAA,CAAGunB,CAAAA,CACH,WAAW,QAAA,CACX,IAAA,CAAM7vC,CAAAA,CAAM,WAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,oBAEV,QAAA,CAAAkH,CAAAA,CAAK,IAAA,CAAK,MAAA,CAAS,EAAA,CAAK,CAAA,EAAGA,CAAAA,CAAK,IAAA,CAAK,UAAU,CAAA,CAAG,EAAE,CAAC,CAAA,GAAA,CAAA,CAAQA,EAAK,IAAA,CACrE,CAAA,CAGA7H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,GAAA,CACnBwnB,EACA,IAAA,CAAM9vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,QAAA,CAED,CAAA,CACAX,IAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,EAAI,EAAA,CACnBwnB,CAAAA,CACA,IAAA,CAAM9vC,CAAAA,CAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,MACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAAkH,CAAAA,CAAK,UAAYmlC,CAAAA,CAAWnlC,CAAAA,CAAK,SAAS,CAAA,CAAI,MACjD,CAAA,CAGA7H,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,EAAIwyB,CAAAA,CAAQ,CAAA,CAAI,GAAA,CACnB,CAAA,CAAGynB,EACH,IAAA,CAAM/vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,MAAA,CAED,CAAA,CACAX,IAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,EAAA,CACnB,CAAA,CAAGynB,CAAAA,CACH,KAAM/vC,CAAAA,CAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,WAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAAkH,EAAK,OAAA,CAAUmlC,CAAAA,CAAWnlC,CAAAA,CAAK,OAAO,EAAI,KAAA,CAC7C,CAAA,CAGA7H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,EAAA,CACnBwnB,EACA,IAAA,CAAM9vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,WAAA,CAED,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,EAAQ,CAAA,CAAI,EAAA,CACnBwnB,CAAAA,CACA,IAAA,CAAM9vC,EAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,MACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAA2mC,CAAAA,GACH,CAAA,CAGAtnC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,EAAIwyB,CAAAA,CAAQ,CAAA,CAAI,EAAA,CACnB,CAAA,CAAGynB,EACH,IAAA,CAAM/vC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,mBAAA,CACZ,QAAA,CAAA,WAAA,CAED,CAAA,CACAO,IAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGzK,CAAAA,CAAIwyB,EAAQ,CAAA,CAAI,EAAA,CACnB,CAAA,CAAGynB,CAAAA,CACH,KAAM/vC,CAAAA,CAAM,aAAA,CACZ,QAAA,CAAS,IAAA,CACT,WAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAA,CAAAkH,EAAK,QAAA,CAAS,GAAA,CAAA,CACjB,CAAA,CAGCA,CAAAA,CAAK,WAAaA,CAAAA,CAAK,SAAA,CAAU,MAAA,CAAS,CAAA,EACzC3G,KAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,QACC,CAAA,CAAGvJ,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,GAAA,CACnB,CAAA,CAAG0nB,CAAAA,CACH,IAAA,CAAMhwC,EAAM,YAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,oBACZ,QAAA,CAAA,YAAA,CAED,CAAA,CACAO,IAAAA,CAAC,MAAA,CAAA,CACC,EAAGzK,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CAAI,EAAA,CACnB,EAAG0nB,CAAAA,CACH,IAAA,CAAMhwC,CAAAA,CAAM,aAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,oBAEV,QAAA,CAAA,CAAAkH,CAAAA,CAAK,SAAA,CAAU,GAAA,CAAIkL,GAAKA,CAAAA,CAAE,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,CAAE,SAAA,CAAU,CAAA,CAAG,EAAE,CAAA,CAC1DlL,CAAAA,CAAK,SAAA,CAAU,GAAA,CAAIkL,GAAKA,CAAAA,CAAE,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,CAAE,MAAA,CAAS,EAAA,CAAK,KAAA,CAAQ,IACpE,CAAA,CAAA,CACF,CAAA,CAAA,CAIJ,CAAA,CACF,CAEJ,CCjLO,SAASk+B,EAAAA,CAAe,CAC7B,EAAA,CAAAC,CAAAA,CAAI,GAAAC,CAAAA,CAAI,EAAA,CAAAC,CAAAA,CAAI,EAAA,CAAAC,EACZ,KAAA,CAAA1wC,CAAAA,CACA,QAAA,CAAA0J,CAAAA,CACA,UAAAinC,CAAAA,CAAY,QAAA,CACZ,YAAA,CAAAC,CAAAA,CAAe,KACjB,CAAA,CAAwB,CACtB,GAAM,CAACpJ,EAAWmD,CAAY,CAAA,CAAIhrC,QAAAA,CAAS,KAAK,EAC1C,CAACkxC,CAAAA,CAAUC,CAAW,CAAA,CAAInxC,SAA0C,IAAI,CAAA,CAExEoxC,CAAAA,CAAKL,CAAAA,CAAKF,CAAAA,CACVQ,CAAAA,CAAYD,CAAAA,CAAK,CAAA,CACjBE,EAAY,IAAA,CAAK,GAAA,CAAIF,CAAE,CAAA,CAAI,EAI3BG,CAAAA,CADe,CAAA,CAIfC,CAAAA,CAAS,EAAA,CAGTC,EAAa,CAACH,CAAAA,EAAaR,CAAAA,EAAMF,CAAAA,CAEnCc,EACAC,CAAAA,CAEJ,GAAIL,CAAAA,CAGF,GADAK,GAASf,CAAAA,CAAKE,CAAAA,EAAM,CAAA,CAChBE,CAAAA,GAAc,UAChBU,CAAAA,CAAO,CAAA,EAAA,EAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EAAMC,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,CAAA,CAAA,KAC7B,CACL,IAAMa,EAAAA,CAAa,KAAK,GAAA,CAAI,IAAA,CAAK,GAAA,CAAId,CAAAA,CAAKF,CAAE,CAAA,CAAI,CAAA,CAAG,EAAE,CAAA,CACrDc,EAAO,CAAA,EAAA,EAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,MAAMD,CAAAA,CAAKgB,EAAU,CAAA,CAAA,EAAIf,CAAE,KAAKC,CAAAA,CAAKc,EAAU,CAAA,CAAA,EAAIb,CAAE,KAAKD,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,EACxF,SAKAY,CAAAA,CAAQb,CAAAA,CAAKU,CAAAA,CAETC,CAAAA,CAAY,CAYd,IAAMI,EAAAA,CAAajB,CAAAA,CAAK,GAClBkB,EAAAA,CAAchB,CAAAA,CAAKU,CAAAA,CAInBO,EAAAA,CAAUV,EAAYR,CAAAA,CAAK,EAAA,CAAKA,CAAAA,CAAK,EAAA,CAE3Cc,EAAQG,EAAAA,CAEJd,CAAAA,GAAc,SAAA,CAChBU,CAAAA,CAAO,KAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EACRgB,EAAU,CAAA,CAAA,EAAIhB,CAAE,CAAA,GAAA,EAChBgB,EAAU,IAAIE,EAAO,CAAA,GAAA,EACrBD,EAAW,CAAA,CAAA,EAAIC,EAAO,CAAA,GAAA,EACtBD,EAAW,CAAA,CAAA,EAAIf,CAAE,CAAA,GAAA,EACjBD,CAAE,CAAA,CAAA,EAAIC,CAAE,GAGhBM,CAAAA,CACFK,CAAAA,CAAO,CAAA,EAAA,EAAKd,CAAE,IAAIC,CAAE,CAAA,GAAA,EACRgB,EAAAA,CAAaN,CAAC,IAAIV,CAAE,CAAA,GAAA,EACpBgB,EAAU,CAAA,CAAA,EAAIhB,CAAE,CAAA,CAAA,EAAIgB,EAAU,CAAA,CAAA,EAAIhB,CAAAA,CAAKU,CAAC,CAAA,GAAA,EACxCM,EAAU,CAAA,CAAA,EAAIE,EAAAA,CAAUR,CAAC,CAAA,GAAA,EACzBM,EAAU,CAAA,CAAA,EAAIE,EAAO,IAAIF,EAAAA,CAAaN,CAAC,CAAA,CAAA,EAAIQ,EAAO,CAAA,GAAA,EAClDD,EAAAA,CAAcP,CAAC,CAAA,CAAA,EAAIQ,EAAO,CAAA,GAAA,EAC1BD,EAAW,CAAA,CAAA,EAAIC,EAAO,IAAID,EAAW,CAAA,CAAA,EAAIC,EAAAA,CAAUR,CAAC,MACpDO,EAAW,CAAA,CAAA,EAAIf,CAAAA,CAAKQ,CAAC,MACrBO,EAAW,CAAA,CAAA,EAAIf,CAAE,CAAA,CAAA,EAAIe,GAAcP,CAAC,CAAA,CAAA,EAAIR,CAAE,CAAA,GAAA,EAC1CD,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,CAAA,CAEpBW,CAAAA,CAAO,KAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EACRgB,EAAAA,CAAaN,CAAC,CAAA,CAAA,EAAIV,CAAE,MACpBgB,EAAU,CAAA,CAAA,EAAIhB,CAAE,CAAA,CAAA,EAAIgB,EAAU,CAAA,CAAA,EAAIhB,CAAAA,CAAKU,CAAC,CAAA,GAAA,EACxCM,EAAU,CAAA,CAAA,EAAIE,EAAAA,CAAUR,CAAC,CAAA,GAAA,EACzBM,EAAU,CAAA,CAAA,EAAIE,EAAO,CAAA,CAAA,EAAIF,EAAAA,CAAaN,CAAC,CAAA,CAAA,EAAIQ,EAAO,CAAA,GAAA,EAClDD,EAAAA,CAAcP,CAAC,CAAA,CAAA,EAAIQ,EAAO,CAAA,GAAA,EAC1BD,EAAW,IAAIC,EAAO,CAAA,CAAA,EAAID,EAAW,CAAA,CAAA,EAAIC,EAAAA,CAAUR,CAAC,CAAA,GAAA,EACpDO,EAAW,IAAIf,CAAAA,CAAKQ,CAAC,CAAA,GAAA,EACrBO,EAAW,IAAIf,CAAE,CAAA,CAAA,EAAIe,EAAAA,CAAcP,CAAC,IAAIR,CAAE,CAAA,GAAA,EAC1CD,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,EAG1B,CAAA,KAGMC,CAAAA,GAAc,SAAA,CAChBU,EAAO,CAAA,EAAA,EAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,MACRc,CAAK,CAAA,CAAA,EAAId,CAAE,CAAA,GAAA,EACXc,CAAK,CAAA,CAAA,EAAIZ,CAAE,CAAA,GAAA,EACXD,CAAE,IAAIC,CAAE,CAAA,CAAA,CAGhBM,CAAAA,CACFK,CAAAA,CAAO,KAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EACRc,EAAQJ,CAAC,CAAA,CAAA,EAAIV,CAAE,CAAA,GAAA,EACfc,CAAK,CAAA,CAAA,EAAId,CAAE,CAAA,CAAA,EAAIc,CAAK,IAAId,CAAAA,CAAKU,CAAC,CAAA,GAAA,EAC9BI,CAAK,IAAIZ,CAAAA,CAAKQ,CAAC,CAAA,GAAA,EACfI,CAAK,IAAIZ,CAAE,CAAA,CAAA,EAAIY,CAAAA,CAAQJ,CAAC,IAAIR,CAAE,CAAA,GAAA,EAC9BD,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,CAAA,CAEpBW,CAAAA,CAAO,CAAA,EAAA,EAAKd,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EACRc,CAAAA,CAAQJ,CAAC,CAAA,CAAA,EAAIV,CAAE,CAAA,GAAA,EACfc,CAAK,IAAId,CAAE,CAAA,CAAA,EAAIc,CAAK,CAAA,CAAA,EAAId,EAAKU,CAAC,CAAA,GAAA,EAC9BI,CAAK,CAAA,CAAA,EAAIZ,EAAKQ,CAAC,CAAA,GAAA,EACfI,CAAK,CAAA,CAAA,EAAIZ,CAAE,CAAA,CAAA,EAAIY,CAAAA,CAAQJ,CAAC,CAAA,CAAA,EAAIR,CAAE,CAAA,GAAA,EAC9BD,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,CAAA,CAO5B,IAAMiB,CAAAA,CAAY,CAAA,CACZ/B,EAAY,CAAA,EAAA,EAAKa,CAAE,CAAA,CAAA,EAAIC,CAAE,MAAMD,CAAAA,CAAKkB,CAAS,CAAA,CAAA,EAAIjB,CAAAA,CAAKiB,EAAY,EAAG,CAAA,GAAA,EAAMlB,CAAE,CAAA,CAAA,EAAIC,CAAE,CAAA,GAAA,EAAMD,CAAAA,CAAKkB,CAAS,CAAA,CAAA,EAAIjB,EAAKiB,CAAAA,CAAY,EAAG,CAAA,CAAA,CAG/HC,CAAAA,CAAY5xC,EAAM,UAAA,CAClB6xC,CAAAA,CAAa7xC,CAAAA,CAAM,eAAA,EAAmB4xC,EAGtCE,CAAAA,CAAc,SAAA,CACdC,CAAAA,CAAkB,2BAAA,CAIpBC,CAAAA,CAAUV,CAAAA,CACVW,CAAAA,CAAAA,CAAWzB,CAAAA,CAAKE,GAAM,CAAA,CAE1B,GAAIG,CAAAA,CAEF,GAAII,EACFe,CAAAA,CAAU,IAAA,CAAK,GAAA,CAAIzB,CAAAA,CAAK,GAAI,IAAA,CAAK,GAAA,CAAIE,CAAAA,CAAK,EAAA,CAAII,EAAS,CAAC,CAAC,CAAA,CACzDoB,CAAAA,CAAUzB,UACDY,CAAAA,CAAY,CAErB,IAAMI,EAAAA,CAAajB,EAAK,EAAA,CAClBkB,EAAAA,CAAchB,CAAAA,CAAKU,CAAAA,CACnBO,GAAUV,CAAAA,CAAYR,CAAAA,CAAK,EAAA,CAAKA,CAAAA,CAAK,EAAA,CAGrC0B,EAAAA,CAA+C,CACnD,CAAC3B,EAAIC,CAAAA,CAAIgB,EAAAA,CAAYhB,CAAE,CAAA,CACvB,CAACgB,EAAAA,CAAYhB,CAAAA,CAAIgB,EAAAA,CAAYE,EAAO,EACpC,CAACF,EAAAA,CAAYE,EAAAA,CAASD,EAAAA,CAAaC,EAAO,CAAA,CAC1C,CAACD,EAAAA,CAAaC,EAAAA,CAASD,GAAaf,CAAE,CAAA,CACtC,CAACe,EAAAA,CAAaf,EAAID,CAAAA,CAAIC,CAAE,CAC1B,CAAA,CAEIyB,GAAU,CAAA,CAAA,CAAA,CACVC,CAAAA,CAAe,CAAE,CAAA,CAAGJ,CAAAA,CAAS,CAAA,CAAGC,CAAQ,CAAA,CAE5C,QAAWzD,CAAAA,IAAO0D,EAAAA,CAAU,CAC1B,IAAM/jB,EAAQkkB,CAAAA,CAAsBxB,CAAAA,CAAS,CAAA,CAAGA,CAAAA,CAAS,EAAGrC,CAAAA,CAAI,CAAC,CAAA,CAAGA,CAAAA,CAAI,CAAC,CAAA,CAAGA,CAAAA,CAAI,CAAC,CAAA,CAAGA,EAAI,CAAC,CAAC,CAAA,CACpF8D,CAAAA,CAAO,KAAK,KAAA,CAAMzB,CAAAA,CAAS,CAAA,CAAI1iB,CAAAA,CAAM,EAAG0iB,CAAAA,CAAS,CAAA,CAAI1iB,CAAAA,CAAM,CAAC,CAAA,CAC9DmkB,CAAAA,CAAOH,EAAAA,GACTA,EAAAA,CAAUG,EACVF,CAAAA,CAAejkB,CAAAA,EAEnB,CAEA6jB,CAAAA,CAAUI,EAAa,CAAA,CACvBH,CAAAA,CAAUG,CAAAA,CAAa,EACzB,MAAO,CAEL,IAAMF,EAAAA,CAA+C,CACnD,CAAC3B,CAAAA,CAAIC,CAAAA,CAAIc,CAAAA,CAAOd,CAAE,EAClB,CAACc,CAAAA,CAAOd,CAAAA,CAAIc,CAAAA,CAAOZ,CAAE,CAAA,CACrB,CAACY,CAAAA,CAAOZ,CAAAA,CAAID,EAAIC,CAAE,CACpB,CAAA,CAEIyB,EAAAA,CAAU,CAAA,CAAA,CAAA,CACVC,EAAAA,CAAe,CAAE,CAAA,CAAGJ,EAAS,CAAA,CAAGC,CAAQ,CAAA,CAE5C,IAAA,IAAWzD,MAAO0D,EAAAA,CAAU,CAC1B,IAAM/jB,EAAAA,CAAQkkB,EAAsBxB,CAAAA,CAAS,CAAA,CAAGA,CAAAA,CAAS,CAAA,CAAGrC,GAAI,CAAC,CAAA,CAAGA,EAAAA,CAAI,CAAC,EAAGA,EAAAA,CAAI,CAAC,CAAA,CAAGA,EAAAA,CAAI,CAAC,CAAC,CAAA,CACpF8D,CAAAA,CAAO,IAAA,CAAK,MAAMzB,CAAAA,CAAS,CAAA,CAAI1iB,EAAAA,CAAM,CAAA,CAAG0iB,EAAS,CAAA,CAAI1iB,EAAAA,CAAM,CAAC,CAAA,CAC9DmkB,EAAOH,EAAAA,GACTA,EAAAA,CAAUG,CAAAA,CACVF,EAAAA,CAAejkB,IAEnB,CAEA6jB,CAAAA,CAAUI,EAAAA,CAAa,CAAA,CACvBH,EAAUG,EAAAA,CAAa,EACzB,CAIF,SAASC,EAAsBE,EAAAA,CAAYC,EAAAA,CAAYjC,EAAAA,CAAYC,EAAAA,CAAYC,GAAYC,CAAAA,CAAY,CACrG,IAAM+B,CAAAA,CAAKhC,GAAKF,EAAAA,CACVQ,CAAAA,CAAKL,CAAAA,CAAKF,EAAAA,CACVkC,EAAQD,CAAAA,CAAKA,CAAAA,CAAK1B,CAAAA,CAAKA,CAAAA,CAE7B,GAAI2B,CAAAA,GAAU,CAAA,CAAG,OAAO,CAAE,CAAA,CAAGnC,EAAAA,CAAI,CAAA,CAAGC,EAAG,EAGvC,IAAI7pC,CAAAA,CAAAA,CAAAA,CAAM4rC,EAAAA,CAAKhC,EAAAA,EAAMkC,GAAMD,EAAAA,CAAKhC,EAAAA,EAAMO,CAAAA,EAAM2B,CAAAA,CAC5C,OAAA/rC,CAAAA,CAAI,IAAA,CAAK,GAAA,CAAI,CAAA,CAAG,KAAK,GAAA,CAAI,CAAA,CAAGA,CAAC,CAAC,EAEvB,CACL,CAAA,CAAG4pC,EAAAA,CAAK5pC,CAAAA,CAAI8rC,EACZ,CAAA,CAAGjC,EAAAA,CAAK7pC,CAAAA,CAAIoqC,CACd,CACF,CAGA,IAAM5K,CAAAA,CAAmBnkC,IAAoC,CAC3D,IAAM2wC,EAAAA,CAAM3wC,EAAAA,CAAE,cAAc,eAAA,CAC5B,GAAI,CAAC2wC,EAAAA,CAAK,OACV,IAAMvxC,EAAAA,CAAOuxC,EAAAA,CAAI,qBAAA,GACjB7B,CAAAA,CAAY,CACV,CAAA,CAAG9uC,EAAAA,CAAE,QAAUZ,EAAAA,CAAK,IAAA,CACpB,CAAA,CAAGY,EAAAA,CAAE,QAAUZ,EAAAA,CAAK,GACtB,CAAC,EACH,EAEMwxC,EAAAA,CAAmB,IAAM,CAC7BjI,CAAAA,CAAa,KAAK,CAAA,CAClBmG,CAAAA,CAAY,IAAI,EAClB,CAAA,CAGA,OAAIF,CAAAA,CAEArwC,IAAAA,CAAC,KACC,sBAAA,CAAqB,MAAA,CACrB,YAAA,CAAcqyC,EAAAA,CACd,YAAazM,CAAAA,CAGb,QAAA,CAAA,CAAA9mC,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGgyC,CAAAA,CACH,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cACP,WAAA,CAAa,EAAA,CACb,aAAA,CAAc,OAAA,CACd,MAAO,CAAE,MAAA,CAAQ,SAAU,CAAA,CAC7B,EAGAhyC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGgyC,CAAAA,CACH,IAAA,CAAK,MAAA,CACL,MAAA,CAAQQ,CAAAA,CACR,YAAa,CAAA,CACb,aAAA,CAAc,OAAA,CACd,OAAA,CAAS,IACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAA,CAAQ,OAAQ,WAAY,CAAA,CACtD,CAAA,CAGAxyC,GAAAA,CAAC,QACC,CAAA,CAAGgyC,CAAAA,CACH,IAAA,CAAK,MAAA,CACL,OAAQQ,CAAAA,CACR,WAAA,CAAa,GAAA,CACb,aAAA,CAAc,QACd,OAAA,CAAS,EAAA,CACT,KAAA,CAAO,CAAE,cAAe,MAAO,CAAA,CACjC,CAAA,CAGAxyC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGuwC,CAAAA,CACH,IAAA,CAAK,OACL,MAAA,CAAQiC,CAAAA,CACR,WAAA,CAAa,GAAA,CACb,cAAc,OAAA,CACd,OAAA,CAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAGAxyC,IAAC,QAAA,CAAA,CACC,EAAA,CAAIoxC,CAAAA,CACJ,EAAA,CAAIC,EACJ,CAAA,CAAG,CAAA,CACH,IAAA,CAAMmB,CAAAA,CACN,QAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAGCnoC,CAAAA,EACCnJ,IAAAA,CAACgP,MAAAA,CAAO,CAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,EAAI,EAClC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,CAAE,CAAA,CAChC,UAAA,CAAY,CAAE,SAAU,GAAA,CAAM,IAAA,CAAM,SAAU,CAAA,CAC9C,QAAUvN,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,GACF0H,CAAAA,GACF,CAAA,CACA,KAAA,CAAO,CAAE,MAAA,CAAQ,SAAU,CAAA,CAE3B,QAAA,CAAA,CAAArK,GAAAA,CAAC,QAAA,CAAA,CACC,EAAA,CAAI2yC,CAAAA,CACJ,GAAIC,CAAAA,CACJ,CAAA,CAAG,CAAA,CACH,IAAA,CAAMF,EACN,MAAA,CAAQD,CAAAA,CACR,WAAA,CAAa,GAAA,CACf,EACAzyC,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAI2yC,CAAAA,CAAU,EACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,EAAA,CAAID,EAAU,CAAA,CACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,OAAQH,CAAAA,CACR,WAAA,CAAa,GAAA,CACb,aAAA,CAAc,QAChB,CAAA,CACAzyC,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAI2yC,EAAU,CAAA,CACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,GAAID,CAAAA,CAAU,CAAA,CACd,EAAA,CAAIC,CAAAA,CAAU,EACd,MAAA,CAAQH,CAAAA,CACR,WAAA,CAAa,GAAA,CACb,cAAc,OAAA,CAChB,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAMFvxC,KAAC,GAAA,CAAA,CACC,sBAAA,CAAqB,MAAA,CACrB,YAAA,CAAc,IAAMoqC,CAAAA,CAAa,IAAI,CAAA,CACrC,YAAA,CAAciI,GACd,WAAA,CAAazM,CAAAA,CACb,KAAA,CAAO,CAAE,OAAQz8B,CAAAA,CAAW,SAAA,CAAY,SAAU,CAAA,CAGlD,QAAA,CAAA,CAAArK,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGgyC,EACH,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,aAAA,CACP,YAAa,EAAA,CACb,aAAA,CAAc,OAAA,CACd,KAAA,CAAO,CAAE,MAAA,CAAQ3nC,CAAAA,CAAW,SAAA,CAAY,SAAU,EACpD,CAAA,CAGArK,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAG8hC,CAAAA,CACH,IAAA,CAAK,MAAA,CACL,OAAQ7J,CAAAA,CAAYqK,CAAAA,CAAaD,CAAAA,CACjC,WAAA,CAAapK,EAAY,GAAA,CAAM,CAAA,CAC/B,aAAA,CAAc,OAAA,CACd,OAAA,CAAS,CAAE,UAAA,CAAY,CAAA,CAAG,QAAS,CAAE,CAAA,CACrC,OAAA,CAAS,CAAE,WAAY,CAAA,CAAG,OAAA,CAAS,CAAE,CAAA,CACrC,WAAY,CACV,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,IAAA,CAAM,WAAY,CAAA,CAC/C,OAAA,CAAS,CAAE,QAAA,CAAU,EAAI,CAC3B,CAAA,CACF,EAGAnoC,GAAAA,CAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,EAAGqgC,CAAAA,CACH,IAAA,CAAK,MAAA,CACL,MAAA,CAAQpI,CAAAA,CAAYqK,CAAAA,CAAaD,CAAAA,CACjC,WAAA,CAAapK,EAAY,GAAA,CAAM,CAAA,CAC/B,aAAA,CAAc,OAAA,CACd,QAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,QAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,WAAY,CAAE,QAAA,CAAU,EAAA,CAAK,KAAA,CAAO,EAAI,CAAA,CAC1C,CAAA,CAGAnoC,GAAAA,CAACkQ,MAAAA,CAAO,OAAP,CACC,EAAA,CAAIkhC,CAAAA,CACJ,EAAA,CAAIC,EACJ,CAAA,CAAGlJ,CAAAA,CAAY,CAAA,CAAI,CAAA,CACnB,IAAA,CAAMA,CAAAA,CAAYqK,CAAAA,CAAaD,CAAAA,CAC/B,QAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,QAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,WAAY,CAAE,KAAA,CAAO,EAAA,CAAK,QAAA,CAAU,GAAK,CAAA,CAC3C,CAAA,CAGCpK,CAAAA,EAAa99B,CAAAA,EACZnJ,KAACgP,MAAAA,CAAO,CAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAE,EAChC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CAChC,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC7B,OAAA,CAAUvN,IAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClB0H,IACF,CAAA,CACA,KAAA,CAAO,CAAE,OAAQ,SAAU,CAAA,CAE3B,QAAA,CAAA,CAAArK,GAAAA,CAAC,UACC,EAAA,CAAI2yC,CAAAA,CACJ,EAAA,CAAIC,CAAAA,CACJ,EAAG,CAAA,CACH,IAAA,CAAMF,CAAAA,CACN,MAAA,CAAQD,EACR,WAAA,CAAa,GAAA,CACf,CAAA,CACAzyC,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAI2yC,CAAAA,CAAU,CAAA,CACd,GAAIC,CAAAA,CAAU,CAAA,CACd,EAAA,CAAID,CAAAA,CAAU,EACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,MAAA,CAAQH,EACR,WAAA,CAAa,GAAA,CACb,aAAA,CAAc,OAAA,CAChB,EACAzyC,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAI2yC,CAAAA,CAAU,EACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,EAAA,CAAID,EAAU,CAAA,CACd,EAAA,CAAIC,CAAAA,CAAU,CAAA,CACd,OAAQH,CAAAA,CACR,WAAA,CAAa,GAAA,CACb,aAAA,CAAc,OAAA,CAChB,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CC9dO,SAASe,EAAAA,CAAU,CAAE,IAAA,CAAA3rC,EAAM,CAAA,CAAApR,CAAAA,CAAG,CAAA,CAAAC,CAAAA,CAAG,MAAAiK,CAAAA,CAAO,OAAA,CAAAwH,CAAQ,CAAA,CAAmB,CACxE,GAAM,CAACggC,CAAAA,CAAWmD,CAAY,CAAA,CAAIhrC,QAAAA,CAAS,KAAK,CAAA,CAC1C+R,EAAO,EAAA,CAGP26B,CAAAA,CAAcrpC,CAAAA,EACXA,CAAAA,CAAK,mBAAmB,OAAA,CAAS,CACtC,KAAA,CAAO,OAAA,CACP,IAAK,SAAA,CACL,IAAA,CAAM,SACR,CAAC,EAGH,OACEzC,IAAAA,CAAC,GAAA,CAAA,CACC,eAAA,CAAc,OACd,YAAA,CAAc,IAAMoqC,CAAAA,CAAa,IAAI,EACrC,YAAA,CAAc,IAAMA,CAAAA,CAAa,KAAK,EACtC,OAAA,CAAS,IAAMnjC,CAAAA,GAAUN,CAAI,CAAA,CAC7B,KAAA,CAAO,CAAE,MAAA,CAAQ,SAAU,CAAA,CAG1B,QAAA,CAAA,CAAAA,CAAAA,CAAK,cAAA,EACJ7H,IAACkQ,MAAAA,CAAO,MAAA,CAAP,CACC,EAAA,CAAIzZ,EACJ,EAAA,CAAIC,CAAAA,CAAI,EAAA,CACR,CAAA,CAAG2b,EAAO,CAAA,CACV,IAAA,CAAM1R,CAAAA,CAAM,iBAAA,CACZ,QAAS,CAAE,KAAA,CAAO,CAAE,CAAA,CACpB,QAAS,CAAE,KAAA,CAAOwnC,CAAAA,CAAY,GAAA,CAAM,CAAE,CAAA,CACtC,UAAA,CAAY,CAAE,QAAA,CAAU,EAAI,CAAA,CAC9B,CAAA,CAIFnoC,GAAAA,CAACkQ,OAAO,IAAA,CAAP,CACC,CAAA,CAAGzZ,CAAAA,CAAI4b,EAAO,CAAA,CACd,CAAA,CAAG3b,CAAAA,CAAI,EAAA,CAAK2b,EAAO,CAAA,CACnB,KAAA,CAAOA,CAAAA,CACP,MAAA,CAAQA,EACR,IAAA,CAAMxK,CAAAA,CAAK,cAAA,CAAiBlH,CAAAA,CAAM,aAAeA,CAAAA,CAAM,SAAA,CACvD,MAAA,CAAQA,CAAAA,CAAM,OACd,WAAA,CAAa,CAAA,CACb,SAAA,CAAW,CAAA,UAAA,EAAalK,CAAC,CAAA,CAAA,EAAIC,CAAAA,CAAI,EAAE,CAAA,CAAA,CAAA,CACnC,OAAA,CAAS,CAAE,KAAA,CAAO,CAAA,CAAG,OAAQ,CAAE,CAAA,CAC/B,OAAA,CAAS,CACP,MAAOyxC,CAAAA,CAAY,IAAA,CAAO,CAAA,CAC1B,MAAA,CAAQ,EACV,CAAA,CACA,UAAA,CAAY,CACV,QAAA,CAAU,GACV,IAAA,CAAM,QAAA,CACN,SAAA,CAAW,GAAA,CACX,QAAS,EACX,CAAA,CACF,CAAA,CAGCA,CAAAA,EACCnoC,IAACkQ,MAAAA,CAAO,IAAA,CAAP,CACC,CAAA,CAAGzZ,GAAK4b,CAAAA,CAAO,CAAA,EAAK,CAAA,CACpB,CAAA,CAAG3b,CAAAA,CAAI,EAAA,CAAA,CAAM2b,CAAAA,CAAO,CAAA,EAAK,EACzB,KAAA,CAAOA,CAAAA,CAAO,CAAA,CACd,MAAA,CAAQA,EAAO,CAAA,CACf,IAAA,CAAK,MAAA,CACL,MAAA,CAAQxK,EAAK,cAAA,CAAiBlH,CAAAA,CAAM,YAAA,CAAeA,CAAAA,CAAM,UACzD,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACT,UAAW,CAAA,UAAA,EAAalK,CAAC,CAAA,CAAA,EAAIC,CAAAA,CAAI,EAAE,CAAA,CAAA,CAAA,CACnC,OAAA,CAAS,CAAE,KAAA,CAAO,GAAK,OAAA,CAAS,CAAE,CAAA,CAClC,OAAA,CAAS,CAAE,KAAA,CAAO,CAAA,CAAG,OAAA,CAAS,EAAI,CAAA,CAClC,UAAA,CAAY,CAAE,QAAA,CAAU,EAAI,CAAA,CAC9B,CAAA,CAIFsJ,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAk4B,CAAAA,EACCjnC,IAAAA,CAACgP,MAAAA,CAAO,EAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,EAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,UAAA,CAAY,CAAE,QAAA,CAAU,EAAI,CAAA,CAG5B,QAAA,CAAA,CAAAlQ,IAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAI,EAAA,CACP,EAAGC,CAAAA,CAAI,EAAA,CACP,KAAA,CAAO,GAAA,CACP,OAAQ,EAAA,CACR,EAAA,CAAI,CAAA,CACJ,IAAA,CAAMiK,EAAM,WAAA,CACZ,MAAA,CAAQA,CAAAA,CAAM,MAAA,CACd,YAAa,CAAA,CACb,MAAA,CAAO,6CAAA,CACT,CAAA,CAGAX,IAAC,MAAA,CAAA,CACC,CAAA,CAAG,CAAA,EAAA,EAAKvJ,CAAAA,CAAI,CAAC,CAAA,CAAA,EAAIC,CAAAA,CAAI,CAAC,MAAMD,CAAC,CAAA,CAAA,EAAIC,CAAAA,CAAI,CAAC,MAAMD,CAAAA,CAAI,CAAC,CAAA,CAAA,EAAIC,CAAAA,CAAI,CAAC,CAAA,CAAA,CAC1D,IAAA,CAAMiK,CAAAA,CAAM,WAAA,CACZ,OAAQA,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACf,EAGAX,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAI,GACP,CAAA,CAAGC,CAAAA,CAAI,EAAA,CACP,KAAA,CAAO,EACP,MAAA,CAAQ,CAAA,CACR,IAAA,CAAMmR,CAAAA,CAAK,eAAiBlH,CAAAA,CAAM,YAAA,CAAeA,CAAAA,CAAM,SAAA,CACvD,UAAW,CAAA,UAAA,EAAalK,CAAAA,CAAI,EAAE,CAAA,CAAA,EAAIC,EAAI,EAAE,CAAA,CAAA,CAAA,CAC1C,CAAA,CAGAsJ,GAAAA,CAAC,QACC,CAAA,CAAGvJ,CAAAA,CAAI,EAAA,CACP,CAAA,CAAGC,EAAI,EAAA,CACP,IAAA,CAAMiK,CAAAA,CAAM,WAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,oBAEV,QAAA,CAAAkH,CAAAA,CAAK,IAAA,CAAK,MAAA,CAAS,GAAK,CAAA,EAAGA,CAAAA,CAAK,IAAA,CAAK,SAAA,CAAU,CAAA,CAAG,EAAE,CAAC,CAAA,GAAA,CAAA,CAAQA,EAAK,IAAA,CACrE,CAAA,CAGA7H,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CAAI,EAAA,CACP,CAAA,CAAGC,CAAAA,CAAI,GACP,IAAA,CAAMiK,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,KACT,UAAA,CAAW,mBAAA,CAEV,QAAA,CAAAqsC,CAAAA,CAAWnlC,EAAK,SAAU,CAAA,CAC7B,CAAA,CAGCA,CAAAA,CAAK,gBACJ3G,IAAAA,CAAC,GAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QACC,CAAA,CAAGvJ,CAAAA,CAAI,EAAA,CACP,CAAA,CAAGC,CAAAA,CAAI,EAAA,CACP,KAAA,CAAO,EAAA,CACP,OAAQ,EAAA,CACR,EAAA,CAAI,CAAA,CACJ,IAAA,CAAMiK,EAAM,iBAAA,CACd,CAAA,CACAX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGvJ,CAAAA,CAAI,EAAA,CACP,CAAA,CAAGC,CAAAA,CAAI,GACP,UAAA,CAAW,QAAA,CACX,IAAA,CAAMiK,CAAAA,CAAM,aACZ,QAAA,CAAS,GAAA,CACT,UAAA,CAAW,KAAA,CACX,WAAW,mBAAA,CACX,aAAA,CAAc,KAAA,CACf,QAAA,CAAA,UAAA,CAED,GACF,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CC9KO,IAAM8yC,EAAAA,CAAa,CAOxB,iBAAkB,CAACnvC,CAAAA,CAAaovC,CAAAA,GAA+B,CAC7D,IAAMnvC,CAAAA,CAAM,IAAI,IAAA,CAAKD,CAAK,EAC1B,OAAAC,CAAAA,CAAI,OAAA,CAAQA,CAAAA,CAAI,SAAQ,CAAImvC,CAAY,CAAA,CACjCnvC,CACT,EAQA,iBAAA,CAAmB,CAACD,CAAAA,CAAaC,CAAAA,GAAsB,CACrD,IAAMqS,CAAAA,CAASrS,CAAAA,CAAI,OAAA,GAAYD,CAAAA,CAAM,OAAA,EAAQ,CAC7C,OAAO,IAAA,CAAK,IAAA,CAAKsS,CAAAA,EAAU,GAAA,CAAO,GAAK,EAAA,CAAK,EAAA,CAAG,CACjD,CAAA,CAQA,qBAAsB,CAACtS,CAAAA,CAAaC,CAAAA,GAAsB,CACxD,IAAIxM,CAAAA,CAAQ,CAAA,CACN+G,CAAAA,CAAU,IAAI,KAAKwF,CAAK,CAAA,CAE9B,KAAOxF,CAAAA,EAAWyF,GAAK,CACrB,IAAMovC,CAAAA,CAAY70C,CAAAA,CAAQ,QAAO,CAC7B60C,CAAAA,GAAc,CAAA,EAAKA,CAAAA,GAAc,GACnC57C,CAAAA,EAAAA,CAEF+G,CAAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAQ,OAAA,EAAQ,CAAI,CAAC,EACvC,CAEA,OAAO/G,CACT,CAAA,CAQA,cAAA,CAAgB,CAACuM,CAAAA,CAAasvC,CAAAA,GAA8B,CAC1D,IAAM35C,EAAS,IAAI,IAAA,CAAKqK,CAAK,CAAA,CACzBuvC,EAAY,CAAA,CAEhB,KAAOA,CAAAA,CAAYD,CAAAA,EAAa,CAC9B35C,CAAAA,CAAO,OAAA,CAAQA,CAAAA,CAAO,OAAA,GAAY,CAAC,CAAA,CACnC,IAAM05C,CAAAA,CAAY15C,EAAO,MAAA,EAAO,CAC5B05C,CAAAA,GAAc,CAAA,EAAKA,CAAAA,GAAc,CAAA,EACnCE,CAAAA,GAEJ,CAEA,OAAO55C,CACT,CAAA,CAOA,SAAA,CAAY0J,CAAAA,EAAwB,CAClC,IAAMgwC,CAAAA,CAAYhwC,CAAAA,CAAK,MAAA,GACvB,OAAOgwC,CAAAA,GAAc,CAAA,EAAKA,CAAAA,GAAc,CAC1C,CAAA,CAUA,oBAAA,CAAsB,CAACxV,CAAAA,CAAe2V,EAAoBC,CAAAA,GAA8B,CAEtF,IAAMjuC,CAAAA,CAAgB,IAAI,GAAA,CAEpBkuC,CAAAA,CAAYpQ,CAAAA,EAAqB,CACrCA,EAAS,OAAA,CAAQ/7B,CAAAA,EAAQ,CACnBA,CAAAA,CAAK,YAAA,EACP/B,CAAAA,CAAc,GAAA,CAAI+B,CAAAA,CAAK,GAAIA,CAAAA,CAAK,YAAY,CAAA,CAE1CA,CAAAA,CAAK,UACPmsC,CAAAA,CAASnsC,CAAAA,CAAK,QAAQ,EAE1B,CAAC,EACH,CAAA,CAEAmsC,CAAAA,CAAS7V,CAAK,EAGd,IAAMj4B,CAAAA,CAAeJ,CAAAA,CAAc,GAAA,CAAIiuC,CAAQ,CAAA,EAAK,EAAC,CACrDjuC,CAAAA,CAAc,IAAIiuC,CAAAA,CAAU,CAAC,GAAG7tC,CAAAA,CAAc4tC,CAAU,CAAC,CAAA,CAGzD,IAAM3tC,CAAAA,CAAU,IAAI,GAAA,CACdC,CAAAA,CAAW,IAAI,GAAA,CAEfC,EAAYc,CAAAA,EAA4B,CAC5C,GAAI,CAAChB,EAAQ,GAAA,CAAIgB,CAAM,CAAA,CAAG,CACxBhB,EAAQ,GAAA,CAAIgB,CAAM,CAAA,CAClBf,CAAAA,CAAS,IAAIe,CAAM,CAAA,CAEnB,IAAMpB,CAAAA,CAAOD,EAAc,GAAA,CAAIqB,CAAM,CAAA,EAAK,GAC1C,IAAA,IAAWZ,CAAAA,IAASR,CAAAA,CAAM,CACxB,GAAI,CAACI,CAAAA,CAAQ,GAAA,CAAII,CAAK,CAAA,EAAKF,CAAAA,CAASE,CAAK,CAAA,CACvC,OAAO,KAAA,CACF,GAAIH,CAAAA,CAAS,GAAA,CAAIG,CAAK,CAAA,CAC3B,OAAO,KAEX,CACF,CACA,OAAAH,CAAAA,CAAS,MAAA,CAAOe,CAAM,EACf,KACT,CAAA,CAEA,OAAOd,CAAAA,CAAS0tC,CAAQ,CAC1B,CAAA,CAOA,YAAA,CAAe5V,CAAAA,EAA0B,CACvC,IAAMlkC,CAAAA,CAAiB,EAAC,CAElBg6C,EAAWrQ,CAAAA,EAAqB,CACpCA,CAAAA,CAAS,OAAA,CAAQ/7B,CAAAA,EAAQ,CACvB5N,CAAAA,CAAO,IAAA,CAAK4N,CAAI,CAAA,CACZA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,SAAS,MAAA,CAAS,CAAA,EAC1CosC,CAAAA,CAAQpsC,CAAAA,CAAK,QAAQ,EAEzB,CAAC,EACH,CAAA,CAEA,OAAAosC,CAAAA,CAAQ9V,CAAK,CAAA,CACNlkC,CACT,EAQA,YAAA,CAAc,CAACkkC,CAAAA,CAAeh3B,CAAAA,GAAqC,CACjE,IAAA,IAAWU,CAAAA,IAAQs2B,CAAAA,CAAO,CACxB,GAAIt2B,CAAAA,CAAK,EAAA,GAAOV,CAAAA,CACd,OAAOU,CAAAA,CAET,GAAIA,CAAAA,CAAK,QAAA,CAAU,CACjB,IAAMg5B,CAAAA,CAAQ4S,EAAAA,CAAW,YAAA,CAAa5rC,EAAK,QAAA,CAAUV,CAAM,CAAA,CAC3D,GAAI05B,EAAO,OAAOA,CACpB,CACF,CAEF,EAQA,cAAA,CAAgB,CAAC1C,CAAAA,CAAeh3B,CAAAA,GAA2B,CACzD,IAAM+sC,CAAAA,CAAkB,EAAC,CACnBrsC,EAAO4rC,EAAAA,CAAW,YAAA,CAAatV,CAAAA,CAAOh3B,CAAM,EAElD,GAAI,CAACU,CAAAA,EAAQ,CAACA,CAAAA,CAAK,QAAA,CAAU,OAAOqsC,CAAAA,CAEpC,IAAIC,CAAAA,CAAgCtsC,CAAAA,CAAK,QAAA,CACzC,KAAOssC,GAAW,CAChB,IAAMxS,CAAAA,CAAS8R,EAAAA,CAAW,aAAatV,CAAAA,CAAOgW,CAAS,CAAA,CACvD,GAAIxS,EACFuS,CAAAA,CAAQ,OAAA,CAAQvS,CAAM,CAAA,CACtBwS,EAAYxS,CAAAA,CAAO,QAAA,CAAA,KAEnB,KAEJ,CAEA,OAAOuS,CACT,CAAA,CAOA,YAAA,CAAe/V,CAAAA,EACN,KAAK,SAAA,CAAUA,CAAAA,CAAO,IAAA,CAAM,CAAC,CAAA,CAQtC,cAAA,CAAiBiW,CAAAA,EAAyB,CACxC,GAAI,CACF,IAAMC,CAAAA,CAAS,IAAA,CAAK,MAAMD,CAAI,CAAA,CAG9B,GAAI,CAAC,MAAM,OAAA,CAAQC,CAAM,CAAA,CACvB,MAAM,IAAI,KAAA,CAAM,0CAA0C,CAAA,CAI5D,OAAAA,EAAO,OAAA,CAAQ,CAACxsC,CAAAA,CAAMlJ,CAAAA,GAAU,CAC9B,GAAI,CAACkJ,CAAAA,CAAK,EAAA,EAAM,CAACA,CAAAA,CAAK,IAAA,CACpB,MAAM,IAAI,KAAA,CAAM,CAAA,sBAAA,EAAyBlJ,CAAK,CAAA,oCAAA,CAAsC,CAExF,CAAC,CAAA,CAEM01C,CACT,CAAA,MAAS57C,EAAO,CACd,MAAM,IAAI,KAAA,CAAM,2BAA2BA,CAAAA,YAAiB,KAAA,CAAQA,CAAAA,CAAM,OAAA,CAAU,eAAe,CAAA,CAAE,CACvG,CACF,CAAA,CAOA,YAAc0lC,CAAAA,EAA0B,CACtC,IAAMmW,CAAAA,CAAOb,GAAW,YAAA,CAAatV,CAAK,CAAA,CAIpCxiC,CAAAA,CAAiB,CADP,CAAC,IAAA,CAAM,MAAA,CAAQ,YAAA,CAAc,UAAA,CAAY,UAAA,CAAY,QAAA,CAAU,cAAc,EAC7D,IAAA,CAAK,GAAG,CAAC,CAAA,CAGzC,OAAA24C,CAAAA,CAAK,OAAA,CAAQzsC,CAAAA,EAAQ,CACnB,IAAM7L,CAAAA,CAAM,CACV6L,CAAAA,CAAK,EAAA,CACL,IAAIA,CAAAA,CAAK,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAM,IAAI,CAAC,CAAA,CAAA,CAAA,CACjCA,CAAAA,CAAK,SAAA,CAAYA,EAAK,SAAA,CAAU,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAI,EAAA,CAC9DA,EAAK,OAAA,CAAUA,CAAAA,CAAK,OAAA,CAAQ,WAAA,GAAc,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,EAAI,EAAA,CAC1DA,CAAAA,CAAK,QAAA,CAAS,QAAA,GACdA,CAAAA,CAAK,MAAA,EAAU,EAAA,CACfA,CAAAA,CAAK,cAAc,IAAA,CAAK,GAAG,CAAA,EAAK,EAClC,EACAlM,CAAAA,CAAK,IAAA,CAAKK,CAAAA,CAAI,IAAA,CAAK,GAAG,CAAC,EACzB,CAAC,CAAA,CAEML,EAAK,IAAA,CAAK;AAAA,CAAI,CACvB,CAAA,CAOA,UAAA,CAAagI,CAAAA,EAAuB,CAClC,IAAMC,CAAAA,CAAOD,CAAAA,CAAK,WAAA,EAAY,CACxBE,CAAAA,CAAQ,MAAA,CAAOF,CAAAA,CAAK,UAAS,CAAI,CAAC,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CACnDG,CAAAA,CAAM,MAAA,CAAOH,CAAAA,CAAK,OAAA,EAAS,CAAA,CAAE,QAAA,CAAS,EAAG,GAAG,CAAA,CAClD,OAAO,CAAA,EAAGC,CAAI,CAAA,CAAA,EAAIC,CAAK,CAAA,CAAA,EAAIC,CAAG,CAAA,CAChC,CAAA,CAOA,SAAA,CAAYywC,CAAAA,EACH,IAAI,KAAKA,CAAU,CAAA,CAQ5B,gBAAA,CAAmB1sC,CAAAA,EACb,CAACA,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,OAAA,CAAgB,IAAA,CACtC,CACL,KAAA,CAAOA,CAAAA,CAAK,UACZ,GAAA,CAAKA,CAAAA,CAAK,OACZ,CAAA,CAQF,oBAAA,CAAuBs2B,CAAAA,EAA+B,CAEpD,IAAMqW,CAAAA,CADOf,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CACd,MAAA,CAAO72B,GAAKA,CAAAA,CAAE,SAAS,CAAA,CAEnD,OAAIktC,CAAAA,CAAe,MAAA,GAAW,CAAA,CAAU,IAAA,CAEjC,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,GAAGA,CAAAA,CAAe,IAAIltC,CAAAA,EAAKA,CAAAA,CAAE,SAAA,CAAW,OAAA,EAAS,CAAC,CAAC,CAC9E,CAAA,CAOA,gBAAA,CAAmB62B,CAAAA,EAA+B,CAEhD,IAAMqW,CAAAA,CADOf,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CACd,MAAA,CAAO72B,CAAAA,EAAKA,CAAAA,CAAE,OAAO,CAAA,CAEjD,OAAIktC,CAAAA,CAAe,MAAA,GAAW,CAAA,CAAU,IAAA,CAEjC,IAAI,IAAA,CAAK,KAAK,GAAA,CAAI,GAAGA,CAAAA,CAAe,GAAA,CAAIltC,CAAAA,EAAKA,CAAAA,CAAE,OAAA,CAAS,OAAA,EAAS,CAAC,CAAC,CAC5E,CAAA,CAQA,YAAA,CAAc,CAACmtC,CAAAA,CAAaC,CAAAA,GACtB,CAACD,CAAAA,CAAM,SAAA,EAAa,CAACA,CAAAA,CAAM,OAAA,EAAW,CAACC,CAAAA,CAAM,SAAA,EAAa,CAACA,CAAAA,CAAM,OAAA,CAC5D,MAGFD,CAAAA,CAAM,SAAA,EAAaC,CAAAA,CAAM,OAAA,EAAWA,CAAAA,CAAM,SAAA,EAAaD,CAAAA,CAAM,OAAA,CAStE,iBAAA,CAAmB,CAACtW,CAAAA,CAAeh3B,CAAAA,GACpBssC,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAC9B,MAAA,CAAOt2B,CAAAA,EACjBA,CAAAA,CAAK,YAAA,EAAgBA,CAAAA,CAAK,YAAA,CAAa,QAAA,CAASV,CAAM,CACxD,CAAA,CASF,kBAAA,CAAoB,CAACg3B,CAAAA,CAAeh3B,IAA2B,CAC7D,IAAMU,CAAAA,CAAO4rC,EAAAA,CAAW,YAAA,CAAatV,CAAAA,CAAOh3B,CAAM,CAAA,CAClD,OAAI,CAACU,CAAAA,EAAQ,CAACA,CAAAA,CAAK,YAAA,CAAqB,EAAC,CAE5B4rC,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAC9B,MAAA,CAAO72B,CAAAA,EAAKO,CAAAA,CAAK,YAAA,CAAc,QAAA,CAASP,CAAAA,CAAE,EAAE,CAAC,CAC3D,EAQA,cAAA,CAAgB,CAAC62B,CAAAA,CAAezlC,CAAAA,GACvB+6C,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAAE,MAAA,CAAO72B,CAAAA,EAAKA,CAAAA,CAAE,MAAA,GAAW5O,CAAM,CAAA,CAUvE,iBAAA,CAAmB,CAACylC,CAAAA,CAAe/6B,CAAAA,CAAiBC,CAAAA,GAC3CowC,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAAE,MAAA,CAAOt2B,CAAAA,EACvC,CAACA,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,QAAgB,KAAA,CACtCA,CAAAA,CAAK,SAAA,EAAaxE,CAAAA,EAAWwE,CAAAA,CAAK,OAAA,EAAWzE,CACrD,CAAA,CASH,eAAA,CAAiB,CAAC+6B,CAAAA,CAAewW,CAAAA,CAAY,IAAA,GACpC,CAAC,GAAGxW,CAAK,CAAA,CAAE,IAAA,CAAK,CAAC,CAAA,CAAGnhB,CAAAA,GAAM,CAC/B,GAAI,CAAC,CAAA,CAAE,SAAA,EAAa,CAACA,CAAAA,CAAE,SAAA,CAAW,OAAO,CAAA,CACzC,IAAM43B,CAAAA,CAAO,CAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CAAI53B,CAAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CACzD,OAAO23B,CAAAA,CAAYC,CAAAA,CAAO,CAACA,CAC7B,CAAC,CAAA,CASH,aAAA,CAAe,CAACzW,CAAAA,CAAewW,CAAAA,CAAY,IAAA,GAClC,CAAC,GAAGxW,CAAK,CAAA,CAAE,IAAA,CAAK,CAAC,EAAGnhB,CAAAA,GAAM,CAC/B,GAAI,CAAC,CAAA,CAAE,OAAA,EAAW,CAACA,CAAAA,CAAE,OAAA,CAAS,OAAO,CAAA,CACrC,IAAM43B,CAAAA,CAAO,CAAA,CAAE,QAAQ,OAAA,EAAQ,CAAI53B,CAAAA,CAAE,OAAA,CAAQ,OAAA,EAAQ,CACrD,OAAO23B,CAAAA,CAAYC,CAAAA,CAAO,CAACA,CAC7B,CAAC,CAAA,CASH,cAAA,CAAgB,CAACzW,CAAAA,CAAewW,CAAAA,CAAY,IAAA,GACnC,CAAC,GAAGxW,CAAK,CAAA,CAAE,IAAA,CAAK,CAAC,CAAA,CAAGnhB,CAAAA,GAAM,CAC/B,IAAM43B,CAAAA,CAAO,CAAA,CAAE,QAAA,CAAW53B,CAAAA,CAAE,QAAA,CAC5B,OAAO23B,CAAAA,CAAYC,CAAAA,CAAO,CAACA,CAC7B,CAAC,CAAA,CAQH,sBAAA,CAAyBzW,CAAAA,EAA0B,CACjD,IAAMmW,CAAAA,CAAOb,GAAW,YAAA,CAAatV,CAAK,CAAA,CAC1C,GAAImW,CAAAA,CAAK,MAAA,GAAW,CAAA,CAAG,OAAO,CAAA,CAE9B,IAAM3kB,CAAAA,CAAQ2kB,CAAAA,CAAK,MAAA,CAAO,CAACvlB,EAAKlnB,CAAAA,GAASknB,CAAAA,CAAMlnB,CAAAA,CAAK,QAAA,CAAU,CAAC,CAAA,CAC/D,OAAO,IAAA,CAAK,KAAA,CAAM8nB,CAAAA,CAAQ2kB,CAAAA,CAAK,MAAM,CACvC,CAAA,CAQA,cAAe,CAACnW,CAAAA,CAAe6T,CAAAA,GAAqC,CAClE,IAAIlzC,CAAAA,CAAkBq/B,CAAAA,CAClBt2B,CAAAA,CAEJ,IAAA,IAAS5P,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAI+5C,CAAAA,CAAK,MAAA,CAAQ/5C,IAAK,CACpC,IAAM0G,CAAAA,CAAQqzC,CAAAA,CAAK/5C,CAAC,CAAA,CAIpB,GAHI,CAAC6G,CAAAA,EAAWH,CAAAA,GAAU,MAAA,EAAaA,CAAAA,EAASG,CAAAA,CAAQ,MAAA,GAExD+I,EAAO/I,CAAAA,CAAQH,CAAK,CAAA,CAChB,CAACkJ,CAAAA,CAAAA,CAAM,OAEP5P,CAAAA,CAAI+5C,CAAAA,CAAK,MAAA,CAAS,CAAA,GACpBlzC,CAAAA,CAAU+I,CAAAA,CAAK,QAAA,EAAY,IAE/B,CAEA,OAAOA,CACT,CAAA,CAQA,SAAA,CAAW,CAACA,CAAAA,CAAYgtC,CAAAA,IACf,CACL,GAAGhtC,CAAAA,CACH,EAAA,CAAIgtC,CAAAA,EAAS,CAAA,EAAGhtC,EAAK,EAAE,CAAA,KAAA,CAAA,CACvB,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAU,GAAA,CAAI8lB,CAAAA,EAAM8lB,EAAAA,CAAW,SAAA,CAAU9lB,CAAE,CAAC,CAC7D,CAAA,CAAA,CASF,WAAA,CAAa,MAAOwQ,CAAAA,CAAe1gC,CAAAA,CAAW,iBAAA,GAAqC,CACjF,GAAI,CACF,GAAI,CAAC0gC,CAAAA,EAASA,CAAAA,CAAM,MAAA,GAAW,CAAA,CAAG,CAChC,KAAA,CAAM,qCAAqC,EAC3C,MACF,CAGA,GAAM,CAAE,KAAA,CAAArhC,CAAM,CAAA,CAAI,MAAM,OAAO,OAAO,CAAA,CAChC,CAAE,OAAA,CAASg4C,CAAU,EAAI,MAAM,OAAO,iBAAiB,CAAA,CAEvDj4C,CAAAA,CAAM,IAAIC,CAAAA,CACVw3C,CAAAA,CAAOb,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAE1C,GAAImW,CAAAA,CAAK,SAAW,CAAA,CAAG,CACrB,KAAA,CAAM,0BAA0B,CAAA,CAChC,MACF,CAGAz3C,CAAAA,CAAI,WAAA,CAAY,EAAE,CAAA,CAClBA,CAAAA,CAAI,IAAA,CAAK,yBAAA,CAA2B,GAAI,EAAE,CAAA,CAG1C,IAAMnB,CAAAA,CAAU,CAAC,CAAC,WAAA,CAAa,YAAA,CAAc,UAAA,CAAY,UAAA,CAAY,UAAA,CAAY,QAAQ,CAAC,CAAA,CACpFF,EAAO84C,CAAAA,CAAK,GAAA,CAAIzsC,CAAAA,EAAQ,CAC5B,IAAMxQ,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACpC4rC,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,SAAA,CAAWA,EAAK,OAAO,CAAA,CACzD,CAAA,CAEJ,OAAO,CACLA,CAAAA,CAAK,IAAA,CACLA,CAAAA,CAAK,SAAA,CAAY4rC,EAAAA,CAAW,UAAA,CAAW5rC,CAAAA,CAAK,SAAS,CAAA,CAAI,MACzDA,CAAAA,CAAK,OAAA,CAAU4rC,EAAAA,CAAW,UAAA,CAAW5rC,CAAAA,CAAK,OAAO,CAAA,CAAI,KAAA,CACrDxQ,CAAAA,CAAW,CAAA,CAAI,CAAA,EAAGA,CAAQ,CAAA,KAAA,CAAA,CAAU,KAAA,CACpC,CAAA,EAAGwQ,CAAAA,CAAK,QAAQ,CAAA,CAAA,CAAA,CAChBA,CAAAA,CAAK,MAAA,EAAU,KACjB,CACF,CAAC,CAAA,CAGDitC,CAAAA,CAAUj4C,CAAAA,CAAK,CACb,IAAA,CAAMnB,CAAAA,CACN,IAAA,CAAMF,EACN,MAAA,CAAQ,EAAA,CACR,MAAA,CAAQ,CACN,QAAA,CAAU,CAAA,CACV,WAAA,CAAa,CACf,CAAA,CACA,UAAA,CAAY,CACV,SAAA,CAAW,CAAC,EAAA,CAAI,IAAK,GAAG,CAAA,CACxB,SAAA,CAAW,GAAA,CACX,SAAA,CAAW,MACb,CAAA,CACA,kBAAA,CAAoB,CAClB,SAAA,CAAW,CAAC,GAAA,CAAK,GAAA,CAAK,GAAG,CAC3B,CAAA,CACA,YAAA,CAAc,CACZ,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CAAA,CACnB,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CAAA,CACnB,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CAAA,CACnB,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CAAA,CACnB,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CAAA,CACnB,CAAA,CAAG,CAAE,SAAA,CAAW,EAAG,CACrB,CACF,CAAC,CAAA,CAGDqB,CAAAA,CAAI,IAAA,CAAKY,CAAQ,EACnB,CAAA,MAAShF,CAAAA,CAAO,CACd,MAAMA,CACR,CACF,CAAA,CAQA,aAAA,CAAe,MAAO0lC,CAAAA,CAAe1gC,CAAAA,CAAW,kBAAA,GAAsC,CACpF,IAAMs3C,CAAAA,CAAO,MAAM,OAAO,MAAM,CAAA,CAI1Bv5C,EAHOi4C,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAGxB,GAAA,CAAIt2B,CAAAA,EAAQ,CAC5B,IAAMxQ,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACpC4rC,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,SAAA,CAAWA,CAAAA,CAAK,OAAO,CAAA,CACzD,CAAA,CAEJ,OAAO,CACL,SAAA,CAAWA,CAAAA,CAAK,EAAA,CAChB,WAAA,CAAaA,CAAAA,CAAK,IAAA,CAClB,YAAA,CAAcA,EAAK,SAAA,CAAY4rC,EAAAA,CAAW,UAAA,CAAW5rC,CAAAA,CAAK,SAAS,CAAA,CAAI,EAAA,CACvE,UAAA,CAAYA,CAAAA,CAAK,OAAA,CAAU4rC,EAAAA,CAAW,UAAA,CAAW5rC,CAAAA,CAAK,OAAO,EAAI,EAAA,CACjE,iBAAA,CAAmBxQ,CAAAA,CAAW,CAAA,CAAIA,CAAAA,CAAW,EAAA,CAC7C,cAAA,CAAgBwQ,CAAAA,CAAK,QAAA,CACrB,MAAA,CAAUA,CAAAA,CAAK,MAAA,EAAU,EAAA,CACzB,SAAA,CAAaA,EAAK,SAAA,EAAW,GAAA,CAAIkL,CAAAA,EAAKA,CAAAA,CAAE,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI,CAAA,EAAK,EAAA,CAC5D,YAAA,CAAgBlL,CAAAA,CAAK,YAAA,EAAc,IAAA,CAAK,IAAI,CAAA,EAAK,EAAA,CACjD,cAAA,CAAgBA,CAAAA,CAAK,WAAA,CAAc,KAAA,CAAQ,IAAA,CAC3C,WAAA,CAAaA,CAAAA,CAAK,QAAA,EAAY,EAAA,CAC9B,KAAA,CAASA,CAAAA,CAAK,KAAA,EAAS,CACzB,CACF,CAAC,CAAA,CAGKmtC,CAAAA,CAAYD,CAAAA,CAAK,KAAA,CAAM,aAAA,CAAcv5C,CAAI,CAAA,CAGzCy5C,CAAAA,CAAe,CACnB,CAAE,GAAA,CAAK,EAAG,EACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,EAAG,CAAA,CACV,CAAE,GAAA,CAAK,CAAE,CACX,CAAA,CACAD,EAAU,OAAO,CAAA,CAAIC,CAAAA,CAGrB,IAAMC,CAAAA,CAAWH,CAAAA,CAAK,KAAA,CAAM,QAAA,EAAS,CACrCA,CAAAA,CAAK,KAAA,CAAM,iBAAA,CAAkBG,CAAAA,CAAUF,CAAAA,CAAW,aAAa,CAAA,CAG/DD,CAAAA,CAAK,SAAA,CAAUG,CAAAA,CAAUz3C,CAAQ,EACnC,CAAA,CAUA,iBAAA,CAAmB,CAAC0gC,CAAAA,CAAegX,CAAAA,CAAc,eAAA,CAAiB13C,CAAAA,CAAW,aAAA,GAAwB,CACnG,IAAM62C,CAAAA,CAAOb,EAAAA,CAAW,YAAA,CAAatV,CAAK,CAAA,CAGpCiX,CAAAA,CAAa,IAAI,GAAA,CACvBd,CAAAA,CAAK,OAAA,CAAQ,CAACzsC,CAAAA,CAAMlJ,CAAAA,GAAU,CAC5By2C,CAAAA,CAAW,GAAA,CAAIvtC,CAAAA,CAAK,EAAA,CAAIlJ,CAAAA,CAAQ,CAAC,EACnC,CAAC,CAAA,CAGD,IAAM02C,CAAAA,CAAgB1xC,CAAAA,EACbA,CAAAA,CAAK,WAAA,GAAc,OAAA,CAAQ,GAAA,CAAK,EAAE,CAAA,CAIrC2xC,CAAAA,CAAe7B,EAAAA,CAAW,oBAAA,CAAqBtV,CAAK,CAAA,EAAK,IAAI,IAAA,CAC7DoX,CAAAA,CAAa9B,EAAAA,CAAW,gBAAA,CAAiBtV,CAAK,CAAA,EAAK,IAAI,IAAA,CAGvDqX,CAAAA,CAAWlB,CAAAA,CAAK,GAAA,CAAI,CAACzsC,CAAAA,CAAMlJ,CAAAA,GAAU,CACzC,IAAM82C,CAAAA,CAAML,CAAAA,CAAW,GAAA,CAAIvtC,EAAK,EAAE,CAAA,CAC5BxQ,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACpC4rC,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,SAAA,CAAWA,CAAAA,CAAK,OAAO,CAAA,CACzD,CAAA,CAGE6tC,CAAAA,CAAAA,CAAoB7tC,CAAAA,CAAK,YAAA,EAAgB,EAAC,EAC7C,MAAA,CAAOtB,CAAAA,EAAS6uC,CAAAA,CAAW,GAAA,CAAI7uC,CAAK,CAAC,CAAA,CACrC,GAAA,CAAIA,CAAAA,EAAS;AAAA;AAAA,0BAAA,EAEM6uC,CAAAA,CAAW,GAAA,CAAI7uC,CAAK,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAA,CAKtB,CAAA,CAAE,IAAA,CAAK,EAAE,CAAA,CAE9B,OAAO;AAAA;AAAA,WAAA,EAEAkvC,CAAG,CAAA;AAAA,UAAA,EACJ92C,EAAQ,CAAC,CAAA;AAAA,YAAA,EACPkJ,CAAAA,CAAK,KAAK,OAAA,CAAQ,UAAA,CAAYwS,IAAM,CAAE,GAAA,CAAK,OAAQ,GAAA,CAAK,MAAA,CAAQ,IAAK,OAAA,CAAS,GAAA,CAAK,SAAU,GAAA,CAAK,QAAS,GAAGA,CAAC,CAAA,EAAKA,CAAC,CAAC,CAAA;AAAA;AAAA;AAAA,kBAAA,EAGhHg7B,CAAAA,CAAa,IAAI,IAAM,CAAC,CAAA;AAAA,WAAA,EAC/B12C,EAAQ,CAAC,CAAA;AAAA,qBAAA,EACCA,EAAQ,CAAC,CAAA;AAAA,oBAAA,EACVkJ,CAAAA,CAAK,OAAS,CAAC,CAAA;AAAA;AAAA,aAAA,EAEtBA,EAAK,SAAA,CAAYwtC,CAAAA,CAAaxtC,CAAAA,CAAK,SAAS,EAAI,EAAE,CAAA;AAAA,cAAA,EACjDA,EAAK,OAAA,CAAUwtC,CAAAA,CAAaxtC,CAAAA,CAAK,OAAO,EAAI,EAAE,CAAA;AAAA,kBAAA,EAC1CxQ,EAAW,CAAC,CAAA;AAAA;AAAA,cAAA,EAEhBA,EAAW,CAAC,CAAA;AAAA,YAAA,EACdwQ,EAAK,OAAA,CAAUwtC,CAAAA,CAAaxtC,CAAAA,CAAK,OAAO,EAAI,EAAE,CAAA;AAAA,cAAA,EAC5CA,EAAK,SAAA,CAAYwtC,CAAAA,CAAaxtC,CAAAA,CAAK,SAAS,EAAI,EAAE,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAA,EAM/CA,CAAAA,CAAK,WAAA,CAAc,GAAA,CAAM,GAAG,CAAA;AAAA,eAAA,EAC7BA,EAAK,QAAA,EAAYA,CAAAA,CAAK,SAAS,MAAA,CAAS,CAAA,CAAK,IAAM,GAAG,CAAA;AAAA,gBAAA,EACtDA,CAAAA,CAAK,cAAA,CAAiB,GAAA,CAAM,GAAG,CAAA;AAAA;AAAA;AAAA;AAAA,kBAAA,EAI7BA,EAAK,SAAA,CAAYwtC,CAAAA,CAAaxtC,CAAAA,CAAK,SAAS,EAAI,EAAE,CAAA;AAAA,mBAAA,EACjDA,EAAK,OAAA,CAAUwtC,CAAAA,CAAaxtC,CAAAA,CAAK,OAAO,EAAI,EAAE,CAAA;AAAA,iBAAA,EAChDA,EAAK,SAAA,CAAYwtC,CAAAA,CAAaxtC,CAAAA,CAAK,SAAS,EAAI,EAAE,CAAA;AAAA,kBAAA,EACjDA,EAAK,OAAA,CAAUwtC,CAAAA,CAAaxtC,CAAAA,CAAK,OAAO,EAAI,EAAE,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAA,EAQzCA,EAAK,QAAQ,CAAA;AAAA,2BAAA,EACTA,EAAK,QAAQ,CAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,EAIrBA,CAAAA,CAAK,SAAW,CAAA,EAAKA,CAAAA,CAAK,UAAYwtC,CAAAA,CAAaxtC,CAAAA,CAAK,SAAS,CAAA,CAAI,EAAE,CAAA;AAAA,oBAAA,EACtEA,CAAAA,CAAK,WAAa,GAAA,EAAOA,CAAAA,CAAK,QAAUwtC,CAAAA,CAAaxtC,CAAAA,CAAK,OAAO,CAAA,CAAI,EAAE,CAAA;AAAA,wBAAA,EACnE,KAAK,KAAA,CAAMxQ,CAAAA,CAAWwQ,EAAK,QAAA,CAAW,GAAG,EAAI,CAAC,CAAA;AAAA;AAAA;AAAA,oBAAA,EAGlD,KAAK,KAAA,CAAMxQ,CAAAA,CAAWwQ,EAAK,QAAA,CAAW,GAAG,EAAI,CAAC,CAAA;AAAA;AAAA,qBAAA,EAE7CxQ,EAAW,CAAC,CAAA;AAAA,2BAAA,EACN,IAAA,CAAK,MAAMA,CAAAA,EAAY,GAAA,CAAMwQ,EAAK,QAAA,CAAA,CAAY,GAAG,EAAI,CAAC,CAAA;AAAA;AAAA,uBAAA,EAE1D,IAAA,CAAK,MAAMxQ,CAAAA,EAAY,GAAA,CAAMwQ,EAAK,QAAA,CAAA,CAAY,GAAG,EAAI,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAAA,EAmBrC6tC,CAAgB;AAAA,WAAA,CAEtD,CAAC,CAAA,CAAE,IAAA,CAAK,EAAE,EAGJC,CAAAA,CAAM,CAAA;AAAA;AAAA;AAAA,QAAA,EAGNR,EAAY,OAAA,CAAQ,UAAA,CAAY96B,IAAM,CAAE,GAAA,CAAK,OAAQ,GAAA,CAAK,MAAA,CAAQ,IAAK,OAAA,CAAS,GAAA,CAAK,SAAU,GAAA,CAAK,QAAS,GAAGA,CAAC,CAAA,EAAKA,CAAC,CAAC,CAAA;AAAA,SAAA,EACvH86B,EAAY,OAAA,CAAQ,UAAA,CAAY96B,IAAM,CAAE,GAAA,CAAK,OAAQ,GAAA,CAAK,MAAA,CAAQ,IAAK,OAAA,CAAS,GAAA,CAAK,SAAU,GAAA,CAAK,QAAS,GAAGA,CAAC,CAAA,EAAKA,CAAC,CAAC,CAAA;AAAA,gBAAA,EACjHg7B,CAAAA,CAAa,IAAI,IAAM,CAAC,CAAA;AAAA,aAAA,EAC3BA,CAAAA,CAAa,IAAI,IAAM,CAAC,CAAA;AAAA;AAAA,aAAA,EAExBA,CAAAA,CAAaC,CAAY,CAAC,CAAA;AAAA,cAAA,EACzBD,CAAAA,CAAaE,CAAU,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,EAqCvBF,CAAAA,CAAa,IAAI,IAAM,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAA,EAMfA,CAAAA,CAAa,IAAI,IAAM,CAAC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,EA6FvCG,CAAQ;AAAA;AAAA,UAAA,CAAA,CAKT33C,CAAAA,CAAO,IAAI,IAAA,CAAK,CAAC83C,CAAG,EAAG,CAAE,IAAA,CAAM,gCAAiC,CAAC,CAAA,CACjE53C,CAAAA,CAAO,SAAS,aAAA,CAAc,GAAG,CAAA,CACvCA,CAAAA,CAAK,IAAA,CAAO,GAAA,CAAI,eAAA,CAAgBF,CAAI,CAAA,CACpCE,CAAAA,CAAK,QAAA,CAAWN,CAAAA,CAChBM,CAAAA,CAAK,KAAA,GACL,GAAA,CAAI,eAAA,CAAgBA,CAAAA,CAAK,IAAI,EAC/B,CAAA,CAOA,qBAAA,CAAwBogC,CAAAA,EAA4B,CAClD,IAAMmW,CAAAA,CAAOb,EAAAA,CAAW,YAAA,CAAatV,CAAK,EACpCqW,CAAAA,CAAiBF,CAAAA,CAAK,MAAA,CAAOhtC,CAAAA,EAAKA,CAAAA,CAAE,SAAA,EAAaA,CAAAA,CAAE,OAAO,CAAA,CAEhE,GAAIktC,CAAAA,CAAe,MAAA,GAAW,CAAA,CAAG,OAAO,EAAC,CAGzC,IAAMoB,CAAAA,CAAa,IAAI,GAAA,CAEjBC,CAAAA,CAAuBhuC,GAAqB,CAChD,GAAI+tC,CAAAA,CAAW,GAAA,CAAI/tC,CAAAA,CAAK,EAAE,EAAG,OAE7B,IAAMxQ,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACpC4rC,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,SAAA,CAAWA,CAAAA,CAAK,OAAO,CAAA,CACzD,EAEAkyB,CAAAA,CAAK,CAAA,CAGT,GAAIlyB,CAAAA,CAAK,YAAA,EAAgBA,CAAAA,CAAK,YAAA,CAAa,MAAA,CAAS,CAAA,CAClD,IAAA,IAAWtB,CAAAA,IAASsB,CAAAA,CAAK,YAAA,CAAc,CACrC,IAAMqS,CAAAA,CAAUo6B,CAAAA,CAAK,IAAA,CAAKhtC,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOf,CAAK,CAAA,CAC7C,GAAI2T,CAAAA,CAAS,CACX27B,CAAAA,CAAoB37B,CAAO,CAAA,CAC3B,IAAM47B,CAAAA,CAAQF,CAAAA,CAAW,GAAA,CAAIrvC,CAAK,CAAA,EAAG,EAAA,EAAM,EAC3CwzB,CAAAA,CAAK,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAI+b,CAAK,EACzB,CACF,CAGF,IAAMC,CAAAA,CAAKhc,CAAAA,CAAK1iC,CAAAA,CAChBu+C,CAAAA,CAAW,GAAA,CAAI/tC,CAAAA,CAAK,EAAA,CAAI,CAAE,EAAA,CAAAkyB,CAAAA,CAAI,EAAA,CAAAgc,CAAG,CAAC,EACpC,CAAA,CAEAvB,CAAAA,CAAe,OAAA,CAAQqB,CAAmB,CAAA,CAG1C,IAAMN,CAAAA,CAAa,IAAA,CAAK,GAAA,CAAI,GAAG,KAAA,CAAM,IAAA,CAAKK,CAAAA,CAAW,QAAQ,CAAA,CAAE,GAAA,CAAI5vC,CAAAA,EAAKA,CAAAA,CAAE,EAAE,CAAC,CAAA,CAGvEgwC,CAAAA,CAAY,IAAI,GAAA,CAEhBC,CAAAA,CAAsBpuC,CAAAA,EAAqB,CAC/C,GAAImuC,CAAAA,CAAU,GAAA,CAAInuC,CAAAA,CAAK,EAAE,CAAA,CAAG,OAE5B,IAAMxQ,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACpC4rC,EAAAA,CAAW,iBAAA,CAAkB5rC,EAAK,SAAA,CAAWA,CAAAA,CAAK,OAAO,CAAA,CACzD,CAAA,CAGEquC,CAAAA,CAAa5B,CAAAA,CAAK,MAAA,CAAOhtC,CAAAA,EAC7BA,CAAAA,CAAE,YAAA,EAAgBA,CAAAA,CAAE,YAAA,CAAa,QAAA,CAASO,EAAK,EAAE,CACnD,CAAA,CAEIsuC,CAAAA,CAAKZ,CAAAA,CAGT,GAAIW,CAAAA,CAAW,MAAA,CAAS,CAAA,CACtB,IAAA,IAAWE,CAAAA,IAAaF,CAAAA,CAAY,CAClCD,CAAAA,CAAmBG,CAAS,CAAA,CAC5B,IAAMC,CAAAA,CAASL,CAAAA,CAAU,GAAA,CAAII,CAAAA,CAAU,EAAE,CAAA,EAAG,EAAA,EAAM,CAAA,CAClDD,CAAAA,CAAK,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAIE,CAAM,EAC1B,CAGF,IAAMC,CAAAA,CAAKH,CAAAA,CAAK9+C,CAAAA,CAChB2+C,EAAU,GAAA,CAAInuC,CAAAA,CAAK,EAAA,CAAI,CAAE,EAAA,CAAAyuC,CAAAA,CAAI,GAAAH,CAAG,CAAC,EACnC,CAAA,CAEA3B,CAAAA,CAAe,OAAA,CAAQyB,CAAkB,CAAA,CAIzC,IAAMM,CAAAA,CAAyB,EAAC,CAEhC,IAAA,IAAW1uC,CAAAA,IAAQ2sC,EAAgB,CACjC,IAAMgC,CAAAA,CAAQZ,CAAAA,CAAW,GAAA,CAAI/tC,CAAAA,CAAK,EAAE,CAAA,CAC9B4uC,CAAAA,CAAOT,CAAAA,CAAU,GAAA,CAAInuC,CAAAA,CAAK,EAAE,CAAA,CAElC,GAAI2uC,CAAAA,EAASC,CAAAA,CAAM,CACjB,IAAMC,CAAAA,CAAQD,CAAAA,CAAK,EAAA,CAAKD,CAAAA,CAAM,EAAA,CAC1B,IAAA,CAAK,GAAA,CAAIE,CAAK,CAAA,CAAI,GAAA,EACpBH,EAAa,IAAA,CAAK1uC,CAAAA,CAAK,EAAE,EAE7B,CACF,CAEA,OAAO0uC,CACT,CAAA,CAQA,cAAA,CAAgB,CAACpY,CAAAA,CAAeh3B,CAAAA,GAAkC,CAChE,IAAMU,CAAAA,CAAO4rC,EAAAA,CAAW,YAAA,CAAatV,CAAAA,CAAOh3B,CAAM,CAAA,CAClD,GAAI,CAACU,CAAAA,EAAQ,CAACA,CAAAA,CAAK,SAAA,EAAa,CAACA,EAAK,OAAA,CAAS,OAAO,IAAA,CAKtD,GAHqB4rC,EAAAA,CAAW,qBAAA,CAAsBtV,CAAK,CAAA,CAG1C,QAAA,CAASh3B,CAAM,CAAA,CAAG,OAAO,CAAA,CAK1C,IAAMwvC,EAAalD,EAAAA,CAAW,iBAAA,CAAkBtV,CAAAA,CAAOh3B,CAAM,CAAA,CAE7D,GAAIwvC,CAAAA,CAAW,MAAA,GAAW,CAAA,CAAG,CAE3B,IAAMpB,CAAAA,CAAa9B,EAAAA,CAAW,gBAAA,CAAiBtV,CAAK,CAAA,CACpD,GAAI,CAACoX,CAAAA,CAAY,OAAO,IAAA,CAExB,IAAMqB,CAAAA,CAAYnD,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,OAAA,CAAS0tC,CAAU,EACvE,OAAO,IAAA,CAAK,GAAA,CAAI,CAAA,CAAGqB,CAAS,CAC9B,CAGA,IAAMC,CAAAA,CAAmBF,CAAAA,CACtB,MAAA,CAAO3wC,CAAAA,EAAKA,CAAAA,CAAE,SAAS,EACvB,GAAA,CAAIA,CAAAA,EAAKA,CAAAA,CAAE,SAAA,CAAW,OAAA,EAAS,CAAA,CAC/B,IAAA,CAAK,CAAC+M,CAAAA,CAAGiK,CAAAA,GAAMjK,CAAAA,CAAIiK,CAAC,CAAA,CAAE,CAAC,CAAA,CAE1B,GAAI,CAAC65B,CAAAA,CAAkB,OAAO,IAAA,CAE9B,IAAMH,CAAAA,CAAQjD,EAAAA,CAAW,iBAAA,CACvB5rC,CAAAA,CAAK,OAAA,CACL,IAAI,IAAA,CAAKgvC,CAAgB,CAC3B,CAAA,CAEA,OAAO,IAAA,CAAK,GAAA,CAAI,CAAA,CAAGH,CAAK,CAC1B,CAAA,CAQA,gBAAA,CAAkB,CAACvY,CAAAA,CAAeh3B,CAAAA,GACXssC,EAAAA,CAAW,sBAAsBtV,CAAK,CAAA,CACvC,QAAA,CAASh3B,CAAM,CAAA,CAWrC,sBAAA,CAAwB,CAACg3B,CAAAA,CAAe2Y,CAAAA,CAAuBpI,CAAAA,GAA+B,CAC5F,IAAMqI,CAAAA,CAActD,EAAAA,CAAW,aAAatV,CAAAA,CAAO2Y,CAAa,CAAA,CAChE,GAAI,CAACC,CAAAA,EAAe,CAACA,CAAAA,CAAY,OAAA,CAAS,OAAO5Y,CAAAA,CAEjD,IAAMwY,CAAAA,CAAalD,EAAAA,CAAW,kBAAkBtV,CAAAA,CAAO2Y,CAAa,CAAA,CACpE,GAAIH,CAAAA,CAAW,MAAA,GAAW,CAAA,CAAG,OAAOxY,CAAAA,CAEpC,IAAI6Y,CAAAA,CAAe,CAAC,GAAG7Y,CAAK,EAG5B,IAAA,IAAW8Y,CAAAA,IAAaN,CAAAA,CAAY,CAClC,GAAI,CAACM,EAAU,SAAA,EAAa,CAACA,CAAAA,CAAU,OAAA,CAAS,SAGhD,IAAM5/C,EAAWo8C,EAAAA,CAAW,iBAAA,CAAkBwD,CAAAA,CAAU,SAAA,CAAWA,CAAAA,CAAU,OAAO,CAAA,CAEhFz9B,CAAAA,CAEAk1B,CAAAA,GAAc,MAAA,EAEhBl1B,CAAAA,CAAe,IAAI,IAAA,CAAKy9B,CAAAA,CAAU,SAAS,CAAA,CAC3Cz9B,CAAAA,CAAa,OAAA,CAAQA,CAAAA,CAAa,OAAA,EAAQ,CAAIk1B,CAAS,CAAA,GAGvDl1B,CAAAA,CAAe,IAAI,IAAA,CAAKu9B,CAAAA,CAAY,OAAO,CAAA,CAC3Cv9B,EAAa,OAAA,CAAQA,CAAAA,CAAa,OAAA,EAAQ,CAAI,CAAC,CAAA,CAAA,CAIjD,IAAMD,CAAAA,CAAak6B,EAAAA,CAAW,gBAAA,CAAiBj6B,CAAAA,CAAcniB,CAAQ,CAAA,CAG/D6/C,CAAAA,CAAiB/Y,GACdA,CAAAA,CAAM,GAAA,CAAI72B,CAAAA,EACXA,CAAAA,CAAE,EAAA,GAAO2vC,CAAAA,CAAU,GACd,CAAE,GAAG3vC,CAAAA,CAAG,SAAA,CAAWkS,CAAAA,CAAc,OAAA,CAASD,CAAW,CAAA,CAE1DjS,CAAAA,CAAE,QAAA,CACG,CAAE,GAAGA,CAAAA,CAAG,QAAA,CAAU4vC,CAAAA,CAAc5vC,CAAAA,CAAE,QAAQ,CAAE,CAAA,CAE9CA,CACR,CAAA,CAGH0vC,EAAeE,CAAAA,CAAcF,CAAY,CAAA,CAGzCA,CAAAA,CAAevD,EAAAA,CAAW,sBAAA,CAAuBuD,CAAAA,CAAcC,CAAAA,CAAU,EAAA,CAAIvI,CAAS,EACxF,CAEA,OAAOsI,CACT,EAgBA,uBAAA,CAAyB,CACvB7Y,CAAAA,CACAyH,CAAAA,CACA8I,CAAAA,CACArP,CAAAA,CACA8X,CAAAA,CACAC,CAAAA,CACAvP,CAAAA,CACAwP,CAAAA,GAWI,CACJ,GAAI3I,CAAAA,GAAc,CAAA,CAAG,OAAO,EAAC,CAE7B,IAAM4I,CAAAA,CAUD,EAAC,CAEAC,EAAaJ,CAAAA,CAAkB,OAAA,EAAQ,CACvCK,CAAAA,CAAW,GAAA,CAAO,EAAA,CAAK,GAAK,EAAA,CAG5BzN,CAAAA,CAAc0J,EAAAA,CAAW,YAAA,CAAatV,CAAAA,CAAOyH,CAAa,CAAA,CAChE,GAAI,CAACmE,CAAAA,EAAe,CAACA,CAAAA,CAAY,OAAA,CAAS,OAAO,EAAC,CAIlD,IAAM0N,CAAAA,CAAmB,CAACtU,CAAAA,CAAsBuU,CAAAA,CAAqBvxC,CAAAA,CAAU,IAAI,GAAA,GAAwB,CACzG,GAAIA,CAAAA,CAAQ,GAAA,CAAIg9B,CAAY,EAAG,OAC/Bh9B,CAAAA,CAAQ,GAAA,CAAIg9B,CAAY,CAAA,CAExB,IAAMwT,CAAAA,CAAalD,EAAAA,CAAW,iBAAA,CAAkBtV,CAAAA,CAAOgF,CAAY,CAAA,CAEnE,IAAA,IAAW8T,CAAAA,IAAaN,EAAY,CAClC,GAAI,CAACM,CAAAA,CAAU,SAAA,EAAa,CAACA,CAAAA,CAAU,OAAA,CAAS,SAGhD,IAAMU,CAAAA,CAAWtY,CAAAA,CAAU,SAAA,CAAU/3B,CAAAA,EAAKA,EAAE,EAAA,GAAO2vC,CAAAA,CAAU,EAAE,CAAA,CAC/D,GAAIU,CAAAA,GAAa,EAAA,CAAI,SAGrB,IAAMC,CAAAA,CAAYX,CAAAA,CAAU,SAAA,CAAU,OAAA,EAAQ,CAExCvD,GADUuD,CAAAA,CAAU,OAAA,CAAQ,OAAA,EAAQ,CACVW,CAAAA,EAAaJ,CAAAA,CAIvCK,CAAAA,CAAAA,CADiBD,CAAAA,CAAYL,CAAAA,EAAcC,CAAAA,CACfJ,CAAAA,CAI5BU,CAAAA,CAAWD,CAAAA,CAAaH,CAAAA,CAAcN,EAGtCnuB,CAAAA,CAAQ,IAAA,CAAK,GAAA,CAAIyqB,CAAAA,CAAe0D,CAAAA,CAAgBA,CAAc,CAAA,CAG9D1gD,CAAAA,CAAI2gD,CAAAA,CAAeM,CAAAA,CAAW9P,CAAAA,CAAY,EAAA,CAEhDyP,CAAAA,CAAS,IAAA,CAAK,CACZ,MAAA,CAAQL,CAAAA,CAAU,EAAA,CAClB,QAAA,CAAUA,CAAAA,CAAU,IAAA,CACpB,UAAAY,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,KAAA,CAAA7uB,CAAAA,CACA,CAAA,CAAAvyB,EACA,QAAA,CAAAihD,CAAAA,CACA,SAAA,CAAWD,CAAAA,CACX,KAAA,CAAOT,CAAAA,CAAU,KACnB,CAAC,CAAA,CAGDQ,CAAAA,CAAiBR,CAAAA,CAAU,EAAA,CAAIS,CAAAA,CAAavxC,CAAO,EACrD,CACF,CAAA,CAEA,OAAAsxC,CAAAA,CAAiB7R,CAAAA,CAAe8I,CAAS,CAAA,CAElC4I,CACT,CAAA,CAYA,SAAA,CAAW,CAACnZ,CAAAA,CAAeh3B,CAAAA,CAAgB4wC,CAAAA,CAAiBC,EAAU,CAAA,GAAc,CAClF,IAAMnwC,CAAAA,CAAO4rC,EAAAA,CAAW,YAAA,CAAatV,CAAAA,CAAOh3B,CAAM,CAAA,CAClD,GAAI,CAACU,CAAAA,EAAQ,CAACA,CAAAA,CAAK,WAAa,CAACA,CAAAA,CAAK,OAAA,CAAS,OAAOs2B,CAAAA,CAGtD,GAAI4Z,GAAalwC,CAAAA,CAAK,SAAA,EAAakwC,CAAAA,EAAalwC,CAAAA,CAAK,OAAA,CACnD,OAAA,OAAA,CAAQ,KAAK,qDAAqD,CAAA,CAC3Ds2B,CAAAA,CAIT,IAAM8Z,CAAAA,CAAkB,IAAI,IAAA,CAAKF,CAAS,CAAA,CAC1CE,CAAAA,CAAgB,OAAA,CAAQA,CAAAA,CAAgB,OAAA,EAAQ,CAAI,CAAC,CAAA,CAGrD,IAAMC,CAAAA,CAAqB,IAAI,IAAA,CAAKH,CAAS,CAAA,CAC7CG,CAAAA,CAAmB,OAAA,CAAQA,CAAAA,CAAmB,OAAA,EAAQ,CAAIF,CAAO,CAAA,CAGjE,IAAMz+B,CAAAA,CAAa,IAAI,IAAA,CAAK1R,CAAAA,CAAK,OAAO,CAAA,CACxC0R,CAAAA,CAAW,OAAA,CAAQA,CAAAA,CAAW,OAAA,EAAQ,CAAIy+B,CAAO,CAAA,CAGjD,IAAMnF,EAA0B,CAC9B,CACE,SAAA,CAAW,IAAI,IAAA,CAAKhrC,CAAAA,CAAK,SAAS,CAAA,CAClC,OAAA,CAASowC,CACX,CAAA,CACA,CACE,SAAA,CAAWC,EACX,OAAA,CAAS3+B,CACX,CACF,CAAA,CAGM29B,CAAAA,CAAiBiB,CAAAA,EACdA,CAAAA,CAAU,GAAA,CAAI7wC,CAAAA,EACfA,CAAAA,CAAE,EAAA,GAAOO,CAAAA,CAAK,EAAA,CACT,CACL,GAAGP,CAAAA,CACH,OAAA,CAASiS,CAAAA,CACT,QAAA,CAAAs5B,CACF,CAAA,CAEEvrC,CAAAA,CAAE,QAAA,CACG,CAAE,GAAGA,CAAAA,CAAG,QAAA,CAAU4vC,CAAAA,CAAc5vC,CAAAA,CAAE,QAAQ,CAAE,CAAA,CAE9CA,CACR,CAAA,CAGH,OAAO4vC,CAAAA,CAAc/Y,CAAK,CAC5B,CACF,EC5uCO,SAASia,EAAAA,CAAS,CACvB,KAAA,CAAAja,CAAAA,CACA,KAAA,CAAAx9B,CAAAA,CACA,SAAA,CAAWsjC,CAAAA,CACX,SAAA,CAAAzI,CAAAA,CACA,UAAAp4B,CAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,IAAA,CAAAq4B,CAAAA,CACA,MAAA,CAAAltB,CAAAA,CAAS,IAAA,CACT,SAAA,CAAAinB,CAAAA,CACA,mBAAA,CAAA4iB,CAAAA,CAAsB,QAAA,CACtB,WAAA,CAAAlU,EACA,cAAA,CAAAC,CAAAA,CACA,iBAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAiU,CAAAA,CACA,kBAAA,CAAA1M,CAAAA,CACA,kBAAA,CAAA2M,CACF,CAAA,CAAkB,CAIhB,IAAMjxC,CAAAA,CAAI+yB,IAAa,CAGjB,CAACme,CAAAA,CAAiBC,CAAkB,CAAA,CAAIn4C,QAAAA,CAAiC,EAAE,CAAA,CAG3E,CAACo4C,CAAAA,CAAeC,CAAgB,CAAA,CAAIr4C,QAAAA,CAAiC,IAAI,CAAA,CAKzEs4C,CAAAA,CAAsBzpC,WAAAA,CAAa2hC,CAAAA,EAAwC,CAC/E6H,CAAAA,CAAiB7H,CAAW,EAC9B,CAAA,CAAG,EAAE,CAAA,CAKC+H,CAAAA,CAAY,KAAK,IAAA,CAAA,CAAMx1C,CAAAA,CAAQ,OAAA,EAAQ,CAAID,CAAAA,CAAU,OAAA,EAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAG,CAAA,CACvFooC,CAAAA,CAAWhQ,CAAAA,GAAc,MAAQ,EAAA,CAAKA,CAAAA,GAAc,MAAA,CAAS,EAAA,CAAK,CAAA,CAClEsd,CAAAA,CAAgBD,CAAAA,CAAYrN,CAAAA,CAAW9P,CAAAA,CAGvCqd,CAAAA,CAAiBp1C,CAAAA,EAAuB,CAC5C,IAAMqC,CAAAA,CAAI,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAIrC,CAAAA,CAAK,WAAA,EAAY,CAAGA,CAAAA,CAAK,QAAA,EAAS,CAAGA,CAAAA,CAAK,OAAA,EAAS,CAAC,CAAA,CAC1Eq1C,EAAShzC,CAAAA,CAAE,SAAA,EAAU,EAAK,CAAA,CAChCA,CAAAA,CAAE,UAAA,CAAWA,EAAE,UAAA,EAAW,CAAI,CAAA,CAAIgzC,CAAM,CAAA,CACxC,IAAMC,EAAY,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAIjzC,CAAAA,CAAE,cAAA,EAAe,CAAG,CAAA,CAAG,CAAC,CAAC,CAAA,CAC7D,OAAO,IAAA,CAAK,IAAA,CAAA,CAAA,CAAOA,EAAE,OAAA,EAAQ,CAAIizC,CAAAA,CAAU,OAAA,EAAQ,EAAK,KAAA,CAAW,CAAA,EAAK,CAAC,CAC3E,CAAA,CAGMC,CAAAA,CAAav1C,CAAAA,EAAwB,CACzC,IAAMG,EAAMH,CAAAA,CAAK,MAAA,EAAO,CACxB,OAAOG,CAAAA,GAAQ,CAAA,EAAKA,CAAAA,GAAQ,CAC9B,CAAA,CAGMqpC,CAAAA,CAAch+B,WAAAA,CAAa+9B,CAAAA,EAAyB,CACxD,IAAM1pC,EAAO,IAAA,CAAK,KAAA,CAAM0pC,CAAAA,EAAU1B,CAAAA,CAAW9P,CAAAA,CAAK,CAAA,CAC5CtO,EAAU,IAAI,IAAA,CAAKhqB,CAAS,CAAA,CAClC,OAAAgqB,CAAAA,CAAQ,QAAQA,CAAAA,CAAQ,OAAA,EAAQ,CAAI5pB,CAAI,CAAA,CACjC4pB,CACT,CAAA,CAAG,CAAChqB,CAAAA,CAAWooC,CAAAA,CAAU9P,CAAI,CAAC,CAAA,CAGxByd,CAAAA,CAAsBhqC,YAAY,CAACxM,CAAAA,CAAqCkF,CAAAA,GAAe,CAE3F,GAAIA,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CACzB,OAGF,IAAM8lC,CAAAA,CAAahrC,CAAAA,CAAE,aAAA,CAAc,gBACnC,GAAI,CAACgrC,CAAAA,CAAY,OAEjB,IAAM7e,CAAAA,CAAQ6e,CAAAA,CAAW,cAAA,EAAe,CACxC7e,CAAAA,CAAM,CAAA,CAAInsB,CAAAA,CAAE,OAAA,CACZmsB,CAAAA,CAAM,EAAInsB,CAAAA,CAAE,OAAA,CACZ,IAAMirC,CAAAA,CAAW9e,CAAAA,CAAM,eAAA,CAAgB6e,CAAAA,CAAW,YAAA,EAAa,EAAG,OAAA,EAAS,CAAA,CAGrE9zB,CAAAA,CAAcszB,CAAAA,CAAYS,EAAS,CAAC,CAAA,CAGpCvqC,EAAAA,CAAU,IAAI,IAAA,CAAKwW,CAAW,CAAA,CACpCxW,EAAAA,CAAQ,OAAA,CAAQA,EAAAA,CAAQ,OAAA,EAAQ,CAAI,CAAC,CAAA,CAGrCi1C,IAAmBzwC,CAAAA,CAAMgS,CAAAA,CAAaxW,EAAO,EAC/C,CAAA,CAAG,CAAC8pC,CAAAA,CAAamL,CAAgB,CAAC,CAAA,CAG5BjZ,CAAAA,CAAYviB,OAAAA,CAAQ,IAAM,CAI9B,IAAMs8B,CAAAA,CAAwBjb,CAAAA,EACrBA,CAAAA,CAAM,GAAA,CAAIt2B,CAAAA,EAAQ,CAEvB,GAAIA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,CAAG,CAE7C,IAAM4lB,EAAAA,CAAkB2rB,CAAAA,CAAqBvxC,CAAAA,CAAK,QAAQ,CAAA,CAGpDwxC,EAAAA,CAAoB5rB,GAAgB,MAAA,CAAOE,EAAAA,EAAMA,EAAAA,CAAG,SAAA,EAAaA,EAAAA,CAAG,OAAO,EAEjF,GAAI0rB,EAAAA,CAAkB,MAAA,CAAS,CAAA,CAAG,CAEhC,IAAMC,EAAAA,CAAaD,EAAAA,CAAkB,GAAA,CAAI1rB,EAAAA,EAAMA,EAAAA,CAAG,SAAA,CAAW,OAAA,EAAS,EAChE4rB,EAAAA,CAAWF,EAAAA,CAAkB,GAAA,CAAI1rB,EAAAA,EAAMA,EAAAA,CAAG,OAAA,CAAS,OAAA,EAAS,CAAA,CAE5D6rB,EAAAA,CAAgB,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,GAAGF,EAAU,CAAC,CAAA,CAChDG,EAAAA,CAAY,IAAI,IAAA,CAAK,IAAA,CAAK,GAAA,CAAI,GAAGF,EAAQ,CAAC,CAAA,CAIhD,OAAO,CACL,GAAG1xC,CAAAA,CACH,QAAA,CAAU4lB,EAAAA,CACV,SAAA,CAAW+rB,EAAAA,CACX,OAAA,CAASC,EACX,CACF,CAEA,OAAO,CAAE,GAAG5xC,CAAAA,CAAM,SAAU4lB,EAAgB,CAC9C,CAEA,OAAO5lB,CACT,CAAC,CAAA,CAIGq3B,CAAAA,CAAe,CAACf,CAAAA,CAAelkC,CAAAA,CAAiB,EAAC,GAAc,CACnE,QAAW4N,EAAAA,IAAQs2B,CAAAA,CACjBlkC,CAAAA,CAAO,IAAA,CAAK4N,EAAI,CAAA,CAEZA,EAAAA,CAAK,QAAA,EAAYA,EAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,GAAMA,EAAAA,CAAK,UAAA,GAAe,QAAaA,EAAAA,CAAK,UAAA,CAAA,EACtFq3B,CAAAA,CAAar3B,EAAAA,CAAK,QAAA,CAAU5N,CAAM,CAAA,CAGtC,OAAOA,CACT,CAAA,CAGMy/C,CAAAA,CAA2BN,CAAAA,CAAqBjb,CAAK,CAAA,CAG3D,OAFkBe,CAAAA,CAAawa,CAAwB,CAGzD,CAAA,CAAG,CAACvb,CAAK,CAAC,CAAA,CAGJwb,EAAAA,CAAkBxqC,WAAAA,CAAatH,CAAAA,EAAe,CAElD,GAAI,CAACA,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,OAAA,CAC3B,OAAO,CAAE,CAAA,CAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CAG1B,IAAM+vC,CAAAA,CAAY/vC,EAAK,SAAA,CAAU,OAAA,EAAQ,CACnC+xC,CAAAA,CAAU/xC,CAAAA,CAAK,OAAA,CAAQ,OAAA,EAAQ,CAC/B0vC,CAAAA,CAAan0C,CAAAA,CAAU,OAAA,EAAQ,CAE/By2C,CAAAA,CAAAA,CAAiBjC,CAAAA,CAAYL,IAAe,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAA,CAC7DlgD,CAAAA,CAAAA,CAAYuiD,CAAAA,CAAUhC,CAAAA,GAAc,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAA,CAErDnhD,EAAAA,CAAIojD,CAAAA,CAAgBrO,CAAAA,CAAW9P,EAE/Boe,EAAAA,CAAW,IAAA,CAAK,GAAA,CAAItO,CAAAA,CAAW9P,CAAAA,CAAM,EAAE,CAAA,CACvCzS,EAAAA,CAAQ,IAAA,CAAK,GAAA,CAAI5xB,CAAAA,CAAWm0C,CAAAA,CAAW9P,CAAAA,CAAMoe,EAAQ,EAE3D,OAAO,CAAE,CAAA,CAAArjD,EAAAA,CAAG,KAAA,CAAAwyB,EAAM,CACpB,CAAA,CAAG,CAAC7lB,CAAAA,CAAWooC,CAAAA,CAAU9P,CAAI,CAAC,CAAA,CAIxBqe,GAAgBj9B,OAAAA,CAAQ,IACrBuiB,CAAAA,CACJ,MAAA,CAAOx3B,CAAAA,EAAQA,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAO,CAAA,CAC7C,GAAA,CAAKA,CAAAA,EAAS,CACb,GAAM,CAAE,CAAA,CAAApR,CAAAA,CAAG,KAAA,CAAAwyB,CAAM,CAAA,CAAI0wB,EAAAA,CAAgB9xC,CAAI,CAAA,CAEnCnR,CAAAA,CADc2oC,CAAAA,CAAU,SAAA,CAAU/3B,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOO,EAAK,EAAE,CAAA,CACrCo8B,CAAAA,CAAa,EAAA,CACrC,OAAO,CACL,GAAIp8B,CAAAA,CAAK,EAAA,CACT,CAAA,CAAApR,CAAAA,CACA,CAAA,CAAAC,CAAAA,CACA,MAAAuyB,CAAAA,CACA,MAAA,CAAQ,EACV,CACF,CAAC,CAAA,CACF,CAACoW,CAAAA,CAAWsa,EAAe,CAAC,CAAA,CAGzBK,EAAAA,CAAqB7qC,WAAAA,CAAY,CAAChI,EAAgBunC,CAAAA,CAAmB/lC,CAAAA,GAAwB,CACjG,GAAI,CAACA,CAAAA,EAAc+lC,CAAAA,GAAc,CAAA,CAAG,CAClC+J,CAAAA,CAAmB,EAAE,CAAA,CACrB,MACF,CAGA,IAAMnB,CAAAA,CAAW7D,EAAAA,CAAW,uBAAA,CAC1BtV,CAAAA,CACAh3B,CAAAA,CACAunC,CAAAA,CACArP,CAAAA,CACAj8B,CAAAA,CACAooC,CAAAA,CAAW9P,CAAAA,CACXuI,CAAAA,CACA,EACF,CAAA,CAEAwU,EAAmBnB,CAAQ,EAC7B,CAAA,CAAG,CAACnZ,CAAAA,CAAOkB,CAAAA,CAAWj8B,EAAWooC,CAAAA,CAAU9P,CAAAA,CAAMuI,CAAAA,CAAY,EAAa,CAAC,CAAA,CAIrEvoC,GAAUohB,OAAAA,CAAQ,IAAM,CAC5B,IAAM7iB,CAAAA,CAA0D,EAAC,CAC3D6E,CAAAA,CAAU,IAAI,IAAA,CAAKsE,CAAS,CAAA,CAGlC,KAAOtE,CAAAA,EAAWuE,CAAAA,EAAS,CAGzB,IAAM5M,CAAAA,CAAAA,CADHqI,CAAAA,CAAQ,OAAA,EAAQ,CAAIsE,CAAAA,CAAU,OAAA,EAAQ,EAAM,KAAA,CACrBooC,CAAAA,CAAW9P,CAAAA,CAErC,GAAIF,CAAAA,GAAc,KAAA,CAChBvhC,CAAAA,CAAO,IAAA,CAAK,CACV,IAAA,CAAM,IAAI,IAAA,CAAK6E,CAAO,CAAA,CACtB,KAAA,CAAOA,CAAAA,CAAQ,kBAAA,CAAmB0P,CAAAA,CAAQ,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAA,CAC5E,EAAA/X,CACF,CAAC,CAAA,CACDqI,CAAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAQ,SAAQ,CAAI,CAAC,CAAA,CAAA,KAAA,GAC5B08B,CAAAA,GAAc,MAAA,CAAQ,CAC/B,IAAMye,CAAAA,CAAUlB,CAAAA,CAAcj6C,CAAO,CAAA,CACrC7E,CAAAA,CAAO,IAAA,CAAK,CACV,KAAM,IAAI,IAAA,CAAK6E,CAAO,CAAA,CACtB,KAAA,CAAO,CAAA,EAAGwI,CAAAA,CAAE,MAAA,CAAO,IAAI,CAAA,CAAA,EAAI2yC,CAAO,CAAA,CAAA,CAClC,CAAA,CAAAxjD,CACF,CAAC,CAAA,CACDqI,CAAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAQ,OAAA,EAAQ,CAAI,CAAC,EACvC,CAAA,KACE7E,CAAAA,CAAO,IAAA,CAAK,CACV,IAAA,CAAM,IAAI,KAAK6E,CAAO,CAAA,CACtB,KAAA,CAAOA,CAAAA,CAAQ,kBAAA,CAAmB0P,CAAAA,CAAQ,CAAE,KAAA,CAAO,OAAA,CAAS,IAAA,CAAM,SAAU,CAAC,CAAA,CAC7E,CAAA,CAAA/X,CACF,CAAC,CAAA,CACDqI,CAAAA,CAAQ,QAAA,CAASA,CAAAA,CAAQ,QAAA,EAAS,CAAI,CAAC,CAAA,CAG3C,CAEA,OAAO7E,CACT,CAAA,CAAG,CAACmJ,CAAAA,CAAWC,CAAAA,CAASm4B,CAAAA,CAAWgQ,CAAAA,CAAU9P,CAAAA,CAAMltB,CAAAA,CAAQlH,CAAAA,CAAE,MAAA,CAAO,IAAI,CAAC,CAAA,CAGnE4yC,EAAAA,CAASp9B,OAAAA,CAAQ,IAAA,CACP,IAAI,IAAA,EAAK,CACM,OAAA,EAAQ,CAAI1Z,CAAAA,CAAU,OAAA,EAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAA,CAC3DooC,CAAAA,CAAW9P,CAAAA,CACjC,CAACt4B,EAAWooC,CAAAA,CAAU9P,CAAI,CAAC,CAAA,CAGxB2L,EAAAA,CAAgB,IAAA,CAAK,IAAIhI,CAAAA,CAAU,MAAA,CAAS4E,CAAAA,CAAY,GAAmB,CAAA,CAEjF,OACE/iC,KAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,kBAAA,CAAgB,IAAA,CAChB,KAAA,CAAO,CAAE,eAAA,CAAiBP,CAAAA,CAAM,SAAU,CAAA,CAG1C,QAAA,CAAA,CAAAX,GAAAA,CAAC,KAAA,CAAA,CACC,MAAO,CACL,QAAA,CAAU,QAAA,CACV,GAAA,CAAK,CAAA,CACL,MAAA,CAAQ,EAAA,CACR,eAAA,CAAiBW,CAAAA,CAAM,MAAA,CACvB,UAAA,CAAY,CAAA,CACZ,MAAA,CAAQ,MAAA,CACR,aAAc,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACvC,SAAA,CAAW,YACb,CAAA,CAEA,QAAA,CAAAO,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAO,IAAA,CAAK,GAAA,CAAI43C,CAAAA,CAAe,GAAI,CAAA,CACnC,MAAA,CAAQ,EAAA,CACR,KAAA,CAAO,CAAE,OAAA,CAAS,OAAQ,CAAA,CAG1B,QAAA,CAAA,CAAA94C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG,CAAA,CACH,CAAA,CAAG,EACH,KAAA,CAAO,IAAA,CAAK,GAAA,CAAI84C,CAAAA,CAAe,GAAI,CAAA,CACnC,MAAA,CAAQ,EAAA,CACR,IAAA,CAAMn4C,CAAAA,CAAM,MAAA,CACd,CAAA,CAGCjF,EAAAA,CAAQ,GAAA,CAAI,CAACgD,CAAAA,CAAQC,CAAAA,GACpBuC,IAAAA,CAAC,GAAA,CAAA,CAEE,QAAA,CAAA,CAAAvC,CAAAA,CAAQ,CAAA,EACPqB,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAItB,CAAAA,CAAO,CAAA,CACX,EAAA,CAAI,CAAA,CACJ,GAAIA,CAAAA,CAAO,CAAA,CACX,EAAA,CAAI,EAAA,CACJ,MAAA,CAAQiC,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACX,CAAA,CAIFX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAGtB,CAAAA,CAAO,CAAA,CAAI,CAAA,CACd,CAAA,CAAG,EAAA,CAAgB,CAAA,CACnB,KAAMiC,CAAAA,CAAM,YAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,2CAAA,CACX,WAAW,KAAA,CACX,gBAAA,CAAiB,QAAA,CAEhB,QAAA,CAAAjC,CAAAA,CAAO,KAAA,CACV,CAAA,CAAA,CAAA,CAzBM,CAAA,OAAA,EAAUC,CAAK,CAAA,CA0BvB,CACD,CAAA,CAGAu7C,EAAAA,EAAU,CAAA,EAAKA,IAAUpB,CAAAA,EACxB94C,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAIk6C,EAAAA,CAAQ,EAAA,CAAI,EAAA,CAAoB,CAAA,CAAG,CAAA,CAAG,IAAA,CAAMv5C,CAAAA,CAAM,KAAA,CAAO,OAAA,CAAS,CAAA,CAAG,GAErF,CAAA,CACF,CAAA,CAIAO,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAO,IAAA,CAAK,GAAA,CAAI43C,CAAAA,CAAe,GAAI,CAAA,CACnC,MAAA,CAAQzR,EAAAA,CACR,KAAA,CAAO,CAAE,QAAS,OAAA,CAAS,UAAA,CAAY,CAAA,CAAG,QAAA,CAAU,SAAU,CAAA,CAE9D,QAAA,CAAA,CAAAnmC,IAAAA,CAAC,MAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,QAAA,CACT,SAAAA,GAAAA,CAAC,cAAA,CAAA,CAAa,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,YAAA,CAAa,GAAA,CAAI,YAAA,CAAa,KAAA,CAAM,CAAA,CAClE,CAAA,CAGAA,GAAAA,CAAC,SAAA,CAAA,CAAQ,GAAG,kBAAA,CAAmB,KAAA,CAAM,GAAA,CAAI,MAAA,CAAO,GAAA,CAAI,YAAA,CAAa,gBAAA,CAAiB,gBAAA,CAAiB,YAAA,CACjG,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,GAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,MAAA,CAAQW,CAAAA,CAAM,MAAA,CAAQ,WAAA,CAAY,GAAA,CAAI,CAAA,CAC1E,CAAA,CAAA,CACF,CAAA,CAGAX,GAAAA,CAAC,QACC,CAAA,CAAG,CAAA,CACH,CAAA,CAAG,CAAA,CACH,KAAA,CAAO,IAAA,CAAK,IAAI84C,CAAAA,CAAe,GAAI,CAAA,CACnC,MAAA,CAAQzR,EAAAA,CACR,IAAA,CAAM1mC,EAAM,SAAA,CACd,CAAA,CAGCjF,EAAAA,CAAQ,GAAA,CAAI,CAACgD,CAAAA,CAAQC,CAAAA,GAAU,CAC9B,IAAMw7C,CAAAA,CAAQz+C,EAAAA,CAAQiD,CAAAA,CAAQ,CAAC,CAAA,EAAG,GAAKm6C,CAAAA,CACjCsB,CAAAA,CAAelB,CAAAA,CAAUx6C,CAAAA,CAAO,IAAI,CAAA,CAE1C,OACEwC,IAAAA,CAAC,GAAA,CAAA,CAEE,QAAA,CAAA,CAAAk5C,CAAAA,EACCp6C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGtB,EAAO,CAAA,CACV,CAAA,CAAG,CAAA,CACH,KAAA,CAAOy7C,CAAAA,CAAQz7C,CAAAA,CAAO,CAAA,CACtB,MAAA,CAAQ2gC,CAAAA,CAAU,MAAA,CAAS4E,CAAAA,CAC3B,IAAA,CAAMtjC,CAAAA,CAAM,SAAA,CACZ,QAAS,CAAA,CACX,CAAA,CAIDhC,CAAAA,CAAQ,CAAA,EACPqB,GAAAA,CAAC,MAAA,CAAA,CACC,GAAItB,CAAAA,CAAO,CAAA,CACX,EAAA,CAAI,CAAA,CACJ,EAAA,CAAIA,CAAAA,CAAO,EACX,EAAA,CAAI2gC,CAAAA,CAAU,MAAA,CAAS4E,CAAAA,CACvB,MAAA,CAAQtjC,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACX,CAAA,CAAA,CAAA,CAvBIhC,CAyBR,CAEJ,CAAC,CAAA,CAIA0gC,CAAAA,CAAU,GAAA,CAAI,CAACx3B,CAAAA,CAAMlJ,CAAAA,GAAU,CAC9B,IAAM07C,CAAAA,CAAaxyC,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,OAAA,CAE1C,OACE3G,KAAC,GAAA,CAAA,CAEC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAEC,CAAA,CAAG,CAAA,CACH,CAAA,CAAGrB,CAAAA,CAAQslC,CAAAA,CACX,KAAA,CAAO6U,CAAAA,CACP,MAAA,CAAQ7U,CAAAA,CACR,IAAA,CAAMtlC,EAAQ,CAAA,GAAM,CAAA,CAAIgC,CAAAA,CAAM,SAAA,CAAYA,CAAAA,CAAM,MAAA,CAChD,QAAS,CAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CAAA,CAP1B,OAAOkH,CAAAA,CAAK,EAAE,CAAA,CAQrB,CAAA,CAGC,CAACwyC,CAAAA,EACAn5C,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,MAAA,CAAA,CAEC,CAAA,CAAG,CAAA,CACH,EAAGrB,CAAAA,CAAQslC,CAAAA,CACX,KAAA,CAAO6U,CAAAA,CACP,MAAA,CAAQ7U,CAAAA,CACR,IAAA,CAAK,aAAA,CACL,KAAA,CAAO,CACL,MAAA,CAAQ,SAAA,CACR,aAAA,CAAe,KACjB,EACA,OAAA,CAAUthC,CAAAA,EAAMw2C,CAAAA,CAAoBx2C,CAAAA,CAAGkF,CAAI,CAAA,CAC3C,YAAA,CAAelF,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,YAAA,CAAa,MAAA,CAAQhC,CAAAA,CAAM,WAAW,CAAA,CACtDgC,CAAAA,CAAE,aAAA,CAAc,YAAA,CAAa,SAAA,CAAW,KAAK,EAC/C,CAAA,CACA,YAAA,CAAeA,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,YAAA,CAAa,OAAQ,aAAa,CAAA,CAClDA,CAAAA,CAAE,aAAA,CAAc,YAAA,CAAa,SAAA,CAAW,GAAG,EAC7C,CAAA,CAAA,CAlBK,CAAA,UAAA,EAAakF,CAAAA,CAAK,EAAE,CAAA,CAmB3B,CAAA,CAEA7H,IAAC,MAAA,CAAA,CAEC,CAAA,CAAGk6C,EAAAA,CAAS,CAAA,CAAIA,EAAAA,CAAS,GAAA,CACzB,CAAA,CAAGv7C,CAAAA,CAAQslC,CAAAA,CAAaA,CAAAA,CAAa,CAAA,CACrC,IAAA,CAAMtjC,CAAAA,CAAM,YAAA,CACZ,SAAS,IAAA,CACT,UAAA,CAAW,mBAAA,CACX,SAAA,CAAU,QAAA,CACV,gBAAA,CAAiB,QAAA,CACjB,OAAA,CAAS,EAAA,CACT,KAAA,CAAO,CAAE,aAAA,CAAe,MAAA,CAAQ,UAAA,CAAY,MAAO,CAAA,CAElD,QAAA,CAAA2G,CAAAA,CAAE,MAAA,CAAO,eAAA,CAAA,CAXL,CAAA,YAAA,EAAeO,EAAK,EAAE,CAAA,CAY7B,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CApDI,CAAA,UAAA,EAAaA,CAAAA,CAAK,EAAE,CAAA,CAsD5B,CAEJ,CAAC,CAAA,CAKAw3B,CAAAA,CAAU,GAAA,CAAI,CAACx3B,CAAAA,CAAMlJ,CAAAA,GAAU,CAE9B,GAAI,CAACkJ,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,OAAA,CAC3B,OAAO,IAAA,CAGT,GAAM,CAAE,CAAA,CAAApR,CAAAA,CAAG,KAAA,CAAAwyB,CAAM,CAAA,CAAI0wB,EAAAA,CAAgB9xC,CAAI,CAAA,CACnCnR,EAAIiI,CAAAA,CAAQslC,CAAAA,CAAa,EAAA,CAGzBqW,CAAAA,CAAczyC,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAS,MAAA,CAAS,CAAA,EAAK,CAACA,CAAAA,CAAK,WAAA,CAEvE,OAAIA,EAAK,WAAA,CAEL7H,GAAAA,CAACwzC,EAAAA,CAAA,CAEC,IAAA,CAAM3rC,CAAAA,CACN,EAAGpR,CAAAA,CAAIwyB,CAAAA,CAAQ,CAAA,CACf,CAAA,CAAGvyB,CAAAA,CAAI,EAAA,CACP,MAAOiK,CAAAA,CACP,OAAA,CAASwjC,CAAAA,CAAAA,CALJt8B,CAAAA,CAAK,EAMZ,CAAA,CAIAyyC,CAAAA,CAKAp5C,IAAAA,CAAC,GAAA,CAAA,CAEC,OAAA,CAAS,IAAMijC,CAAAA,GAAct8B,CAAI,CAAA,CACjC,cAAgBlF,EAAAA,EAAM,CACpBA,EAAAA,CAAE,cAAA,EAAe,CACjBA,EAAAA,CAAE,eAAA,EAAgB,CAClB0hC,CAAAA,GAAoBx8B,CAAAA,CAAMlF,EAAgC,EAC5D,CAAA,CACA,KAAA,CAAO,CAAE,MAAA,CAAQ,SAAU,CAAA,CAG3B,QAAA,CAAA,CAAA3C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CACH,CAAA,CAAGC,CAAAA,CACH,KAAA,CAAOuyB,CAAAA,CACP,MAAA,CAAQ,EAAA,CACR,KAAMtoB,CAAAA,CAAM,OAAA,CACZ,OAAA,CAAS,GAAA,CACT,EAAA,CAAI,CAAA,CACN,EAEAX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAIvJ,CAAAA,CACJ,EAAA,CAAIC,CAAAA,CACJ,GAAID,CAAAA,CAAIwyB,CAAAA,CACR,EAAA,CAAIvyB,CAAAA,CACJ,MAAA,CAAQiK,CAAAA,CAAM,OAAA,CACd,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACT,aAAA,CAAc,OAAA,CAChB,CAAA,CAEAX,IAAC,MAAA,CAAA,CACC,EAAA,CAAIvJ,CAAAA,CACJ,EAAA,CAAIC,CAAAA,CACJ,EAAA,CAAID,CAAAA,CACJ,EAAA,CAAIC,CAAAA,CAAI,EAAA,CACR,MAAA,CAAQiK,CAAAA,CAAM,OAAA,CACd,WAAA,CAAa,EACb,OAAA,CAAS,EAAA,CACT,aAAA,CAAc,OAAA,CAChB,CAAA,CAEAX,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAIvJ,CAAAA,CAAIwyB,CAAAA,CACR,EAAA,CAAIvyB,CAAAA,CACJ,EAAA,CAAID,CAAAA,CAAIwyB,EACR,EAAA,CAAIvyB,CAAAA,CAAI,EAAA,CACR,MAAA,CAAQiK,CAAAA,CAAM,OAAA,CACd,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACT,aAAA,CAAc,OAAA,CAChB,CAAA,CAEAX,GAAAA,CAAC,QACC,EAAA,CAAIvJ,CAAAA,CACJ,EAAA,CAAIC,CAAAA,CAAI,EAAA,CACR,EAAA,CAAID,CAAAA,CAAIwyB,CAAAA,CACR,EAAA,CAAIvyB,CAAAA,CAAI,EAAA,CACR,MAAA,CAAQiK,CAAAA,CAAM,OAAA,CACd,YAAa,CAAA,CACb,OAAA,CAAS,EAAA,CACT,aAAA,CAAc,OAAA,CAChB,CAAA,CAECsoB,CAAAA,CAAQ,EAAA,EACPjpB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGvJ,CAAAA,CAAI,EAAA,CACP,CAAA,CAAGC,EAAI,EAAA,CACP,gBAAA,CAAiB,QAAA,CACjB,IAAA,CAAK,SAAA,CACL,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CACX,KAAA,CAAO,CAAE,aAAA,CAAe,OAAQ,UAAA,CAAY,MAAO,CAAA,CAElD,QAAA,CAAAmR,CAAAA,CAAK,IAAA,CACR,IA5EGA,CAAAA,CAAK,EA8EZ,CAAA,CAKF7H,GAAAA,CAACurC,EAAAA,CAAA,CAEC,KAAM1jC,CAAAA,CACN,CAAA,CAAGpR,CAAAA,CACH,CAAA,CAAGC,CAAAA,CACH,KAAA,CAAOuyB,CAAAA,CACP,KAAA,CAAOtoB,CAAAA,CACP,QAAA,CAAU6qC,CAAAA,CAAW9P,CAAAA,CACrB,SAAA,CAAWt4B,CAAAA,CACX,UAAWqyB,CAAAA,CACX,OAAA,CAAS0O,CAAAA,CACT,aAAA,CAAeC,CAAAA,CACf,aAAA,CAAeC,CAAAA,CACf,YAAA,CAAciU,CAAAA,CACd,kBAAA,CAAoB1M,CAAAA,CACpB,gBAAA,CAAkBmO,EAAAA,CAClB,UAAA,CAAYC,GACZ,aAAA,CAAepB,CAAAA,CAAAA,CAhBV/wC,CAAAA,CAAK,EAiBZ,CAEJ,CAAC,CAAA,CAIAw3B,CAAAA,CAAU,GAAA,CAAI,CAACx3B,CAAAA,CAAM0yC,CAAAA,GAChB,CAAC1yC,CAAAA,CAAK,cAAgBA,CAAAA,CAAK,YAAA,CAAa,MAAA,GAAW,CAAA,EACnD,CAACA,CAAAA,CAAK,WAAa,CAACA,CAAAA,CAAK,OAAA,CAAgB,IAAA,CAEtCA,CAAAA,CAAK,YAAA,CAAa,IAAKtB,CAAAA,EAAU,CACtC,IAAM2T,CAAAA,CAAUmlB,CAAAA,CAAU,IAAA,CAAM/3B,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAOf,CAAK,CAAA,CAEpD,GADI,CAAC2T,CAAAA,EACD,CAACA,CAAAA,CAAQ,SAAA,EAAa,CAACA,CAAAA,CAAQ,OAAA,CAAS,OAAO,IAAA,CAEnD,IAAMsgC,CAAAA,CAAYnb,CAAAA,CAAU,SAAA,CAAW/3B,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAOf,CAAK,CAAA,CACrDk0C,CAAAA,CAAUd,EAAAA,CAAgBz/B,CAAO,CAAA,CACjCwgC,EAAAA,CAAQf,EAAAA,CAAgB9xC,CAAI,CAAA,CAI5B8yC,EAAAA,CAAQF,CAAAA,CAAQ,CAAA,CAAIA,CAAAA,CAAQ,KAAA,CAC5BG,GAAQJ,CAAAA,CAAYvW,CAAAA,CAAa,EAAA,CAGjC4W,EAAAA,CAASH,EAAAA,CAAM,CAAA,CACfI,GAASP,CAAAA,CAAUtW,CAAAA,CAAa,EAAA,CAEtC,OACEjkC,GAAAA,CAACixC,EAAAA,CAAA,CAEC,EAAA,CAAI0J,EAAAA,CACJ,EAAA,CAAIC,EAAAA,CACJ,EAAA,CAAIC,EAAAA,CACJ,EAAA,CAAIC,EAAAA,CACJ,KAAA,CAAOn6C,CAAAA,CACP,SAAA,CAAW03C,CAAAA,CACX,QAAA,CAAU,IAAME,IAAqB1wC,CAAAA,CAAK,EAAA,CAAItB,CAAK,CAAA,CAAA,CAP9C,CAAA,IAAA,EAAOA,CAAK,CAAA,CAAA,EAAIsB,CAAAA,CAAK,EAAE,CAAA,CAQ9B,CAEJ,CAAC,CACF,CAAA,CAKA2wC,EAAgB,GAAA,CAAKuC,CAAAA,EACpB75C,IAAAA,CAAC,GAAA,CAAA,CAEC,KAAA,CAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CAG/B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG+6C,CAAAA,CAAQ,SACX,CAAA,CAAGA,CAAAA,CAAQ,CAAA,CAAI,EAAA,CACf,KAAA,CAAOA,CAAAA,CAAQ,KAAA,CACf,MAAA,CAAQ,EAAA,CACR,EAAA,CAAI,CAAA,CACJ,IAAA,CAAMA,CAAAA,CAAQ,KAAA,EAASp6C,EAAM,MAAA,CAC7B,OAAA,CAAS,EAAA,CACT,MAAA,CAAQA,CAAAA,CAAM,MAAA,CACd,WAAA,CAAa,CAAA,CACb,eAAA,CAAgB,KAAA,CAClB,CAAA,CAEC,IAAA,CAAK,GAAA,CAAIo6C,CAAAA,CAAQ,SAAS,CAAA,CAAI,CAAA,EAC7B/6C,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAG+6C,CAAAA,CAAQ,QAAA,CAAWA,CAAAA,CAAQ,KAAA,CAAQ,CAAA,CACtC,CAAA,CAAGA,CAAAA,CAAQ,CAAA,CAAI,EAAA,CAAgB,GAC/B,UAAA,CAAW,QAAA,CACX,gBAAA,CAAiB,QAAA,CACjB,IAAA,CAAMp6C,CAAAA,CAAM,MAAA,CACZ,QAAA,CAAS,IAAA,CACT,UAAA,CAAW,KAAA,CACX,UAAA,CAAW,mBAAA,CACX,KAAA,CAAO,CAAE,UAAA,CAAY,MAAO,CAAA,CAE3B,QAAA,CAAAo6C,CAAAA,CAAQ,SAAA,CAAY,EAAI,CAAA,CAAA,EAAIA,CAAAA,CAAQ,SAAS,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,CAAAA,CAAQ,SAAS,CAAA,CAAA,CAAA,CAC1E,CAAA,CAAA,CAAA,CA9BG,CAAA,gBAAA,EAAmBA,CAAAA,CAAQ,MAAM,CAAA,CAgCxC,CACD,CAAA,CAKAb,EAAAA,EAAU,CAAA,EAAKA,EAAAA,EAAUpB,CAAAA,EACxB94C,GAAAA,CAAC,MAAA,CAAA,CACC,GAAIk6C,EAAAA,CACJ,EAAA,CAAI,CAAA,CACJ,EAAA,CAAIA,EAAAA,CACJ,EAAA,CAAI7S,EAAAA,CACJ,MAAA,CAAQ1mC,CAAAA,CAAM,KAAA,CACd,WAAA,CAAa,CAAA,CACb,OAAA,CAAS,CAAA,CACT,MAAO,CAAE,aAAA,CAAe,MAAO,CAAA,CACjC,CAAA,CAID+3C,CAAAA,EACC14C,GAAAA,CAAC6wC,EAAAA,CAAA,CAAY,WAAA,CAAa6H,CAAAA,CAAe,KAAA,CAAO/3C,CAAAA,CAAO,CAAA,CAAA,CAE3D,GACF,CAEJ,CCpqBA,IAAMq6C,EAAAA,CAAsB,CAC1B,iCAAA,CACA,8BAAA,CACA,kCACA,iCAAA,CACA,2BAAA,CACA,qCAAA,CACA,oBAAA,CACA,4BACF,CAAA,CAGMC,EAAAA,CAAS,IACb/5C,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,QAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,uHAAA,CAAwH,CAAA,CAChIA,GAAAA,CAAC,UAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAE,GAAA,CAAI,GAChC,CAAA,CAIIk7C,EAAAA,CAAW,IACfl7C,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,KAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,8CAA8C,CAAA,CACxD,CAAA,CAIIm7C,EAAAA,CAAY,IAChBn7C,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,OAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,sBAAA,CAAuB,CAAA,CACjC,CAAA,CAIIo7C,EAAAA,CAAe,IACnBp7C,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAE,UAAA,CAAW,CAAA,CACrB,CAAA,CAIIq7C,EAAAA,CAAc,IAClBr7C,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACZ,QAAA,CAAA,CAAC,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CAAE,IAAK/H,CAAAA,EACd+H,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CAEC,SAAA,CAAU,iCAAA,CACV,OAAA,CAAS,CACP,KAAA,CAAO,CAAC,CAAA,CAAG,GAAA,CAAK,CAAC,EACjB,OAAA,CAAS,CAAC,EAAA,CAAK,CAAA,CAAG,EAAG,CACvB,CAAA,CACA,UAAA,CAAY,CACV,QAAA,CAAU,EAAA,CACV,MAAA,CAAQ,CAAA,CAAA,CAAA,CACR,KAAA,CAAOjY,EAAI,GACb,CAAA,CAAA,CAVKA,CAWP,CACD,CAAA,CACH,CAAA,CAGK,SAASqjD,EAAAA,CAAiB,CAC/B,KAAA,CAAAnd,CAAAA,CACA,KAAA,CAAAx9B,CAAAA,CACA,OAAAsC,CAAAA,CAEA,aAAA,CAAes4C,CAAAA,CACf,YAAA,CAAAloC,CAAAA,CACA,YAAA,CAAAirB,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAqN,CAAAA,CACA,kBAAA,CAAA2M,CACF,CAAA,CAA0B,CACxB,GAAM,CAACh3C,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACk7C,CAAAA,CAAaC,CAAc,CAAA,CAAIn7C,QAAAA,CAAS,KAAK,EAC9C,CAACo7C,CAAAA,CAAUC,CAAW,CAAA,CAAIr7C,QAAAA,CAAsB,EAAE,CAAA,CAClD,CAACs7C,CAAAA,CAAYC,CAAa,CAAA,CAAIv7C,QAAAA,CAAS,EAAE,EACzC,CAACob,CAAAA,CAAWogC,CAAY,CAAA,CAAIx7C,QAAAA,CAAS,KAAK,EAC1C,CAACy7C,CAAAA,CAAiBC,CAAkB,CAAA,CAAI17C,QAAAA,CAAS,IAAI,EAErDqK,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,CAAA,CACxCq6C,CAAAA,CAAiBr6C,MAAAA,CAAuB,IAAI,CAAA,CAC5Cs6C,CAAAA,CAAmBt6C,MAAAA,CAAuB,IAAI,CAAA,CAE9C,CACJ,OAAA,CAAAzG,EAAU,IAAA,CACV,WAAA,CAAAkT,CAAAA,CAAc,4DAAA,CACd,QAAA,CAAA8a,CAAAA,CAAW,cAAA,CACX,SAAA,CAAAgzB,CAAAA,CACA,WAAA,CAAAh0B,CAAAA,CAAc6yB,EAAAA,CACd,UAAA,CAAAoB,CAAAA,CAAa,GACb,cAAA,CAAAC,CACF,CAAA,CAAIp5C,CAAAA,CAGE21B,EAAAA,CAAayjB,CAAAA,EAAgB,UAAA,EAAc,kBAAA,CAC3CC,EAAAA,CAAqBD,CAAAA,EAAgB,WAAA,EAAe,CAAA,CAG1D57C,SAAAA,CAAU,IAAM,CACd,GAAI47C,CAAAA,EAAgB,OAAA,CAClB,GAAI,CACF,IAAME,EAAQ,YAAA,CAAa,OAAA,CAAQ3jB,EAAU,CAAA,CAC7C,GAAI2jB,CAAAA,CAAO,CAGT,IAAMC,CAAAA,CAFS,IAAA,CAAK,KAAA,CAAMD,CAAK,CAAA,CAEE,GAAA,CAAIE,CAAAA,GAAQ,CAC3C,GAAGA,CAAAA,CACH,SAAA,CAAW,IAAI,IAAA,CAAKA,EAAI,SAAS,CACnC,CAAA,CAAE,CAAA,CACFd,CAAAA,CAAYa,CAAAA,CAAkB,KAAA,CAAM,CAACF,EAAkB,CAAC,EAC1D,CACF,CAAA,MAAS7jD,CAAAA,CAAO,CACd,OAAA,CAAQ,IAAA,CAAK,sDAAA,CAAwDA,CAAK,EAC5E,CAEJ,CAAA,CAAG,CAAC4jD,CAAAA,EAAgB,OAAA,CAASzjB,EAAAA,CAAY0jB,EAAkB,CAAC,CAAA,CAG5D77C,UAAU,IAAM,CACd,GAAI47C,CAAAA,EAAgB,OAAA,EAAWX,CAAAA,CAAS,MAAA,CAAS,CAAA,CAC/C,GAAI,CAEF,IAAMgB,CAAAA,CAAoBhB,CAAAA,CACvB,MAAA,CAAO9S,GAAK,CAACA,CAAAA,CAAE,SAAS,CAAA,CACxB,KAAA,CAAM,CAAC0T,EAAkB,CAAA,CAC5B,YAAA,CAAa,OAAA,CAAQ1jB,EAAAA,CAAY,IAAA,CAAK,SAAA,CAAU8jB,CAAiB,CAAC,EACpE,CAAA,MAASjkD,CAAAA,CAAO,CACd,OAAA,CAAQ,IAAA,CAAK,+CAAA,CAAiDA,CAAK,EACrE,CAEJ,CAAA,CAAG,CAACijD,CAAAA,CAAUW,CAAAA,EAAgB,QAASzjB,EAAAA,CAAY0jB,EAAkB,CAAC,CAAA,CAGtE77C,SAAAA,CAAU,IAAM,CACVw7C,CAAAA,CAAe,OAAA,EACjBA,CAAAA,CAAe,OAAA,CAAQ,cAAA,CAAe,CAAE,QAAA,CAAU,QAAS,CAAC,EAEhE,CAAA,CAAG,CAACP,CAAQ,CAAC,EAGbj7C,SAAAA,CAAU,IAAM,CACVc,CAAAA,EAAU,CAACi6C,CAAAA,EAAe7wC,EAAS,OAAA,EACrC,UAAA,CAAW,IAAMA,CAAAA,CAAS,OAAA,EAAS,KAAA,EAAM,CAAG,GAAG,EAEnD,CAAA,CAAG,CAACpJ,CAAAA,CAAQi6C,CAAW,CAAC,EAGxB,IAAMmB,EAAAA,CAAqBxtC,WAAAA,CAAalV,CAAAA,EAA4B,CAClE,GAAKA,CAAAA,CAAO,OAAA,CAEZ,OAAQA,CAAAA,CAAO,IAAA,EACb,KAAK,WAAA,CACL,KAAK,aAAA,CACL,KAAK,aAAA,CACL,KAAK,cAAA,CACL,KAAK,YAAA,CACL,KAAK,aAAA,CACCA,CAAAA,CAAO,MAAA,EAAUA,CAAAA,CAAO,OAAA,EAC1BoZ,CAAAA,GAAepZ,EAAO,MAAA,CAAQA,CAAAA,CAAO,OAAO,CAAA,CAE9C,MAEF,KAAK,cACCA,CAAAA,CAAO,OAAA,EACTqkC,CAAAA,GAAerkC,CAAAA,CAAO,OAAO,CAAA,CAE/B,MAEF,KAAK,aAAA,CACCA,CAAAA,CAAO,MAAA,EACTskC,CAAAA,GAAetkC,CAAAA,CAAO,MAAM,CAAA,CAE9B,MAEF,KAAK,YAAA,CACCA,CAAAA,CAAO,cAAA,EAAkBA,CAAAA,CAAO,cAClC2xC,CAAAA,GAAqB3xC,CAAAA,CAAO,cAAA,CAAgBA,CAAAA,CAAO,YAAY,CAAA,CAEjE,MAEF,KAAK,cAAA,CACCA,CAAAA,CAAO,MAAA,EAAUA,CAAAA,CAAO,cAAA,EAC1Bs+C,CAAAA,GAAqBt+C,EAAO,MAAA,CAAQA,CAAAA,CAAO,cAAc,CAAA,CAE3D,KACJ,CACF,CAAA,CAAG,CAACoZ,CAAAA,CAAcirB,CAAAA,CAAcC,CAAAA,CAAcqN,CAAAA,CAAoB2M,CAAkB,CAAC,EAG/EqE,EAAAA,CAAoBztC,WAAAA,CAAY,MAAO0tC,CAAAA,EAAoB,CAC/D,GAAI,CAACA,CAAAA,CAAQ,IAAA,EAAK,EAAKnhC,CAAAA,CAAW,OAGlC,IAAMohC,EAAyB,CAC7B,EAAA,CAAI,CAAA,KAAA,EAAQ,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACtB,IAAA,CAAM,MAAA,CACN,OAAA,CAASD,CAAAA,CACT,SAAA,CAAW,IAAI,IACjB,EAEAlB,CAAAA,CAAa/rC,CAAAA,EAAS,CAAC,GAAGA,CAAAA,CAAK,KAAA,CAAM,EAAEwsC,CAAAA,CAAa,CAAA,CAAE,CAAA,CAAGU,CAAW,CAAC,CAAA,CACrEjB,CAAAA,CAAc,EAAE,CAAA,CAChBG,CAAAA,CAAmB,KAAK,CAAA,CACxBF,CAAAA,CAAa,IAAI,CAAA,CAGjB,IAAMiB,CAAAA,CAA4B,CAChC,EAAA,CAAI,CAAA,QAAA,EAAW,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACzB,IAAA,CAAM,WAAA,CACN,OAAA,CAAS,EAAA,CACT,SAAA,CAAW,IAAI,IAAA,CACf,SAAA,CAAW,IACb,CAAA,CACApB,CAAAA,CAAa/rC,CAAAA,EAAS,CAAC,GAAGA,CAAAA,CAAMmtC,CAAc,CAAC,CAAA,CAE/C,GAAI,CACF,GAAIZ,CAAAA,CAAW,CACb,IAAMliD,CAAAA,CAAS,MAAMkiD,CAAAA,CAAUU,CAAAA,CAAS1e,CAAK,CAAA,CAG7Cwd,CAAAA,CAAa/rC,CAAAA,EAAS,CACpB,IAAMotC,EAAAA,CAAiBptC,CAAAA,CAAK,MAAA,CAAQg5B,EAAAA,EAAM,CAACA,EAAAA,CAAE,SAAS,CAAA,CAChDqU,EAAAA,CAA8B,CAClC,EAAA,CAAI,CAAA,UAAA,EAAa,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CAC3B,IAAA,CAAM,WAAA,CACN,OAAA,CAAShjD,CAAAA,CAAO,OAAA,CAChB,SAAA,CAAW,IAAI,IAAA,CACf,QAASA,CACX,CAAA,CACA,OAAO,CAAC,GAAG+iD,EAAAA,CAAgBC,EAAgB,CAC7C,CAAC,CAAA,CAGDN,EAAAA,CAAmB1iD,CAAM,EAC3B,MAEE0hD,CAAAA,CAAa/rC,CAAAA,EAEJ,CACL,GAFqBA,CAAAA,CAAK,MAAA,CAAQg5B,EAAAA,EAAM,CAACA,EAAAA,CAAE,SAAS,CAAA,CAGpD,CACE,EAAA,CAAI,CAAA,UAAA,EAAa,KAAK,GAAA,EAAK,CAAA,CAAA,CAC3B,IAAA,CAAM,WAAA,CACN,OAAA,CAAS,2FAAA,CACT,SAAA,CAAW,IAAI,IACjB,CACF,CACD,EAEL,CAAA,MAASnwC,EAAO,CAEdkjD,CAAAA,CAAa/rC,CAAAA,EAEJ,CACL,GAFqBA,CAAAA,CAAK,MAAA,CAAQg5B,EAAAA,EAAM,CAACA,EAAAA,CAAE,SAAS,CAAA,CAGpD,CACE,EAAA,CAAI,SAAS,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACvB,IAAA,CAAM,WAAA,CACN,QAAS,CAAA,+BAAA,EAAkCnwC,CAAAA,YAAiB,KAAA,CAAQA,CAAAA,CAAM,OAAA,CAAU,eAAe,GACnG,SAAA,CAAW,IAAI,IACjB,CACF,CACD,EACH,CAAA,OAAE,CACAqjD,CAAAA,CAAa,KAAK,EACpB,CACF,CAAA,CAAG,CAACpgC,EAAW0gC,CAAAA,CAAYD,CAAAA,CAAWhe,CAAAA,CAAOwe,EAAkB,CAAC,CAAA,CAG1Dv8B,EAAAA,CAAgBzd,CAAAA,EAAuB,CAC3CA,CAAAA,CAAE,cAAA,EAAe,CACjBi6C,EAAAA,CAAkBhB,CAAU,EAC9B,CAAA,CAGMsB,EAAAA,CAAyBr0B,CAAAA,EAAuB,CACpDgzB,CAAAA,CAAchzB,CAAU,CAAA,CACxBle,CAAAA,CAAS,OAAA,EAAS,KAAA,GACpB,CAAA,CA8CA,GA3CAlK,SAAAA,CAAU,IAAM,CACd,IAAM0M,CAAAA,CAAiBxK,CAAAA,EAAqB,CAAA,CAErCA,CAAAA,CAAE,SAAWA,CAAAA,CAAE,OAAA,GAAYA,CAAAA,CAAE,GAAA,GAAQ,GAAA,GACxCA,CAAAA,CAAE,gBAAe,CACjBnB,CAAAA,CAAWoO,CAAAA,EAAS,CAACA,CAAI,CAAA,CACpBrO,CAAAA,EACHk6C,CAAAA,CAAe,KAAK,CAAA,CAAA,CAIpB94C,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAYpB,CAAAA,EACxBC,EAAU,KAAK,EAEnB,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAW2L,CAAa,CAAA,CAC3C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAa,CACpE,EAAG,CAAC5L,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMkB,CAAAA,CAAsBE,CAAAA,EAAkB,CAC5C,IAAMjC,CAAAA,CAASiC,CAAAA,CAAE,MAAA,CAEbu5C,CAAAA,CAAiB,OAAA,EAAW,CAACA,CAAAA,CAAiB,OAAA,CAAQ,QAAA,CAASx7C,CAAM,CAAA,EACvEc,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAGM6nB,CAAAA,CAAY,UAAA,CAAW,IAAM,CACjC,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAa5mB,CAAkB,EAC3D,CAAA,CAAG,GAAG,CAAA,CAEN,OAAO,IAAM,CACX,YAAA,CAAa4mB,CAAS,CAAA,CACtB,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAa5mB,CAAkB,EAC9D,CACF,CAAA,CAAG,CAAClB,CAAM,CAAC,EAEP,CAACpG,CAAAA,CAAS,OAAO,IAAA,CAGrB,IAAMgiD,CAAAA,CAAkB,CACtB,cAAA,CAAgB,kBAAA,CAChB,aAAA,CAAe,iBAAA,CACf,WAAA,CAAa,eAAA,CACb,UAAA,CAAY,cACd,CAAA,CAEA,OACEj8C,IAAAA,CAAChB,EAAAA,CAAA,CAEC,QAAA,CAAA,CAAAF,IAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA,CAAC1O,CAAAA,EACAL,IAAAA,CAACgP,MAAAA,CAAO,OAAP,CACC,OAAA,CAAS,CAAE,KAAA,CAAO,CAAA,CAAG,OAAA,CAAS,CAAE,CAAA,CAChC,OAAA,CAAS,CAAE,KAAA,CAAO,CAAA,CAAG,OAAA,CAAS,CAAE,EAChC,IAAA,CAAM,CAAE,KAAA,CAAO,CAAA,CAAG,OAAA,CAAS,CAAE,CAAA,CAC7B,UAAA,CAAY,CAAE,KAAA,CAAO,IAAK,CAAA,CAC1B,QAAA,CAAU,CAAE,MAAO,GAAK,CAAA,CACxB,SAAA,CAAW,CAAA,MAAA,EAASitC,CAAAA,CAAgBh0B,CAAQ,CAAC,CAAA,qFAAA,CAAA,CAC7C,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,OAAA,CACP,UAAW,oCACb,CAAA,CACA,OAAA,CAAS,IAAM3nB,CAAAA,CAAU,IAAI,CAAA,CAE7B,QAAA,CAAA,CAAAxB,GAAAA,CAACi7C,EAAAA,CAAA,EAAO,CAAA,CACRj7C,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,qBAAA,CAAsB,QAAA,CAAA,cAAA,CAAY,CAAA,CAClDA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oGAAA,CAAqG,QAAA,CAAA,SAAA,CAEpH,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAGAA,GAAAA,CAACiQ,eAAAA,CAAA,CACE,SAAA1O,CAAAA,EACCL,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,GAAA,CAAKgsC,CAAAA,CACL,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CAC1C,OAAA,CAAS,CACP,OAAA,CAAS,CAAA,CACT,CAAA,CAAG,CAAA,CACH,KAAA,CAAO,CAAA,CACP,MAAA,CAAQV,CAAAA,CAAc,MAAA,CAAS,GACjC,CAAA,CACA,KAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAA,CAAI,KAAA,CAAO,GAAK,CAAA,CACvC,UAAA,CAAY,CAAE,IAAA,CAAM,QAAA,CAAU,OAAA,CAAS,GAAI,SAAA,CAAW,GAAI,CAAA,CAC1D,SAAA,CAAW,CAAA,MAAA,EAAS2B,CAAAA,CAAgBh0B,CAAQ,CAAC,CAAA,oEAAA,CAAA,CAC7C,KAAA,CAAO,CACL,UAAA,CAAYxoB,CAAAA,CAAM,SAAA,CAClB,OAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CAAA,CACjC,SAAA,CAAW,CAAA,0CAAA,EAA6CA,CAAAA,CAAM,MAAM,CAAA,CACtE,CAAA,CAGA,QAAA,CAAA,CAAAO,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,8CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDACd,CAAA,CAEA,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACi7C,EAAAA,CAAA,EAAO,EACRj7C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAgB,QAAA,CAAA,oBAAA,CAAkB,CAAA,CAAA,CACpD,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,QAAS,IAAMy7C,CAAAA,CAAgB7rC,CAAAA,EAAS,CAACA,CAAI,CAAA,CAC7C,SAAA,CAAU,qFAAA,CAEV,QAAA,CAAA5P,GAAAA,CAACo7C,EAAAA,CAAA,EAAa,CAAA,CAChB,CAAA,CACAp7C,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMwB,CAAAA,CAAU,KAAK,CAAA,CAC9B,SAAA,CAAU,qFAAA,CAEV,QAAA,CAAAxB,GAAAA,CAACm7C,EAAAA,CAAA,EAAU,CAAA,CACb,CAAA,CAAA,CACF,GACF,CAAA,CAGAn7C,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA,CAACurC,CAAAA,EACAt6C,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,MAAA,CAAQ,CAAA,CAAG,QAAS,CAAE,CAAA,CACjC,OAAA,CAAS,CAAE,MAAA,CAAQ,MAAA,CAAQ,QAAS,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,MAAA,CAAQ,CAAA,CAAG,QAAS,CAAE,CAAA,CAC9B,SAAA,CAAU,8BAAA,CAGV,QAAA,CAAA,CAAAhP,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sCAAA,CACV,KAAA,CAAO,CAAE,SAAA,CAAW,GAAI,CAAA,CAEvB,UAAAw6C,CAAAA,CAAS,MAAA,GAAW,CAAA,EAAKK,CAAAA,EACxB76C,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CACC,SAAA,CAAU,qBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,aAAc,CAAA,CACrC,QAAA,CAAA,yCAAA,CAED,CAAA,CACAX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACZ,QAAA,CAAAmoB,CAAAA,CAAY,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAACU,CAAAA,CAAYlqB,CAAAA,GACxCqB,GAAAA,CAAC,UAEC,OAAA,CAAS,IAAMk9C,EAAAA,CAAsBr0B,CAAU,CAAA,CAC/C,SAAA,CAAU,qDACV,KAAA,CAAO,CACL,UAAA,CAAYloB,CAAAA,CAAM,WAAA,CAClB,KAAA,CAAOA,CAAAA,CAAM,aAAA,CACb,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAM,MAAM,CAAA,CACnC,CAAA,CAEC,SAAAkoB,CAAAA,CAAW,MAAA,CAAS,EAAA,CACjBA,CAAAA,CAAW,KAAA,CAAM,CAAA,CAAG,EAAE,CAAA,CAAI,KAAA,CAC1BA,CAAAA,CAAAA,CAXClqB,CAYP,CACD,CAAA,CACH,CAAA,CAAA,CACF,EAGD+8C,CAAAA,CAAS,GAAA,CAAKnhD,CAAAA,EACbyF,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CAEC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,UAAW,CAAA,KAAA,EACT3V,CAAAA,CAAQ,IAAA,GAAS,MAAA,CAAS,aAAA,CAAgB,eAC5C,GAEA,QAAA,CAAA2G,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW,CAAA,oCAAA,EACT3G,CAAAA,CAAQ,IAAA,GAAS,MAAA,CACb,eAAA,CACA,eACN,CAAA,CAAA,CACA,KAAA,CAAO,CACL,UAAA,CACEA,EAAQ,IAAA,GAAS,MAAA,CACb,mDAAA,CACAoG,CAAAA,CAAM,WAAA,CACZ,KAAA,CACEpG,CAAAA,CAAQ,IAAA,GAAS,MAAA,CACb,OAAA,CACAoG,CAAAA,CAAM,WACd,CAAA,CAEC,QAAA,CAAA,CAAApG,EAAQ,SAAA,CACPyF,GAAAA,CAACq7C,EAAAA,CAAA,EAAY,CAAA,CAEbr7C,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,6BAAA,CACV,QAAA,CAAAzF,CAAAA,CAAQ,OAAA,CACX,CAAA,CAIDA,CAAAA,CAAQ,SACP2G,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,kEAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY3G,CAAAA,CAAQ,OAAA,CAAQ,OAAA,CACxB,yBAAA,CACA,wBAAA,CACJ,KAAA,CAAOA,CAAAA,CAAQ,QAAQ,OAAA,CACnB,SAAA,CACA,SACN,CAAA,CAEC,QAAA,CAAA,CAAAA,CAAAA,CAAQ,OAAA,CAAQ,OAAA,CAAU,QAAA,CAAM,QAAA,CACjCyF,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,YAAA,CACb,SAAAzF,CAAAA,CAAQ,OAAA,CAAQ,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAM,GAAG,CAAA,CACzC,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAnDKA,CAAAA,CAAQ,EAoDf,CACD,CAAA,CACDyF,IAAC,KAAA,CAAA,CAAI,GAAA,CAAKi8C,CAAAA,CAAgB,CAAA,CAAA,CAC5B,CAAA,CAGA/6C,IAAAA,CAAC,MAAA,CAAA,CACC,QAAA,CAAUkf,EAAAA,CACV,SAAA,CAAU,cAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAazf,EAAM,MAAO,CAAA,CAEnC,QAAA,CAAA,CAAAO,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,+CACV,KAAA,CAAO,CACL,UAAA,CAAYP,CAAAA,CAAM,WAAA,CAClB,MAAA,CAAQ,aAAaA,CAAAA,CAAM,MAAM,CAAA,CACnC,CAAA,CAEA,QAAA,CAAA,CAAAX,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,MAAA,CACL,KAAA,CAAOixC,CAAAA,CACP,QAAA,CAAWj5C,GAAMk5C,CAAAA,CAAcl5C,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC7C,WAAA,CAAa0L,CAAAA,CACb,QAAA,CAAUqN,CAAAA,CACV,SAAA,CAAU,4CAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO/a,EAAM,WAAY,CAAA,CACpC,CAAA,CACAX,GAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,QAAA,CACL,QAAA,CAAU,CAAC47C,CAAAA,CAAW,IAAA,EAAK,EAAKlgC,CAAAA,CAChC,SAAA,CAAU,oDACV,KAAA,CAAO,CACL,UAAA,CAAYkgC,CAAAA,CAAW,IAAA,EAAK,CACxB,oDACA,aAAA,CACJ,KAAA,CAAOA,CAAAA,CAAW,IAAA,EAAK,CAAI,OAAA,CAAUj7C,EAAM,aAC7C,CAAA,CAEA,QAAA,CAAAX,GAAAA,CAACk7C,EAAAA,CAAA,EAAS,CAAA,CACZ,CAAA,CAAA,CACF,CAAA,CACAl7C,GAAAA,CAAC,GAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOW,CAAAA,CAAM,YAAa,CAAA,CACpC,QAAA,CAAA,yCAAA,CAED,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CC7lBO,SAASy8C,EAAAA,CACdC,CAAAA,CACAC,EAAyB,EAAA,CACH,CACtB,GAAM,CAACC,CAAAA,CAASC,CAAU,EAAIl9C,QAAAA,CAA0B,CACtD,IAAA,CAAM,EAAC,CACP,OAAA,CAAS+8C,CAAAA,CACT,MAAA,CAAQ,EACV,CAAC,CAAA,CAGKI,CAAAA,CAAoB77C,MAAAA,CAAO,KAAK,CAAA,CAEhCuZ,CAAAA,CAAWhM,WAAAA,CACf,CAACuuC,CAAAA,CAAyCC,CAAAA,CAAwB,IAAA,GAAS,CACzEH,CAAAA,CAAYI,CAAAA,EAAmB,CAE7B,IAAMC,CAAAA,CACJ,OAAOH,GAAsB,UAAA,CACxBA,CAAAA,CAAqCE,CAAAA,CAAe,OAAO,CAAA,CAC5DF,CAAAA,CAEN,GAAID,CAAAA,CAAkB,OAAA,CAEpB,OAAO,CACL,GAAGG,CAAAA,CACH,OAAA,CAASC,CACX,CAAA,CAGF,GAAI,CAACF,CAAAA,CAEH,OAAO,CACL,GAAGC,CAAAA,CACH,OAAA,CAASC,CACX,CAAA,CAGF,IAAMC,CAAAA,CAAU,CAAC,GAAGF,CAAAA,CAAe,IAAA,CAAMA,CAAAA,CAAe,OAAO,CAAA,CAG/D,OAAIE,CAAAA,CAAQ,MAAA,CAASR,CAAAA,EACnBQ,CAAAA,CAAQ,KAAA,EAAM,CAGT,CACL,IAAA,CAAMA,EACN,OAAA,CAASD,CAAAA,CACT,MAAA,CAAQ,EACV,CACF,CAAC,EACH,CAAA,CACA,CAACP,CAAc,CACjB,CAAA,CAEMS,CAAAA,CAAO5uC,YAAY,IAAM,CAC7BquC,CAAAA,CAAYI,CAAAA,EAAmB,CAC7B,GAAIA,CAAAA,CAAe,IAAA,CAAK,MAAA,GAAW,CAAA,CACjC,OAAOA,CAAAA,CAGT,IAAMI,CAAAA,CAAWJ,EAAe,IAAA,CAAKA,CAAAA,CAAe,IAAA,CAAK,MAAA,CAAS,CAAC,CAAA,CAC7DE,EAAUF,CAAAA,CAAe,IAAA,CAAK,KAAA,CAAM,CAAA,CAAGA,CAAAA,CAAe,IAAA,CAAK,OAAS,CAAC,CAAA,CAE3E,OAAAH,CAAAA,CAAkB,OAAA,CAAU,IAAA,CAC5B,UAAA,CAAW,IAAM,CACfA,CAAAA,CAAkB,OAAA,CAAU,MAC9B,CAAA,CAAG,CAAC,EAEG,CACL,IAAA,CAAMK,CAAAA,CACN,OAAA,CAASE,CAAAA,CACT,MAAA,CAAQ,CAACJ,CAAAA,CAAe,OAAA,CAAS,GAAGA,CAAAA,CAAe,MAAM,CAC3D,CACF,CAAC,EACH,CAAA,CAAG,EAAE,CAAA,CAECK,CAAAA,CAAO9uC,WAAAA,CAAY,IAAM,CAC7BquC,CAAAA,CAAYI,CAAAA,EAAmB,CAC7B,GAAIA,CAAAA,CAAe,OAAO,MAAA,GAAW,CAAA,CACnC,OAAOA,CAAAA,CAGT,IAAMvqB,CAAAA,CAAOuqB,EAAe,MAAA,CAAO,CAAC,CAAA,CAC9BM,CAAAA,CAAYN,CAAAA,CAAe,MAAA,CAAO,MAAM,CAAC,CAAA,CAE/C,OAAAH,CAAAA,CAAkB,OAAA,CAAU,IAAA,CAC5B,UAAA,CAAW,IAAM,CACfA,CAAAA,CAAkB,OAAA,CAAU,MAC9B,CAAA,CAAG,CAAC,EAEG,CACL,IAAA,CAAM,CAAC,GAAGG,CAAAA,CAAe,IAAA,CAAMA,CAAAA,CAAe,OAAO,CAAA,CACrD,OAAA,CAASvqB,CAAAA,CACT,MAAA,CAAQ6qB,CACV,CACF,CAAC,EACH,CAAA,CAAG,EAAE,CAAA,CAECC,CAAAA,CAAehvC,WAAAA,CAAY,IAAM,CACrCquC,CAAAA,CAAYI,CAAAA,GAAoB,CAC9B,IAAA,CAAM,GACN,OAAA,CAASA,CAAAA,CAAe,OAAA,CACxB,MAAA,CAAQ,EACV,EAAE,EACJ,CAAA,CAAG,EAAE,CAAA,CAEL,OAAO,CACL,KAAA,CAAOL,CAAAA,CAAQ,OAAA,CACf,QAAA,CAAApiC,CAAAA,CACA,IAAA,CAAA4iC,CAAAA,CACA,IAAA,CAAAE,CAAAA,CACA,OAAA,CAASV,CAAAA,CAAQ,IAAA,CAAK,MAAA,CAAS,CAAA,CAC/B,QAASA,CAAAA,CAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,CACjC,YAAA,CAAAY,CACF,CACF,CC5HO,SAASC,EAAAA,CAAqB,CACnC,IAAA,CAAAL,CAAAA,CACA,IAAA,CAAAE,CAAAA,CACA,OAAA,CAAAI,CAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,OAAA,CAAAnjD,CAAAA,CAAU,IACZ,CAAA,CAAgC,CAC9BsF,SAAAA,CAAU,IAAM,CACd,GAAI,CAACtF,CAAAA,CAAS,OAEd,IAAMgS,CAAAA,CAAiBxK,CAAAA,EAAqB,CAC1C,IAAMkyB,CAAAA,CAAQ,SAAA,CAAU,QAAA,CAAS,WAAA,GAAc,OAAA,CAAQ,KAAK,CAAA,EAAK,CAAA,CAC3D0pB,CAAAA,CAAU1pB,CAAAA,CAAQlyB,CAAAA,CAAE,OAAA,CAAUA,CAAAA,CAAE,OAAA,CAGtC,GAAI47C,CAAAA,EAAW57C,CAAAA,CAAE,GAAA,GAAQ,KAAO,CAACA,CAAAA,CAAE,QAAA,EAAY07C,CAAAA,CAAS,CACtD17C,CAAAA,CAAE,cAAA,EAAe,CACjBo7C,CAAAA,EAAK,CACL,MACF,CAGA,GAAIO,CAAAA,CAAS,CACX,GAAI,CAACzpB,CAAAA,EAAS0pB,CAAAA,EAAW57C,CAAAA,CAAE,GAAA,GAAQ,GAAA,CAAK,CACtCA,CAAAA,CAAE,cAAA,EAAe,CACjBs7C,CAAAA,EAAK,CACL,MACF,CACA,GAAIppB,CAAAA,EAAS0pB,CAAAA,EAAW57C,CAAAA,CAAE,QAAA,EAAYA,CAAAA,CAAE,MAAQ,GAAA,CAAK,CACnDA,CAAAA,CAAE,cAAA,EAAe,CACjBs7C,CAAAA,GACA,MACF,CACF,CACF,CAAA,CAEA,OAAA,MAAA,CAAO,gBAAA,CAAiB,SAAA,CAAW9wC,CAAa,CAAA,CAEzC,IAAM,CACX,MAAA,CAAO,mBAAA,CAAoB,SAAA,CAAWA,CAAa,EACrD,CACF,CAAA,CAAG,CAAC4wC,CAAAA,CAAME,CAAAA,CAAMI,CAAAA,CAASC,CAAAA,CAASnjD,CAAO,CAAC,EAC5C,CClDO,IAAMqjD,EAAAA,CAA6C,CACxD,WAAA,CAAc32C,CAAAA,EAAe,CAC3B,IAAM5K,CAAAA,CAAkB,CACtB,CAAA,QAAA,EAAW4K,CAAAA,CAAK,IAAI,CAAA,SAAA,CACtB,CAAA,CAEA,GAAIA,CAAAA,CAAK,SAAA,EAAaA,EAAK,OAAA,CAAS,CAClC5K,CAAAA,CAAM,IAAA,CACJ,CAAA,EAAGw2C,EAAAA,CAAW,WAAW5rC,CAAAA,CAAK,SAAS,CAAC,CAAA,GAAA,EAAM4rC,EAAAA,CAAW,UAAA,CAAW5rC,EAAK,OAAO,CAAC,CAAA,CACnF,CAAA,CACA,IAAMxQ,CAAAA,CAAWo8C,EAAAA,CAAW,iBAAA,CAAkB5rC,CAAAA,CAAK,SAAA,CAAWA,CAAAA,CAAK,OAAO,CAAA,CAC1E5K,CAAAA,CAAM,KAAK,CAAA,UAAA,EAAa5F,CAAQ,CAAA,KAAA,CAAO,EACzC,CAUA,GARIwQ,CAAAA,CAAK,QAAA,GAAa,MAAA,EACpB5K,CAAAA,CAAM,IAAA,CAAK,CAAA,UAAA,EAAa4K,CAAAA,CAAK,QAAQ,GAAG,CAAA,CAGtCA,CAAAA,CAAK,MAAA,EACP5K,CAAAA,CAAM,IAAA,CAAK,CAAA,QAAA,EAAW4K,CAAAA,CAAK,MAAM,CAAA,CAAE,CAAA,CAGjCA,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,SAAA,CAAU,OAAS,CAAA,CAAG,CAC/C,IAAM42C,CAAAA,CAAgB52C,CAAAA,CAAK,SAAA,CAAU,IAAIkL,CAAAA,EAAKA,CAAAA,CAAE,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI,EAC/D9V,CAAAA,CAAM,IAAA,CAAK,CAAA,UAAA,EAAawhD,CAAa,CAAA,CAAE,EACzC,CAEA,OAAI52C,CAAAA,CAAK,YAAA,EAAgBA,CAAAA,CAAK,YAAA,CAAa,MAAA,CAAS,CAAA,EAClD5K,EAAM,IAAA,CAAK,CAAA,cAAA,EAAiB4K,CAAAA,CAAK,YAAA,CAAa,MAAM,CAAA,CAAE,CAAA,CAGjD5K,CAAAA,CAAM,IAAA,CAAK,OAAO,CAC3B,CAAA,CAEA,SAAA,CAAY4K,CAAAA,EACHA,EAAK,IAAA,CAGd,QAAA,CAAU,CAACA,CAAAA,CAAYhM,CAAAA,CAAQuB,CAAAA,GAEtBA,CAAAA,CAGT,SAAA,CAAYyK,CAAAA,EAAe,CACzB,IAAM62C,CAAAA,CAAoB,EAAC,CAE3B,OAAI72C,CAAAA,CAAK,cAAA,EACP62C,CAAAA,CAAQ,IAAA,CAAK,eAAe,CAAA,CAG1B72C,CAAAA,CAAK,MAAA,GAAW,WAAA,CAClB62C,CAAAA,CAAQ,IAAA,CAAK,WAAW,CAAA,CACf72C,CAAAA,CAAK,SAAW,aAAA,CACzB62C,CAAAA,CAAQ,IAAA,CAAK,aAAa,CAAA,CACjB72C,CAAAA,CAAK,MAAA,GAAW,MAAA,EACzB62C,CAAAA,CAAQ,IAAA,CAAK,MAAM,CAAA,CAGjB72C,CAAAA,CAAK,WAAA,EACP62C,EAAQ,IAAA,CAAK,WAAW,CAAA,CAGnBA,CAAAA,CAAQ,IAAA,CAAK,GAAG,CACzB,CAAA,CAEA,gBAAA,CAAmB72C,CAAAA,EACV,CAAA,OAAA,EAAKA,CAAAA,CAAK,IAAI,CAAA,CAAA,CAGvB,WAAalE,CAAAA,EACJ8vC,EAAAA,CAAW,UAAA,CAAW9vC,CAAI,CAAA,CAGnC,cAAA,CAAiBH,CAAAA,EACXA,CAAAA,GAAS,CAAA,CAAU,OAAA,CAChB,CAAA,EAAGA,CAAI,CAAA,KAAA,CAAA,CAGhB,cAAA,CAAiB0T,GACR,CAAA,EAAGA,CAAQ,CAAA,CAAA,CAEtB,CAAA,CAKO,SAASynC,EAAAA,CACdC,EAC0B,CAC1B,OAAO,CACL,GAAGJ,EAAAA,CACH,GAAGI,CACL,CACF,CC1DA,IAAMC,EAAAA,CAAgBC,CAAAA,EAAgC,CACpD,OAAQA,CAAAA,EACN,KAAK,SAAA,CACH,OAAO,EAAA,CACT,KAAK,aAAA,CACH,OAAO,EAAA,CACT,KAAK,UAAA,CACH,OAAO,EAAA,CACT,QACE,OAAO,EACX,CACF,CAAA,CAEaC,EAAAA,CAAaC,UAAAA,CAA2C,SACnE,CAAE,KAAA,CAAA7gB,CAAAA,CAAO,MAAA,CAAAl7B,CAAAA,CAAS,EAAC,CAAG,cAAAg8C,CAAc,CAAA,CACpCC,CAAAA,CACA,CACA,GAAM,CACJ,MAAOvmB,CAAAA,CACP,SAAA,CAAWwmB,CAAAA,CAAmB,MAAA,CAC9B,UAAA,CAAYC,CAAAA,CAAoB,cAChC,iBAAA,CAAArjB,CAAAA,CAAoB,IAAA,CACpB,gBAAA,CAAAsjB,CAAAA,CAAmB,IAAA,CACnB,cAAA,CAAAt6C,CAAAA,CAAiB,EAAC,CAClB,SAAA,CAAA0wB,CAAAA,CACA,sBAAA,CAAA6pB,CAAAA,CAAyB,KACzB,oBAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CAEA,MAAA,CAAAhxC,CAAAA,CAAS,IAAA,CACT,kBAAA,CAAA0rB,CAAAA,CAEA,oBAAA,CAAA8B,CAAAA,CAAuB,KAAA,CACvB,eAAA,CAAApd,CAAAA,CACA,aAAAgB,CAAAA,CAEA,UAAA,CAAY6/B,CAAAA,CACZ,kBAAA,CAAoBC,CAAAA,CAEpB,aAAA,CAAA9jB,CAAAA,CAEA,WAAA,CAAAuI,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,iBAAA,CAAAC,CAAAA,CACA,YAAA,CAAAhxB,EACA,gBAAA,CAAAssC,CAAAA,CAEA,UAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CACA,qBAAAC,CAAAA,CACA,mBAAA,CAAAC,EAAAA,CAEA,kBAAA,CAAAnU,EAAAA,CACA,kBAAA,CAAA2M,GAEA,eAAA,CAAAyH,EAAAA,CACA,cAAA,CAAAC,EAAAA,CACA,kBAAA,CAAAC,EAAAA,CACA,iBAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,iBAAA,CAAAC,CACF,CAAA,CAAIp9C,CAAAA,CAIEq9C,EADe3gD,UAAAA,CAAW64B,EAAY,CAAA,EACV,KAAA,CAG5B,CAACU,CAAAA,CAAcqnB,EAAe,CAAA,CAAIjgD,QAAAA,CAAgBggD,CAAAA,EAAe3nB,CAAAA,EAAgB,MAAM,CAAA,CAEvF,CAAC6C,GAAWglB,EAAY,CAAA,CAAIlgD,QAAAA,CAAoB6+C,CAAgB,CAAA,CAChE,CAACtjB,EAAAA,CAAY4kB,EAAa,CAAA,CAAIngD,QAAAA,CAAqB8+C,CAAiB,CAAA,CACpE,CAAC1jB,EAAAA,CAAMglB,EAAO,CAAA,CAAIpgD,QAAAA,CAAS,CAAC,CAAA,CAG5B,CAACqgD,EAAAA,CAAoBC,EAAqB,CAAA,CAAItgD,QAAAA,CAAyB,KAAK,CAAA,CAC5E27B,EAAAA,CAAawjB,CAAAA,EAAsBkB,EAAAA,CACnCE,EAAgBnB,CAAAA,EAA8BkB,EAAAA,CAC9C,CAACE,EAAAA,CAAWC,EAAY,CAAA,CAAIzgD,QAAAA,CAAS,CAAC,CAAA,CACtC,CAAC6rC,EAAAA,CAAY6U,EAAa,CAAA,CAAI1gD,QAAAA,CAAS,KAAK,CAAA,CAC5C,CAAC2gD,EAAAA,CAAmBC,EAAoB,CAAA,CAAI5gD,QAAAA,CAAwB,IAAI,CAAA,CAGxE,CAAColC,EAAAA,CAAaC,CAAc,CAAA,CAAIrlC,QAAAA,CAAuE,CAC3G,OAAQ,KAAA,CACR,CAAA,CAAG,CAAA,CACH,CAAA,CAAG,CAAA,CACH,IAAA,CAAM,IACR,CAAC,CAAA,CAGK,CAAC6gD,EAAAA,CAAaC,EAAc,CAAA,CAAI9gD,QAAAA,CAAsB,IAAI,CAAA,CAG1D,CAAC+gD,EAAAA,CAAoBC,EAAqB,CAAA,CAAIhhD,QAAAA,CAAsD,IAAI,CAAA,CAK9GG,SAAAA,CAAU,IAAM,CACV6/C,CAAAA,EAAeA,CAAAA,GAAgBpnB,GACjCqnB,EAAAA,CAAgBD,CAAW,EAE/B,CAAA,CAAG,CAACA,CAAW,CAAC,CAAA,CAGhB7/C,SAAAA,CAAU,IAAM,CACVk4B,CAAAA,EAAgBA,CAAAA,GAAiBO,CAAAA,EACnCqnB,GAAgB5nB,CAAY,EAEhC,CAAA,CAAG,CAACA,CAAY,CAAC,CAAA,CAGjB,IAAM4oB,EAAAA,CAAoBpyC,WAAAA,CACvB6pB,CAAAA,EAAoB,CACnBunB,EAAAA,CAAgBvnB,CAAQ,EACxB4C,CAAAA,GAAgB5C,CAAQ,EAC1B,CAAA,CACA,CAAC4C,CAAa,CAChB,CAAA,CAGM,CACJ,KAAA,CAAO4lB,EAAAA,CACP,QAAA,CAAUC,EAAAA,CACV,IAAA,CAAA1D,GACA,IAAA,CAAAE,EAAAA,CACA,OAAA,CAAAI,EAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,aAAAH,EACF,CAAA,CAAIf,EAAAA,CAAoBjf,CAAAA,CAAO,EAAE,CAAA,CAK3BujB,EAAgBvyC,WAAAA,CAAY,IAC3BowC,CAAAA,CACE,OAAOA,CAAAA,EAAyB,QAAA,CACnCA,CAAAA,CACA,sBAAA,CAH8B,IAAA,CAIjC,CAACA,CAAoB,CAAC,CAAA,CAGnBoC,EAAAA,CAAoB//C,OAA6B,IAAI,GAAK,CAAA,CAC1DggD,EAAAA,CAA4BhgD,MAAAA,CAAO,KAAK,CAAA,CAG9C,GAAI,CAACggD,EAAAA,CAA0B,OAAA,EAAWrC,CAAAA,CAAsB,CAC9DqC,EAAAA,CAA0B,QAAU,IAAA,CACpC,IAAMhpB,CAAAA,CAAa,OAAO2mB,CAAAA,EAAyB,QAAA,CAC/CA,CAAAA,CACA,sBAAA,CAEJ,GAAI,CACF,IAAMzmB,CAAAA,CAAS,YAAA,CAAa,OAAA,CAAQF,CAAU,CAAA,CAC9C,GAAIE,CAAAA,CAAQ,CACV,IAAMub,CAAAA,CAAS,KAAK,KAAA,CAAMvb,CAAM,CAAA,CAC5B,KAAA,CAAM,OAAA,CAAQub,CAAM,IAEtBsN,EAAAA,CAAkB,OAAA,CAAU,IAAI,GAAA,CAAItN,CAAM,CAAA,EAE9C,CACF,CAAA,MAAS1xC,CAAAA,CAAG,CACV,OAAA,CAAQ,IAAA,CAAK,8DAAA,CAAgEA,CAAC,EAChF,CACF,CAGA,IAAMk/C,EAAAA,CAA8B1yC,WAAAA,CAAY,IAAM,CACpD,IAAMypB,CAAAA,CAAa8oB,CAAAA,EAAc,CACjC,GAAK9oB,CAAAA,CAEL,GAAI,CACF,IAAMkpB,CAAAA,CAAU,KAAA,CAAM,IAAA,CAAKH,EAAAA,CAAkB,OAAA,CAAQ,OAAA,EAAS,CAAA,CAC9D,YAAA,CAAa,OAAA,CAAQ/oB,CAAAA,CAAY,IAAA,CAAK,SAAA,CAAUkpB,CAAO,CAAC,EAC1D,CAAA,MAASn/C,CAAAA,CAAG,CACV,OAAA,CAAQ,IAAA,CAAK,2DAAA,CAA6DA,CAAC,EAC7E,CACF,CAAA,CAAG,CAAC++C,CAAa,CAAC,CAAA,CAIlBjhD,SAAAA,CAAU,IAAM,CAEd,IAAMshD,CAAAA,CAAsBne,CAAAA,EACnBA,CAAAA,CAAS,GAAA,CAAI/7B,CAAAA,EAAQ,CAC1B,IAAMm6C,EAAAA,CAAiBL,EAAAA,CAAkB,QAAQ,GAAA,CAAI95C,CAAAA,CAAK,EAAE,CAAA,CACtD+6B,EAAAA,CAAUof,EAAAA,GAAmB,MAAA,CAC/B,CAAE,GAAGn6C,CAAAA,CAAM,UAAA,CAAYm6C,EAAe,CAAA,CACtCn6C,CAAAA,CAEJ,OAAI+6B,EAAAA,CAAQ,QAAA,EAAU,MAAA,CACb,CAAE,GAAGA,EAAAA,CAAS,QAAA,CAAUmf,CAAAA,CAAmBnf,EAAAA,CAAQ,QAAQ,CAAE,CAAA,CAE/DA,EACT,CAAC,EAIC+e,EAAAA,CAAkB,OAAA,CAAQ,IAAA,CAAO,CAAA,CACnCF,EAAAA,CAAcM,CAAAA,CAAmB5jB,CAAK,CAAC,CAAA,CAEvCsjB,EAAAA,CAActjB,CAAK,EAEvB,CAAA,CAAG,CAACA,CAAAA,CAAOsjB,EAAa,CAAC,CAAA,CAGzB,IAAMQ,EAAAA,CAAergD,MAAAA,CAAeu8B,CAAK,CAAA,CACnC+jB,EAAAA,CAAiBtgD,MAAAA,CAAO,IAAI,CAAA,CAGlCnB,SAAAA,CAAU,IAAM,CAEd,GAAIyhD,EAAAA,CAAe,OAAA,CAAS,CAC1BA,EAAAA,CAAe,OAAA,CAAU,KAAA,CACzBD,EAAAA,CAAa,OAAA,CAAUT,EAAAA,CACvB,MACF,CAEA,GAAI,CAACvC,CAAAA,CAAe,OAOpB,IAAMkD,CAAAA,CAAW,IAAA,CAAK,SAAA,CAAUF,EAAAA,CAAa,OAAO,CAAA,CAC9CG,CAAAA,CAAc,IAAA,CAAK,SAAA,CAAUZ,EAAU,CAAA,CAEzCW,IAAaC,CAAAA,GACfH,EAAAA,CAAa,OAAA,CAAUT,EAAAA,CACvBvC,CAAAA,CAAcuC,EAAU,GAE5B,CAAA,CAAG,CAACA,EAAAA,CAAYvC,CAAa,CAAC,CAAA,CAG9B,IAAMn/B,CAAAA,CAAkChD,OAAAA,CAAQ,IACvCmd,EAAAA,CAAkBzrB,CAAAA,CAAQ0rB,CAAkB,CAAA,CAClD,CAAC1rB,CAAAA,CAAQ0rB,CAAkB,CAAC,CAAA,CAOzBmoB,CAAAA,CAAoBlzC,WAAAA,CAAa7H,GAAwC,CAC7E,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,QAAA,CAAU,KAAA,CAAO,GAAA,CAAK,QAAA,CAAU,GAAA,CAAK,QAAA,CAAU,GAAA,CAAM,QAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACnI,CAAE,EAAA,CAAI,WAAA,CAAa,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,SAAA,CAAW,KAAA,CAAO,IAAK,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,SAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACxI,CAAE,EAAA,CAAI,UAAW,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,OAAA,CAAS,KAAA,CAAO,GAAA,CAAK,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,IAAA,CAAM,UAAW,IAAK,CAAA,CACpI,CAAE,EAAA,CAAI,UAAA,CAAY,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,QAAA,CAAU,KAAA,CAAO,EAAA,CAAI,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,IAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACrI,CAAE,EAAA,CAAI,WAAA,CAAa,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,SAAA,CAAW,MAAO,GAAA,CAAK,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,SAAA,CAAW,IAAK,CAAA,CACzI,CAAE,EAAA,CAAI,SAAU,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,MAAA,CAAQ,KAAA,CAAO,GAAA,CAAK,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,IAAA,CAAM,UAAW,IAAK,CAAA,CAClI,CAAE,EAAA,CAAI,UAAA,CAAY,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,QAAA,CAAU,KAAA,CAAO,GAAA,CAAK,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,IAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACtI,CAAE,EAAA,CAAI,UAAA,CAAY,KAAA,CAAOA,CAAAA,CAAE,OAAA,CAAQ,QAAA,CAAU,MAAO,EAAA,CAAI,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,GAAA,CAAK,OAAA,CAAS,MAAO,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CACvI,CAAA,CAAG,EAAE,CAAA,CAEC,CAACoX,EAAAA,CAAS4jC,EAAU,CAAA,CAAIhiD,QAAAA,CAAwB,IAAM+hD,CAAAA,CAAkBviC,CAAY,CAAC,CAAA,CAG3Frf,SAAAA,CAAU,IAAM,CACd6hD,EAAAA,CAAW1yC,CAAAA,EAAQA,CAAAA,CAAK,GAAA,CAAI9T,CAAAA,GAAQ,CAClC,GAAGA,CAAAA,CACH,KAAA,CAAOgkB,CAAAA,CAAa,OAAA,CAAQhkB,CAAAA,CAAI,EAAA,GAAO,MAAA,CAAS,WAAaA,CAAAA,CAAI,EAAuC,CAAA,EAAKA,CAAAA,CAAI,KACnH,CAAA,CAAE,CAAC,EACL,CAAA,CAAG,CAACgkB,CAAY,CAAC,CAAA,CAIjB,IAAMyiC,GAAsBzlC,OAAAA,CAAQ,IACd4B,EAAAA,CAAQ,MAAA,CAAO5iB,CAAAA,EAAOA,CAAAA,CAAI,OAAO,CAAA,CAClC,MAAA,CAAO,CAACizB,CAAAA,CAAKjzB,CAAAA,GAAQizB,CAAAA,CAAMjzB,CAAAA,CAAI,MAAO,CAAC,CAAA,CACzD,CAAC4iB,EAAO,CAAC,CAAA,CAGN8jC,CAAAA,CAAwB5gD,MAAAA,CAC5B8c,EAAAA,CAAQ,MAAA,CAAO5iB,CAAAA,EAAOA,CAAAA,CAAI,OAAO,CAAA,CAAE,IAAIue,CAAAA,EAAKA,CAAAA,CAAE,EAAE,CAAA,CAAE,IAAA,CAAK,GAAG,CAC5D,CAAA,CAIA5Z,SAAAA,CAAU,IAAM,CACd,IAAMgiD,CAAAA,CAAc/jC,EAAAA,CAAQ,OAAO5iB,EAAAA,EAAOA,EAAAA,CAAI,OAAO,CAAA,CAC/C4mD,CAAAA,CAAaD,CAAAA,CAAY,GAAA,CAAIpoC,EAAAA,EAAKA,EAAAA,CAAE,EAAE,CAAA,CAAE,IAAA,CAAK,GAAG,CAAA,CAChDsoC,EAAUH,CAAAA,CAAsB,OAAA,CAGtC,GAAIE,CAAAA,GAAeC,CAAAA,CAAS,CAC1B,IAAMC,EAAAA,CAAuBH,CAAAA,CAAY,IAAA,CAAK3mD,EAAAA,EAAOA,EAAAA,CAAI,EAAA,GAAO,MAAM,CAAA,CAChE+mD,EAAAA,CAAoBF,CAAAA,CAAQ,QAAA,CAAS,GAAG,CAAA,CAEzCC,EAAAA,CAGM,CAACC,EAAAA,EAAqBD,EAAAA,EAE/B1B,EAAAA,CAAqB,IAAI,CAAA,CAHzBA,EAAAA,CAAqB,IAAI,CAAA,CAQ3BsB,CAAAA,CAAsB,OAAA,CAAUE,EAClC,CACF,CAAA,CAAG,CAAChkC,EAAO,CAAC,CAAA,CAKZ,IAAMokC,EAAAA,CAAgB,EAAA,CAChBC,EAAAA,CAAuB,GACvBC,EAAAA,CAAYlmC,OAAAA,CAAQ,IAAM,CAE9B,IAAMmmC,CAAAA,CAAeV,EAAAA,CAAsBO,EAAAA,CAErCI,CAAAA,CAAc,OAAO,MAAA,CAAW,GAAA,CAAc,MAAA,CAAO,UAAA,CAAaH,GAAuB,GAAA,CACzFI,EAAAA,CAAa,IAAA,CAAK,GAAA,CAAIF,CAAAA,CAAcC,CAAW,CAAA,CAGrD,OAAIjC,EAAAA,GAAsB,IAAA,CACjB,IAAA,CAAK,GAAA,CAAI,GAAA,CAAa,IAAA,CAAK,IAAIA,EAAAA,CAAmBkC,EAAU,CAAC,CAAA,CAG/D,IAAA,CAAK,GAAA,CAAI,GAAA,CAAaF,CAAY,CAC3C,CAAA,CAAG,CAAChC,EAAAA,CAAmBsB,EAAmB,CAAC,EAErCa,EAAAA,CAAgBxhD,MAAAA,CAAuB,IAAI,CAAA,CAC3CyhD,EAAAA,CAAoBzhD,MAAAA,CAAuB,IAAI,CAAA,CAC/C0hD,EAAAA,CAAoB1hD,MAAAA,CAAuB,IAAI,CAAA,CAG/CjB,EAAAA,CAAQmc,OAAAA,CAAQ,IACb4c,EAAAA,CAAmBR,CAAY,CAAA,CACrC,CAACA,CAAY,CAAC,CAAA,CAGXqqB,CAAAA,CAAyBzmC,OAAAA,CAAQ,KAAO,CAC5C,KAAA,CAAAnc,EAAAA,CACA,SAAA,CAAWu4B,CACb,CAAA,CAAA,CAAI,CAACv4B,EAAAA,CAAOu4B,CAAY,CAAC,CAAA,CAGnBsqB,EAAkB1mC,OAAAA,CAAQ,IACvB6hC,EAAAA,CAAelpB,CAAS,CAAA,CAC9B,CAACA,CAAS,CAAC,CAAA,CAKRguB,EAAAA,CAAwB3mC,OAAAA,CAAQ,IAAM,CAE1C,GAAI,CAACwiC,CAAAA,CACH,OAAOkC,EAAAA,CAGT,IAAMkC,CAAAA,CAAkBjQ,EAAAA,CAAW,sBAAsB+N,EAAU,CAAA,CAE7DmC,CAAAA,CAAgBxlB,CAAAA,EACbA,CAAAA,CAAM,GAAA,CAAIt2B,EAAAA,GAAS,CACxB,GAAGA,EAAAA,CACH,cAAA,CAAgB67C,CAAAA,CAAgB,QAAA,CAAS77C,EAAAA,CAAK,EAAE,CAAA,CAChD,QAAA,CAAUA,EAAAA,CAAK,QAAA,CAAW87C,CAAAA,CAAa97C,EAAAA,CAAK,QAAQ,CAAA,CAAI,MAC1D,CAAA,CAAE,CAAA,CAGJ,OAAO87C,CAAAA,CAAanC,EAAU,CAChC,CAAA,CAAG,CAACA,EAAAA,CAAYlC,CAAsB,CAAC,CAAA,CAGjC13C,GAAgBkV,OAAAA,CAAQ,IAAc,CAC1C,GAAImf,EAAAA,GAAe,KAAA,CAAO,OAAOwnB,EAAAA,CAEjC,IAAMG,CAAAA,CAA0BhgB,CAAAA,EAA6B,CAC3D,IAAM3pC,CAAAA,CAAiB,EAAC,CAExB,IAAA,IAAW4N,EAAAA,IAAQ+7B,CAAAA,CAAU,CAE3B,IAAMigB,GAAmBh8C,EAAAA,CAAK,QAAA,EAAU,MAAA,CACpC+7C,CAAAA,CAAuB/7C,EAAAA,CAAK,QAAQ,CAAA,CACpC,MAAA,CAGAi8C,EAAAA,CAAU,KAAA,CACd,OAAQ7nB,EAAAA,EACN,KAAK,aACH6nB,EAAAA,CAAUj8C,EAAAA,CAAK,QAAA,CAAW,GAAA,CAC1B,MACF,KAAK,aAAA,CACHi8C,EAAAA,CAAUj8C,EAAAA,CAAK,QAAA,CAAW,CAAA,EAAKA,EAAAA,CAAK,QAAA,CAAW,GAAA,CAC/C,MACF,KAAK,WAAA,CACHi8C,EAAAA,CAAUj8C,EAAAA,CAAK,QAAA,GAAa,GAAA,CAC5B,KACJ,CAAA,CAGIi8C,EAAAA,EAAYD,EAAAA,EAAoBA,EAAAA,CAAiB,MAAA,CAAS,CAAA,GAC5D5pD,EAAO,IAAA,CAAK,CACV,GAAG4N,EAAAA,CACH,QAAA,CAAUg8C,EACZ,CAAC,EAEL,CAEA,OAAO5pD,CACT,CAAA,CAEA,OAAO2pD,CAAAA,CAAuBH,EAAqB,CACrD,CAAA,CAAG,CAACA,EAAAA,CAAuBxnB,EAAU,CAAC,CAAA,CAGhC4L,EAAAA,CAAYgX,EAAAA,CAAahjB,EAAU,CAAA,CAGzCuiB,EAAAA,CAAqB,CACnB,IAAA,CAAAL,GACA,IAAA,CAAAE,EAAAA,CACA,OAAA,CAAAI,EAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,OAAA,CAAS,IACX,CAAC,CAAA,CAGDyF,mBAAAA,CAAoB7E,CAAAA,CAAK,KAAO,CAE9B,QAAU13C,CAAAA,EAAeisC,EAAAA,CAAW,YAAA,CAAa+N,EAAAA,CAAYh6C,CAAE,CAAA,CAE/D,OAAA,CAAS,CAACK,CAAAA,CAAY84B,CAAAA,GAAsB,CAC1C8gB,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,GAAI,CAAC+wB,CAAAA,CAEH,OAAO,CAAC,GAAG/wB,CAAAA,CAAM,CAAE,GAAG/H,CAAAA,CAAM,KAAA,CAAO,CAAE,CAAC,CAAA,CAIxC,IAAMi8B,GAAe3F,EAAAA,EACZA,EAAAA,CAAM,GAAA,CAAK72B,EAAAA,EACZA,EAAAA,CAAE,EAAA,GAAOq5B,CAAAA,CACJ,CACL,GAAGr5B,EAAAA,CACH,QAAA,CAAU,CAAC,GAAIA,EAAAA,CAAE,UAAY,EAAC,CAAI,CAAE,GAAGO,CAAAA,CAAM,QAAA,CAAA84B,CAAAA,CAAU,KAAA,CAAA,CAAQr5B,EAAAA,CAAE,KAAA,EAAS,CAAA,EAAK,CAAE,CAAC,CAAA,CAClF,WAAY,IACd,CAAA,CAEEA,EAAAA,CAAE,QAAA,CACG,CAAE,GAAGA,GAAG,QAAA,CAAUw8B,EAAAA,CAAYx8B,EAAAA,CAAE,QAAQ,CAAE,CAAA,CAE5CA,EACR,CAAA,CAEH,OAAOw8B,EAAAA,CAAYl0B,CAAI,CACzB,CAAC,EACH,CAAA,CAEA,UAAA,CAAY,CAACpI,CAAAA,CAAY0U,CAAAA,GAA2B,CAClDulC,EAAAA,CAAe7xC,GAAS,CACtB,IAAMo0C,EAAAA,CAAU7lB,EAAAA,EACPA,EAAAA,CAAM,GAAA,CAAKt2B,EAAAA,EACZA,EAAAA,CAAK,EAAA,GAAOL,CAAAA,CACP,CAAE,GAAGK,EAAAA,CAAM,GAAGqU,CAAQ,CAAA,CAE3BrU,EAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,EAAAA,CAAM,QAAA,CAAUm8C,EAAAA,CAAOn8C,EAAAA,CAAK,QAAQ,CAAE,CAAA,CAE7CA,EACR,CAAA,CAEH,OAAOm8C,EAAAA,CAAOp0C,CAAI,CACpB,CAAC,EACH,CAAA,CAEA,WAAapI,CAAAA,EAAe,CAC1Bi6C,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAMq0C,EAAU9lB,EAAAA,EACPA,EAAAA,CAAM,MAAA,CAAQt2B,EAAAA,EACfA,EAAAA,CAAK,EAAA,GAAOL,CAAAA,CAAW,KAAA,EACvBK,EAAAA,CAAK,QAAA,GACPA,EAAAA,CAAK,QAAA,CAAWo8C,CAAAA,CAAOp8C,EAAAA,CAAK,QAAQ,CAAA,CAAA,CAE/B,IAAA,CACR,CAAA,CAEH,OAAOo8C,CAAAA,CAAOr0C,CAAI,CACpB,CAAC,EACH,CAAA,CAEA,WAAA,CAAc0xB,CAAAA,EAAkB,CAC9BmgB,EAAAA,CAAe7xC,GAASsyB,EAAAA,CAAYtyB,CAAAA,CAAM0xB,CAAG,CAAC,EAChD,CAAA,CAEA,aAAA,CAAgB95B,CAAAA,EAAe,CAC7Bi6C,EAAAA,CAAe7xC,CAAAA,EAASwyB,EAAAA,CAAexyB,CAAAA,CAAM,CAACpI,CAAE,CAAC,CAAC,EACpD,CAAA,CAGA,SAAA,CAAW,CAACA,EAAYuwC,CAAAA,CAAiBC,CAAAA,CAAU,CAAA,GAAM,CACvDyJ,EAAAA,CAAe7xC,EAAAA,EAAS6jC,GAAW,SAAA,CAAU7jC,EAAAA,CAAMpI,CAAAA,CAAIuwC,CAAAA,CAAWC,CAAO,CAAC,EAC5E,CAAA,CAGA,gBAAA,CAAkBvE,EAAAA,CAAW,gBAAA,CAC7B,iBAAA,CAAmBA,EAAAA,CAAW,iBAAA,CAC9B,mBAAoB,CAACK,CAAAA,CAAoBC,CAAAA,GAChC,CAACN,EAAAA,CAAW,oBAAA,CAAqB+N,EAAAA,CAAY1N,CAAAA,CAAYC,CAAQ,CAAA,CAI1E,WAAA,CAAa,IAAMN,EAAAA,CAAW,YAAA,CAAa+N,EAAU,CAAA,CAErD,gBAAA,CAAmB9oD,CAAAA,EACV+6C,EAAAA,CAAW,YAAA,CAAa+N,EAAU,CAAA,CAAE,MAAA,CAAQl6C,CAAAA,EAAMA,CAAAA,CAAE,MAAA,GAAW5O,CAAM,CAAA,CAG9E,gBAAA,CAAmBioC,GACZA,CAAAA,CAIU8S,EAAAA,CAAW,YAAA,CAAa+N,EAAAA,CAAY7gB,CAAQ,CAAA,EAC5C,QAAA,EAAY,EAAC,CAHnB6gB,EAAAA,CAAW,MAAA,CAAQl6C,CAAAA,EAAM,CAACA,CAAAA,CAAE,QAAQ,CAAA,CAM/C,eAAA,CAAiB,IACRmsC,EAAAA,CAAW,YAAA,CAAa+N,EAAU,CAAA,CAAE,MAAA,CAAQl6C,CAAAA,EAAMA,CAAAA,CAAE,cAAc,CAAA,CAI3E,UAAA,CAAaH,CAAAA,EAAmB,CAC9Bs6C,EAAAA,CAAe7xC,CAAAA,EAASoxB,EAAAA,CAAYpxB,CAAAA,CAAM,CAACzI,CAAM,CAAC,CAAC,EACrD,CAAA,CAEA,WAAA,CAAcA,CAAAA,EAAmB,CAC/Bs6C,EAAAA,CAAe7xC,GAAS8xB,EAAAA,CAAa9xB,CAAAA,CAAM,CAACzI,CAAM,CAAC,CAAC,EACtD,CAAA,CAEA,QAAA,CAAU,CAACA,CAAAA,CAAgBo4B,CAAAA,GAA6B,CACtDkiB,EAAAA,CAAe7xC,GAASoyB,EAAAA,CAAUpyB,CAAAA,CAAM,CAACzI,CAAM,CAAA,CAAGo4B,CAAS,CAAC,EAC9D,CAAA,CAEA,aAAA,CAAe,MAAOoB,CAAAA,EAAqB,CAEzC,GAAM,CAAE,KAAA,CAAOujB,CAAAA,CAAU,OAAA,CAAAthB,CAAQ,CAAA,CAAIM,EAAAA,CAAcse,EAAAA,CAAY7gB,CAAQ,CAAA,CAGvE,GAAIqf,EAAAA,CAAiB,CACnB,IAAM/lD,GAAS+lD,EAAAA,CAAgB,CAAE,GAAGpd,CAAAA,CAAS,QAAA,CAAAjC,CAAS,CAAC,CAAA,CAGvD,GAAA,CADuB1mC,EAAAA,YAAkB,OAAA,CAAU,MAAMA,EAAAA,CAASA,EAAAA,IAC3C,MACrB,MAEJ,CAGAwnD,EAAAA,CAAcyC,CAAQ,CAAA,CAGlBjE,EAAAA,EACFA,EAAAA,CAAe,CAAE,GAAGrd,CAAAA,CAAS,QAAA,CAAAjC,CAAS,CAAC,EAE3C,EAGA,YAAA,CAAen5B,CAAAA,EAAe,CAG5B,IAAM7I,CAAAA,CADY80C,EAAAA,CAAW,aAAa+N,EAAU,CAAA,CAC5B,SAAA,CAAWl6C,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAOE,CAAE,CAAA,CAEpD,GAAI7I,CAAAA,GAAU,EAAA,EAAMykD,EAAAA,CAAc,OAAA,CAAS,CACzC,IAAMtC,EAAAA,CAAYniD,CAAAA,CAAQkpC,EAAAA,CAC1Bub,EAAAA,CAAc,OAAA,CAAQ,QAAA,CAAS,CAAE,GAAA,CAAKtC,EAAAA,CAAW,QAAA,CAAU,QAAS,CAAC,CAAA,CACjEuC,EAAAA,CAAkB,OAAA,EACpBA,EAAAA,CAAkB,OAAA,CAAQ,QAAA,CAAS,CAAE,GAAA,CAAKvC,EAAAA,CAAW,SAAU,QAAS,CAAC,EAE7E,CACF,CAAA,CAEA,aAAA,CAAe,CAACt5C,CAAAA,CAAYnQ,CAAAA,CAAW,GAAA,GAAS,CAIhD,CAAA,CAEA,UAAA,CAAamQ,CAAAA,EAAe,CAC1Bi6C,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAMu0C,CAAAA,CAAUhmB,EAAAA,EACPA,GAAM,GAAA,CAAKt2B,EAAAA,EACZA,EAAAA,CAAK,EAAA,GAAOL,CAAAA,CACP,CAAE,GAAGK,EAAAA,CAAM,UAAA,CAAY,IAAK,CAAA,CAEjCA,EAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,EAAAA,CAAM,QAAA,CAAUs8C,CAAAA,CAAOt8C,EAAAA,CAAK,QAAQ,CAAE,EAE7CA,EACR,CAAA,CAEH,OAAOs8C,CAAAA,CAAOv0C,CAAI,CACpB,CAAC,EACH,CAAA,CAEA,YAAA,CAAepI,CAAAA,EAAe,CAC5Bi6C,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAMw0C,CAAAA,CAAYjmB,EAAAA,EACTA,EAAAA,CAAM,GAAA,CAAKt2B,EAAAA,EACZA,EAAAA,CAAK,EAAA,GAAOL,CAAAA,CACP,CAAE,GAAGK,EAAAA,CAAM,UAAA,CAAY,KAAM,EAElCA,EAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,EAAAA,CAAM,QAAA,CAAUu8C,CAAAA,CAASv8C,EAAAA,CAAK,QAAQ,CAAE,CAAA,CAE/CA,EACR,CAAA,CAEH,OAAOu8C,EAASx0C,CAAI,CACtB,CAAC,EACH,CAAA,CAEA,SAAA,CAAW,IAAM,CACf6xC,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAMy0C,CAAAA,CAAalmB,CAAAA,EACVA,EAAM,GAAA,CAAKt2B,EAAAA,GAAU,CAC1B,GAAGA,EAAAA,CACH,UAAA,CAAY,IAAA,CACZ,QAAA,CAAUA,EAAAA,CAAK,QAAA,CAAWw8C,CAAAA,CAAUx8C,EAAAA,CAAK,QAAQ,CAAA,CAAI,MACvD,CAAA,CAAE,CAAA,CAEJ,OAAOw8C,CAAAA,CAAUz0C,CAAI,CACvB,CAAC,EACH,CAAA,CAEA,WAAA,CAAa,IAAM,CACjB6xC,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAM00C,CAAAA,CAAenmB,CAAAA,EACZA,CAAAA,CAAM,GAAA,CAAKt2B,EAAAA,GAAU,CAC1B,GAAGA,EAAAA,CACH,UAAA,CAAY,KAAA,CACZ,QAAA,CAAUA,EAAAA,CAAK,SAAWy8C,CAAAA,CAAYz8C,EAAAA,CAAK,QAAQ,CAAA,CAAI,MACzD,CAAA,CAAE,CAAA,CAEJ,OAAOy8C,CAAAA,CAAY10C,CAAI,CACzB,CAAC,EACH,CAAA,CAGA,KAAAmuC,EAAAA,CACA,IAAA,CAAAE,EAAAA,CACA,OAAA,CAAS,IAAMI,EAAAA,CACf,OAAA,CAAS,IAAMC,CAAAA,CACf,YAAA,CAAAH,EAAAA,CAIA,WAAA,CAAa,SAAY,CACvB,GAAI,CAACmF,EAAAA,CAAkB,OAAA,EAAW,CAACF,EAAAA,CAAc,OAAA,EAAW,CAACC,EAAAA,CAAkB,OAAA,CAC7E,MAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CAG7C,IAAMkB,CAAAA,CAAiBjB,EAAAA,CAAkB,OAAA,CACnCkB,CAAAA,CAAapB,EAAAA,CAAc,OAAA,CAAQ,aAAA,CAAc,oBAAoB,CAAA,CACrEnV,CAAAA,CAAiBoV,EAAAA,CAAkB,OAAA,CAGnCoB,EAAAA,CAAwBD,CAAAA,EAAY,WAAa,CAAA,CACjDE,EAAAA,CAA4BzW,CAAAA,CAAe,SAAA,CAC3C0W,EAAAA,CAAmBJ,CAAAA,CAAe,KAAA,CAAM,QAAA,CACxCK,EAAAA,CAAiBL,CAAAA,CAAe,KAAA,CAAM,MAAA,CAE5C,GAAI,CAEF,IAAMM,EAAAA,CAAkBL,CAAAA,EAAY,aAAA,CAAc,yBAAyB,CAAA,CACrEM,EAAAA,CAAc7W,CAAAA,CAAe,aAAA,CAAc,KAAK,CAAA,CAChD8W,EAAAA,CAAoBF,EAAAA,EAAiB,YAAA,EAAgBL,CAAAA,EAAY,cAAgB,GAAA,CACjFQ,EAAAA,CAAwBF,EAAAA,EAAa,qBAAA,EAAsB,CAAE,MAAA,EAAU7W,CAAAA,CAAe,YAAA,CAGtFgX,EAAAA,CAAAA,CAFUV,CAAAA,CAAe,aAAA,CAAc,iBAAiB,CAAA,EAC/B,YAAA,EAAgB,IACX,IAAA,CAAK,GAAA,CAAIQ,EAAAA,CAAmBC,EAAqB,CAAA,CAAI,EAAA,CAGrFR,IAAYA,CAAAA,CAAW,SAAA,CAAY,CAAA,CAAA,CACvCvW,CAAAA,CAAe,SAAA,CAAY,CAAA,CAC3BsW,EAAe,KAAA,CAAM,QAAA,CAAW,SAAA,CAChCA,CAAAA,CAAe,KAAA,CAAM,MAAA,CAAS,CAAA,EAAGU,EAAW,CAAA,EAAA,CAAA,CAE5C,MAAM,IAAI,OAAA,CAAQtrD,EAAAA,EAAW,UAAA,CAAWA,GAAS,GAAG,CAAC,CAAA,CAErD,IAAM0C,EAAAA,CAAS,MAAMC,EAAAA,CAAYioD,CAAAA,CAAgB,CAC/C,eAAA,CAAiB5jD,EAAAA,CAAM,SAAA,CACvB,KAAA,CAAO,CAAA,CACP,QAAS,CAAA,CAAA,CACT,OAAA,CAAS,CAAA,CAAA,CACT,cAAA,CAAiBxE,EAAAA,EAAY,CAC3B,IAAM0M,EAAAA,CAAQ,MAAA,CAAO,gBAAA,CAAiB1M,EAAO,CAAA,CACvC+oD,EAAAA,CAAS,QAAA,CAASr8C,GAAM,MAAA,CAAQ,EAAE,CAAA,CACxC,OAAQ,CAAC,KAAA,CAAMq8C,EAAM,CAAA,EAAKA,EAAAA,EAAU,EAAA,EAAOr8C,EAAAA,CAAM,QAAA,GAAa,OAChE,CACF,CAAC,CAAA,CAED,OAAO,IAAI,OAAA,CAAc,CAAClP,EAAAA,CAAS0F,EAAAA,GAAW,CAC5ChD,EAAAA,CAAO,MAAA,CAAQwB,EAAAA,EAAS,CAClBA,EAAAA,CAAMlE,EAAAA,CAAQkE,EAAI,CAAA,CACjBwB,EAAAA,CAAO,IAAI,KAAA,CAAM,mCAAmC,CAAC,EAC5D,CAAA,CAAG,WAAW,EAChB,CAAC,CACH,CAAA,OAAE,CAEAklD,EAAe,KAAA,CAAM,QAAA,CAAWI,EAAAA,CAChCJ,CAAAA,CAAe,KAAA,CAAM,MAAA,CAASK,EAAAA,CAC1BJ,CAAAA,GAAYA,CAAAA,CAAW,SAAA,CAAYC,EAAAA,CAAAA,CACvCxW,CAAAA,CAAe,SAAA,CAAYyW,GAC7B,CACF,CAAA,CAEA,WAAA,CAAa,MAAOjnD,CAAAA,EAAsB,CACxC,MAAMg2C,GAAW,WAAA,CAAY+N,EAAAA,CAAY/jD,CAAQ,EACnD,CAAA,CAEA,aAAA,CAAe,MAAOA,CAAAA,EAAsB,CAC1C,MAAMg2C,EAAAA,CAAW,aAAA,CAAc+N,EAAAA,CAAY/jD,CAAQ,EACrD,CAAA,CAEA,YAAA,CAAc,IAAMg2C,EAAAA,CAAW,YAAA,CAAa+N,EAAU,EACtD,WAAA,CAAa,IAAM/N,EAAAA,CAAW,WAAA,CAAY+N,EAAU,CAAA,CAEpD,cAAA,CAAiBpN,CAAAA,EAAiB,CAChC,IAAM+Q,CAAAA,CAAW1R,EAAAA,CAAW,cAAA,CAAeW,CAAI,EAC/CqN,EAAAA,CAAc0D,CAAQ,EACxB,CAAA,CAGA,QAAA,CAAU,IAAM3D,EAAAA,CAEhB,OAAA,CAAS,IAAM,CAEbC,EAAAA,CAAe7xC,CAAAA,EAAS,CAAC,GAAGA,CAAI,CAAC,EACnC,CAAA,CAEA,QAAA,CAAU,IAAM,CACd6xC,GAAc,EAAE,EAClB,CACF,CAAA,CAAA,CAAI,CAACD,GAAYzD,EAAAA,CAAME,EAAAA,CAAMI,EAAAA,CAASC,CAAAA,CAASH,EAAAA,CAAcx9C,EAAAA,CAAOknC,EAAS,CAAC,CAAA,CAG9E,IAAMud,EAAAA,CAAqBj2C,WAAAA,CAAaiN,CAAAA,EAAyB,CAC/DkmC,GAAW1yC,CAAAA,EACTA,CAAAA,CAAK,GAAA,CAAI9T,CAAAA,EACPA,CAAAA,CAAI,EAAA,GAAOsgB,CAAAA,CAAW,CAAE,GAAGtgB,CAAAA,CAAK,OAAA,CAAS,CAACA,CAAAA,CAAI,OAAQ,EAAIA,CAC5D,CACF,EACF,CAAA,CAAG,EAAE,CAAA,CAGCupD,EAAAA,CAAqBl2C,WAAAA,CAAY,CAACiN,CAAAA,CAAsB4qB,CAAAA,GAAqB,CACjFsb,EAAAA,CAAW1yC,GACTA,CAAAA,CAAK,GAAA,CAAI9T,EAAAA,EAAO,CACd,GAAIA,EAAAA,CAAI,KAAOsgB,CAAAA,CAAU,OAAOtgB,EAAAA,CAEhC,IAAMwpD,EAAAA,CAAOxpD,EAAAA,CAAI,UAAY,GAAA,CACvBypD,EAAAA,CAAOzpD,EAAAA,CAAI,QAAA,EAAY,GAAA,CACvB0pD,EAAAA,CAAe,IAAA,CAAK,GAAA,CAAIF,EAAAA,CAAM,IAAA,CAAK,GAAA,CAAIC,EAAAA,CAAMve,CAAQ,CAAC,EAC5D,OAAO,CAAE,GAAGlrC,EAAAA,CAAK,KAAA,CAAO0pD,EAAa,CACvC,CAAC,CACH,EACF,CAAA,CAAG,EAAE,CAAA,CAKCC,GAAmBt2C,WAAAA,CAAahI,CAAAA,EAAmB,CACvDs6C,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,IAAMs0C,CAAAA,CAAWjhB,EAAAA,CAAoBrzB,CAAAA,CAAMzI,CAAM,CAAA,CAG3Cu+C,EAAAA,CAA8B9hB,EAAAA,EAAqB,CACvD,IAAA,IAAW/7B,EAAAA,IAAQ+7B,EAAAA,CAAU,CAC3B,GAAI/7B,EAAAA,CAAK,EAAA,GAAOV,CAAAA,CAAQ,CACtBw6C,EAAAA,CAAkB,OAAA,CAAQ,GAAA,CAAIx6C,CAAAA,CAAQU,EAAAA,CAAK,YAAc,IAAI,CAAA,CAC7D,MACF,CACIA,EAAAA,CAAK,QAAA,EAAU,MAAA,EACjB69C,EAAAA,CAA2B79C,EAAAA,CAAK,QAAQ,EAE5C,CACF,CAAA,CACA,OAAA69C,GAA2BxB,CAAQ,CAAA,CAGnCrC,EAAAA,EAA4B,CAErBqC,CACT,CAAC,CAAA,CACDjhD,CAAAA,CAAO,kBAAA,GAAqBkE,CAAM,EACpC,CAAA,CAAG,CAAClE,CAAAA,CAAQ4+C,EAA2B,CAAC,CAAA,CAGlC8D,EAAAA,CAAmBx2C,WAAAA,CAAY,CAAChI,CAAAA,CAAgB+U,CAAAA,GAA2B,CAE/E,GAAIgkC,EAAAA,EACqBA,EAAAA,CAAmB/4C,CAAAA,CAAQ+U,CAAO,CAAA,GAClC,MACrB,OAMJ,IAAM0pC,EAAAA,CADcnS,EAAAA,CAAW,YAAA,CAAa+N,EAAAA,CAAYr6C,CAAM,CAAA,EAC7B,QAAA,CAE3B0+C,EAAAA,CAAc1nB,EAAAA,EACXA,EAAAA,CAAM,GAAA,CAAKt2B,IACZA,EAAAA,CAAK,EAAA,GAAOV,CAAAA,CACP,CAAE,GAAGU,EAAAA,CAAM,GAAGqU,CAAQ,CAAA,CAE3BrU,EAAAA,CAAK,QAAA,CACA,CAAE,GAAGA,EAAAA,CAAM,SAAUg+C,EAAAA,CAAWh+C,EAAAA,CAAK,QAAQ,CAAE,CAAA,CAEjDA,EACR,CAAA,CAEH45C,EAAAA,CAAcoE,EAAAA,CAAWrE,EAAU,CAAC,CAAA,CAGpC,IAAMrrC,EAAAA,CAAcs9B,GAAW,YAAA,CAAaoS,EAAAA,CAAWrE,EAAU,CAAA,CAAGr6C,CAAM,CAAA,CACtEgP,EAAAA,GACF9C,CAAAA,GAAe8C,EAAW,CAAA,CAG1BgqC,CAAAA,GAAoBhqC,EAAW,CAAA,CAG3B+F,CAAAA,CAAQ,WAAa,MAAA,EAAa0pC,EAAAA,GAAgB,MAAA,EAAa1pC,CAAAA,CAAQ,QAAA,GAAa0pC,EAAAA,EACtFjG,IAAmBx4C,CAAAA,CAAQy+C,EAAAA,CAAa1pC,CAAAA,CAAQ,QAAQ,CAAA,EAG9D,CAAA,CAAG,CAACslC,EAAAA,CAAYnuC,CAAAA,CAAc6sC,EAAAA,CAAoBC,CAAAA,CAAmBR,CAAgB,CAAC,CAAA,CAGhFmG,EAAAA,CAAmB32C,WAAAA,CAAa8xB,CAAAA,EAAsB,CACtDA,CAAAA,CAAQ,MAAA,GAAW,CAAA,GACvBwgB,GAAe7xC,CAAAA,EAASoxB,EAAAA,CAAYpxB,CAAAA,CAAMqxB,CAAO,CAAC,CAAA,CAClDh+B,CAAAA,CAAO,YAAA,GAAeg+B,CAAAA,CAAQ,CAAC,CAAE,CAAA,EACnC,CAAA,CAAG,CAACh+B,CAAM,CAAC,CAAA,CAEL8iD,EAAAA,CAAoB52C,WAAAA,CAAa8xB,CAAAA,EAAsB,CACvDA,CAAAA,CAAQ,MAAA,GAAW,CAAA,GACvBwgB,EAAAA,CAAe7xC,CAAAA,EAAS8xB,EAAAA,CAAa9xB,CAAAA,CAAMqxB,CAAO,CAAC,CAAA,CACnDh+B,CAAAA,CAAO,aAAA,GAAgBg+B,CAAAA,CAAQ,CAAC,CAAE,GACpC,CAAA,CAAG,CAACh+B,CAAM,CAAC,CAAA,CAGL+iD,EAAAA,CAAqB72C,YAAY,CAAChI,CAAAA,CAAgBq8B,CAAAA,CAA4Bra,CAAAA,GAAsB,CACxGs4B,EAAAA,CAAe7xC,EAAAA,EAAS2zB,EAAAA,CAAa3zB,EAAAA,CAAMzI,CAAAA,CAAQq8B,CAAAA,CAAara,CAAQ,CAAC,CAAA,CACzElmB,EAAO,cAAA,GAAiBkE,CAAAA,CAAQq8B,CAAAA,CAAara,CAAQ,EACvD,CAAA,CAAG,CAAClmB,CAAM,CAAC,CAAA,CAELgjD,EAAAA,CAAiB92C,WAAAA,CAAY,CAAC8xB,CAAAA,CAAmB1B,IAA6B,CAC9E0B,CAAAA,CAAQ,MAAA,GAAW,CAAA,GACvBwgB,EAAAA,CAAe7xC,CAAAA,EAASoyB,EAAAA,CAAUpyB,CAAAA,CAAMqxB,CAAAA,CAAS1B,CAAS,CAAC,CAAA,CAC3Dt8B,CAAAA,CAAO,UAAA,GAAag+B,EAAQ,CAAC,CAAA,CAAI1B,CAAS,CAAA,EAC5C,CAAA,CAAG,CAACt8B,CAAM,CAAC,CAAA,CAELijD,EAAAA,CAAwB/2C,WAAAA,CAAY,MAAO8xB,CAAAA,EAAsB,CAGrE,IAAMklB,CAAAA,CAA2B,EAAC,CAElC,IAAA,IAAWh/C,CAAAA,IAAU85B,CAAAA,CACfmf,CAAAA,EACa,MAAM,OAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAmBj5C,CAAM,CAAC,CAAA,GAChD,OAKjBg/C,CAAAA,CAAe,IAAA,CAAKh/C,CAAM,CAAA,CAIxBg/C,CAAAA,CAAe,MAAA,GAAW,CAAA,GAK1BljD,CAAAA,CAAO,iBAAA,CACTA,CAAAA,CAAO,iBAAA,CAAkBkjD,CAAc,CAAA,EAGvC1E,EAAAA,CAAe7xC,GAASsyB,EAAAA,CAAYtyB,CAAAA,CAAMu2C,CAAc,CAAC,CAAA,CACzDA,CAAAA,CAAe,OAAA,CAAQ3+C,CAAAA,EAAMvE,CAAAA,CAAO,YAAA,GAAeuE,CAAE,CAAC,CAAA,CAAA,CAIpD64C,CAAAA,EACF8F,EAAe,OAAA,CAAQ3+C,CAAAA,EAAM64C,CAAAA,CAAkB74C,CAAE,CAAC,CAAA,EAEtD,EAAG,CAACvE,CAAAA,CAAQm9C,CAAAA,CAAoBC,CAAiB,CAAC,CAAA,CAE5C+F,GAAsBj3C,WAAAA,CAAa8xB,CAAAA,EAAsB,CAC7DwgB,EAAAA,CAAe7xC,CAAAA,EAASwyB,EAAAA,CAAexyB,CAAAA,CAAMqxB,CAAO,CAAC,CAAA,CACrDA,CAAAA,CAAQ,OAAA,CAAQz5B,CAAAA,EAAMvE,CAAAA,CAAO,kBAAkBuE,CAAE,CAAC,EACpD,CAAA,CAAG,CAACvE,CAAM,CAAC,CAAA,CAELojD,EAAAA,CAAmBl3C,WAAAA,CAAY,CAACuzB,CAAAA,CAAqBnD,CAAAA,GAAiC,CAC1FkiB,GAAe7xC,CAAAA,EAAS,CACtB,GAAM,CAAE,KAAA,CAAAuuB,EAAAA,CAAO,OAAA,CAAAyE,EAAQ,CAAA,CAAIH,EAAAA,CAAW7yB,CAAAA,CAAM8yB,CAAAA,CAAanD,CAAS,CAAA,CAGlE,OAAIygB,EAAAA,EACqBA,EAAAA,CAAgBpd,EAAO,CAAA,GACvB,KAAA,CACdhzB,CAAAA,EAIX3M,EAAO,YAAA,GAAe2/B,EAAAA,CAAQ,QAAA,CAAUA,EAAAA,CAAQ,QAAA,EAAY,CAAC,EAG7Dqd,EAAAA,GAAiBrd,EAAO,CAAA,CAEjBzE,EAAAA,CACT,CAAC,EACH,CAAA,CAAG,CAACl7B,CAAAA,CAAQ+8C,EAAAA,CAAiBC,EAAc,CAAC,CAAA,CAEtCqG,EAAAA,CAAmBn3C,YAAY,CAAChI,CAAAA,CAAgB67B,CAAAA,GAAoB,CACxEye,EAAAA,CAAe7xC,CAAAA,EAASmzB,EAAAA,CAAWnzB,CAAAA,CAAMzI,CAAAA,CAAQ67B,CAAO,CAAC,CAAA,CACzD//B,CAAAA,CAAO,YAAA,GAAekE,EAAQ67B,CAAO,EACvC,CAAA,CAAG,CAAC//B,CAAM,CAAC,CAAA,CAELsjD,EAAAA,CAAsBp3C,WAAAA,CAAag0B,CAAAA,EAAyB,CAChEse,EAAAA,CAAe7xC,CAAAA,EAAS,CACtB,GAAM,CAAE,KAAA,CAAAuuB,CAAM,CAAA,CAAI+E,EAAAA,CAActzB,CAAAA,CAAMuzB,CAAY,CAAA,CAClD,OAAAlgC,CAAAA,CAAO,YAAA,GAAekgC,CAAAA,CAAc,CAAC,EAC9BhF,CACT,CAAC,EACH,CAAA,CAAG,CAACl7B,CAAM,CAAC,CAAA,CAKLujD,EAAAA,CAAuBr3C,WAAAA,CAAY,CAACtH,CAAAA,CAAY4+C,CAAAA,CAAgBC,CAAAA,GAAiB,CAErF,IAAMhY,EAAAA,CAAY7mC,CAAAA,CAAK,SAAA,CACnB,IAAA,CAAK,KAAA,CAAA,CAAO4+C,CAAAA,CAAS,OAAA,EAAQ,CAAI5+C,CAAAA,CAAK,SAAA,CAAU,OAAA,EAAQ,EAAM,KAAoB,EAClF,CAAA,CAEEsP,EAAAA,CAAmBgnB,EAAAA,EAChBA,EAAAA,CAAM,GAAA,CAAK72B,EAAAA,EACZA,EAAAA,CAAE,EAAA,GAAOO,CAAAA,CAAK,EAAA,CAGT,CACL,GAAGP,EAAAA,CACH,SAAA,CAAWm/C,EACX,OAAA,CAASC,CAAAA,CACT,GAAI7+C,CAAAA,CAAK,QAAA,EAAY,CAAE,QAAA,CAAUA,CAAAA,CAAK,QAAS,CACjD,CAAA,CAEEP,EAAAA,CAAE,QAAA,CACG,CAAE,GAAGA,EAAAA,CAAG,QAAA,CAAU6P,EAAAA,CAAgB7P,EAAAA,CAAE,QAAQ,CAAE,CAAA,CAEhDA,EACR,CAAA,CAIC0vC,EAAAA,CAAe7/B,EAAAA,CAAgBqqC,EAAU,CAAA,CAI7CxK,EAAAA,CAAevD,GAAW,sBAAA,CAAuBuD,EAAAA,CAAcnvC,CAAAA,CAAK,EAAA,CAAI6mC,EAAS,CAAA,CAEjF+S,EAAAA,CAAczK,EAAY,CAAA,CAG1B,IAAM7gC,EAAAA,CAAc,CAAE,GAAGtO,CAAAA,CAAM,UAAW4+C,CAAAA,CAAU,OAAA,CAASC,CAAO,CAAA,CACpErzC,CAAAA,GAAe8C,EAAW,EAC5B,CAAA,CAAG,CAACqrC,EAAAA,CAAYnuC,CAAY,CAAC,CAAA,CAIvBszC,EAAAA,CAAwBx3C,YAAY,CAACtH,CAAAA,CAAYtI,CAAAA,GAA4B,CAEjF8kC,CAAAA,GAAoBx8B,CAAAA,CAAMtI,CAAK,CAAA,CAG/BomC,CAAAA,CAAe,CACb,MAAA,CAAQ,IAAA,CACR,CAAA,CAAGpmC,EAAM,OAAA,CACT,CAAA,CAAGA,CAAAA,CAAM,OAAA,CACT,IAAA,CAAAsI,CACF,CAAC,EACH,CAAA,CAAG,CAACw8B,CAAiB,CAAC,CAAA,CAGhBuiB,EAAAA,CAAkBz3C,YAAY,CAACtH,CAAAA,CAAYkwC,CAAAA,GAAoB,CAEnE,IAAMf,CAAAA,CAAevD,EAAAA,CAAW,SAAA,CAAU+N,EAAAA,CAAY35C,CAAAA,CAAK,EAAA,CAAIkwC,CAAS,CAAA,CACxE0J,EAAAA,CAAczK,CAAY,CAAA,CAG1BrR,CAAAA,CAAe,CAAE,MAAA,CAAQ,KAAA,CAAO,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,IAAA,CAAM,IAAK,CAAC,EAC1D,CAAA,CAAG,CAAC6b,EAAU,CAAC,CAAA,CAMTqF,EAAAA,CAA6B13C,WAAAA,CAAatH,CAAAA,EAAe,CAG7D,IAAMi/C,CAAAA,CAAcrT,EAAAA,CAAW,YAAA,CAAa+N,EAAAA,CAAY35C,CAAAA,CAAK,EAAE,GAAKA,CAAAA,CAGpEu8B,CAAAA,GAAiB0iB,CAAW,CAAA,CAIvBlH,CAAAA,EACHwB,EAAAA,CAAe0F,CAAW,EAE9B,CAAA,CAAG,CAACtF,EAAAA,CAAYpd,CAAAA,CAAgBwb,CAAU,CAAC,EAGrCl6C,EAAAA,CAAgCyJ,WAAAA,CAAY,CAAC2kC,CAAAA,CAAoBC,CAAAA,CAAkB5V,CAAAA,GAA2B,CAElH,IAAMr4B,EAAAA,CAAgB,IAAI,GAAA,CAEpBkuC,EAAAA,CAAYpQ,EAAAA,EAAqB,CACrCA,GAAS,OAAA,CAAQ/7B,EAAAA,EAAQ,CACnBA,EAAAA,CAAK,YAAA,EACP/B,EAAAA,CAAc,GAAA,CAAI+B,EAAAA,CAAK,EAAA,CAAIA,EAAAA,CAAK,YAAY,CAAA,CAE1CA,EAAAA,CAAK,QAAA,EACPmsC,GAASnsC,EAAAA,CAAK,QAAQ,EAE1B,CAAC,EACH,CAAA,CAEAmsC,GAAS7V,CAAK,CAAA,CAGd,IAAMj4B,EAAAA,CAAeJ,EAAAA,CAAc,GAAA,CAAIiuC,CAAQ,CAAA,EAAK,EAAC,CACrDjuC,EAAAA,CAAc,GAAA,CAAIiuC,CAAAA,CAAU,CAAC,GAAG7tC,EAAAA,CAAc4tC,CAAU,CAAC,CAAA,CAGzD,IAAM3tC,EAAAA,CAAU,IAAI,GAAA,CACdC,EAAAA,CAAW,IAAI,GAAA,CAEfC,EAAAA,CAAYc,EAAAA,EAA4B,CAC5C,GAAI,CAAChB,EAAAA,CAAQ,GAAA,CAAIgB,EAAM,CAAA,CAAG,CACxBhB,GAAQ,GAAA,CAAIgB,EAAM,CAAA,CAClBf,EAAAA,CAAS,GAAA,CAAIe,EAAM,CAAA,CAEnB,IAAMpB,EAAAA,CAAOD,EAAAA,CAAc,GAAA,CAAIqB,EAAM,CAAA,EAAK,GAC1C,IAAA,IAAWZ,EAAAA,IAASR,EAAAA,CAAM,CACxB,GAAI,CAACI,EAAAA,CAAQ,GAAA,CAAII,EAAK,CAAA,EAAKF,EAAAA,CAASE,EAAK,CAAA,CACvC,OAAO,MACF,GAAIH,EAAAA,CAAS,GAAA,CAAIG,EAAK,CAAA,CAC3B,OAAO,KAEX,CACF,CACA,OAAAH,EAAAA,CAAS,MAAA,CAAOe,EAAM,CAAA,CACf,KACT,CAAA,CAEA,OAAOd,EAAAA,CAAS0tC,CAAQ,CAC1B,CAAA,CAAG,EAAE,CAAA,CAGCgT,EAAAA,CAAyB53C,WAAAA,CAAY,CAAC63C,CAAAA,CAAgBjT,CAAAA,GAAqB,CAE/E,GAAIruC,EAAAA,CAA8BshD,CAAAA,CAAS,EAAA,CAAIjT,CAAAA,CAAUyN,EAAU,CAAA,CAAG,CAEpE,OAAA,CAAQ,IAAA,CAAK,8DAA8D,CAAA,CAC3E,KAAA,CAAM,CAAA;;AAAA,kDAAA,CAAmI,EACzI,MACF,CAEA,IAAMyF,CAAAA,CAA0B9oB,EAAAA,EACvBA,GAAM,GAAA,CAAK72B,EAAAA,EAAM,CACtB,GAAIA,EAAAA,CAAE,KAAOysC,CAAAA,CAAU,CACrB,IAAMrtC,EAAAA,CAAeY,EAAAA,CAAE,cAAgB,EAAC,CAExC,GAAI,CAACZ,EAAAA,CAAa,SAASsgD,CAAAA,CAAS,EAAE,EACpC,OAAO,CAAE,GAAG1/C,EAAAA,CAAG,YAAA,CAAc,CAAC,GAAGZ,EAAAA,CAAcsgD,EAAS,EAAE,CAAE,CAEhE,CACA,OAAI1/C,GAAE,QAAA,CACG,CAAE,GAAGA,EAAAA,CAAG,QAAA,CAAU2/C,EAAuB3/C,EAAAA,CAAE,QAAQ,CAAE,CAAA,CAEvDA,EACT,CAAC,CAAA,CAEHm6C,EAAAA,CAAcwF,EAAuBzF,EAAU,CAAC,EAChD5V,EAAAA,GAAqBob,CAAAA,CAAS,GAAIjT,CAAQ,EAC5C,EAAG,CAACyN,EAAAA,CAAY5V,GAAoBlmC,EAA6B,CAAC,EAG5DwhD,EAAAA,CAAyB/3C,WAAAA,CAAY,CAAChI,CAAAA,CAAgBggD,CAAAA,GAAyB,CACnF,IAAMC,CAAAA,CAAwBjpB,IACrBA,EAAAA,CAAM,GAAA,CAAK72B,IAAM,CACtB,GAAIA,GAAE,EAAA,GAAOH,CAAAA,EAAUG,GAAE,YAAA,CAAc,CACrC,IAAMZ,EAAAA,CAAeY,GAAE,YAAA,CAAa,MAAA,CAAQf,IAAUA,EAAAA,GAAU4gD,CAAY,EAC5E,OAAO,CAAE,GAAG7/C,EAAAA,CAAG,YAAA,CAAAZ,EAAa,CAC9B,CACA,OAAIY,EAAAA,CAAE,QAAA,CACG,CAAE,GAAGA,EAAAA,CAAG,SAAU8/C,CAAAA,CAAqB9/C,EAAAA,CAAE,QAAQ,CAAE,CAAA,CAErDA,EACT,CAAC,CAAA,CAEHm6C,GAAc2F,CAAAA,CAAqB5F,EAAU,CAAC,CAAA,CAC9CjJ,EAAAA,GAAqBpxC,EAAQggD,CAAY,EAC3C,EAAG,CAAC3F,EAAAA,CAAYjJ,EAAkB,CAAC,CAAA,CAG7B,CAAE,SAAA,CAAAn1C,EAAAA,CAAW,QAAAC,EAAQ,CAAA,CAAIyZ,QAAQ,IAAM,CAE3C,IAAM03B,CAAAA,CAAiBgN,EAAAA,CAAW,OAAOl6C,EAAAA,EAAKA,EAAAA,CAAE,WAAaA,EAAAA,CAAE,OAAO,EAEtE,GAAIktC,CAAAA,CAAe,SAAW,CAAA,CAAG,CAE/B,IAAM7vC,EAAAA,CAAQ,IAAI,KACZL,EAAAA,CAAQ,IAAI,KAAKK,EAAK,CAAA,CAC5BL,GAAM,OAAA,CAAQA,EAAAA,CAAM,SAAQ,CAAI,EAAE,EAClC,IAAMC,EAAAA,CAAM,IAAI,IAAA,CAAKI,EAAK,EAC1B,OAAAJ,EAAAA,CAAI,OAAA,CAAQA,EAAAA,CAAI,SAAQ,CAAI,EAAE,EACvB,CAAE,SAAA,CAAWD,GAAO,OAAA,CAASC,EAAI,CAC1C,CAEA,IAAM+qC,EAAWkF,CAAAA,CAAe,OAAA,CAASltC,IAAM,CAACA,EAAAA,CAAE,UAAWA,EAAAA,CAAE,OAAO,CAAC,CAAA,CAAE,MAAA,CAAQtB,IAAiBA,EAAAA,GAAM,MAAS,EAC3GqhD,CAAAA,CAAU,IAAI,KAAK,IAAA,CAAK,GAAA,CAAI,GAAG/X,CAAAA,CAAS,GAAA,CAAKtpC,IAAMA,EAAAA,CAAE,OAAA,EAAS,CAAC,CAAC,EAChEshD,EAAAA,CAAU,IAAI,KAAK,IAAA,CAAK,GAAA,CAAI,GAAGhY,CAAAA,CAAS,GAAA,CAAKtpC,IAAMA,EAAAA,CAAE,OAAA,EAAS,CAAC,CAAC,EAEhEg3B,EAAAA,CAAUxB,EAAAA,GAAc,MAAQ,CAAA,CAAIA,EAAAA,GAAc,OAAS,EAAA,CAAK,EAAA,CACtE,OAAA6rB,CAAAA,CAAQ,OAAA,CAAQA,EAAQ,OAAA,EAAQ,CAAIrqB,EAAO,CAAA,CAC3CsqB,EAAAA,CAAQ,QAAQA,EAAAA,CAAQ,OAAA,GAAYtqB,EAAO,CAAA,CAEpC,CAAE,SAAA,CAAWqqB,CAAAA,CAAS,QAASC,EAAQ,CAChD,EAAG,CAAC9F,EAAAA,CAAYhmB,EAAS,CAAC,CAAA,CAyBpB+rB,EAAAA,CAAkBp4C,WAAAA,CAAY,SAAY,CAC9C,GAAI,CAACm0C,EAAAA,CAAkB,OAAA,EAAW,CAACF,EAAAA,CAAc,OAAA,EAAW,CAACC,EAAAA,CAAkB,OAAA,CAAS,OAGxF,MAAM,IAAI,QAAQ1pD,EAAAA,EAAW,UAAA,CAAWA,GAAS,GAAG,CAAC,EAErD,IAAM4qD,CAAAA,CAAiBjB,GAAkB,OAAA,CACnCkB,CAAAA,CAAapB,GAAc,OAAA,CAAQ,aAAA,CAAc,oBAAoB,CAAA,CACrEnV,CAAAA,CAAiBoV,GAAkB,OAAA,CAGnCoB,EAAAA,CAAwBD,GAAY,SAAA,EAAa,CAAA,CACjDgD,GAAyBhD,CAAAA,EAAY,UAAA,EAAc,EACnDE,EAAAA,CAA4BzW,CAAAA,CAAe,UAC3CwZ,EAAAA,CAA6BxZ,CAAAA,CAAe,WAC5C0W,EAAAA,CAAmBJ,CAAAA,CAAe,MAAM,QAAA,CACxCK,EAAAA,CAAiBL,EAAe,KAAA,CAAM,MAAA,CACtCmD,GAAuBlD,CAAAA,EAAY,KAAA,CAAM,UAAY,EAAA,CACrDmD,EAAAA,CAA2B1Z,EAAe,KAAA,CAAM,QAAA,CAGhD2Z,GAAyBrD,CAAAA,CAAe,KAAA,CAAM,MAC9CsD,EAAAA,CAAwB5Z,CAAAA,CAAe,MAAM,KAAA,CAEnD,GAAI,CAEF,IAAM4W,EAAAA,CAAkBL,GAAY,aAAA,CAAc,yBAAyB,EACrEM,EAAAA,CAAc7W,CAAAA,CAAe,cAAc,KAAK,CAAA,CAGhD6Z,GAAYhD,EAAAA,EAAa,YAAA,CAAa,QAAQ,CAAA,CAChD,QAAA,CAASA,EAAAA,CAAY,YAAA,CAAa,QAAQ,CAAA,CAAI,EAAE,EAChDA,EAAAA,EAAa,qBAAA,GAAwB,MAAA,EAAU,CAAA,CAE7CC,GAAoBF,EAAAA,EAAiB,YAAA,EAAgBL,GAAY,YAAA,EAAgB,GAAA,CACjFQ,GAAwB,IAAA,CAAK,GAAA,CAAI8C,GAAW7Z,CAAAA,CAAe,YAAY,EAGvE8Z,EAAAA,CAAmBjD,EAAAA,EAAa,aAAa,OAAO,CAAA,CACtD,SAASA,EAAAA,CAAY,YAAA,CAAa,OAAO,CAAA,CAAI,EAAE,EAC/CA,EAAAA,EAAa,qBAAA,GAAwB,KAAA,EAAS7W,CAAAA,CAAe,YAI3D+Z,EAAAA,CADUzD,CAAAA,CAAe,cAAc,iBAAiB,CAAA,EAC/B,cAAgB,EAAA,CAGzCld,EAAAA,CAAgB,KAAK,GAAA,CAAI0d,EAAAA,CAAmBC,GAAuB8C,EAAS,CAAA,CAC5E7C,GAAc+C,EAAAA,CAAgB3gB,EAAAA,CAAgB,GAI9C4gB,EAAAA,CAAAA,CADYzD,CAAAA,EAAY,aAAe,GAAA,EACduD,EAAAA,CAAmB,GAG9CvD,CAAAA,GACFA,CAAAA,CAAW,UAAY,CAAA,CACvBA,CAAAA,CAAW,WAAa,CAAA,CAAA,CAE1BvW,CAAAA,CAAe,UAAY,CAAA,CAC3BA,CAAAA,CAAe,WAAa,CAAA,CAG5BsW,CAAAA,CAAe,MAAM,QAAA,CAAW,SAAA,CAChCA,EAAe,KAAA,CAAM,MAAA,CAAS,GAAGU,EAAW,CAAA,EAAA,CAAA,CAC5CV,EAAe,KAAA,CAAM,KAAA,CAAQ,GAAG0D,EAAU,CAAA,EAAA,CAAA,CACtCzD,CAAAA,GACFA,CAAAA,CAAW,MAAM,QAAA,CAAW,SAAA,CAC5BA,EAAW,KAAA,CAAM,MAAA,CAAS,GAAGnd,EAAAA,CAAgB,EAAE,MAEjD4G,CAAAA,CAAe,KAAA,CAAM,SAAW,SAAA,CAChCA,CAAAA,CAAe,MAAM,MAAA,CAAS,CAAA,EAAG5G,GAAgB,EAAE,CAAA,EAAA,CAAA,CACnD4G,EAAe,KAAA,CAAM,KAAA,CAAQ,GAAG8Z,EAAAA,CAAmB,EAAE,KAGrD,MAAM,IAAI,QAAQpuD,EAAAA,EAAW,UAAA,CAAWA,GAAS,GAAG,CAAC,EAGrD,IAAM0C,EAAAA,CAAS,MAAMC,EAAAA,CAAYioD,CAAAA,CAAgB,CAC/C,eAAA,CAAiB5jD,EAAAA,CAAM,UACvB,KAAA,CAAO,CAAA,CACP,QAAS,CAAA,CAAA,CACT,OAAA,CAAS,GACT,UAAA,CAAY,CAAA,CAAA,CACZ,MAAOsnD,EAAAA,CACP,MAAA,CAAQhD,GACR,WAAA,CAAagD,EAAAA,CAAa,IAC1B,YAAA,CAAchD,EAAAA,CAAc,IAC5B,OAAA,CAAS,CAAA,CACT,QAAS,CAAA,CAET,cAAA,CAAiB9oD,IAAY,CAE3B,IAAM0M,GAAQ,MAAA,CAAO,gBAAA,CAAiB1M,EAAO,CAAA,CACvC+oD,EAAAA,CAAS,SAASr8C,EAAAA,CAAM,MAAA,CAAQ,EAAE,CAAA,CAKxC,OAJI,CAAC,KAAA,CAAMq8C,EAAM,GAAKA,EAAAA,EAAU,EAAA,EAI5Br8C,GAAM,QAAA,GAAa,OAIzB,CACF,CAAC,EAGK9K,EAAAA,CAAO,QAAA,CAAS,cAAc,GAAG,CAAA,CACvCA,GAAK,QAAA,CAAW,CAAA,YAAA,EAAe,IAAI,IAAA,EAAK,CAAE,aAAY,CAAE,KAAA,CAAM,EAAG,EAAE,CAAC,OACpEA,EAAAA,CAAK,IAAA,CAAO1B,GAAO,SAAA,CAAU,WAAW,EACxC0B,EAAAA,CAAK,KAAA,GAEP,CAAA,OAAE,CAEAwmD,EAAe,KAAA,CAAM,QAAA,CAAWI,GAChCJ,CAAAA,CAAe,KAAA,CAAM,OAASK,EAAAA,CAC9BL,CAAAA,CAAe,MAAM,KAAA,CAAQqD,EAAAA,CACzBpD,IACFA,CAAAA,CAAW,KAAA,CAAM,SAAWkD,EAAAA,CAC5BlD,CAAAA,CAAW,MAAM,MAAA,CAAS,EAAA,CAC1BA,EAAW,SAAA,CAAYC,EAAAA,CACvBD,EAAW,UAAA,CAAagD,EAAAA,CAAAA,CAE1BvZ,EAAe,KAAA,CAAM,QAAA,CAAW0Z,GAChC1Z,CAAAA,CAAe,KAAA,CAAM,OAAS,EAAA,CAC9BA,CAAAA,CAAe,MAAM,KAAA,CAAQ4Z,EAAAA,CAC7B5Z,EAAe,SAAA,CAAYyW,EAAAA,CAC3BzW,EAAe,UAAA,CAAawZ,GAC9B,CACF,CAAA,CAAG,CAAC9mD,EAAK,CAAC,CAAA,CAEJunD,GAAkB/4C,WAAAA,CAAY,SAAY,CAC9C,MAAMskC,EAAAA,CAAW,YAAY+N,EAAU,EACzC,EAAG,CAACA,EAAU,CAAC,CAAA,CAET2G,EAAAA,CAAoBh5C,YAAY,SAAY,CAChD,MAAMskC,EAAAA,CAAW,aAAA,CAAc+N,EAAU,EAC3C,CAAA,CAAG,CAACA,EAAU,CAAC,EAET4G,EAAAA,CAAkBj5C,WAAAA,CAAY,IAAM,CACxC,IAAMk5C,EAAM5U,EAAAA,CAAW,WAAA,CAAY+N,EAAU,CAAA,CACvC3jD,CAAAA,CAAO,IAAI,IAAA,CAAK,CAACwqD,CAAG,CAAA,CAAG,CAAE,KAAM,yBAA0B,CAAC,EAC1DtqD,CAAAA,CAAO,QAAA,CAAS,cAAc,GAAG,CAAA,CACvCA,EAAK,IAAA,CAAO,GAAA,CAAI,gBAAgBF,CAAI,CAAA,CACpCE,EAAK,QAAA,CAAW,iBAAA,CAChBA,EAAK,KAAA,EAAM,CACX,IAAI,eAAA,CAAgBA,CAAAA,CAAK,IAAI,EAC/B,CAAA,CAAG,CAACyjD,EAAU,CAAC,EAET8G,EAAAA,CAAmBn5C,WAAAA,CAAY,IAAM,CACzC,IAAMilC,EAAOX,EAAAA,CAAW,YAAA,CAAa+N,EAAU,CAAA,CACzC3jD,CAAAA,CAAO,IAAI,IAAA,CAAK,CAACu2C,CAAI,CAAA,CAAG,CAAE,KAAM,iCAAkC,CAAC,EACnEr2C,CAAAA,CAAO,QAAA,CAAS,cAAc,GAAG,CAAA,CACvCA,EAAK,IAAA,CAAO,GAAA,CAAI,gBAAgBF,CAAI,CAAA,CACpCE,CAAAA,CAAK,QAAA,CAAW,mBAChBA,CAAAA,CAAK,KAAA,GACL,GAAA,CAAI,eAAA,CAAgBA,EAAK,IAAI,EAC/B,EAAG,CAACyjD,EAAU,CAAC,CAAA,CAET+G,EAAAA,CAAwBp5C,YAAY,IAAM,CAC9CskC,GAAW,iBAAA,CAAkB+N,EAAAA,CAAY,gBAAiB,aAAa,EACzE,EAAG,CAACA,EAAU,CAAC,CAAA,CAGThU,EAAAA,CAAmB7qC,GAAwB,CAC/CA,CAAAA,CAAE,gBAAe,CACjBq+C,EAAAA,CAAc,IAAI,EACpB,CAAA,CAIMwH,GAAkB5mD,MAAAA,CAAO,KAAK,EAG9B,CAAC6mD,EAAAA,CAAWC,EAAY,CAAA,CAAIpoD,QAAAA,CAAS,KAAK,CAAA,CAC1CqoD,EAAAA,CAAc/mD,OAAO,CAAE,CAAA,CAAG,EAAG,CAAA,CAAG,CAAA,CAAG,WAAY,CAAA,CAAG,SAAA,CAAW,CAAE,CAAC,CAAA,CAEtEnB,UAAU,IAAM,CACd,IAAMwtC,CAAAA,CAAiBoV,EAAAA,CAAkB,QACnCmB,CAAAA,CAAapB,EAAAA,CAAc,SAAS,aAAA,CAAc,oBAAoB,EAE5E,GAAI,CAACnV,GAAkB,CAACuW,CAAAA,CAAY,OAGpC,IAAMoE,CAAAA,CAAuB,IAAM,CACjC,GAAIJ,GAAgB,OAAA,CAAS,OAC7BA,GAAgB,OAAA,CAAU,IAAA,CAC1B,IAAMK,EAAAA,CAAU5a,EAAe,SAAA,CAC/B8S,EAAAA,CAAa8H,EAAO,CAAA,CACpBrE,CAAAA,CAAW,UAAYqE,EAAAA,CACvB,qBAAA,CAAsB,IAAM,CAC1BL,EAAAA,CAAgB,QAAU,MAC5B,CAAC,EACH,CAAA,CAEMM,EAAAA,CAAmB,IAAM,CAC7B,GAAIN,GAAgB,OAAA,CAAS,OAC7BA,GAAgB,OAAA,CAAU,IAAA,CAC1B,IAAMK,EAAAA,CAAUrE,CAAAA,CAAW,UAC3BzD,EAAAA,CAAa8H,EAAO,EACpB5a,CAAAA,CAAe,SAAA,CAAY4a,GAC3B,qBAAA,CAAsB,IAAM,CAC1BL,EAAAA,CAAgB,OAAA,CAAU,MAC5B,CAAC,EACH,EAEM1hB,EAAAA,CAAmBnkC,EAAAA,EAAkB,CAEzC,GAAIwpC,EAAAA,EAAcqY,EAAY,CAG5B,IAAMuE,GADgBvE,CAAAA,CAAW,aAAA,EAAe,uBAAsB,EACjC,IAAA,EAAQ,EACvCxd,EAAAA,CAAWrkC,EAAAA,CAAE,QAAUomD,EAAAA,CAGvBjP,EAAAA,CAAW,IACXmJ,EAAAA,CAAeV,EAAAA,CAAsBO,GACrCI,EAAAA,CAAc,MAAA,CAAO,WAAaH,EAAAA,CAClCiG,EAAAA,CAAW,KAAK,GAAA,CAAI/F,EAAAA,CAAcC,EAAW,CAAA,CAE/Clc,EAAAA,EAAY8S,IAAY9S,EAAAA,EAAYgiB,EAAAA,EACtC9H,GAAqBla,EAAQ,EAEjC,CAGA,GAAIyhB,EAAAA,EAAaxa,EAAgB,CAC/B,IAAMlH,EAAAA,CAASpkC,EAAAA,CAAE,QAAUgmD,EAAAA,CAAY,OAAA,CAAQ,EACzCM,EAAAA,CAAStmD,EAAAA,CAAE,QAAUgmD,EAAAA,CAAY,OAAA,CAAQ,EAE/C1a,CAAAA,CAAe,UAAA,CAAa0a,GAAY,OAAA,CAAQ,UAAA,CAAa5hB,GAC7DkH,CAAAA,CAAe,SAAA,CAAY0a,GAAY,OAAA,CAAQ,SAAA,CAAYM,GAC7D,CACF,CAAA,CAEMhiB,GAAgB,IAAM,CAC1B+Z,GAAc,KAAK,CAAA,CACnB0H,GAAa,KAAK,EACpB,EAGMQ,EAAAA,CAA2BvmD,EAAAA,EAAkB,CAEjD,GAAIA,EAAAA,CAAE,SAAW,CAAA,CAAG,OAGpB,IAAMjC,EAAAA,CAASiC,EAAAA,CAAE,OACKjC,EAAAA,CAAO,OAAA,CAAQ,iBAAiB,CAAA,EACjCA,EAAAA,CAAO,QAAQ,wBAAwB,CAAA,EACvCA,GAAO,OAAA,CAAQ,QAAQ,GACvBA,EAAAA,CAAO,OAAA,CAAQ,iBAAiB,CAAA,EAChCA,EAAAA,CAAO,UAAY,MAAA,EAAUA,EAAAA,CAAO,aAAa,gBAAgB,CAAA,GAAM,SAK5FgoD,EAAAA,CAAa,IAAI,EACjBC,EAAAA,CAAY,OAAA,CAAU,CACpB,CAAA,CAAGhmD,EAAAA,CAAE,QACL,CAAA,CAAGA,EAAAA,CAAE,QACL,UAAA,CAAYsrC,CAAAA,CAAe,WAC3B,SAAA,CAAWA,CAAAA,CAAe,SAC5B,CAAA,CAGAtrC,EAAAA,CAAE,gBAAe,EACnB,CAAA,CAEA,OAAAsrC,CAAAA,CAAe,gBAAA,CAAiB,SAAU2a,CAAoB,CAAA,CAC9DpE,EAAW,gBAAA,CAAiB,QAAA,CAAUsE,EAAgB,CAAA,CACtD7a,CAAAA,CAAe,iBAAiB,WAAA,CAAaib,EAAuB,EACpE,QAAA,CAAS,gBAAA,CAAiB,YAAapiB,EAAe,CAAA,CACtD,SAAS,gBAAA,CAAiB,SAAA,CAAWG,EAAa,CAAA,CAE3C,IAAM,CACXgH,CAAAA,CAAe,mBAAA,CAAoB,SAAU2a,CAAoB,CAAA,CACjEpE,EAAW,mBAAA,CAAoB,QAAA,CAAUsE,EAAgB,CAAA,CACzD7a,CAAAA,CAAe,oBAAoB,WAAA,CAAaib,EAAuB,EACvE,QAAA,CAAS,mBAAA,CAAoB,YAAapiB,EAAe,CAAA,CACzD,SAAS,mBAAA,CAAoB,SAAA,CAAWG,EAAa,EACvD,CACF,EAAG,CAACkF,EAAAA,CAAYsc,GAAWlG,EAAmB,CAAC,EAI/C,IAAM4G,EAAAA,CAAqBvnD,OAAO,KAAK,CAAA,CACjCwnD,GAAsBxnD,MAAAA,CAAoB,IAAI,EAGpD,OAAAynD,eAAAA,CAAgB,IAAM,CAIpB,GAFIF,GAAmB,OAAA,EACnB3H,EAAAA,CAAW,SAAW,CAAA,EACtB,CAAC6B,GAAkB,OAAA,CAAS,OAGhC8F,GAAmB,OAAA,CAAU,IAAA,CAC7BC,GAAoB,OAAA,CAAUhmD,EAAAA,CAE9B,IAAM6qC,CAAAA,CAAiBoV,EAAAA,CAAkB,QACnC1+C,CAAAA,CAAQ,IAAI,IAAA,CACZ6mC,CAAAA,CAAWhQ,KAAc,KAAA,CAAQ,EAAA,CAAKA,KAAc,MAAA,CAAS,EAAA,CAAK,EAClEqe,EAAAA,CAAAA,CAAiBl1C,CAAAA,CAAM,SAAQ,CAAIvB,EAAAA,CAAU,SAAQ,GAAM,GAAA,CAAO,GAAK,EAAA,CAAK,EAAA,CAAA,CAG5EnB,GAAgBgsC,CAAAA,CAAe,WAAA,CAE/Bqb,GADgBzP,EAAAA,CAAgBrO,CAAAA,CAAW9P,GAChBz5B,EAAAA,CAAgB,CAAA,CAG7C43C,IAAiB,CAAA,EAAK53C,EAAAA,CAAgB,IACxCgsC,CAAAA,CAAe,UAAA,CAAa,KAAK,GAAA,CAAI,CAAA,CAAGqb,EAAO,CAAA,EAEnD,CAAA,CAAG,CAAC9H,EAAAA,CAAW,MAAA,CAAQp+C,GAAWo4B,EAAAA,CAAWE,EAAI,CAAC,CAAA,CAGhD17B,GAAAA,CAACo6B,GAAiB,QAAA,CAAjB,CAA0B,MAAOta,CAAAA,CAClC,QAAA,CAAA9f,IAACR,EAAAA,CAAkB,QAAA,CAAlB,CAA2B,KAAA,CAAO+jD,CAAAA,CACnC,SAAAriD,IAAAA,CAAC,KAAA,CAAA,CACC,IAAKoiD,EAAAA,CACL,SAAA,CAAU,8BACV,KAAA,CAAO,CACL,gBAAiB3iD,EAAAA,CAAM,SAAA,CACvB,WAAY,mBAAA,CACZ,SAAA,CAAW,EAEX,GAAIsC,CAAAA,CAAO,mBAAqB,CAC9B,cAAA,CAAgB,OAChB,cAAA,CAAgB,MAClB,CACF,CAAA,CAGA,QAAA,CAAA,CAAAjD,IAACu7B,EAAAA,CAAA,CACC,MAAO56B,EAAAA,CACP,SAAA,CAAW66B,EAAAA,CACX,iBAAA,CAAmBglB,GACnB,IAAA,CAAM9kB,EAAAA,CACN,aAAcglB,EAAAA,CACd,YAAA,CAAcxnB,EACd,aAAA,CAAeqoB,EAAAA,CACf,WAAY1lB,EAAAA,CACZ,kBAAA,CAAoB4kB,GACpB,iBAAA,CAAmB1kB,CAAAA,CAEnB,qBAAsBC,CAAAA,CACtB,eAAA,CAAiBpd,EACjB,YAAA,CAAcgB,CAAAA,CAEd,WAAYqc,EAAAA,CACZ,kBAAA,CAAoB4kB,EAEpB,WAAA,CAAaxB,CAAAA,CAAmBkI,GAAkB,MAAA,CAClD,WAAA,CAAalI,EAAmB6I,EAAAA,CAAkB,MAAA,CAClD,cAAe7I,CAAAA,CAAmB8I,EAAAA,CAAoB,OACtD,WAAA,CAAa9I,CAAAA,CAAmB+I,GAAkB,MAAA,CAClD,YAAA,CAAc/I,EAAmBiJ,EAAAA,CAAmB,MAAA,CACpD,kBAAmBjJ,CAAAA,CAAmBkJ,EAAAA,CAAwB,OAChE,CAAA,CAIArnD,IAAAA,CAAC,OACC,GAAA,CAAKkiD,EAAAA,CACL,UAAU,qBAAA,CACV,KAAA,CAAO,CACL,QAAA,CAAU,MAAA,CACV,mBAAoB,OACtB,CAAA,CAKA,UAAApjD,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,iCAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAOgjD,EAAAA,CACP,UAAW,MAAA,CACX,SAAA,CAAW,SACX,cAAA,CAAgB,MAAA,CAChB,gBAAiB,MACnB,CAAA,CAEA,SAAAhjD,GAAAA,CAACgkC,EAAAA,CAAA,CACC,KAAA,CAAOp8B,EAAAA,CACP,MAAOjH,EAAAA,CACP,SAAA,CAAWknC,GACX,cAAA,CAAgB9iC,CAAAA,CAChB,SAAA,CAAWy+C,CAAAA,CACX,YAAarf,CAAAA,CACb,cAAA,CAAgB0iB,GAChB,iBAAA,CAAmBxiB,CAAAA,CACnB,aAAcohB,EAAAA,CACd,SAAA,CAAW3E,GACX,OAAA,CAASpiC,EAAAA,CACT,eAAgB0mC,EAAAA,CAChB,cAAA,CAAgBC,GAChB,YAAA,CAAcM,EAAAA,CACd,aAAcG,EAAAA,CACd,aAAA,CAAeC,GACf,UAAA,CAAYE,EAAAA,CACZ,kBAAmBC,EAAAA,CACnB,eAAA,CAAiBE,GACjB,YAAA,CAAcC,EAAAA,CACd,aAAcC,EAAAA,CACd,eAAA,CAAiBC,GACjB,eAAA,CAAiBpiB,CAAAA,CAAet8B,GAAes8B,CAAAA,CAAYt8B,CAAI,EAAI,MAAA,CACnE,eAAA,CAAiB,CAACV,CAAAA,CAAgBoiD,CAAAA,GAAqBjI,GAAsB,CAAE,MAAA,CAAAn6C,EAAQ,QAAA,CAAAoiD,CAAS,CAAC,CAAA,CACjG,cAAA,CAAgBvD,GAClB,CAAA,CACF,CAAA,CAGAhmD,IAAC,KAAA,CAAA,CACC,SAAA,CAAU,gFACV,KAAA,CAAO,CACL,MAAO,CAAA,CACP,eAAA,CAAiBW,GAAM,MAAA,CACvB,MAAA,CAAQ,EACV,CAAA,CACA,WAAA,CAAa6sC,GACf,CAAA,CAKAxtC,GAAAA,CAAC,OACC,GAAA,CAAKqjD,EAAAA,CACL,UAAU,8BAAA,CACV,KAAA,CAAO,CACL,SAAA,CAAW,CAAA,CACX,UAAW,MAAA,CACX,SAAA,CAAW,OACX,MAAA,CAAQoF,EAAAA,CAAY,WAAa,MAAA,CAEjC,GAAIxlD,EAAO,iBAAA,EAAqB,CAC9B,eAAgB,MAAA,CAChB,cAAA,CAAgB,MAClB,CACF,CAAA,CAEA,SAAAjD,GAAAA,CAACo4C,EAAAA,CAAA,CACC,KAAA,CAAOxwC,EAAAA,CACP,MAAOjH,EAAAA,CACP,SAAA,CAAWknC,GACX,SAAA,CAAWrM,EAAAA,CACX,UAAWp4B,EAAAA,CACX,OAAA,CAASC,GACT,IAAA,CAAMq4B,EAAAA,CACN,OAAQltB,CAAAA,CACR,SAAA,CAAWg1C,EACX,mBAAA,CAAqBvgD,CAAAA,EAAQ,oBAC7B,WAAA,CAAakhC,CAAAA,CACb,eAAgB0iB,EAAAA,CAChB,iBAAA,CAAmBF,GACnB,gBAAA,CAAkBH,EAAAA,CAClB,mBAAoBO,EAAAA,CACpB,kBAAA,CAAoBG,GACtB,CAAA,CACF,CAAA,CAAA,CACF,EAICxhB,EAAAA,CAAY,IAAA,EACX1lC,IAAC48B,EAAAA,CAAA,CACC,OAAQ8I,EAAAA,CAAY,MAAA,CACpB,EAAGA,EAAAA,CAAY,CAAA,CACf,EAAGA,EAAAA,CAAY,CAAA,CACf,MAAO/kC,EAAAA,CACP,OAAA,CAAS,IAAMglC,CAAAA,CAAe,CAAE,OAAQ,KAAA,CAAO,CAAA,CAAG,EAAG,CAAA,CAAG,CAAA,CAAG,KAAM,IAAK,CAAC,EACvE,KAAA,CAAA,CAAQ,IAAM,CACZ,IAAM6jB,CAAAA,CAAY9jB,GAAY,IAAA,CAC9B,GAAI,CAAC8jB,CAAAA,CAAW,OAAO,EAAC,CAGxB,IAAM3hD,EAAO4rC,EAAAA,CAAW,YAAA,CAAa+N,EAAAA,CAAYgI,CAAAA,CAAU,EAAE,CAAA,EAAKA,CAAAA,CAIlE,OAHqB3hD,CAAAA,CAAK,QAAA,EAAYA,EAAK,QAAA,CAAS,MAAA,CAAS,EAIpD,CAEL,CACE,GAAI,YAAA,CACJ,KAAA,CAAOiY,EAAa,WAAA,EAAa,UAAA,EAAc,cAC/C,IAAA,CAAMud,EAAAA,CAAU,IAChB,OAAA,CAAS,IAAM,CACTwiB,CAAAA,CACFA,CAAAA,CAAiBh4C,CAAI,CAAA,CAErB0+C,EAAAA,CAAoB1+C,EAAK,EAAE,EAE/B,CACF,CAAA,CAEA,CACE,GAAI,kBAAA,CACJ,KAAA,CAAO,GACP,SAAA,CAAW,IAAA,CACX,QAAS,IAAM,CAAC,CAClB,CAAA,CAEA,CACE,GAAI,QAAA,CACJ,KAAA,CAAOiY,EAAa,WAAA,EAAa,UAAA,EAAc,cAC/C,IAAA,CAAMud,EAAAA,CAAU,OAChB,OAAA,CAAS,IAAM,CACbikB,EAAAA,CAAsB,CACpB,OAAQz5C,CAAAA,CAAK,EAAA,CACb,SAAUA,CAAAA,CAAK,IACjB,CAAC,EACH,CACF,CACF,CAAA,CAIK,CAEL,CACE,EAAA,CAAI,MAAA,CACJ,MAAOiY,CAAAA,CAAa,WAAA,EAAa,UAAY,WAAA,CAC7C,IAAA,CAAMud,GAAU,MAAA,CAChB,OAAA,CAAS,IAAM,CACTuiB,CAAAA,CACFA,EAAW/3C,CAAI,CAAA,CAEfu5C,EAAAA,CAAev5C,CAAI,EAEvB,CACF,CAAA,CAEA,CACE,EAAA,CAAI,YAAA,CACJ,MAAOiY,CAAAA,CAAa,WAAA,EAAa,YAAc,aAAA,CAC/C,IAAA,CAAMud,GAAU,GAAA,CAChB,OAAA,CAAS,IAAM,CACTwiB,CAAAA,CACFA,EAAiBh4C,CAAI,CAAA,CAErB0+C,GAAoB1+C,CAAAA,CAAK,EAAE,EAE/B,CACF,CAAA,CAEA,CACE,EAAA,CAAI,kBAAA,CACJ,MAAO,EAAA,CACP,SAAA,CAAW,KACX,OAAA,CAAS,IAAM,CAAC,CAClB,CAAA,CAEA,CACE,EAAA,CAAI,gBAAA,CACJ,MAAOiY,CAAAA,CAAa,WAAA,EAAa,gBAAkB,iBAAA,CACnD,IAAA,CAAMud,GAAU,cAAA,CAChB,OAAA,CAAS,IAAM,CACTyiB,CAAAA,CACFA,EAAqBj4C,CAAI,CAAA,CAEzB89C,GAAiB99C,CAAAA,CAAK,EAAA,CAAI,CAAE,MAAA,CAAQ,MAAA,CAAQ,SAAU,CAAE,CAAC,EAE7D,CAAA,CACA,QAAA,CAAUA,EAAK,MAAA,GAAW,MAC5B,EAEA,CACE,EAAA,CAAI,gBACJ,KAAA,CAAOiY,CAAAA,CAAa,aAAa,aAAA,EAAiB,iBAAA,CAClD,KAAMud,EAAAA,CAAU,aAAA,CAChB,QAAS,IAAM,CACT0iB,GACFA,EAAAA,CAAoBl4C,CAAI,EAExB89C,EAAAA,CAAiB99C,CAAAA,CAAK,EAAA,CAAI,CAAE,OAAQ,aAAc,CAAC,EAEvD,CAAA,CACA,QAAA,CAAUA,EAAK,MAAA,GAAW,aAC5B,EAEA,CACE,EAAA,CAAI,eACJ,KAAA,CAAOiY,CAAAA,CAAa,aAAa,YAAA,EAAgB,eAAA,CACjD,KAAMud,EAAAA,CAAU,YAAA,CAChB,QAAS,IAAM,CACbsoB,GAAiB99C,CAAAA,CAAK,EAAA,CAAI,CAAE,MAAA,CAAQ,WAAA,CAAa,SAAU,GAAI,CAAC,EAClE,CAAA,CACA,QAAA,CAAUA,EAAK,MAAA,GAAW,WAC5B,EAEA,CACE,EAAA,CAAI,qBACJ,KAAA,CAAO,EAAA,CACP,UAAW,IAAA,CACX,OAAA,CAAS,IAAM,CAAC,CAClB,EAEA,CACE,EAAA,CAAI,QACJ,KAAA,CAAOiY,CAAAA,CAAa,aAAa,SAAA,EAAa,YAAA,CAC9C,KAAMud,EAAAA,CAAU,KAAA,CAChB,QAAS,IAAM,CACb,GAAI,CAACx1B,CAAAA,CAAK,WAAa,CAACA,CAAAA,CAAK,QAAS,CACpC,OAAA,CAAQ,KAAK,iCAAiC,CAAA,CAC9C,MACF,CAGA,IAAM4hD,GAAY5hD,CAAAA,CAAK,SAAA,CAAU,SAAQ,CACnC6hD,EAAAA,CAAU7hD,EAAK,OAAA,CAAQ,OAAA,GACvB8hD,EAAAA,CAAUF,EAAAA,CAAAA,CAAaC,EAAAA,CAAUD,EAAAA,EAAa,EAC9C1R,EAAAA,CAAY,IAAI,KAAK4R,EAAO,CAAA,CAGlC/C,GAAgB/+C,CAAAA,CAAMkwC,EAAS,EACjC,CAAA,CACA,QAAA,CAAU,CAAClwC,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,OACrC,EAEA,CACE,EAAA,CAAI,mBACJ,KAAA,CAAO,EAAA,CACP,UAAW,IAAA,CACX,OAAA,CAAS,IAAM,CAAC,CAClB,EAEA,CACE,EAAA,CAAI,SACJ,KAAA,CAAOiY,CAAAA,CAAa,aAAa,UAAA,EAAc,aAAA,CAC/C,KAAMud,EAAAA,CAAU,MAAA,CAChB,QAAS,IAAM,CACbikB,GAAsB,CACpB,MAAA,CAAQz5C,EAAK,EAAA,CACb,QAAA,CAAUA,EAAK,IACjB,CAAC,EACH,CACF,CACF,CACF,CAAA,GAAG,CACL,EAIF7H,GAAAA,CAACmT,EAAAA,CAAA,CACC,IAAA,CAAMguC,EAAAA,CACN,OAAQ,CAAC,CAACA,GACV,OAAA,CAAS,IAAMC,GAAe,IAAI,CAAA,CAClC,aAAejrC,CAAAA,EAAgB,CACzBgrC,KACFwE,EAAAA,CAAiBxE,EAAAA,CAAY,GAAIhrC,CAAW,CAAA,CAC5CirC,GAAe,IAAI,CAAA,EAEvB,EACA,KAAA,CAAOloB,CAAAA,GAAiB,QAAU,OAAA,CAAU,MAAA,CAC5C,MAAA,CAAQ1qB,CAAAA,GAAW,KAAO,IAAA,CAAO,IAAA,CACjC,eAAgBzJ,CAAAA,CAChB,cAAA,CAAgBo5B,EAClB,CAAA,CAGAn+B,GAAAA,CAACiQ,gBAAA,CACE,QAAA,CAAAoxC,IACCrhD,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,OAAA,CAAS,CAAE,QAAS,CAAE,CAAA,CACtB,KAAM,CAAE,OAAA,CAAS,CAAE,CAAA,CACnB,SAAA,CAAU,+DACV,KAAA,CAAO,CAAE,gBAAiB,oBAAqB,CAAA,CAC/C,QAAS,IAAMoxC,EAAAA,CAAsB,IAAI,CAAA,CAEzC,QAAA,CAAApgD,KAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,KAAA,CAAO,EAAI,CAAA,CAClC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,CAAE,CAAA,CAChC,KAAM,CAAE,OAAA,CAAS,EAAG,KAAA,CAAO,EAAI,EAC/B,UAAA,CAAY,CAAE,SAAU,EAAA,CAAK,IAAA,CAAM,SAAU,CAAA,CAC7C,OAAA,CAAUvN,GAAMA,CAAAA,CAAE,eAAA,GAClB,SAAA,CAAU,uDAAA,CACV,MAAO,CACL,eAAA,CAAiBhC,GAAM,WAAA,CACvB,MAAA,CAAQ,aAAaA,EAAAA,CAAM,MAAM,CAAA,CACnC,CAAA,CAGA,UAAAX,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,WAAA,CACV,KAAA,CAAO,CAAE,YAAA,CAAc,CAAA,UAAA,EAAaW,GAAM,MAAM,CAAA,CAAG,EAEnD,QAAA,CAAAO,IAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACb,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,uEAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB,wBAAyB,EAEnD,QAAA,CAAAA,GAAAA,CAAC4pD,cAAA,CAAc,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,MAAO,SAAU,CAAA,CAAG,EAClE,CAAA,CACA1oD,IAAAA,CAAC,OAAI,SAAA,CAAU,QAAA,CACb,UAAAA,IAAAA,CAAC,IAAA,CAAA,CACC,UAAU,uBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOP,EAAAA,CAAM,YAAa,UAAA,CAAY,mBAAoB,EAElE,QAAA,CAAA,CAAAmf,CAAAA,CAAa,aAAa,UAAA,EAAc,aAAA,CAAc,KACzD,CAAA,CACA9f,GAAAA,CAAC,KACC,SAAA,CAAU,cAAA,CACV,MAAO,CAAE,KAAA,CAAOW,GAAM,aAAA,CAAe,UAAA,CAAY,mBAAoB,CAAA,CAEpE,QAAA,CAAA6N,IAAW,IAAA,CAAO,qCAAA,CAAqC,+BAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CAGAxO,GAAAA,CAAC,OAAI,SAAA,CAAU,WAAA,CACb,SAAAkB,IAAAA,CAAC,GAAA,CAAA,CACC,SAAA,CAAU,yBAAA,CACV,MAAO,CAAE,KAAA,CAAOP,GAAM,aAAA,CAAe,UAAA,CAAY,mBAAoB,CAAA,CAEpE,QAAA,CAAA,CAAA6N,IAAW,IAAA,CAAO,uCAAA,CAAuC,mCAAoC,GAAA,CAC9FtN,IAAAA,CAAC,QAAK,SAAA,CAAU,eAAA,CAAgB,MAAO,CAAE,KAAA,CAAOP,GAAM,WAAY,CAAA,CAAG,cACjE0gD,EAAAA,CAAmB,QAAA,CAAS,KAChC,CAAA,CAAO,GAAA,CAAA,CAET,EACF,CAAA,CAGAngD,IAAAA,CAAC,OACC,SAAA,CAAU,+CAAA,CACV,MAAO,CACL,eAAA,CAAiBP,GAAM,SAAA,CACvB,SAAA,CAAW,aAAaA,EAAAA,CAAM,MAAM,EACtC,CAAA,CAEA,QAAA,CAAA,CAAAX,IAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMshD,EAAAA,CAAsB,IAAI,EACzC,SAAA,CAAU,4DAAA,CACV,MAAO,CACL,KAAA,CAAO3gD,GAAM,aAAA,CACb,UAAA,CAAY,mBACd,CAAA,CACA,YAAA,CAAegC,GAAM,CACnBA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkBhC,GAAM,QAChD,CAAA,CACA,aAAegC,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,cAC1C,CAAA,CAEC,SAAA6L,CAAAA,GAAW,IAAA,CAAO,WAAa,QAAA,CAClC,CAAA,CACAtN,KAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbglD,EAAAA,CAAsB,CAAC7E,EAAAA,CAAmB,MAAM,CAAC,CAAA,CACjDC,EAAAA,CAAsB,IAAI,EAC5B,CAAA,CACA,UAAU,+FAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiB,SAAA,CACjB,WAAY,mBACd,CAAA,CACA,aAAe3+C,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,UAC1C,CAAA,CACA,aAAeA,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,UAC1C,CAAA,CAEA,UAAA3C,GAAAA,CAAC6a,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,EAC3BrM,CAAAA,GAAW,IAAA,CAAO,WAAa,QAAA,CAAA,CAClC,CAAA,CAAA,CACF,GACF,CAAA,CACF,CAAA,CAEJ,EAGCgxC,CAAAA,EAAa,OAAA,EACZx/C,IAACs7C,EAAAA,CAAA,CACC,MAAOkG,EAAAA,CACP,KAAA,CAAO7gD,GACP,MAAA,CAAQ6+C,CAAAA,CACR,cAAeiC,EAAAA,CACf,YAAA,CAAckE,GACd,YAAA,CAAe99C,CAAAA,EAAS,CACtB45C,EAAAA,CAAe7xC,CAAAA,EAAS,CAAC,GAAGA,CAAAA,CAAM/H,CAAI,CAAC,EACzC,EACA,YAAA,CAAeV,CAAAA,EAAW,CAExB++C,EAAAA,CAAsB,CAAC/+C,CAAM,CAAC,EAChC,EACA,kBAAA,CAAoB,CAAC2sC,EAAYC,CAAAA,GAAa,CAC5C,IAAMiT,CAAAA,CAAWvT,GAAW,YAAA,CAAa+N,EAAAA,CAAY1N,CAAU,CAAA,CAC3DkT,CAAAA,EACFD,GAAuBC,CAAAA,CAAUjT,CAAQ,EAE7C,CAAA,CACA,kBAAA,CAAoBmT,GACtB,CAAA,CAAA,CAEJ,CAAA,CACA,EACA,CAEJ,CAAC,EC16DM,IAAM2C,EAAAA,CAAmC,CAC9C,CAAE,EAAA,CAAI,MAAA,CAAQ,MAAO,WAAA,CAAa,KAAA,CAAO,SAAU,CAAA,CACnD,CAAE,GAAI,aAAA,CAAe,KAAA,CAAO,cAAe,KAAA,CAAO,SAAU,EAC5D,CAAE,EAAA,CAAI,YAAa,KAAA,CAAO,YAAA,CAAc,KAAA,CAAO,SAAU,CAC3D,CAAA,CAuCMC,EAAAA,CAAa,CACjB,CAAE,EAAA,CAAI,MAAO,KAAA,CAAO,MAAA,CAAQ,MAAO,SAAA,CAAW,IAAA,CAAM,WAAK,CAAA,CACzD,CAAE,GAAI,QAAA,CAAU,KAAA,CAAO,QAAS,KAAA,CAAO,SAAA,CAAW,KAAM,WAAK,CAAA,CAC7D,CAAE,EAAA,CAAI,MAAA,CAAQ,MAAO,MAAA,CAAQ,KAAA,CAAO,UAAW,IAAA,CAAM,WAAK,EAC1D,CAAE,EAAA,CAAI,SAAU,KAAA,CAAO,SAAA,CAAW,MAAO,SAAA,CAAW,IAAA,CAAM,WAAK,CACjE,CAAA,CAEO,SAASC,EAAAA,CAAc,CAC5B,OAAAxoD,CAAAA,CACA,OAAA,CAAA6R,EACA,IAAA,CAAAvL,CAAAA,CACA,eAAAlB,CAAAA,CAAiB,GACjB,cAAA,CAAA5B,CAAAA,CAAiB,EAAC,CAClB,QAAA,CAAAqJ,EACA,SAAA,CAAAsN,CAAAA,CAAY,MACZ,IAAA,CAAA+xB,CAAAA,CAAO5lC,EAAO,MAAA,CAAS,QAAA,CACvB,MAAAlH,CAAAA,CAAQ,MAAA,CACR,eAAA+I,CAAAA,CAAiB,GACjB,aAAA,CAAA+G,CAAAA,CAAgB,EAAC,CACjB,WAAA,CAAAC,EACA,WAAA,CAAA4C,CAAAA,CAAc,EAAC,CACf,mBAAA,CAAAC,EACA,kBAAA,CAAAC,CACF,CAAA,CAAuB,CACrB,IAAM7J,CAAAA,CAA8B,CAClC,GAAGkgD,EAAAA,CACH,GAAGngD,EAAe,MAAA,CAAOE,CAAAA,EAAM,CAACigD,EAAAA,CAAiB,IAAA,CAAKG,IAAMA,EAAAA,CAAG,EAAA,GAAOpgD,EAAG,EAAE,CAAC,CAC9E,CAAA,CAEMqgD,CAAAA,CAAe3gC,GAAO3oB,CAAK,CAAA,EAAK2oB,GAAO,IAAA,CAGvC,CAACrV,EAAoBC,CAAqB,CAAA,CAAI5T,SAAS,KAAK,CAAA,CAC5D,CAAC6T,CAAAA,CAAsBC,CAAuB,EAAI9T,QAAAA,CAAS,KAAK,EAChE,CAAC+T,CAAAA,CAAuBC,CAAwB,CAAA,CAAIhU,QAAAA,CAAS,KAAK,CAAA,CAClE,CAAC2U,EAAiBC,CAAkB,CAAA,CAAI5U,SAAS,KAAK,CAAA,CACtD,CAAC4pD,CAAAA,CAAqBC,CAAsB,EAAI7pD,QAAAA,CAAS,CAAE,IAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC5E,CAACiU,CAAAA,CAAgBC,CAAiB,EAAIlU,QAAAA,CAAiC,IAAI,EAC3E,CAACmU,CAAAA,CAAiBC,CAAkB,CAAA,CAAIpU,QAAAA,CAAS,IAAI,IAAM,CAAA,CAC3D,CAAC8pD,EAAAA,CAAoBC,EAAqB,EAAI/pD,QAAAA,CAAS,CAAE,IAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAC,CAAA,CAC1E,CAACgqD,EAAAA,CAAcC,EAAe,EAAIjqD,QAAAA,CAAS,KAAK,EAEhD,CAACkqD,EAAAA,CAAcC,EAAe,CAAA,CAAInqD,QAAAA,CAAiB,EAAE,CAAA,CAGrDoqD,EAAY9oD,MAAAA,CAAuB,IAAI,EACvC+oD,CAAAA,CAAc/oD,MAAAA,CAAuB,IAAI,CAAA,CACzCgpD,CAAAA,CAAehpD,OAAuB,IAAI,CAAA,CAC1CipD,EAAWjpD,MAAAA,CAAuB,IAAI,EACtCkpD,CAAAA,CAAalpD,MAAAA,CAAuB,IAAI,CAAA,CAExC,CAACmpD,EAAUC,EAAW,CAAA,CAAI1qD,SAAuB,CACrD,IAAA,CAAM,GACN,WAAA,CAAa,EAAA,CACb,SAAU,CAAA,CACV,MAAA,CAAQ,OACR,QAAA,CAAU,QAAA,CACV,YAAa,KAAA,CACb,KAAA,CAAO,UACP,SAAA,CAAW,GACX,YAAA,CAAc,GACd,IAAA,CAAM,EACR,CAAC,CAAA,CAEK,CAAC/B,EAAAA,CAAQ0sD,EAAS,EAAI3qD,QAAAA,CAAiC,EAAE,CAAA,CAG/DG,SAAAA,CAAU,IAAM,CACVoH,CAAAA,EACFmjD,GAAY,CACV,IAAA,CAAMnjD,EAAK,IAAA,CACX,WAAA,CAAcA,EAAa,WAAA,EAAe,EAAA,CAC1C,UAAWA,CAAAA,CAAK,SAAA,CAChB,QAASA,CAAAA,CAAK,OAAA,CACd,SAAUA,CAAAA,CAAK,QAAA,CACf,MAAA,CAAQA,CAAAA,CAAK,QAAU,MAAA,CACvB,QAAA,CAAWA,EAAa,QAAA,EAAY,QAAA,CACpC,YAAaA,CAAAA,CAAK,WAAA,EAAe,MACjC,KAAA,CAAOA,CAAAA,CAAK,OAAS,SAAA,CACrB,SAAA,CAAWA,EAAK,SAAA,EAAa,GAC7B,YAAA,CAAcA,CAAAA,CAAK,cAAgB,EAAC,CACpC,KAAMA,CAAAA,CAAK,IAAA,EAAQ,EACrB,CAAC,GACIA,CAAAA,CAAK,YAAA,EAAgBA,EAAK,YAAA,CAAa,MAAA,CAAS,GAAMA,CAAAA,CAAK,WAAA,GAC9D0iD,GAAgB,IAAI,CAAA,GAGtBS,GAAY,CACV,IAAA,CAAM,GACN,WAAA,CAAa,EAAA,CACb,SAAU,CAAA,CACV,MAAA,CAAQ,OACR,QAAA,CAAU,QAAA,CACV,YAAa,KAAA,CACb,KAAA,CAAO,UACP,SAAA,CAAW,GACX,YAAA,CAAc,GACd,YAAA,CAAc,GACd,IAAA,CAAM,EACR,CAAC,CAAA,CACDT,GAAgB,KAAK,CAAA,CACrBE,GAAgB,EAAE,GAEtB,CAAA,CAAG,CAAC5iD,EAAMtG,CAAM,CAAC,EAGjBd,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,IAAkB,CACxC+nD,CAAAA,CAAU,OAAA,EAAW,CAACA,EAAU,OAAA,CAAQ,QAAA,CAAS/nD,GAAE,MAAc,CAAA,EAAGuR,EAAsB,KAAK,CAAA,CAC/Fy2C,EAAY,OAAA,EAAW,CAACA,EAAY,OAAA,CAAQ,QAAA,CAAShoD,GAAE,MAAc,CAAA,EAAGyR,EAAwB,KAAK,CAAA,CACrGw2C,EAAa,OAAA,EAAW,CAACA,EAAa,OAAA,CAAQ,QAAA,CAASjoD,GAAE,MAAc,CAAA,EAAG2R,EAAyB,KAAK,CAAA,CACxGu2C,EAAS,OAAA,EAAW,CAACA,EAAS,OAAA,CAAQ,QAAA,CAASloD,GAAE,MAAc,CAAA,EAAGuS,EAAmB,KAAK,EAChG,EACA,OAAA,QAAA,CAAS,gBAAA,CAAiB,YAAazS,CAAkB,CAAA,CAClD,IAAM,QAAA,CAAS,mBAAA,CAAoB,YAAaA,CAAkB,CAC3E,EAAG,EAAE,EAEL,IAAMyoD,EAAAA,CAAW,IAAe,CAC9B,IAAMC,EAAoC,EAAC,CAC3C,OAAKJ,CAAAA,CAAS,IAAA,CAAK,MAAK,GAAGI,CAAAA,CAAU,KAAO,wBAAA,CAAA,CACxCJ,CAAAA,CAAS,WAAaA,CAAAA,CAAS,OAAA,EAAWA,EAAS,SAAA,CAAYA,CAAAA,CAAS,UAC1EI,CAAAA,CAAU,OAAA,CAAU,qDAEtBF,EAAAA,CAAUE,CAAS,EACZ,MAAA,CAAO,IAAA,CAAKA,CAAS,CAAA,CAAE,SAAW,CAC3C,CAAA,CAEM/qC,GAAe,MAAOzd,CAAAA,EAAuB,CAEjD,GADAA,CAAAA,CAAE,gBAAe,CACb,CAAA,CAACuoD,IAAS,CACd,GAAI,CAEF,IAAME,EAAAA,CAAa3d,IAAS,QAAA,EAAY+c,EAAAA,CAAa,OAAS,CAAA,CAC1D,CAAE,GAAGO,CAAAA,CAAU,YAAA,CAAAP,EAAa,CAAA,CAC5BO,CAAAA,CACJ,MAAM38C,CAAAA,CAASg9C,EAAU,EACzBX,EAAAA,CAAgB,EAAE,CAAA,CAClBr3C,CAAAA,GACF,CAAA,MAAS3a,EAAAA,CAAO,CACd,OAAA,CAAQ,KAAA,CAAM,yBAA0BA,EAAK,EAC/C,CACF,CAAA,CAEM6W,EAAAA,CAAe,CAACgH,CAAAA,CAA2BlZ,EAAAA,GAAe,CAC9D4tD,EAAAA,CAAap7C,EAAAA,EAAS,CACpB,IAAM4c,EAAAA,CAAU,CAAE,GAAG5c,EAAAA,CAAM,CAAC0G,CAAK,EAAGlZ,EAAM,CAAA,CAE1C,GAAIkZ,IAAU,QAAA,CAAU,CACtB,IAAM+0C,EAAAA,CAAcjuD,EAAAA,CAChBiuD,KAAgB,MAAA,CAAQ7+B,EAAAA,CAAQ,SAAW,CAAA,CACtC6+B,EAAAA,GAAgB,eAEnBz7C,EAAAA,CAAK,QAAA,GAAa,GAAKA,EAAAA,CAAK,QAAA,GAAa,OAAK4c,EAAAA,CAAQ,QAAA,CAAW,IAE9D6+B,EAAAA,GAAgB,WAAA,EAAeA,KAAgB,QAAA,CAAU7+B,EAAAA,CAAQ,SAAW,GAAA,CAAA,CAC5E6+B,EAAAA,GAAgB,aAAeA,EAAAA,GAAgB,QAAA,IAAU7+B,GAAQ,QAAA,CAAW,EAAA,EACvF,CAEA,GAAIlW,CAAAA,GAAU,WAAY,CACxB,IAAMg1C,GAAgB,OAAOluD,EAAAA,EAAU,SAAWA,EAAAA,CAAQ,QAAA,CAASA,GAAO,EAAE,CAAA,CACxEkuD,KAAkB,GAAA,EAAO17C,EAAAA,CAAK,SAAW,WAAA,CAAa4c,EAAAA,CAAQ,OAAS,WAAA,CAClE8+B,EAAAA,CAAgB,GAAKA,EAAAA,CAAgB,GAAA,EAAO17C,GAAK,MAAA,GAAW,MAAA,CAAQ4c,GAAQ,MAAA,CAAS,aAAA,CACrF8+B,KAAkB,CAAA,EAAK17C,EAAAA,CAAK,SAAW,MAAA,GAAQ4c,EAAAA,CAAQ,OAAS,MAAA,EAC3E,CACA,OAAOA,EACT,CAAC,EACGjuB,EAAAA,CAAO+X,CAAK,GACd20C,EAAAA,CAAWr7C,EAAAA,EAAS,CAAE,IAAMjN,EAAAA,CAAI,CAAE,GAAGiN,EAAK,EAAG,OAAA,OAAOjN,EAAAA,CAAE2T,CAAK,CAAA,CAAU3T,EAAE,CAAC,EAE5E,CAAA,CAGM4oD,GAAgB5hD,CAAAA,CAAY,IAAA,CAAKqJ,GAAKA,CAAAA,CAAE,EAAA,GAAO+3C,EAAS,MAAM,CAAA,EAAKlB,GAAiB,CAAC,CAAA,CACrF2B,GAAkB1B,EAAAA,CAAW,IAAA,CAAKzlD,GAAKA,CAAAA,CAAE,EAAA,GAAO0mD,CAAAA,CAAS,QAAQ,GAAKjB,EAAAA,CAAW,CAAC,EAClF2B,EAAAA,CAAe94C,EAAAA,CAAY,KAAK0H,CAAAA,EAAKA,CAAAA,CAAE,QAAU0wC,CAAAA,CAAS,KAAK,GAAKp4C,EAAAA,CAAY,CAAC,EAGjFd,EAAAA,CAAY,CAChB,gBAAiBo4C,CAAAA,CAAY,WAAA,CAC7B,OAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAY,WAAW,CAAA,CAAA,CAC5C,KAAA,CAAOA,EAAY,WACrB,CAAA,CAEA,OACEjqD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA1O,CAAAA,EACCL,KAAA6G,QAAAA,CAAA,CAEE,UAAA/H,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,EACtB,OAAA,CAAS,CAAE,QAAS,CAAE,CAAA,CACtB,KAAM,CAAE,OAAA,CAAS,CAAE,CAAA,CACnB,SAAA,CAAU,iCACV,OAAA,CAASkD,CAAAA,CACX,EAGApT,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,GAAA,CAAM,CAAA,CAAG,EAAG,CAAA,CAC1C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,MAAO,GAAA,CAAM,CAAA,CAAG,EAAG,CAAA,CACvC,WAAY,CAAE,QAAA,CAAU,IAAM,IAAA,CAAM,CAAC,GAAK,CAAA,CAAG,EAAA,CAAK,CAAC,CAAE,CAAA,CACrD,UAAU,6EAAA,CAEV,QAAA,CAAAhP,KAAC,KAAA,CAAA,CACC,SAAA,CAAU,4EACV,YAAA,CAAYP,CAAAA,CACZ,MAAO,CACL,eAAA,CAAiBspD,EAAY,SAAA,CAC7B,MAAA,CAAQ,aAAaA,CAAAA,CAAY,MAAM,EACzC,CAAA,CACA,OAAA,CAAUtnD,GAAMA,CAAAA,CAAE,eAAA,GAGlB,QAAA,CAAA,CAAAzB,IAAAA,CAAC,OAAI,SAAA,CAAU,6CAAA,CAA8C,MAAO,CAAE,YAAA,CAAc,aAAa+oD,CAAAA,CAAY,MAAM,EAAG,CAAA,CACpH,QAAA,CAAA,CAAA/oD,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OACC,SAAA,CAAU,sBAAA,CACV,MAAO,CAAE,eAAA,CAAiBurD,GAAc,KAAA,EAAStB,CAAAA,CAAY,MAAO,CAAA,CACtE,CAAA,CACAjqD,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,MAAOiqD,CAAAA,CAAY,aAAc,EAC7E,QAAA,CAAAxc,CAAAA,GAAS,SAAW,aAAA,CAAgB,cAAA,CACvC,GACF,CAAA,CACAztC,GAAAA,CAAC,UACC,OAAA,CAASoT,CAAAA,CACT,UAAU,oCAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO62C,EAAY,YAAa,CAAA,CACzC,aAAetnD,CAAAA,EAAM,CACnBA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBsnD,CAAAA,CAAY,OAAA,CACpDtnD,EAAE,aAAA,CAAc,KAAA,CAAM,MAAQsnD,CAAAA,CAAY,YAC5C,EACA,YAAA,CAAetnD,CAAAA,EAAM,CACnBA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,aAAA,CACxCA,EAAE,aAAA,CAAc,KAAA,CAAM,MAAQsnD,CAAAA,CAAY,aAC5C,EACA,QAAA,CAAUvuC,CAAAA,CAEV,SAAA1b,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,EACzB,CAAA,CAAA,CACF,CAAA,CAGA9Q,KAAC,MAAA,CAAA,CAAK,QAAA,CAAUkf,GAAc,SAAA,CAAU,2CAAA,CACtC,UAAAlf,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,eAAA,CAEb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,OACL,KAAA,CAAO+qD,CAAAA,CAAS,KAChB,QAAA,CAAWpoD,CAAAA,EAAM2M,GAAa,MAAA,CAAQ3M,CAAAA,CAAE,OAAO,KAAK,CAAA,CACpD,UAAU,8GAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOsnD,CAAAA,CAAY,WAAY,CAAA,CACxC,WAAA,CAAY,qBACZ,QAAA,CAAUvuC,CAAAA,CACV,UAAS,IAAA,CACX,CAAA,CACCnd,GAAO,IAAA,EACN2C,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,oDACX,QAAA,CAAA,CAAAlB,GAAAA,CAAC0rD,YAAA,CAAY,SAAA,CAAU,UAAU,CAAA,CAChCntD,EAAAA,CAAO,MACV,CAAA,CAAA,CAEJ,CAAA,CAGAyB,IAAC,KAAA,CAAA,CACC,QAAA,CAAAA,IAAC,UAAA,CAAA,CACC,KAAA,CAAO+qD,EAAS,WAAA,EAAe,EAAA,CAC/B,SAAWpoD,CAAAA,EAAM2M,EAAAA,CAAa,cAAe3M,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC3D,SAAA,CAAU,+GACV,KAAA,CAAO,CAAE,MAAOsnD,CAAAA,CAAY,aAAc,EAC1C,WAAA,CAAY,2BAAA,CACZ,KAAM,CAAA,CACN,QAAA,CAAUvuC,EACZ,CAAA,CACF,CAAA,CAGA1b,IAAC,KAAA,CAAA,CAAI,KAAA,CAAO,CAAE,SAAA,CAAW,CAAA,UAAA,EAAaiqD,EAAY,WAAW,CAAA,CAAG,EAAG,CAAA,CAGnE/oD,IAAAA,CAAC,OAAI,SAAA,CAAU,mCAAA,CAEb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,IAAKwpD,CAAAA,CAAW,SAAA,CAAU,WAC7B,QAAA,CAAA,CAAAxpD,IAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QAAS,IAAM,CAACwa,GAAaxH,CAAAA,CAAsB,CAACD,CAAkB,CAAA,CACtE,SAAA,CAAU,2FACV,KAAA,CAAO,CACL,GAAGpC,EAAAA,CACH,WAAA,CAAa05C,GAAc,KAAA,CAC3B,eAAA,CAAiB,GAAGA,EAAAA,CAAc,KAAK,CAAA,EAAA,CACzC,CAAA,CACA,SAAU7vC,CAAAA,CAEV,QAAA,CAAA,CAAA1b,IAAC2rD,SAAAA,CAAA,CAAU,UAAU,aAAA,CAAc,KAAA,CAAO,CAAE,KAAA,CAAOJ,EAAAA,CAAc,KAAM,CAAA,CAAG,CAAA,CAC1EvrD,IAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOurD,EAAAA,CAAc,KAAM,CAAA,CAAI,QAAA,CAAAA,GAAc,KAAA,CAAM,CAAA,CAClEvrD,IAAC+R,WAAAA,CAAA,CAAY,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOw5C,EAAAA,CAAc,KAAM,CAAA,CAAG,CAAA,CAAA,CAC1E,EAEAvrD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAgE,CAAAA,EACCjU,IAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAE,CAAA,CAC5B,KAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,EAC1B,SAAA,CAAU,uFAAA,CACV,MAAO,CAAE,eAAA,CAAiB+5C,EAAY,SAAA,CAAW,MAAA,CAAQ,aAAaA,CAAAA,CAAY,MAAM,EAAG,CAAA,CAE1F,QAAA,CAAAtgD,EAAY,GAAA,CAAKjR,CAAAA,EAChBwI,KAAC,QAAA,CAAA,CAEC,IAAA,CAAK,SACL,SAAA,CAAU,oEAAA,CACV,KAAA,CAAO,CAAE,MAAO+oD,CAAAA,CAAY,WAAY,EACxC,YAAA,CAAetnD,EAAAA,EAAOA,GAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBsnD,CAAAA,CAAY,OAAA,CAC1E,aAAetnD,EAAAA,EAAOA,EAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC9D,OAAA,CAAS,IAAM,CAAE2M,EAAAA,CAAa,QAAA,CAAU5W,EAAO,EAAE,CAAA,CAAGwb,EAAsB,KAAK,EAAE,EAEjF,QAAA,CAAA,CAAAlU,GAAAA,CAAC2rD,UAAA,CAAU,SAAA,CAAU,cAAc,KAAA,CAAO,CAAE,MAAOjzD,CAAAA,CAAO,KAAM,EAAG,CAAA,CAClEA,CAAAA,CAAO,MACPqyD,CAAAA,CAAS,MAAA,GAAWryD,EAAO,EAAA,EAAMsH,GAAAA,CAACiS,MAAA,CAAM,SAAA,CAAU,sBAAsB,KAAA,CAAO,CAAE,MAAOg4C,CAAAA,CAAY,MAAO,EAAG,CAAA,CAAA,CAAA,CAV1GvxD,CAAAA,CAAO,EAWd,CACD,CAAA,CACH,EAEJ,CAAA,CAAA,CACF,CAAA,CAGAwI,KAAC,KAAA,CAAA,CAAI,GAAA,CAAKypD,EAAa,SAAA,CAAU,UAAA,CAC/B,UAAAzpD,IAAAA,CAAC,QAAA,CAAA,CACC,KAAK,QAAA,CACL,OAAA,CAAS,IAAM,CAACwa,CAAAA,EAAatH,EAAwB,CAACD,CAAoB,EAC1E,SAAA,CAAU,0FAAA,CACV,MAAOtC,EAAAA,CACP,QAAA,CAAU6J,CAAAA,CAEV,QAAA,CAAA,CAAA1b,IAAC8Z,IAAAA,CAAA,CAAK,UAAU,aAAA,CAAc,KAAA,CAAO,CAAE,KAAA,CAAO0xC,EAAAA,CAAgB,KAAM,CAAA,CAAG,CAAA,CACvExrD,IAAC,MAAA,CAAA,CAAM,QAAA,CAAAwrD,GAAgB,KAAA,CAAM,CAAA,CAC7BxrD,IAAC+R,WAAAA,CAAA,CAAY,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOk4C,CAAAA,CAAY,YAAa,CAAA,CAAG,CAAA,CAAA,CAC/E,EAEAjqD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAkE,CAAAA,EACCnU,IAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAE,CAAA,CAC5B,KAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,EAC1B,SAAA,CAAU,uFAAA,CACV,MAAO,CAAE,eAAA,CAAiB+5C,EAAY,SAAA,CAAW,MAAA,CAAQ,aAAaA,CAAAA,CAAY,MAAM,EAAG,CAAA,CAE1F,QAAA,CAAAH,GAAW,GAAA,CAAK1oD,CAAAA,EACfF,KAAC,QAAA,CAAA,CAEC,IAAA,CAAK,SACL,SAAA,CAAU,oEAAA,CACV,MAAO,CAAE,KAAA,CAAO+oD,EAAY,WAAY,CAAA,CACxC,aAAetnD,EAAAA,EAAOA,EAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkBsnD,EAAY,OAAA,CAC1E,YAAA,CAAetnD,IAAOA,EAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkB,aAAA,CAC9D,QAAS,IAAM,CAAE2M,GAAa,UAAA,CAAYlO,CAAAA,CAAS,EAAkB,CAAA,CAAGgT,CAAAA,CAAwB,KAAK,EAAE,CAAA,CAEvG,UAAApU,GAAAA,CAAC,MAAA,CAAA,CAAM,SAAAoB,CAAAA,CAAS,IAAA,CAAK,EACpBA,CAAAA,CAAS,KAAA,CACT2pD,EAAS,QAAA,GAAa3pD,CAAAA,CAAS,IAAMpB,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,qBAAA,CAAsB,MAAO,CAAE,KAAA,CAAOg4C,EAAY,MAAO,CAAA,CAAG,IAV9G7oD,CAAAA,CAAS,EAWhB,CACD,CAAA,CACH,CAAA,CAEJ,GACF,CAAA,CAGC2D,CAAAA,CAAe,OAAS,CAAA,EACvB7D,IAAAA,CAAC,OAAI,GAAA,CAAK0pD,CAAAA,CAAc,UAAU,UAAA,CAChC,QAAA,CAAA,CAAA1pD,KAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,OAAA,CAAS,IAAM,CAACwa,CAAAA,EAAapH,CAAAA,CAAyB,CAACD,CAAqB,CAAA,CAC5E,UAAU,0FAAA,CACV,KAAA,CAAOxC,GACP,QAAA,CAAU6J,CAAAA,CAET,UAAAqvC,CAAAA,CAAS,SAAA,EAAaA,EAAS,SAAA,CAAU,MAAA,CAAS,EACjD7pD,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBACZ,QAAA,CAAA+qD,CAAAA,CAAS,UAAU,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAACh4C,CAAAA,CAAG9a,EAAAA,GACtC+H,IAAC,KAAA,CAAA,CAEC,SAAA,CAAU,oGACV,KAAA,CAAO,CAAE,gBAAiB+S,CAAAA,CAAE,KAAA,EAASk3C,EAAY,MAAA,CAAQ,WAAA,CAAaA,EAAY,WAAY,CAAA,CAE7F,SAAAl3C,CAAAA,CAAE,QAAA,CAAA,CAJE9a,EAKP,CACD,CAAA,CACH,EACC8yD,CAAAA,CAAS,SAAA,CAAU,OAAS,CAAA,EAC3B7pD,IAAAA,CAAC,QAAK,KAAA,CAAO,CAAE,MAAO+oD,CAAAA,CAAY,YAAa,EAAG,QAAA,CAAA,CAAA,GAAA,CAAEc,CAAAA,CAAS,UAAU,MAAA,CAAS,CAAA,CAAA,CAAE,GAEtF,CAAA,CAEA7pD,IAAAA,CAAA6G,SAAA,CACE,QAAA,CAAA,CAAA/H,IAAC4rD,KAAAA,CAAA,CAAM,UAAU,aAAA,CAAc,KAAA,CAAO,CAAE,KAAA,CAAO3B,CAAAA,CAAY,YAAa,CAAA,CAAG,CAAA,CAC3EjqD,IAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOiqD,CAAAA,CAAY,YAAa,CAAA,CAAG,QAAA,CAAA,SAAA,CAAO,GAC3D,CAAA,CAEFjqD,GAAAA,CAAC+R,YAAA,CAAY,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,MAAOk4C,CAAAA,CAAY,YAAa,EAAG,CAAA,CAAA,CAC/E,CAAA,CAEAjqD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAoE,CAAAA,EACCrU,IAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,CAAE,CAAA,CAC5B,KAAM,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,EAC1B,SAAA,CAAU,qGAAA,CACV,MAAO,CAAE,eAAA,CAAiB+5C,EAAY,SAAA,CAAW,MAAA,CAAQ,aAAaA,CAAAA,CAAY,MAAM,EAAG,CAAA,CAE1F,QAAA,CAAAllD,EAAe,GAAA,CAAKK,CAAAA,EAAS,CAC5B,IAAMgD,EAAAA,CAAa2iD,EAAS,SAAA,EAAW,IAAA,CAAKh4C,IAAKA,EAAAA,CAAE,IAAA,GAAS3N,EAAK,IAAI,CAAA,CACrE,OACElE,IAAAA,CAAC,QAAA,CAAA,CAEC,KAAK,QAAA,CACL,SAAA,CAAU,qEACV,KAAA,CAAO,CAAE,MAAO+oD,CAAAA,CAAY,WAAY,EACxC,YAAA,CAAetnD,EAAAA,EAAOA,GAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBsnD,CAAAA,CAAY,OAAA,CAC1E,aAAetnD,EAAAA,EAAOA,EAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC9D,OAAA,CAAS,IAAM,CACb,IAAMoW,EAAAA,CAAe3Q,IAChB2iD,CAAAA,CAAS,SAAA,EAAa,EAAC,EAAG,OAAOh4C,EAAAA,EAAKA,EAAAA,CAAE,OAAS3N,CAAAA,CAAK,IAAI,EAC3D,CAAC,GAAI2lD,EAAS,SAAA,EAAa,GAAK,CAC9B,IAAA,CAAM3lD,EAAK,IAAA,CACX,MAAA,CAAQA,EAAK,MAAA,CACb,QAAA,CAAUA,EAAK,IAAA,CAAK,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI8I,IAAKA,EAAAA,CAAE,CAAC,CAAC,CAAA,CAAE,IAAA,CAAK,EAAE,CAAA,CAAE,WAAA,GAAc,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAC/E,KAAA,CAAO+7C,EAAY,MACrB,CAAC,EACL36C,EAAAA,CAAa,WAAA,CAAayJ,EAAY,EACxC,CAAA,CAEA,UAAA/Y,GAAAA,CAAC,KAAA,CAAA,CACC,UAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBiqD,CAAAA,CAAY,MAAO,CAAA,CAE5C,QAAA,CAAA7kD,EAAK,IAAA,CAAK,MAAA,CAAO,CAAC,CAAA,CAAE,WAAA,GACvB,CAAA,CACApF,GAAAA,CAAC,QAAK,SAAA,CAAU,2BAAA,CAA6B,SAAAoF,CAAAA,CAAK,IAAA,CAAK,EAEvDpF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,oCAAA,CACZ,QAAA,CAAAoI,IAAcpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,aAAA,CAAc,MAAO,CAAE,KAAA,CAAOg4C,EAAY,MAAO,CAAA,CAAG,EACtF,CAAA,CAAA,CAAA,CA5BK7kD,CAAAA,CAAK,EA6BZ,CAEJ,CAAC,EACH,CAAA,CAEJ,CAAA,CAAA,CACF,EAIFlE,IAAAA,CAAC,KAAA,CAAA,CAAI,IAAK2pD,CAAAA,CAAU,SAAA,CAAU,WAC5B,QAAA,CAAA,CAAA3pD,IAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QAAS,IAAM,CACb,GAAI,CAACwa,CAAAA,CACH,GAAIzG,CAAAA,CACFC,CAAAA,CAAmB,KAAK,CAAA,CAAA,KACnB,CAEL,GAAI21C,CAAAA,CAAS,OAAA,CAAS,CACpB,IAAM9oD,CAAAA,CAAO8oD,EAAS,OAAA,CAAQ,qBAAA,GACxB7oD,EAAAA,CAAiB,MAAA,CAAO,YACxB6pD,EAAAA,CAAe,GAAA,CAEfC,GADa9pD,EAAAA,CAAiBD,CAAAA,CAAK,OAChB8pD,EAAAA,CAAe9pD,CAAAA,CAAK,IAAM8pD,EAAAA,CAAe,CAAA,CAAI9pD,EAAK,MAAA,CAAS,CAAA,CACpFooD,EAAuB,CAAE,GAAA,CAAA2B,GAAK,IAAA,CAAM/pD,CAAAA,CAAK,IAAK,CAAC,EACjD,CACAmT,CAAAA,CAAmB,IAAI,EACzB,CAEJ,CAAA,CACA,UAAU,0FAAA,CACV,KAAA,CAAOrD,GACP,QAAA,CAAU6J,CAAAA,CAEV,UAAA1b,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,0BAAA,CAA2B,KAAA,CAAO,CAAE,eAAA,CAAiB+qD,CAAAA,CAAS,KAAM,CAAA,CAAG,CAAA,CACtF/qD,GAAAA,CAAC,MAAA,CAAA,CAAM,SAAAyrD,EAAAA,CAAa,IAAA,CAAK,EACzBzrD,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,MAAO,CAAE,KAAA,CAAOk4C,EAAY,YAAa,CAAA,CAAG,GAC/E,CAAA,CAGAjqD,GAAAA,CAACiQ,gBAAA,CACE,QAAA,CAAAgF,GACC/T,IAAAA,CAAChB,EAAAA,CAAA,CACC,QAAA,CAAA,CAAAF,GAAAA,CAAC,OAAI,SAAA,CAAU,eAAA,CAAgB,MAAO,CAAE,MAAA,CAAQ,KAAM,CAAA,CAAG,OAAA,CAAS,IAAMkV,CAAAA,CAAmB,KAAK,EAAG,CAAA,CACnGlV,GAAAA,CAACkQ,OAAO,GAAA,CAAP,CACC,QAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,EAC7B,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,EAAG,CAAA,CAC1B,WAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC7B,SAAA,CAAU,aACV,KAAA,CAAO,CACL,SAAU,OAAA,CACV,GAAA,CAAK,GAAGg6C,CAAAA,CAAoB,GAAG,KAC/B,IAAA,CAAM,CAAA,EAAGA,EAAoB,IAAI,CAAA,EAAA,CAAA,CACjC,OAAQ,KAAA,CACR,eAAA,CAAiBD,EAAY,SAAA,CAC7B,MAAA,CAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAY,MAAM,CAAA,CAAA,CACvC,SAAA,CAAW,gCACb,CAAA,CACA,OAAA,CAAUtnD,GAAMA,CAAAA,CAAE,eAAA,GAGlB,QAAA,CAAA3C,GAAAA,CAAC,OAAI,KAAA,CAAO,CAAE,QAAS,SAAU,CAAA,CAC/B,SAAAA,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAO,CAAE,OAAA,CAAS,OAAQ,mBAAA,CAAqB,iBAAA,CAAmB,IAAK,KAAM,CAAA,CAC/E,SAAA2S,EAAAA,CAAY,KAAA,CAAM,EAAG,EAAE,CAAA,CAAE,IAAK1R,CAAAA,EAAU,CACvC,IAAMmH,EAAAA,CAAa2iD,CAAAA,CAAS,QAAU9pD,CAAAA,CAAM,KAAA,CAC5C,OACEjB,GAAAA,CAAC,QAAA,CAAA,CAEC,KAAK,QAAA,CACL,OAAA,CAAU2C,IAAM,CACdA,EAAAA,CAAE,gBAAe,CACjBA,EAAAA,CAAE,iBAAgB,CAClB2M,EAAAA,CAAa,QAASrO,CAAAA,CAAM,KAAK,EACjCiU,CAAAA,CAAmB,KAAK,EAC1B,CAAA,CACA,KAAA,CAAO,CACL,KAAA,CAAO,MAAA,CACP,OAAQ,MAAA,CACR,YAAA,CAAc,MACd,eAAA,CAAiB,aAAA,CACjB,OAAQ,SAAA,CACR,MAAA,CAAQ,OACR,OAAA,CAAS,MAAA,CACT,WAAY,QAAA,CACZ,cAAA,CAAgB,SAChB,OAAA,CAAS,CACX,EACA,KAAA,CAAOjU,CAAAA,CAAM,IAAA,CAEb,QAAA,CAAAjB,IAAC,MAAA,CAAA,CACC,KAAA,CAAO,CACL,KAAA,CAAO,MAAA,CACP,OAAQ,MAAA,CACR,YAAA,CAAc,MACd,eAAA,CAAiBiB,CAAAA,CAAM,MACvB,OAAA,CAASmH,EAAAA,CAAa,aAAanH,CAAAA,CAAM,KAAK,GAAK,MAAA,CACnD,aAAA,CAAe,MACf,aAAA,CAAe,MAAA,CACf,QAAS,OACX,CAAA,CACF,GAjCKA,CAAAA,CAAM,KAkCb,CAEJ,CAAC,CAAA,CACH,EACF,CAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CAGCwP,EAAc,MAAA,CAAS,CAAA,EAAKC,EAC3B1Q,GAAAA,CAACuQ,EAAAA,CAAA,CACC,YAAA,CAAcw6C,CAAAA,CAAS,MAAQ,EAAC,CAChC,cAAet6C,CAAAA,CACf,QAAA,CAAW8B,GAASjD,EAAAA,CAAa,MAAA,CAAQiD,CAAI,CAAA,CAC7C,WAAA,CAAa7B,EACb,KAAA,CAAOu5C,CAAAA,CACP,SAAUvuC,CAAAA,CACZ,CAAA,CACE,MACN,CAAA,CAGAxa,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,MAAO,CAAE,KAAA,CAAOwhB,EAAY,YAAa,CAAA,CAAG,EAC1E/oD,IAAAA,CAAC,KAAA,CAAA,CAAI,IAAK4pD,CAAAA,CAAY,SAAA,CAAU,0CAC9B,QAAA,CAAA,CAAA9qD,GAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QAAS,IAAM,CACb,GAAI,CAAC0b,CAAAA,EAAa,CAACqvC,CAAAA,CAAS,WAAA,CAC1B,GAAIx2C,CAAAA,GAAmB,OAAA,CACrBC,EAAkB,IAAI,CAAA,CAAA,KACjB,CAEL,GAAIs2C,CAAAA,CAAW,QAAS,CACtB,IAAM/oD,EAAO+oD,CAAAA,CAAW,OAAA,CAAQ,uBAAsB,CAChD9oD,EAAAA,CAAiB,OAAO,WAAA,CACxB6pD,EAAAA,CAAe,IAGfC,EAAAA,CADa9pD,EAAAA,CAAiBD,EAAK,MAAA,CAChB8pD,EAAAA,CAAe9pD,EAAK,GAAA,CAAM8pD,EAAAA,CAAe,EAAI9pD,CAAAA,CAAK,MAAA,CAAS,EACpFsoD,EAAAA,CAAsB,CAAE,IAAAyB,EAAAA,CAAK,IAAA,CAAM/pD,EAAK,IAAK,CAAC,EAChD,CACAyS,CAAAA,CAAkB,OAAO,CAAA,CACzBE,CAAAA,CAAmBq2C,EAAS,SAAA,EAAa,IAAI,IAAM,EACrD,CAEJ,EACA,SAAA,CAAU,kDAAA,CACV,MAAO,CACL,GAAGl5C,GACH,OAAA,CAASk5C,CAAAA,CAAS,YAAc,EAAA,CAAM,CAAA,CACtC,OAAQA,CAAAA,CAAS,WAAA,CAAc,cAAgB,SACjD,CAAA,CACA,SAAUrvC,CAAAA,EAAaqvC,CAAAA,CAAS,YAE/B,QAAA,CAAAA,CAAAA,CAAS,UAAYA,CAAAA,CAAS,SAAA,CAAU,mBAAmB,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,MAAO,OAAQ,CAAC,EAAI,QAAA,CAC7G,CAAA,CACA/qD,IAAC,MAAA,CAAA,CAAK,KAAA,CAAO,CAAE,KAAA,CAAOiqD,CAAAA,CAAY,YAAa,CAAA,CAAG,QAAA,CAAA,QAAA,CAAC,EACnDjqD,GAAAA,CAAC,QAAA,CAAA,CACC,KAAK,QAAA,CACL,OAAA,CAAS,IAAM,CACb,GAAI,CAAC0b,CAAAA,EAAa,CAACqvC,EAAS,WAAA,CAC1B,GAAIx2C,IAAmB,KAAA,CACrBC,CAAAA,CAAkB,IAAI,CAAA,CAAA,KACjB,CAEL,GAAIs2C,CAAAA,CAAW,OAAA,CAAS,CACtB,IAAM/oD,CAAAA,CAAO+oD,EAAW,OAAA,CAAQ,qBAAA,GAC1B9oD,EAAAA,CAAiB,MAAA,CAAO,YACxB6pD,EAAAA,CAAe,GAAA,CAEfC,GADa9pD,EAAAA,CAAiBD,CAAAA,CAAK,OAChB8pD,EAAAA,CAAe9pD,CAAAA,CAAK,IAAM8pD,EAAAA,CAAe,CAAA,CAAI9pD,EAAK,MAAA,CAAS,CAAA,CACpFsoD,GAAsB,CAAE,GAAA,CAAAyB,GAAK,IAAA,CAAM/pD,CAAAA,CAAK,IAAK,CAAC,EAChD,CACAyS,CAAAA,CAAkB,KAAK,EACvBE,CAAAA,CAAmBq2C,CAAAA,CAAS,SAAWA,CAAAA,CAAS,SAAA,EAAa,IAAI,IAAM,EACzE,CAEJ,CAAA,CACA,SAAA,CAAU,mDACV,KAAA,CAAO,CACL,GAAGl5C,EAAAA,CACH,OAAA,CAASk5C,CAAAA,CAAS,WAAA,CAAc,GAAM,CAAA,CACtC,MAAA,CAAQA,EAAS,WAAA,CAAc,aAAA,CAAgB,SACjD,CAAA,CACA,QAAA,CAAUrvC,GAAaqvC,CAAAA,CAAS,WAAA,CAE/B,SAAAA,CAAAA,CAAS,OAAA,CAAUA,EAAS,OAAA,CAAQ,kBAAA,CAAmB,QAAS,CAAE,GAAA,CAAK,UAAW,KAAA,CAAO,OAAQ,CAAC,CAAA,CAAI,KAAA,CACzG,EAGA/qD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAsE,CAAAA,EACCrT,KAAChB,EAAAA,CAAA,CACC,UAAAF,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,eAAA,CAAgB,KAAA,CAAO,CAAE,MAAA,CAAQ,KAAM,EAAG,OAAA,CAAS,IAAMwU,EAAkB,IAAI,CAAA,CAAG,EACjGtT,IAAAA,CAACgP,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,EAAG,GAAI,CAAA,CAC9B,QAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,CAAE,EAC5B,IAAA,CAAM,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC3B,SAAA,CAAU,6CACV,KAAA,CAAO,CACL,SAAU,OAAA,CACV,GAAA,CAAK,GAAGk6C,EAAAA,CAAmB,GAAG,KAC9B,IAAA,CAAM,CAAA,EAAGA,GAAmB,IAAI,CAAA,EAAA,CAAA,CAChC,MAAA,CAAQ,KAAA,CACR,gBAAiBH,CAAAA,CAAY,SAAA,CAC7B,OAAQ,CAAA,UAAA,EAAaA,CAAAA,CAAY,MAAM,CAAA,CACzC,CAAA,CACA,QAAUtnD,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAGlC,QAAA,CAAA,CAAAzB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,YAAY,KAAA,CAAO,CAAE,YAAa,CAAA,UAAA,EAAa+oD,CAAAA,CAAY,MAAM,CAAA,CAAG,CAAA,CAC/E,eAAM,CACN,IAAMtlD,EAAQ,IAAI,IAAA,CACZsU,GAAW,IAAI,IAAA,CAAKtU,CAAK,CAAA,CAAGsU,EAAAA,CAAS,QAAQtU,CAAAA,CAAM,OAAA,GAAY,CAAC,CAAA,CACtE,IAAM+jC,EAAAA,CAAW,IAAI,KAAK/jC,CAAK,CAAA,CAAG+jC,GAAS,OAAA,CAAQ/jC,CAAAA,CAAM,SAAQ,CAAI,CAAC,EACtE,IAAM0U,EAAAA,CAAW,IAAI,IAAA,CAAK1U,CAAK,EAAG,OAAA0U,EAAAA,CAAS,QAAQ1U,CAAAA,CAAM,OAAA,GAAY,EAAE,CAAA,CAEvD,CACd,CAAE,KAAA,CAAO,MAAO,IAAA,CAAMA,CAAM,EAC5B,CAAE,KAAA,CAAO,YAAU,IAAA,CAAMsU,EAAS,EAClC,CAAE,KAAA,CAAO,oBAAkB,IAAA,CAAMyvB,EAAS,EAC1C,CAAE,KAAA,CAAO,WAAA,CAAa,IAAA,CAAMrvB,EAAS,CACvC,CAAA,CAEe,IAAI,CAACiG,EAAAA,CAAKrnB,KACvB+H,GAAAA,CAAC,QAAA,CAAA,CAEC,KAAK,QAAA,CACL,SAAA,CAAU,uDACV,KAAA,CAAO,CAAE,MAAOiqD,CAAAA,CAAY,WAAY,EACxC,YAAA,CAAetnD,EAAAA,EAAOA,GAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBsnD,CAAAA,CAAY,OAAA,CAC1E,aAAetnD,EAAAA,EAAOA,EAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC9D,OAAA,CAAS,IAAM,CACT4R,CAAAA,GAAmB,OAAA,EACrBjF,GAAa,WAAA,CAAagQ,EAAAA,CAAI,IAAI,CAAA,CAAA,CAC9B,CAACyrC,EAAS,OAAA,EAAWzrC,EAAAA,CAAI,KAAOyrC,CAAAA,CAAS,OAAA,GAASz7C,GAAa,SAAA,CAAWgQ,EAAAA,CAAI,IAAI,CAAA,CACtF9K,CAAAA,CAAkB,KAAK,CAAA,GAEvBlF,EAAAA,CAAa,UAAWgQ,EAAAA,CAAI,IAAI,GAC5B,CAACyrC,CAAAA,CAAS,WAAazrC,EAAAA,CAAI,IAAA,CAAOyrC,EAAS,SAAA,GAAWz7C,EAAAA,CAAa,YAAagQ,EAAAA,CAAI,IAAI,EAC5F9K,CAAAA,CAAkB,IAAI,GAE1B,CAAA,CAEC,QAAA,CAAA8K,GAAI,KAAA,CAAA,CAlBArnB,EAmBP,CACD,CACH,CAAA,IACA+H,GAAAA,CAAC,KAAA,CAAA,CAAI,MAAO,CAAE,SAAA,CAAW,CAAA,UAAA,EAAaiqD,CAAAA,CAAY,MAAM,CAAA,CAAA,CAAI,MAAA,CAAQ,UAAW,CAAA,CAAG,CAAA,CAClFjqD,IAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,SAAA,CAAU,sDAAA,CACV,MAAO,CAAE,KAAA,CAAO,SAAU,CAAA,CAC1B,YAAA,CAAe2C,GAAOA,CAAAA,CAAE,aAAA,CAAc,MAAM,eAAA,CAAkBsnD,CAAAA,CAAY,QAC1E,YAAA,CAAetnD,CAAAA,EAAOA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkB,aAAA,CAC9D,OAAA,CAAS,IAAM,CAAE2M,EAAAA,CAAa,YAAa,MAAS,CAAA,CAAGA,GAAa,SAAA,CAAW,MAAS,EAAGkF,CAAAA,CAAkB,IAAI,EAAE,CAAA,CACpH,QAAA,CAAA,eAAA,CAED,GACF,CAAA,CAGAtT,IAAAA,CAAC,OAAI,SAAA,CAAU,KAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,QAAA,CAAA,CAAO,IAAA,CAAK,SAAS,OAAA,CAAS,IAAM0U,EAAmB,IAAI,IAAA,CAAKD,EAAgB,WAAA,EAAY,CAAGA,EAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CAAG,UAAU,+BAAA,CAAgC,QAAA,CAAAzU,IAAC2oC,WAAAA,CAAA,CAAY,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAOshB,CAAAA,CAAY,aAAc,CAAA,CAAG,CAAA,CAAE,CAAA,CAC5PjqD,GAAAA,CAAC,QAAK,SAAA,CAAU,qBAAA,CAAsB,MAAO,CAAE,KAAA,CAAOiqD,EAAY,WAAY,CAAA,CAAI,SAAAx1C,CAAAA,CAAgB,kBAAA,CAAmB,QAAS,CAAE,KAAA,CAAO,OAAQ,IAAA,CAAM,SAAU,CAAC,CAAA,CAAE,CAAA,CAClKzU,IAAC,QAAA,CAAA,CAAO,IAAA,CAAK,SAAS,OAAA,CAAS,IAAM0U,EAAmB,IAAI,IAAA,CAAKD,EAAgB,WAAA,EAAY,CAAGA,EAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CAAG,UAAU,+BAAA,CAAgC,QAAA,CAAAzU,IAACo9B,YAAAA,CAAA,CAAa,UAAU,SAAA,CAAU,KAAA,CAAO,CAAE,KAAA,CAAO6sB,CAAAA,CAAY,aAAc,CAAA,CAAG,CAAA,CAAE,GAC/P,CAAA,CACAjqD,GAAAA,CAAC,OAAI,SAAA,CAAU,6BAAA,CACZ,UAAC,GAAA,CAAK,GAAA,CAAK,IAAK,GAAA,CAAK,GAAA,CAAK,IAAK,GAAG,CAAA,CAAE,IAAI,CAACgG,CAAAA,CAAG/N,KAC3C+H,GAAAA,CAAC,KAAA,CAAA,CAAY,UAAU,kDAAA,CAAmD,KAAA,CAAO,CAAE,KAAA,CAAOiqD,CAAAA,CAAY,YAAa,CAAA,CAAI,QAAA,CAAAjkD,GAA7G/N,EAA+G,CAC1H,EACH,CAAA,CACA+H,GAAAA,CAAC,OAAI,SAAA,CAAU,wBAAA,CACX,QAAA,CAAA,CAAA,IAAM,CACN,IAAM4D,CAAAA,CAAO6Q,CAAAA,CAAgB,aAAY,CAAG5Q,EAAAA,CAAQ4Q,EAAgB,QAAA,EAAS,CACvE4C,GAAW,IAAI,IAAA,CAAKzT,EAAMC,EAAAA,CAAO,CAAC,EAAE,MAAA,EAAO,CAC3CyT,GAAc,IAAI,IAAA,CAAK1T,EAAMC,EAAAA,CAAQ,CAAA,CAAG,CAAC,CAAA,CAAE,OAAA,GAC3Cc,EAAAA,CAAQ,IAAI,KACZnB,EAAAA,CAA+D,GAErE,IAAA,IAASvL,EAAAA,CAAIof,GAAW,CAAA,CAAGpf,EAAAA,EAAK,EAAGA,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,KAAK,CAAE,GAAA,CAAK,IAAI,IAAA,CAAKI,CAAAA,CAAMC,GAAO,CAAC5L,EAAC,EAAE,OAAA,EAAQ,CAAG,KAAM,IAAI,IAAA,CAAK2L,EAAMC,EAAAA,CAAQ,CAAA,CAAG,IAAI,IAAA,CAAKD,CAAAA,CAAMC,GAAO,CAAC5L,EAAC,EAAE,OAAA,EAAS,EAAG,cAAA,CAAgB,KAAM,CAAC,CAAA,CAC3L,IAAA,IAASA,GAAI,CAAA,CAAGA,EAAAA,EAAKqf,GAAarf,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,KAAK,CAAE,GAAA,CAAKvL,GAAG,IAAA,CAAM,IAAI,KAAK2L,CAAAA,CAAMC,EAAAA,CAAO5L,EAAC,CAAA,CAAG,cAAA,CAAgB,IAAK,CAAC,CAAA,CACjH,IAAM4wC,EAAAA,CAAY,EAAA,CAAKrlC,GAAK,MAAA,CAC5B,IAAA,IAASvL,GAAI,CAAA,CAAGA,EAAAA,EAAK4wC,GAAW5wC,EAAAA,EAAAA,CAAKuL,EAAAA,CAAK,KAAK,CAAE,GAAA,CAAKvL,GAAG,IAAA,CAAM,IAAI,KAAK2L,CAAAA,CAAMC,EAAAA,CAAQ,EAAG5L,EAAC,CAAA,CAAG,eAAgB,KAAM,CAAC,EAEpH,OAAOuL,EAAAA,CAAK,IAAI,CAACwC,EAAAA,CAAG/N,IAAM,CACxB,IAAMwhB,GAAUzT,EAAAA,CAAE,IAAA,CAAK,cAAa,GAAMrB,EAAAA,CAAM,cAAa,CACvDonD,EAAAA,CAAUhB,EAAS,SAAA,EAAW,YAAA,KAAmB/kD,EAAAA,CAAE,IAAA,CAAK,cAAa,CACrEgmD,EAAAA,CAAQjB,EAAS,OAAA,EAAS,YAAA,KAAmB/kD,EAAAA,CAAE,IAAA,CAAK,cAAa,CACjE4T,EAAAA,CAAYmxC,EAAS,SAAA,EAAaA,CAAAA,CAAS,SAAW/kD,EAAAA,CAAE,IAAA,EAAQ+kD,EAAS,SAAA,EAAa/kD,EAAAA,CAAE,MAAQ+kD,CAAAA,CAAS,OAAA,CAE/G,OACE/qD,GAAAA,CAAC,QAAA,CAAA,CAEC,KAAK,QAAA,CACL,SAAA,CAAU,kFACV,KAAA,CAAO,CACL,MAAQgG,EAAAA,CAAE,cAAA,CAA4C+lD,IAAWC,EAAAA,CAAQ,MAAA,CAAS/B,EAAY,WAAA,CAAnEA,CAAAA,CAAY,YAAA,CACvC,eAAA,CAAiB8B,GAAU,SAAA,CAAYC,EAAAA,CAAQ,UAAYpyC,EAAAA,CAAY,yBAAA,CAA4B,cACnG,SAAA,CAAWH,EAAAA,EAAW,CAACsyC,EAAAA,EAAW,CAACC,GAAQ,yBAAA,CAA4B,MACzE,EACA,OAAA,CAAS,IAAM,CACTz3C,CAAAA,GAAmB,OAAA,EACrBjF,GAAa,WAAA,CAAatJ,EAAAA,CAAE,IAAI,CAAA,CAC5B+kD,CAAAA,CAAS,SAAW/kD,EAAAA,CAAE,IAAA,CAAO+kD,EAAS,OAAA,EAASz7C,EAAAA,CAAa,UAAWtJ,EAAAA,CAAE,IAAI,EACjFwO,CAAAA,CAAkB,KAAK,IAEvBlF,EAAAA,CAAa,SAAA,CAAWtJ,GAAE,IAAI,CAAA,CAC1B+kD,EAAS,SAAA,EAAa/kD,EAAAA,CAAE,KAAO+kD,CAAAA,CAAS,SAAA,EAAWz7C,GAAa,WAAA,CAAatJ,EAAAA,CAAE,IAAI,CAAA,CACvFwO,CAAAA,CAAkB,IAAI,CAAA,EAE1B,CAAA,CAEC,SAAAxO,EAAAA,CAAE,GAAA,CAAA,CApBE/N,CAqBP,CAEJ,CAAC,CACH,CAAA,GAAG,CACL,GACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CACCsG,GAAO,OAAA,EAAWyB,GAAAA,CAAC,QAAK,SAAA,CAAU,sBAAA,CAAwB,SAAAzB,EAAAA,CAAO,OAAA,CAAQ,GAC5E,CAAA,CAGA2C,IAAAA,CAAC,OAAI,SAAA,CAAU,yBAAA,CACb,UAAAlB,GAAAA,CAAC+Z,KAAAA,CAAA,CAAM,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,MAAOkwC,CAAAA,CAAY,YAAa,EAAG,CAAA,CACvE/oD,IAAAA,CAAC,OAAI,SAAA,CAAU,gCAAA,CACb,UAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,KAAK,OAAA,CACL,GAAA,CAAI,IACJ,GAAA,CAAI,KAAA,CACJ,KAAK,GAAA,CACL,KAAA,CAAO+qD,EAAS,QAAA,CAChB,QAAA,CAAWpoD,GAAM2M,EAAAA,CAAa,UAAA,CAAY,SAAS3M,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAC,CAAA,CAClE,UAAU,0DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBsnD,CAAAA,CAAY,YAC7B,WAAA,CAAac,CAAAA,CAAS,SAAW,EAAA,CAAK,SAAA,CAAYA,EAAS,QAAA,CAAW,EAAA,CAAK,UAAY,SACzF,CAAA,CACA,SAAUrvC,CAAAA,CACZ,CAAA,CACAxa,KAAC,MAAA,CAAA,CACC,SAAA,CAAU,wEACV,KAAA,CAAO,CACL,gBAAiB,CAAA,EAAG6pD,CAAAA,CAAS,SAAW,EAAA,CAAK,SAAA,CAAYA,EAAS,QAAA,CAAW,EAAA,CAAK,UAAY,SAAS,CAAA,EAAA,CAAA,CACvG,MAAOA,CAAAA,CAAS,QAAA,CAAW,GAAK,SAAA,CAAYA,CAAAA,CAAS,SAAW,EAAA,CAAK,SAAA,CAAY,SACnF,CAAA,CAEC,QAAA,CAAA,CAAAA,EAAS,QAAA,CAAS,GAAA,CAAA,CACrB,GACF,CAAA,CAAA,CACF,CAAA,CAIA7pD,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAA,IAAAA,CAAC,QAAA,CAAA,CACC,KAAK,QAAA,CACL,OAAA,CAAS,IAAMqpD,EAAAA,CAAgB,CAACD,EAAY,CAAA,CAC5C,SAAA,CAAU,gEACV,KAAA,CAAO,CAAE,MAAOL,CAAAA,CAAY,YAAa,EAEzC,QAAA,CAAA,CAAAjqD,GAAAA,CAAC+R,YAAA,CAAY,SAAA,CAAW,gCAAgCu4C,EAAAA,CAAe,YAAA,CAAe,EAAE,CAAA,CAAA,CAAI,CAAA,CAAE,sBAEhG,CAAA,CAEAtqD,GAAAA,CAACiQ,gBAAA,CACE,QAAA,CAAAq6C,IACCtqD,GAAAA,CAACkQ,MAAAA,CAAO,IAAP,CACC,OAAA,CAAS,CAAE,MAAA,CAAQ,CAAA,CAAG,QAAS,CAAE,CAAA,CACjC,QAAS,CAAE,MAAA,CAAQ,OAAQ,OAAA,CAAS,CAAE,EACtC,IAAA,CAAM,CAAE,OAAQ,CAAA,CAAG,OAAA,CAAS,CAAE,CAAA,CAC9B,SAAA,CAAU,kBAEV,QAAA,CAAAhP,IAAAA,CAAC,OAAI,SAAA,CAAU,gBAAA,CAEX,WAAAqS,CAAAA,EAAuBD,CAAAA,CAAY,OAAS,CAAA,EAAKm6B,CAAAA,GAAS,WAC1DvsC,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,IAAC,KAAA,CAAA,CACC,KAAA,CAAM,KACN,MAAA,CAAO,IAAA,CACP,QAAQ,WAAA,CACR,IAAA,CAAK,OACL,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CACZ,KAAA,CAAO,CAAE,KAAA,CAAOiqD,CAAAA,CAAY,YAAa,CAAA,CAEzC,QAAA,CAAAjqD,IAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gHAAgH,CAAA,CAC1H,CAAA,CACAkB,KAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,MAAO+oD,CAAAA,CAAY,YAAa,EAAG,QAAA,CAAA,CAAA,WAAA,CAC1Dxc,CAAAA,GAAS,SACd+c,EAAAA,CAAa,MAAA,CAAS,GAAK,CAAA,CAAA,EAAIA,EAAAA,CAAa,MAAM,CAAA,CAAA,CAAA,CAClDl3C,CAAAA,CAAY,OAAS,CAAA,EAAK,CAAA,CAAA,EAAIA,EAAY,MAAM,CAAA,CAAA,CAAA,CAAA,CACvD,GACF,CAAA,CACCm6B,CAAAA,GAAS,SACRztC,GAAAA,CAACslB,EAAAA,CAAA,CACC,MAAA,CAAO,SAAA,CACP,YAAaklC,EAAAA,CAAa,GAAA,CAAI,CAACprD,CAAAA,CAAM2lB,EAAAA,IAAS,CAC5C,EAAA,CAAI,CAAA,QAAA,EAAWA,EAAG,CAAA,CAAA,CAClB,MAAA,CAAQ,UACR,IAAA,CAAM3lB,CAAAA,CAAK,KACX,IAAA,CAAMA,CAAAA,CAAK,KACX,IAAA,CAAMA,CAAAA,CAAK,KACX,GAAA,CAAK,GAAA,CAAI,gBAAgBA,CAAI,CAAA,CAC7B,WAAY,IAAI,IAAA,GAAO,WAAA,EAAY,CACnC,WAAY,cACd,CAAA,CAAE,EACF,QAAA,CAAWuY,CAAAA,EAAU8yC,GAAgB76C,EAAAA,EAAQ,CAAC,GAAGA,EAAAA,CAAM,GAAG+H,CAAK,CAAC,EAChE,QAAA,CAAWnQ,CAAAA,EAAO,CAChB,IAAMud,EAAAA,CAAM,SAASvd,CAAAA,CAAG,OAAA,CAAQ,WAAY,EAAE,CAAA,CAAG,EAAE,CAAA,CACnDijD,EAAAA,CAAgB76C,IAAQA,EAAAA,CAAK,MAAA,CAAO,CAAC5X,EAAAA,CAAGC,EAAAA,GAAMA,KAAM8sB,EAAG,CAAC,EAC1D,CAAA,CACA,SAAA,CAAW,GACX,QAAA,CAAU,EAAA,CACZ,EAEA/kB,GAAAA,CAACslB,EAAAA,CAAA,CACC,MAAA,CAAQzd,CAAAA,EAAM,IAAM,KAAA,CACpB,WAAA,CAAayL,EACb,QAAA,CAAUC,CAAAA,EAAuB1L,GAAM,EAAA,CAAM8P,CAAAA,EAAUpE,EAAoB1L,CAAAA,CAAK,EAAA,CAAI8P,CAAK,CAAA,CAAI,MAAA,CAC7F,SAAUnE,CAAAA,CACV,SAAA,CAAW,GACX,QAAA,CAAU,EAAA,CACZ,EAEDi6B,CAAAA,GAAS,QAAA,EAAY+c,GAAa,MAAA,CAAS,CAAA,EAC1CtpD,KAAC,GAAA,CAAA,CAAE,SAAA,CAAU,eAAe,KAAA,CAAO,CAAE,MAAO+oD,CAAAA,CAAY,YAAa,EAClE,QAAA,CAAA,CAAAO,EAAAA,CAAa,OAAO,6CAAA,CAAA,CACvB,CAAA,CAAA,CAEJ,EAKFtpD,IAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,0FAAA,CACf,QAAA,CAAA,CAAAlB,IAAC,OAAA,CAAA,CACC,IAAA,CAAK,WACL,OAAA,CAAS+qD,CAAAA,CAAS,WAAA,CAClB,QAAA,CAAWpoD,GAAM2M,EAAAA,CAAa,aAAA,CAAe3M,EAAE,MAAA,CAAO,OAAO,EAC7D,SAAA,CAAU,iBAAA,CACV,MAAO,CAAE,WAAA,CAAasnD,EAAY,MAAO,CAAA,CACzC,SAAUvuC,CAAAA,CACZ,CAAA,CACA1b,IAACisD,SAAAA,CAAA,CAAc,UAAU,yBAAA,CAA0B,CAAA,CACnDjsD,IAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAU,KAAA,CAAO,CAAE,MAAOiqD,CAAAA,CAAY,WAAY,EAAG,QAAA,CAAA,kBAAA,CAAgB,CAAA,CAAA,CACvF,EAGCtjD,CAAAA,CAAe,MAAA,CAAS,GACvBzF,IAAAA,CAAC,KAAA,CAAA,CACC,UAAAA,IAAAA,CAAC,OAAA,CAAA,CAAM,UAAU,sCAAA,CAAuC,KAAA,CAAO,CAAE,KAAA,CAAO+oD,CAAAA,CAAY,YAAa,CAAA,CAC/F,QAAA,CAAA,CAAAjqD,IAACia,KAAAA,CAAA,CAAM,UAAU,aAAA,CAAc,CAAA,CAAE,gBAEnC,CAAA,CACAja,GAAAA,CAAC,OAAI,SAAA,CAAU,gEAAA,CAAiE,MAAO,CAAE,eAAA,CAAiBiqD,EAAY,WAAY,CAAA,CAC/H,SAAAtjD,CAAAA,CAAe,MAAA,CAAOW,GAAKA,CAAAA,CAAE,EAAA,GAAOO,GAAM,EAAE,CAAA,CAAE,IAAKP,CAAAA,EAAM,CACxD,IAAMc,EAAAA,CAAa2iD,CAAAA,CAAS,cAAc,QAAA,CAASzjD,CAAAA,CAAE,EAAE,CAAA,CACvD,OACEtH,GAAAA,CAAC,QAAA,CAAA,CAEC,KAAK,QAAA,CACL,OAAA,CAAS,IAAM,CACb,IAAMuH,GAAUa,EAAAA,CAAAA,CACX2iD,CAAAA,CAAS,cAAgB,EAAC,EAAG,OAAOvjD,EAAAA,EAAMA,EAAAA,GAAOF,EAAE,EAAE,CAAA,CACtD,CAAC,GAAIyjD,CAAAA,CAAS,cAAgB,EAAC,CAAIzjD,EAAE,EAAE,CAAA,CAC3CgI,GAAa,cAAA,CAAgB/H,EAAO,EACtC,CAAA,CACA,SAAA,CAAU,mDACV,KAAA,CAAO,CACL,gBAAiBa,EAAAA,CAAa,CAAA,EAAG6hD,EAAY,MAAM,CAAA,EAAA,CAAA,CAAOA,EAAY,SAAA,CACtE,KAAA,CAAO7hD,GAAa6hD,CAAAA,CAAY,MAAA,CAASA,EAAY,aAAA,CACrD,MAAA,CAAQ,aAAa7hD,EAAAA,CAAa6hD,CAAAA,CAAY,OAASA,CAAAA,CAAY,WAAW,EAChF,CAAA,CACA,QAAA,CAAUvuC,EAET,QAAA,CAAApU,CAAAA,CAAE,MAhBEA,CAAAA,CAAE,EAiBT,CAEJ,CAAC,CAAA,CACH,GACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAGApG,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,+CAAA,CAAgD,KAAA,CAAO,CAAE,SAAA,CAAW,CAAA,UAAA,EAAa+oD,EAAY,MAAM,CAAA,CAAG,EACnH,QAAA,CAAA,CAAAjqD,GAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QAASoT,CAAAA,CACT,SAAA,CAAU,iDACV,KAAA,CAAO,CAAE,MAAO62C,CAAAA,CAAY,aAAc,EAC1C,YAAA,CAAetnD,CAAAA,EAAOA,EAAE,aAAA,CAAc,KAAA,CAAM,gBAAkBsnD,CAAAA,CAAY,OAAA,CAC1E,aAAetnD,CAAAA,EAAOA,CAAAA,CAAE,cAAc,KAAA,CAAM,eAAA,CAAkB,cAC9D,QAAA,CAAU+Y,CAAAA,CACX,oBAED,CAAA,CACA1b,GAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,SAAU0b,CAAAA,CACV,SAAA,CAAU,qFACV,KAAA,CAAO,CAAE,gBAAiBuuC,CAAAA,CAAY,MAAA,CAAQ,MAAO,MAAO,CAAA,CAC5D,aAAetnD,CAAAA,EAAM,CAAC+Y,IAAc/Y,CAAAA,CAAE,aAAA,CAAc,MAAM,OAAA,CAAU,KAAA,CAAA,CACpE,aAAeA,CAAAA,EAAM,CAAC+Y,IAAc/Y,CAAAA,CAAE,aAAA,CAAc,MAAM,OAAA,CAAU,GAAA,CAAA,CAEnE,SAAA+Y,CAAAA,CACCxa,IAAAA,CAAA6G,SAAA,CAAE,QAAA,CAAA,CAAA/H,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4EAA4E,CAAA,CAAE,cAAA,CAAA,CAAY,EAE3GA,GAAAA,CAAA+H,QAAAA,CAAA,CAAG,QAAA,CAAA0lC,CAAAA,GAAS,SAAW,aAAA,CAAgB,SAAA,CAAU,EAErD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,GACF,CAAA,CACF,CAAA,CAAA,CACF,EAEJ,CAEJ,KCziCaye,EAAAA,CAAyB,CAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,yDAAA,EA8C/B,SAASC,EAAAA,CAAqBhuB,CAAAA,CAAuB,CAW1D,OAAO,CAAA;AAAA,EAVWe,EAAAA,CAAaf,CAAK,CAAA,CAEjC,GAAA,CAAK72B,GAAM,CACV,IAAMhD,CAAAA,CAAQgD,CAAAA,CAAE,SAAA,CAAYA,CAAAA,CAAE,SAAA,CAAU,WAAA,GAAc,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAI,SAAA,CAChE/C,CAAAA,CAAM+C,CAAAA,CAAE,QAAUA,CAAAA,CAAE,OAAA,CAAQ,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,EAAI,SAAA,CAC1DvB,CAAAA,CAAOuB,CAAAA,CAAE,YAAA,EAAc,MAAA,CAAS,CAAA,OAAA,EAAUA,CAAAA,CAAE,YAAA,CAAa,KAAK,IAAI,CAAC,CAAA,CAAA,CAAA,CAAM,EAAA,CAC/E,OAAO,CAAA,EAAA,EAAKA,CAAAA,CAAE,EAAE,MAAMA,CAAAA,CAAE,IAAI,CAAA,GAAA,EAAMhD,CAAK,CAAA,IAAA,EAAOC,CAAG,CAAA,EAAA,EAAK+C,CAAAA,CAAE,QAAQ,CAAA,GAAA,EAAMA,CAAAA,CAAE,MAAA,EAAU,MAAM,CAAA,EAAA,EAAKvB,CAAI,CAAA,CACnG,CAAC,EACA,IAAA,CAAK;AAAA,CAAI,CAEsB;;AAAA,cAAA,EAAqB,IAAI,IAAA,EAAK,CAAE,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAC,CAAA,CAC/F,CAKA,SAASm5B,EAAAA,CAAaf,CAAAA,CAAuB,CAC3C,IAAMlkC,CAAAA,CAAiB,EAAC,CAClBg6C,CAAAA,CAAWrQ,CAAAA,EAAqB,CACpC,IAAA,IAAW/7B,CAAAA,IAAQ+7B,CAAAA,CACjB3pC,CAAAA,CAAO,IAAA,CAAK4N,CAAI,EACZA,CAAAA,CAAK,QAAA,EAAU,MAAA,EACjBosC,CAAAA,CAAQpsC,CAAAA,CAAK,QAAQ,EAG3B,CAAA,CACA,OAAAosC,CAAAA,CAAQ9V,CAAK,CAAA,CACNlkC,CACT,CAKO,SAASmyD,EAAAA,CAAejuB,CAAAA,CAAelwB,CAAAA,CAAgC,CAC5E,IAAMoxB,CAAAA,CAAYH,EAAAA,CAAaf,CAAK,CAAA,CAC9BkuB,CAAAA,CAAiBp+C,CAAAA,CAAK,WAAA,EAAY,CAAE,IAAA,EAAK,CAGzCq+C,EAAQjtB,CAAAA,CAAU,IAAA,CAAM/3B,CAAAA,EAAMA,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,GAAM+kD,CAAc,CAAA,CAC3E,GAAIC,CAAAA,CAAO,OAAOA,CAAAA,CAGlB,IAAMC,CAAAA,CAAUltB,CAAAA,CAAU,IAAA,CAAM/3B,CAAAA,EAAMA,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAAS+kD,CAAc,CAAC,CAAA,CACnF,GAAIE,CAAAA,CAAS,OAAOA,CAAAA,CAGpB,IAAMC,CAAAA,CAAQH,CAAAA,CAAe,KAAA,CAAM,KAAK,CAAA,CACxC,OAAOhtB,CAAAA,CAAU,IAAA,CAAM/3B,CAAAA,EAAM,CAC3B,IAAMiiD,CAAAA,CAAWjiD,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CACpC,OAAOklD,CAAAA,CAAM,KAAA,CAAOC,CAAAA,EAASlD,CAAAA,CAAS,QAAA,CAASkD,CAAI,CAAC,CACtD,CAAC,CACH,CAKO,SAASC,EAAAA,CAAiBr/C,CAAAA,CAAcs/C,EAAgB,IAAI,IAAA,CAAqB,CACtF,IAAMC,CAAAA,CAAav/C,CAAAA,CAAK,WAAA,EAAY,CAAE,IAAA,EAAK,CACrC1I,CAAAA,CAAQ,IAAI,IAAA,CAAKgoD,CAAa,CAAA,CAIpC,GAHAhoD,CAAAA,CAAM,QAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CAGrBioD,CAAAA,GAAe,OAAA,EAAWA,CAAAA,GAAe,KAAA,CAC3C,OAAOjoD,CAAAA,CAIT,GAAIioD,CAAAA,GAAe,UAAA,EAAcA,CAAAA,GAAe,WAAA,CAAU,CACxD,IAAMjpD,CAAAA,CAAO,IAAI,IAAA,CAAKgB,CAAK,CAAA,CAC3B,OAAAhB,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAI,CAAC,CAAA,CACxBA,CACT,CAGA,GAAIipD,CAAAA,GAAe,WAAA,EAAeA,CAAAA,GAAe,MAAA,CAAQ,CACvD,IAAMjpD,CAAAA,CAAO,IAAI,IAAA,CAAKgB,CAAK,EAC3B,OAAAhB,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAI,CAAC,CAAA,CACxBA,CACT,CAGA,GAAIipD,CAAAA,GAAe,WAAA,EAAeA,CAAAA,GAAe,sBAAA,CAAqB,CACpE,IAAMjpD,CAAAA,CAAO,IAAI,IAAA,CAAKgB,CAAK,CAAA,CAC3B,OAAAhB,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAI,CAAC,CAAA,CACxBA,CACT,CAGA,IAAMkpD,CAAAA,CAAWD,CAAAA,CAAW,KAAA,CAAM,+IAA+I,CAAA,CACjL,GAAIC,CAAAA,CAAU,CAUZ,IAAMC,CAAAA,CATmC,CACvC,MAAA,CAAQ,CAAA,CAAG,OAAA,CAAS,CAAA,CACpB,MAAA,CAAQ,CAAA,CAAG,KAAA,CAAO,CAAA,CAClB,OAAA,CAAS,CAAA,CAAG,MAAA,CAAQ,CAAA,CACpB,SAAA,CAAW,CAAA,CAAG,cAAA,CAAW,CAAA,CAAG,SAAA,CAAW,CAAA,CACvC,SAAU,CAAA,CAAG,MAAA,CAAQ,CAAA,CACrB,MAAA,CAAQ,CAAA,CAAG,OAAA,CAAS,CAAA,CACpB,QAAA,CAAU,CAAA,CAAG,WAAA,CAAQ,CAAA,CAAG,MAAA,CAAQ,CAClC,CAAA,CAC2BD,CAAAA,CAAS,CAAC,CAAA,CAAG,WAAA,EAAa,CAAA,CACrD,GAAIC,CAAAA,GAAc,MAAA,CAAW,CAC3B,IAAMnpD,CAAAA,CAAO,IAAI,IAAA,CAAKgB,CAAK,CAAA,CACrBooD,CAAAA,CAAappD,CAAAA,CAAK,MAAA,EAAO,CAC3BqpD,CAAAA,CAAYF,CAAAA,CAAYC,CAAAA,CAC5B,OAAIC,CAAAA,EAAa,CAAA,GAAGA,CAAAA,EAAa,CAAA,CAAA,CACjCrpD,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAIqpD,CAAS,CAAA,CAChCrpD,CACT,CACF,CAGA,IAAMspD,CAAAA,CAAUL,CAAAA,CAAW,KAAA,CAAM,oEAAoE,CAAA,CACrG,GAAIK,CAAAA,EAAWA,CAAAA,CAAQ,CAAC,GAAKA,CAAAA,CAAQ,CAAC,CAAA,CAAG,CACvC,IAAMC,CAAAA,CAAS,QAAA,CAASD,CAAAA,CAAQ,CAAC,CAAA,CAAG,EAAE,CAAA,CAChCE,CAAAA,CAAOF,CAAAA,CAAQ,CAAC,CAAA,CAAE,WAAA,EAAY,CAC9BtpD,CAAAA,CAAO,IAAI,IAAA,CAAKgB,CAAK,CAAA,CAE3B,OAAIwoD,CAAAA,GAAS,KAAA,EAASA,CAAAA,GAAS,QAAA,EAASA,CAAAA,GAAS,MAAA,CAC/CxpD,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAIupD,CAAM,CAAA,CAC3BC,CAAAA,GAAS,MAAA,EAAUA,CAAAA,GAAS,QAAA,EAAYA,CAAAA,GAAS,SAAA,CAC1DxpD,CAAAA,CAAK,OAAA,CAAQA,CAAAA,CAAK,OAAA,EAAQ,CAAIupD,CAAAA,CAAS,CAAC,CAAA,CAAA,CAC/BC,CAAAA,GAAS,OAAA,EAAWA,CAAAA,GAAS,KAAA,EAASA,CAAAA,GAAS,OAAA,GACxDxpD,CAAAA,CAAK,QAAA,CAASA,CAAAA,CAAK,QAAA,EAAS,CAAIupD,CAAM,CAAA,CAEjCvpD,CACT,CAIA,GADiBipD,CAAAA,CAAW,KAAA,CAAM,yBAAyB,CAAA,CAEzD,OAAO,IAAI,IAAA,CAAKA,CAAU,CAAA,CAI5B,IAAMQ,CAAAA,CAAYR,CAAAA,CAAW,KAAA,CAAM,+BAA+B,CAAA,CAClE,GAAIQ,CAAAA,EAAaA,CAAAA,CAAU,CAAC,CAAA,EAAKA,CAAAA,CAAU,CAAC,CAAA,EAAKA,CAAAA,CAAU,CAAC,CAAA,CAAG,CAE7D,IAAMtpD,CAAAA,CAAM,QAAA,CAASspD,CAAAA,CAAU,CAAC,CAAA,CAAG,EAAE,CAAA,CAC/BvpD,CAAAA,CAAQ,QAAA,CAASupD,CAAAA,CAAU,CAAC,CAAA,CAAG,EAAE,CAAA,CAAI,CAAA,CACrCxpD,CAAAA,CAAO,QAAA,CAASwpD,CAAAA,CAAU,CAAC,CAAA,CAAG,EAAE,CAAA,CACtC,OAAO,IAAI,IAAA,CAAKxpD,CAAAA,CAAMC,CAAAA,CAAOC,CAAG,CAClC,CAGA,IAAMupD,CAAAA,CAAwC,CAC5C,KAAA,CAAO,CAAA,CAAG,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,IAAA,CAAM,CAAA,CAAG,KAAA,CAAO,CAAA,CAC1D,KAAA,CAAO,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAG,UAAA,CAAY,CAAA,CAAG,OAAA,CAAS,CAAA,CAAG,SAAA,CAAW,EAAA,CAAI,SAAA,CAAW,EAC5E,CAAA,CACMC,CAAAA,CAAmBV,CAAAA,CAAW,KAAA,CAAM,kIAAkI,CAAA,CAC5K,GAAIU,CAAAA,EAAoBA,CAAAA,CAAiB,CAAC,CAAA,EAAKA,CAAAA,CAAiB,CAAC,CAAA,CAAG,CAClE,IAAMxpD,CAAAA,CAAM,QAAA,CAASwpD,CAAAA,CAAiB,CAAC,CAAA,CAAG,EAAE,CAAA,CACtCzpD,CAAAA,CAAQwpD,CAAAA,CAAcC,CAAAA,CAAiB,CAAC,CAAA,CAAE,WAAA,EAAa,CAAA,CACvD1pD,CAAAA,CAAO0pD,CAAAA,CAAiB,CAAC,CAAA,CAAI,QAAA,CAASA,EAAiB,CAAC,CAAA,CAAG,EAAE,CAAA,CAAI3oD,CAAAA,CAAM,WAAA,EAAY,CACzF,GAAId,CAAAA,GAAU,MAAA,CACZ,OAAO,IAAI,IAAA,CAAKD,CAAAA,CAAMC,CAAAA,CAAOC,CAAG,CAEpC,CAGA,IAAMypD,CAAAA,CAAwC,CAC5C,OAAA,CAAS,CAAA,CAAG,QAAA,CAAU,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,GAAA,CAAK,CAAA,CAAG,IAAA,CAAM,CAAA,CAC3D,IAAA,CAAM,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAG,SAAA,CAAW,CAAA,CAAG,OAAA,CAAS,CAAA,CAAG,QAAA,CAAU,EAAA,CAAI,QAAA,CAAU,EACxE,CAAA,CACMC,CAAAA,CAAmBZ,CAAAA,CAAW,KAAA,CAAM,uHAAuH,CAAA,CACjK,GAAIY,CAAAA,EAAoBA,CAAAA,CAAiB,CAAC,CAAA,EAAKA,CAAAA,CAAiB,CAAC,CAAA,CAAG,CAClE,IAAM3pD,CAAAA,CAAQ0pD,EAAcC,CAAAA,CAAiB,CAAC,CAAA,CAAE,WAAA,EAAa,CAAA,CACvD1pD,CAAAA,CAAM,QAAA,CAAS0pD,CAAAA,CAAiB,CAAC,CAAA,CAAG,EAAE,CAAA,CACtC5pD,CAAAA,CAAO4pD,CAAAA,CAAiB,CAAC,CAAA,CAAI,QAAA,CAASA,CAAAA,CAAiB,CAAC,CAAA,CAAG,EAAE,CAAA,CAAI7oD,CAAAA,CAAM,WAAA,EAAY,CACzF,GAAId,CAAAA,GAAU,MAAA,CACZ,OAAO,IAAI,IAAA,CAAKD,CAAAA,CAAMC,CAAAA,CAAOC,CAAG,CAEpC,CAEA,OAAO,IACT,CAKO,SAAS2pD,EAAAA,CAAqBpgD,CAAAA,CAA6B,CAIhE,IAAMS,CAAAA,CAHaT,CAAAA,CAAK,WAAA,EAAY,CAAE,IAAA,EAAK,CAGlB,KAAA,CAAM,+DAA+D,CAAA,CAC9F,GAAIS,CAAAA,EAASA,CAAAA,CAAM,CAAC,CAAA,EAAKA,CAAAA,CAAM,CAAC,CAAA,CAAG,CACjC,IAAMo/C,CAAAA,CAAS,QAAA,CAASp/C,CAAAA,CAAM,CAAC,CAAA,CAAG,EAAE,CAAA,CAC9Bq/C,CAAAA,CAAOr/C,CAAAA,CAAM,CAAC,CAAA,CAAE,WAAA,EAAY,CAElC,GAAIq/C,CAAAA,GAAS,KAAA,EAASA,CAAAA,GAAS,QAAA,EAASA,CAAAA,GAAS,MAAA,CAC/C,OAAOD,CAAAA,CACF,GAAIC,CAAAA,GAAS,MAAA,EAAUA,CAAAA,GAAS,QAAA,EAAYA,CAAAA,GAAS,SAAA,CAC1D,OAAOD,CAAAA,CAAS,CAAA,CACX,GAAIC,CAAAA,GAAS,OAAA,EAAWA,CAAAA,GAAS,KAAA,EAASA,CAAAA,GAAS,OAAA,CACxD,OAAOD,CAAAA,CAAS,EAEpB,CAEA,OAAO,IACT,CAKO,SAASQ,EAAAA,CAAcrgD,CAAAA,CAA6B,CACzD,IAAMS,CAAAA,CAAQT,CAAAA,CAAK,KAAA,CAAM,gBAAgB,CAAA,CACzC,GAAIS,CAAAA,EAASA,CAAAA,CAAM,CAAC,CAAA,CAAG,CACrB,IAAM1Q,CAAAA,CAAQ,QAAA,CAAS0Q,CAAAA,CAAM,CAAC,CAAA,CAAG,EAAE,CAAA,CACnC,OAAO,IAAA,CAAK,GAAA,CAAI,CAAA,CAAG,IAAA,CAAK,GAAA,CAAI,GAAA,CAAK1Q,CAAK,CAAC,CACzC,CACA,OAAO,IACT,CAKO,SAASuwD,EAAAA,CAAYtgD,CAAAA,CAA2D,CACrF,IAAMu/C,CAAAA,CAAav/C,CAAAA,CAAK,WAAA,EAAY,CAAE,IAAA,EAAK,CAE3C,OAAIu/C,CAAAA,CAAW,QAAA,CAAS,MAAM,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,WAAW,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,WAAW,CAAA,CAC7F,MAAA,CAELA,CAAAA,CAAW,QAAA,CAAS,aAAa,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,aAAa,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,aAAa,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,SAAS,GAAKA,CAAAA,CAAW,QAAA,CAAS,YAAY,CAAA,CAC/K,aAAA,CAELA,CAAAA,CAAW,QAAA,CAAS,MAAM,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,UAAU,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,UAAU,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,YAAY,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,WAAW,CAAA,EAAKA,CAAAA,CAAW,QAAA,CAAS,OAAO,CAAA,CACpM,WAAA,CAGF,IACT,CAMO,SAASgB,EAAAA,CAAkB/Q,CAAAA,CAAiB1e,CAAAA,CAAuC,CACxF,IAAMyuB,CAAAA,CAAa/P,CAAAA,CAAQ,WAAA,EAAY,CAAE,IAAA,EAAK,CAIxCgR,CAAAA,CAAYjB,CAAAA,CAAW,KAAA,CAAM,sGAAsG,CAAA,CACzI,GAAIiB,CAAAA,EAAaA,CAAAA,CAAU,CAAC,CAAA,EAAKA,CAAAA,CAAU,CAAC,CAAA,CAAG,CAC7C,IAAMtE,CAAAA,CAAWsE,CAAAA,CAAU,CAAC,EAAE,IAAA,EAAK,CAC7BC,CAAAA,CAAWD,CAAAA,CAAU,CAAC,CAAA,CAAE,IAAA,EAAK,CAC7BhmD,CAAAA,CAAOukD,EAAAA,CAAejuB,CAAAA,CAAOorB,CAAQ,CAAA,CACrCn8B,CAAAA,CAAUs/B,EAAAA,CAAiBoB,CAAQ,CAAA,CAEzC,GAAI,CAACjmD,CAAAA,CACH,OAAO,CACL,IAAA,CAAM,WAAA,CACN,QAAA,CAAA0hD,CAAAA,CACA,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAQ,CAAA,4CAAA,CAAA,CACjD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,gBACT,CAAA,CAGF,GAAI,CAACn8B,CAAAA,CACH,OAAO,CACL,IAAA,CAAM,WAAA,CACN,MAAA,CAAQvlB,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAA,0BAAA,EAA6BimD,CAAQ,CAAA,sEAAA,CAAA,CAC9C,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,cACT,CAAA,CAIF,IAAMz2D,CAAAA,CAAWwQ,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,QACpC,IAAA,CAAK,KAAA,CAAA,CAAOA,CAAAA,CAAK,OAAA,CAAQ,OAAA,EAAQ,CAAIA,CAAAA,CAAK,SAAA,CAAU,OAAA,EAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAG,CAAA,CACtF,CAAA,CACE0R,CAAAA,CAAa,IAAI,IAAA,CAAK6T,CAAO,CAAA,CACnC,OAAA7T,CAAAA,CAAW,OAAA,CAAQA,CAAAA,CAAW,OAAA,EAAQ,CAAIliB,CAAQ,CAAA,CAE3C,CACL,IAAA,CAAM,WAAA,CACN,MAAA,CAAQwQ,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CACP,SAAA,CAAWulB,CAAAA,CACX,OAAA,CAAS7T,CACX,CAAA,CACA,OAAA,CAAS,CAAA,OAAA,EAAU1R,CAAAA,CAAK,IAAI,CAAA,KAAA,EAAQulB,CAAAA,CAAQ,kBAAA,EAAoB,CAAA,CAAA,CAAA,CAChE,OAAA,CAAS,IACX,CACF,CAGA,IAAM2gC,CAAAA,CAAcnB,CAAAA,CAAW,KAAA,CAAM,+EAA+E,CAAA,CACpH,GAAImB,CAAAA,EAAeA,CAAAA,CAAY,CAAC,CAAA,EAAKA,CAAAA,CAAY,CAAC,CAAA,CAAG,CACnD,IAAMxE,CAAAA,CAAWwE,CAAAA,CAAY,CAAC,CAAA,CAAE,IAAA,EAAK,CAC/BC,CAAAA,CAAeD,CAAAA,CAAY,CAAC,CAAA,CAAE,IAAA,EAAK,CACnClmD,CAAAA,CAAOukD,EAAAA,CAAejuB,CAAAA,CAAOorB,CAAQ,CAAA,CACrC/lD,CAAAA,CAAOiqD,EAAAA,CAAqBO,CAAY,CAAA,CAE9C,GAAI,CAACnmD,CAAAA,CACH,OAAO,CACL,IAAA,CAAM,aAAA,CACN,QAAA,CAAA0hD,CAAAA,CACA,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAQ,CAAA,EAAA,CAAA,CACjD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,gBACT,CAAA,CAGF,GAAI,CAAC/lD,CAAAA,EAAQ,CAACqE,CAAAA,CAAK,OAAA,CACjB,OAAO,CACL,IAAA,CAAM,aAAA,CACN,MAAA,CAAQA,CAAAA,CAAK,GACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAA,8BAAA,EAAiCmmD,CAAY,CAAA,EAAA,CAAA,CACtD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,kBACT,CAAA,CAGF,IAAMz0C,CAAAA,CAAa,IAAI,IAAA,CAAK1R,CAAAA,CAAK,OAAO,CAAA,CACxC,OAAA0R,CAAAA,CAAW,OAAA,CAAQA,CAAAA,CAAW,OAAA,EAAQ,CAAI/V,CAAI,CAAA,CAEvC,CACL,IAAA,CAAM,aAAA,CACN,MAAA,CAAQqE,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAE,OAAA,CAAS0R,CAAW,CAAA,CAC/B,OAAA,CAAS,CAAA,UAAA,EAAa1R,CAAAA,CAAK,IAAI,CAAA,KAAA,EAAQrE,CAAI,CAAA,qBAAA,EAAwB+V,CAAAA,CAAW,kBAAA,EAAoB,CAAA,CAAA,CAAA,CAClG,OAAA,CAAS,IACX,CACF,CAGA,IAAM00C,CAAAA,CAAgBrB,CAAAA,CAAW,KAAA,CAAM,4FAA4F,CAAA,CACnI,GAAIqB,CAAAA,EAAiBA,CAAAA,CAAc,CAAC,CAAA,EAAKA,CAAAA,CAAc,CAAC,CAAA,CAAG,CACzD,IAAM1E,CAAAA,CAAW0E,CAAAA,CAAc,CAAC,CAAA,CAAE,IAAA,EAAK,CACjCC,CAAAA,CAAeD,CAAAA,CAAc,CAAC,CAAA,CAAE,IAAA,EAAK,CACrCpmD,CAAAA,CAAOukD,EAAAA,CAAejuB,CAAAA,CAAOorB,CAAQ,CAAA,CACrCryC,CAAAA,CAAWw2C,EAAAA,CAAcQ,CAAY,CAAA,CAE3C,OAAKrmD,CAAAA,CAUDqP,CAAAA,GAAa,IAAA,CACR,CACL,IAAA,CAAM,cAAA,CACN,MAAA,CAAQrP,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAA,oCAAA,EAAuCqmD,CAAY,CAAA,EAAA,CAAA,CAC5D,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,kBACT,CAAA,CAGK,CACL,IAAA,CAAM,cAAA,CACN,MAAA,CAAQrmD,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAE,QAAA,CAAAqP,CAAS,CAAA,CACpB,OAAA,CAAS,CAAA,KAAA,EAAQrP,CAAAA,CAAK,IAAI,CAAA,cAAA,EAAiBqP,CAAQ,CAAA,EAAA,CAAA,CACnD,OAAA,CAAS,IACX,CAAA,CA3BS,CACL,IAAA,CAAM,cAAA,CACN,QAAA,CAAAqyC,CAAAA,CACA,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAQ,CAAA,EAAA,CAAA,CACjD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,gBACT,CAsBJ,CAGA,IAAM4E,CAAAA,CAAcvB,CAAAA,CAAW,KAAA,CAAM,iGAAiG,CAAA,CACtI,GAAIuB,CAAAA,EAAeA,CAAAA,CAAY,CAAC,CAAA,EAAKA,CAAAA,CAAY,CAAC,CAAA,CAAG,CACnD,IAAMC,CAAAA,CAAUD,CAAAA,CAAY,CAAC,CAAA,CAAE,IAAA,EAAK,CAC9BnrB,CAAAA,CAAUmrB,CAAAA,CAAY,CAAC,CAAA,CAAE,IAAA,EAAK,CAC9BtmD,CAAAA,CAAOukD,EAAAA,CAAejuB,CAAAA,CAAOiwB,CAAO,CAAA,CAE1C,OAAKvmD,EAUE,CACL,IAAA,CAAM,aAAA,CACN,MAAA,CAAQA,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAE,IAAA,CAAMm7B,CAAQ,CAAA,CACzB,OAAA,CAAS,CAAA,SAAA,EAAYn7B,CAAAA,CAAK,IAAI,CAAA,MAAA,EAASm7B,CAAO,CAAA,EAAA,CAAA,CAC9C,OAAA,CAAS,IACX,CAAA,CAhBS,CACL,IAAA,CAAM,aAAA,CACN,QAAA,CAAUorB,CAAAA,CACV,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAO,CAAA,EAAA,CAAA,CAChD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,gBACT,CAWJ,CAGA,IAAMC,CAAAA,CAAYzB,CAAAA,CAAW,KAAA,CAAM,qFAAqF,CAAA,CACxH,GAAIyB,CAAAA,EAAaA,CAAAA,CAAU,CAAC,CAAA,EAAKA,CAAAA,CAAU,CAAC,CAAA,CAAG,CAC7C,IAAMC,CAAAA,CAAWD,CAAAA,CAAU,CAAC,CAAA,CAAE,IAAA,EAAK,CAC7BE,CAAAA,CAASF,EAAU,CAAC,CAAA,CAAE,IAAA,EAAK,CAC3BrH,CAAAA,CAAWoF,EAAAA,CAAejuB,CAAAA,CAAOmwB,CAAQ,CAAA,CACzCE,CAAAA,CAASpC,EAAAA,CAAejuB,CAAAA,CAAOowB,CAAM,CAAA,CAE3C,OAAKvH,CAAAA,CAUAwH,CAAAA,CAUE,CACL,IAAA,CAAM,YAAA,CACN,MAAA,CAAQA,CAAAA,CAAO,EAAA,CACf,QAAA,CAAUA,CAAAA,CAAO,IAAA,CACjB,cAAA,CAAgBxH,CAAAA,CAAS,EAAA,CACzB,YAAA,CAAcwH,CAAAA,CAAO,EAAA,CACrB,OAAA,CAAS,CAAA,QAAA,EAAWxH,CAAAA,CAAS,IAAI,CAAA,UAAA,EAAQwH,CAAAA,CAAO,IAAI,CAAA,EAAA,CAAA,CACpD,OAAA,CAAS,IACX,CAAA,CAjBS,CACL,IAAA,CAAM,YAAA,CACN,QAAA,CAAUD,CAAAA,CACV,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAM,CAAA,EAAA,CAAA,CAC/C,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,uBACT,CAAA,CAhBO,CACL,IAAA,CAAM,YAAA,CACN,QAAA,CAAUD,CAAAA,CACV,QAAS,CAAA,6BAAA,EAAgCA,CAAQ,CAAA,EAAA,CAAA,CACjD,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,uBACT,CAsBJ,CAGA,IAAMG,CAAAA,CAAc7B,CAAAA,CAAW,KAAA,CAAM,gEAAgE,CAAA,CACrG,GAAI6B,CAAAA,EAAeA,CAAAA,CAAY,CAAC,CAAA,CAAG,CACjC,IAAMlF,CAAAA,CAAWkF,CAAAA,CAAY,CAAC,CAAA,CAAE,IAAA,EAAK,CAC/B5mD,CAAAA,CAAOukD,EAAAA,CAAejuB,CAAAA,CAAOorB,CAAQ,CAAA,CAE3C,OAAK1hD,CAAAA,CAUE,CACL,IAAA,CAAM,aAAA,CACN,MAAA,CAAQA,CAAAA,CAAK,EAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,IAAA,CACf,OAAA,CAAS,CAAA,SAAA,EAAYA,CAAAA,CAAK,IAAI,CAAA,EAAA,CAAA,CAC9B,OAAA,CAAS,IACX,CAAA,CAfS,CACL,IAAA,CAAM,aAAA,CACN,QAAA,CAAA0hD,CAAAA,CACA,OAAA,CAAS,CAAA,6BAAA,EAAgCA,CAAQ,CAAA,EAAA,CAAA,CACjD,OAAA,CAAS,MACT,KAAA,CAAO,gBACT,CAUJ,CAGA,OAAO,IACT,CAKO,SAASmF,EAAAA,CAAmBC,CAAAA,CAAoC,CACrE,GAAI,CAACA,CAAAA,EAAY,OAAOA,CAAAA,EAAa,QAAA,CACnC,OAAO,CACL,IAAA,CAAM,SAAA,CACN,OAAA,CAAS,0BAAA,CACT,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,yBACT,CAAA,CAGF,IAAM9c,CAAAA,CAAI8c,CAAAA,CAEV,OAAO,CACL,IAAA,CAAO9c,CAAAA,CAAE,IAAA,EAAoC,SAAA,CAC7C,MAAA,CAAQ,OAAOA,CAAAA,CAAE,MAAA,EAAW,QAAA,CAAWA,CAAAA,CAAE,MAAA,CAAS,MAAA,CAClD,QAAA,CAAU,OAAOA,CAAAA,CAAE,QAAA,EAAa,QAAA,CAAWA,CAAAA,CAAE,QAAA,CAAW,MAAA,CACxD,OAAA,CAASA,CAAAA,CAAE,OAAA,CACX,OAAA,CAASA,CAAAA,CAAE,OAAA,CACX,cAAA,CAAgB,OAAOA,CAAAA,CAAE,gBAAmB,QAAA,CAAWA,CAAAA,CAAE,cAAA,CAAiB,MAAA,CAC1E,YAAA,CAAc,OAAOA,CAAAA,CAAE,YAAA,EAAiB,QAAA,CAAWA,CAAAA,CAAE,YAAA,CAAe,MAAA,CACpE,OAAA,CAAS,OAAOA,CAAAA,CAAE,OAAA,EAAY,QAAA,CAAWA,CAAAA,CAAE,OAAA,CAAU,mBAAA,CACrD,OAAA,CAAS,OAAOA,CAAAA,CAAE,OAAA,EAAY,SAAA,CAAYA,CAAAA,CAAE,OAAA,CAAU,KAAA,CACtD,KAAA,CAAO,OAAOA,CAAAA,CAAE,KAAA,EAAU,QAAA,CAAWA,CAAAA,CAAE,KAAA,CAAQ,MACjD,CACF,CC9hBA,SAAS+c,EAAAA,CACPl2D,CAAAA,CACkD,CAClD,GAAKA,CAAAA,CAEL,OAAQA,CAAAA,CAAO,WAAA,EAAY,EACzB,KAAK,MAAA,CACL,KAAK,SAAA,CACH,OAAO,MAAA,CACT,KAAK,aAAA,CACL,KAAK,QAAA,CACH,OAAO,aAAA,CACT,KAAK,OACH,OAAO,WAAA,CACT,QACE,OAAO,MACX,CACF,CAMA,SAASm2D,EAAAA,CACPn2D,CAAAA,CACQ,CAER,OAAQA,CAAAA,EACN,KAAK,MAAA,CACH,OAAO,MAAA,CACT,KAAK,aAAA,CACH,OAAO,aAAA,CACT,KAAK,WAAA,CACH,OAAO,MAAA,CACT,QAEE,OAAOA,CAAAA,EAAU,MACrB,CACF,CAUO,SAASo2D,EAAAA,CACdlzD,CAAAA,CACA+J,CAAAA,CAAmB,EAAC,CACpBuD,CAAAA,CAA8E,EAAC,CACzE,CAEN,IAAM4J,CAAAA,CAAoClX,CAAAA,CAAK,eAAA,EAC3C,GAAA,CAAK+lB,CAAAA,EAAW,CAChB,IAAMvc,CAAAA,CAAO8D,CAAAA,CAAM,IAAA,CAAM5D,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOqc,CAAM,CAAA,CAC9C,OAAKvc,CAAAA,CACE,CACL,IAAA,CAAMA,EAAK,IAAA,CACX,QAAA,CAAUA,CAAAA,CAAK,QAAA,CACf,KAAA,CAAOA,CAAAA,CAAK,KACd,CAAA,CALkB,IAMpB,CAAC,CAAA,CACA,MAAA,CAAQ2N,CAAAA,EAAqBA,CAAAA,GAAM,IAAI,CAAA,CAGpCsV,CAAAA,CAA+B1iB,CAAAA,CAClC,MAAA,CAAQ0U,CAAAA,EAAMA,CAAAA,CAAE,QAAA,EAAU,YAAA,GAAiBze,CAAAA,CAAK,EAAE,CAAA,CAClD,GAAA,CAAKye,CAAAA,EAAMy0C,EAAAA,CAAgBz0C,CAAAA,CAAG1U,CAAAA,CAAUuD,CAAK,CAAC,CAAA,CAG7CxC,CAAAA,CACA9K,CAAAA,CAAK,YAAA,GACH,OAAOA,CAAAA,CAAK,YAAA,CAAa,CAAC,CAAA,EAAM,QAAA,CAElC8K,CAAAA,CAAe9K,CAAAA,CAAK,YAAA,CAGpB8K,CAAAA,CAAgB9K,CAAAA,CAAK,YAAA,CAClB,MAAA,CAAQ8sB,CAAAA,EAAQA,CAAAA,CAAI,IAAA,GAAS,iBAAiB,CAAA,CAC9C,GAAA,CAAKA,CAAAA,EAAQA,CAAAA,CAAI,MAAM,CAAA,CAAA,CAK9B,IAAMqmC,CAAAA,CAAaprD,GAAsD,CACvE,GAAKA,CAAAA,CACL,OAAO,OAAOA,CAAAA,EAAS,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAI,CAAA,CAAIA,CACrD,CAAA,CAEMP,CAAAA,CAAY2rD,CAAAA,CAAUnzD,CAAAA,CAAK,SAAS,CAAA,CACpCyH,CAAAA,CAAU0rD,CAAAA,CAAUnzD,CAAAA,CAAK,OAAO,CAAA,CAGhCozD,CAAAA,CAAcpzD,CAAAA,CAAK,QAAA,EAAU,WAAA,GAAgB,IAAA,EAChDwH,CAAAA,EAAaC,CAAAA,EAAW,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAQ,OAAA,EAAQ,CAAID,CAAAA,CAAU,OAAA,EAAS,CAAA,EAAK,KAAA,CAEhF,OAAO,CACL,EAAA,CAAIxH,CAAAA,CAAK,EAAA,CACT,IAAA,CAAMA,CAAAA,CAAK,KAAA,CACX,SAAA,CAAAwH,CAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,QAAA,CAAUzH,CAAAA,CAAK,QAAA,EAAY,CAAA,CAC3B,MAAA,CAAQgzD,EAAAA,CAA0BhzD,CAAAA,CAAK,QAAA,EAAU,MAAgB,CAAA,CACjE,UAAWkX,CAAAA,EAAW,MAAA,CAASA,CAAAA,CAAY,MAAA,CAC3C,YAAA,CAAcpM,CAAAA,EAAc,MAAA,CAASA,CAAAA,CAAe,MAAA,CACpD,QAAA,CAAU2hB,CAAAA,EAAU,MAAA,CAASA,CAAAA,CAAW,MAAA,CACxC,UAAA,CAAYzsB,CAAAA,CAAK,QAAA,EAAU,UAAA,GAAe,IAAA,CAC1C,WAAA,CAAAozD,CAAAA,CACA,cAAA,CAAgBpzD,CAAAA,CAAK,QAAA,EAAU,cAAA,GAAmB,IACpD,CACF,CAUO,SAASqzD,EAAAA,CACdpnD,CAAAA,CACAqB,CAAAA,CAA8E,EAAC,CAChE,CAEf,IAAI4pB,CAAAA,CACJ,OAAIjrB,CAAAA,CAAK,SAAA,EAAaA,CAAAA,CAAK,SAAA,CAAU,MAAA,CAAS,CAAA,GAC5CirB,CAAAA,CAAkBjrB,CAAAA,CAAK,SAAA,CACpB,GAAA,CAAKgR,CAAAA,EAES3P,CAAAA,CAAM,IAAA,CAChB5D,CAAAA,EAAMA,CAAAA,CAAE,IAAA,GAASuT,CAAAA,CAAS,IAAA,EAAQvT,CAAAA,CAAE,QAAA,GAAauT,CAAAA,CAAS,QAC7D,CAAA,EACa,EACd,EACA,MAAA,CAAQrR,CAAAA,EAAqBA,CAAAA,GAAO,MAAS,CAAA,CAAA,CAG3C,CACL,EAAA,CAAIK,CAAAA,CAAK,EAAA,CACT,KAAA,CAAOA,CAAAA,CAAK,IAAA,CACZ,SAAA,CAAWA,CAAAA,CAAK,SAAA,CAChB,OAAA,CAASA,CAAAA,CAAK,OAAA,CACd,QAAA,CAAUA,CAAAA,CAAK,QAAA,CACf,eAAA,CAAiBirB,CAAAA,EAAiB,MAAA,CAASA,CAAAA,CAAkB,MAAA,CAC7D,QAAA,CAAU,CACR,MAAA,CAAQ+7B,EAAAA,CAA0BhnD,CAAAA,CAAK,MAAM,CAAA,CAC7C,UAAA,CAAYA,CAAAA,CAAK,UAAA,CACjB,WAAA,CAAaA,CAAAA,CAAK,WAAA,CAClB,cAAA,CAAgBA,CAAAA,CAAK,cACvB,CACF,CACF,CASO,SAASqnD,EAAAA,CACd7wD,CAAAA,CACA6K,CAAAA,CAA8E,EAAC,CACvE,CAIR,OAFsB7K,CAAAA,CAAM,MAAA,CAAQgc,CAAAA,EAAM,CAACA,CAAAA,CAAE,QAAA,EAAU,YAAY,CAAA,CAE9C,GAAA,CAAKze,GAASkzD,EAAAA,CAAgBlzD,CAAAA,CAAMyC,CAAAA,CAAO6K,CAAK,CAAC,CACxE,CC1KO,IAAM4wB,EAAAA,CAA2B,CACtC,OAAA,CAAS,CACP,IAAA,CAAM,WAAA,CACN,SAAA,CAAW,YAAA,CACX,OAAA,CAAS,UAAA,CACT,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,SAAU,UAAA,CACV,OAAA,CAAS,SACX,CAAA,CAEA,OAAA,CAAS,CACP,MAAA,CAAQ,QAAA,CACR,iBAAA,CAAmB,iBAAA,CACnB,MAAA,CAAQ,QAAA,CACR,YAAA,CAAc,eAAA,CACd,MAAA,CAAQ,QAAA,CACR,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,UACX,CAAA,CAEA,OAAA,CAAS,CACP,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,SAAA,CAAW,YAAA,CACX,aAAA,CAAe,gBAAA,CACf,GAAA,CAAK,KAAA,CACL,IAAA,CAAM,MACR,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,OAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,WACb,CAAA,CAEA,OAAA,CAAS,CACP,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,WAAA,CAAa,cACf,CAAA,CAEA,KAAA,CAAO,CACL,OAAA,CAAS,cAAA,CACT,SAAA,CAAW,6BAAA,CACX,aAAc,qBAChB,CAAA,CAEA,UAAA,CAAY,CACV,OAAA,CAAS,SAAA,CACT,EAAA,CAAI,IAAA,CACJ,KAAA,CAAO,OAAA,CACP,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,MACR,CAAA,CAEA,IAAA,CAAM,CACJ,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,SAAA,CACN,QAAA,CAAU,WACZ,CACF,CAAA,CAKaC,EAAAA,CAA2B,CACtC,OAAA,CAAS,CACP,IAAA,CAAM,iBAAA,CACN,SAAA,CAAW,cAAA,CACX,OAAA,CAAS,WAAA,CACT,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,WAAA,CACV,OAAA,CAAS,UACX,CAAA,CAEA,OAAA,CAAS,CACP,MAAA,CAAQ,QAAA,CACR,iBAAA,CAAmB,kBAAA,CACnB,MAAA,CAAQ,SAAA,CACR,YAAA,CAAc,iBAAA,CACd,MAAA,CAAQ,UAAA,CACR,OAAA,CAAS,UAAA,CACT,QAAS,aACX,CAAA,CAEA,OAAA,CAAS,CACP,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,SAAA,CAAW,iBAAA,CACX,aAAA,CAAe,qBAAA,CACf,GAAA,CAAK,OAAA,CACL,IAAA,CAAM,SACR,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,WAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,YACb,CAAA,CAEA,OAAA,CAAS,CACP,IAAA,CAAM,QAAA,CACN,MAAA,CAAQ,UAAA,CACR,SAAA,CAAW,UAAA,CACX,WAAA,CAAa,cACf,CAAA,CAEA,KAAA,CAAO,CACL,OAAA,CAAS,mBAAA,CACT,SAAA,CAAW,wCAAA,CACX,YAAA,CAAc,yBAChB,CAAA,CAEA,UAAA,CAAY,CACV,OAAA,CAAS,WAAA,CACT,EAAA,CAAI,IAAA,CACJ,KAAA,CAAO,QAAA,CACP,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,WACR,CAAA,CAEA,IAAA,CAAM,CACJ,QAAA,CAAU,gBACV,MAAA,CAAQ,UAAA,CACR,IAAA,CAAM,SAAA,CACN,QAAA,CAAU,WACZ,CACF,CAAA,CAKao1B,EAAAA,CAA8E,CACzF,EAAA,CAAAr1B,EAAAA,CACA,EAAA,CAAAC,EACF,EAKO,SAASq1B,EAAAA,CAAwB5gD,CAAAA,CAAgE,CACtG,OAAO2gD,EAAAA,CAAqB3gD,CAAiC,CAAA,EAAK2gD,EAAAA,CAAqB,EACzF,CAKO,SAASE,EAAAA,CACd7gD,CAAAA,CACA0rB,CAAAA,CACsB,CACtB,IAAMC,CAAAA,CAAOi1B,EAAAA,CAAwB5gD,CAAM,CAAA,CAE3C,OAAK0rB,CAAAA,CAIE,CACL,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,MAAA,CAAQ,CAAE,GAAGC,CAAAA,CAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,CAAA,CACvD,OAAA,CAAS,CAAE,GAAGC,CAAAA,CAAK,OAAA,CAAS,GAAGD,CAAAA,CAAmB,OAAQ,CAAA,CAC1D,KAAA,CAAO,CAAE,GAAGC,CAAAA,CAAK,KAAA,CAAO,GAAGD,CAAAA,CAAmB,KAAM,CAAA,CACpD,UAAA,CAAY,CAAE,GAAGC,CAAAA,CAAK,UAAA,CAAY,GAAGD,CAAAA,CAAmB,UAAW,CAAA,CACnE,IAAA,CAAM,CAAE,GAAGC,CAAAA,CAAK,IAAA,CAAM,GAAGD,CAAAA,CAAmB,IAAK,CACnD,CAAA,CAZSC,CAaX,CCpKA,IAAM3Q,EAAAA,CAAiB,CACrB,CAAE,KAAA,CAAO,MAAA,CAAQ,IAAA,CAAMlR,MAAAA,CAAQ,KAAA,CAAO,eAAgB,CAAA,CACtD,CAAE,KAAA,CAAO,aAAA,CAAe,IAAA,CAAM2lB,UAAAA,CAAY,KAAA,CAAO,eAAgB,CAAA,CACjE,CAAE,KAAA,CAAO,WAAA,CAAa,IAAA,CAAMtlB,YAAAA,CAAc,KAAA,CAAO,gBAAiB,CACpE,CAAA,CAEO,SAAS22C,EAAAA,CAAW,CACzB,KAAA,CAAAlyD,CAAAA,CACA,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,YAAA,CAAAwc,CAAAA,CACA,QAAA,CAAAxR,CAAAA,CAAW,KACb,CAAA,CAAoB,CAClB,GAAM,CAAC/M,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC4+C,CAAAA,CAAMt9C,MAAAA,CAAuB,IAAI,CAAA,CAGvCnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CACxCu8C,CAAAA,CAAI,OAAA,EAAW,CAACA,CAAAA,CAAI,OAAA,CAAQ,QAAA,CAASv8C,CAAAA,CAAE,MAAc,CAAA,EACvDnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CACA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMguD,CAAAA,CAAgB/lC,EAAAA,CAAe,CAAC,CAAA,CAChC+hC,CAAAA,CAAgB/hC,EAAAA,CAAe,IAAA,CAAKxW,CAAAA,EAAKA,CAAAA,CAAE,KAAA,GAAU5V,CAAK,CAAA,EAAKmyD,CAAAA,CAC/DC,CAAAA,CAAOjE,CAAAA,CAAc,IAAA,CAErBkE,CAAAA,CAAYpE,CAAAA,EAAwB,CACxC,OAAQA,CAAAA,EACN,KAAK,WAAA,CAAa,OAAOvrC,CAAAA,CAAa,SAAA,CACtC,KAAK,aAAA,CAAe,OAAOA,CAAAA,CAAa,UAAA,CACxC,QAAS,OAAOA,CAAAA,CAAa,IAC/B,CACF,CAAA,CAEA,OAAIxR,CAAAA,EAAY,CAACjN,CAAAA,CAEbH,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACwvD,CAAAA,CAAA,CAAK,SAAA,CAAWj4D,CAAAA,CAAG,SAAA,CAAWg0D,CAAAA,CAAc,KAAK,CAAA,CAAG,CAAA,CACrDvrD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAmsD,CAAAA,CAASryD,CAAK,CAAA,CACjB,CAAA,CAAA,CACF,CAAA,CAKF8D,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKg+C,CAAAA,CAAK,SAAA,CAAU,UAAA,CACvB,QAAA,CAAA,CAAAh+C,IAAAA,CAAC,QAAA,CAAA,CACC,QAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBnB,CAAAA,CAAU,CAACD,CAAM,EACnB,CAAA,CACA,SAAA,CAAWhK,CAAAA,CACT,6DAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACwvD,CAAAA,CAAA,CAAK,SAAA,CAAWj4D,CAAAA,CAAG,SAAA,CAAWg0D,CAAAA,CAAc,KAAK,CAAA,CAAG,CAAA,CACrDvrD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAmsD,CAAAA,CAASryD,CAAK,CAAA,CACjB,CAAA,CACA4C,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,CAAA,CAEC/B,CAAAA,EACCvB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,mFAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAEC,QAAA,CAAAkmB,EAAAA,CAAe,GAAA,CAAK5kB,CAAAA,EAAW,CAC9B,IAAM8qD,CAAAA,CAAa9qD,CAAAA,CAAO,IAAA,CAC1B,OACE1D,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,CAASuD,CAAAA,CAAO,KAAK,CAAA,CACrBpD,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAWjK,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BlG,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,GAAUtB,CAAAA,CAAS,YAAA,CAAe,YAAA,CACrD,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC0vD,CAAAA,CAAA,CAAW,SAAA,CAAWn4D,CAAAA,CAAG,SAAA,CAAWqN,CAAAA,CAAO,KAAK,CAAA,CAAG,CAAA,CACpD5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CACtC,QAAA,CAAAmsD,CAAAA,CAAS7qD,CAAAA,CAAO,KAAK,CAAA,CACxB,IAfKA,CAAAA,CAAO,KAgBd,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CAEJ,CAEJ,CC9GA,IAAM2kB,EAAAA,CAAmB,CACvB,CAAE,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,CAAE,EAAA,CAAI,QAAA,CAAU,EAAA,CAAI,SAAU,CAAA,CAAG,KAAA,CAAO,cAAA,CAAgB,EAAA,CAAI,YAAa,CAAA,CACnG,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,CAAE,EAAA,CAAI,MAAA,CAAQ,EAAA,CAAI,MAAO,CAAA,CAAG,KAAA,CAAO,iBAAA,CAAmB,EAAA,CAAI,eAAgB,CAAA,CAClG,CAAE,MAAO,QAAA,CAAU,KAAA,CAAO,CAAE,EAAA,CAAI,QAAA,CAAU,EAAA,CAAI,OAAQ,CAAA,CAAG,KAAA,CAAO,iBAAA,CAAmB,EAAA,CAAI,eAAgB,CAAA,CACvG,CAAE,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,CAAE,EAAA,CAAI,KAAA,CAAO,EAAA,CAAI,MAAO,CAAA,CAAG,KAAA,CAAO,eAAA,CAAiB,EAAA,CAAI,aAAc,CAAA,CAC5F,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,CAAE,EAAA,CAAI,MAAA,CAAQ,EAAA,CAAI,SAAU,CAAA,CAAG,KAAA,CAAO,eAAA,CAAiB,EAAA,CAAI,aAAc,CACnG,CAAA,CAEO,SAASomC,EAAAA,CAAa,CAC3B,KAAA,CAAAvyD,CAAAA,CAAQ,MAAA,CACR,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,MAAA,CAAAkL,CAAAA,CACA,QAAA,CAAAF,CAAAA,CAAW,KACb,CAAA,CAAsB,CACpB,GAAM,CAAC/M,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC4+C,CAAAA,CAAMt9C,MAAAA,CAAuB,IAAI,CAAA,CAEvCnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CACxCu8C,CAAAA,CAAI,OAAA,EAAW,CAACA,CAAAA,CAAI,OAAA,CAAQ,QAAA,CAASv8C,CAAAA,CAAE,MAAc,CAAA,EACvDnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CACA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMiqD,CAAAA,CAAkBjiC,EAAAA,CAAiB,IAAA,CAAK,CAAA,EAAK,CAAA,CAAE,KAAA,GAAUnsB,CAAK,CAAA,EAAKmsB,EAAAA,CAAiB,CAAC,CAAA,CACrFqmC,CAAAA,CAAOphD,CAAAA,GAAW,KAAO,IAAA,CAAO,IAAA,CAEtC,OAAIF,CAAAA,EAAY,CAACjN,CAAAA,CAEbH,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAWviB,CAAAA,CAAG,SAAA,CAAWi0D,CAAAA,CAAgB,KAAK,CAAA,CAAG,CAAA,CACvDxrD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkoD,CAAAA,CAAgB,KAAA,CAAMoE,CAAI,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAKF1uD,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKg+C,CAAAA,CAAK,SAAA,CAAU,UAAA,CACvB,QAAA,CAAA,CAAAh+C,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBnB,CAAAA,CAAU,CAACD,CAAM,EACnB,CAAA,CACA,SAAA,CAAWhK,CAAAA,CACT,6DAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAWviB,CAAAA,CAAG,SAAA,CAAWi0D,CAAAA,CAAgB,KAAK,CAAA,CAAG,CAAA,CACvDxrD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkoD,CAAAA,CAAgB,KAAA,CAAMoE,CAAI,CAAA,CAC7B,CAAA,CACA5vD,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,CAAA,CAEC/B,CAAAA,EACCvB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,mFAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAEC,QAAA,CAAAimB,EAAAA,CAAiB,GAAA,CAAK3kB,CAAAA,EACrB1D,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,CAASuD,EAAO,KAAK,CAAA,CACrBpD,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAWjK,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BlG,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,GAAUtB,CAAAA,CAAS,YAAA,CAAe,YAAA,CACrD,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,sBAAA,CAAwBqN,CAAAA,CAAO,EAAE,CAAA,CAAG,CAAA,CACvD5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CACtC,QAAA,CAAAsB,CAAAA,CAAO,KAAA,CAAMgrD,CAAI,CAAA,CACpB,CAAA,CAAA,CAAA,CAfKhrD,CAAAA,CAAO,KAgBd,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAEJ,CCpFA,SAASoJ,EAAAA,CAAYC,CAAAA,CAAsB,CACzC,OAAOA,CAAAA,CACJ,KAAA,CAAM,GAAG,CAAA,CACT,GAAA,CAAIC,CAAAA,EAAKA,CAAAA,CAAE,CAAC,CAAC,CAAA,CACb,IAAA,CAAK,EAAE,CAAA,CACP,WAAA,EAAY,CACZ,KAAA,CAAM,CAAA,CAAG,CAAC,CACf,CAEA,SAAS2hD,EAAAA,CAAe5hD,CAAAA,CAAsB,CAC5C,IAAM6iB,CAAAA,CAAS,CACb,aAAA,CAAe,cAAA,CAAgB,eAAA,CAAiB,aAAA,CAChD,eAAA,CAAiB,YAAA,CAAc,eAAA,CAAiB,aAClD,CAAA,CACIg/B,CAAAA,CAAO,CAAA,CACX,IAAA,IAAS73D,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIgW,CAAAA,CAAK,MAAA,CAAQhW,CAAAA,EAAAA,CAC/B63D,CAAAA,CAAO7hD,EAAK,UAAA,CAAWhW,CAAC,CAAA,EAAA,CAAM63D,CAAAA,EAAQ,CAAA,EAAKA,CAAAA,CAAAA,CAE7C,OAAOh/B,CAAAA,CAAO,IAAA,CAAK,GAAA,CAAIg/B,CAAI,CAAA,CAAIh/B,CAAAA,CAAO,MAAM,CAAA,EAAK,aACnD,CAEO,SAASi/B,EAAAA,CAAc,CAC5B,KAAA,CAAA3yD,CAAAA,CAAQ,EAAC,CACT,cAAA,CAAA2H,CAAAA,CAAiB,EAAC,CAClB,QAAA,CAAA1D,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,MAAA,CAAAkL,CAAAA,CACA,QAAA,CAAAF,CAAAA,CAAW,KACb,CAAA,CAAuB,CACrB,GAAM,CAAC/M,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAACgjB,CAAAA,CAAQC,CAAS,CAAA,CAAIjjB,QAAAA,CAAS,EAAE,CAAA,CACjC4+C,CAAAA,CAAMt9C,MAAAA,CAAuB,IAAI,CAAA,CAEvCnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,EAAsBE,CAAAA,EAAkB,CACxCu8C,CAAAA,CAAI,OAAA,EAAW,CAACA,CAAAA,CAAI,OAAA,CAAQ,QAAA,CAASv8C,CAAAA,CAAE,MAAc,CAAA,GACvDnB,CAAAA,CAAU,KAAK,CAAA,CACf+hB,CAAAA,CAAU,EAAE,CAAA,EAEhB,CAAA,CACA,OAAIhiB,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMgE,CAAAA,CAAgBR,CAAAA,CAAe,MAAA,CAAOO,CAAAA,EAC1CA,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAASge,CAAAA,CAAO,WAAA,EAAa,CAAA,EAClDhe,CAAAA,CAAE,KAAA,EAAO,WAAA,EAAY,CAAE,QAAA,CAASge,CAAAA,CAAO,WAAA,EAAa,CACtD,CAAA,CAGMje,CAAAA,CAAc2qD,CAAAA,EAAqB5yD,EAAM,IAAA,CAAK2V,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAASi9C,CAAQ,CAAA,CAEtE7qD,CAAAA,CAAoBC,CAAAA,EAAwB,CAChD,GAAK/D,CAAAA,CAEL,GAAIgE,CAAAA,CAAWD,CAAAA,CAAK,IAAI,CAAA,CACtB/D,CAAAA,CAASjE,CAAAA,CAAM,MAAA,CAAO2V,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAC,CAAA,CAAA,KAC3C,CAEL,IAAM6qD,CAAAA,CAA4B,CAChC,IAAA,CAAM7qD,CAAAA,CAAK,IAAA,CACX,QAAA,CAAU4I,EAAAA,CAAY5I,CAAAA,CAAK,IAAI,CAAA,CAC/B,KAAA,CAAOA,CAAAA,CAAK,KAAA,EAASyqD,EAAAA,CAAezqD,CAAAA,CAAK,IAAI,CAAA,CAAE,OAAA,CAAQ,KAAA,CAAO,EAAE,CAAA,CAAE,OAAA,CAAQ,MAAA,CAAQ,EAAE,CAAA,CACpF,MAAA,CAAQA,CAAAA,CAAK,SACf,CAAA,CACA/D,CAAAA,CAAS,CAAC,GAAGjE,CAAAA,CAAO6yD,CAAW,CAAC,EAClC,CACF,CAAA,CAGA,OAAI3hD,CAAAA,EAAY,CAACjN,CAAAA,CACXjE,CAAAA,CAAM,MAAA,GAAW,CAAA,CAEjB4C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,GAAA,CAE7E,CAAA,CAKFpC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACZ,QAAA,CAAA,CAAA9D,CAAAA,CAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAACyb,CAAAA,CAAUkM,CAAAA,GAChC/kB,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,+FAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,cAAA,CAC9B,CAACuV,CAAAA,CAAS,MAAA,EAAUg3C,EAAAA,CAAeh3C,CAAAA,CAAS,IAAI,CAClD,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAS,KAAA,EAAS,CAACA,CAAAA,CAAS,MAAA,CAAS,CAAE,eAAA,CAAiBA,CAAAA,CAAS,KAAM,CAAA,CAAI,OAClF,KAAA,CAAOA,CAAAA,CAAS,IAAA,CAEf,QAAA,CAAAA,CAAAA,CAAS,MAAA,CACR7Y,GAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK6Y,CAAAA,CAAS,MAAA,CAAQ,GAAA,CAAKA,CAAAA,CAAS,IAAA,CAAM,SAAA,CAAU,yCAAA,CAA0C,CAAA,CAEnGA,CAAAA,CAAS,QAAA,EAAY7K,EAAAA,CAAY6K,CAAAA,CAAS,IAAI,CAAA,CAAA,CAZ3C,CAAA,EAAGA,CAAAA,CAAS,IAAI,CAAA,CAAA,EAAIkM,CAAG,CAAA,CAc9B,CACD,CAAA,CACA3nB,CAAAA,CAAM,MAAA,CAAS,CAAA,EACd8D,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,oFAAA,CACA+L,CAAAA,CAAS,0CAAA,CAA6C,wCACxD,CAAA,CACD,QAAA,CAAA,CAAA,GAAA,CACGlG,CAAAA,CAAM,MAAA,CAAS,CAAA,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CAKF8D,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKg+C,CAAAA,CAAK,SAAA,CAAU,UAAA,CACvB,QAAA,CAAA,CAAAl/C,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,iBAAgB,CAClBnB,CAAAA,CAAU,CAACD,CAAM,EACnB,CAAA,CACA,SAAA,CAAWhK,CAAAA,CACT,6DAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEC,QAAA,CAAAlG,CAAAA,CAAM,MAAA,GAAW,CAAA,CAChB8D,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC4Y,IAAAA,CAAA,CAAK,SAAA,CAAWrhB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC7EtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAW3a,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CAC/E,CAAA,CAEApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACZ,QAAA,CAAA,CAAA9D,CAAAA,CAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAACyb,CAAAA,CAAUkM,CAAAA,GAChC/kB,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,kGACA+L,CAAAA,CAAS,kBAAA,CAAqB,cAAA,CAC9B,CAACuV,CAAAA,CAAS,MAAA,EAAUg3C,EAAAA,CAAeh3C,CAAAA,CAAS,IAAI,CAClD,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAS,KAAA,EAAS,CAACA,CAAAA,CAAS,MAAA,CAAS,CAAE,eAAA,CAAiBA,CAAAA,CAAS,KAAM,CAAA,CAAI,MAAA,CAEjF,QAAA,CAAAA,CAAAA,CAAS,MAAA,CACR7Y,GAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK6Y,CAAAA,CAAS,MAAA,CAAQ,GAAA,CAAKA,CAAAA,CAAS,IAAA,CAAM,SAAA,CAAU,yCAAA,CAA0C,CAAA,CAEnGA,CAAAA,CAAS,QAAA,EAAY7K,EAAAA,CAAY6K,CAAAA,CAAS,IAAI,CAAA,CAAA,CAX3C,CAAA,EAAGA,CAAAA,CAAS,IAAI,CAAA,CAAA,EAAIkM,CAAG,CAAA,CAa9B,CACD,CAAA,CACA3nB,CAAAA,CAAM,MAAA,CAAS,CAAA,EACd8D,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,EAAG,QAAA,CAAA,CAAA,GAAA,CAC9ElG,CAAAA,CAAM,MAAA,CAAS,CAAA,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,CAECmE,CAAAA,EACCL,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,qEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAGA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,cAAA,CAAe,KAAA,CAAO,CAAE,WAAA,CAAasD,CAAAA,CAAS,uBAAA,CAA0B,SAAU,CAAA,CAC/F,QAAA,CAAAtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOsjB,CAAAA,CACP,QAAA,CAAW3gB,CAAAA,EAAM4gB,CAAAA,CAAU5gB,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACzC,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAsB,gBAAA,CACrD,SAAA,CAAWjX,CAAAA,CACT,wDAAA,CACA+L,CAAAA,CACI,kEAAA,CACA,oEACN,CAAA,CACA,OAAA,CAAUX,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CACpC,CAAA,CACF,CAAA,CAGA3C,IAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACZ,QAAA,CAAAuF,CAAAA,CAAc,MAAA,GAAW,CAAA,CACxBvF,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC9E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,4BAAA,CAA+B,gBAAA,CACpD,CAAA,CAEAjJ,CAAAA,CAAc,GAAA,CAAKH,CAAAA,EACjBlE,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBwC,CAAAA,CAAiBC,CAAI,EACvB,CAAA,CACA,SAAA,CAAW7N,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,sFAAA,CACA,CAAC6N,CAAAA,CAAK,SAAA,EAAayqD,EAAAA,CAAezqD,CAAAA,CAAK,IAAI,CAC7C,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAK,SAAA,CACJpF,GAAAA,CAAC,OAAI,GAAA,CAAKoF,CAAAA,CAAK,SAAA,CAAW,GAAA,CAAKA,CAAAA,CAAK,IAAA,CAAM,SAAA,CAAU,yCAAA,CAA0C,CAAA,CAE9F4I,EAAAA,CAAY5I,CAAAA,CAAK,IAAI,CAAA,CAEzB,CAAA,CACAlE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAA8B,CAAAA,CAAK,IAAA,CAAK,CAAA,CACnEA,CAAAA,CAAK,KAAA,EACJpF,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACtE,QAAA,CAAA8B,CAAAA,CAAK,KAAA,CACR,CAAA,CAAA,CAEJ,CAAA,CACCC,CAAAA,CAAWD,CAAAA,CAAK,IAAI,CAAA,EACnBpF,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAAA,CAAA,CA/BvC7M,CAAAA,CAAK,EAiCZ,CACD,CAAA,CAEL,CAAA,CAGChI,CAAAA,CAAM,MAAA,CAAS,GACd4C,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CAAoC,KAAA,CAAO,CAAE,WAAA,CAAasD,CAAAA,CAAS,uBAAA,CAA0B,SAAU,CAAA,CACnH,QAAA,CAAAlG,CAAAA,CAAM,GAAA,CAAI,CAACyb,CAAAA,CAAUkM,CAAAA,GACpB7jB,IAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,iEAAA,CACA+L,CAAAA,CAAS,wBAAA,CAA2B,2BACtC,CAAA,CAEC,QAAA,CAAA,CAAAuV,CAAAA,CAAS,IAAA,CACV7Y,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,CAASjE,CAAAA,CAAM,MAAA,CAAO2V,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAAS8F,CAAAA,CAAS,IAAI,CAAC,EACtD,CAAA,CACA,SAAA,CAAU,oBAAA,CAEV,QAAA,CAAA7Y,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,CAAA,CAAA,CAAA,CAfK,CAAA,EAAG6G,CAAAA,CAAS,IAAI,CAAA,CAAA,EAAIkM,CAAG,CAAA,CAgB9B,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAEJ,CC9QA,IAAMmrC,EAAAA,CAAc,CAClB,EAAA,CAAI,CAAC,SAAA,CAAW,UAAA,CAAY,OAAA,CAAS,OAAA,CAAS,KAAA,CAAO,MAAA,CAAQ,MAAA,CAAQ,QAAA,CAAU,WAAA,CAAa,SAAA,CAAW,UAAA,CAAY,UAAU,CAAA,CAC7H,EAAA,CAAI,CAAC,OAAA,CAAS,SAAA,CAAW,OAAA,CAAS,OAAA,CAAS,MAAA,CAAQ,OAAA,CAAS,OAAA,CAAS,QAAA,CAAU,YAAA,CAAc,SAAA,CAAW,WAAA,CAAa,WAAW,CAClI,CAAA,CAEMC,GAAY,CAChB,EAAA,CAAI,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAI,CAAA,CAC7C,EAAA,CAAI,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,OAAI,CAC/C,CAAA,CAEO,SAASC,EAAAA,CAAS,CACvB,KAAA,CAAAhzD,CAAAA,CACA,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,MAAA,CAAAkL,CAAAA,CACA,QAAA,CAAAF,CAAAA,CAAW,KACb,CAAA,CAAkB,CAChB,GAAM,CAAC/M,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC,CAAC+vD,CAAAA,CAAUC,CAAW,CAAA,CAAIhwD,QAAAA,CAAS,IAAM,CAC7C,GAAIlD,CAAAA,CAAO,CACT,IAAM4I,CAAAA,CAAI5I,CAAAA,YAAiB,IAAA,CAAOA,CAAAA,CAAQ,IAAI,KAAKA,CAAK,CAAA,CACxD,OAAO,IAAI,IAAA,CAAK4I,CAAAA,CAAE,WAAA,EAAY,CAAGA,CAAAA,CAAE,QAAA,EAAS,CAAG,CAAC,CAClD,CACA,OAAO,IAAI,IAAA,CAAK,IAAI,IAAA,EAAK,CAAE,WAAA,EAAY,CAAG,IAAI,IAAA,EAAK,CAAE,QAAA,EAAS,CAAG,CAAC,CACpE,CAAC,CAAA,CACKk5C,CAAAA,CAAMt9C,MAAAA,CAAuB,IAAI,CAAA,CAEjC0mC,CAAAA,CAAYlrC,CAAAA,CAASA,CAAAA,YAAiB,IAAA,CAAOA,CAAAA,CAAQ,IAAI,IAAA,CAAKA,CAAK,CAAA,CAAK,IAAA,CACxEwyD,CAAAA,CAAOphD,CAAAA,GAAW,IAAA,CAAO,IAAA,CAAO,IAAA,CAEtC/N,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CACxCu8C,CAAAA,CAAI,OAAA,EAAW,CAACA,CAAAA,CAAI,OAAA,CAAQ,SAASv8C,CAAAA,CAAE,MAAc,CAAA,EACvDnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CACA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEX,IAAMyrC,CAAAA,CAAcrpC,CAAAA,EACbA,CAAAA,CACEA,CAAAA,CAAK,kBAAA,CAAmB6K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAClE,GAAA,CAAK,SAAA,CACL,KAAA,CAAO,OACT,CAAC,CAAA,CAJiB,GAAA,CAOd+hD,CAAAA,CAAiB,CAAC3sD,CAAAA,CAAcC,CAAAA,GAC7B,IAAI,IAAA,CAAKD,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAG,CAAC,CAAA,CAAE,OAAA,EAAQ,CAGxC2sD,CAAAA,CAAqB,CAAC5sD,CAAAA,CAAcC,CAAAA,GACjC,IAAI,IAAA,CAAKD,EAAMC,CAAAA,CAAO,CAAC,CAAA,CAAE,MAAA,EAAO,CAGnC4sD,CAAAA,CAAiB,IAAM,CAC3B,IAAM7sD,CAAAA,CAAOysD,CAAAA,CAAS,WAAA,EAAY,CAC5BxsD,CAAAA,CAAQwsD,CAAAA,CAAS,QAAA,EAAS,CAC1B/4C,CAAAA,CAAci5C,CAAAA,CAAe3sD,CAAAA,CAAMC,CAAK,CAAA,CACxCwT,CAAAA,CAAWm5C,CAAAA,CAAmB5sD,CAAAA,CAAMC,CAAK,CAAA,CACzCc,CAAAA,CAAQ,IAAI,IAAA,CAEZnB,CAAAA,CAA0B,EAAC,CAGjC,IAAA,IAASvL,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIof,CAAAA,CAAUpf,CAAAA,EAAAA,CAC5BuL,CAAAA,CAAK,IAAA,CAAKxD,GAAAA,CAAC,KAAA,CAAA,CAAuB,SAAA,CAAU,SAAA,CAAA,CAAxB,CAAA,MAAA,EAAS/H,CAAC,CAAA,CAAwB,CAAE,CAAA,CAI1D,IAAA,IAAS6L,CAAAA,CAAM,CAAA,CAAGA,CAAAA,EAAOwT,CAAAA,CAAaxT,CAAAA,EAAAA,CAAO,CAC3C,IAAMH,CAAAA,CAAO,IAAI,IAAA,CAAKC,CAAAA,CAAMC,EAAOC,CAAG,CAAA,CAChCsE,CAAAA,CAAakgC,CAAAA,EACjBA,CAAAA,CAAU,OAAA,EAAQ,GAAMxkC,CAAAA,EACxBwkC,CAAAA,CAAU,QAAA,EAAS,GAAMzkC,CAAAA,EACzBykC,CAAAA,CAAU,WAAA,EAAY,GAAM1kC,CAAAA,CACxB6V,CAAAA,CACJ9U,CAAAA,CAAM,OAAA,EAAQ,GAAMb,CAAAA,EACpBa,CAAAA,CAAM,QAAA,EAAS,GAAMd,CAAAA,EACrBc,CAAAA,CAAM,WAAA,EAAY,GAAMf,CAAAA,CAE1BJ,CAAAA,CAAK,IAAA,CACHxD,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,GAAWsC,CAAI,CAAA,CACfnC,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAWjK,CAAAA,CACT,gDAAA,CACA6Q,CAAAA,CACI,yBAAA,CACAqR,CAAAA,CACEnW,CAAAA,CAAS,wBAAA,CAA2B,2BAAA,CACpCA,CAAAA,CAAS,8BAAA,CAAiC,iCAClD,CAAA,CAEC,QAAA,CAAAQ,CAAAA,CAAAA,CAfIA,CAgBP,CACF,EACF,CAEA,OAAON,CACT,CAAA,CAEA,OAAI8K,CAAAA,EAAY,CAACjN,CAAAA,CAEbrB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAA0pC,CAAAA,CAAW1E,CAAS,CAAA,CACvB,CAAA,CAKFpnC,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKg+C,CAAAA,CAAK,SAAA,CAAU,UAAA,CACvB,QAAA,CAAA,CAAAh+C,KAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBnB,CAAAA,CAAU,CAACD,CAAM,EACnB,CAAA,CACA,SAAA,CAAWhK,CAAAA,CACT,6DAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAWlxC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,EACjFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAA0pC,CAAAA,CAAW1E,CAAS,CAAA,CACvB,CAAA,CAAA,CACF,CAAA,CAEC/mC,CAAAA,EACCL,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAGA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClB2tD,CAAAA,CAAY,IAAI,IAAA,CAAKD,CAAAA,CAAS,WAAA,EAAY,CAAGA,CAAAA,CAAS,QAAA,EAAS,CAAI,CAAA,CAAG,CAAC,CAAC,EAC1E,CAAA,CACA,SAAA,CAAW94D,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAAC2oC,YAAA,CAAY,SAAA,CAAWpxC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAAG,CAAA,CAClF,CAAA,CACApC,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,qBAAA,CAAuB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAA,CAAA4sD,EAAAA,CAAYN,CAAI,CAAA,CAAES,CAAAA,CAAS,QAAA,EAAU,CAAA,CAAE,GAAA,CAAEA,CAAAA,CAAS,WAAA,EAAY,CAAA,CACjE,CAAA,CACArwD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClB2tD,CAAAA,CAAY,IAAI,IAAA,CAAKD,CAAAA,CAAS,WAAA,EAAY,CAAGA,CAAAA,CAAS,QAAA,EAAS,CAAI,CAAA,CAAG,CAAC,CAAC,EAC1E,CAAA,CACA,SAAA,CAAW94D,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,IAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAW7lC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAAG,CAAA,CACnF,CAAA,CAAA,CACF,CAAA,CAGAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,QAAA,CAAAmwD,EAAAA,CAAUP,CAAI,CAAA,CAAE,GAAA,CAAK9rD,CAAAA,EACpB9D,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CAAG,kDAAA,CAAoD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAE5G,QAAA,CAAAQ,CAAAA,CAAAA,CAHIA,CAIP,CACD,CAAA,CACH,CAAA,CAGA9D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACZ,QAAA,CAAAywD,CAAAA,EAAe,CAClB,CAAA,CAGAvvD,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CAAgC,KAAA,CAAO,CAAE,WAAA,CAAaoC,CAAAA,CAAS,uBAAA,CAA0B,SAAU,CAAA,CAChH,QAAA,CAAA,CAAAtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,EAAE,eAAA,EAAgB,CAClBtB,CAAAA,GAAW,IAAI,IAAM,CAAA,CACrBG,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAWjK,CAAAA,CACT,+BAAA,CACA+L,CAAAA,CAAS,0CAAA,CAA6C,6CACxD,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAC7B,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClB,IAAMsW,CAAAA,CAAW,IAAI,IAAA,CACrBA,CAAAA,CAAS,OAAA,CAAQA,CAAAA,CAAS,OAAA,EAAQ,CAAI,CAAC,CAAA,CACvC5X,CAAAA,GAAW4X,CAAQ,CAAA,CACnBzX,CAAAA,CAAU,KAAK,EACjB,CAAA,CACA,SAAA,CAAWjK,CAAAA,CACT,+BAAA,CACA+L,CAAAA,CAAS,0CAAA,CAA6C,6CACxD,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAW,UAAA,CAChC,CAAA,CAAA,CACF,GACF,CAAA,CAAA,CAEJ,CAEJ,CC9NO,SAASkiD,EAAAA,CAAa,CAC3B,KAAA,CAAAtzD,CAAAA,CAAQ,CAAA,CACR,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,QAAA,CAAAgL,CAAAA,CAAW,KACb,CAAA,CAAsB,CAYpB,OACEpN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,OAAA,CAde2C,CAAAA,EAAwC,CAC3D,GAAI2L,CAAAA,EAAY,CAACjN,CAAAA,CAAU,OAE3BsB,CAAAA,CAAE,eAAA,EAAgB,CAClB,IAAMZ,CAAAA,CAAOY,CAAAA,CAAE,aAAA,CAAc,qBAAA,EAAsB,CAC7ClM,CAAAA,CAAIkM,CAAAA,CAAE,OAAA,CAAUZ,CAAAA,CAAK,IAAA,CACrBqK,CAAAA,CAAa,IAAA,CAAK,KAAA,CAAO3V,CAAAA,CAAIsL,CAAAA,CAAK,KAAA,CAAS,GAAG,CAAA,CAC9C4uD,CAAAA,CAAe,KAAK,GAAA,CAAI,CAAA,CAAG,IAAA,CAAK,GAAA,CAAI,GAAA,CAAKvkD,CAAU,CAAC,CAAA,CAC1D/K,CAAAA,CAASsvD,CAAY,EACvB,CAAA,CAMM,SAAA,CAAWp5D,CAAAA,CACT,yCAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAAA,CACzB,CAACgL,CAAAA,EAAYjN,CAAAA,EAAY,gBAC3B,CAAA,CAEA,QAAA,CAAArB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,oCAAA,CACA6F,CAAAA,GAAU,GAAA,CAAM,cAAA,CAAiB,cACnC,CAAA,CACA,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAGA,CAAK,CAAA,CAAA,CAAI,CAAA,CAC9B,CAAA,CACF,CAAA,CACA8D,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,wBAAA,CAA0B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACtF,QAAA,CAAA,CAAAlG,CAAAA,CAAM,GAAA,CAAA,CACT,CAAA,CAAA,CACF,CAEJ,CCtCO,SAASwzD,EAAAA,CAAS,CACvB,KAAA,CAAAxzD,CAAAA,CAAQ,EAAA,CACR,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,WAAA,CAAA+K,CAAAA,CAAc,GAAA,CACd,QAAA,CAAAC,CAAAA,CAAW,KACb,CAAA,CAAkB,CAChB,GAAM,CAACzB,CAAAA,CAAWC,CAAY,CAAA,CAAIxM,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAACyM,CAAAA,CAAWC,CAAY,CAAA,CAAI1M,QAAAA,CAASlD,CAAK,CAAA,CAC1CuN,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,CAAA,CAE9CnB,SAAAA,CAAU,IAAM,CACVoM,CAAAA,EAAalC,CAAAA,CAAS,OAAA,GACxBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,EAAM,CACvBA,CAAAA,CAAS,OAAA,CAAQ,MAAA,EAAO,EAE5B,CAAA,CAAG,CAACkC,CAAS,CAAC,CAAA,CAEdpM,UAAU,IAAM,CACduM,CAAAA,CAAa5P,CAAK,EACpB,CAAA,CAAG,CAACA,CAAK,CAAC,CAAA,CAEV,IAAM6P,CAAAA,CAAa,IAAM,CACnBF,CAAAA,GAAc3P,CAAAA,EAChBiE,CAAAA,GAAW0L,CAAS,CAAA,CAEtBD,CAAAA,CAAa,KAAK,EACpB,CAAA,CAEMK,CAAAA,CAAiBxK,CAAAA,EAA2B,CAC5CA,CAAAA,CAAE,GAAA,GAAQ,OAAA,CACZsK,CAAAA,EAAW,CACFtK,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACnBqK,CAAAA,CAAa5P,CAAK,CAAA,CAClB0P,CAAAA,CAAa,KAAK,CAAA,EAEtB,CAAA,CAEA,OAAIwB,CAAAA,EAAY,CAACjN,CAAAA,CAEbrB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,kBAAA,CAAoB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAChF,QAAA,CAAAlG,CAAAA,EAASiR,CAAAA,CACZ,CAAA,CAIAxB,CAAAA,CAEA7M,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,EACL,IAAA,CAAK,MAAA,CACL,KAAA,CAAOoC,CAAAA,CACP,QAAA,CAAWpK,CAAAA,EAAMqK,CAAAA,CAAarK,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC5C,MAAA,CAAQsK,CAAAA,CACR,SAAA,CAAWE,CAAAA,CACX,OAAA,CAAUxK,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAClC,SAAA,CAAWpL,CAAAA,CACT,sDAAA,CACA+L,CAAAA,CACI,wCAAA,CACA,yCACN,CAAA,CACF,CAAA,CAKFtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBmK,CAAAA,CAAa,IAAI,EACnB,CAAA,CACA,SAAA,CAAWvV,CAAAA,CACT,uEAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAA,CAC9C,CAAClG,CAAAA,GAAUkG,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CACzC,CAAA,CAEC,QAAA,CAAAlG,CAAAA,EAASiR,CAAAA,CACZ,CAEJ,CC/EO,SAASwiD,EAAAA,CAAW,CACzB,KAAA,CAAAzzD,CAAAA,CACA,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,WAAA,CAAA+K,CAAAA,CAAc,GAAA,CACd,GAAA,CAAAyiD,CAAAA,CACA,GAAA,CAAAz/B,CAAAA,CACA,QAAA,CAAA/iB,CAAAA,CAAW,KACb,CAAA,CAAoB,CAClB,GAAM,CAACzB,CAAAA,CAAWC,CAAY,CAAA,CAAIxM,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAACyM,CAAAA,CAAWC,CAAY,CAAA,CAAI1M,QAAAA,CAASlD,CAAAA,EAAO,QAAA,EAAS,EAAK,EAAE,CAAA,CAC5DuN,CAAAA,CAAW/I,MAAAA,CAAyB,IAAI,CAAA,CAE9CnB,SAAAA,CAAU,IAAM,CACVoM,CAAAA,EAAalC,CAAAA,CAAS,OAAA,GACxBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,EAAM,CACvBA,CAAAA,CAAS,OAAA,CAAQ,MAAA,EAAO,EAE5B,EAAG,CAACkC,CAAS,CAAC,CAAA,CAEdpM,SAAAA,CAAU,IAAM,CACduM,CAAAA,CAAa5P,CAAAA,EAAO,QAAA,EAAS,EAAK,EAAE,EACtC,CAAA,CAAG,CAACA,CAAK,CAAC,CAAA,CAEV,IAAM6P,CAAAA,CAAa,IAAM,CACvB,IAAM8jD,CAAAA,CAAW,UAAA,CAAWhkD,CAAS,CAAA,CACrC,GAAI,CAAC,KAAA,CAAMgkD,CAAQ,CAAA,CAAG,CACpB,IAAIC,CAAAA,CAAaD,CAAAA,CACbD,CAAAA,GAAQ,MAAA,GAAWE,CAAAA,CAAa,IAAA,CAAK,GAAA,CAAIF,CAAAA,CAAKE,CAAU,CAAA,CAAA,CACxD3/B,CAAAA,GAAQ,MAAA,GAAW2/B,CAAAA,CAAa,IAAA,CAAK,GAAA,CAAI3/B,CAAAA,CAAK2/B,CAAU,CAAA,CAAA,CACxDA,CAAAA,GAAe5zD,CAAAA,EACjBiE,CAAAA,GAAW2vD,CAAU,EAEzB,CACAlkD,CAAAA,CAAa,KAAK,EACpB,CAAA,CAEMK,EAAiBxK,CAAAA,EAA2B,CAC5CA,CAAAA,CAAE,GAAA,GAAQ,OAAA,CACZsK,CAAAA,EAAW,CACFtK,CAAAA,CAAE,GAAA,GAAQ,QAAA,GACnBqK,CAAAA,CAAa5P,CAAAA,EAAO,QAAA,EAAS,EAAK,EAAE,CAAA,CACpC0P,CAAAA,CAAa,KAAK,CAAA,EAEtB,CAAA,CAEA,OAAIwB,CAAAA,EAAY,CAACjN,CAAAA,CAEbrB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAlG,CAAAA,GAAU,MAAA,CAAYA,CAAAA,CAAQiR,CAAAA,CACjC,CAAA,CAIAxB,CAAAA,CAEA7M,GAAAA,CAAC,OAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,IAAA,CAAK,QAAA,CACL,KAAA,CAAOoC,CAAAA,CACP,QAAA,CAAWpK,CAAAA,EAAMqK,CAAAA,CAAarK,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC5C,MAAA,CAAQsK,CAAAA,CACR,SAAA,CAAWE,CAAAA,CACX,OAAA,CAAUxK,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAClC,GAAA,CAAKmuD,CAAAA,CACL,GAAA,CAAKz/B,CAAAA,CACL,SAAA,CAAW95B,CAAAA,CACT,sDAAA,CACA+L,CAAAA,CACI,wCAAA,CACA,yCACN,CAAA,CACF,CAAA,CAKFtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBmK,CAAAA,CAAa,IAAI,EACnB,CAAA,CACA,SAAA,CAAWvV,CAAAA,CACT,8DAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAA,CAC9ClG,CAAAA,GAAU,MAAA,GAAckG,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CACtD,CAAA,CAEC,QAAA,CAAAlG,CAAAA,GAAU,MAAA,CAAYA,CAAAA,CAAQiR,CAAAA,CACjC,CAEJ,CC3FO,SAAS4iD,EAAAA,CAAa,CAC3B,KAAA,CAAA7zD,CAAAA,CACA,OAAA,CAAAhE,CAAAA,CAAU,EAAC,CACX,QAAA,CAAAiI,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,WAAA,CAAA+K,CAAAA,CAAc,GAAA,CACd,QAAA,CAAAC,CAAAA,CAAW,KACb,CAAA,CAAsB,CACpB,GAAM,CAAC/M,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC4+C,CAAAA,CAAMt9C,MAAAA,CAAuB,IAAI,CAAA,CAcvC,OAZAnB,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CACxCu8C,CAAAA,CAAI,OAAA,EAAW,CAACA,CAAAA,CAAI,OAAA,CAAQ,QAAA,CAASv8C,CAAAA,CAAE,MAAc,CAAA,EACvDnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CACA,OAAID,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAakB,CAAkB,CAAA,CAEpD,IAAM,SAAS,mBAAA,CAAoB,WAAA,CAAaA,CAAkB,CAC3E,CAAA,CAAG,CAAClB,CAAM,CAAC,CAAA,CAEP+M,CAAAA,EAAY,CAACjN,CAAAA,CAEbrB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAlG,CAAAA,EAASiR,CAAAA,CACZ,CAAA,CAKFnN,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAKg+C,CAAAA,CAAK,SAAA,CAAU,UAAA,CACvB,QAAA,CAAA,CAAAh+C,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBnB,CAAAA,CAAU,CAACD,CAAM,EACnB,CAAA,CACA,SAAA,CAAWhK,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,mCAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC5B,CAAClG,IAAUkG,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CACzC,CAAA,CACG,QAAA,CAAAlG,CAAAA,EAASiR,CAAAA,CACZ,CAAA,CACArO,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,uBAAA,CAAyB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACpG,CAAA,CAEC/B,CAAAA,EACCvB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,4GAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAEC,QAAA,CAAAlK,CAAAA,CAAQ,MAAA,GAAW,CAAA,CAClB4G,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,YAAA,CAEpF,CAAA,CAEAlK,CAAAA,CAAQ,GAAA,CAAKwL,CAAAA,EACX1D,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBtB,CAAAA,CAASuD,CAAM,CAAA,CACfpD,CAAAA,CAAU,KAAK,EACjB,EACA,SAAA,CAAWjK,CAAAA,CACT,oFAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BlG,CAAAA,GAAUwH,CAAAA,GAAWtB,CAAAA,CAAS,YAAA,CAAe,YAAA,CAC/C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CACtC,QAAA,CAAAsB,CAAAA,CACH,CAAA,CACCxH,CAAAA,GAAUwH,CAAAA,EACT5E,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAAA,CAAA,CAhBvCrN,CAkBP,CACD,CAAA,CAEL,CAAA,CAAA,CAEJ,CAEJ,CC/FO,SAASssD,EAAAA,CAAa,CAC3B,KAAA,CAAA9zD,CAAAA,CAAQ,KAAA,CACR,QAAA,CAAAiE,CAAAA,CACA,MAAA,CAAAiC,CAAAA,CACA,QAAA,CAAAgL,CAAAA,CAAW,KACb,CAAA,CAAsB,CAQpB,OACEtO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CATiB2C,GAAwB,CAC3CA,CAAAA,CAAE,eAAA,EAAgB,CACd,CAAC2L,CAAAA,EAAYjN,CAAAA,EACfA,CAAAA,CAAS,CAACjE,CAAK,EAEnB,CAAA,CAKI,QAAA,CAAUkR,CAAAA,EAAY,CAACjN,CAAAA,CACvB,SAAA,CAAW9J,CAAAA,CACT,6EAAA,CACA6F,CAAAA,CACI,+BAAA,CACAkG,CAAAA,CACE,yCAAA,CACA,uCAAA,CAAA,CACLgL,CAAAA,EAAY,CAACjN,CAAAA,GAAa,+BAC7B,CAAA,CAEC,QAAA,CAAAjE,CAAAA,EAAS4C,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAClD,CAEJ,CC/BO,SAASk/C,EAAAA,CAAS,CACvB,KAAA,CAAA/zD,CAAAA,CAAQ,EAAC,CACT,MAAA,CAAAkG,CAAAA,CACA,UAAA,CAAAkP,CAAAA,CAAa,CACf,CAAA,CAAkB,CAChB,GAAIpV,CAAAA,CAAM,MAAA,GAAW,CAAA,CACnB,OACE4C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,GAAA,CAE7E,CAAA,CAIJ,IAAMmP,CAAAA,CAAcrV,CAAAA,CAAM,KAAA,CAAM,CAAA,CAAGoV,CAAU,CAAA,CACvC4+C,CAAAA,CAAiBh0D,CAAAA,CAAM,MAAA,CAASoV,CAAAA,CAEtC,OACEtR,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACZ,QAAA,CAAA,CAAAuR,CAAAA,CAAY,GAAA,CAAKrB,CAAAA,EAChBpR,GAAAA,CAAC,MAAA,CAAA,CAEC,SAAA,CAAU,2DAAA,CACV,KAAA,CAAO,CACL,eAAA,CAAiBoR,CAAAA,CAAI,KAAA,CAAQ,CAAA,EAAGA,CAAAA,CAAI,KAAK,CAAA,EAAA,CAAA,CAAO9N,CAAAA,CAAS,uBAAA,CAA0B,SAAA,CACnF,KAAA,CAAO8N,CAAAA,CAAI,KAAA,GAAU9N,CAAAA,CAAS,SAAA,CAAY,SAAA,CAC5C,CAAA,CAEC,QAAA,CAAA8N,CAAAA,CAAI,IAAA,CAAA,CAPAA,CAAAA,CAAI,EAQX,CACD,CAAA,CACAggD,CAAAA,CAAiB,GAChBlwD,IAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,2DAAA,CACA+L,CAAAA,CAAS,4BAAA,CAA+B,2BAC1C,CAAA,CACD,QAAA,CAAA,CAAA,GAAA,CACG8tD,CAAAA,CAAAA,CACJ,CAAA,CAAA,CAEJ,CAEJ,CCtBA,SAASpjD,EAAAA,CAAYC,CAAAA,CAAsB,CACzC,OAAOA,CAAAA,CACJ,KAAA,CAAM,GAAG,CAAA,CACT,IAAIC,CAAAA,EAAKA,CAAAA,CAAE,CAAC,CAAC,CAAA,CACb,IAAA,CAAK,EAAE,CAAA,CACP,WAAA,EAAY,CACZ,KAAA,CAAM,CAAA,CAAG,CAAC,CACf,CAGA,SAAS2hD,EAAAA,CAAe5hD,CAAAA,CAAsB,CAC5C,IAAM6iB,CAAAA,CAAS,CAAC,MAAA,CAAQ,OAAA,CAAS,QAAA,CAAU,MAAA,CAAQ,QAAA,CAAU,KAAA,CAAO,QAAA,CAAU,MAAM,CAAA,CAChFg/B,CAAAA,CAAO,CAAA,CACX,IAAA,IAAS73D,CAAAA,CAAI,CAAA,CAAGA,CAAAA,CAAIgW,CAAAA,CAAK,MAAA,CAAQhW,CAAAA,EAAAA,CAC/B63D,CAAAA,CAAO7hD,CAAAA,CAAK,UAAA,CAAWhW,CAAC,CAAA,EAAA,CAAM63D,CAAAA,EAAQ,CAAA,EAAKA,CAAAA,CAAAA,CAE7C,OAAOh/B,CAAAA,CAAO,IAAA,CAAK,GAAA,CAAIg/B,CAAI,CAAA,CAAIh/B,CAAAA,CAAO,MAAM,CAAA,EAAK,MACnD,CA6BO,SAASugC,EAAAA,CAAiB,CAC/B,MAAAn2C,CAAAA,CACA,OAAA,CAAA9H,CAAAA,CACA,MAAA,CAAA9P,CAAAA,CACA,MAAA,CAAAkL,CAAAA,CACA,UAAA,CAAAoxC,CAAAA,CACA,eAAA,CAAAphB,CAAAA,CACA,YAAA,CAAAD,CAAAA,CACA,YAAA,CAAAlrB,CAAAA,CACA,YAAA,CAAAi+C,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,cAAA,CAAAxsD,CAAAA,CAAiB,EACnB,CAAA,CAA0B,CACxB,IAAMpD,CAAAA,CAAUC,MAAAA,CAAuB,IAAI,CAAA,CACrC0F,CAAAA,CAAIkH,CAAAA,GAAW,IAAA,CAAOsR,EAAAA,CAAa,EAAA,CAAKA,EAAAA,CAAa,EAAA,CAsB3D,GAnBArf,SAAAA,CAAU,IAAM,CACd,IAAMgC,CAAAA,CAAsBE,CAAAA,EAAkB,CACxChB,CAAAA,CAAQ,OAAA,EAAW,CAACA,CAAAA,CAAQ,OAAA,CAAQ,QAAA,CAASgB,CAAAA,CAAE,MAAc,CAAA,EAC/DyQ,CAAAA,GAEJ,CAAA,CAEM1Q,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,UAAUyQ,CAAAA,GAC1B,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAa3Q,CAAkB,CAAA,CACzD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWC,CAAY,CAAA,CAC1C,IAAM,CACX,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaD,CAAkB,CAAA,CAC5D,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWC,CAAY,EACtD,CACF,CAAA,CAAG,CAAC0Q,CAAO,CAAC,CAAA,CAER,CAAC8H,CAAAA,CAAM,MAAA,CAAQ,OAAO,IAAA,CAG1B,IAAMs2C,CAAAA,CAAmB,IAAkB,CACzC,GAAI,CAACt2C,CAAAA,CAAM,IAAA,CAAM,OAAO,EAAC,CAEzB,IAAM2hB,CAAAA,CAAoB,EAAC,CAG3B,OAAI+iB,CAAAA,EACF/iB,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,MAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,IAAA,CACT,IAAA,CAAMtH,IAACs9B,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,CAAA,CACjC,OAAA,CAAS,IAAM,CACbsiB,CAAAA,CAAW1kC,CAAAA,CAAM,IAAK,CAAA,CACtB9H,CAAAA,GACF,CACF,CAAC,CAAA,CAGHypB,CAAAA,CAAM,IAAA,CAAK,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAO,EAAA,CAAI,IAAA,CAAM,IAAA,CAAM,SAAA,CAAW,IAAK,CAAC,CAAA,CAG7DxpB,CAAAA,GACFwpB,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,QAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,YAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CACxC,OAAA,CAAS,CACP,CACE,EAAA,CAAI,aAAA,CACJ,KAAA,CAAOrR,CAAAA,CAAE,IAAA,CACT,IAAA,CAAMtH,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAU,uBAAA,CAAwB,CAAA,CAChD,OAAA,CAAS,IAAM,CACbjF,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,MAAA,CAAQ,MAAA,CAAQ,QAAA,CAAU,CAAE,CAAC,CAAA,CAC5D9H,CAAAA,GACF,CACF,CAAA,CACA,CACE,EAAA,CAAI,oBAAA,CACJ,KAAA,CAAO9L,CAAAA,CAAE,UAAA,CACT,IAAA,CAAMtH,GAAAA,CAACi+B,UAAAA,CAAA,CAAW,SAAA,CAAU,uBAAA,CAAwB,CAAA,CACpD,OAAA,CAAS,IAAM,CACb5qB,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,MAAA,CAAQ,aAAA,CAAe,QAAA,CAAUA,CAAAA,CAAM,IAAA,CAAM,QAAA,EAAY,EAAG,CAAC,CAAA,CAC5F9H,CAAAA,GACF,CACF,CAAA,CACA,CACE,EAAA,CAAI,kBAAA,CACJ,KAAA,CAAO9L,CAAAA,CAAE,SAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,wBAAA,CAAyB,EACvD,OAAA,CAAS,IAAM,CACbtF,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,MAAA,CAAQ,WAAA,CAAa,QAAA,CAAU,GAAI,CAAC,CAAA,CACnE9H,CAAAA,GACF,CACF,CACF,CACF,CAAC,CAAA,CAGDypB,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,UAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,cAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAChC,OAAA,CAAS,CACP,CACE,EAAA,CAAI,iBAAA,CACJ,KAAA,CAAOxS,CAAAA,CAAE,MAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iCAAA,CAAkC,CAAA,CACvD,OAAA,CAAS,IAAM,CACbqT,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,QAAA,CAAU,QAAS,CAAC,CAAA,CACnD9H,IACF,CACF,CAAA,CACA,CACE,EAAA,CAAI,eAAA,CACJ,KAAA,CAAO9L,CAAAA,CAAE,IAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CAAqC,CAAA,CAC1D,OAAA,CAAS,IAAM,CACbqT,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,QAAA,CAAU,MAAO,CAAC,CAAA,CACjD9H,CAAAA,GACF,CACF,CAAA,CACA,CACE,EAAA,CAAI,iBAAA,CACJ,KAAA,CAAO9L,CAAAA,CAAE,MAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CAAqC,CAAA,CAC1D,OAAA,CAAS,IAAM,CACbqT,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,QAAA,CAAU,QAAS,CAAC,CAAA,CACnD9H,CAAAA,GACF,CACF,CAAA,CACA,CACE,EAAA,CAAI,cAAA,CACJ,MAAO9L,CAAAA,CAAE,GAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CAAmC,CAAA,CACxD,OAAA,CAAS,IAAM,CACbqT,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,QAAA,CAAU,KAAM,CAAC,CAAA,CAChD9H,CAAAA,GACF,CACF,CACF,CACF,CAAC,CAAA,CAGGrO,CAAAA,CAAe,MAAA,CAAS,CAAA,EAC1B83B,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,QAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,UAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC4rD,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,CAAA,CACjC,OAAA,CAAS7mD,CAAAA,CAAe,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAKK,CAAAA,GAAU,CACjD,EAAA,CAAI,CAAA,OAAA,EAAUA,CAAAA,CAAK,EAAE,CAAA,CAAA,CACrB,KAAA,CAAOA,CAAAA,CAAK,IAAA,CACZ,KACEpF,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,0FAAA,CAET,QAAA,CAAAoF,CAAAA,CAAK,IAAA,CAAK,MAAA,CAAO,CAAC,CAAA,CAAE,WAAA,EAAY,CACnC,CAAA,CAEF,OAAA,CAAS,IAAM,CACb,IAAM0T,CAAAA,CAAmBoC,CAAAA,CAAM,IAAA,CAAM,SAAA,EAAa,EAAC,CAG7CnC,CAAAA,CADoBD,CAAAA,CAAiB,IAAA,CAAK/F,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAA,CAErE0T,CAAAA,CAAiB,MAAA,CAAO/F,CAAAA,EAAKA,CAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAA,CACjD,CAAC,GAAG0T,CAAAA,CAAkB,CACpB,IAAA,CAAM1T,CAAAA,CAAK,IAAA,CACX,QAAA,CAAU4I,EAAAA,CAAY5I,CAAAA,CAAK,IAAI,CAAA,CAC/B,KAAA,CAAOA,CAAAA,CAAK,KAAA,EAASyqD,EAAAA,CAAezqD,CAAAA,CAAK,IAAI,CAAA,CAC7C,MAAA,CAAQA,CAAAA,CAAK,SACf,CAAC,CAAA,CACLiO,CAAAA,CAAa,CAAE,GAAG6H,CAAAA,CAAM,IAAA,CAAO,SAAA,CAAWnC,CAAa,CAAC,CAAA,CACxD3F,CAAAA,GACF,CACF,CAAA,CAAE,CACJ,CAAC,CAAA,CAAA,CAILypB,CAAAA,CAAM,IAAA,CAAK,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAO,EAAA,CAAI,IAAA,CAAM,IAAA,CAAM,SAAA,CAAW,IAAK,CAAC,CAAA,CAG7D2B,CAAAA,EACF3B,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,WAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,SAAA,CACT,IAAA,CAAMtH,GAAAA,CAACyxD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAChC,OAAA,CAAS,IAAM,CACbjzB,CAAAA,CAAgBtjB,CAAAA,CAAM,IAAK,CAAA,CAC3B9H,CAAAA,GACF,CACF,CAAC,CAAA,CAICmrB,CAAAA,EACF1B,CAAAA,CAAM,IAAA,CAAK,CACT,GAAI,QAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,MAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC6a,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAClC,MAAA,CAAQ,IAAA,CACR,OAAA,CAAS,IAAM,CACb0jB,CAAAA,CAAarjB,CAAAA,CAAM,IAAA,CAAM,EAAE,CAAA,CAC3B9H,CAAAA,GACF,CACF,CAAC,CAAA,CAGIypB,CACT,CAAA,CAEM60B,CAAAA,CAAqB,IAAkB,CAC3C,GAAI,CAACx2C,CAAAA,CAAM,QAAA,CAAU,OAAO,EAAC,CAE7B,IAAM2hB,CAAAA,CAAoB,EAAC,CAG3B,OAAI00B,CAAAA,GACF10B,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,UAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,OAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC29B,OAAAA,CAAA,CAAQ,SAAA,CAAU,SAAA,CAAU,CAAA,CACnC,OAAA,CAAS,IAAM,CACb4zB,EAAar2C,CAAAA,CAAM,QAAA,CAAW,KAAK,CAAA,CACnC9H,CAAAA,GACF,CACF,CAAC,CAAA,CACDypB,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,WAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,QAAA,CACT,IAAA,CAAMtH,GAAAA,CAAC49B,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,CAAA,CACrC,OAAA,CAAS,IAAM,CACb2zB,CAAAA,CAAar2C,CAAAA,CAAM,QAAA,CAAW,MAAM,CAAA,CACpC9H,CAAAA,GACF,CACF,CAAC,CAAA,CAAA,CAICk+C,CAAAA,EAAgBp2C,CAAAA,CAAM,QAAA,GAAa,MAAA,GACrC2hB,CAAAA,CAAM,IAAA,CAAK,CAAE,EAAA,CAAI,UAAA,CAAY,KAAA,CAAO,EAAA,CAAI,IAAA,CAAM,IAAA,CAAM,SAAA,CAAW,IAAK,CAAC,CAAA,CACrEA,CAAAA,CAAM,IAAA,CAAK,CACT,EAAA,CAAI,MAAA,CACJ,KAAA,CAAOv1B,CAAAA,CAAE,UAAA,CACT,KAAMtH,GAAAA,CAAC69B,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAClC,OAAA,CAAS,IAAM,CACbyzB,CAAAA,CAAap2C,CAAAA,CAAM,QAAS,CAAA,CAC5B9H,CAAAA,GACF,CACF,CAAC,CAAA,CAAA,CAGIypB,CACT,CAAA,CAEM80B,CAAAA,CAAYz2C,CAAAA,CAAM,IAAA,GAAS,MAAA,CAASs2C,CAAAA,EAAiB,CAAIE,CAAAA,EAAmB,CAG5EE,CAAAA,CAAiC,CACrC,QAAA,CAAU,OAAA,CACV,IAAA,CAAM12C,CAAAA,CAAM,CAAA,CACZ,GAAA,CAAKA,CAAAA,CAAM,CAAA,CACX,MAAA,CAAQ,IACV,CAAA,CAEA,OACElb,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAK2B,CAAAA,CACL,KAAA,CAAOiwD,CAAAA,CACP,SAAA,CAAWr6D,CAAAA,CACT,gDAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAEC,QAAA,CAAAquD,CAAAA,CAAU,GAAA,CAAK9+C,CAAAA,EACVA,CAAAA,CAAK,SAAA,CAEL7S,GAAAA,CAAC,OAEC,SAAA,CAAWzI,CAAAA,CAAG,WAAA,CAAa+L,CAAAA,CAAS,aAAA,CAAgB,aAAa,CAAA,CAAA,CAD5DuP,CAAAA,CAAK,EAEZ,CAAA,CAIAA,CAAAA,CAAK,OAAA,CAEL7S,GAAAA,CAAC6xD,EAAAA,CAAA,CAEC,IAAA,CAAMh/C,CAAAA,CACN,MAAA,CAAQvP,CAAAA,CAAAA,CAFHuP,CAAAA,CAAK,EAGZ,CAAA,CAKF3R,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS2R,CAAAA,CAAK,OAAA,CACd,SAAA,CAAWtb,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BuP,CAAAA,CAAK,MAAA,CACD,iCAAA,CACAvP,CAAAA,CAAS,YAAA,CAAe,eAC9B,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAGsb,CAAAA,CAAK,MAAA,CAAS,cAAA,CAAiBvP,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC3F,QAAA,CAAAuP,CAAAA,CAAK,IAAA,CACR,CAAA,CACCA,CAAAA,CAAK,KAAA,CAAA,CAAA,CAbDA,CAAAA,CAAK,EAcZ,CAEH,CAAA,CACH,CAEJ,CAGA,SAASg/C,EAAAA,CAAY,CAAE,IAAA,CAAAh/C,CAAAA,CAAM,MAAA,CAAAvP,CAAO,CAAA,CAAwC,CAC1E,GAAM,CAAC/B,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpCwxD,CAAAA,CAAalwD,MAAAA,EAAuB,CAW1C,OACEV,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,UAAA,CACV,YAAA,CAZqB,IAAM,CACzB4wD,CAAAA,CAAW,OAAA,EAAS,YAAA,CAAaA,CAAAA,CAAW,OAAO,CAAA,CACvDtwD,CAAAA,CAAU,IAAI,EAChB,CAAA,CAUI,YAAA,CARqB,IAAM,CAC7BswD,CAAAA,CAAW,OAAA,CAAU,UAAA,CAAW,IAAMtwD,CAAAA,CAAU,KAAK,CAAA,CAAG,GAAG,EAC7D,CAAA,CAQI,QAAA,CAAA,CAAAN,IAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,iCAC5C,CAAA,CAEA,UAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC1C,QAAA,CAAAuP,CAAAA,CAAK,IAAA,CACR,CAAA,CACA7S,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,QAAA,CAAU,QAAA,CAAA6S,CAAAA,CAAK,KAAA,CAAM,CAAA,CACrC7S,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAW7lC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACvF,CAAA,CAEC/B,CAAAA,EAAUsR,CAAAA,CAAK,OAAA,EACd7S,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAEC,QAAA,CAAAuP,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAKk/C,CAAAA,EACjB7wD,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS6wD,CAAAA,CAAQ,OAAA,CACjB,SAAA,CAAWx6D,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,iCAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWsD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC1C,QAAA,CAAAyuD,CAAAA,CAAQ,IAAA,CACX,CAAA,CACCA,CAAAA,CAAQ,KAAA,CAAA,CAAA,CAVJA,CAAAA,CAAQ,EAWf,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAEJ,CAGA,IAAMjyC,EAAAA,CAAe,CACnB,EAAA,CAAI,CACF,IAAA,CAAM,MAAA,CACN,YAAA,CAAc,eAAA,CACd,cAAA,CAAgB,iBAAA,CAChB,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,WAAA,CACX,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,OAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,WAAA,CACX,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,GAAA,CAAK,KAAA,CACL,OAAA,CAAS,iBAAA,CACT,QAAA,CAAU,iBAAA,CACV,UAAA,CAAY,aACd,CAAA,CACA,EAAA,CAAI,CACF,IAAA,CAAM,QAAA,CACN,YAAA,CAAc,gBAAA,CACd,cAAA,CAAgB,mBAAA,CAChB,WAAY,iBAAA,CACZ,SAAA,CAAW,UAAA,CACX,MAAA,CAAQ,UAAA,CACR,IAAA,CAAM,WAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,YAAA,CACX,MAAA,CAAQ,SAAA,CACR,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,OAAA,CACR,GAAA,CAAK,MAAA,CACL,OAAA,CAAS,oBAAA,CACT,QAAA,CAAU,oBAAA,CACV,UAAA,CAAY,iBACd,CACF,CAAA,CCtcA,IAAMkyC,EAAAA,CAAoD,CACxD,IAAA,CAAMhyD,GAAAA,CAACiyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAChC,MAAA,CAAQjyD,GAAAA,CAAC2rD,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,CAAA,CACvC,QAAA,CAAU3rD,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,SAAA,CAAW9Z,GAAAA,CAAC4rD,KAAAA,CAAA,CAAM,SAAA,CAAU,SAAA,CAAU,CAAA,CACtC,SAAA,CAAW5rD,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACzC,OAAA,CAASzoC,GAAAA,CAACkyD,aAAAA,CAAA,CAAc,SAAA,CAAU,SAAA,CAAU,CAAA,CAC5C,QAAA,CAAUlyD,GAAAA,CAACmxB,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACxC,IAAA,CAAMnxB,IAAC8R,GAAAA,CAAA,CAAI,SAAA,CAAU,SAAA,CAAU,CAAA,CAC/B,IAAA,CAAM9R,GAAAA,CAACiyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAChC,MAAA,CAAQjyD,GAAAA,CAACmyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAClC,IAAA,CAAMnyD,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,QAAA,CAAUzoC,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,CAAA,CAC3C,QAAA,CAAU/R,GAAAA,CAACoyD,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,CAC7C,CAAA,CAGMC,EAAAA,CAAiC,CAAC,MAAA,CAAQ,QAAA,CAAU,UAAA,CAAY,WAAA,CAAa,WAAA,CAAa,SAAA,CAAW,UAAA,CAAY,MAAM,CAAA,CAEtH,SAAS5zC,EAAAA,CAAe,CAC7B,MAAA,CAAAld,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,OAAA,CAAAsL,CAAAA,CACA,YAAA,CAAA4zC,EAAe,EAAC,CAChB,eAAA,CAAAC,CAAAA,CACA,mBAAA,CAAAC,CAAAA,CACA,MAAA,CAAAlvD,CAAAA,CACA,MAAA,CAAAkL,CACF,CAAA,CAAwB,CACtB,GAAM,CAAC8U,CAAAA,CAAQC,CAAS,CAAA,CAAIjjB,QAAAA,CAAS,EAAE,CAAA,CACjCmyD,CAAAA,CAAW7wD,MAAAA,CAAuB,IAAI,CAAA,CACtC0F,CAAAA,CAAIkH,CAAAA,GAAW,IAAA,CAAOsR,EAAAA,CAAa,EAAA,CAAKA,EAAAA,CAAa,EAAA,CAoC3D,GAjCArf,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAGb,IAAM8nB,CAAAA,CAAY,UAAA,CAAW,IAAM,CACjC,IAAM5mB,CAAAA,CAAsBE,CAAAA,EAAkB,CACxC8vD,CAAAA,CAAS,OAAA,EAAW,CAACA,CAAAA,CAAS,OAAA,CAAQ,QAAA,CAAS9vD,CAAAA,CAAE,MAAc,CAAA,EACjEyQ,CAAAA,GAEJ,CAAA,CAEM1Q,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAUyQ,CAAAA,GAC1B,CAAA,CAEA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAa3Q,CAAkB,CAAA,CACzD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWC,CAAY,CAAA,CAGhD+vD,CAAAA,CAAiB,QAAA,CAAW,IAAM,CACjC,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAahwD,CAAkB,CAAA,CAC5D,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWC,CAAY,EACtD,EACF,CAAA,CAAG,GAAG,CAAA,CAEN,OAAO,IAAM,CACX,YAAA,CAAa2mB,CAAS,CAAA,CACjBopC,CAAAA,CAAiB,QAAA,EACnBA,CAAAA,CAAiB,QAAA,GAEtB,CACF,CAAA,CAAG,CAAClxD,CAAAA,CAAQ6R,CAAO,CAAC,CAAA,CAEhB,CAAC7R,CAAAA,CAAQ,OAAO,IAAA,CAEpB,IAAMmxD,CAAAA,CAAkBrtC,CAAAA,EACf/d,CAAAA,CAAE,OAAA,CAAQ+d,CAAI,GAAKA,CAAAA,CAGtBstC,CAAAA,CAA0Bv2C,CAAAA,EAAqB,CAEnD,GAAIA,CAAAA,GAAa,MAAA,CAAQ,OAEzB,IAAMw2C,CAAAA,CAAal0C,CAAAA,CAAQ,GAAA,CAAK5iB,CAAAA,EAC9BA,CAAAA,CAAI,EAAA,GAAOsgB,CAAAA,CAAW,CAAE,GAAGtgB,CAAAA,CAAK,OAAA,CAAS,CAACA,CAAAA,CAAI,OAAQ,CAAA,CAAIA,CAC5D,CAAA,CACAy2D,CAAAA,CAAgBK,CAAU,EAC5B,CAAA,CAEMC,CAAAA,CAAY,CAACxtC,CAAAA,CAAkBytC,CAAAA,GAA2B,CAE9D,IAAMC,CAAAA,CAAiBr0C,CAAAA,CAAQ,IAAA,CAC5B5iB,CAAAA,EAAQA,CAAAA,CAAI,IAAA,GAASupB,CAAAA,GAAS,CAACytC,CAAAA,EAAiBh3D,CAAAA,CAAI,aAAA,GAAkBg3D,CAAAA,CACzE,CAAA,CAEA,GAAIC,CAAAA,CAAgB,CAElBJ,CAAAA,CAAuBI,CAAAA,CAAe,EAAE,CAAA,CACxC,MACF,CAGA,IAAMC,CAAAA,CAAyB,CAC7B,EAAA,CAAIF,GAAiBztC,CAAAA,CACrB,IAAA,CAAAA,CAAAA,CACA,KAAA,CAAOytC,CAAAA,CACHR,CAAAA,CAAa,IAAA,CAAMW,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOH,CAAa,CAAA,EAAG,IAAA,EAAQztC,CAAAA,CAC1DqtC,CAAAA,CAAertC,CAAI,CAAA,CACvB,KAAA,CAAO,GAAA,CACP,OAAA,CAAS,IAAA,CACT,QAAA,CAAU,IAAA,CACV,SAAA,CAAW,IAAA,CACX,aAAA,CAAAytC,CACF,CAAA,CAEAP,CAAAA,CAAgB,CAAC,GAAG7zC,CAAAA,CAASs0C,CAAS,CAAC,EACzC,CAAA,CAGME,CAAAA,CAA0Bb,EAAAA,CAAiB,MAAA,CAAQhtC,CAAAA,EACvDqtC,CAAAA,CAAertC,CAAI,CAAA,CAAE,WAAA,EAAY,CAAE,QAAA,CAAS/B,CAAAA,CAAO,WAAA,EAAa,CAClE,CAAA,CAEM6vC,CAAAA,CAAuBb,CAAAA,CAAa,MAAA,CAAQh8C,CAAAA,EAChDA,CAAAA,CAAM,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAASgN,CAAAA,CAAO,WAAA,EAAa,CACxD,CAAA,CAEA,OACEpiB,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKuxD,CAAAA,CACL,SAAA,CAAWl7D,CAAAA,CACT,sEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAGA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,sDAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACrE,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAW7b,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAWza,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC5E,CAAA,CAAA,CACF,EAGAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACozD,MAAAA,CAAA,CAAO,SAAA,CAAW77D,CAAAA,CACjB,kDAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CAAG,CAAA,CACHtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOsjB,CAAAA,CACP,QAAA,CAAW3gB,CAAAA,EAAM4gB,CAAAA,CAAU5gB,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACzC,WAAA,CAAa2E,CAAAA,CAAE,iBAAA,CACf,SAAA,CAAW/P,CAAAA,CACT,8DAAA,CACA+L,CAAAA,CACI,kEAAA,CACA,oEACN,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,mDAAA,CAAqD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC/G,QAAA,CAAAgE,EAAE,cAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAAkzD,CAAAA,CAAwB,GAAA,CAAK7tC,CAAAA,EAAS,CACrC,IAAMxpB,CAAAA,CAAS6iB,CAAAA,CAAQ,IAAA,CAAMrE,CAAAA,EAAMA,CAAAA,CAAE,IAAA,GAASgL,CAAAA,EAAQ,CAAChL,CAAAA,CAAE,aAAa,CAAA,CAChEg5C,CAAAA,CAAYx3D,CAAAA,EAAQ,OAAA,EAAW,KAAA,CAC/By3D,CAAAA,CAASjuC,CAAAA,GAAS,MAAA,CAExB,OACEnkB,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACToyD,CAAAA,GAEAz3D,CAAAA,CACF82D,CAAAA,CAAuB92D,CAAAA,CAAO,EAAE,CAAA,CAEhCg3D,CAAAA,CAAUxtC,CAAI,CAAA,EAElB,CAAA,CACA,QAAA,CAAUiuC,CAAAA,CACV,SAAA,CAAW/7D,CAAAA,CACT,+EAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BgwD,CAAAA,EAAU,+BACZ,CAAA,CAEA,QAAA,CAAA,CAAAtzD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,0DACA87D,CAAAA,CACI,+BAAA,CACA/vD,CAAAA,CAAS,kBAAA,CAAqB,iBACpC,CAAA,CACG,QAAA,CAAA+vD,CAAAA,EAAarzD,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,oBAAA,CAAqB,CAAA,CACtD,CAAA,CACAjS,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC1C,QAAA,CAAA0uD,EAAAA,CAAa3sC,CAAI,CAAA,CACpB,CAAA,CACArlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CACtC,QAAA,CAAAovD,CAAAA,CAAertC,CAAI,CAAA,CACtB,CAAA,CAAA,CAAA,CA9BKA,CA+BP,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGC8tC,CAAAA,CAAqB,MAAA,CAAS,CAAA,EAC7BjyD,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,mDAAA,CAAqD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC/G,QAAA,CAAAgE,CAAAA,CAAE,aACL,CAAA,CACAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAAmzD,CAAAA,CAAqB,GAAA,CAAK78C,CAAAA,EAAU,CAEnC,IAAM+8C,CAAAA,CADS30C,CAAAA,CAAQ,IAAA,CAAMrE,CAAAA,EAAMA,CAAAA,CAAE,aAAA,GAAkB/D,CAAAA,CAAM,EAAE,CAAA,EACrC,OAAA,EAAW,KAAA,CAErC,OACEpV,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM2xD,CAAAA,CAAUv8C,CAAAA,CAAM,IAAA,CAAoBA,CAAAA,CAAM,EAAE,CAAA,CAC3D,SAAA,CAAW/e,CAAAA,CACT,+EAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBACjC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,yDAAA,CACA87D,CAAAA,CACI,+BAAA,CACA/vD,CAAAA,CAAS,kBAAA,CAAqB,iBACpC,CAAA,CACG,QAAA,CAAA+vD,CAAAA,EAAarzD,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,oBAAA,CAAqB,CAAA,CACtD,CAAA,CACAjS,GAAAA,CAAC,QAAK,SAAA,CAAWsD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC1C,QAAA,CAAA0uD,EAAAA,CAAa17C,CAAAA,CAAM,IAAkB,CAAA,EAAKtW,GAAAA,CAACiyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACvE,CAAA,CACAjyD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CACtC,QAAA,CAAAgT,CAAAA,CAAM,IAAA,CACT,CAAA,CAAA,CAAA,CApBKA,CAAAA,CAAM,EAqBb,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAIDk8C,CAAAA,EACCxyD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CAC/E,QAAA,CAAApC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASsxD,CAAAA,CACT,SAAA,CAAWj7D,CAAAA,CACT,0GAAA,CACA+L,CAAAA,CACI,sDAAA,CACA,4CACN,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB5K,EAAE,WAAA,CAAA,CACL,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CAGA,IAAMwY,EAAAA,CAAe,CACnB,EAAA,CAAI,CACF,KAAA,CAAO,SAAA,CACP,iBAAA,CAAmB,kBAAA,CACnB,cAAA,CAAgB,iBAAA,CAChB,YAAA,CAAc,eAAA,CACd,WAAA,CAAa,qBAAA,CACb,OAAA,CAAS,CACP,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,QAAA,CAAU,UAAA,CACV,SAAA,CAAW,WAAA,CACX,SAAA,CAAW,YAAA,CACX,OAAA,CAAS,UAAA,CACT,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,MAAA,CACN,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,MAAA,CACN,QAAA,CAAU,UAAA,CACV,QAAA,CAAU,UACZ,CACF,CAAA,CACA,EAAA,CAAI,CACF,KAAA,CAAO,UAAA,CACP,iBAAA,CAAmB,kBAAA,CACnB,cAAA,CAAgB,oBAAA,CAChB,YAAA,CAAc,uBAAA,CACd,WAAA,CAAa,2BAAA,CACb,QAAS,CACP,IAAA,CAAM,QAAA,CACN,MAAA,CAAQ,QAAA,CACR,QAAA,CAAU,WAAA,CACV,SAAA,CAAW,WAAA,CACX,SAAA,CAAW,cAAA,CACX,OAAA,CAAS,WAAA,CACT,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,WAAA,CACN,IAAA,CAAM,OAAA,CACN,MAAA,CAAQ,WAAA,CACR,IAAA,CAAM,OAAA,CACN,QAAA,CAAU,OAAA,CACV,QAAA,CAAU,SACZ,CACF,CACF,CAAA,CCxVA,IAAMyzC,EAAAA,CAAiE,CACrE,CAAE,IAAA,CAAM,MAAA,CAAQ,IAAA,CAAMvzD,GAAAA,CAACiyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAG,CAAA,CACnD,CAAE,IAAA,CAAM,QAAA,CAAU,IAAA,CAAMjyD,GAAAA,CAACmyD,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAG,CAAA,CACrD,CAAE,IAAA,CAAM,MAAA,CAAQ,IAAA,CAAMnyD,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAG,CAAA,CACvD,CAAE,IAAA,CAAM,UAAA,CAAY,IAAA,CAAMzoC,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,CAAG,CAAA,CAC9D,CAAE,IAAA,CAAM,UAAA,CAAY,IAAA,CAAM/R,GAAAA,CAACoyD,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,CAAG,CAChE,CAAA,CAEO,SAASoB,EAAAA,CAAiB,CAC/B,MAAA,CAAAjyD,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,OAAAxG,CAAAA,CACA,MAAA,CAAAtJ,CAAAA,CACA,MAAA,CAAAkL,CACF,CAAA,CAA0B,CACxB,GAAM,CAACP,CAAAA,CAAM0S,CAAO,CAAA,CAAIrgB,QAAAA,CAAS,EAAE,CAAA,CAC7B,CAAC+kB,CAAAA,CAAMouC,CAAO,CAAA,CAAInzD,QAAAA,CAAoB,MAAM,CAAA,CAC5C,CAAClH,CAAAA,CAASs6D,CAAU,CAAA,CAAIpzD,QAAAA,CAAmB,CAAC,EAAE,CAAC,CAAA,CAC/CgH,CAAAA,CAAIkH,CAAAA,GAAW,IAAA,CAAOsR,EAAAA,CAAa,EAAA,CAAKA,EAAAA,CAAa,EAAA,CAG3Drf,SAAAA,CAAU,IAAM,CACVc,CAAAA,GACFof,CAAAA,CAAQ,EAAE,CAAA,CACV8yC,CAAAA,CAAQ,MAAM,CAAA,CACdC,CAAAA,CAAW,CAAC,EAAE,CAAC,CAAA,EAEnB,CAAA,CAAG,CAACnyD,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,EAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAUyQ,CAAAA,GAC1B,CAAA,CACA,OAAI7R,CAAAA,EACF,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAE5C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CACnE,CAAA,CAAG,CAACnB,CAAAA,CAAQ6R,CAAO,CAAC,CAAA,CAEpB,IAAMnG,CAAAA,CAAa,IAAM,CACvB,GAAI,CAACgB,CAAAA,CAAK,IAAA,EAAK,CAAG,OAElB,IAAMqI,CAAAA,CAAyD,CAC7D,IAAA,CAAMrI,CAAAA,CAAK,IAAA,EAAK,CAChB,IAAA,CAAAoX,CACF,CAAA,CAEIA,CAAAA,GAAS,UAAA,GACX/O,CAAAA,CAAM,OAAA,CAAUld,CAAAA,CAAQ,MAAA,CAAQkmB,CAAAA,EAAQA,CAAAA,CAAI,IAAA,EAAM,CAAA,CAAA,CAGpD1S,CAAAA,CAAO0J,CAAK,CAAA,CACZlD,CAAAA,GACF,CAAA,CAEMugD,CAAAA,CAAY,IAAM,CACtBD,CAAAA,CAAW,CAAC,GAAGt6D,CAAAA,CAAS,EAAE,CAAC,EAC7B,CAAA,CAEMw6D,CAAAA,CAAe,CAACj1D,CAAAA,CAAevB,CAAAA,GAAkB,CACrD,IAAMy2D,CAAAA,CAAa,CAAC,GAAGz6D,CAAO,CAAA,CAC9By6D,CAAAA,CAAWl1D,CAAK,CAAA,CAAIvB,CAAAA,CACpBs2D,CAAAA,CAAWG,CAAU,EACvB,CAAA,CAEMC,CAAAA,CAAgBn1D,CAAAA,EAAkB,CAClCvF,CAAAA,CAAQ,MAAA,CAAS,CAAA,EACnBs6D,CAAAA,CAAWt6D,CAAAA,CAAQ,MAAA,CAAO,CAACpB,CAAAA,CAAGC,CAAAA,GAAMA,CAAAA,GAAM0G,CAAK,CAAC,EAEpD,CAAA,CAEA,OAAK4C,CAAAA,CAGHL,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qDAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,OAAA,CAASoT,CAAAA,CACX,CAAA,CAGAlS,KAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,uDAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAGA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,sDAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,uBAAA,CAAyB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAW7b,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAWza,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC5E,CAAA,CAAA,CACF,CAAA,CAGApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,eAAA,CAEb,QAAA,CAAA,CAAAA,KAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAWzI,CAAAA,CAAG,gCAAA,CAAkC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC3F,QAAA,CAAAgE,CAAAA,CAAE,SAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOiO,CAAAA,CACP,QAAA,CAAWtL,CAAAA,EAAMge,CAAAA,CAAQhe,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvC,WAAA,CAAa2E,CAAAA,CAAE,oBAAA,CACf,SAAA,CAAW/P,CAAAA,CACT,wFAAA,CACA+L,CAAAA,CACI,kEAAA,CACA,oEACN,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CAAA,CACF,CAAA,CAGApC,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAWzI,CAAAA,CAAG,gCAAA,CAAkC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC3F,QAAA,CAAAgE,CAAAA,CAAE,SAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACZ,SAAAuzD,EAAAA,CAAY,GAAA,CAAKtrB,CAAAA,EAChB/mC,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAMuyD,CAAAA,CAAQxrB,CAAAA,CAAG,IAAI,CAAA,CAC9B,SAAA,CAAW1wC,CAAAA,CACT,0EAAA,CACA8tB,CAAAA,GAAS4iB,CAAAA,CAAG,IAAA,CACR,kCAAA,CACA3kC,CAAAA,CACE,uCAAA,CACA,uCACR,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWqlB,CAAAA,GAAS4iB,CAAAA,CAAG,IAAA,CAAO,gBAAA,CAAmB3kC,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAChF,QAAA,CAAA2kC,CAAAA,CAAG,IAAA,CACN,CAAA,CACAjoC,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,SAAA,CACA8tB,CAAAA,GAAS4iB,CAAAA,CAAG,IAAA,CACR,gBAAA,CACA3kC,CAAAA,CAAS,gBAAA,CAAmB,eAClC,CAAA,CACG,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CAAM2gC,CAAAA,CAAG,IAAI,CAAA,CAClB,CAAA,CAAA,CAAA,CArBKA,CAAAA,CAAG,IAsBV,CACD,CAAA,CACH,CAAA,CAAA,CACF,EAGC5iB,CAAAA,GAAS,UAAA,EACRnkB,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAWzI,CAAAA,CAAG,gCAAA,CAAkC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC3F,QAAA,CAAAgE,CAAAA,CAAE,OAAA,CACL,CAAA,CACApG,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAA,CAAA9H,CAAAA,CAAQ,GAAA,CAAI,CAACwL,CAAAA,CAAQjG,CAAAA,GACpBuC,IAAAA,CAAC,KAAA,CAAA,CAAgB,SAAA,CAAU,yBAAA,CACzB,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAO4E,CAAAA,CACP,QAAA,CAAWjC,CAAAA,EAAMixD,CAAAA,CAAaj1D,CAAAA,CAAOgE,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACnD,WAAA,CAAa,CAAA,EAAG2E,CAAAA,CAAE,MAAM,CAAA,CAAA,EAAI3I,CAAAA,CAAQ,CAAC,CAAA,CAAA,CACrC,SAAA,CAAWpH,CAAAA,CACT,sFAAA,CACA+L,CAAAA,CACI,kEAAA,CACA,oEACN,CAAA,CACF,EACClK,CAAAA,CAAQ,MAAA,CAAS,CAAA,EAChB4G,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM8zD,CAAAA,CAAan1D,CAAK,CAAA,CACjC,SAAA,CAAWpH,CAAAA,CACT,kCAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,iCAChD,CAAA,CAEA,QAAA,CAAAtD,GAAAA,CAAC6a,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAC9B,CAAA,CAAA,CAAA,CAtBMlc,CAwBV,CACD,CAAA,CACDuC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASyyD,CAAAA,CACT,SAAA,CAAWp8D,CAAAA,CACT,wEAAA,CACA+L,CAAAA,CACI,kCAAA,CACA,iCACN,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB5K,CAAAA,CAAE,SAAA,CAAA,CACL,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGApG,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,wDAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAA,CAAAtD,IAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAW7b,CAAAA,CACT,4DAAA,CACA+L,CAAAA,CACI,kCAAA,CACA,iCACN,CAAA,CAEC,QAAA,CAAAgE,CAAAA,CAAE,MAAA,CACL,CAAA,CACAtH,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASiN,CAAAA,CACT,QAAA,CAAU,CAACgB,CAAAA,CAAK,IAAA,EAAK,CACrB,SAAA,CAAW1W,CAAAA,CACT,4DAAA,CACA,4CAAA,CACA,CAAC0W,CAAAA,CAAK,IAAA,EAAK,EAAK,+BAClB,CAAA,CAEC,QAAA,CAAA3G,CAAAA,CAAE,MAAA,CACL,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CA1KkB,IA4KtB,CAGA,IAAMwY,EAAAA,CAAe,CACnB,EAAA,CAAI,CACF,KAAA,CAAO,qBAAA,CACP,SAAA,CAAW,YAAA,CACX,oBAAA,CAAsB,qBAAA,CACtB,SAAA,CAAW,YAAA,CACX,OAAA,CAAS,SAAA,CACT,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,YAAA,CACX,MAAA,CAAQ,SACR,MAAA,CAAQ,cAAA,CACR,KAAA,CAAO,CACL,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,MAAA,CACN,QAAA,CAAU,UAAA,CACV,QAAA,CAAU,UACZ,CACF,CAAA,CACA,EAAA,CAAI,CACF,KAAA,CAAO,2BAAA,CACP,SAAA,CAAW,kBAAA,CACX,oBAAA,CAAsB,sBAAA,CACtB,SAAA,CAAW,eAAA,CACX,OAAA,CAAS,UAAA,CACT,MAAA,CAAQ,WAAA,CACR,SAAA,CAAW,mBAAA,CACX,MAAA,CAAQ,UAAA,CACR,MAAA,CAAQ,aAAA,CACR,KAAA,CAAO,CACL,IAAA,CAAM,OAAA,CACN,MAAA,CAAQ,WAAA,CACR,IAAA,CAAM,OAAA,CACN,QAAA,CAAU,OAAA,CACV,QAAA,CAAU,SACZ,CACF,CACF,CAAA,CC1RA,IAAMA,EAAAA,CAAe,CACnB,EAAA,CAAI,CACF,OAAA,CAAS,SAAA,CACT,cAAA,CAAgB,kBAAA,CAChB,OAAA,CAAS,UAAA,CACT,SAAA,CAAW,WAAA,CACX,UAAA,CAAY,aAAA,CACZ,KAAM,iBAAA,CACN,aAAA,CAAe,sBACjB,CAAA,CACA,EAAA,CAAI,CACF,OAAA,CAAS,SAAA,CACT,cAAA,CAAgB,oBAAA,CAChB,OAAA,CAAS,cAAA,CACT,SAAA,CAAW,aAAA,CACX,UAAA,CAAY,aAAA,CACZ,IAAA,CAAM,uBAAA,CACN,aAAA,CAAe,4BACjB,CACF,CAAA,CAEO,SAASi0C,EAAAA,CAAa,CAC3B,KAAA,CAAA32D,CAAAA,CACA,aAAA,CAAA42D,CAAAA,CACA,QAAA,CAAA3yD,EACA,qBAAA,CAAA4yD,CAAAA,CACA,MAAA,CAAA3wD,CAAAA,CACA,MAAA,CAAAkL,CACF,CAAA,CAAsB,CACpB,GAAM,CAACjN,CAAAA,CAAQC,CAAS,CAAA,CAAIlB,QAAAA,CAAS,KAAK,CAAA,CACpC2O,CAAAA,CAAcrN,MAAAA,CAAuB,IAAI,CAAA,CACzC0F,CAAAA,CAAIkH,CAAAA,GAAW,IAAA,CAAOsR,EAAAA,CAAa,EAAA,CAAKA,EAAAA,CAAa,EAAA,CAG3Drf,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAM8nB,CAAAA,CAAY,UAAA,CAAW,IAAM,CACjC,IAAM5mB,CAAAA,CAAsBE,CAAAA,EAAkB,CACxCsM,CAAAA,CAAY,OAAA,EAAW,CAACA,CAAAA,CAAY,OAAA,CAAQ,QAAA,CAAStM,CAAAA,CAAE,MAAc,CAAA,EACvEnB,CAAAA,CAAU,KAAK,EAEnB,CAAA,CAEMkB,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAUnB,EAAU,KAAK,EACzC,CAAA,CAEA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAaiB,CAAkB,CAAA,CACzD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWC,CAAY,CAAA,CAEhDuM,CAAAA,CAAoB,QAAA,CAAW,IAAM,CACpC,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaxM,CAAkB,CAAA,CAC5D,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWC,CAAY,EACtD,EACF,CAAA,CAAG,GAAG,CAAA,CAEN,OAAO,IAAM,CACX,YAAA,CAAa2mB,CAAS,CAAA,CACjBpa,CAAAA,CAAoB,QAAA,EACtBA,CAAAA,CAAoB,QAAA,GAEzB,CACF,CAAA,CAAG,CAAC1N,CAAM,CAAC,CAAA,CAEX,IAAMnI,CAAAA,CAAoG,CACxG,CAAE,KAAA,CAAO,KAAA,CAAO,KAAA,CAAOkO,CAAAA,CAAE,OAAA,CAAS,IAAA,CAAMtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6DAAA,CAA8D,EAAI,KAAA,CAAO,gBAAiB,CAAA,CACjJ,CAAE,KAAA,CAAO,WAAA,CAAa,KAAA,CAAOsH,CAAAA,CAAE,SAAA,CAAW,IAAA,CAAMtH,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CAAI,KAAA,CAAO,gBAAiB,CAAA,CAC9G,CAAE,KAAA,CAAO,aAAA,CAAe,KAAA,CAAOrR,CAAAA,CAAE,UAAA,CAAY,IAAA,CAAMtH,GAAAA,CAACi+B,UAAAA,CAAA,CAAW,SAAA,CAAU,SAAA,CAAU,CAAA,CAAI,KAAA,CAAO,eAAgB,CAAA,CAC9G,CAAE,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO32B,CAAAA,CAAE,IAAA,CAAM,IAAA,CAAMtH,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAAI,KAAA,CAAO,eAAgB,CAC/F,CAAA,CAEM+iB,CAAAA,CAAkBj+B,CAAAA,GAAU,KAAA,EAAS42D,CAAAA,CAE3C,OACE9yD,IAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+N,CAAAA,CAAa,SAAA,CAAU,WAE/B,QAAA,CAAA,CAAA/N,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBnB,CAAAA,CAAUoO,CAAAA,EAAQ,CAACA,CAAI,EACzB,CAAA,CACA,SAAA,CAAWrY,CAAAA,CACT,6FAAA,CACA+L,CAAAA,CACI,8CAAA,CACA,iDAAA,CACJ+3B,CAAAA,GAAoB/3B,CAAAA,CAAS,oDAAA,CAAuD,0CAAA,CAAA,CACpF/B,CAAAA,GAAW+B,CAAAA,CAAS,aAAA,CAAgB,aAAA,CACtC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACs7B,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAC3Bh0B,CAAAA,CAAE,OAAA,CACF+zB,CAAAA,EACCr7B,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,sBAAA,CACA+L,CAAAA,CAAS,cAAA,CAAiB,aAC5B,CAAA,CAAG,CAAA,CAAA,CAEP,CAAA,CAGC/B,CAAAA,EACCL,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,qEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,0BAC5C,CAAA,CAGA,QAAA,CAAA,CAAAtD,IAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,oBAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,8CAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CACG,QAAA,CAAAgE,CAAAA,CAAE,cAAA,CACL,CAAA,CACF,CAAA,CAGAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACZ,QAAA,CAAA5G,CAAAA,CAAQ,GAAA,CAAKwL,CAAAA,EACZ1D,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbG,CAAAA,CAASuD,CAAAA,CAAO,KAAK,CAAA,CAEjBA,CAAAA,CAAO,KAAA,GAAU,KAAA,EACnBqvD,CAAAA,CAAsB,KAAK,EAE/B,CAAA,CACA,SAAA,CAAW18D,CAAAA,CACT,sEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/BlG,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,GAAUtB,CAAAA,CAAS,YAAA,CAAe,YAAA,CACrD,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,QAAK,SAAA,CAAW4E,CAAAA,CAAO,KAAA,CACrB,QAAA,CAAAA,CAAAA,CAAO,IAAA,CACV,CAAA,CACA5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,kBAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,QAAA,CAAAsB,CAAAA,CAAO,KAAA,CACV,CAAA,CACCxH,CAAAA,GAAUwH,CAAAA,CAAO,KAAA,EAChB5E,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAW1a,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CAAA,CAxB3EsB,CAAAA,CAAO,KA0Bd,CACD,CAAA,CACH,CAAA,CAGA5E,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,gBAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAC3B,CAAA,CAAG,CAAA,CAGHtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,MAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb+yD,CAAAA,CAAsB,CAACD,CAAa,EAE/BA,CAAAA,EACH3yD,CAAAA,CAAS,KAAK,EAElB,CAAA,CACA,SAAA,CAAW9J,CAAAA,CACT,sEAAA,CACA+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CAC/B0wD,CAAAA,GAAkB1wD,CAAAA,CAAS,YAAA,CAAe,YAAA,CAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC69B,MAAAA,CAAA,CAAO,SAAA,CAAWtmC,CAAAA,CACjB,SAAA,CACAy8D,CAAAA,CACK1wD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC5BA,CAAAA,CAAS,gBAAA,CAAmB,eACnC,CAAA,CAAG,CAAA,CACHtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,kBAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,QAAA,CAAAgE,CAAAA,CAAE,aAAA,CACL,CAAA,CACC0sD,CAAAA,EACCh0D,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAW1a,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CAElF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAEJ,CCvKA,IAAM4wD,EAAAA,CAAiC,CACrC,CAAE,EAAA,CAAI,MAAA,CAAQ,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACtG,CAAE,EAAA,CAAI,QAAA,CAAU,IAAA,CAAM,QAAA,CAAU,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CAC5G,CAAE,EAAA,CAAI,WAAA,CAAa,IAAA,CAAM,WAAA,CAAa,KAAA,CAAO,YAAA,CAAc,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACtH,CAAE,EAAA,CAAI,SAAA,CAAW,IAAA,CAAM,SAAA,CAAW,KAAA,CAAO,UAAA,CAAY,MAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CAChH,CAAE,EAAA,CAAI,UAAA,CAAY,IAAA,CAAM,UAAA,CAAY,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CACpH,CAAA,CAKA,SAASC,EAAAA,CAAsBh2B,CAAAA,CAAe7jC,CAAAA,CAAQ,CAAA,CAAoB,CACxE,IAAML,CAAAA,CAA0B,EAAC,CAEjC,IAAA,IAAW4N,CAAAA,IAAQs2B,CAAAA,CACjBlkC,CAAAA,CAAO,IAAA,CAAK,CACV,GAAG4N,CAAAA,CACH,KAAA,CAAAvN,CAAAA,CACA,WAAA,CAAA,CAAcuN,CAAAA,CAAK,QAAA,EAAU,MAAA,EAAU,CAAA,EAAK,CAAA,CAC5C,UAAA,CAAY,CAACA,CAAAA,CAAK,EAAE,CACtB,CAAC,CAAA,CACGA,CAAAA,CAAK,QAAA,EAAU,MAAA,EAAUA,CAAAA,CAAK,aAAe,KAAA,EAC/C5N,CAAAA,CAAO,IAAA,CAAK,GAAGk6D,EAAAA,CAAsBtsD,CAAAA,CAAK,QAAA,CAAUvN,CAAAA,CAAQ,CAAC,CAAC,CAAA,CAIlE,OAAOL,CACT,CAKA,SAASsP,EAAAA,CAAW,CAAE,MAAA,CAAA7Q,CAAAA,CAAQ,QAAA,CAAAwe,CAAS,CAAA,CAA2C,CAChF,OAAIA,CAAAA,GAAa,GAAA,EAAOxe,CAAAA,GAAW,WAAA,CAC1BsH,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAErDzB,CAAAA,EAAYA,CAAAA,CAAW,CAAA,EAAMxe,CAAAA,GAAW,aAAA,CACpCsH,GAAAA,CAACi+B,UAAAA,CAAA,CAAW,SAAA,CAAU,uBAAA,CAAwB,CAAA,CAEhDj+B,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAU,uBAAA,CAAwB,CACnD,CAKO,SAAS87C,EAAAA,CAAS,CACvB,KAAA,CAAAj2B,CAAAA,CACA,MAAA,CAAAl7B,CAAAA,CAAS,EAAC,CACV,SAAA,CAAAuY,EAAY,EAAC,CACb,SAAA,CAAAE,CAAAA,CAAY,KAAA,CACZ,KAAA,CAAAjjB,CAAAA,CACA,SAAA,CAAA6I,CAAAA,CACA,KAAA,CAAAuH,CAAAA,CACA,cAAA,CAAA9D,CAAAA,CAAiB,EAAC,CAClB,YAAA,CAAAutD,CAAAA,CAAe,EACjB,CAAA,CAAkB,CAChB,GAAM,CACJ,KAAA,CAAOvyD,CAAAA,CAAY,MAAA,CACnB,MAAA,CAAAyO,CAAAA,CAAS,IAAA,CACT,kBAAA,CAAA0rB,CAAAA,CACA,UAAA,CAAAm6B,CAAAA,CAAa,IAAA,CACb,aAAA,CAAAC,CAAAA,CAAgB,IAAA,CAChB,YAAA,CAAAC,CAAAA,CACA,wBAAA,CAAAC,CAAAA,CAA2B,IAAA,CAC3B,iBAAA,CAAAC,CAAAA,CAAoB,IAAA,CACpB,iBAAA,CAAAC,CAAAA,CAAoB,IACtB,CAAA,CAAIzxD,CAAAA,CAEEqE,CAAAA,CAAI+nD,EAAAA,CAA0B7gD,CAAAA,CAAQ0rB,CAAkB,CAAA,CACxD52B,CAAAA,CAASvD,CAAAA,GAAc,MAAA,CAGvB,CAAC40D,CAAAA,CAAWC,CAAY,CAAA,CAAIt0D,SAAoB,WAAW,CAAA,CAC3D,CAACu0D,CAAAA,CAAWC,CAAY,CAAA,CAAIx0D,QAAAA,CAAoB,KAAK,CAAA,CACrD,CAAC2E,CAAAA,CAAaC,CAAc,CAAA,CAAI5E,QAAAA,CAAS,EAAE,CAAA,CAC3C,CAACy0D,CAAAA,CAAcC,CAAe,CAAA,CAAI10D,QAAAA,CAA4B,KAAK,CAAA,CACnE,CAAC0zD,CAAAA,CAAeiB,CAAgB,CAAA,CAAI30D,QAAAA,CAAS,KAAK,CAAA,CAClD,CAACoe,CAAAA,CAAS4jC,EAAU,CAAA,CAAIhiD,QAAAA,CAAwBi0D,CAAAA,EAAgBL,EAAe,CAAA,CAC/E,CAACgB,EAAAA,CAAoBC,EAAqB,CAAA,CAAI70D,QAAAA,CAAS,KAAK,CAAA,CAC5D,CAAC80D,EAAAA,CAAsBC,EAAuB,CAAA,CAAI/0D,QAAAA,CAAS,KAAK,CAAA,CAChE,CAAColC,EAAAA,CAAaC,CAAc,CAAA,CAAIrlC,QAAAA,CAA2B,CAC/D,MAAA,CAAQ,KAAA,CACR,CAAA,CAAG,CAAA,CACH,EAAG,CAAA,CACH,IAAA,CAAM,MACR,CAAC,CAAA,CAGK,CAAC8kC,CAAAA,CAAgBC,CAAiB,CAAA,CAAI/kC,QAAAA,CAAwB,IAAI,CAAA,CAClE,CAACglC,CAAAA,CAAcC,CAAe,CAAA,CAAIjlC,QAAAA,CAAS,CAAC,CAAA,CAC5C,CAACklC,CAAAA,CAAkBC,EAAmB,CAAA,CAAInlC,QAAAA,CAAS,CAAC,CAAA,CACpDg1D,EAAAA,CAAW1zD,MAAAA,CAAuB,IAAI,CAAA,CAG5CnB,SAAAA,CAAU,IAAM,CACV8zD,CAAAA,EACFjS,EAAAA,CAAWiS,CAAY,EAE3B,CAAA,CAAG,CAACA,CAAY,CAAC,CAAA,CAGjB,IAAMgB,EAAAA,CAAgBz4C,OAAAA,CAAQ,IAAM,CAClC,IAAM04C,CAAAA,CAAW,IAAI,GAAA,CACrB,SAASC,EAAAA,CAAgB7xB,EAAAA,CAAkB,CACzC,IAAA,IAAW/7B,EAAAA,IAAQ+7B,EAAAA,CACb/7B,EAAAA,CAAK,QAAA,EAAU,MAAA,GACbA,EAAAA,CAAK,aAAe,KAAA,EACtB2tD,CAAAA,CAAS,GAAA,CAAI3tD,EAAAA,CAAK,EAAE,CAAA,CAEtB4tD,EAAAA,CAAgB5tD,EAAAA,CAAK,QAAQ,CAAA,EAGnC,CACA,OAAA4tD,EAAAA,CAAgBt3B,CAAK,CAAA,CACdq3B,CACT,CAAA,CAAG,CAACr3B,CAAK,CAAC,CAAA,CAGJiL,EAAAA,CAAiBtsB,OAAAA,CAAQ,IAAM4B,CAAAA,CAAQ,MAAA,CAAO5iB,CAAAA,EAAOA,CAAAA,CAAI,OAAO,CAAA,CAAG,CAAC4iB,CAAO,CAAC,CAAA,CAG5Eg3C,EAAAA,CAAevmD,WAAAA,CAAahI,CAAAA,EAAmB,CACnDqU,CAAAA,CAAU,kBAAA,GAAqBrU,CAAM,EACvC,CAAA,CAAG,CAACqU,CAAS,CAAC,CAAA,CAGRm6C,EAAAA,CAAaxmD,WAAAA,CAAamH,CAAAA,EAAqB,CAC/Cq+C,CAAAA,GAAcr+C,CAAAA,CAChBw+C,CAAAA,CAAallD,EAAAA,EAAQA,EAAAA,GAAS,KAAA,CAAQ,MAAA,CAAS,KAAK,CAAA,EAEpDglD,CAAAA,CAAat+C,CAAK,EAClBw+C,CAAAA,CAAa,KAAK,CAAA,CAAA,CAEpBt5C,CAAAA,CAAU,YAAA,GAAe,CAAE,MAAA,CAAQlF,CAAAA,CAAc,SAAA,CAAWu+C,CAAAA,GAAc,KAAA,CAAQ,MAAA,CAAS,KAAM,CAAC,EACpG,CAAA,CAAG,CAACF,CAAAA,CAAWE,CAAAA,CAAWr5C,CAAS,CAAC,CAAA,CAG9Bo6C,EAAAA,CAAsBzmD,WAAAA,CAAayjD,CAAAA,EAA8B,CACrEtQ,EAAAA,CAAWsQ,CAAU,CAAA,CACrBp3C,CAAAA,CAAU,eAAA,GAAkBo3C,CAAU,EACxC,CAAA,CAAG,CAACp3C,CAAS,CAAC,CAAA,CAERq6C,EAAAA,CAAmB1mD,WAAAA,CAAaiN,CAAAA,EAAqB,CACzD,IAAMw2C,EAAAA,CAAal0C,CAAAA,CAAQ,GAAA,CAAI5iB,EAAAA,EAC7BA,EAAAA,CAAI,EAAA,GAAOsgB,CAAAA,CAAW,CAAE,GAAGtgB,EAAAA,CAAK,OAAA,CAAS,KAAM,CAAA,CAAIA,EACrD,CAAA,CACA85D,EAAAA,CAAoBhD,EAAU,EAChC,CAAA,CAAG,CAACl0C,CAAAA,CAASk3C,EAAmB,CAAC,CAAA,CAE3BE,EAAAA,CAAmB3mD,WAAAA,CAAY,CAACiN,CAAAA,CAAkBmjB,EAAAA,GAAyB,CAC/Eq1B,CAAAA,CAAax4C,CAAQ,CAAA,CACrB04C,CAAAA,CAAav1B,EAAS,EACxB,CAAA,CAAG,EAAE,CAAA,CAGCw2B,EAAAA,CAAoB5mD,WAAAA,CAAY,CAACxM,CAAAA,CAAqBkF,EAAAA,CAAauU,EAAAA,GAAsB,CACxFs4C,CAAAA,GACL/xD,CAAAA,CAAE,cAAA,EAAe,CACjBgjC,CAAAA,CAAe,CACb,MAAA,CAAQ,IAAA,CACR,CAAA,CAAGhjC,CAAAA,CAAE,OAAA,CACL,CAAA,CAAGA,CAAAA,CAAE,OAAA,CACL,IAAA,CAAMkF,EAAAA,CAAO,MAAA,CAAS,QAAA,CACtB,IAAA,CAAAA,EAAAA,CACA,QAAA,CAAAuU,EACF,CAAC,CAAA,EACH,CAAA,CAAG,CAACs4C,CAAiB,CAAC,CAAA,CAEhBsB,CAAAA,CAAmB7mD,WAAAA,CAAY,IAAM,CACzCw2B,CAAAA,CAAe/1B,CAAAA,GAAS,CAAE,GAAGA,CAAAA,CAAM,MAAA,CAAQ,KAAM,CAAA,CAAE,EACrD,CAAA,CAAG,EAAE,CAAA,CAGCqmD,EAAAA,CAAoB9mD,WAAAA,CAAY,CAACxM,CAAAA,CAAqByZ,EAAAA,GAAqB,CAC/E,GAAI,CAACq4C,CAAAA,CAAmB,OACxB9xD,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClB,IAAM9G,EAAAA,CAAS6iB,CAAAA,CAAQ,IAAA,CAAKrE,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAO+B,EAAQ,CAAA,CAC9CvgB,EAAAA,GACFwpC,CAAAA,CAAkBjpB,EAAQ,CAAA,CAC1BmpB,CAAAA,CAAgB5iC,CAAAA,CAAE,OAAO,CAAA,CACzB8iC,EAAAA,CAAoB5pC,EAAAA,CAAO,KAAK,CAAA,EAEpC,CAAA,CAAG,CAAC6iB,CAAAA,CAAS+1C,CAAiB,CAAC,CAAA,CAE/Bh0D,SAAAA,CAAU,IAAM,CACd,GAAI,CAAC2kC,CAAAA,CAAgB,OAErB,IAAM0B,CAAAA,CAAmBnkC,IAAkB,CACzC,IAAMuzD,EAAAA,CAAQvzD,EAAAA,CAAE,OAAA,CAAU2iC,CAAAA,CACpB0B,EAAAA,CAAW,IAAA,CAAK,GAAA,CAAI,EAAA,CAAIxB,CAAAA,CAAmB0wB,EAAK,CAAA,CAChDtD,EAAAA,CAAal0C,CAAAA,CAAQ,GAAA,CAAI5iB,EAAAA,EAC7BA,EAAAA,CAAI,EAAA,GAAOspC,CAAAA,CAAiB,CAAE,GAAGtpC,EAAAA,CAAK,KAAA,CAAOkrC,EAAS,CAAA,CAAIlrC,EAC5D,CAAA,CACAwmD,EAAAA,CAAWsQ,EAAU,EACvB,CAAA,CAEM3rB,EAAAA,CAAgB,IAAM,CACtB7B,CAAAA,EACF5pB,CAAAA,CAAU,eAAA,GAAkBkD,CAAO,CAAA,CAErC2mB,CAAAA,CAAkB,IAAI,EACxB,CAAA,CAEA,OAAA,QAAA,CAAS,gBAAA,CAAiB,WAAA,CAAayB,CAAe,CAAA,CACtD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWG,EAAa,CAAA,CAE3C,IAAM,CACX,QAAA,CAAS,mBAAA,CAAoB,WAAA,CAAaH,CAAe,CAAA,CACzD,QAAA,CAAS,oBAAoB,SAAA,CAAWG,EAAa,EACvD,CACF,CAAA,CAAG,CAAC7B,CAAAA,CAAgBE,CAAAA,CAAcE,CAAAA,CAAkB9mB,CAAAA,CAASlD,CAAS,CAAC,CAAA,CAGvE,IAAM26C,EAAAA,CAA0BhnD,WAAAA,CAAY,MAAOmH,CAAAA,EAA2D,CAC5G,GAAIkF,CAAAA,CAAU,mBAAA,CAAqB,CACjC,IAAM46C,EAAAA,CAAmC,CACvC,GAAG9/C,CAAAA,CACH,EAAA,CAAI,CAAA,GAAA,EAAM,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,CACpB,SAAA,CAAW,EACb,CAAA,CACA,MAAMkF,CAAAA,CAAU,mBAAA,CAAoB46C,EAAS,EAC/C,CACAf,EAAAA,CAAwB,KAAK,EAC/B,CAAA,CAAG,CAAC75C,CAAS,CAAC,CAAA,CAGR66C,EAAAA,CAAgBlnD,WAAAA,CAAatH,CAAAA,EAC7BA,CAAAA,CAAK,QAAA,GAAa,GAAA,EAAOA,CAAAA,CAAK,MAAA,GAAW,WAAA,CAAoB,WAAA,CAC5DA,CAAAA,CAAK,UAAYA,CAAAA,CAAK,QAAA,CAAW,CAAA,EAAMA,CAAAA,CAAK,MAAA,GAAW,aAAA,CAAsB,aAAA,CAC3E,MAAA,CACN,EAAE,CAAA,CAGCyuD,EAAAA,CAAex5C,OAAAA,CAAQ,IAAM,CACjC,IAAIuiB,CAAAA,CAAY80B,EAAAA,CAAsBh2B,CAAK,CAAA,CAG3C,GAAIl5B,CAAAA,CAAY,IAAA,EAAK,CAAG,CACtB,IAAMsxD,EAAAA,CAAQtxD,CAAAA,CAAY,WAAA,EAAY,CACtCo6B,CAAAA,CAAYA,CAAAA,CAAU,MAAA,CAAOx3B,EAAAA,EAC3BA,EAAAA,CAAK,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAAS0uD,EAAK,CACxC,EACF,CAGA,OAAIxB,CAAAA,GAAiB,KAAA,GACnB11B,CAAAA,CAAYA,CAAAA,CAAU,MAAA,CAAOx3B,EAAAA,EAAQwuD,EAAAA,CAAcxuD,EAAI,CAAA,GAAMktD,CAAY,CAAA,CAAA,CAIvEf,CAAAA,GACF30B,CAAAA,CAAYA,CAAAA,CAAU,MAAA,CAAOx3B,EAAAA,EAAQwuD,EAAAA,CAAcxuD,EAAI,IAAM,WAAW,CAAA,CAAA,CAI1Ew3B,CAAAA,CAAU,IAAA,CAAK,CAACtsB,EAAAA,CAAGiK,EAAAA,GAAM,CACvB,IAAIw5C,EAAAA,CAAuBC,EAAAA,CAE3B,OAAQ9B,CAAAA,EACN,KAAK,MAAA,CACH6B,EAAAA,CAAOzjD,EAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAC1B0jD,EAAAA,CAAOz5C,EAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAC1B,MACF,KAAK,WAAA,CACHw5C,EAAAA,CAAOzjD,EAAAA,CAAE,SAAA,EAAW,OAAA,EAAQ,EAAK,CAAA,CACjC0jD,EAAAA,CAAOz5C,EAAAA,CAAE,SAAA,EAAW,OAAA,EAAQ,EAAK,CAAA,CACjC,MACF,KAAK,SAAA,CACHw5C,EAAAA,CAAOzjD,EAAAA,CAAE,OAAA,EAAS,OAAA,EAAQ,EAAK,CAAA,CAC/B0jD,EAAAA,CAAOz5C,EAAAA,CAAE,OAAA,EAAS,OAAA,EAAQ,EAAK,CAAA,CAC/B,MACF,KAAK,UAAA,CACHw5C,EAAAA,CAAOzjD,EAAAA,CAAE,QAAA,EAAY,EACrB0jD,EAAAA,CAAOz5C,EAAAA,CAAE,QAAA,EAAY,CAAA,CACrB,MACF,KAAK,QAAA,CACHw5C,EAAAA,CAAOzjD,EAAAA,CAAE,MAAA,EAAU,MAAA,CACnB0jD,EAAAA,CAAOz5C,EAAAA,CAAE,MAAA,EAAU,MAAA,CACnB,MACF,KAAK,UAAA,CACH,IAAM05C,EAAAA,CAAgB,CAAE,MAAA,CAAQ,CAAA,CAAG,IAAA,CAAM,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAG,GAAA,CAAK,CAAA,CAAG,IAAA,CAAM,CAAE,CAAA,CACvEF,EAAAA,CAAOE,EAAAA,CAAc3jD,EAAAA,CAAE,QAAsC,CAAA,EAAK,CAAA,CAClE0jD,EAAAA,CAAOC,EAAAA,CAAc15C,EAAAA,CAAE,QAAsC,CAAA,EAAK,CAAA,CAClE,MACF,QACE,OAAO,CACX,CAEA,OAAIw5C,EAAAA,CAAOC,EAAAA,CAAa5B,CAAAA,GAAc,KAAA,CAAQ,EAAA,CAAK,CAAA,CAC/C2B,EAAAA,CAAOC,EAAAA,CAAa5B,CAAAA,GAAc,KAAA,CAAQ,CAAA,CAAI,EAAA,CAC3C,CACT,CAAC,CAAA,CAEMx1B,CACT,CAAA,CAAG,CAAClB,CAAAA,CAAOl5B,CAAAA,CAAa8vD,CAAAA,CAAcf,CAAAA,CAAeW,CAAAA,CAAWE,CAAAA,CAAWwB,EAAa,CAAC,CAAA,CAGnFM,EAAAA,CAAaxnD,WAAAA,CAAY,CAACtH,CAAAA,CAAYhM,EAAAA,GAAwB,CAClE,IAAMqa,EAAAA,CAAgBgG,EAAAA,EAA2B,CAC/CV,CAAAA,CAAU,YAAA,GAAe,CAAE,GAAG3T,CAAAA,CAAM,GAAGqU,EAAQ,CAAC,EAClD,CAAA,CAGM06C,EAAAA,CAA2BC,EAAAA,EAC1BA,EAAAA,CACkBhvD,CAAAA,CACD,YAAA,EAAc,IAAA,CAAMivD,EAAAA,EAAyBA,EAAAA,CAAG,OAAA,GAAYD,EAAO,CAAA,EAAG,KAAA,CAF9E,MAAA,CAMVE,EAAAA,CAAoB,CAACF,EAAAA,CAA6Bz5D,EAAAA,GAAe,CACrE,GAAI,CAACy5D,EAAAA,CAAS,OAEd,IAAMvE,EAAAA,CAAmC,CAAC,GADnBzqD,CAAAA,CACsC,YAAA,EAAgB,EAAG,CAAA,CAC1Ekd,EAAAA,CAAMutC,EAAAA,CAAa,SAAA,CAAWwE,EAAAA,EAAyBA,EAAAA,CAAG,OAAA,GAAYD,EAAO,CAAA,CAC/E9xC,EAAAA,EAAO,CAAA,CACTutC,EAAAA,CAAavtC,EAAG,CAAA,CAAI,CAAE,OAAA,CAAA8xC,EAAAA,CAAS,KAAA,CAAAz5D,EAAM,CAAA,CAErCk1D,EAAAA,CAAa,IAAA,CAAK,CAAE,OAAA,CAAAuE,EAAAA,CAAS,KAAA,CAAAz5D,EAAM,CAAC,CAAA,CAEtC8Y,EAAAA,CAAa,CAAE,YAAA,CAAAo8C,EAAa,CAAQ,EACtC,CAAA,CAEA,OAAQz2D,EAAAA,CAAO,IAAA,EACb,KAAK,MAAA,CACH,OAAO,IAAA,CAET,KAAK,QAAA,CACH,OACEmE,GAAAA,CAACsvD,EAAAA,CAAA,CACC,KAAA,CAAOznD,CAAAA,CAAK,MAAA,GAAWA,CAAAA,CAAK,QAAA,GAAa,GAAA,CAAM,WAAA,CAAcA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAW,EAAI,aAAA,CAAgB,MAAA,CAAA,CAClH,QAAA,CAAWnP,EAAAA,EAAW,CAEpBwd,EAAAA,CAAa,CAAE,MAAA,CAAAxd,EAAAA,CAAQ,QAAA,CADNA,EAAAA,GAAW,WAAA,CAAc,GAAA,CAAMA,EAAAA,GAAW,aAAA,CAAgB,EAAA,CAAK,CAChD,CAAC,EACnC,CAAA,CACA,MAAA,CAAQ4K,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACR,YAAA,CAAclH,CAAAA,CAAE,MAAA,CAClB,CAAA,CAGJ,KAAK,UAAA,CACH,OACEtH,GAAAA,CAAC2vD,EAAAA,CAAA,CACC,KAAA,CAAO9nD,CAAAA,CAAK,QAAA,CACZ,QAAA,CAAWzG,EAAAA,EAAa8U,EAAAA,CAAa,CAAE,QAAA,CAAU9U,EAAgB,CAAC,CAAA,CAClE,MAAA,CAAQkC,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGJ,KAAK,WAAA,CACH,OACExO,GAAAA,CAAC+vD,EAAAA,CAAA,CACC,KAAA,CAAOloD,CAAAA,CAAK,SAAA,EAAa,EAAC,CAC1B,cAAA,CAAgB9C,EAChB,QAAA,CAAW+N,EAAAA,EAAcoD,EAAAA,CAAa,CAAE,SAAA,CAAApD,EAAU,CAAC,CAAA,CACnD,MAAA,CAAQxP,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGJ,KAAK,WAAA,CACH,OACExO,GAAAA,CAACowD,EAAAA,CAAA,CACC,KAAA,CAAOvoD,CAAAA,CAAK,SAAA,CACZ,QAAA,CAAWzE,EAAAA,EAAc8S,EAAAA,CAAa,CAAE,SAAA,CAAA9S,EAAU,CAAC,CAAA,CACnD,MAAA,CAAQE,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGJ,KAAK,SAAA,CACH,OACExO,GAAAA,CAACowD,EAAAA,CAAA,CACC,KAAA,CAAOvoD,CAAAA,CAAK,OAAA,CACZ,QAAA,CAAWxE,EAAAA,EAAY6S,EAAAA,CAAa,CAAE,OAAA,CAAA7S,EAAQ,CAAC,CAAA,CAC/C,MAAA,CAAQC,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGJ,KAAK,UAAA,CACH,OACExO,GAAAA,CAAC0wD,EAAAA,CAAA,CACC,KAAA,CAAO7oD,CAAAA,CAAK,QAAA,EAAY,CAAA,CACxB,QAAA,CAAWqP,EAAAA,EAAa,CACtB,IAAMxe,EAAAA,CAASwe,EAAAA,GAAa,GAAA,CAAM,WAAA,CAAcA,EAAAA,CAAW,CAAA,CAAI,aAAA,CAAgB,MAAA,CAC/EhB,EAAAA,CAAa,CAAE,QAAA,CAAAgB,EAAAA,CAAU,MAAA,CAAAxe,EAAO,CAAC,EACnC,CAAA,CACA,MAAA,CAAQ4K,CAAAA,CACV,CAAA,CAGJ,KAAK,MAAA,CACH,OACEtD,GAAAA,CAACmxD,EAAAA,CAAA,CACC,KAAA,CAAOtpD,CAAAA,CAAK,IAAA,EAAQ,EAAC,CACrB,MAAA,CAAQvE,CAAAA,CACV,CAAA,CAGJ,KAAK,MAAA,CACH,OACEtD,GAAAA,CAAC4wD,EAAAA,CAAA,CACC,KAAA,CAAOgG,EAAAA,CAA4B/6D,EAAAA,CAAO,aAAa,CAAA,EAAK,EAAA,CAC5D,QAAA,CAAWuB,EAAAA,EAAU25D,EAAAA,CAAkBl7D,EAAAA,CAAO,aAAA,CAAeuB,EAAK,CAAA,CAClE,MAAA,CAAQkG,EACV,CAAA,CAGJ,KAAK,QAAA,CACH,OACEtD,GAAAA,CAAC6wD,EAAAA,CAAA,CACC,KAAA,CAAO+F,EAAAA,CAA4B/6D,EAAAA,CAAO,aAAa,CAAA,EAAK,CAAA,CAC5D,QAAA,CAAWuB,EAAAA,EAAU25D,EAAAA,CAAkBl7D,EAAAA,CAAO,aAAA,CAAeuB,EAAK,CAAA,CAClE,MAAA,CAAQkG,CAAAA,CACV,CAAA,CAGJ,KAAK,MAAA,CACH,IAAM0zD,EAAAA,CAAUJ,EAAAA,CAAmC/6D,EAAAA,CAAO,aAAa,CAAA,CACvE,OACEmE,GAAAA,CAACowD,EAAAA,CAAA,CACC,KAAA,CAAO4G,EAAAA,CAAU,IAAI,IAAA,CAAKA,EAAO,CAAA,CAAI,MAAA,CACrC,QAAA,CAAWrzD,EAAAA,EAASozD,EAAAA,CAAkBl7D,EAAAA,CAAO,aAAA,CAAe8H,EAAI,CAAA,CAChE,MAAA,CAAQL,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGJ,KAAK,UAAA,CACH,OACExO,GAAAA,CAACixD,EAAAA,CAAA,CACC,KAAA,CAAO2F,EAAAA,CAA4B/6D,GAAO,aAAa,CAAA,EAAK,EAAA,CAC5D,OAAA,CAASA,EAAAA,CAAO,OAAA,EAAW,EAAC,CAC5B,QAAA,CAAWuB,EAAAA,EAAU25D,EAAAA,CAAkBl7D,EAAAA,CAAO,aAAA,CAAeuB,EAAK,CAAA,CAClE,MAAA,CAAQkG,CAAAA,CACV,CAAA,CAGJ,KAAK,UAAA,CACH,OACEtD,GAAAA,CAACkxD,EAAAA,CAAA,CACC,KAAA,CAAO0F,EAAAA,CAA6B/6D,EAAAA,CAAO,aAAa,CAAA,EAAK,KAAA,CAC7D,QAAA,CAAWo7D,EAAAA,EAAYF,EAAAA,CAAkBl7D,EAAAA,CAAO,aAAA,CAAeo7D,EAAO,CAAA,CACtE,MAAA,CAAQ3zD,CAAAA,CACV,CAAA,CAGJ,QACE,OAAOtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,GAAA,CAAC,CACzF,CACF,CAAA,CAAG,CAACkY,CAAAA,CAAWlY,CAAAA,CAAQkL,CAAAA,CAAQzJ,CAAAA,CAAgBuC,CAAC,CAAC,EAG3CorD,EAAAA,CAAiBvjD,WAAAA,CAAatT,CAAAA,EAAAA,CACO,CACvC,IAAA,CAAMyL,CAAAA,CAAE,OAAA,CAAQ,IAAA,CAChB,MAAA,CAAQA,CAAAA,CAAE,OAAA,CAAQ,MAAA,CAClB,QAAA,CAAUA,CAAAA,CAAE,OAAA,CAAQ,QAAA,CACpB,SAAA,CAAWA,CAAAA,CAAE,OAAA,CAAQ,SAAA,CACrB,SAAA,CAAWA,CAAAA,CAAE,OAAA,CAAQ,SAAA,CACrB,OAAA,CAASA,CAAAA,CAAE,OAAA,CAAQ,OAAA,CACnB,QAAA,CAAUA,CAAAA,CAAE,OAAA,CAAQ,QACtB,CAAA,EACgBzL,CAAAA,CAAO,IAAI,CAAA,EAAKA,CAAAA,CAAO,KAAA,CACtC,CAACyL,CAAC,CAAC,CAAA,CAGA2gD,EAAAA,CAAanrC,OAAAA,CAAQ,IAClBssB,EAAAA,CAAe,MAAA,CAAO,CAACra,CAAAA,CAAKjzB,EAAAA,GAAQizB,CAAAA,CAAMjzB,EAAAA,CAAI,KAAA,CAAO,CAAC,CAAA,EAAK04D,CAAAA,CAA2B,EAAA,CAAK,CAAA,CAAA,CACjG,CAACprB,EAAAA,CAAgBorB,CAAwB,CAAC,EAG7C,OAAI94C,CAAAA,CAEA1b,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+DAAA,CAAgE,CAAA,CAC/EkB,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAW3J,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAA,CAAAgE,CAAAA,CAAE,KAAA,CAAM,OAAA,CAAQ,KAAA,CAAA,CACnB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKA7O,CAAAA,CAEAuH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAI,SAAA,CAAU,uEAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,QAAA,CAAC,CAAA,CAC3C,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAAG,QAAA,CAAA,OAAA,CAE1F,CAAA,CACAtD,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAA,OAAO7K,CAAAA,EAAU,QAAA,CAAWA,CAAAA,CAAQA,CAAAA,CAAM,OAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKA0lC,CAAAA,CAAM,MAAA,GAAW,CAAA,CAEjBn+B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qFAAA,CACb,QAAA,CAAAA,GAAAA,CAACk3D,IAAAA,CAAA,CAAK,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAC3C,CAAA,CACAl3D,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CAAM,OAAA,CACX,CAAA,CACAtH,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CAAM,YAAA,CACX,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKFpG,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKo0D,EAAAA,CACL,SAAA,CAAW/9D,CAAAA,CACT,oDAAA,CACA+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAC1B8hC,CAAAA,EAAkB,aAAA,CAClB9jC,CACF,CAAA,CACA,KAAA,CAAOuH,CAAAA,CAGP,QAAA,CAAA,CAAA7I,GAAAA,CAAC,KAAA,CAAA,CAAI,UAAWzI,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACnG,QAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC+zD,EAAAA,CAAA,CACC,KAAA,CAAOgB,CAAAA,CACP,aAAA,CAAef,CAAAA,CACf,QAAA,CAAUgB,CAAAA,CACV,qBAAA,CAAuBC,CAAAA,CACvB,MAAA,CAAQ3xD,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAGC6lD,CAAAA,EACCnzD,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACozD,MAAAA,CAAA,CAAO,SAAA,CAAW77D,CAAAA,CAAG,kDAAA,CAAoD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACxHtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOiF,CAAAA,CACP,QAAA,CAAWtC,CAAAA,EAAMuC,CAAAA,CAAevC,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC9C,WAAA,CAAa2E,CAAAA,CAAE,OAAA,CAAQ,iBAAA,CACvB,UAAW/P,CAAAA,CACT,2FAAA,CACA+L,CAAAA,CACI,kEAAA,CACA,qEACN,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAIFpC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACtE,QAAA,CAAA,CAAAgzD,EAAAA,CAAa,MAAA,CAAO,GAAA,CAAEhvD,CAAAA,CAAE,UAAA,CAAW,KAAA,CAAA,CACtC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGAtH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAO,CAAE,QAAA,CAAU+mD,EAAW,CAAA,CAEjC,QAAA,CAAA,CAAA/mD,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CACT,yGAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,4BAC5C,CAAA,CAEC,QAAA,CAAA,CAAA8lC,EAAAA,CAAe,GAAA,CAAKvtC,CAAAA,EACnBqF,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,4CAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CACA,MAAO,CAAE,KAAA,CAAOzH,CAAAA,CAAO,KAAA,CAAO,QAAA,CAAUA,CAAAA,CAAO,QAAS,CAAA,CACxD,aAAA,CAAgB8G,EAAAA,EAAMozD,EAAAA,CAAkBpzD,EAAAA,CAAG,MAAA,CAAW9G,CAAAA,CAAO,EAAE,CAAA,CAE9D,QAAA,CAAA,CAAAA,CAAAA,CAAO,QAAA,CACNqF,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMy0D,EAAAA,CAAW95D,CAAAA,CAAO,EAAE,CAAA,CACnC,SAAA,CAAU,8CAAA,CAET,QAAA,CAAA,CAAA62D,EAAAA,CAAe72D,CAAM,CAAA,CACtBmE,GAAAA,CAAC09B,WAAAA,CAAA,CAAY,SAAA,CAAWnmC,CAAAA,CACtB,SAAA,CACAo9D,CAAAA,GAAc94D,CAAAA,CAAO,EAAA,EAAM,gBAC7B,CAAA,CAAG,CAAA,CAAA,CACL,CAAA,CAEAmE,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA0yD,EAAAA,CAAe72D,CAAM,CAAA,CAAE,CAAA,CAI/B44D,CAAAA,EAAqB54D,CAAAA,CAAO,SAAA,EAC3BmE,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,6DAAA,CACA,oBAAA,CACA6tC,IAAmBvpC,CAAAA,CAAO,EAAA,EAAM,cAClC,CAAA,CACA,WAAA,CAAc8G,EAAAA,EAAMszD,EAAAA,CAAkBtzD,EAAAA,CAAG9G,CAAAA,CAAO,EAAE,CAAA,CACpD,CAAA,CAAA,CAAA,CAhCGA,CAAAA,CAAO,EAkCd,CACD,CAAA,CAGA24D,CAAAA,EACCtzD,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBwyD,EAAAA,CAAsBvlD,EAAAA,EAAQ,CAACA,EAAI,EACrC,CAAA,CACA,SAAA,CAAWrY,CAAAA,CACT,oCAAA,CACA+L,CAAAA,CACI,mDAAA,CACA,qDAAA,CACJ4xD,EAAAA,GAAuB5xD,CAAAA,CAAS,aAAA,CAAgB,aAAA,CAClD,CAAA,CACA,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,iBAAA,CAAoB,YAAA,CAE7C,QAAA,CAAAxO,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAC5B,CAAA,CAGAlS,GAAAA,CAACye,EAAAA,CAAA,CACC,MAAA,CAAQy2C,EAAAA,CACR,OAAA,CAAS,IAAMC,EAAAA,CAAsB,KAAK,CAAA,CAC1C,OAAA,CAASz2C,CAAAA,CACT,YAAA,CAAc4zC,CAAAA,CACd,eAAA,CAAiBsD,EAAAA,CACjB,mBAAA,CAAqB,IAAM,CACzBT,EAAAA,CAAsB,KAAK,CAAA,CAC3BE,EAAAA,CAAwB,IAAI,EAC9B,CAAA,CACA,MAAA,CAAQ/xD,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAqmD,EAAAA,CAAa,GAAA,CAAI,CAACzuD,CAAAA,CAAMlJ,EAAAA,GAAU,CACjC,IAAM6hB,EAAAA,CAAa+0C,EAAAA,CAAc,GAAA,CAAI1tD,CAAAA,CAAK,EAAE,CAAA,CAE5C,OACE3G,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CAEC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC3B,UAAA,CAAY,CAAE,KAAA,CAAOvR,EAAAA,CAAQ,GAAK,CAAA,CAClC,SAAA,CAAWpH,CAAAA,CACT,8CAAA,CACA+L,CAAAA,CACI,iCAAA,CACA,kCACN,CAAA,CACA,OAAA,CAAS,IAAMkY,CAAAA,CAAU,WAAA,GAAc3T,CAAI,CAAA,CAC3C,aAAA,CAAe,IAAM2T,CAAAA,CAAU,iBAAA,GAAoB3T,CAAI,CAAA,CACvD,aAAA,CAAgBlF,EAAAA,EAAMozD,EAAAA,CAAkBpzD,EAAAA,CAAGkF,CAAI,CAAA,CAE9C,QAAA,CAAA,CAAAuhC,EAAAA,CAAe,GAAA,CAAKvtC,EAAAA,EACnBmE,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,0CAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAOnE,EAAAA,CAAO,KAAA,CAAO,QAAA,CAAUA,EAAAA,CAAO,QAAS,CAAA,CAEvD,QAAA,CAAAA,EAAAA,CAAO,IAAA,GAAS,MAAA,CAEfqF,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CAEZ,QAAA,CAAA,CAAAozD,CAAAA,EAAiBzsD,CAAAA,CAAK,KAAA,CAAQ,CAAA,EAC7B7H,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAG6H,CAAAA,CAAK,KAAA,CAAQ,EAAE,CAAA,EAAA,CAAK,CAAA,CAAG,SAAA,CAAU,eAAA,CAAgB,CAAA,CAE1EysD,CAAAA,EAAiBzsD,CAAAA,CAAK,WAAA,EACrB7H,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClB+yD,EAAAA,CAAa7tD,CAAAA,CAAK,EAAE,EACtB,CAAA,CACA,SAAA,CAAWtQ,CAAAA,CAAG,6BAAA,CAA+B+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE9F,QAAA,CAAAkd,EAAAA,CACCxgB,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAEpFtD,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAW7lC,EAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAEzF,CAAA,CAEDgxD,CAAAA,EAAiB,CAACzsD,CAAAA,CAAK,WAAA,EAAe7H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CAAoB,CAAA,CAE1EA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClB6Y,CAAAA,CAAU,YAAA,GAAe,CACvB,GAAG3T,CAAAA,CACH,QAAA,CAAUA,CAAAA,CAAK,QAAA,GAAa,GAAA,CAAM,CAAA,CAAI,GAAA,CACtC,MAAA,CAAQA,CAAAA,CAAK,QAAA,GAAa,GAAA,CAAM,MAAA,CAAS,WAC3C,CAAC,EACH,CAAA,CACA,SAAA,CAAU,eAAA,CAEV,QAAA,CAAA7H,GAAAA,CAACuJ,EAAAA,CAAA,CAAW,MAAA,CAAQ1B,CAAAA,CAAK,MAAA,CAAQ,QAAA,CAAUA,CAAAA,CAAK,QAAA,CAAU,CAAA,CAC5D,CAAA,CAEA7H,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,uBACA+L,CAAAA,CAAS,YAAA,CAAe,eAAA,CACxBuE,CAAAA,CAAK,QAAA,GAAa,GAAA,GAAQvE,CAAAA,CAAS,6BAAA,CAAgC,4BAAA,CACrE,CAAA,CACG,QAAA,CAAAuE,CAAAA,CAAK,IAAA,CACR,CAAA,CAAA,CACF,CAAA,CAEA8uD,EAAAA,CAAW9uD,CAAAA,CAAMhM,EAAM,CAAA,CAAA,CAnDpBA,EAAAA,CAAO,EAqDd,CACD,CAAA,CAGA24D,CAAAA,EACCx0D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAAA,CAAA,CA3EjC6H,CAAAA,CAAK,EA6EZ,CAEJ,CAAC,CAAA,CACH,CAAA,CAGCyuD,EAAAA,CAAa,MAAA,GAAW,CAAA,EAAKrxD,CAAAA,EAC5BjF,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,aAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACk3D,IAAAA,CAAA,CAAK,SAAA,CAAW3/D,CAAAA,CAAG,wBAAA,CAA0B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC5FtD,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAWzI,CAAAA,CAAG+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACzD,QAAA,CAAAgE,CAAAA,CAAE,KAAA,CAAM,SAAA,CACX,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAGAtH,GAAAA,CAACqxD,EAAAA,CAAA,CACC,KAAA,CAAO3rB,EAAAA,CACP,OAAA,CAASswB,CAAAA,CACT,MAAA,CAAQ1yD,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACR,UAAA,CAAYgN,CAAAA,CAAU,UAAA,CACtB,eAAA,CAAiBA,CAAAA,CAAU,eAAA,CAC3B,YAAA,CAAcA,CAAAA,CAAU,YAAA,CACxB,YAAA,CAAcA,CAAAA,CAAU,YAAA,CACxB,YAAA,CAAcq6C,EAAAA,CACd,YAAA,CAAcC,EAAAA,CACd,cAAA,CAAgB/wD,CAAAA,CAClB,CAAA,CAGA/E,GAAAA,CAACwzD,EAAAA,CAAA,CACC,MAAA,CAAQ4B,EAAAA,CACR,OAAA,CAAS,IAAMC,EAAAA,CAAwB,KAAK,CAAA,CAC5C,MAAA,CAAQc,EAAAA,CACR,MAAA,CAAQ7yD,CAAAA,CACR,MAAA,CAAQkL,CAAAA,CACV,CAAA,CAAA,CACF,CAEJ,CCpaO,IAAM2oD,EAAAA,CAAuC,CAClD,CAAE,EAAA,CAAI,MAAA,CAAQ,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACtG,CAAE,EAAA,CAAI,QAAA,CAAU,IAAA,CAAM,QAAA,CAAU,KAAA,CAAO,QAAA,CAAU,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CAC5G,CAAE,EAAA,CAAI,UAAA,CAAY,IAAA,CAAM,UAAA,CAAY,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACnH,CAAE,EAAA,CAAI,WAAA,CAAa,IAAA,CAAM,WAAA,CAAa,KAAA,CAAO,WAAA,CAAa,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,KAAA,CAAO,SAAU,KAAA,CAAO,SAAA,CAAW,IAAK,CAAA,CACvH,CAAE,EAAA,CAAI,WAAA,CAAa,IAAA,CAAM,WAAA,CAAa,KAAA,CAAO,YAAA,CAAc,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CACtH,CAAE,EAAA,CAAI,SAAA,CAAW,IAAA,CAAM,SAAA,CAAW,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CAChH,CAAE,EAAA,CAAI,UAAA,CAAY,IAAA,CAAM,UAAA,CAAY,KAAA,CAAO,UAAA,CAAY,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,IAAA,CAAM,QAAA,CAAU,IAAA,CAAM,SAAA,CAAW,IAAK,CAAA,CAClH,CAAE,EAAA,CAAI,MAAA,CAAQ,IAAA,CAAM,MAAA,CAAQ,KAAA,CAAO,MAAA,CAAQ,KAAA,CAAO,GAAA,CAAK,OAAA,CAAS,MAAO,QAAA,CAAU,KAAA,CAAO,SAAA,CAAW,IAAK,CAC1G,CAAA,CAMaC,EAAAA,CAA+E,CAC1F,CAAE,IAAA,CAAM,MAAA,CAAQ,QAAA,CAAU,cAAA,CAAgB,IAAA,CAAM,MAAO,CAAA,CACvD,CAAE,IAAA,CAAM,QAAA,CAAU,QAAA,CAAU,gBAAA,CAAkB,IAAA,CAAM,WAAY,CAAA,CAChE,CAAE,IAAA,CAAM,UAAA,CAAY,QAAA,CAAU,kBAAA,CAAoB,IAAA,CAAM,MAAO,CAAA,CAC/D,CAAE,IAAA,CAAM,WAAA,CAAa,QAAA,CAAU,mBAAA,CAAqB,IAAA,CAAM,OAAQ,CAAA,CAClE,CAAE,IAAA,CAAM,WAAA,CAAa,QAAA,CAAU,mBAAA,CAAqB,IAAA,CAAM,UAAW,CAAA,CACrE,CAAE,IAAA,CAAM,SAAA,CAAW,QAAA,CAAU,iBAAA,CAAmB,IAAA,CAAM,eAAgB,CAAA,CACtE,CAAE,IAAA,CAAM,UAAA,CAAY,QAAA,CAAU,kBAAA,CAAoB,IAAA,CAAM,UAAW,CAAA,CACnE,CAAE,IAAA,CAAM,MAAA,CAAQ,QAAA,CAAU,cAAA,CAAgB,IAAA,CAAM,KAAM,CACxD,CAAA,CAMaC,EAAAA,CAAqG,CAChH,CAAE,IAAA,CAAM,MAAA,CAAQ,QAAA,CAAU,mBAAA,CAAqB,IAAA,CAAM,MAAO,CAAA,CAC5D,CAAE,IAAA,CAAM,QAAA,CAAU,QAAA,CAAU,qBAAA,CAAuB,IAAA,CAAM,MAAO,CAAA,CAChE,CAAE,IAAA,CAAM,MAAA,CAAQ,QAAA,CAAU,mBAAA,CAAqB,IAAA,CAAM,UAAW,CAAA,CAChE,CAAE,IAAA,CAAM,UAAA,CAAY,QAAA,CAAU,uBAAA,CAAyB,IAAA,CAAM,aAAc,CAAA,CAC3E,CAAE,IAAA,CAAM,UAAA,CAAY,QAAA,CAAU,uBAAA,CAAyB,IAAA,CAAM,aAAc,CAC7E,ECtcO,IAAMh5C,EAAAA,CAA2B,CAEtC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,WAAY,WAAA,CACZ,WAAA,CAAa,WAAA,CAGb,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,WAAA,CAGb,UAAA,CAAY,SAAA,CACZ,gBAAA,CAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SAAA,CACX,UAAA,CAAY,SAAA,CACZ,eAAA,CAAiB,SACnB,CAAA,CAKaC,EAAAA,CAA4B,CAEvC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,UAAA,CAAY,SAAA,CACZ,WAAA,CAAa,SAAA,CAGb,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,SAAA,CAGb,UAAA,CAAY,SAAA,CACZ,iBAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SAAA,CACX,UAAA,CAAY,SAAA,CACZ,eAAA,CAAiB,SACnB,CAAA,CAKaga,EAAAA,CAA8B,CAEzC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,UAAA,CAAY,WAAA,CACZ,WAAA,CAAa,WAAA,CAGb,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,WAAA,CAGb,UAAA,CAAY,SAAA,CACZ,gBAAA,CAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SAAA,CACX,UAAA,CAAY,SAAA,CACZ,eAAA,CAAiB,SACnB,CAAA,CAKag/B,EAAAA,CAAiB,CAC5B,IAAA,CAAMj5C,EAAAA,CACN,KAAA,CAAOC,EAAAA,CACP,OAAA,CAASga,EACX,EAOO,SAASi/B,EAAAA,CAAiBx3D,EAA6C,CAC5E,OAAOu3D,EAAAA,CAAev3D,CAAS,CAAA,EAAKu3D,EAAAA,CAAe,IACrD,CCvHO,IAAMx9B,EAAAA,CAA2B,CACtC,UAAA,CAAY,CACV,KAAA,CAAO,OAAA,CACP,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,MAAA,CACN,KAAA,CAAO,OAAA,CACP,IAAA,CAAM,MAAA,CACN,GAAA,CAAK,KACP,CAAA,CAEA,QAAA,CAAU,CACR,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KACP,CAAA,CAEA,YAAA,CAAc,CACZ,MAAA,CAAQ,QAAA,CACR,MAAA,CAAQ,QAAA,CACR,QAAS,SAAA,CACT,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,QAAA,CAAU,UACZ,CAAA,CAEA,MAAA,CAAQ,CACN,OAAA,CAAS,SAAA,CACT,QAAA,CAAU,UAAA,CACV,KAAA,CAAO,OAAA,CACP,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,KAAA,CACL,IAAA,CAAM,MAAA,CACN,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,OAAA,CAAS,SAAA,CACT,QAAA,CAAU,UAAA,CACV,QAAA,CAAU,UACZ,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,OAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,WACb,CAAA,CAEA,MAAA,CAAQ,CACN,MAAA,CAAQ,SAAA,CACR,UAAA,CAAY,eAAA,CACZ,QAAA,CAAU,UAAA,CACV,OAAA,CAAS,UAAA,CACT,OAAA,CAAS,UAAA,CACT,IAAA,CAAM,MACR,CAAA,CAEA,QAAA,CAAU,CACR,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,MACR,CACF,CAAA,CAKaC,EAAAA,CAA2B,CACtC,UAAA,CAAY,CACV,KAAA,CAAO,KAAA,CACP,QAAA,CAAU,UAAA,CACV,IAAA,CAAM,WAAA,CACN,KAAA,CAAO,KAAA,CACP,IAAA,CAAM,QAAA,CACN,GAAA,CAAK,QACP,CAAA,CAEA,QAAA,CAAU,CACR,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,QAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,KAAA,CACL,GAAA,CAAK,QACP,CAAA,CAEA,YAAA,CAAc,CACZ,MAAA,CAAQ,SAAA,CACR,MAAA,CAAQ,OAAA,CACR,OAAA,CAAS,QAAA,CACT,SAAA,CAAW,cAAA,CACX,QAAA,CAAU,QAAA,CACV,MAAA,CAAQ,SAAA,CACR,QAAA,CAAU,WACZ,EAEA,MAAA,CAAQ,CACN,OAAA,CAAS,OAAA,CACT,QAAA,CAAU,SAAA,CACV,KAAA,CAAO,OAAA,CACP,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,MAAA,CACL,IAAA,CAAM,OAAA,CACN,IAAA,CAAM,OAAA,CACN,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,YAAA,CACX,OAAA,CAAS,SAAA,CACT,QAAA,CAAU,WAAA,CACV,QAAA,CAAU,WACZ,CAAA,CAEA,MAAA,CAAQ,CACN,IAAA,CAAM,WAAA,CACN,UAAA,CAAY,aAAA,CACZ,SAAA,CAAW,YACb,CAAA,CAEA,MAAA,CAAQ,CACN,MAAA,CAAQ,gBAAA,CACR,UAAA,CAAY,iBAAA,CACZ,QAAA,CAAU,YAAA,CACV,OAAA,CAAS,aAAA,CACT,OAAA,CAAS,UAAA,CACT,IAAA,CAAM,QACR,CAAA,CAEA,QAAA,CAAU,CACR,QAAA,CAAU,UAAA,CACV,MAAA,CAAQ,QAAA,CACR,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,aAAA,CACV,IAAA,CAAM,SACR,CACF,CAAA,CAKay9B,EAAAA,CAA8E,CACzF,EAAA,CAAA19B,EAAAA,CACA,EAAA,CAAAC,EACF,EAKO,SAAS09B,EAAAA,CAAwBjpD,CAAAA,CAAgE,CACtG,OAAOgpD,EAAAA,CAAqBhpD,CAAiC,CAAA,EAAKgpD,EAAAA,CAAqB,EACzF,CAKO,SAASE,EAAAA,CACdlpD,CAAAA,CACA0rB,CAAAA,CACsB,CACtB,IAAMC,CAAAA,CAAOs9B,EAAAA,CAAwBjpD,CAAM,CAAA,CAE3C,OAAK0rB,CAAAA,CAIE,CACL,UAAA,CAAY,CAAE,GAAGC,CAAAA,CAAK,UAAA,CAAY,GAAGD,CAAAA,CAAmB,UAAW,CAAA,CACnE,QAAA,CAAU,CAAE,GAAGC,CAAAA,CAAK,QAAA,CAAU,GAAGD,CAAAA,CAAmB,QAAS,CAAA,CAC7D,YAAA,CAAc,CAAE,GAAGC,CAAAA,CAAK,YAAA,CAAc,GAAGD,CAAAA,CAAmB,YAAa,CAAA,CACzE,MAAA,CAAQ,CAAE,GAAGC,CAAAA,CAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,CAAA,CACvD,MAAA,CAAQ,CAAE,GAAGC,CAAAA,CAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,CAAA,CACvD,MAAA,CAAQ,CAAE,GAAGC,CAAAA,CAAK,MAAA,CAAQ,GAAGD,CAAAA,CAAmB,MAAO,CAAA,CACvD,QAAA,CAAU,CAAE,GAAGC,CAAAA,CAAK,QAAA,CAAU,GAAGD,CAAAA,CAAmB,QAAS,CAC/D,CAAA,CAXSC,CAYX,CAKO,SAASw9B,EAAAA,CAAcnpD,CAAAA,CAAoD,CAChF,IAAM,CAAA,CAAIipD,EAAAA,CAAwBjpD,CAAM,CAAA,CACxC,OAAO,CACL,CAAA,CAAE,MAAA,CAAO,OAAA,CACT,CAAA,CAAE,MAAA,CAAO,QAAA,CACT,CAAA,CAAE,MAAA,CAAO,KAAA,CACT,CAAA,CAAE,MAAA,CAAO,KAAA,CACT,CAAA,CAAE,MAAA,CAAO,GAAA,CACT,EAAE,MAAA,CAAO,IAAA,CACT,CAAA,CAAE,MAAA,CAAO,IAAA,CACT,CAAA,CAAE,MAAA,CAAO,MAAA,CACT,CAAA,CAAE,MAAA,CAAO,SAAA,CACT,CAAA,CAAE,MAAA,CAAO,OAAA,CACT,CAAA,CAAE,MAAA,CAAO,QAAA,CACT,CAAA,CAAE,MAAA,CAAO,QACX,CACF,CAKO,SAASopD,EAAAA,CACdppD,CAAAA,CACAqpD,CAAAA,CAAyB,CAAA,CACzBC,CAAAA,CAAiB,IAAA,CACP,CACV,IAAMxwD,CAAAA,CAAImwD,EAAAA,CAAwBjpD,CAAM,CAAA,CAClCupD,CAAAA,CAAWD,CAAAA,CACb,CAACxwD,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAA,CAAKA,CAAAA,CAAE,QAAA,CAAS,GAAG,CAAA,CAC/G,CACEA,CAAAA,CAAE,aAAa,MAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,MAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,OAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,SAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,QAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,MAAA,CACfA,CAAAA,CAAE,YAAA,CAAa,QACjB,CAAA,CAGJ,OAAO,CAAC,GAAGywD,CAAAA,CAAS,KAAA,CAAMF,CAAc,CAAA,CAAG,GAAGE,CAAAA,CAAS,KAAA,CAAM,CAAA,CAAGF,CAAc,CAAC,CACjF,CCxLA,SAAS34B,EAAAA,CAAaf,CAAAA,CAAuB,CAC3C,IAAMlkC,CAAAA,CAAiB,EAAC,CAExB,SAASklC,CAAAA,CAASyE,CAAAA,CAAkB,CAClC,IAAA,IAAW/7B,CAAAA,IAAQ+7B,CAAAA,CACjB3pC,CAAAA,CAAO,IAAA,CAAK4N,CAAI,CAAA,CACZA,EAAK,QAAA,EAAU,MAAA,EACjBs3B,CAAAA,CAASt3B,CAAAA,CAAK,QAAQ,EAG5B,CAEA,OAAAs3B,CAAAA,CAAShB,CAAK,CAAA,CACPlkC,CACT,CAKA,SAAS+9D,EAAAA,CAAkBr0D,CAAAA,CAAYkE,CAAAA,CAAqB,CAC1D,GAAI,CAACA,CAAAA,CAAK,SAAA,EAAa,CAACA,CAAAA,CAAK,OAAA,CAAS,OAAO,MAAA,CAE7C,IAAMowD,CAAAA,CAAW,IAAI,IAAA,CAAKt0D,CAAAA,CAAK,WAAA,EAAY,CAAGA,CAAAA,CAAK,QAAA,EAAS,CAAGA,CAAAA,CAAK,OAAA,EAAS,CAAA,CACvEu0D,CAAAA,CAAY,IAAI,IAAA,CAAKrwD,CAAAA,CAAK,SAAA,CAAU,WAAA,EAAY,CAAGA,CAAAA,CAAK,SAAA,CAAU,QAAA,EAAS,CAAGA,CAAAA,CAAK,SAAA,CAAU,OAAA,EAAS,CAAA,CACtGswD,CAAAA,CAAU,IAAI,IAAA,CAAKtwD,CAAAA,CAAK,OAAA,CAAQ,aAAY,CAAGA,CAAAA,CAAK,OAAA,CAAQ,QAAA,EAAS,CAAGA,CAAAA,CAAK,OAAA,CAAQ,OAAA,EAAS,CAAA,CAEpG,OAAOowD,CAAAA,EAAYC,CAAAA,EAAaD,CAAAA,EAAYE,CAC9C,CAKA,SAAS5uD,EAAAA,CAAW,CAAE,IAAA,CAAA1B,CAAK,CAAA,CAAmB,CAC5C,OAAIA,CAAAA,CAAK,QAAA,GAAa,GAAA,EAAOA,CAAAA,CAAK,MAAA,GAAW,WAAA,CACpC7H,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,sCAAA,CAAuC,CAAA,CAEnE9Q,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,QAAA,CAAW,CAAA,EAAMA,CAAAA,CAAK,MAAA,GAAW,aAAA,CACnD7H,GAAAA,CAACi+B,UAAAA,CAAA,CAAW,SAAA,CAAU,qCAAA,CAAsC,CAAA,CAE9Dj+B,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAU,qCAAA,CAAsC,CACjE,CAKO,SAAS8/C,EAAAA,CAAc,CAC5B,KAAA,CAAAj6B,CAAAA,CACA,OAAAl7B,CAAAA,CAAS,EAAC,CACV,SAAA,CAAAuY,CAAAA,CAAY,EAAC,CACb,WAAA,CAAA68C,CAAAA,CACA,SAAA,CAAA38C,CAAAA,CAAY,KAAA,CACZ,KAAA,CAAAjjB,CAAAA,CACA,SAAA,CAAA6I,CAAAA,CACA,KAAA,CAAAuH,CAAAA,CACA,aAAA,CAAA4H,CAAAA,CAAgB,EAAC,CACjB,WAAA,CAAAC,CAAAA,CACA,iBAAA,CAAA4nD,CAAAA,CACA,QAAA,CAAA7kD,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,WAAA,CAAAjF,CAAAA,CAEA,gBAAA,CAAkB8pD,CAAAA,CAClB,UAAA,CAAA38C,CACF,CAAA,CAAuB,CACrB,GAAM,CACJ,KAAA,CAAO7b,CAAAA,CAAY,MAAA,CACnB,MAAA,CAAAyO,CAAAA,CAAS,IAAA,CACT,kBAAA,CAAA0rB,CACF,CAAA,CAAIj3B,CAAAA,CAEEqE,CAAAA,CAAIowD,EAAAA,CAA0BlpD,CAAAA,CAAQ0rB,CAAkB,CAAA,CACxD52B,CAAAA,CAASvD,CAAAA,GAAc,MAAA,CAGvB6T,CAAAA,CAAiB,CACrB,YAAA,CAActQ,CAAAA,CAAS,UAAY,SAAA,CACnC,aAAA,CAAeA,CAAAA,CAAS,SAAA,CAAY,SAAA,CACpC,WAAA,CAAaA,CAAAA,CAAS,SAAA,CAAY,SAAA,CAClC,WAAA,CAAaA,CAAAA,CAAS,uBAAA,CAA0B,iBAAA,CAChD,MAAA,CAAQA,CAAAA,CAAS,uBAAA,CAA0B,iBAAA,CAC3C,SAAA,CAAWA,CAAAA,CAAS,SAAA,CAAY,SAAA,CAChC,WAAA,CAAaA,CAAAA,CAAS,SAAA,CAAY,SAAA,CAClC,OAAA,CAASA,CAAAA,CAAS,wBAAA,CAA2B,kBAC/C,CAAA,CAGM,CAACk1D,CAAAA,CAAaC,CAAc,CAAA,CAAIn4D,QAAAA,CAAS+3D,CAAAA,EAAe,IAAI,IAAM,CAAA,CAClE,CAACtkD,CAAAA,CAAcC,CAAe,CAAA,CAAI1T,QAAAA,CAAsB,IAAI,CAAA,CAC5D,CAACo4D,CAAAA,CAAaC,CAAc,CAAA,CAAIr4D,QAAAA,CAA6B,IAAI,CAAA,CACjE,CAACiU,CAAAA,CAAgBC,CAAiB,CAAA,CAAIlU,QAAAA,CAAiC,IAAI,CAAA,CAC3E,CAACmU,CAAAA,CAAiBC,EAAkB,CAAA,CAAIpU,QAAAA,CAAS,IAAI,IAAM,CAAA,CAE3D,CAACs4D,EAAAA,CAAeC,EAAgB,CAAA,CAAIv4D,QAAAA,CAAiC,EAAE,CAAA,CACvEw4D,EAAAA,CAAwB,CAAA,CACxBC,EAAAA,CAAkB,CAAA,CAGlB,CAAC9kD,EAAAA,CAAoBC,CAAqB,CAAA,CAAI5T,QAAAA,CAAS,KAAK,CAAA,CAC5D,CAAC6T,CAAAA,CAAsBC,CAAuB,CAAA,CAAI9T,QAAAA,CAAS,KAAK,CAAA,CAChE,CAAC+T,CAAAA,CAAuBC,CAAwB,CAAA,CAAIhU,QAAAA,CAAS,KAAK,CAAA,CAClE,CAACqU,CAAAA,CAAiBC,EAAkB,CAAA,CAAItU,QAAAA,CAAS,KAAK,CAAA,CAGtD,CAAC04D,EAAAA,CAAiBC,EAAkB,CAAA,CAAI34D,QAAAA,CAAwB,IAAI,CAAA,CACpE,CAAC44D,EAAAA,CAAiBC,EAAkB,CAAA,CAAI74D,QAAAA,CAAS,EAAE,CAAA,CAEnD,CAAC84D,EAAAA,CAAqBC,EAAsB,EAAI/4D,QAAAA,CAA2B,MAAS,CAAA,CACpF,CAACg5D,EAAAA,CAAqBC,EAAsB,CAAA,CAAIj5D,QAAAA,CAAwB,IAAI,CAAA,CAC5E,CAACk5D,EAAAA,CAA2BC,CAA4B,CAAA,CAAIn5D,QAAAA,CAAS,KAAK,CAAA,CAC1E,CAACo5D,EAAAA,CAA2BC,EAA4B,CAAA,CAAIr5D,QAAAA,CAAS,KAAK,CAAA,CAE1E,CAACs5D,EAAAA,CAAiBC,EAAkB,CAAA,CAAIv5D,QAAAA,CAAsB,IAAI,EAClE,CAACw5D,EAAAA,CAAqBC,EAAsB,CAAA,CAAIz5D,QAAAA,CAAS,KAAK,CAAA,CAC9D,CAAC05D,EAAAA,CAAsBC,CAAuB,CAAA,CAAI35D,QAAAA,CAAS,IAAI,IAAM,CAAA,CAGrE,CAAC6U,EAAAA,CAAgBC,EAAiB,CAAA,CAAI9U,QAAAA,CAAS,KAAK,CAAA,CACpD,CAAC+U,EAAAA,CAAkBC,EAAmB,CAAA,CAAIhV,QAAAA,CAAS,KAAK,CAAA,CAGxD,CAACuU,GAA0BC,EAA2B,CAAA,CAAIxU,QAAAA,CAAS,KAAK,CAAA,CACxE,CAACyU,EAAAA,CAAkBC,EAAmB,CAAA,CAAI1U,QAAAA,CAAS,EAAE,CAAA,CAGrD,CAAC2U,EAAAA,CAAiBC,EAAkB,CAAA,CAAI5U,QAAAA,CAAS,KAAK,CAAA,CAGtD,CAACuV,CAAAA,CAAaC,EAAc,CAAA,CAAIxV,QAAAA,CAAS,EAAE,CAAA,CAC3C,CAACyV,CAAAA,CAAqBC,EAAsB,CAAA,CAAI1V,QAAAA,CAAS,KAAK,CAAA,CAG9D45D,EAAAA,CAAoB/qD,WAAAA,CAAY,IAAM,CAC1CspD,CAAAA,CAAe,IAAI,IAAA,CAAKD,CAAAA,CAAY,WAAA,EAAY,CAAGA,CAAAA,CAAY,QAAA,EAAS,CAAI,CAAA,CAAG,CAAC,CAAC,EACnF,CAAA,CAAG,CAACA,CAAW,CAAC,CAAA,CAEV2B,EAAAA,CAAgBhrD,WAAAA,CAAY,IAAM,CACtCspD,CAAAA,CAAe,IAAI,IAAA,CAAKD,EAAY,WAAA,EAAY,CAAGA,CAAAA,CAAY,QAAA,EAAS,CAAI,CAAA,CAAG,CAAC,CAAC,EACnF,CAAA,CAAG,CAACA,CAAW,CAAC,CAAA,CAEV4B,EAAAA,CAAYjrD,WAAAA,CAAY,IAAM,CAClCspD,CAAAA,CAAe,IAAI,IAAM,EAC3B,CAAA,CAAG,EAAE,CAAA,CAGC4B,EAAAA,CAAev9C,OAAAA,CAAQ,IAAqB,CAChD,IAAMlZ,CAAAA,CAAO40D,CAAAA,CAAY,WAAA,EAAY,CAC/B30D,CAAAA,CAAQ20D,CAAAA,CAAY,QAAA,EAAS,CAE7B8B,EAAAA,CAAkB,IAAI,IAAA,CAAK12D,CAAAA,CAAMC,CAAAA,CAAO,CAAC,CAAA,CACzC02D,EAAAA,CAAiB,IAAI,IAAA,CAAK32D,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAG,CAAC,CAAA,CAE5C22D,EAAAA,CAAWF,EAAAA,CAAgB,MAAA,EAAO,CAClChjD,EAAAA,CAAcijD,EAAAA,CAAe,OAAA,EAAQ,CAErCE,GAAev7B,EAAAA,CAAaf,CAAK,CAAA,CACjCx5B,EAAAA,CAAQ,IAAI,IAAA,CAClBA,EAAAA,CAAM,QAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAC,CAAA,CAEzB,IAAMnB,EAAAA,CAAsB,EAAC,CAGvBk3D,EAAAA,CAAgBF,EAAAA,CAChBhjD,EAAAA,CAAmB,IAAI,IAAA,CAAK5T,CAAAA,CAAMC,CAAAA,CAAO,CAAC,CAAA,CAAE,OAAA,EAAQ,CAC1D,IAAA,IAAS5L,EAAAA,CAAIyiE,EAAAA,CAAgB,CAAA,CAAGziE,EAAAA,EAAK,CAAA,CAAGA,EAAAA,EAAAA,CAAK,CAC3C,IAAM0L,EAAAA,CAAO,IAAI,IAAA,CAAKC,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAG2T,EAAAA,CAAmBvf,EAAC,CAAA,CAC3DuL,EAAAA,CAAK,IAAA,CAAK,CACR,IAAA,CAAAG,EAAAA,CACA,cAAA,CAAgB,KAAA,CAChB,OAAA,CAAS,KAAA,CACT,SAAA,CAAWA,EAAAA,CAAK,MAAA,EAAO,GAAM,CAAA,EAAKA,EAAAA,CAAK,MAAA,KAAa,CAAA,CACpD,MAAA,CAAQ82D,EAAAA,CAAa,MAAA,CAAOnzD,EAAAA,EAAK0wD,EAAAA,CAAkBr0D,EAAAA,CAAM2D,EAAC,CAAC,CAAA,CAAE,GAAA,CAAIO,EAAAA,GAAS,CACxE,EAAA,CAAIA,EAAAA,CAAK,EAAA,CACT,KAAA,CAAOA,EAAAA,CAAK,IAAA,CACZ,KAAA,CAAOA,EAAAA,CAAK,SAAA,CACZ,GAAA,CAAKA,EAAAA,CAAK,OAAA,CACV,IAAA,CAAAA,EACF,CAAA,CAAE,CACJ,CAAC,EACH,CAGA,IAAA,IAAS/D,EAAAA,CAAM,CAAA,CAAGA,EAAAA,EAAOwT,EAAAA,CAAaxT,EAAAA,EAAAA,CAAO,CAC3C,IAAMH,EAAAA,CAAO,IAAI,IAAA,CAAKC,CAAAA,CAAMC,CAAAA,CAAOC,EAAG,CAAA,CAChC2V,EAAAA,CAAU9V,EAAAA,CAAK,OAAA,EAAQ,GAAMgB,EAAAA,CAAM,OAAA,EAAQ,CACjDnB,EAAAA,CAAK,IAAA,CAAK,CACR,IAAA,CAAAG,EAAAA,CACA,cAAA,CAAgB,IAAA,CAChB,OAAA,CAAA8V,GACA,SAAA,CAAW9V,EAAAA,CAAK,MAAA,EAAO,GAAM,CAAA,EAAKA,EAAAA,CAAK,MAAA,EAAO,GAAM,CAAA,CACpD,MAAA,CAAQ82D,EAAAA,CAAa,MAAA,CAAOnzD,EAAAA,EAAK0wD,EAAAA,CAAkBr0D,EAAAA,CAAM2D,EAAC,CAAC,CAAA,CAAE,GAAA,CAAIO,EAAAA,GAAS,CACxE,EAAA,CAAIA,EAAAA,CAAK,EAAA,CACT,KAAA,CAAOA,EAAAA,CAAK,IAAA,CACZ,KAAA,CAAOA,EAAAA,CAAK,SAAA,CACZ,GAAA,CAAKA,EAAAA,CAAK,OAAA,CACV,IAAA,CAAAA,EACF,CAAA,CAAE,CACJ,CAAC,EACH,CAGA,IAAM4P,EAAAA,CAAgB,EAAA,CAAKjU,EAAAA,CAAK,MAAA,CAChC,IAAA,IAASM,EAAAA,CAAM,CAAA,CAAGA,EAAAA,EAAO2T,EAAAA,CAAe3T,EAAAA,EAAAA,CAAO,CAC7C,IAAMH,EAAAA,CAAO,IAAI,IAAA,CAAKC,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAGC,EAAG,CAAA,CAC1CN,EAAAA,CAAK,KAAK,CACR,IAAA,CAAAG,EAAAA,CACA,cAAA,CAAgB,KAAA,CAChB,OAAA,CAAS,KAAA,CACT,SAAA,CAAWA,EAAAA,CAAK,MAAA,EAAO,GAAM,CAAA,EAAKA,EAAAA,CAAK,MAAA,EAAO,GAAM,CAAA,CACpD,MAAA,CAAQ82D,EAAAA,CAAa,MAAA,CAAOnzD,EAAAA,EAAK0wD,EAAAA,CAAkBr0D,EAAAA,CAAM2D,EAAC,CAAC,CAAA,CAAE,GAAA,CAAIO,EAAAA,GAAS,CACxE,EAAA,CAAIA,EAAAA,CAAK,EAAA,CACT,KAAA,CAAOA,EAAAA,CAAK,IAAA,CACZ,KAAA,CAAOA,EAAAA,CAAK,SAAA,CACZ,GAAA,CAAKA,EAAAA,CAAK,OAAA,CACV,IAAA,CAAAA,EACF,CAAA,CAAE,CACJ,CAAC,EACH,CAEA,OAAOrE,EACT,CAAA,CAAG,CAACg1D,CAAAA,CAAar6B,CAAK,CAAC,CAAA,CAGjBw8B,CAAAA,CAAWnsD,CAAAA,GAAW,IAAA,CACxB,CAAC,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,SAAO,KAAA,CAAO,KAAA,CAAO,QAAK,CAAA,CAChD,CAAC,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAA,CAAO,KAAK,CAAA,CAG9CosD,CAAAA,CAAYpC,CAAAA,CAAY,kBAAA,CAAmBhqD,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CACpF,KAAA,CAAO,MAAA,CACP,IAAA,CAAM,SACR,CAAC,CAAA,CAGK6H,EAAAA,CAAkBlH,WAAAA,CAAY,CAACmH,CAAAA,CAAmBlZ,CAAAA,GAAe,CACrE,GAAI,CAAC2W,CAAAA,CAAc,OACnB,IAAMoC,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,CAACuC,CAAK,EAAGlZ,CAAM,CAAA,CACtD4W,CAAAA,CAAgBmC,EAAW,CAAA,CAC3BqF,CAAAA,CAAU,YAAA,GAAerF,EAAW,EACtC,CAAA,CAAG,CAACpC,CAAAA,CAAcyH,CAAS,CAAC,CAAA,CAGtBxE,EAAAA,CAAmB7H,WAAAA,CAAazW,GAAmB,CACvD,GAAI,CAACqb,CAAAA,CAAc,OACnB,IAAImD,CAAAA,CAAWnD,CAAAA,CAAa,QAAA,EAAY,CAAA,CACpCrb,CAAAA,GAAW,WAAA,CAAawe,CAAAA,CAAW,GAAA,CAC9Bxe,CAAAA,GAAW,MAAA,GAAQwe,CAAAA,CAAW,CAAA,CAAA,CACvC,IAAMf,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,MAAA,CAAArb,CAAAA,CAAQ,QAAA,CAAAwe,CAAS,CAAA,CACxDlD,CAAAA,CAAgBmC,EAAW,CAAA,CAC3BqF,CAAAA,CAAU,YAAA,GAAerF,EAAW,CAAA,CACpCjC,CAAAA,CAAsB,KAAK,EAC7B,CAAA,CAAG,CAACH,CAAAA,CAAcyH,CAAS,CAAC,CAAA,CAGtBrE,EAAAA,CAAkBhI,WAAAA,CAAY,CAAC/L,CAAAA,CAA6BC,CAAAA,GAA8B,CAC9F,GAAI,CAAC0Q,CAAAA,CAAc,OACnB,IAAMoC,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,SAAA,CAAA3Q,CAAAA,CAAW,OAAA,CAAAC,CAAQ,CAAA,CAC1D2Q,CAAAA,CAAgBmC,EAAW,CAAA,CAC3BqF,CAAAA,CAAU,YAAA,GAAerF,EAAW,EACtC,CAAA,CAAG,CAACpC,CAAAA,CAAcyH,CAAS,CAAC,CAAA,CAGtBpF,CAAAA,CAAoBjH,WAAAA,CAAY,IAAM,CAC1C+E,CAAAA,CAAsB,KAAK,CAAA,CAC3BE,CAAAA,CAAwB,KAAK,CAAA,CAC7BE,CAAAA,CAAyB,KAAK,CAAA,CAC9BE,CAAAA,CAAkB,IAAI,CAAA,CACtBM,EAAAA,CAA4B,KAAK,CAAA,CACjCE,EAAAA,CAAoB,EAAE,CAAA,CACtBE,EAAAA,CAAmB,KAAK,EAC1B,CAAA,CAAG,EAAE,CAAA,CAGCwC,EAAAA,CAAiBvI,WAAAA,CAAY,MAAOxM,CAAAA,EAAuB,CAK/D,GAJAA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClByS,EAAAA,CAAkB,KAAK,CAAA,CAEnB,CAACrB,CAAAA,EAAgB,CAACyH,CAAAA,CAAU,oBAAqB,OAErD,IAAM7D,CAAAA,CAAQ,KAAA,CAAM,IAAA,CAAKhV,CAAAA,CAAE,YAAA,CAAa,KAAK,CAAA,CAC7C,GAAIgV,CAAAA,CAAM,MAAA,GAAW,CAAA,CAErB,CAAArC,EAAAA,CAAoB,IAAI,CAAA,CACxB,GAAI,CACF,MAAMkG,CAAAA,CAAU,mBAAA,CAAoBzH,CAAAA,CAAa,EAAA,CAAI4D,CAAK,EAC5D,CAAA,OAAE,CACArC,EAAAA,CAAoB,KAAK,EAC3B,CAAA,CACF,CAAA,CAAG,CAACvB,CAAAA,CAAcyH,CAAS,CAAC,CAAA,CAGtB5D,EAAAA,CAAwBzI,WAAAA,CAAY,MAAOxM,CAAAA,EAA2C,CAC1F,GAAI,CAACoR,CAAAA,EAAgB,CAACyH,CAAAA,CAAU,mBAAA,EAAuB,CAAC7Y,CAAAA,CAAE,MAAA,CAAO,KAAA,CAAO,OAExE,IAAMgV,CAAAA,CAAQ,KAAA,CAAM,IAAA,CAAKhV,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvC,GAAIgV,CAAAA,CAAM,MAAA,GAAW,CAAA,CAErB,CAAArC,EAAAA,CAAoB,IAAI,CAAA,CACxB,GAAI,CACF,MAAMkG,CAAAA,CAAU,mBAAA,CAAoBzH,CAAAA,CAAa,EAAA,CAAI4D,CAAK,EAC5D,CAAA,OAAE,CACArC,EAAAA,CAAoB,KAAK,EAC3B,CACA3S,CAAAA,CAAE,MAAA,CAAO,KAAA,CAAQ,GAAA,CACnB,CAAA,CAAG,CAACoR,CAAAA,CAAcyH,CAAS,CAAC,CAAA,CAGtB3D,EAAAA,CAAiB1I,WAAAA,CAAaxM,CAAAA,EAAuB,CACzDA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClByS,EAAAA,CAAkB,IAAI,EACxB,CAAA,CAAG,EAAE,CAAA,CAEC0C,EAAAA,CAAkB3I,WAAAA,CAAaxM,CAAAA,EAAuB,CAC1DA,CAAAA,CAAE,cAAA,EAAe,CACjBA,CAAAA,CAAE,eAAA,EAAgB,CAClByS,EAAAA,CAAkB,KAAK,EACzB,EAAG,EAAE,CAAA,CAGC2C,EAAAA,CAAiB5I,WAAAA,CAAa6I,CAAAA,EAC9BA,CAAAA,CAAQ,IAAA,CAAa,CAAA,EAAGA,CAAK,CAAA,EAAA,CAAA,CAC7BA,CAAAA,CAAQ,IAAA,CAAO,IAAA,CAAa,CAAA,EAAA,CAAIA,CAAAA,CAAQ,IAAA,EAAM,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA,CACrD,CAAA,EAAA,CAAIA,CAAAA,EAAS,IAAA,CAAO,IAAA,CAAA,EAAO,OAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAA,CAC3C,EAAE,CAAA,CAGCC,EAAAA,CAAc9I,WAAAA,CAAa+I,CAAAA,EAC3BA,CAAAA,CAAS,UAAA,CAAW,QAAQ,CAAA,CAAUC,KAAAA,CACtCD,CAAAA,CAAS,QAAA,CAAS,KAAK,CAAA,EAAKA,CAAAA,CAAS,QAAA,CAAS,UAAU,CAAA,CAAUE,QAAAA,CAC/DC,IAAAA,CACN,EAAE,CAAA,CAGCwiD,EAAAA,CAAuC/9C,OAAAA,CAAQ,IAC/C,CAAC/I,CAAAA,EAAgB,CAACukD,CAAAA,CAA0B,EAAC,CAC1CA,EAAkB,GAAA,CAAIvkD,CAAAA,CAAa,EAAE,CAAA,EAAK,EAAC,CACjD,CAACA,CAAAA,CAAcukD,CAAiB,CAAC,CAAA,CAGpC,OAAI58C,CAAAA,CAEA1b,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+DAAA,CAAgE,CAAA,CAC/EkB,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAW3J,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAA,CAAAgE,CAAAA,CAAE,MAAA,CAAO,QAAA,CAAS,KAAA,CAAA,CACrB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKA7O,CAAAA,CAEAuH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uEAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,QAAA,CAAC,CAAA,CAC3C,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAAG,QAAA,CAAA,OAAA,CAE1F,CAAA,CACAtD,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAA,OAAO7K,CAAAA,EAAU,QAAA,CAAWA,CAAAA,CAAQA,CAAAA,CAAM,OAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKA0lC,CAAAA,CAAM,MAAA,GAAW,CAAA,CAEjBn+B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,yCAAA,CAA2C+L,EAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CACrH,QAAA,CAAA3H,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qFAAA,CACb,QAAA,CAAAA,GAAAA,CAACyoC,QAAAA,CAAA,CAAS,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAC/C,CAAA,CACAzoC,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAgE,CAAAA,CAAE,MAAA,CAAO,QAAA,CACZ,CAAA,CACAtH,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAAgE,CAAAA,CAAE,MAAA,CAAO,OAAA,CACZ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAKFpG,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,kDAAA,CAAoD+L,CAAAA,CAAS,cAAA,CAAiB,UAAA,CAAYhC,CAAS,CAAA,CAAG,KAAA,CAAOuH,CAAAA,CAE9H,QAAA,CAAA,CAAA7I,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACnG,QAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC1F,QAAA,CAAAs3D,CAAAA,CACH,CAAA,CACA56D,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASo6D,EAAAA,CACT,SAAA,CAAW7iE,CAAAA,CACT,kDAAA,CACA+L,CAAAA,CACI,yCAAA,CACA,6CACN,CAAA,CAEC,QAAA,CAAAgE,CAAAA,CAAE,UAAA,CAAW,KAAA,CAChB,CAAA,CAAA,CACF,CAAA,CACApG,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASk6D,EAAAA,CACT,UAAW3iE,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAEpG,QAAA,CAAAtD,GAAAA,CAAC2oC,WAAAA,CAAA,CAAY,SAAA,CAAWpxC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACtF,CAAA,CACAtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASm6D,EAAAA,CACT,SAAA,CAAW5iE,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAEpG,QAAA,CAAAtD,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAW7lC,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACvF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,eAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACZ,QAAA,CAAA26D,CAAAA,CAAS,IAAK72D,CAAAA,EACb9D,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CAAG,gDAAA,CAAkD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAE1G,QAAA,CAAAQ,CAAAA,CAAAA,CAHIA,CAIP,CACD,CAAA,CACH,CAAA,CAIA9D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,kDAAA,CAAoD+L,CAAAA,CAAS,cAAA,CAAiB,aAAa,CAAA,CAC3G,QAAA,CAAA+2D,EAAAA,CAAa,GAAA,CAAI,CAACv2D,CAAAA,CAAKnF,CAAAA,GAAU,CAEhC,IAAMu6C,EAAAA,CAAYp1C,CAAAA,CAAI,IAAA,CAAK,MAAA,EAAO,GAAM,CAAA,EAAKA,CAAAA,CAAI,IAAA,CAAK,MAAA,EAAO,GAAM,CAAA,CAEnE,OACA5C,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,kEAAA,CAEA+L,CAAAA,CACK41C,EAAAA,CACG,cAAA,CACCp1C,CAAAA,CAAI,cAAA,CAAiB,cAAA,CAAiB,cAAA,CAC1Co1C,EAAAA,CACG,aAAA,CACCp1C,CAAAA,CAAI,cAAA,CAAiB,UAAA,CAAa,aAC3CA,CAAAA,CAAI,OAAA,EAAW,kCACjB,CAAA,CAGE,QAAA,CAAA,CAAA,CAAA,IAAM,CACN,IAAMg3D,EAAAA,CAAelC,EAAAA,CAAcj6D,CAAK,CAAA,EAAKm6D,EAAAA,CACvCiC,EAAAA,CAAgBj3D,CAAAA,CAAI,MAAA,CAAO,KAAA,CAAM,CAAA,CAAGg3D,EAAY,CAAA,CAChD1J,EAAAA,CAAiBttD,CAAAA,CAAI,MAAA,CAAO,MAAA,CAASg3D,EAAAA,CAE3C,OACE55D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CACZ,QAAA,CAAA,CAAA65D,EAAAA,CAAc,GAAA,CAAKx7D,EAAAA,EAClBS,GAAAA,CAAC,KAAA,CAAA,CAAmB,SAAA,CAAU,gBAAA,CAC5B,QAAA,CAAAkB,IAAAA,CAACgP,MAAAA,CAAO,MAAA,CAAP,CACC,OAAA,CAAS,IAAM,CACb8D,CAAAA,CAAgBzU,EAAAA,CAAM,IAAI,CAAA,CAC1Bic,CAAAA,CAAU,YAAA,GAAejc,EAAK,CAAA,CAC9Bqc,CAAAA,GAAarc,EAAAA,CAAM,IAAA,CAAK,EAAE,EAC5B,CAAA,CACA,UAAA,CAAY,CAAE,KAAA,CAAO,IAAK,CAAA,CAC1B,SAAA,CAAWhI,CAAAA,CACT,uEAAA,CACAgI,EAAAA,CAAM,IAAA,CAAK,QAAA,GAAa,GAAA,CACnB+D,CAAAA,CAAS,gCAAA,CAAmC,gCAAA,CAC5CA,CAAAA,CAAS,gCAAA,CAAmC,gCACnD,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACuJ,EAAAA,CAAA,CAAW,IAAA,CAAMhK,EAAAA,CAAM,IAAA,CAAM,CAAA,CAC9BS,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,UAAA,CAAY,QAAA,CAAAT,EAAAA,CAAM,KAAA,CAAM,CAAA,CAAA,CAC1C,CAAA,CAAA,CAjBQA,EAAAA,CAAM,EAkBhB,CACD,CAAA,CAEA6xD,EAAAA,CAAiB,CAAA,EAChBlwD,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClBk2D,EAAAA,CAAiBjpD,EAAAA,GAAS,CACxB,GAAGA,EAAAA,CACH,CAACjR,CAAK,EAAGm8D,EAAAA,CAAe/B,EAC1B,CAAA,CAAE,EACJ,CAAA,CACA,SAAA,CAAWxhE,CAAAA,CACT,kEAAA,CACA+L,EAAS,qCAAA,CAAwC,mCACnD,CAAA,CACD,QAAA,CAAA,CAAA,GAAA,CACG8tD,EAAAA,CAAe,GAAA,CAAE5iD,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAQ,MAAA,CAAA,CAC/C,CAAA,CAGDssD,EAAAA,CAAehC,EAAAA,EAAyBh1D,CAAAA,CAAI,MAAA,CAAO,MAAA,CAASg1D,EAAAA,EAC3D94D,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClBk2D,EAAAA,CAAiBjpD,EAAAA,GAAS,CACxB,GAAGA,EAAAA,CACH,CAACjR,CAAK,EAAGm6D,EACX,CAAA,CAAE,EACJ,CAAA,CACA,SAAA,CAAWvhE,CAAAA,CACT,kEAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,mCACnD,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,MAAA,CAC/B,CAAA,CAAA,CAEJ,CAEJ,CAAA,GAAG,CAGHtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4CAAA,CAEX,QAAA,CAAA,CAAA,CAAA,IAAM,CAEN,IAAM85D,EAAAA,CAAer8D,CAAAA,EAAS,GACxBs8D,EAAAA,CAAct8D,CAAAA,CAAQ,CAAA,EAAK,CAAA,CAEjC,OACEuC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CACdq2D,EAAAA,GAAoBr6D,CAAAA,CACtBs6D,EAAAA,CAAmB,IAAI,CAAA,EAEvBA,EAAAA,CAAmBt6D,CAAK,CAAA,CACxBw6D,EAAAA,CAAmB,EAAE,CAAA,CACrBE,EAAAA,CAAuB,MAAS,CAAA,CAChCE,EAAAA,CAAuB,IAAI,CAAA,CAC3BM,EAAAA,CAAmB,IAAI,CAAA,CACvBJ,CAAAA,CAA6B,KAAK,CAAA,CAClCE,EAAAA,CAA6B,KAAK,CAAA,CAClCI,EAAAA,CAAuB,KAAK,CAAA,CAC5BE,CAAAA,CAAwBn2D,CAAAA,CAAI,IAAI,CAAA,EAEpC,CAAA,CACA,SAAA,CAAWvM,CAAAA,CACT,iEAAA,CACAyhE,EAAAA,GAAoBr6D,CAAAA,CAChB,qCAAA,CACA,mCAAA,CACJ2E,CAAAA,CACI,oDAAA,CACA,mDACN,EAEA,QAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAW3a,CAAAA,CAAG,kCAAA,CAAoCyhE,EAAAA,GAAoBr6D,CAAAA,EAAS,WAAW,CAAA,CAAG,CAAA,CACrG,CAAA,CAGAqB,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA+oD,EAAAA,GAAoBr6D,CAAAA,EACnBuC,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,OAAA,CAAS,IAAM,CACbi5D,EAAAA,CAAmB,IAAI,CAAA,CACvBE,EAAAA,CAAmB,EAAE,CAAA,CACrBE,EAAAA,CAAuB,MAAS,CAAA,CAChCE,EAAAA,CAAuB,IAAI,CAAA,CAC3BM,EAAAA,CAAmB,IAAI,CAAA,CACvBJ,CAAAA,CAA6B,KAAK,CAAA,CAClCE,EAAAA,CAA6B,KAAK,CAAA,CAClCI,EAAAA,CAAuB,KAAK,EAC9B,CAAA,CACF,CAAA,CACA74D,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG8qD,EAAAA,CAAe,EAAA,CAAK,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CAC7D,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAGA,EAAAA,CAAe,EAAA,CAAK,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CAC1D,UAAA,CAAY,CAAE,QAAA,CAAU,GAAK,CAAA,CAC7B,SAAA,CAAWzjE,CAAAA,CACT,+CAAA,CAEAyjE,EAAAA,CAAe,kBAAA,CAAqB,eAAA,CAEpCC,EAAAA,CAAc,SAAA,CAAY,QAAA,CAC1B33D,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CACA,OAAA,CAAUX,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAElB82D,CAAAA,CAA6B,KAAK,CAAA,CAClCE,EAAAA,CAA6B,KAAK,CAAA,CAClCI,EAAAA,CAAuB,KAAK,EAC9B,CAAA,CAEA,UAAA/5D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,OAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOk5D,EAAAA,CACP,QAAA,CAAWv2D,EAAAA,EAAMw2D,EAAAA,CAAmBx2D,EAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAClD,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,uDAAA,CAA0D,oCAAA,CACzF,SAAA,CAAWjX,CAAAA,CACT,mEAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACA,SAAA,CAAS,IAAA,CACT,SAAA,CAAYX,EAAAA,EAAM,CAChB,GAAIA,EAAAA,CAAE,GAAA,GAAQ,OAAA,EAAWu2D,EAAAA,CAAgB,IAAA,EAAK,CAAG,CAE/C,IAAMrpD,EAAAA,CAAe5M,CAAAA,CAAO,cAAA,EAAgB,IAAA,CAAKqC,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOg0D,EAAmB,CAAA,CAC5E4B,EAAAA,CAAWtB,EAAAA,EAAmB91D,CAAAA,CAAI,IAAA,CACxC0X,CAAAA,CAAU,YAAA,GAAe,CACvB,IAAA,CAAM09C,EAAAA,CAAgB,MAAK,CAC3B,SAAA,CAAWgC,EAAAA,CACX,OAAA,CAASA,EAAAA,CACT,QAAA,CAAU9B,EAAAA,CACV,SAAA,CAAWvpD,EAAAA,CAAe,CAACA,EAAY,CAAA,CAAI,MAC7C,CAAC,CAAA,CACDspD,EAAAA,CAAmB,EAAE,CAAA,CACrBE,EAAAA,CAAuB,MAAS,CAAA,CAChCE,EAAAA,CAAuB,IAAI,CAAA,CAC3BM,EAAAA,CAAmB,IAAI,CAAA,CACvBZ,EAAAA,CAAmB,IAAI,EACzB,CACIt2D,EAAAA,CAAE,GAAA,GAAQ,QAAA,GACZs2D,EAAAA,CAAmB,IAAI,CAAA,CACvBE,EAAAA,CAAmB,EAAE,CAAA,CACrBE,EAAAA,CAAuB,MAAS,CAAA,CAChCE,EAAAA,CAAuB,IAAI,CAAA,CAC3BM,EAAAA,CAAmB,IAAI,CAAA,EAE3B,CAAA,CACF,CAAA,CACF,CAAA,CACA34D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,wDAAA,CAA0D+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACzH,QAAA,CAAA,CAAApC,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClB82D,CAAAA,CAA6B,CAACD,EAAyB,CAAA,CACvDG,EAAAA,CAA6B,KAAK,EACpC,CAAA,CACA,SAAA,CAAWpiE,CAAAA,CACT,+BAAA,CACA6hE,EAAAA,CACIA,EAAAA,GAAwB,QAAA,EAAYA,EAAAA,GAAwB,MAAA,CAC1D,4BAAA,CACAA,EAAAA,GAAwB,QAAA,CACtB,kCAAA,CACA,gCAAA,CACJ91D,CAAAA,CAAS,kCAAA,CAAqC,iCACpD,CAAA,CAEA,QAAA,CAAAtD,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAChC,CAAA,CAEA9Z,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAupD,EAAAA,EACCx5D,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,EAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,4FAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CACA,OAAA,CAAUX,EAAAA,EAAMA,EAAAA,CAAE,eAAA,EAAgB,CAEjC,QAAA,CAAA,CACC,CAAE,EAAA,CAAI,QAAA,CAAU,KAAA,CAAO6L,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,QAAA,CAAU,KAAA,CAAO,YAAa,CAAA,CACnF,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CAAQ,KAAA,CAAO,eAAgB,CAAA,CAC/E,CAAE,EAAA,CAAI,QAAA,CAAU,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAA,CAAU,KAAA,CAAO,eAAgB,EACpF,CAAE,EAAA,CAAI,KAAA,CAAO,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,KAAA,CAAO,KAAA,CAAO,cAAe,CAAA,CAC5E,CAAE,EAAA,CAAI,MAAA,CAAW,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAAe,KAAA,CAAO,aAAc,CAClG,CAAA,CAAE,GAAA,CAAKpN,EAAAA,EACLF,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbm4D,EAAAA,CAAuBj4D,EAAAA,CAAS,EAAsB,CAAA,CACtDq4D,CAAAA,CAA6B,KAAK,EACpC,CAAA,CACA,SAAA,CAAWliE,CAAAA,CACT,gFAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B81D,EAAAA,GAAwBh4D,EAAAA,CAAS,EAAA,GAAOkC,CAAAA,CAAS,YAAA,CAAe,YAAA,CAClE,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,sBAAA,CAAwB6J,EAAAA,CAAS,KAAK,CAAA,CAAG,CAAA,CAC7DpB,GAAAA,CAAC,QAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAAlC,EAAAA,CAAS,KAAA,CAAM,CAAA,CAAA,CAAA,CAZrEA,EAAAA,CAAS,EAAA,EAAM,MAatB,CACD,CAAA,CACH,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAUyB,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClBo3D,EAAAA,CAAuB,CAACD,EAAmB,CAAA,CAC3CL,CAAAA,CAA6B,KAAK,CAAA,CAClCE,EAAAA,CAA6B,KAAK,CAAA,CAClCM,CAAAA,CAAwBL,EAAAA,EAAmB91D,CAAAA,CAAI,IAAI,EACrD,CAAA,CACA,SAAA,CAAWvM,CAAAA,CACT,yEAAA,CACAqiE,EAAAA,CACI,gCAAA,CACAt2D,CAAAA,CAAS,6CAAA,CAAgD,6CAC/D,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACgZ,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CAAA,CAChC4gD,EAAAA,EAAmB91D,EAAI,IAAA,EAAM,kBAAA,CAAmB0K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAA,CAAA,CAC3H,CAAA,CAEAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA6pD,EAAAA,EACC54D,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,oFAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CACA,OAAA,CAAUX,EAAAA,EAAMA,EAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAA3C,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,oBAAA,CAAsB+L,EAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACnF,QAAA,CAAA,CAAA,IAAM,CACN,IAAMqB,EAAAA,CAAQ,IAAI,IAAA,CACZsU,EAAAA,CAAW,IAAI,IAAA,CAAKtU,EAAK,CAAA,CAAGsU,EAAAA,CAAS,OAAA,CAAQtU,EAAAA,CAAM,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtE,IAAMuU,EAAAA,CAAe,IAAI,IAAA,CAAKvU,EAAK,CAAA,CAAGuU,EAAAA,CAAa,OAAA,CAAQvU,EAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,CAAA,CAAIA,EAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAChH,IAAMwU,EAAAA,CAAa,IAAI,IAAA,CAAKxU,EAAK,CAAA,CAAGwU,EAAAA,CAAW,OAAA,CAAQxU,EAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,CAAA,CAAIA,EAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAC5G,IAAM0U,EAAAA,CAAW,IAAI,KAAK1U,EAAK,CAAA,CAAG0U,EAAAA,CAAS,OAAA,CAAQ1U,EAAAA,CAAM,OAAA,EAAQ,CAAI,EAAE,CAAA,CACvE,IAAM2U,EAAAA,CAAY,IAAI,IAAA,CAAK3U,EAAK,CAAA,CAAG,OAAA2U,EAAAA,CAAU,OAAA,CAAQ3U,EAAAA,CAAM,OAAA,EAAQ,CAAI,EAAE,CAAA,CAEpD,CACnB,CAAE,KAAA,CAAO6J,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAAS,IAAA,CAAM7J,EAAAA,CAAO,OAAA,CAASA,EAAAA,CAAM,kBAAA,CAAmB6J,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACxK,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAW,UAAA,CAAY,IAAA,CAAMyK,EAAAA,CAAU,OAAA,CAASA,EAAAA,CAAS,kBAAA,CAAmBzK,CAAAA,GAAW,KAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACpL,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,oBAAA,CAAuB,cAAA,CAAgB,IAAA,CAAM0K,EAAAA,CAAc,OAAA,CAAS1K,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAS,MAAO,CAAA,CACjI,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAmB,WAAA,CAAa,IAAA,CAAM2K,EAAAA,CAAY,OAAA,CAAS3K,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAO,CAAA,CACxH,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,SAAA,CAAW,IAAA,CAAM6K,EAAAA,CAAU,OAAA,CAASA,EAAAA,CAAS,kBAAA,CAAmB7K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CAAA,CAClL,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,SAAA,CAAW,IAAA,CAAM8K,EAAAA,CAAW,OAAA,CAASA,EAAAA,CAAU,kBAAA,CAAmB9K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CACtL,CAAA,CAEoB,GAAA,CAAI,CAAC5J,EAAAA,CAAQ3M,EAAAA,GAC/BiJ,IAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,gFAAA,CACA+L,CAAAA,CAAS,6BAAA,CAAgC,gCAC3C,CAAA,CACA,OAAA,CAAS,IAAM,CACbu2D,EAAAA,CAAmBj1D,EAAAA,CAAO,IAAI,CAAA,CAC9Bm1D,EAAAA,CAAuB,KAAK,EAC9B,CAAA,CAEA,QAAA,CAAA,CAAA/5D,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA4E,EAAAA,CAAO,KAAA,CAAM,CAAA,CACpB5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CAC3E,QAAA,CAAAsB,EAAAA,CAAO,OAAA,CACV,CAAA,CAAA,CAAA,CAbK3M,EAcP,CACD,CACH,CAAA,GAAG,CACL,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,qBAAA,CAAuB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAA02D,EAAAA,CAAqB,kBAAA,CAAmBxrD,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,KAAA,CAAO,MAAA,CAAQ,IAAA,CAAM,SAAU,CAAC,CAAA,CAClH,CAAA,CACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMi6D,CAAAA,CAAwB,IAAI,IAAM,CAAA,CACjD,SAAA,CAAW1iE,CAAAA,CACT,qDAAA,CACA+L,EAAS,kCAAA,CAAqC,iCAChD,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAC7B,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMi6D,CAAAA,CAAwB,IAAI,IAAA,CAAKD,EAAAA,CAAqB,WAAA,EAAY,CAAGA,EAAAA,CAAqB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACxH,SAAA,CAAWziE,CAAAA,CAAG,eAAA,CAAiB+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAEjF,QAAA,CAAAtD,GAAAA,CAAC2oC,WAAAA,CAAA,CAAY,SAAA,CAAU,aAAA,CAAc,CAAA,CACvC,CAAA,CACA3oC,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMi6D,CAAAA,CAAwB,IAAI,IAAA,CAAKD,EAAAA,CAAqB,WAAA,EAAY,CAAGA,EAAAA,CAAqB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACxH,SAAA,CAAWziE,CAAAA,CAAG,eAAA,CAAiB+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,EAEjF,QAAA,CAAAtD,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAU,aAAA,CAAc,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAp9B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACX,QAAA,CAAA,CAAAwO,CAAAA,GAAW,IAAA,CACT,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,OAAI,CAAA,CACzC,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAI,CAAA,EAC3C,GAAA,CAAKxI,EAAAA,EACLhG,GAAAA,CAAC,KAAA,CAAA,CAAY,SAAA,CAAWzI,CAAAA,CAAG,sDAAA,CAAwD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC3H,QAAA,CAAA0C,EAAAA,CAAAA,CADOA,EAEV,CACD,CAAA,CACH,CAAA,CAGAhG,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACX,QAAA,CAAA,CAAA,IAAM,CACN,IAAM4D,EAAAA,CAAOo2D,EAAAA,CAAqB,WAAA,GAC5Bn2D,EAAAA,CAAQm2D,EAAAA,CAAqB,QAAA,EAAS,CACtC3iD,EAAAA,CAAW,IAAI,IAAA,CAAKzT,EAAAA,CAAMC,EAAAA,CAAO,CAAC,CAAA,CAAE,MAAA,EAAO,CAC3CyT,EAAAA,CAAc,IAAI,IAAA,CAAK1T,EAAAA,CAAMC,EAAAA,CAAQ,CAAA,CAAG,CAAC,CAAA,CAAE,OAAA,EAAQ,CACnDs3D,EAAAA,CAAkB,IAAI,IAAA,CAAKv3D,EAAAA,CAAMC,EAAAA,CAAO,CAAC,CAAA,CAAE,OAAA,EAAQ,CACnDu3D,EAAAA,CAAY,IAAI,IAAA,CAChBC,EAAAA,CAAU,EAAC,CAGjB,IAAA,IAASpjE,EAAAA,CAAIof,EAAAA,CAAW,CAAA,CAAGpf,EAAAA,EAAK,CAAA,CAAGA,EAAAA,EAAAA,CACjCojE,EAAAA,CAAQ,IAAA,CAAK,CAAE,MAAA,CAAQF,EAAAA,CAAkBljE,EAAAA,CAAG,cAAA,CAAgB,KAAA,CAAO,IAAA,CAAM,IAAI,IAAA,CAAK2L,EAAAA,CAAMC,EAAAA,CAAQ,CAAA,CAAGs3D,EAAAA,CAAkBljE,EAAC,CAAE,CAAC,CAAA,CAG3H,IAAA,IAASA,EAAAA,CAAI,CAAA,CAAGA,EAAAA,EAAKqf,EAAAA,CAAarf,EAAAA,EAAAA,CAChCojE,EAAAA,CAAQ,IAAA,CAAK,CAAE,MAAA,CAAQpjE,EAAAA,CAAG,cAAA,CAAgB,IAAA,CAAM,IAAA,CAAM,IAAI,IAAA,CAAK2L,EAAAA,CAAMC,EAAAA,CAAO5L,EAAC,CAAE,CAAC,CAAA,CAGlF,IAAM4wC,EAAAA,CAAY,EAAA,CAAKwyB,EAAAA,CAAQ,MAAA,CAC/B,IAAA,IAASpjE,EAAAA,CAAI,CAAA,CAAGA,EAAAA,EAAK4wC,EAAAA,CAAW5wC,EAAAA,EAAAA,CAC9BojE,EAAAA,CAAQ,IAAA,CAAK,CAAE,MAAA,CAAQpjE,EAAAA,CAAG,cAAA,CAAgB,KAAA,CAAO,IAAA,CAAM,IAAI,IAAA,CAAK2L,EAAAA,CAAMC,EAAAA,CAAQ,CAAA,CAAG5L,EAAC,CAAE,CAAC,CAAA,CAGvF,OAAOojE,EAAAA,CAAQ,GAAA,CAAI,CAACr1D,EAAAA,CAAG/N,EAAAA,GAAM,CAC3B,IAAMwhB,EAAAA,CAAUzT,EAAAA,CAAE,IAAA,CAAK,cAAa,GAAMo1D,EAAAA,CAAU,YAAA,EAAa,CAC3DhzD,EAAAA,CAAAA,CAAcwxD,EAAAA,EAAmB91D,CAAAA,CAAI,IAAA,EAAM,YAAA,EAAa,GAAMkC,EAAAA,CAAE,IAAA,CAAK,YAAA,EAAa,CAExF,OACEhG,GAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,qFAAA,CACA,CAACyO,EAAAA,CAAE,cAAA,GAAmB1C,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAAA,CAClD0C,EAAAA,CAAE,cAAA,GAAmB1C,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAA,CAC7CmW,EAAAA,EAAW,uBAAA,CACXrR,EAAAA,EAAc,yBAAA,CACd,CAACA,EAAAA,GAAe9E,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CACjD,CAAA,CACA,OAAA,CAAS,IAAM,CACbu2D,EAAAA,CAAmB7zD,EAAAA,CAAE,IAAI,CAAA,CACzB+zD,EAAAA,CAAuB,KAAK,EAC9B,CAAA,CAEC,QAAA,CAAA/zD,EAAAA,CAAE,MAAA,CAAA,CAdE/N,EAeP,CAEJ,CAAC,CACH,CAAA,GAAG,CACL,CAAA,CAAA,CACF,GACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,UAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAU2C,EAAAA,EAAM,CACdA,EAAAA,CAAE,eAAA,EAAgB,CAClBg3D,EAAAA,CAA6B,CAACD,EAAyB,CAAA,CACvDD,CAAAA,CAA6B,KAAK,EACpC,CAAA,CACA,SAAA,CAAWliE,CAAAA,CACT,+BAAA,CACA+hE,EAAAA,CACI,gCAAA,CACAh2D,CAAAA,CAAS,kCAAA,CAAqC,iCACpD,CAAA,CAEC,QAAA,CAAAg2D,EAAAA,CACCt5D,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,yFAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBiD,CAAAA,CAAO,cAAA,EAAgB,IAAA,CAAKqC,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOg0D,EAAmB,CAAA,EAAG,KAAA,EAAS,SAAU,CAAA,CAE5G,QAAA,CAAAr2D,CAAAA,CAAO,cAAA,EAAgB,IAAA,CAAKqC,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOg0D,EAAmB,CAAA,EAAG,UAChEr2D,CAAAA,CAAO,cAAA,EAAgB,IAAA,CAAKqC,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOg0D,EAAmB,CAAA,EAAG,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,CACjG,CAAA,CAEAt5D,GAAAA,CAAC4Y,IAAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAElC,CAAA,CAEA5Y,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAypD,EAAAA,EACCx4D,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,0HAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CACA,OAAA,CAAUX,EAAAA,EAAMA,GAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbq4D,EAAAA,CAAuB,IAAI,CAAA,CAC3BI,EAAAA,CAA6B,KAAK,EACpC,CAAA,CACA,SAAA,CAAWpiE,CAAAA,CACT,gFAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B,CAACg2D,EAAAA,GAAwBh2D,CAAAA,CAAS,YAAA,CAAe,YAAA,CACnD,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,uDAAA,CAAyD+L,CAAAA,CAAS,aAAA,CAAgB,aAAa,CAAA,CAChH,QAAA,CAAAtD,GAAAA,CAAC4Y,IAAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAwB,CAAA,CAC1C,CAAA,CACA5Y,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAC1C,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,YAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAECvL,CAAAA,CAAO,cAAA,EAAgB,GAAA,CAAKmC,EAAAA,EAC3BlE,KAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbq4D,EAAAA,CAAuBn0D,EAAAA,CAAK,EAAE,CAAA,CAC9Bu0D,EAAAA,CAA6B,KAAK,EACpC,CAAA,CACA,SAAA,CAAWpiE,CAAAA,CACT,gFAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9Bg2D,EAAAA,GAAwBl0D,EAAAA,CAAK,EAAA,GAAO9B,CAAAA,CAAS,YAAA,CAAe,YAAA,CAC9D,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,yFAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBoF,EAAAA,CAAK,KAAA,EAAS,SAAU,CAAA,CAEjD,QAAA,CAAAA,EAAAA,CAAK,QAAA,EAAYA,EAAAA,CAAK,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,CACvD,CAAA,CACApF,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAA8B,EAAAA,CAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAjBhEA,EAAAA,CAAK,EAkBZ,CACD,GACC,CAACnC,CAAAA,CAAO,cAAA,EAAkBA,CAAAA,CAAO,cAAA,CAAe,MAAA,GAAW,CAAA,GAC3DjD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAChF,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAAgC,oBAAA,CACrD,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb,GAAIk5D,EAAAA,CAAgB,IAAA,EAAK,CAAG,CAE1B,IAAMrpD,EAAAA,CAAe5M,CAAAA,CAAO,cAAA,EAAgB,IAAA,CAAKqC,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOg0D,EAAmB,CAAA,CAC5E4B,EAAAA,CAAWtB,EAAAA,EAAmB91D,CAAAA,CAAI,IAAA,CACxC0X,CAAAA,CAAU,YAAA,GAAe,CACvB,IAAA,CAAM09C,EAAAA,CAAgB,IAAA,EAAK,CAC3B,SAAA,CAAWgC,EAAAA,CACX,OAAA,CAASA,EAAAA,CACT,QAAA,CAAU9B,GACV,SAAA,CAAWvpD,EAAAA,CAAe,CAACA,EAAY,CAAA,CAAI,MAC7C,CAAC,CAAA,CACDspD,EAAAA,CAAmB,EAAE,CAAA,CACrBE,EAAAA,CAAuB,MAAS,CAAA,CAChCE,EAAAA,CAAuB,IAAI,CAAA,CAC3BM,EAAAA,CAAmB,IAAI,CAAA,CACvBZ,EAAAA,CAAmB,IAAI,EACzB,CACF,CAAA,CACA,QAAA,CAAU,CAACC,EAAAA,CAAgB,IAAA,EAAK,CAChC,SAAA,CAAW3hE,CAAAA,CACT,2DAAA,CACA2hE,EAAAA,CAAgB,IAAA,EAAK,CACjB,4CAAA,CACA51D,CAAAA,CAAS,2BAAA,CAA8B,2BAC7C,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,MAAA,CACjC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAEJ,CAAA,GAAG,CAGHxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,qBAAA,CACAuM,CAAAA,CAAI,OAAA,CACA,gBAAA,CACAA,EAAI,cAAA,CACDR,CAAAA,CAAS,YAAA,CAAe,eAAA,CACxBA,CAAAA,CAAS,gBAAA,CAAmB,eACrC,CAAA,CACG,QAAA,CAAAQ,CAAAA,CAAI,IAAA,CAAK,OAAA,EAAQ,CACpB,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CApkBKnF,CAqkBP,CAEF,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGAqB,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA8D,CAAAA,EACC7S,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,IAAA,CAAM,CAAE,OAAA,CAAS,CAAE,CAAA,CACnB,OAAA,CAAS,IAAM,CAAE8D,CAAAA,CAAgB,IAAI,CAAA,CAAG8B,EAAAA,CAAe,EAAE,EAAG,CAAA,CAC5D,SAAA,CAAU,gCAAA,CACZ,EAEA5U,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CACnC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAE,CAAA,CAChC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAK,CAAA,CAChC,SAAA,CAAW3Y,CAAAA,CACT,sFAAA,CACA+L,CAAAA,CAAS,cAAA,CAAiB,UAC5B,CAAA,CAGA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sCAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,4CAAA,CAA8C+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CAC7G,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACsY,MAAAA,CAAA,CAAO,SAAA,CAAW/gB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,EAAG,CAAA,CAC/EpC,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,6BAAA,CAA+B+L,CAAAA,CAAS,4BAAA,CAA+B,2BAA2B,CAAA,CACnH,QAAA,CAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,MAAA,CAAO,SAAA,CAAA,CACtC,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACjF,QAAA,CAAAyQ,CAAAA,CAAa,EAAA,CAAG,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAC7B,CAAA,CACA7S,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,mFAAA,CACA+L,CAAAA,CAAS,yDAAA,CAA4D,mDACvE,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACuY,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CAAE,QAAA,CAAA,CAElC,CAAA,CAAA,CACF,CAAA,CACAvY,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CAAS,CAAA,CACxBA,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CAAG,kCAAmC+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CAEhI,QAAA,CAAAtD,GAAAA,CAACwY,SAAAA,CAAA,CAAU,SAAA,CAAU,SAAA,CAAU,CAAA,CACjC,CAAA,CACAxY,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CAAG,iCAAA,CAAmC+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CAEhI,QAAA,CAAAtD,GAAAA,CAACyY,cAAAA,CAAA,CAAe,SAAA,CAAU,SAAA,CAAU,CAAA,CACtC,CAAA,CACAzY,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CAAEgU,CAAAA,CAAgB,IAAI,CAAA,CAAG8B,EAAAA,CAAe,EAAE,EAAG,CAAA,CAC5D,SAAA,CAAWve,CAAAA,CAAG,iCAAA,CAAmC+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CAEhI,QAAA,CAAAtD,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,CAAA,CAAA,CACF,CAAA,CAGAhS,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAAkB,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb,IAAM0Y,CAAAA,CAAc3E,CAAAA,CAAa,QAAA,GAAa,GAAA,CAAM,CAAA,CAAI,GAAA,CAElDoC,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,QAAA,CAAU2E,CAAAA,CAAa,MAAA,CAD5CA,CAAAA,GAAgB,GAAA,CAAM,WAAA,CAAc,MAC0B,CAAA,CAChF1E,CAAAA,CAAgBmC,EAAW,CAAA,CAC3BqF,CAAAA,CAAU,YAAA,GAAerF,EAAW,EACtC,CAAA,CACA,SAAA,CAAW5e,CAAAA,CACT,uFAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,GAAA,CACtB,+BAAA,CACAzQ,CAAAA,CAAS,uCAAA,CAA0C,uCACzD,CAAA,CAEC,QAAA,CAAAyQ,CAAAA,CAAa,QAAA,GAAa,GAAA,EACzB/T,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAEjD,CAAA,CACA3Y,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CACb,+BACAwc,CAAAA,CAAa,QAAA,GAAa,GAAA,CAAM,6BAAA,CAAiCzQ,CAAAA,CAAS,YAAA,CAAe,eAC3F,CAAA,CACG,QAAA,CAAAyQ,CAAAA,CAAa,IAAA,CAChB,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAGA7S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qDAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAWphB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,QAAA,CAChC,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACboW,CAAAA,EAAkB,CAClBlC,EAAsB,CAACD,EAAkB,EAC3C,CAAA,CACA,SAAA,CAAW1c,CAAAA,CACT,sGAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,GAAA,EAAOA,CAAAA,CAAa,MAAA,GAAW,WAAA,CACrD,gCAAA,CACCA,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAW,CAAA,EAAMA,CAAAA,CAAa,MAAA,GAAW,aAAA,CAC9E,8BAAA,CACAzQ,CAAAA,CAAS,wBAAA,CAA2B,2BAC5C,CAAA,CAEC,QAAA,CAAAyQ,CAAAA,CAAa,QAAA,GAAa,GAAA,EAAOA,CAAAA,CAAa,MAAA,GAAW,WAAA,CACrDvF,CAAAA,GAAW,IAAA,CAAO,YAAA,CAAe,MAAA,CACjCuF,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAW,CAAA,EAAMA,CAAAA,CAAa,MAAA,GAAW,aAAA,CAC7EvF,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,aAAA,CAClCA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,OAAA,CACzC,CAAA,CAEAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAgE,EAAAA,EACC/S,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,OAAA,CAAS,IAAMkU,CAAAA,CAAsB,KAAK,CAAA,CAC5C,CAAA,CACAlU,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,wFAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAA,CACC,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,OAAA,CAAS,KAAA,CAAO,wBAAyB,CAAA,CAC9F,CAAE,EAAA,CAAI,aAAA,CAAe,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,cAAe,KAAA,CAAO,8BAA+B,CAAA,CACnH,CAAE,EAAA,CAAI,WAAA,CAAa,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,YAAA,CAAe,MAAA,CAAQ,KAAA,CAAO,gCAAiC,CAC7G,CAAA,CAAE,GAAA,CAAK9V,CAAAA,EACLwI,IAAAA,CAAC,QAAA,CAAA,CAED,OAAA,CAAS,IAAM8V,EAAAA,CAAiBte,CAAAA,CAAO,EAAE,CAAA,CACzC,SAAA,CAAWnB,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAAA,CAC7ByQ,CAAAA,CAAa,MAAA,GAAWrb,CAAAA,CAAO,EAAA,EAC9BA,CAAAA,CAAO,EAAA,GAAO,WAAA,EAAeqb,CAAAA,CAAa,QAAA,GAAa,GAAA,EACvDrb,CAAAA,CAAO,EAAA,GAAO,aAAA,EAAiBqb,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAW,CAAA,EAAKA,CAAAA,CAAa,QAAA,CAAW,GAAA,EAC7Grb,CAAAA,CAAO,EAAA,GAAO,MAAA,GAAW,CAACqb,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,GAAa,CAAA,CAAA,EAAMA,CAAAA,CAAa,SAAW,aAAA,EAAiBA,CAAAA,CAAa,MAAA,GAAW,WAAA,IAChJzQ,CAAAA,CAAS,YAAA,CAAe,YAAA,CAChC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,sBAAA,CAClBmB,CAAAA,CAAO,EAAA,GAAO,WAAA,CAAc,cAAA,CAC5BA,CAAAA,CAAO,EAAA,GAAO,aAAA,CAAgB,aAAA,CAC9B,aACF,CAAA,CAAG,CAAA,CACHsH,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAA5K,CAAAA,CAAO,KAAA,CAAM,CAAA,CAAA,CAAA,CAjBnEA,CAAAA,CAAO,EAkBd,CACD,CAAA,CACD,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAwI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC4Y,IAAAA,CAAA,CAAK,SAAA,CAAWrhB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC7EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,EAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,WAAA,CACnC,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbgT,CAAAA,CAAsB,KAAK,CAAA,CAC3BE,CAAAA,CAAwB,KAAK,CAAA,CAC7BI,CAAAA,CAAkB,IAAI,CAAA,CACtBF,CAAAA,CAAyB,CAACD,CAAqB,EACjD,CAAA,CACA,SAAA,CAAW9c,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEC,QAAA,CAAA,CAAAyQ,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,SAAA,CAAU,MAAA,CAAS,CAAA,CACzD7S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACZ,QAAA,CAAA,CAAA6S,CAAAA,CAAa,SAAA,CAAU,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,GAAA,CAAI,CAAC8E,CAAAA,CAAU5gB,CAAAA,GACjD+H,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,uFACV,KAAA,CAAO,CAAE,eAAA,CAAiB6Y,CAAAA,CAAS,KAAA,EAAS,SAAU,CAAA,CACtD,KAAA,CAAOA,CAAAA,CAAS,IAAA,CAEf,QAAA,CAAAA,CAAAA,CAAS,QAAA,EAAYA,CAAAA,CAAS,IAAA,CAAK,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,CAAA,CALvD5gB,CAMP,CACD,CAAA,CACA8b,CAAAA,CAAa,SAAA,CAAU,MAAA,CAAS,CAAA,EAC/B7S,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CACzEyQ,CAAAA,CAAa,SAAA,CAAU,MAAA,CAAS,CAAA,CAAA,CACpC,CAAA,CAAA,CAEJ,CAAA,CAEA/T,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,KAAA,CACjC,CAAA,CAEFxO,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,UAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,CAAA,CAGAtD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAoE,CAAAA,EACCnT,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,OAAA,CAAS,IAAMsU,CAAAA,CAAyB,KAAK,CAAA,CAC/C,CAAA,CACAtU,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,sHAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAAL,CAAAA,CAAO,cAAA,EAAkBA,EAAO,cAAA,CAAe,MAAA,CAAS,CAAA,CACvDA,CAAAA,CAAO,cAAA,CAAe,GAAA,CAAKmC,CAAAA,EAAS,CAClC,IAAMgD,CAAAA,CAAa2L,CAAAA,CAAa,SAAA,EAAW,IAAA,CAAKhB,EAAAA,EAAKA,EAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAA,CACzE,OACElE,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACb,IAAM4X,EAAAA,CAAmB/E,CAAAA,CAAa,SAAA,EAAa,EAAC,CAChDgF,EAAAA,CACA3Q,CAAAA,CACF2Q,EAAAA,CAAeD,EAAAA,CAAiB,MAAA,CAAO/F,EAAAA,EAAKA,EAAAA,CAAE,IAAA,GAAS3N,CAAAA,CAAK,IAAI,CAAA,CAEhE2T,EAAAA,CAAe,CAAC,GAAGD,EAAAA,CAAkB,CACnC,IAAA,CAAM1T,CAAAA,CAAK,IAAA,CACX,MAAA,CAAQA,CAAAA,CAAK,MAAA,CACb,QAAA,CAAUA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,aAAY,CAC7D,KAAA,CAAOA,CAAAA,CAAK,KAAA,EAAS,SACvB,CAAC,CAAA,CAEHiR,EAAAA,CAAgB,WAAA,CAAa0C,EAAY,EAC3C,CAAA,CACA,SAAA,CAAWxhB,CAAAA,CACT,oEAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B8E,CAAAA,GAAe9E,CAAAA,CAAS,YAAA,CAAe,YAAA,CACzC,CAAA,CAEC,QAAA,CAAA,CAAA8B,CAAAA,CAAK,MAAA,CACJpF,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKoF,CAAAA,CAAK,MAAA,CACV,GAAA,CAAKA,CAAAA,CAAK,IAAA,CACV,SAAA,CAAU,mCAAA,CACZ,CAAA,CAEApF,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sFAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiBoF,CAAAA,CAAK,KAAA,EAAS,SAAU,CAAA,CAEjD,QAAA,CAAAA,CAAAA,CAAK,QAAA,EAAYA,CAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,CACtD,CAAA,CAEFpF,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,kBAAA,CAAoB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC5E,QAAA,CAAA8B,CAAAA,CAAK,IAAA,CACR,CAAA,CACCgD,CAAAA,EAAcpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,wBAAA,CAAyB,CAAA,CAAA,CAAA,CAvCpD7M,CAAAA,CAAK,EAAA,EAAMA,CAAAA,CAAK,IAwCvB,CAEJ,CAAC,CAAA,CAEDpF,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5F,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAAgC,oBAAA,CACrD,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACgZ,YAAAA,CAAA,CAAa,SAAA,CAAWzhB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,EAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,OAAA,CAChC,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbsT,CAAAA,CAAkBD,CAAAA,CAAiB,IAAA,CAAO,OAAO,CAAA,CACjDG,EAAAA,CAAmBX,CAAAA,CAAa,SAAA,EAAa,IAAI,IAAM,EACzD,CAAA,CACA,SAAA,CAAWxc,CAAAA,CACT,2EACA+L,CAAAA,CAAS,yCAAA,CAA4C,6CACvD,CAAA,CAEC,QAAA,CAAA,CAAAyQ,CAAAA,CAAa,SAAA,EAAW,kBAAA,CAAmBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,KAAA,CAAO,OAAA,CAAS,GAAA,CAAK,SAAU,CAAC,CAAA,GAAMA,CAAAA,GAAW,IAAA,CAAO,QAAA,CAAW,OAAA,CAAA,CACtJxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,MAAA,CAAQ+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,QAAA,CAAC,CAAA,CAC1EyQ,CAAAA,CAAa,OAAA,EAAS,kBAAA,CAAmBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,KAAA,CAAO,OAAA,CAAS,GAAA,CAAK,SAAU,CAAC,CAAA,GAAMA,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,KAAA,CAAA,CAAA,CAC/IuF,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,OAAA,GACvC/T,GAAAA,CAACgS,CAAAA,CAAA,CACC,SAAA,CAAU,+CAAA,CACV,OAAA,CAAUrP,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,GAEJ,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGA3C,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAsE,CAAAA,EACCrT,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,OAAA,CAAS,IAAMwU,CAAAA,CAAkB,IAAI,CAAA,CACvC,CAAA,CACAtT,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,QAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC9B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,GAAI,CAAA,CAC3B,SAAA,CAAW3Y,CAAAA,CACT,+EAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CACA,OAAA,CAAUX,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGpC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACnF,QAAA,CAAA,CAAA,CAAA,IAAM,CACN,IAAMqB,CAAAA,CAAQ,IAAI,IAAA,CACZsU,CAAAA,CAAW,IAAI,IAAA,CAAKtU,CAAK,CAAA,CAAGsU,CAAAA,CAAS,OAAA,CAAQtU,CAAAA,CAAM,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtE,IAAMuU,EAAAA,CAAe,IAAI,IAAA,CAAKvU,CAAK,CAAA,CAAGuU,EAAAA,CAAa,OAAA,CAAQvU,CAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,CAAA,CAAIA,CAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAChH,IAAMwU,EAAAA,CAAa,IAAI,IAAA,CAAKxU,CAAK,CAAA,CAAGwU,EAAAA,CAAW,OAAA,CAAQxU,CAAAA,CAAM,OAAA,EAAQ,EAAA,CAAM,CAAA,CAAIA,CAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,EAAK,CAAA,CAAE,CAAA,CAC5G,IAAMyU,EAAAA,CAAc,IAAI,IAAA,CAAKzU,CAAK,CAAA,CAAGyU,EAAAA,CAAY,OAAA,CAAQzU,CAAAA,CAAM,OAAA,EAAQ,CAAA,CAAM,CAAA,CAAIA,CAAAA,CAAM,MAAA,EAAO,CAAI,CAAA,EAAK,CAAA,CAAK,CAAC,CAAA,CAC7G,IAAM0U,EAAAA,CAAW,IAAI,IAAA,CAAK1U,CAAK,CAAA,CAAG0U,EAAAA,CAAS,OAAA,CAAQ1U,EAAM,OAAA,EAAQ,CAAI,EAAE,CAAA,CACvE,IAAM2U,EAAAA,CAAY,IAAI,IAAA,CAAK3U,CAAK,CAAA,CAAG,OAAA2U,EAAAA,CAAU,OAAA,CAAQ3U,CAAAA,CAAM,OAAA,EAAQ,CAAI,EAAE,CAAA,CAEpD,CACnB,CAAE,KAAA,CAAO6J,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAAS,IAAA,CAAM7J,CAAAA,CAAO,OAAA,CAASA,CAAAA,CAAM,kBAAA,CAAmB6J,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACxK,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAW,UAAA,CAAY,IAAA,CAAMyK,CAAAA,CAAU,OAAA,CAASA,CAAAA,CAAS,kBAAA,CAAmBzK,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,OAAA,CAAS,OAAQ,CAAC,CAAA,CAAE,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAI,GAAI,CAAA,CACpL,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,oBAAA,CAAuB,cAAA,CAAgB,IAAA,CAAM0K,EAAAA,CAAc,OAAA,CAAS1K,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAS,MAAO,CAAA,CACjI,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAmB,WAAA,CAAa,IAAA,CAAM2K,EAAAA,CAAY,OAAA,CAAS3K,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAO,CAAA,CACxH,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,0BAAA,CAA0B,cAAA,CAAgB,IAAA,CAAM4K,EAAAA,CAAa,OAAA,CAASA,EAAAA,CAAY,kBAAA,CAAmB5K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CAAA,CACzM,CAAE,KAAA,CAAOA,CAAAA,GAAW,KAAO,WAAA,CAAc,SAAA,CAAW,IAAA,CAAM6K,EAAAA,CAAU,OAAA,CAASA,EAAAA,CAAS,kBAAA,CAAmB7K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CAAA,CAClL,CAAE,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,SAAA,CAAW,IAAA,CAAM8K,EAAAA,CAAW,OAAA,CAASA,EAAAA,CAAU,kBAAA,CAAmB9K,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,GAAA,CAAK,SAAA,CAAW,KAAA,CAAO,OAAQ,CAAC,CAAE,CACtL,CAAA,CAEoB,GAAA,CAAI,CAAC5J,EAAAA,CAAQ3M,EAAAA,GAC/BiJ,IAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,6BAAA,CAAgC,gCAC3C,CAAA,CACA,OAAA,CAAS,IAAM,CAEb,GAAIiR,CAAAA,GAAmB,OAAA,CAAS,CAC9B,IAAMgF,EAAAA,CAAaxF,CAAAA,CAAa,OAAA,EAAWnP,EAAAA,CAAO,IAAA,CAAOmP,CAAAA,CAAa,OAAA,CAClEnP,EAAAA,CAAO,IAAA,CACPmP,CAAAA,CAAa,OAAA,CACjBoD,EAAAA,CAAgBvS,EAAAA,CAAO,IAAA,CAAM2U,EAAU,CAAA,CACvC/E,CAAAA,CAAkB,KAAK,EACzB,CAAA,KAAO,CACL,IAAMgF,EAAAA,CAAezF,CAAAA,CAAa,SAAA,EAAanP,EAAAA,CAAO,IAAA,CAAOmP,CAAAA,CAAa,SAAA,CACtEnP,EAAAA,CAAO,IAAA,CACPmP,CAAAA,CAAa,SAAA,CACjBoD,EAAAA,CAAgBqC,EAAAA,CAAc5U,EAAAA,CAAO,IAAI,CAAA,CACzC4P,CAAAA,CAAkB,IAAI,EACxB,CACF,CAAA,CAEA,QAAA,CAAA,CAAAxU,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA4E,EAAAA,CAAO,KAAA,CAAM,CAAA,CACpB5E,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAsB,EAAAA,CAAO,QACV,CAAA,CAAA,CAAA,CAzBK3M,EA0BP,CACD,CACH,CAAA,GAAG,CAEH+H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAApC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbiW,EAAAA,CAAgB,MAAA,CAAW,MAAS,CAAA,CACpC3C,CAAAA,CAAkB,IAAI,EACxB,CAAA,CACA,SAAA,CAAWjd,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,+BAAA,CAAkC,+BAC7C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAAwO,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAAc,CAAA,CACzDxO,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAAA,CACpC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGA9Q,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,KAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,EAAG,gCAAA,CAAkC+L,CAAAA,CAAS,2BAAA,CAA8B,2BAA2B,CAAA,CACpH,QAAA,CAAAiR,CAAAA,GAAmB,OAAA,CACf/F,CAAAA,GAAW,IAAA,CAAO,sCAAA,CAAkC,6BAAA,CACpDA,CAAAA,GAAW,IAAA,CAAO,mCAAA,CAA+B,2BAAA,CACxD,CAAA,CAEAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACvE,QAAA,CAAAmR,CAAAA,CAAgB,kBAAA,CAAmBjG,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,OAAA,CAAS,CAAE,KAAA,CAAO,MAAA,CAAQ,IAAA,CAAM,SAAU,CAAC,CAAA,CAC7G,CAAA,CACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM0U,EAAAA,CAAmB,IAAI,IAAM,CAAA,CAC5C,SAAA,CAAWnd,CAAAA,CACT,uCAAA,CACA+L,EAAS,8BAAA,CAAiC,iCAC5C,CAAA,CAEC,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,KAAA,CAAQ,OAAA,CAC7B,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM0U,EAAAA,CAAmB,IAAI,IAAA,CAAKD,CAAAA,CAAgB,WAAA,EAAY,CAAGA,CAAAA,CAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACzG,SAAA,CAAWld,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,CAAA,CAE/E,QAAA,CAAAtD,GAAAA,CAAC2oC,WAAAA,CAAA,CAAY,SAAA,CAAU,SAAA,CAAU,CAAA,CACnC,CAAA,CACA3oC,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM0U,EAAAA,CAAmB,IAAI,IAAA,CAAKD,CAAAA,CAAgB,WAAA,EAAY,CAAGA,CAAAA,CAAgB,QAAA,EAAS,CAAI,CAAC,CAAC,CAAA,CACzG,SAAA,CAAWld,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,mBAAA,CAAsB,mBAAmB,EAE/E,QAAA,CAAAtD,GAAAA,CAACo9B,YAAAA,CAAA,CAAa,SAAA,CAAU,SAAA,CAAU,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAp9B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACX,QAAA,CAAA,CAAAwO,CAAAA,GAAW,IAAA,CACT,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,OAAI,CAAA,CACzC,CAAC,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAA,CAAM,IAAI,CAAA,EAC3C,GAAA,CAAK1K,CAAAA,EACL9D,GAAAA,CAAC,KAAA,CAAA,CAAc,SAAA,CAAWzI,CAAAA,CAAG,kDAAA,CAAoD+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACzH,QAAA,CAAAQ,CAAAA,CAAAA,CADOA,CAEV,CACD,CAAA,CACH,CAAA,CAGA9D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACX,QAAA,CAAA,CAAA,IAAM,CACN,IAAM4D,CAAAA,CAAO6Q,CAAAA,CAAgB,WAAA,GACvB5Q,CAAAA,CAAQ4Q,CAAAA,CAAgB,QAAA,EAAS,CACjC4C,EAAAA,CAAW,IAAI,IAAA,CAAKzT,CAAAA,CAAMC,CAAAA,CAAO,CAAC,CAAA,CAAE,MAAA,EAAO,CAC3CyT,EAAAA,CAAc,IAAI,IAAA,CAAK1T,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAG,CAAC,CAAA,CAAE,OAAA,EAAQ,CACnDs3D,EAAAA,CAAkB,IAAI,IAAA,CAAKv3D,CAAAA,CAAMC,CAAAA,CAAO,CAAC,CAAA,CAAE,OAAA,EAAQ,CACnDc,EAAAA,CAAQ,IAAI,IAAA,CACZnB,EAAAA,CAAO,EAAC,CAGd,IAAA,IAASvL,EAAAA,CAAIof,EAAAA,CAAW,CAAA,CAAGpf,EAAAA,EAAK,CAAA,CAAGA,EAAAA,EAAAA,CACjCuL,EAAAA,CAAK,IAAA,CAAK,CAAE,GAAA,CAAK23D,EAAAA,CAAkBljE,EAAAA,CAAG,cAAA,CAAgB,KAAA,CAAO,IAAA,CAAM,IAAI,IAAA,CAAK2L,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAGs3D,EAAAA,CAAkBljE,EAAC,CAAE,CAAC,CAAA,CAGrH,IAAA,IAASA,EAAAA,CAAI,CAAA,CAAGA,EAAAA,EAAKqf,EAAAA,CAAarf,EAAAA,EAAAA,CAChCuL,EAAAA,CAAK,IAAA,CAAK,CAAE,GAAA,CAAKvL,EAAAA,CAAG,cAAA,CAAgB,IAAA,CAAM,IAAA,CAAM,IAAI,IAAA,CAAK2L,CAAAA,CAAMC,CAAAA,CAAO5L,EAAC,CAAE,CAAC,CAAA,CAG5E,IAAM4wC,EAAAA,CAAY,EAAA,CAAKrlC,EAAAA,CAAK,MAAA,CAC5B,IAAA,IAASvL,EAAAA,CAAI,CAAA,CAAGA,EAAAA,EAAK4wC,EAAAA,CAAW5wC,EAAAA,EAAAA,CAC9BuL,EAAAA,CAAK,IAAA,CAAK,CAAE,GAAA,CAAKvL,EAAAA,CAAG,cAAA,CAAgB,KAAA,CAAO,IAAA,CAAM,IAAI,IAAA,CAAK2L,CAAAA,CAAMC,CAAAA,CAAQ,CAAA,CAAG5L,EAAC,CAAE,CAAC,CAAA,CAGjF,OAAOuL,EAAAA,CAAK,GAAA,CAAI,CAACwC,EAAAA,CAAG/N,EAAAA,GAAM,CACxB,IAAMwhB,EAAAA,CAAUzT,EAAAA,CAAE,IAAA,CAAK,cAAa,GAAMrB,EAAAA,CAAM,YAAA,EAAa,CACvD+U,EAAAA,CAAc3F,CAAAA,CAAa,SAAA,EAAW,YAAA,EAAa,GAAM/N,EAAAA,CAAE,IAAA,CAAK,YAAA,EAAa,CAC7E2T,EAAAA,CAAY5F,CAAAA,CAAa,OAAA,EAAS,YAAA,EAAa,GAAM/N,EAAAA,CAAE,IAAA,CAAK,YAAA,EAAa,CACzEoC,EAAAA,CAAasR,EAAAA,EAAeC,EAAAA,CAC5BC,EAAAA,CAAY7F,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,OAAA,EACvC/N,EAAAA,CAAE,IAAA,EAAQ+N,CAAAA,CAAa,SAAA,EAAa/N,EAAAA,CAAE,IAAA,EAAQ+N,CAAAA,CAAa,OAAA,CAE7E,OACE/T,GAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,iFAAA,CACA,CAACyO,EAAAA,CAAE,cAAA,GAAmB1C,CAAAA,CAAS,gBAAA,CAAmB,eAAA,CAAA,CAClD0C,EAAAA,CAAE,cAAA,GAAmB1C,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAA,CAC7CmW,EAAAA,EAAW,uBAAA,CACXC,EAAAA,EAAe,yBAAA,CACfC,EAAAA,EAAa,CAACD,EAAAA,EAAe,0BAC7BE,EAAAA,EAAa,CAACxR,EAAAA,GAAe9E,CAAAA,CAAS,iBAAA,CAAoB,eAAA,CAAA,CAC1D,CAAC8E,EAAAA,GAAe9E,CAAAA,CAAS,mBAAA,CAAsB,mBAAA,CACjD,CAAA,CACA,OAAA,CAAS,IAAM,CAEb,IAAMuW,EAAAA,CAAc,IAAI,IAAA,CAAK7T,EAAAA,CAAE,IAAI,CAAA,CACnC,GAAIuO,CAAAA,GAAmB,OAAA,CAAS,CAE9B,IAAMgF,EAAAA,CAAaxF,CAAAA,CAAa,OAAA,EAAW8F,EAAAA,CAAc9F,CAAAA,CAAa,OAAA,CAClE8F,EAAAA,CACA9F,CAAAA,CAAa,OAAA,CACjBoD,EAAAA,CAAgB0C,EAAAA,CAAaN,EAAU,CAAA,CACvC/E,CAAAA,CAAkB,KAAK,EACzB,CAAA,KAAO,CAEL,IAAMgF,EAAAA,CAAezF,CAAAA,CAAa,SAAA,EAAa8F,EAAAA,CAAc9F,CAAAA,CAAa,SAAA,CACtE8F,EAAAA,CACA9F,CAAAA,CAAa,SAAA,CACjBoD,EAAAA,CAAgBqC,EAAAA,CAAcK,EAAW,CAAA,CACzCrF,CAAAA,CAAkB,IAAI,EACxB,CACF,CAAA,CAEC,QAAA,CAAAxO,EAAAA,CAAE,GAAA,CAAA,CA/BE/N,EAgCP,CAEJ,CAAC,CACH,CAAA,GAAG,CACL,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAWviB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC7EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CACnC,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACboW,CAAAA,EAAkB,CAClBhC,CAAAA,CAAwB,CAACD,CAAoB,EAC/C,CAAA,CACA,SAAA,CAAW5c,CAAAA,CACT,sGAAA,CACAwc,EAAa,QAAA,GAAa,MAAA,EAAUA,CAAAA,CAAa,QAAA,GAAa,QAAA,CAC1D,4BAAA,CACAA,CAAAA,CAAa,QAAA,GAAa,QAAA,CACxB,kCAAA,CACAA,CAAAA,CAAa,QAAA,GAAa,KAAA,CACxB,gCAAA,CACAzQ,CAAAA,CAAS,4BAAA,CAA+B,2BAClD,CAAA,CAEC,QAAA,CAAAyQ,CAAAA,CAAa,QAAA,CACTA,CAAAA,CAAa,QAAA,GAAa,MAAA,EAAUA,CAAAA,CAAa,QAAA,GAAa,QAAA,CAC1DvF,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,QAAA,CAC/BuF,CAAAA,CAAa,QAAA,GAAa,QAAA,CACvBvF,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,QAAA,CAC5BA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,KAAA,CACjCA,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAC3C,CAAA,CAEAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAkE,CAAAA,EACCjT,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,OAAA,CAAS,IAAMoU,EAAwB,KAAK,CAAA,CAC9C,CAAA,CACApU,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,wFAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAEC,QAAA,CAAA,CACD,CAAE,EAAA,CAAI,QAAA,CAAU,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,QAAA,CAAU,KAAA,CAAO,YAAa,CAAA,CACnF,CAAE,EAAA,CAAI,MAAA,CAAQ,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,MAAA,CAAQ,KAAA,CAAO,eAAgB,CAAA,CAC/E,CAAE,EAAA,CAAI,QAAA,CAAU,KAAA,CAAOA,IAAW,IAAA,CAAO,OAAA,CAAU,QAAA,CAAU,KAAA,CAAO,eAAgB,CAAA,CACpF,CAAE,EAAA,CAAI,KAAA,CAAO,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,KAAA,CAAO,KAAA,CAAO,cAAe,CAAA,CAC5E,CAAE,EAAA,CAAI,MAAA,CAAW,KAAA,CAAOA,CAAAA,GAAW,IAAA,CAAO,eAAA,CAAkB,aAAA,CAAe,KAAA,CAAO,aAAc,CAClG,CAAA,CAAE,GAAA,CAAKpN,CAAAA,EACLF,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbmV,EAAAA,CAAgB,UAAA,CAAYjV,CAAAA,CAAS,EAAsB,CAAA,CAC3DgT,CAAAA,CAAwB,KAAK,EAC/B,CAAA,CACA,SAAA,CAAW7c,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9ByQ,CAAAA,CAAa,QAAA,GAAa3S,CAAAA,CAAS,EAAA,GAAOkC,CAAAA,CAAS,YAAA,CAAe,YAAA,CACpE,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAWzI,CAAAA,CAAG,sBAAA,CAAwB6J,CAAAA,CAAS,KAAK,CAAA,CAAG,CAAA,CAC7DpB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWsD,CAAAA,CAAS,YAAA,CAAe,eAAA,CAAkB,QAAA,CAAAlC,CAAAA,CAAS,KAAA,CAAM,CAAA,CAAA,CAAA,CAZrEA,CAAAA,CAAS,EAAA,EAAM,MAatB,CACD,CAAA,CACD,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC+Z,KAAAA,CAAA,CAAM,SAAA,CAAWxiB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC9EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAa,UAAA,CAClC,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,aAAe,eAAe,CAAA,CACnE,QAAA,CAAAyQ,CAAAA,CAAa,SAAA,EAAaA,CAAAA,CAAa,OAAA,CACpC,CAAA,EAAG,IAAA,CAAK,IAAA,CAAA,CAAMA,CAAAA,CAAa,OAAA,CAAQ,OAAA,EAAQ,CAAIA,CAAAA,CAAa,SAAA,CAAU,OAAA,EAAQ,GAAM,GAAA,CAAO,EAAA,CAAK,EAAA,CAAK,EAAA,CAAG,CAAC,CAAA,CAAA,EAAIvF,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAS,MAAM,CAAA,CAAA,CAC7IA,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,SAAA,CACzC,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,kBAAA,CAAqB,iBAAiB,CAAA,CAAG,CAAA,CACtGtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAa,UAAA,CAClC,CAAA,CACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CACZ,QAAA,CAAA,CAAAyT,CAAAA,CACC3U,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,OAAA,CACL,GAAA,CAAI,GAAA,CACJ,GAAA,CAAI,KAAA,CACJ,IAAA,CAAK,GAAA,CACL,KAAA,CAAO+T,CAAAA,CAAa,QAAA,EAAY,CAAA,CAChC,QAAA,CAAWpR,CAAAA,EAAM,CACf,IAAM+V,CAAAA,CAAc,QAAA,CAAS/V,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvCqH,EAAAA,CAAY+J,CAAAA,CAAa,MAAA,CACzB2E,CAAAA,GAAgB,GAAA,CAAK1O,EAAAA,CAAY,WAAA,CAC5B0O,CAAAA,CAAc,CAAA,CAAG1O,EAAAA,CAAY,aAAA,CACjCA,EAAAA,CAAY,MAAA,CACjB,IAAMmM,EAAAA,CAAc,CAAE,GAAGpC,CAAAA,CAAc,QAAA,CAAU2E,CAAAA,CAAa,MAAA,CAAQ1O,EAAU,CAAA,CAChFgK,CAAAA,CAAgBmC,EAAW,CAAA,CAC3BqF,CAAAA,CAAU,YAAA,GAAerF,EAAW,EACtC,EACA,MAAA,CAAQ,IAAMvB,EAAAA,CAAmB,KAAK,CAAA,CACtC,SAAA,CAAWrd,CAAAA,CACT,sEAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAAA,CACzB,8NACF,CAAA,CACA,SAAA,CAAS,IAAA,CACX,CAAA,CAEAtD,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM4U,EAAAA,CAAmB,IAAI,CAAA,CACtC,SAAA,CAAWrd,CAAAA,CACT,sHAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAC3B,CAAA,CAEA,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,oCAAA,CACAwc,CAAAA,CAAa,QAAA,GAAa,GAAA,CAAM,cAAA,CAAiB,cACnD,CAAA,CACA,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAGA,CAAAA,CAAa,QAAA,EAAY,CAAC,CAAA,CAAA,CAAI,CAAA,CACnD,CAAA,CACF,CAAA,CAEF7S,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,kCAAA,CAAoC+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC5F,UAAAyQ,CAAAA,CAAa,QAAA,EAAY,CAAA,CAAE,GAAA,CAAA,CAC9B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGA7S,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC8R,GAAAA,CAAA,CAAI,SAAA,CAAWva,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAC5EtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,MAAA,CACnC,CAAA,CACAxO,GAAAA,CAACuQ,EAAAA,CAAA,CACC,YAAA,CAAcwD,CAAAA,CAAa,IAAA,EAAQ,EAAC,CACpC,aAAA,CAAetD,CAAAA,CACf,QAAA,CAAWuJ,CAAAA,EAAY,CACrB3D,EAAAA,CAAgB,MAAA,CAAQ2D,CAAO,EACjC,CAAA,CACA,WAAA,CAAatJ,CAAAA,CACb,KAAA,CAAOkD,CAAAA,CACT,CAAA,CAAA,CACF,CAAA,CAGA1S,KAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACia,KAAAA,CAAA,CAAM,SAAA,CAAW1iB,CAAAA,CAAG,gBAAA,CAAkB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACrFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,mBAAA,CAAqB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACjF,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,YAAA,CAAe,WAAA,CACpC,CAAA,CACAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CAEZ,QAAA,CAAA,CAAA6S,CAAAA,CAAa,YAAA,EAAgBA,CAAAA,CAAa,YAAA,CAAa,MAAA,CAAS,CAAA,EAC/D/T,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,QAAA,CAAA+T,CAAAA,CAAa,YAAA,CAAa,GAAA,CAAKxN,CAAAA,EAAU,CACxC,IAAM2T,CAAAA,CAAUikB,CAAAA,CAAM,IAAA,CAAK72B,EAAAA,EAAKA,EAAAA,CAAE,EAAA,GAAOf,CAAK,CAAA,CAC9C,OACErF,IAAAA,CAAC,QAEC,SAAA,CAAW3J,CAAAA,CACT,2EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,2BAC5C,CAAA,CAEC,QAAA,CAAA,CAAA4W,CAAAA,EAAS,IAAA,EAAQ3T,CAAAA,CAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAClCvG,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACb,IAAMuH,EAAAA,CAAAA,CAAWwM,CAAAA,CAAa,YAAA,EAAgB,EAAC,EAAG,MAAA,CAAOvM,EAAAA,EAAMA,EAAAA,GAAOjB,CAAK,CAAA,CAC3E8P,EAAAA,CAAgB,cAAA,CAAgB9O,EAAO,EACzC,CAAA,CACA,SAAA,CAAWhQ,CAAAA,CACT,+DACF,CAAA,CAEA,QAAA,CAAAyI,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,CAAA,CAAA,CAAA,CAjBKzL,CAkBP,CAEJ,CAAC,CAAA,CACH,CAAA,CAIFrF,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbkV,CAAAA,EAAkB,CAClBtB,EAAAA,CAA4B,CAACD,EAAwB,EACvD,CAAA,CACA,SAAA,CAAWtd,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,aAAA,CAAc,CAAA,CAC9BlS,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,qBAAA,CAAwB,gBAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAGAxO,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAA4E,EAAAA,EACC3T,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAM,CACjD8U,EAAAA,CAA4B,KAAK,CAAA,CACjCE,EAAAA,CAAoB,EAAE,EACxB,CAAA,CAAG,CAAA,CACH9T,IAAAA,CAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,QAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,sGAAA,CACA+L,CAAAA,CAAS,qCAAA,CAAwC,iCACnD,CAAA,CAGA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CAC/E,QAAA,CAAAtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAO+U,EAAAA,CACP,QAAA,CAAWpS,CAAAA,EAAMqS,EAAAA,CAAoBrS,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACnD,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,iBAAA,CAAoB,gBAAA,CACnD,SAAA,CAAWjX,CAAAA,CACT,kDAAA,CACA+L,CAAAA,CACI,oEAAA,CACA,qDACN,CAAA,CACA,SAAA,CAAS,KACX,CAAA,CACF,CAAA,CAGAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACZ,QAAA,CAAAm+B,CAAAA,CAAM,MAAA,CAAS,CAAA,CACdA,CAAAA,CACG,MAAA,CAAO72B,CAAAA,EAAKA,CAAAA,CAAE,EAAA,GAAOyM,CAAAA,CAAa,EAAE,CAAA,CACpC,MAAA,CAAOzM,CAAAA,EACNyN,EAAAA,GAAqB,EAAA,EACrBzN,CAAAA,CAAE,IAAA,CAAK,WAAA,EAAY,CAAE,QAAA,CAASyN,EAAAA,CAAiB,WAAA,EAAa,CAC9D,CAAA,CACC,GAAA,CAAKmF,CAAAA,EAAY,CAChB,IAAM9R,CAAAA,CAAa2L,CAAAA,CAAa,YAAA,EAAc,QAAA,CAASmG,CAAAA,CAAQ,EAAE,CAAA,CACjE,OACEhZ,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACb,IAAMiZ,EAAAA,CAAcpG,CAAAA,CAAa,YAAA,EAAgB,EAAC,CAC9CxM,EAAAA,CACAa,CAAAA,CACFb,EAAAA,CAAU4S,EAAAA,CAAY,MAAA,CAAO3S,EAAAA,EAAMA,EAAAA,GAAO0S,EAAQ,EAAE,CAAA,CAEpD3S,EAAAA,CAAU,CAAC,GAAG4S,EAAAA,CAAaD,CAAAA,CAAQ,EAAE,CAAA,CAEvC7D,EAAAA,CAAgB,cAAA,CAAgB9O,EAAO,EACzC,CAAA,CACA,SAAA,CAAWhQ,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAAA,CAC9B8E,CAAAA,GAAe9E,CAAAA,CAAS,YAAA,CAAe,YAAA,CACzC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWzI,CAAAA,CACT,yEAAA,CACA6Q,CAAAA,CACI,6BAAA,CACA9E,CAAAA,CAAS,iBAAA,CAAoB,iBACnC,CAAA,CAEC,QAAA,CAAA8E,CAAAA,EACCpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAE1C,CAAA,CACA/Q,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,gBAAA,CAAkB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC1E,QAAA,CAAA4W,CAAAA,CAAQ,KACX,CAAA,CACAla,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAA4W,CAAAA,CAAQ,EAAA,CAAG,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CApCKA,CAAAA,CAAQ,EAqCf,CAEJ,CAAC,CAAA,CAEHla,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CAAG,+BAAA,CAAiC+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5F,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,2BAAA,CAA8B,oBAAA,CACnD,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACoa,OAAAA,CAAA,CAAQ,SAAA,CAAW7iB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAChFtD,GAAAA,CAAC,QAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC1D,QAAA,CAAA,OAAA,CACrB,CAAA,CACApC,IAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM,CACbkV,CAAAA,EAAkB,CAClBlB,EAAAA,CAAmB,CAACD,EAAe,EACrC,CAAA,CACA,SAAA,CAAW1d,CAAAA,CACT,0EAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,+BAC5C,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB+T,CAAAA,CAAa,KAAA,EAAS,SAAU,CAAA,CAC5D,CAAA,CACA/T,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACnE,QAAA,CAAAqP,EAAAA,CAAY,IAAA,CAAK0H,CAAAA,EAAKA,CAAAA,CAAE,KAAA,GAAUtG,CAAAA,CAAa,KAAK,CAAA,EAAG,IAAA,GAASvF,CAAAA,GAAW,IAAA,CAAO,OAAS,MAAA,CAAA,CAC9F,CAAA,CACAxO,GAAAA,CAAC+R,WAAAA,CAAA,CAAY,SAAA,CAAWxa,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAAA,CACtF,CAAA,CAGAtD,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAgF,EAAAA,EACC/T,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CAAqB,OAAA,CAAS,IAAMkV,EAAAA,CAAmB,KAAK,CAAA,CAAG,CAAA,CAC9ElV,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC7B,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CAC5B,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,CAAA,CAAG,EAAG,CAAA,CAC1B,SAAA,CAAW3Y,CAAAA,CACT,8EAAA,CACA+L,CAAAA,CAAS,sCAAwC,iCACnD,CAAA,CAEA,QAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACZ,QAAA,CAAA2S,EAAAA,CAAY,GAAA,CAAK1R,CAAAA,EAAU,CAC1B,IAAMmH,CAAAA,CAAa2L,CAAAA,CAAa,KAAA,GAAU9S,CAAAA,CAAM,KAAA,CAChD,OACEjB,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACbqW,EAAAA,CAAgB,OAAA,CAASpV,CAAAA,CAAM,KAAK,CAAA,CACpCiU,EAAAA,CAAmB,KAAK,EAC1B,CAAA,CACA,SAAA,CAAW3d,CAAAA,CACT,sEAAA,CACA6Q,CAAAA,EAAc,sBAAA,CACd9E,CAAAA,CAAS,uBAAA,CAA0B,mBACrC,CAAA,CACA,KAAA,CAAO,CACL,eAAA,CAAiBrC,CAAAA,CAAM,KAAA,CACvB,YAAA,CAAcmH,CAAAA,CAAanH,CAAAA,CAAM,KAAA,CAAQ,MAC3C,CAAA,CACA,KAAA,CAAOA,CAAAA,CAAM,IAAA,CAEZ,QAAA,CAAAmH,CAAAA,EACCpI,GAAAA,CAACiS,KAAAA,CAAA,CAAM,SAAA,CAAU,yBAAyB,CAAA,CAAA,CAjBvChR,CAAAA,CAAM,KAmBb,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACsa,OAAAA,CAAA,CAAQ,SAAA,CAAW/iB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CAChFtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAC5E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,MAAA,CAAS,WAAA,CAC9B,CAAA,CACAtN,IAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,wCAAA,CACf,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,UAAA,CACL,OAAA,CAAS+T,CAAAA,CAAa,WAAA,EAAe,KAAA,CACrC,QAAA,CAAWpR,CAAAA,EAAM0T,EAAAA,CAAgB,aAAA,CAAsB1T,CAAAA,CAAE,MAAA,CAAO,OAAO,EACvE,SAAA,CAAWpL,CAAAA,CACT,2EAAA,CACAwc,CAAAA,CAAa,WAAA,CACT,iCAAA,CACAzQ,CAAAA,CAAS,gCAAA,CAAmC,gCAAA,CAChD,iDACF,CAAA,CACF,CAAA,CACAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACnE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,kBAAA,CAAqB,mBAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACua,QAAAA,CAAA,CAAS,SAAA,CAAWhjB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACjFtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,uBAAA,CAAyB+L,CAAAA,CAAS,aAAe,eAAe,CAAA,CAC/E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,gBAAA,CAAgB,aAAA,CACrC,CAAA,CAAA,CACF,CAAA,CACAxO,GAAAA,CAAC,UAAA,CAAA,CACC,KAAA,CAAQ+T,CAAAA,CAAqB,WAAA,EAAe,EAAA,CAC5C,QAAA,CAAWpR,CAAAA,EAAM0T,EAAAA,CAAgB,aAAA,CAAsB1T,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACrE,WAAA,CAAa6L,CAAAA,GAAW,IAAA,CAAO,2BAAA,CAA2B,oBAAA,CAC1D,SAAA,CAAWjX,CAAAA,CACT,8FAAA,CACA+L,CAAAA,CACI,oEAAA,CACA,uEACN,CAAA,CACF,CAAA,CACApC,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,wDAAA,CACA+L,CAAAA,CAAS,uCAAA,CAA0C,uCACrD,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACuY,QAAAA,CAAA,CAAS,SAAA,CAAU,SAAA,CAAU,CAAA,CAC7B/J,CAAAA,GAAW,IAAA,CAAO,gBAAA,CAAmB,eAAA,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,qBAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAAtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,uBAAA,CAA0B,eAAA,CAC/C,CAAA,CACAtN,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,+EAAA,CACA+L,CAAAA,CAAS,6CAAA,CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB1D,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAAgC,6BAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAAtD,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAAkL,IAAW,IAAA,CAAO,kBAAA,CAAqB,aAAA,CAC1C,CAAA,CACCuF,CAAAA,CAAa,QAAA,EAAYA,CAAAA,CAAa,QAAA,CAAS,MAAA,CAAS,CAAA,EACvD/T,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACZ,QAAA,CAAA+T,CAAAA,CAAa,QAAA,CAAS,GAAA,CAAKyG,CAAAA,EAC1BtZ,IAAAA,CAAC,KAAA,CAAA,CAAqB,SAAA,CAAU,yBAAA,CAC9B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,wEAAA,CACAijB,CAAAA,CAAQ,QAAA,GAAa,GAAA,CACjB,+BAAA,CACAlX,CAAAA,CAAS,uCAAA,CAA0C,uCACzD,CAAA,CACG,QAAA,CAAAkX,CAAAA,CAAQ,QAAA,GAAa,GAAA,EACpBxa,GAAAA,CAAC2Y,YAAAA,CAAA,CAAa,SAAA,CAAU,oBAAA,CAAqB,CAAA,CAEjD,CAAA,CACA3Y,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CACf,SAAA,CACAijB,CAAAA,CAAQ,QAAA,GAAa,GAAA,CACjB,6BAAA,CACAlX,CAAAA,CAAS,YAAA,CAAe,eAC9B,CAAA,CACG,QAAA,CAAAkX,EAAQ,IAAA,CACX,CAAA,CAAA,CAAA,CAlBQA,CAAAA,CAAQ,EAmBlB,CACD,CAAA,CACH,CAAA,CAEFtZ,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,+EAAA,CACA+L,CAAAA,CAAS,6CAAA,CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB1D,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CAAA,CACnC,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAWzI,CAAAA,CAAG,uBAAA,CAAyB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,mBAAA,CAAsB,YAAA,CAC3C,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAWzI,EACjB,+BAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,iCAChD,CAAA,CACE,QAAA,CAAAtD,GAAAA,CAACkS,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,CACAhR,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAW3J,CAAAA,CACjB,+EAAA,CACA+L,CAAAA,CAAS,6CAAA,CAAgD,6CAC3D,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAACya,UAAAA,CAAA,CAAW,SAAA,CAAU,SAAA,CAAU,CAAA,CAC/BjM,CAAAA,GAAW,IAAA,CAAO,wBAAA,CAA2B,kBAAA,CAAA,CAChD,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,oBAAA,CAAsB+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACrF,QAAA,CAAA,CAAApC,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAW3J,CAAAA,CAAG,4BAAA,CAA8B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACpF,QAAA,CAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,UAAA,CAAa,aAAA,CAC/BqsD,EAAAA,CAAuB,MAAA,CAAS,GAC/B35D,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,0BAAA,CAA4B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CAC1Fu3D,EAAAA,CAAuB,MAAA,CAAO,GAAA,CAAA,CAClC,CAAA,CAAA,CAEJ,CAAA,CAGCA,EAAAA,CAAuB,MAAA,CAAS,CAAA,EAC/B76D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACZ,QAAA,CAAA66D,EAAAA,CAAuB,GAAA,CAAKngD,CAAAA,EAAe,CAC1C,IAAMC,CAAAA,CAAW1C,EAAAA,CAAYyC,CAAAA,CAAW,IAAI,CAAA,CACtCE,EAAAA,CAAUF,CAAAA,CAAW,IAAA,CAAK,UAAA,CAAW,QAAQ,CAAA,CAEnD,OACExZ,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,gEAAA,CACA+L,CAAAA,CAAS,8BAAA,CAAiC,8BAC5C,CAAA,CAGC,QAAA,CAAA,CAAAsX,EAAAA,EAAWF,CAAAA,CAAW,YAAA,CACrB1a,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAK0a,CAAAA,CAAW,YAAA,CAChB,GAAA,CAAKA,CAAAA,CAAW,IAAA,CAChB,SAAA,CAAU,iCACZ,CAAA,CAEA1a,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,oDAAA,CACA+L,CAAAA,CAAS,aAAA,CAAgB,aAC3B,CAAA,CACE,QAAA,CAAAtD,GAAAA,CAAC2a,CAAAA,CAAA,CAAS,SAAA,CAAWpjB,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,CAAA,CACnF,CAAA,CAIFpC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CACC,IAAA,CAAM0a,CAAAA,CAAW,GAAA,CACjB,MAAA,CAAO,QAAA,CACP,GAAA,CAAI,qBAAA,CACJ,SAAA,CAAWnjB,CAAAA,CACT,oDAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CAEC,QAAA,CAAAoX,CAAAA,CAAW,IAAA,CACd,CAAA,CACA1a,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAAyU,EAAAA,CAAe2C,CAAAA,CAAW,IAAI,CAAA,CACjC,GACF,CAAA,CAGCc,CAAAA,CAAU,kBAAA,EACTxb,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAMwb,CAAAA,CAAU,kBAAA,GAAqBd,CAAAA,CAAW,EAAE,CAAA,CAC3D,SAAA,CAAWnjB,CAAAA,CACT,gEAAA,CACA+L,CAAAA,CAAS,kCAAA,CAAqC,+BAChD,CAAA,CACA,KAAA,CAAOkL,CAAAA,GAAW,IAAA,CAAO,UAAA,CAAa,QAAA,CAEtC,QAAA,CAAAxO,GAAAA,CAAC6a,MAAAA,CAAA,CAAO,SAAA,CAAU,SAAA,CAAU,CAAA,CAC9B,CAAA,CAAA,CAAA,CAnDGH,CAAAA,CAAW,EAqDlB,CAEJ,CAAC,CAAA,CACH,CAAA,CAIFxZ,IAAAA,CAAC,KAAA,CAAA,CACC,UAAA,CAAY2W,EAAAA,CACZ,WAAA,CAAaC,EAAAA,CACb,MAAA,CAAQJ,EAAAA,CACR,SAAA,CAAWngB,CAAAA,CACT,0FAAA,CACA4d,EAAAA,CACK7R,CAAAA,CAAS,gCAAA,CAAmC,4BAAA,CAC5CA,CAAAA,CAAS,uCAAA,CAA0C,uCAAA,CACxD+R,EAAAA,EAAoB,gCACtB,CAAA,CAEA,QAAA,CAAA,CAAArV,GAAAA,CAAC,OAAA,CAAA,CACC,KAAK,MAAA,CACL,QAAA,CAAQ,IAAA,CACR,QAAA,CAAU4X,EAAAA,CACV,SAAA,CAAU,yDAAA,CACV,QAAA,CAAU,CAAC4D,CAAAA,CAAU,mBAAA,EAAuBnG,EAAAA,CAC9C,CAAA,CACCA,EAAAA,CACCnU,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8FAAA,CAA+F,CAAA,CAC9GA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACpE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,aAAA,CAAgB,cAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAEAtN,IAAAA,CAAA6G,QAAAA,CAAA,CACE,QAAA,CAAA,CAAA/H,GAAAA,CAAC8a,MAAAA,CAAA,CAAO,SAAA,CAAWvjB,CAAAA,CACjB,sBAAA,CACA4d,EAAAA,CAAiB,eAAA,CAAmB7R,CAAAA,CAAS,gBAAA,CAAmB,eAClE,CAAA,CAAG,CAAA,CACHtD,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,iBAAmB,eAAe,CAAA,CACpE,QAAA,CAAA6R,EAAAA,CACI3G,CAAAA,GAAW,IAAA,CAAO,6BAAA,CAA6B,iBAAA,CAC/CA,CAAAA,GAAW,IAAA,CACRtN,IAAAA,CAAA6G,QAAAA,CAAA,CAAE,QAAA,CAAA,CAAA,gCAAA,CAA2B/H,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,WAAA,CAAY,QAAA,CAAA,qBAAA,CAAmB,CAAA,CAAA,CAAO,CAAA,CACnFkB,IAAAA,CAAA6G,QAAAA,CAAA,CAAE,QAAA,CAAA,CAAA,0BAAA,CAAwB/H,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,WAAA,CAAY,QAAA,CAAA,iBAAA,CAAe,CAAA,CAAA,CAAO,CAAA,CAGtF,CAAA,CACC,CAACwb,CAAAA,CAAU,mBAAA,EACVxb,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,cAAA,CAAgB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACzE,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,sBAAA,CAAyB,sBAAA,CAC9C,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAtN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,6BAAA,CACA+L,CAAAA,CAAS,+BAAiC,4BAC5C,CAAA,CAEE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,oBAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAApC,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAW3J,CAAAA,CACb,uBAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,eAC1B,CAAA,CACG,QAAA,CAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,WAAA,CAAc,UAAA,CAChCiF,CAAAA,EAAYA,CAAAA,CAAS,MAAA,CAAS,CAAA,EAC7BvS,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAW3J,CAAAA,CAAG,0BAAA,CAA4B+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAAG,QAAA,CAAA,CAAA,GAAA,CAC1FmQ,CAAAA,CAAS,MAAA,CAAO,GAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAGAzT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CACZ,QAAA,CAAAyT,CAAAA,EAAYA,CAAAA,CAAS,MAAA,CAAS,CAAA,CAC7BzT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAAyT,CAAAA,CAAS,IAAKsH,CAAAA,EAAY,CACzB,IAAMugD,CAAAA,CAAAA,CAAW,IAAM,CACrB,IAAM73D,EAAAA,CAAM,IAAI,IAAA,CACV83D,EAAAA,CAAc,IAAI,IAAA,CAAKxgD,CAAAA,CAAQ,SAAS,CAAA,CACxCnE,EAAAA,CAASnT,EAAAA,CAAI,OAAA,EAAQ,CAAI83D,EAAAA,CAAY,OAAA,EAAQ,CAC7C1kD,EAAAA,CAAW,IAAA,CAAK,KAAA,CAAMD,EAAAA,CAAS,GAAK,CAAA,CACpCE,EAAAA,CAAY,IAAA,CAAK,KAAA,CAAMD,EAAAA,CAAW,EAAE,CAAA,CACpCE,EAAAA,CAAW,IAAA,CAAK,KAAA,CAAMD,EAAAA,CAAY,EAAE,CAAA,CAC1C,OAAID,EAAAA,CAAW,CAAA,CAAUrI,CAAAA,GAAW,IAAA,CAAO,OAAA,CAAU,KAAA,CACjDqI,EAAAA,CAAW,EAAA,CAAWrI,CAAAA,GAAW,IAAA,CAAO,CAAA,KAAA,EAAQqI,EAAQ,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,EAAQ,CAAA,KAAA,CAAA,CACzEC,EAAAA,CAAY,EAAA,CAAWtI,CAAAA,GAAW,IAAA,CAAO,QAAQsI,EAAS,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,EAAS,CAAA,KAAA,CAAA,CACzEtI,CAAAA,GAAW,IAAA,CAAO,CAAA,KAAA,EAAQuI,EAAQ,CAAA,CAAA,CAAA,CAAM,CAAA,EAAGA,EAAQ,CAAA,KAAA,CAC5D,CAAA,GAAG,CACH,OACE7V,IAAAA,CAAC,KAAA,CAAA,CAAqB,SAAA,CAAU,YAAA,CAE9B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB,SAAU,CAAA,CAEnC,QAAA,CAAA+a,CAAAA,CAAQ,IAAA,EAAM,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,EAAK,GAAA,CACpD,CAAA,CAEA7Z,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,qBAAA,CAAuB+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CAC/E,QAAA,CAAAyX,EAAQ,IAAA,EAAM,IAAA,GAASvM,CAAAA,GAAW,IAAA,CAAO,SAAA,CAAY,MAAA,CAAA,CACxD,CAAA,CACAxO,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,SAAA,CAAW+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CACvE,QAAA,CAAAg4D,CAAAA,CACH,CAAA,CAAA,CACF,CAAA,CACAt7D,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CAAG,qBAAA,CAAuB+L,CAAAA,CAAS,gBAAA,CAAmB,eAAe,CAAA,CAChF,QAAA,CAAAyX,CAAAA,CAAQ,OAAA,CACX,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CArBQA,CAAAA,CAAQ,EAsBlB,CAEJ,CAAC,CAAA,CACH,CAAA,CAGA7Z,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8DAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAACgb,aAAAA,CAAA,CAAc,SAAA,CAAWzjB,CAAAA,CACxB,gBAAA,CACA+L,CAAAA,CAAS,gBAAA,CAAmB,eAC9B,CAAA,CAAG,CAAA,CACHtD,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAWzI,CAAAA,CACZ,SAAA,CACA+L,CAAAA,CAAS,iBAAmB,eAC9B,CAAA,CACG,QAAA,CAAAkL,CAAAA,GAAW,IAAA,CAAO,wBAAA,CAA2B,oBAAA,CAChD,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAGAxO,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAWzI,CAAAA,CACd,cAAA,CACA+L,CAAAA,CAAS,iBAAA,CAAoB,iBAC/B,CAAA,CACE,QAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CAEZ,QAAA,CAAA,CAAAuN,CAAAA,EACCzO,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oGAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiByO,CAAAA,CAAY,KAAA,EAAS,SAAU,CAAA,CAExD,QAAA,CAAAA,CAAAA,CAAY,IAAA,EAAM,KAAA,CAAM,CAAA,CAAG,CAAC,CAAA,CAAE,WAAA,EAAY,EAAK,GAAA,CAClD,CAAA,CAEFvN,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CACd,qDAAA,CACA+L,CAAAA,CAAS,YAAA,CAAe,iCAC1B,CAAA,CACE,QAAA,CAAA,CAAAtD,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,MAAO6V,CAAAA,CACP,QAAA,CAAWlT,CAAAA,EAAMmT,EAAAA,CAAenT,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC9C,SAAA,CAAW,MAAOA,CAAAA,EAAM,CACtB,GAAIA,CAAAA,CAAE,GAAA,GAAQ,OAAA,EAAW,CAACA,CAAAA,CAAE,QAAA,EAAYoR,CAAAA,EAAgB8B,CAAAA,CAAY,IAAA,EAAK,EAAKnC,CAAAA,CAAc,CAC1F/Q,CAAAA,CAAE,cAAA,EAAe,CACjBqT,EAAAA,CAAuB,IAAI,CAAA,CAC3B,GAAI,CACF,MAAMtC,CAAAA,CAAaK,CAAAA,CAAa,EAAA,CAAI8B,CAAAA,CAAY,IAAA,EAAM,CAAA,CACtDC,EAAAA,CAAe,EAAE,EACnB,CAAA,OAAE,CACAE,EAAAA,CAAuB,KAAK,EAC9B,CACF,CACF,CAAA,CACA,WAAA,CAAaxH,CAAAA,GAAW,IAAA,CAAO,0BAAA,CAA6B,oBAAA,CAC5D,QAAA,CAAUuH,CAAAA,EAAuB,CAACrC,CAAAA,CAClC,SAAA,CAAWnc,EACT,4CAAA,CACA+L,CAAAA,CAAS,uCAAA,CAA0C,yCAAA,CAAA,CAClDyS,CAAAA,EAAuB,CAACrC,CAAAA,GAAiB,YAC5C,CAAA,CACF,CAAA,CACA1T,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,SAAY,CACnB,GAAI+T,CAAAA,EAAgB8B,CAAAA,CAAY,IAAA,EAAK,EAAKnC,CAAAA,CAAc,CACtDsC,EAAAA,CAAuB,IAAI,CAAA,CAC3B,GAAI,CACF,MAAMtC,CAAAA,CAAaK,CAAAA,CAAa,EAAA,CAAI8B,CAAAA,CAAY,IAAA,EAAM,CAAA,CACtDC,EAAAA,CAAe,EAAE,EACnB,CAAA,OAAE,CACAE,EAAAA,CAAuB,KAAK,EAC9B,CACF,CACF,CAAA,CACA,QAAA,CAAUD,CAAAA,EAAuB,CAACF,CAAAA,CAAY,IAAA,EAAK,EAAK,CAACnC,CAAAA,CACzD,SAAA,CAAWnc,CAAAA,CACT,iCAAA,CACAse,CAAAA,CAAY,IAAA,EAAK,EAAKnC,CAAAA,CAClB,0CAAA,CACCpQ,EAAS,gBAAA,CAAmB,eAAA,CACjCyS,CAAAA,EAAuB,+BACzB,CAAA,CAEC,QAAA,CAAAA,CAAAA,CACC/V,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gFAAA,CAAiF,CAAA,CAEhGA,GAAAA,CAACgQ,IAAAA,CAAA,CAAK,SAAA,CAAU,SAAA,CAAU,CAAA,CAE9B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAGAhQ,GAAAA,CAACiQ,eAAAA,CAAA,CACE,QAAA,CAAAyoD,CAAAA,EACCx3D,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA/H,GAAAA,CAACkQ,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,OAAA,CAAS,CAAE,OAAA,CAAS,CAAE,CAAA,CACtB,IAAA,CAAM,CAAE,OAAA,CAAS,CAAE,CAAA,CACnB,OAAA,CAAS,IAAMyoD,CAAAA,CAAe,IAAI,CAAA,CAClC,SAAA,CAAU,gCAAA,CACZ,CAAA,CAEAz3D,KAACgP,MAAAA,CAAO,GAAA,CAAP,CACC,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAA,CAAM,CAAA,CAAG,EAAG,CAAA,CAC1C,OAAA,CAAS,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,CAAA,CAAG,CAAA,CAAG,CAAE,CAAA,CACtC,IAAA,CAAM,CAAE,OAAA,CAAS,CAAA,CAAG,KAAA,CAAO,GAAA,CAAM,CAAA,CAAG,EAAG,CAAA,CACvC,SAAA,CAAW3Y,CAAAA,CACT,6HAAA,CACA+L,CAAAA,CAAS,cAAA,CAAiB,UAC5B,CAAA,CAEA,QAAA,CAAA,CAAApC,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,sDAAA,CAAwD+L,CAAAA,CAAS,iBAAA,CAAoB,iBAAiB,CAAA,CACvH,QAAA,CAAA,CAAAtD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACvE,QAAA,CAAAo1D,CAAAA,CAAY,IAAA,CAAK,kBAAA,CAAmBlqD,CAAAA,GAAW,KAAO,OAAA,CAAU,OAAA,CAAS,CACxE,OAAA,CAAS,MAAA,CACT,KAAA,CAAO,MAAA,CACP,GAAA,CAAK,SACP,CAAC,CAAA,CACH,CAAA,CACAxO,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS,IAAM24D,CAAAA,CAAe,IAAI,CAAA,CAClC,SAAA,CAAWphE,CAAAA,CAAG,aAAA,CAAe+L,CAAAA,CAAS,kCAAA,CAAqC,iCAAiC,CAAA,CAE5G,QAAA,CAAAtD,GAAAA,CAACgS,CAAAA,CAAA,CAAE,SAAA,CAAU,SAAA,CAAU,CAAA,CACzB,CAAA,CAAA,CACF,CAAA,CACAhS,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6CAAA,CACZ,QAAA,CAAA04D,CAAAA,CAAY,MAAA,CAAO,GAAA,CAAKn5D,CAAAA,EACvB2B,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM,CACby3D,CAAAA,CAAe,IAAI,CAAA,CACnB3kD,CAAAA,CAAgBzU,CAAAA,CAAM,IAAI,CAAA,CAC1Bqc,CAAAA,GAAarc,CAAAA,CAAM,IAAA,CAAK,EAAE,EAC5B,CAAA,CACA,UAAWhI,CAAAA,CACT,iFAAA,CACA+L,CAAAA,CAAS,kBAAA,CAAqB,kBAChC,CAAA,CAEA,QAAA,CAAA,CAAAtD,GAAAA,CAACuJ,EAAAA,CAAA,CAAW,IAAA,CAAMhK,CAAAA,CAAM,IAAA,CAAM,CAAA,CAC9BS,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAWzI,CAAAA,CAAG,yBAAA,CAA2B+L,CAAAA,CAAS,YAAA,CAAe,eAAe,CAAA,CACnF,QAAA,CAAA/D,CAAAA,CAAM,KAAA,CACT,CAAA,CACCA,CAAAA,CAAM,IAAA,CAAK,QAAA,GAAa,MAAA,EAAUA,CAAAA,CAAM,IAAA,CAAK,QAAA,GAAa,QAAA,CACzDS,GAAAA,CAAC8Z,IAAAA,CAAA,CAAK,SAAA,CAAU,0BAAA,CAA2B,CAAA,CACzC,IAAA,CAAA,CAAA,CAjBCva,CAAAA,CAAM,EAkBb,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,CAAA,CAEF,CAEJ,CC78EO,IAAM8e,EAAAA,CAA2B,CAEtC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,YACT,SAAA,CAAW,WAAA,CACX,YAAA,CAAc,WAAA,CAGd,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CACX,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,WAAA,CAGb,UAAA,CAAY,SAAA,CACZ,gBAAA,CAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SACb,CAAA,CAKaC,EAAAA,CAA4B,CAEvC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,SAAA,CACT,SAAA,CAAW,SAAA,CACX,YAAA,CAAc,WAAA,CAGd,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CACX,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,UAGb,UAAA,CAAY,SAAA,CACZ,gBAAA,CAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SACb,CAAA,CAKaga,EAAAA,CAA8B,CAEzC,SAAA,CAAW,SAAA,CACX,WAAA,CAAa,SAAA,CACb,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,WAAA,CACT,SAAA,CAAW,WAAA,CACX,YAAA,CAAc,WAAA,CAGd,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CAGb,WAAA,CAAa,SAAA,CACb,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,SAAA,CACX,SAAA,CAAW,SAAA,CAGX,MAAA,CAAQ,SAAA,CACR,WAAA,CAAa,SAAA,CACb,WAAA,CAAa,WAAA,CAGb,UAAA,CAAY,SAAA,CACZ,gBAAA,CAAkB,SAAA,CAClB,eAAA,CAAiB,SAAA,CAGjB,SAAA,CAAW,SACb,CAAA,CAKakjC,EAAAA,CAAiB,CAC5B,IAAA,CAAMn9C,EAAAA,CACN,KAAA,CAAOC,EAAAA,CACP,OAAA,CAASga,EACX,EAOO,SAASmjC,EAAAA,CAAiB17D,CAAAA,CAA6C,CAC5E,OAAOy7D,EAAAA,CAAez7D,CAAS,CAAA,EAAKy7D,EAAAA,CAAe,IACrD,CCjGO,SAASE,EAAAA,CAAU,CACxB,KAAA,CAAAC,CAAAA,CACA,KAAA,CAAAt9D,CAAAA,CACA,UAAA,CAAA6M,CAAAA,CACA,WAAA,CAAAG,CAAAA,CACA,cAAA,CAAAuwD,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,SAAA,CAAAx6D,CACF,CAAA,CAAmB,CACjB,GAAM,CAAC6mC,CAAAA,CAAWmD,CAAY,CAAA,CAAIhrC,QAAAA,CAAS,KAAK,CAAA,CAG1Cy7D,CAAAA,CAAaj/C,OAAAA,CAAQ,IAClBze,CAAAA,CAAM,MAAA,CAAQzC,CAAAA,EAAS+/D,CAAAA,CAAM,OAAA,CAAQ,QAAA,CAAS//D,CAAAA,CAAK,EAAE,CAAC,CAAA,CAC5D,CAACyC,CAAAA,CAAOs9D,EAAM,OAAO,CAAC,CAAA,CAGnBK,CAAAA,CAAQl/C,OAAAA,CAAQ,IAAM,CAC1B,IAAMm/C,CAAAA,CAAaF,CAAAA,CAAW,MAAA,CACxBG,CAAAA,CAAkB,IAAI,GAAA,CAC1BH,CAAAA,CAAW,OAAA,CAAS1hD,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAmB,EAAE,CACnD,CAAA,CAAE,IAAA,CACI8hD,CAAAA,CAAaJ,CAAAA,CAAW,GAAA,CAAK1hD,CAAAA,EAAMA,CAAAA,CAAE,QAAQ,CAAA,CAAE,MAAA,CAAO,OAAO,CAAA,CAC7D8X,CAAAA,CAAS,IAAI,GAAA,CAAI4pC,CAAAA,CAAW,OAAA,CAAS1hD,CAAAA,EAAMA,CAAAA,CAAE,MAAA,EAAU,EAAE,CAAC,CAAA,CAAE,IAAA,CAElE,OAAO,CACL,UAAA,CAAA4hD,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,MAAA,CAAAhqC,CACF,CACF,CAAA,CAAG,CAAC4pC,CAAU,CAAC,EAETK,CAAAA,CAAe,IAAM,CACzBR,CAAAA,GAAiBD,CAAAA,CAAM,EAAE,EAC3B,CAAA,CAEA,OACEz6D,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW3J,CAAAA,CAAG,YAAA,CAAc,CAACokE,CAAAA,CAAM,UAAA,EAAc,sBAAA,CAAwBr6D,CAAS,CAAA,CAClF,YAAA,CAAc,IAAMgqC,CAAAA,CAAa,IAAI,CAAA,CACrC,YAAA,CAAc,IAAMA,CAAAA,CAAa,KAAK,CAAA,CACtC,KAAA,CAAO,CACL,eAAA,CAAiBqwB,CAAAA,CAAM,KAAA,EAAS,6BAClC,CAAA,CAGA,QAAA,CAAA,CAAAz6D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mBAAA,CAAoB,OAAA,CAASk7D,CAAAA,CAC1C,QAAA,CAAA,CAAAl7D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAU,mBAAA,CAAoB,YAAA,CAAY27D,CAAAA,CAAM,UAAA,CAAa,UAAA,CAAa,QAAA,CAChF,QAAA,CAAA37D,GAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACf,SAAA,CAAWzI,CAAAA,CAAG,oBAAA,CAAsBokE,CAAAA,CAAM,UAAA,EAAc,UAAU,CAAA,CAElE,QAAA,CAAA37D,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,gBAAA,CAAiB,CAAA,CACpC,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,kBAAA,CAAoB,QAAA,CAAA27D,CAAAA,CAAM,KAAA,CAAM,CAAA,CAG9C37D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CAAoB,QAAA,CAAAg8D,CAAAA,CAAM,UAAA,CAAW,CAAA,CAGpD96D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qBAAA,CACZ,QAAA,CAAA,CAAAy6D,CAAAA,CAAM,QAAA,GAAa,eAAA,EAAmB,WAAA,CACtCA,CAAAA,CAAM,QAAA,GAAa,QAAA,EAAY,kBAAA,CAC/BA,CAAAA,CAAM,QAAA,GAAa,QAAA,EAAY,yBAC/BA,CAAAA,CAAM,QAAA,GAAa,UAAA,EAAc,oBAAA,CACjCA,CAAAA,CAAM,QAAA,GAAa,UAAA,EAAc,oBAAA,CACjCA,CAAAA,CAAM,QAAA,GAAa,MAAA,EAAU,gBAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,CAGCxzB,CAAAA,EACCnoC,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,mBAAA,CACV,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBm5D,IAAgBH,CAAAA,CAAM,EAAE,EAC1B,CAAA,CACA,YAAA,CAAW,cAAA,CAEX,QAAA,CAAAz6D,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,UAAA,CAAA,CAAS,MAAA,CAAO,cAAA,CAAe,CAAA,CAChCA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,iFAAiF,CAAA,CAAA,CAC3F,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGC,CAAC27D,CAAAA,CAAM,UAAA,EACNz6D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,2CAAA,CAA4C,CAAA,CACpDA,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,CAAA,CAAA,CAC/B,CAAA,CACAkB,IAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA,CAAA86D,CAAAA,CAAM,eAAA,CAAgB,YAAA,CAAA,CAAU,CAAA,CAAA,CACzC,CAAA,CACCA,CAAAA,CAAM,MAAA,CAAS,CAAA,EACd96D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,gFAAA,CAAiF,CAAA,CACzFA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,MAAA,CAAO,EAAA,CAAG,GAAA,CAAI,CAAA,CAAA,CACvC,CAAA,CACAkB,IAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA,CAAA86D,CAAAA,CAAM,MAAA,CAAO,SAAA,CAAA,CAAO,CAAA,CAAA,CAC7B,CAAA,CAEDL,CAAAA,CAAM,UAAA,EACL37D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAA,CAAA,IAAA,CAAK,KAAA,CAAMy6D,CAAAA,CAAM,UAAA,CAAa,GAAG,CAAA,CAAE,SAAA,CAAA,CAAO,CAAA,CACrF,CAAA,CAAA,CAEJ,CAAA,CAIDA,EAAM,UAAA,EACL37D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oBAAA,CACZ,QAAA,CAAA+7D,CAAAA,CAAW,MAAA,GAAW,CAAA,CACrB76D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,QAAA,CAAA,wBAAA,CAAsB,CAAA,CACzBA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,sCAAA,CAAoC,CAAA,CAAA,CAC5C,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kBAAA,CACZ,QAAA,CAAA+7D,CAAAA,CAAW,GAAA,CAAKngE,CAAAA,EACfsF,IAAAA,CAAC,KAAA,CAAA,CAAkB,SAAA,CAAU,yBAAA,CAC1B,QAAA,CAAA,CAAAgK,CAAAA,CACClL,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAS,IAAMqL,CAAAA,GAAczP,CAAI,CAAA,CAAI,QAAA,CAAAsP,CAAAA,CAAWtP,CAAI,CAAA,CAAE,CAAA,CAE3DsF,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAA0B,OAAA,CAAS,IAAMmK,CAAAA,GAAczP,CAAI,CAAA,CACxE,QAAA,CAAA,CAAAoE,GAAAA,CAAC,IAAA,CAAA,CAAI,QAAA,CAAApE,EAAK,KAAA,CAAM,CAAA,CACfA,CAAAA,CAAK,WAAA,EAAesF,IAAAA,CAAC,GAAA,CAAA,CAAG,QAAA,CAAA,CAAAtF,CAAAA,CAAK,WAAA,CAAY,SAAA,CAAU,CAAA,CAAG,GAAG,CAAA,CAAE,KAAA,CAAA,CAAG,CAAA,CAAA,CACjE,CAAA,CAGFoE,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,wBAAA,CACV,OAAA,CAAU2C,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClBk5D,CAAAA,GAAYF,CAAAA,CAAM,EAAA,CAAI//D,CAAAA,CAAK,EAAE,EAC/B,CAAA,CACA,YAAA,CAAW,mBAAA,CAEX,QAAA,CAAAsF,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CAC5F,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,CAAA,CACpCA,IAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,CAAA,CAAA,CAtBQpE,CAAAA,CAAK,EAuBf,CACD,CAAA,CACH,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAEJ,CC3BO,IAAMygE,EAAAA,CAA0C,CACrD,SAAA,CAAW,IAAA,CACX,WAAA,CAAa,IAAA,CACb,UAAA,CAAY,IAAA,CACZ,eAAA,CAAiB,IAAA,CACjB,OAAA,CAAS,KACX,CAAA,CA0BO,SAASC,EAAAA,CAAuB/8D,CAAAA,CAAiC,CACtE,OAAQA,CAAAA,CAAM,IAAA,EACZ,KAAK,SAAA,CACH,OAAO,cAAA,CACT,KAAK,gBAAA,CACH,OAAO,CAAA,qBAAA,EAAwBA,CAAAA,CAAM,OAAA,CAAQ,QAAQ,IAAI,CAAA,MAAA,EAASA,CAAAA,CAAM,OAAA,CAAQ,MAAA,EAAQ,EAAE,CAAA,CAAA,CAAA,CAC5F,KAAK,kBAAA,CACH,OAAO,kBAAA,CACT,KAAK,kBAAA,CACH,OAAO,CAAA,sBAAA,EAAyBA,CAAAA,CAAM,OAAA,CAAQ,QAAA,EAAU,IAAI,CAAA,IAAA,EAAOA,CAAAA,CAAM,OAAA,CAAQ,QAAA,EAAU,EAAE,CAAA,CAAA,CAC/F,KAAK,OAAA,CACH,OAAO,CAAA,WAAA,EAAcA,CAAAA,CAAM,QAAA,EAAU,UAAA,EAAc,SAAS,CAAA,IAAA,EAAOA,CAAAA,CAAM,QAAA,EAAU,QAAA,EAAY,SAAS,CAAA,CAAA,CAC1G,KAAK,eAAA,CACH,OAAO,eAAA,CACT,KAAK,qBAAA,CACH,OAAO,qBAAA,CACT,KAAK,eAAA,CACH,OAAO,eAAA,CACT,KAAK,gBAAA,CACH,OAAO,gBAAA,CACT,KAAK,kBAAA,CACH,OAAO,kBAAA,CACT,KAAK,oBAAA,CACH,OAAO,qBACT,KAAK,eAAA,CACH,OAAO,eAAA,CACT,KAAK,UAAA,CACH,OAAO,eAAA,CACT,KAAK,UAAA,CACH,OAAO,eAAA,CACT,QACE,OAAO,cACX,CACF,CAKO,SAASg9D,EAAAA,CAAal3C,CAAAA,CAAoC,CAiB/D,OAhBoD,CAClD,OAAA,CAAS,QAAA,CACT,cAAA,CAAgB,WAAA,CAChB,gBAAA,CAAkB,WAAA,CAClB,gBAAA,CAAkB,WAAA,CAClB,KAAA,CAAO,cAAA,CACP,aAAA,CAAe,cAAA,CACf,mBAAA,CAAqB,WAAA,CACrB,aAAA,CAAe,WAAA,CACf,cAAA,CAAgB,iBAAA,CAChB,gBAAA,CAAkB,WAAA,CAClB,kBAAA,CAAoB,6BAAA,CACpB,aAAA,CAAe,WAAA,CACf,QAAA,CAAU,WAAA,CACV,QAAA,CAAU,cACZ,CAAA,CACaA,CAAI,CAAA,EAAK,WACxB,CAKO,SAASm3C,EAAAA,CAAcn3C,CAAAA,CAAoC,CAiBhE,OAhBqD,CACnD,QAAS,SAAA,CACT,cAAA,CAAgB,SAAA,CAChB,gBAAA,CAAkB,SAAA,CAClB,gBAAA,CAAkB,SAAA,CAClB,KAAA,CAAO,SAAA,CACP,aAAA,CAAe,SAAA,CACf,mBAAA,CAAqB,SAAA,CACrB,aAAA,CAAe,SAAA,CACf,cAAA,CAAgB,SAAA,CAChB,gBAAA,CAAkB,SAAA,CAClB,kBAAA,CAAoB,SAAA,CACpB,aAAA,CAAe,SAAA,CACf,QAAA,CAAU,SAAA,CACV,QAAA,CAAU,SACZ,CAAA,CACcA,CAAI,CAAA,EAAK,SACzB,CCxPO,SAASo3C,EAAAA,CAAoB,CAClC,MAAA,CAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,MAAA,CAAQhzD,CAAAA,CACR,SAAA,CAAAzI,CACF,CAAA,CAA6B,CAC3B,IAAM2B,CAAAA,CAAS6Z,OAAAA,CACb,KAAO,CAAE,GAAGu/C,EAAAA,CAAyB,GAAGtyD,CAAa,CAAA,CAAA,CACrD,CAACA,CAAY,CACf,CAAA,CAEM,CAACizD,CAAAA,CAAgBC,CAAiB,CAAA,CAAI38D,QAAAA,CAAsB,IAAI,GAAK,CAAA,CACrE48D,CAAAA,CAAct7D,MAAAA,CAAuB,IAAI,CAAA,CAGzCu7D,CAAAA,CAAgBrgD,OAAAA,CAAQ,IAAM,CAClC,GAAI,CAAC7Z,CAAAA,CAAO,UAAA,CACV,OAAO,CAAC,CAAE,IAAA,CAAM,IAAA,CAAM,MAAA,CAAAy5D,CAAO,CAAC,CAAA,CAGhC,IAAMznC,CAAAA,CAAS,IAAI,GAAA,CACnB,OAAAynC,CAAAA,CAAO,OAAA,CAASn9D,CAAAA,EAAU,CACxB,IAAM69D,CAAAA,CAAU79D,CAAAA,CAAM,SAAA,CAAU,WAAA,EAAY,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CACpD89D,CAAAA,CAAQpoC,CAAAA,CAAO,GAAA,CAAImoC,CAAO,CAAA,CAC3BC,CAAAA,CAGHA,CAAAA,CAAM,IAAA,CAAK99D,CAAK,CAAA,CAFhB01B,CAAAA,CAAO,GAAA,CAAImoC,CAAAA,CAAS,CAAC79D,CAAK,CAAC,EAI/B,CAAC,CAAA,CAEM,KAAA,CAAM,IAAA,CAAK01B,CAAAA,CAAO,OAAA,EAAS,CAAA,CAC/B,IAAA,CAAK,CAACliB,CAAAA,CAAGiK,CAAAA,GAAMA,CAAAA,CAAE,CAAC,CAAA,CAAE,aAAA,CAAcjK,CAAAA,CAAE,CAAC,CAAC,CAAC,CAAA,CACvC,GAAA,CAAI,CAAC,CAAC5O,CAAAA,CAASu4D,CAAM,CAAA,IAAO,CAC3B,IAAA,CAAM,IAAI,IAAA,CAAKv4D,CAAO,CAAA,CACtB,MAAA,CAAQu4D,CAAAA,CAAO,IAAA,CACb,CAAC3pD,CAAAA,CAAGiK,CAAAA,GAAMA,CAAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CAAIjK,CAAAA,CAAE,SAAA,CAAU,OAAA,EAChD,CACF,CAAA,CAAE,CACN,CAAA,CAAG,CAAC2pD,CAAAA,CAAQz5D,CAAAA,CAAO,UAAU,CAAC,CAAA,CAGxB,CAAE,WAAA,CAAAq6D,CAAAA,CAAa,WAAA,CAAAC,CAAY,CAAA,CAAIzgD,OAAAA,CAAQ,IAAM,CACjD,IAAM5T,CAAAA,CAAQ,IAAI,GAAA,CACZs0D,CAAAA,CAAQ,IAAI,GAAA,CAClB,OAAAd,CAAAA,CAAO,OAAA,CAASn9D,CAAAA,EAAU,CACxB2J,CAAAA,CAAM,GAAA,CAAI3J,CAAAA,CAAM,MAAM,CAAA,CACtBi+D,CAAAA,CAAM,GAAA,CAAIj+D,CAAAA,CAAM,IAAI,EACtB,CAAC,CAAA,CACM,CACL,WAAA,CAAa,KAAA,CAAM,IAAA,CAAK2J,CAAK,CAAA,CAC7B,WAAA,CAAa,KAAA,CAAM,IAAA,CAAKs0D,CAAK,CAC/B,CACF,CAAA,CAAG,CAACd,CAAM,CAAC,CAAA,CAGLe,CAAAA,CAAeC,CAAAA,EAAoB,CACvCT,CAAAA,CAAmBrtD,CAAAA,EAAS,CAC1B,IAAMyjB,CAAAA,CAAO,IAAI,GAAA,CAAIzjB,CAAI,CAAA,CACzB,OAAIyjB,CAAAA,CAAK,GAAA,CAAIqqC,CAAO,CAAA,CAClBrqC,CAAAA,CAAK,MAAA,CAAOqqC,CAAO,CAAA,CAEnBrqC,CAAAA,CAAK,GAAA,CAAIqqC,CAAO,CAAA,CAEXrqC,CACT,CAAC,EACH,CAAA,CAGMsqC,CAAAA,CAAsBh6D,CAAAA,EAAuB,CAEjD,IAAMiT,CAAAA,CADM,IAAI,IAAA,EAAK,CACF,OAAA,EAAQ,CAAIjT,CAAAA,CAAK,OAAA,EAAQ,CACtCkT,CAAAA,CAAW,IAAA,CAAK,KAAA,CAAMD,CAAAA,CAAS,GAAK,CAAA,CACpCE,CAAAA,CAAY,IAAA,CAAK,KAAA,CAAMF,CAAAA,CAAS,IAAO,CAAA,CACvCG,CAAAA,CAAW,IAAA,CAAK,KAAA,CAAMH,CAAAA,CAAS,KAAQ,CAAA,CAE7C,OAAIC,CAAAA,CAAW,CAAA,CAAU,UAAA,CACrBA,CAAAA,CAAW,EAAA,CAAW,CAAA,EAAGA,CAAQ,QACjCC,CAAAA,CAAY,EAAA,CAAW,CAAA,EAAGA,CAAS,CAAA,KAAA,CAAA,CACnCC,CAAAA,CAAW,CAAA,CAAU,CAAA,EAAGA,CAAQ,CAAA,KAAA,CAAA,CAC7BpT,CAAAA,CAAK,kBAAA,EACd,CAAA,CAGMi6D,CAAAA,CAAoB9gD,OAAAA,CAAQ,IAAM,CACtC,IAAI/kB,CAAAA,CAAQ,CAAA,CACZ,OAAI4kE,CAAAA,CAAO,KAAA,EAASA,CAAAA,CAAO,KAAA,CAAM,MAAA,CAAS,CAAA,EAAG5kE,CAAAA,EAAAA,CACzC4kE,CAAAA,CAAO,KAAA,EAASA,CAAAA,CAAO,KAAA,CAAM,MAAA,CAAS,CAAA,EAAG5kE,CAAAA,EAAAA,CACzC4kE,CAAAA,CAAO,SAAA,EAAW5kE,CAAAA,EAAAA,CAClB4kE,CAAAA,CAAO,UAAA,EAAY5kE,CAAAA,EAAAA,CAChBA,CACT,CAAA,CAAG,CAAC4kE,CAAM,CAAC,CAAA,CAcX,OAXAl8D,SAAAA,CAAU,IAAM,CACd,GAAIs8D,CAAAA,EAAmBG,CAAAA,CAAY,OAAA,CAAS,CAC1C,IAAM/gE,CAAAA,CAAU+gE,CAAAA,CAAY,OAAA,CAAQ,aAAA,CAClC,mBAAmBH,CAAe,CAAA,EAAA,CACpC,CAAA,CACI5gE,CAAAA,EACFA,CAAAA,CAAQ,cAAA,CAAe,CAAE,QAAA,CAAU,QAAA,CAAU,KAAA,CAAO,QAAS,CAAC,EAElE,CACF,CAAA,CAAG,CAAC4gE,CAAe,CAAC,CAAA,CAEhBL,CAAAA,CAAO,MAAA,GAAW,CAAA,CAElBx7D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,wBAAA,CAA0B+J,CAAS,CAAA,CACpD,QAAA,CAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CAA8B,QAAA,CAAA,WAAA,CAAE,CAAA,CAC/CA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,6BAAA,CAA8B,QAAA,CAAA,uBAAA,CAAqB,CAAA,CAChEA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,uCAAA,CAE9C,CAAA,CAAA,CACF,CAAA,CAKFkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,kBAAA,CAAoB0L,CAAAA,CAAO,OAAA,EAAW,SAAA,CAAW3B,CAAS,CAAA,CAE3E,QAAA,CAAA,CAAAJ,IAAAA,CAAC,KAAA,CAAA,CAAI,UAAU,0BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,gCAAA,CACV,KAAA,CAAOy7D,CAAAA,CAAO,KAAA,GAAQ,CAAC,CAAA,EAAK,EAAA,CAC5B,QAAA,CAAWh6D,CAAAA,EAAM,CACf,IAAMvF,CAAAA,CAAQuF,CAAAA,CAAE,MAAA,CAAO,KAAA,CACvBi6D,CAAAA,CAAe,CACb,GAAGD,CAAAA,CACH,KAAA,CAAOv/D,CAAAA,CAAQ,CAACA,CAA6B,CAAA,CAAI,MACnD,CAAC,EACH,CAAA,CAEA,QAAA,CAAA,CAAA4C,GAAAA,CAAC,QAAA,CAAA,CAAO,KAAA,CAAM,EAAA,CAAG,QAAA,CAAA,YAAA,CAAU,CAAA,CAC1Bu9D,CAAAA,CAAY,GAAA,CAAKl4C,CAAAA,EAChBnkB,IAAAA,CAAC,QAAA,CAAA,CAAkB,KAAA,CAAOmkB,CAAAA,CACvB,QAAA,CAAA,CAAAk3C,EAAAA,CAAal3C,CAAI,CAAA,CAAE,GAAA,CAAEA,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAK,GAAG,CAAA,CAAA,CAAA,CADhCA,CAEb,CACD,CAAA,CAAA,CACH,CAAA,CAGCi4C,CAAAA,CAAY,MAAA,CAAS,CAAA,EACpBp8D,IAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,gCAAA,CACV,KAAA,CAAOy7D,CAAAA,CAAO,KAAA,GAAQ,CAAC,CAAA,EAAK,EAAA,CAC5B,QAAA,CAAWh6D,CAAAA,EAAM,CACf,IAAMvF,CAAAA,CAAQuF,CAAAA,CAAE,MAAA,CAAO,KAAA,CACvBi6D,CAAAA,CAAe,CACb,GAAGD,CAAAA,CACH,KAAA,CAAOv/D,CAAAA,CAAQ,CAACA,CAAK,CAAA,CAAI,MAC3B,CAAC,EACH,CAAA,CAEA,QAAA,CAAA,CAAA4C,GAAAA,CAAC,QAAA,CAAA,CAAO,KAAA,CAAM,EAAA,CAAG,QAAA,CAAA,WAAA,CAAS,CAAA,CACzBs9D,CAAAA,CAAY,GAAA,CAAK37C,CAAAA,EAChB3hB,GAAAA,CAAC,QAAA,CAAA,CAAoB,KAAA,CAAO2hB,CAAAA,CACzB,QAAA,CAAAA,CAAAA,CAAAA,CADUA,CAEb,CACD,CAAA,CAAA,CACH,CAAA,CAIF3hB,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,SAAA,CAAU,iCACV,WAAA,CAAY,mBAAA,CACZ,KAAA,CAAO28D,CAAAA,CAAO,UAAA,EAAc,EAAA,CAC5B,QAAA,CAAWh6D,CAAAA,EACTi6D,CAAAA,CAAe,CAAE,GAAGD,CAAAA,CAAQ,UAAA,CAAYh6D,CAAAA,CAAE,MAAA,CAAO,KAAM,CAAC,CAAA,CAE5D,CAAA,CAAA,CACF,CAAA,CAGCi7D,CAAAA,CAAoB,CAAA,EACnB18D,IAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,+BAAA,CACV,OAAA,CAAS27D,CAAAA,CACV,QAAA,CAAA,CAAA,iBAAA,CACiBe,CAAAA,CAAkB,GAAA,CAAA,CACpC,CAAA,CAAA,CAEJ,CAAA,CAGA59D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CAA6B,GAAA,CAAKk9D,CAAAA,CAC9C,QAAA,CAAAC,CAAAA,CAAc,GAAA,CAAKE,CAAAA,EAClBn8D,IAAAA,CAAC,KAAA,CAAA,CAA6C,SAAA,CAAU,wBAAA,CAErD,QAAA,CAAA,CAAA+B,CAAAA,CAAO,UAAA,EAAco6D,CAAAA,CAAM,IAAA,EAC1Bn8D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,2BAAA,CACb,QAAA,CAAAq9D,EAAM,IAAA,CAAK,kBAAA,CAAmB,OAAA,CAAS,CACtC,KAAA,CAAO,OAAA,CACP,GAAA,CAAK,SAAA,CACL,IAAA,CAAM,SACR,CAAC,CAAA,CACH,CAAA,CACAn8D,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,4BAAA,CACb,QAAA,CAAA,CAAAm8D,CAAAA,CAAM,MAAA,CAAO,MAAA,CAAO,SAAA,CAAA,CACvB,CAAA,CAAA,CACF,CAAA,CAIFr9D,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACZ,QAAA,CAAAq9D,CAAAA,CAAM,MAAA,CAAO,GAAA,CAAI,CAAC99D,CAAAA,CAAOs+D,CAAAA,GAAe,CACvC,IAAMr9C,CAAAA,CAAaw8C,CAAAA,CAAe,GAAA,CAAIz9D,CAAAA,CAAM,EAAE,CAAA,CACxC6I,CAAAA,CAAa20D,CAAAA,GAAoBx9D,CAAAA,CAAM,EAAA,CACvCu+D,CAAAA,CAAatB,EAAAA,CAAcj9D,CAAAA,CAAM,IAAI,CAAA,CAE3C,OACE2B,IAAAA,CAAC,KAAA,CAAA,CAEC,eAAA,CAAe3B,CAAAA,CAAM,EAAA,CACrB,SAAA,CAAWhI,CAAAA,CACT,wBAAA,CACAipB,CAAAA,EAAc,WACdpY,CAAAA,EAAc,UAChB,CAAA,CACA,OAAA,CAAS,IAAM00D,CAAAA,GAAev9D,CAAK,CAAA,CAGnC,QAAA,CAAA,CAAA2B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uBAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,sBAAA,CACV,KAAA,CAAO,CAAE,eAAA,CAAiB89D,CAAW,CAAA,CAEpC,QAAA,CAAA76D,CAAAA,CAAO,SAAA,EACNjD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,2BAAA,CACb,QAAA,CAAAu8D,EAAAA,CAAah9D,CAAAA,CAAM,IAAI,CAAA,CAC1B,CAAA,CAEJ,CAAA,CAGCs+D,CAAAA,CAAaR,CAAAA,CAAM,MAAA,CAAO,MAAA,CAAS,CAAA,EAClCr9D,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,4BAAA,CACV,KAAA,CAAO,CAAE,WAAA,CAAa89D,CAAW,CAAA,CACnC,CAAA,CAAA,CAEJ,CAAA,CAGA58D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACb,UAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CAEZ,QAAA,CAAA,CAAA+B,CAAAA,CAAO,WAAA,EAAe1D,CAAAA,CAAM,UAAA,EAC3BS,GAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKT,CAAAA,CAAM,UAAA,CACX,GAAA,CAAKA,CAAAA,CAAM,QAAA,EAAYA,CAAAA,CAAM,MAAA,CAC7B,SAAA,CAAU,+BAAA,CACZ,CAAA,CAIF2B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,6BAAA,CACb,QAAA,CAAAT,CAAAA,CAAM,QAAA,EAAYA,CAAAA,CAAM,MAAA,CAC3B,CAAA,CACAS,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,+BAAA,CACb,QAAA,CAAAs8D,EAAAA,CAAuB/8D,CAAK,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAS,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACZ,QAAA,CAAAiD,CAAAA,CAAO,eAAA,CACJ06D,CAAAA,CAAmBp+D,CAAAA,CAAM,SAAS,CAAA,CAClCA,CAAAA,CAAM,SAAA,CAAU,cAAA,GACtB,CAAA,CAAA,CACF,CAAA,CAGC,MAAA,CAAO,IAAA,CAAKA,CAAAA,CAAM,OAAO,CAAA,CAAE,MAAA,CAAS,CAAA,EACnC2B,IAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,+BAAA,CACV,OAAA,CAAUyB,CAAAA,EAAM,CACdA,CAAAA,CAAE,eAAA,EAAgB,CAClB86D,CAAAA,CAAYl+D,CAAAA,CAAM,EAAE,EACtB,CAAA,CAEC,QAAA,CAAA,CAAAihB,CAAAA,CAAa,QAAA,CAAM,QAAA,CAAI,eAAA,CAAA,CAC1B,CAAA,CAIDA,CAAAA,EACCtf,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CACZ,QAAA,CAAA,CAAA,MAAA,CAAO,OAAA,CAAQ3B,CAAAA,CAAM,OAAO,CAAA,CAAE,GAAA,CAAI,CAAC,CAACyD,CAAAA,CAAK+6D,CAAM,CAAA,GAC9C78D,IAAAA,CAAC,KAAA,CAAA,CAAc,SAAA,CAAU,+BAAA,CACvB,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAA8B,CAAAA,CAAI,GAAA,CAAA,CACP,CAAA,CACA9B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,oCAAA,CACb,QAAA,CAAA,IAAA,CAAK,SAAA,CAAU+9D,CAAAA,CAAO,IAAI,CAAA,CAC7B,CAAA,CACA/9D,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qCAAA,CAAsC,QAAA,CAAA,QAAA,CAEtD,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,IAAA,CAAK,SAAA,CAAU+9D,CAAAA,CAAO,EAAE,CAAA,CAC3B,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAdQ/6D,CAeV,CACD,CAAA,CAGAzD,CAAAA,CAAM,QAAA,EAAY,MAAA,CAAO,IAAA,CAAKA,CAAAA,CAAM,QAAQ,CAAA,CAAE,MAAA,CAAS,CAAA,EACtD2B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uCAAA,CAAwC,QAAA,CAAA,kBAAA,CAEvD,CAAA,CACC,MAAA,CAAO,OAAA,CAAQT,CAAAA,CAAM,QAAQ,CAAA,CAAE,GAAA,CAAI,CAAC,CAACyD,CAAAA,CAAK5F,CAAK,CAAA,GAC9C8D,KAAC,KAAA,CAAA,CAAc,SAAA,CAAU,sCAAA,CACvB,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qCAAA,CACb,QAAA,CAAA,CAAA8B,CAAAA,CAAI,GAAA,CAAA,CACP,CAAA,CACAhD,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uCAAA,CACb,QAAA,CAAA,IAAA,CAAK,SAAA,CAAU5C,CAAK,CAAA,CACvB,CAAA,CAAA,CAAA,CANQ4F,CAOV,CACD,CAAA,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,CAxHKzD,CAAAA,CAAM,EAyHb,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CAAA,CAtJQ89D,CAAAA,CAAM,IAAA,EAAM,WAAA,EAAY,EAAK,KAuJvC,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAEJ,CCpWO,SAASW,EAAAA,CAAkB,CAChC,WAAA,CAAAC,CAAAA,CACA,MAAA,CAAAvB,CAAAA,CACA,aAAA,CAAAwB,CAAAA,CACA,aAAAC,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,WAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,SAAA,CAAAl9D,CACF,CAAA,CAA2B,CAEzB,IAAMm9D,CAAAA,CAAS,CAAC,EAAA,CAAK,CAAA,CAAG,GAAA,CAAK,CAAA,CAAG,CAAC,CAAA,CAG3BC,CAAAA,CAAe5hD,OAAAA,CAAQ,IACvB,CAACmhD,CAAAA,EAAevB,CAAAA,CAAO,MAAA,GAAW,CAAA,CAAU,IAAA,CACzCA,CAAAA,CAAOuB,CAAAA,CAAY,YAAY,CAAA,CACrC,CAACA,CAAAA,CAAavB,CAAM,CAAC,CAAA,CAGlBxlD,CAAAA,CAAW4F,OAAAA,CAAQ,IACnB,CAACmhD,CAAAA,EAAeA,CAAAA,CAAY,WAAA,GAAgB,CAAA,CAAU,CAAA,CAClDA,CAAAA,CAAY,YAAA,EAAgBA,CAAAA,CAAY,WAAA,CAAc,CAAA,CAAA,CAAM,GAAA,CACnE,CAACA,CAAW,CAAC,CAAA,CAGhB,OAAIvB,EAAO,MAAA,GAAW,CAAA,CAElBx7D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,sBAAA,CAAwB+J,CAAS,CAAA,CAClD,QAAA,CAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CAA4B,QAAA,CAAA,QAAA,CAAC,CAAA,CAC5CA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,2BAAA,CAA4B,QAAA,CAAA,sBAAA,CAAoB,CAAA,CAAA,CAC/D,CAAA,CAKCi+D,CAAAA,CAuBH/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,gBAAA,CAAkB+J,CAAS,CAAA,CAE5C,QAAA,CAAA,CAAAJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACZ,QAAA,CAAA0+D,CAAAA,EAAgBnC,EAAAA,CAAamC,CAAAA,CAAa,IAAI,CAAA,CACjD,CAAA,CACAx9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kCAAA,CACZ,QAAA,CAAA0+D,CAAAA,EAAgBpC,EAAAA,CAAuBoC,CAAY,CAAA,CACtD,EACAx9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,CAAA,QAAA,CACpC+8D,CAAAA,CAAY,YAAA,CAAe,CAAA,CAAE,MAAA,CAAKA,CAAAA,CAAY,WAAA,CAAA,CACvD,CAAA,CACAj+D,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA0+D,CAAAA,EAAgBA,CAAAA,CAAa,SAAA,CAAU,cAAA,EAAe,CACzD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAx9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,OAAA,CACL,SAAA,CAAU,gCAAA,CACV,GAAA,CAAI,GAAA,CACJ,GAAA,CAAKi+D,CAAAA,CAAY,WAAA,CAAc,CAAA,CAC/B,KAAA,CAAOA,CAAAA,CAAY,YAAA,CACnB,QAAA,CAAWt7D,CAAAA,EAAM47D,CAAAA,CAAY,QAAA,CAAS57D,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAC,CAAA,CACvD,CAAA,CACA3C,GAAAA,CAAC,OACC,SAAA,CAAU,8BAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAGkX,CAAQ,CAAA,CAAA,CAAI,CAAA,CACjC,CAAA,CAEAlX,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,iCAAA,CACZ,QAAA,CAAA08D,CAAAA,CAAO,GAAA,CAAI,CAACn9D,CAAAA,CAAOZ,CAAAA,GAClBqB,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAWzI,CAAAA,CACT,gCAAA,CACAoH,CAAAA,GAAUs/D,CAAAA,CAAY,YAAA,EAAgB,QACxC,CAAA,CACA,KAAA,CAAO,CACL,IAAA,CAAM,CAAA,EAAIt/D,CAAAA,EAASs/D,CAAAA,CAAY,WAAA,CAAc,CAAA,CAAA,CAAM,GAAG,CAAA,CAAA,CACxD,CAAA,CACA,OAAA,CAAS,IAAMM,CAAAA,CAAY5/D,CAAK,CAAA,CAChC,KAAA,CAAO29D,EAAAA,CAAuB/8D,CAAK,CAAA,CAAA,CAT9BA,CAAAA,CAAM,EAUb,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGA2B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CAEb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,UACC,SAAA,CAAU,4BAAA,CACV,OAAA,CAASq+D,CAAAA,CACT,QAAA,CAAU,CAACJ,CAAAA,CAAY,SAAA,CACvB,KAAA,CAAM,yBAAA,CAEN,QAAA,CAAA/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CACrE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SAAA,CAAA,CAAQ,MAAA,CAAO,uBAAA,CAAwB,CAAA,CACxCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAA,CACrC,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,wDAAA,CACV,OAAA,CAASo+D,CAAAA,CACT,KAAA,CAAOH,CAAAA,CAAY,SAAA,CAAY,eAAA,CAAkB,cAAA,CAEhD,QAAA,CAAAA,CAAAA,CAAY,SAAA,CACX/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,cAAA,CAC5B,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,GAAA,CAAI,MAAA,CAAO,IAAA,CAAK,CAAA,CACxCA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,IAAA,CAAK,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,GAAA,CAAI,MAAA,CAAO,IAAA,CAAK,CAAA,CAAA,CAC3C,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,cAAA,CAC5B,QAAA,CAAAA,GAAAA,CAAC,SAAA,CAAA,CAAQ,MAAA,CAAO,oBAAA,CAAqB,CAAA,CACvC,CAAA,CAEJ,CAAA,CAGAA,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,4BAAA,CACV,OAAA,CAASs+D,CAAAA,CACT,QAAA,CAAU,CAACL,CAAAA,CAAY,YAAA,CACvB,KAAA,CAAM,qBAAA,CAEN,QAAA,CAAA/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,GAAA,CACrE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,SAAA,CAAA,CAAQ,MAAA,CAAO,qBAAqB,CAAA,CACrCA,GAAAA,CAAC,MAAA,CAAA,CAAK,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,IAAA,CAAK,EAAA,CAAG,IAAA,CAAK,CAAA,CAAA,CACvC,CAAA,CACF,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,QAAA,CAAM,CAAA,CACpDA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACZ,QAAA,CAAAy+D,CAAAA,CAAO,GAAA,CAAKE,CAAAA,EACXz9D,IAAAA,CAAC,QAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,0BAAA,CACA0mE,CAAAA,CAAY,KAAA,GAAUU,CAAAA,EAAS,QACjC,CAAA,CACA,OAAA,CAAS,IAAMH,CAAAA,CAAcG,CAAK,CAAA,CAEjC,QAAA,CAAA,CAAAA,CAAAA,CAAM,GAAA,CAAA,CAAA,CAPFA,CAQP,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGA3+D,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,gDAAA,CACV,OAAA,CAASm+D,CAAAA,CACT,MAAM,mBAAA,CAEN,QAAA,CAAAn+D,GAAAA,CAAC,KAAA,CAAA,CAAI,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,cAAA,CAC5B,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,CAAA,CAC3C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,0BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,OAAA,CAAK,CAAA,CAAM,aAAA,CAAA,CAClB,CAAA,CACAkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,QAAA,CAAC,CAAA,CAAM,WAAA,CAAA,CACd,CAAA,CACAkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,QAAA,CAAC,CAAA,CAAM,OAAA,CAAA,CACd,CAAA,CACAkB,IAAAA,CAAC,QAAK,SAAA,CAAU,yBAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,QAAA,CAAA,KAAA,CAAG,CAAA,CAAM,OAAA,CAAA,CAChB,CAAA,CAAA,CACF,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CAAoC,QAAA,CAAA,0BAAA,CAEpD,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA0+D,CAAAA,EAAgBA,CAAAA,CAAa,SAAA,CAAU,kBAAA,EAAmB,CAC7D,CAAA,CAAA,CACF,CAAA,CACAx9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qCAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CAAoC,QAAA,CAAA,QAAA,CAAM,CAAA,CAC1DA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CACb,QAAA,CAAAi+D,CAAAA,CAAY,SAAA,CAAU,KAAA,CACzB,GACF,CAAA,CACCA,CAAAA,CAAY,SAAA,CAAU,WAAA,EACrB/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CAAoC,QAAA,CAAA,cAAA,CAAY,CAAA,CAChEA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CACb,QAAA,CAAAi+D,CAAAA,CAAY,SAAA,CAAU,WAAA,CACzB,CAAA,CAAA,CACF,CAAA,CAEF/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CAAoC,QAAA,CAAA,WAAA,CAAS,CAAA,CAC7DA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mCAAA,CACb,QAAA,CAAAi+D,CAAAA,CAAY,SAAA,CAAU,QAAA,EAAY,MAAA,CACrC,CAAA,CAAA,CACF,CAAA,CACCA,CAAAA,CAAY,SAAA,CAAU,MAAA,EAAUA,CAAAA,CAAY,SAAA,CAAU,MAAA,CAAO,MAAA,CAAS,CAAA,EACrE/8D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,UAAU,mCAAA,CAAoC,QAAA,CAAA,SAAA,CAAO,CAAA,CAC3DA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACZ,QAAA,CAAAi+D,CAAAA,CAAY,SAAA,CAAU,MAAA,CAAO,GAAA,CAAK90D,CAAAA,EACjCnJ,GAAAA,CAAC,MAAA,CAAA,CAAiB,SAAA,CAAU,uCAAA,CACzB,QAAA,CAAAmJ,CAAAA,CAAAA,CADQA,CAEX,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CArNEjI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,sBAAA,CAAwB+J,CAAS,CAAA,CAClD,QAAA,CAAA,CAAAJ,IAAAA,CAAC,QAAA,CAAA,CAAO,SAAA,CAAU,6BAAA,CAA8B,OAAA,CAASg9D,CAAAA,CACvD,QAAA,CAAA,CAAAl+D,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,2BAAA,CACV,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CAEZ,QAAA,CAAAA,GAAAA,CAAC,SAAA,CAAA,CAAQ,MAAA,CAAO,oBAAA,CAAqB,CAAA,CACvC,CAAA,CACAA,GAAAA,CAAC,QAAK,QAAA,CAAA,mBAAA,CAAiB,CAAA,CAAA,CACzB,CAAA,CACAkB,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,2BAAA,CAA4B,QAAA,CAAA,CAAA,SAAA,CAC/Bw7D,CAAAA,CAAO,MAAA,CAAO,kCAAA,CAAA,CACxB,CAAA,CAAA,CACF,CAuMN,CCnCO,SAASkC,EAAAA,CAAqBv5C,CAAAA,CAAgC,CAYnE,OAXiD,CAC/C,MAAA,CAAQ,SAAA,CACR,UAAA,CAAY,SAAA,CACZ,UAAA,CAAY,SAAA,CACZ,WAAA,CAAa,SAAA,CACb,UAAA,CAAY,SAAA,CACZ,UAAA,CAAY,SAAA,CACZ,SAAA,CAAW,SAAA,CACX,QAAA,CAAU,SAAA,CACV,UAAA,CAAY,SACd,CAAA,CACcA,CAAI,CAAA,EAAK,SACzB,CAKO,SAASw5C,EAAAA,CAAqBx5C,CAAAA,CAAgC,CAYnE,OAXiD,CAC/C,MAAA,CAAQ,QAAA,CACR,UAAA,CAAY,aACZ,UAAA,CAAY,YAAA,CACZ,WAAA,CAAa,aAAA,CACb,UAAA,CAAY,YAAA,CACZ,UAAA,CAAY,YAAA,CACZ,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,UAAA,CACV,UAAA,CAAY,YACd,CAAA,CACcA,CAAI,CAAA,EAAKA,CACzB,CAKO,SAASy5C,EAAAA,CAAoBz5C,CAAAA,CAAgC,CAYlE,OAXgD,CAC9C,MAAA,CAAQ,WAAA,CACR,UAAA,CAAY,QAAA,CACZ,UAAA,CAAY,WAAA,CACZ,WAAA,CAAa,WAAA,CACb,UAAA,CAAY,WAAA,CACZ,UAAA,CAAY,WAAA,CACZ,SAAA,CAAW,WAAA,CACX,QAAA,CAAU,WAAA,CACV,UAAA,CAAY,WACd,CAAA,CACaA,CAAI,CAAA,EAAK,WACxB,CAKO,SAAS05C,EAAAA,CAA0B15C,CAAAA,CAAiC,CACzE,OAAO,CACL,QAAA,CACA,YAAA,CACA,YAAA,CACA,aAAA,CACA,WAAA,CACA,UACF,CAAA,CAAE,QAAA,CAASA,CAAI,CACjB,CCzQA,SAAS25C,EAAAA,CACPC,CAAAA,CACAC,CAAAA,CACAj2C,CAAAA,CACAyF,CAAAA,CACAzrB,CAAAA,CACAk8D,CAAAA,CAAqB,GAAA,CACH,CAElB,IAAMC,CAAAA,CAA6BH,CAAAA,CAAM,GAAA,CAAK9wC,CAAAA,GAAU,CACtD,GAAGA,CAAAA,CACH,CAAA,CAAGA,CAAAA,CAAK,CAAA,EAAKlF,CAAAA,CAAQ,CAAA,CAAI,IAAA,CAAK,MAAA,EAAO,CAAI,GAAA,CAAM,EAAA,CAC/C,CAAA,CAAGkF,CAAAA,CAAK,CAAA,EAAKO,CAAAA,CAAS,CAAA,CAAI,IAAA,CAAK,MAAA,EAAO,CAAI,GAAA,CAAM,EAAA,CAChD,EAAA,CAAI,CAAA,CACJ,EAAA,CAAI,CACN,CAAA,CAAE,CAAA,CAEI2wC,CAAAA,CAAU,IAAI,GAAA,CAAID,CAAAA,CAAS,GAAA,CAAKlxD,CAAAA,EAAM,CAACA,CAAAA,CAAE,EAAA,CAAIA,CAAC,CAAC,CAAC,CAAA,CAGtD,IAAA,IAASoxD,CAAAA,CAAO,CAAA,CAAGA,CAAAA,CAAOH,CAAAA,CAAYG,CAAAA,EAAAA,CAAQ,CAC5C,IAAMC,CAAAA,CAAQ,CAAA,CAAID,CAAAA,CAAOH,CAAAA,CAGzBC,CAAAA,CAAS,OAAA,CAASjxC,CAAAA,EAAS,CAEzB,IAAMqxC,CAAAA,CAAUv2C,CAAAA,CAAQ,CAAA,CAClBw2C,CAAAA,CAAU/wC,CAAAA,CAAS,CAAA,CACzBP,CAAAA,CAAK,EAAA,EAAA,CAAOqxC,CAAAA,CAAUrxC,CAAAA,CAAK,CAAA,EAAKlrB,CAAAA,CAAO,WAAA,CAAcs8D,CAAAA,CACrDpxC,CAAAA,CAAK,EAAA,EAAA,CAAOsxC,CAAAA,CAAUtxC,CAAAA,CAAK,CAAA,EAAKlrB,CAAAA,CAAO,WAAA,CAAcs8D,CAAAA,CAGrDH,CAAAA,CAAS,OAAA,CAASM,CAAAA,EAAU,CAC1B,GAAIvxC,CAAAA,CAAK,EAAA,GAAOuxC,CAAAA,CAAM,EAAA,CAAI,OAC1B,IAAMtsB,CAAAA,CAAKjlB,CAAAA,CAAK,CAAA,CAAIuxC,CAAAA,CAAM,CAAA,CACpBhuB,CAAAA,CAAKvjB,CAAAA,CAAK,CAAA,CAAIuxC,CAAAA,CAAM,CAAA,CACpBrxB,EAAW,IAAA,CAAK,IAAA,CAAK+E,CAAAA,CAAKA,CAAAA,CAAK1B,CAAAA,CAAKA,CAAE,CAAA,EAAK,CAAA,CAC3CiuB,CAAAA,CAAS18D,CAAAA,CAAO,cAAA,CAAiBs8D,CAAAA,EAAUlxB,CAAAA,CAAWA,CAAAA,CAAAA,CAC5DlgB,CAAAA,CAAK,EAAA,EAAOilB,CAAAA,CAAK/E,CAAAA,CAAYsxB,CAAAA,CAC7BxxC,CAAAA,CAAK,EAAA,EAAOujB,CAAAA,CAAKrD,CAAAA,CAAYsxB,EAC/B,CAAC,EACH,CAAC,CAAA,CAGDT,CAAAA,CAAM,OAAA,CAASU,CAAAA,EAAS,CACtB,IAAMC,CAAAA,CAASR,CAAAA,CAAQ,GAAA,CACrB,OAAOO,CAAAA,CAAK,MAAA,EAAW,QAAA,CAAWA,CAAAA,CAAK,MAAA,CAASA,CAAAA,CAAK,MAAA,CAAO,EAC9D,CAAA,CACMl/D,CAAAA,CAAS2+D,CAAAA,CAAQ,GAAA,CACrB,OAAOO,CAAAA,CAAK,MAAA,EAAW,QAAA,CAAWA,CAAAA,CAAK,MAAA,CAASA,CAAAA,CAAK,MAAA,CAAO,EAC9D,CAAA,CACA,GAAI,CAACC,CAAAA,EAAU,CAACn/D,CAAAA,CAAQ,OAExB,IAAM0yC,CAAAA,CAAK1yC,CAAAA,CAAO,CAAA,CAAIm/D,CAAAA,CAAO,CAAA,CACvBnuB,CAAAA,CAAKhxC,CAAAA,CAAO,CAAA,CAAIm/D,CAAAA,CAAO,CAAA,CACvBxxB,CAAAA,CAAW,IAAA,CAAK,IAAA,CAAK+E,CAAAA,CAAKA,CAAAA,CAAK1B,CAAAA,CAAKA,CAAE,CAAA,EAAK,CAAA,CAC3CiuB,CAAAA,CAAAA,CACFtxB,CAAAA,CAAWprC,CAAAA,CAAO,YAAA,EAAgBorC,CAAAA,CAAYprC,CAAAA,CAAO,aAAA,CAAgBs8D,CAAAA,CAEzEM,CAAAA,CAAO,EAAA,EAAMzsB,CAAAA,CAAKusB,CAAAA,CAClBE,CAAAA,CAAO,EAAA,EAAMnuB,CAAAA,CAAKiuB,CAAAA,CAClBj/D,CAAAA,CAAO,EAAA,EAAM0yC,CAAAA,CAAKusB,CAAAA,CAClBj/D,CAAAA,CAAO,EAAA,EAAMgxC,CAAAA,CAAKiuB,EACpB,CAAC,CAAA,CAGDP,CAAAA,CAAS,OAAA,CAASjxC,CAAAA,EAAS,CACrBA,CAAAA,CAAK,EAAA,GAAO,IAAA,EAAQA,CAAAA,CAAK,EAAA,GAAO,MAAA,EAClCA,CAAAA,CAAK,CAAA,CAAIA,CAAAA,CAAK,EAAA,CACdA,EAAK,EAAA,CAAK,CAAA,EAEVA,CAAAA,CAAK,CAAA,EAAKA,CAAAA,CAAK,EAAA,CAGbA,CAAAA,CAAK,EAAA,GAAO,IAAA,EAAQA,CAAAA,CAAK,EAAA,GAAO,MAAA,EAClCA,CAAAA,CAAK,CAAA,CAAIA,CAAAA,CAAK,EAAA,CACdA,CAAAA,CAAK,EAAA,CAAK,CAAA,EAEVA,CAAAA,CAAK,CAAA,EAAKA,CAAAA,CAAK,EAAA,CAIjBA,CAAAA,CAAK,CAAA,CAAI,IAAA,CAAK,GAAA,CAAIlrB,CAAAA,CAAO,QAAA,CAAU,IAAA,CAAK,GAAA,CAAIgmB,CAAAA,CAAQhmB,CAAAA,CAAO,QAAA,CAAUkrB,CAAAA,CAAK,CAAC,CAAC,CAAA,CAC5EA,CAAAA,CAAK,CAAA,CAAI,IAAA,CAAK,GAAA,CAAIlrB,CAAAA,CAAO,QAAA,CAAU,IAAA,CAAK,GAAA,CAAIyrB,CAAAA,CAASzrB,CAAAA,CAAO,QAAA,CAAUkrB,CAAAA,CAAK,CAAC,CAAC,CAAA,CAG7EA,CAAAA,CAAK,EAAA,EAAM,EAAA,CACXA,CAAAA,CAAK,EAAA,EAAM,GACb,CAAC,EACH,CAEA,OAAOixC,CACT,CAKO,SAASU,EAAAA,CAAuB,CACrC,KAAA,CAAAb,CAAAA,CACA,KAAA,CAAAC,CAAAA,CACA,MAAA,CAAAj8D,CAAAA,CACA,MAAA,CAAQ88D,CAAAA,CACR,cAAA,CAAgBC,CAAAA,CAChB,YAAA,CAAAzpB,CAAAA,CACA,KAAA,CAAAylB,CAAAA,CACA,aAAA,CAAAiE,CAAAA,CACA,SAAA,CAAA3+D,CACF,CAAA,CAAgC,CAC9B,IAAM0qC,CAAAA,CAASpqC,MAAAA,CAAsB,IAAI,CAAA,CACnC,CAACs+D,CAAAA,CAAgBC,CAAiB,CAAA,CAAI7/D,QAAAA,CAA2B,EAAE,CAAA,CACnE,CAAC8/D,CAAAA,CAAcC,CAAe,CAAA,CAAI//D,QAAAA,CAAwB,IAAI,CAAA,CAC9D,CAACggE,CAAAA,CAAaC,CAAc,CAAA,CAAIjgE,QAAAA,CAAwB,IAAI,CAAA,CAC5D,CAACkgE,CAAAA,CAAaC,CAAc,CAAA,CAAIngE,QAAAA,CAAwB,IAAI,CAAA,CAC5D,CAACo7B,CAAAA,CAAMglB,CAAO,EAAIpgD,QAAAA,CAAS,CAAC,CAAA,CAC5B,CAACogE,CAAAA,CAAKC,CAAM,CAAA,CAAIrgE,QAAAA,CAAS,CAAE,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAE,CAAC,CAAA,CAG7CG,SAAAA,CAAU,IAAM,CACd,GAAIw+D,CAAAA,CAAM,MAAA,GAAW,CAAA,CAAG,OAExB,IAAM2B,CAAAA,CAAY5B,EAAAA,CAChBC,CAAAA,CACAC,CAAAA,CACAj8D,CAAAA,CAAO,KAAA,CACPA,CAAAA,CAAO,MAAA,CACPA,CAAAA,CACA,GACF,CAAA,CACAk9D,CAAAA,CAAkBS,CAAS,EAC7B,CAAA,CAAG,CAAC3B,CAAAA,CAAOC,CAAAA,CAAOj8D,CAAM,CAAC,CAAA,CAGzB,IAAM49D,CAAAA,CAAsB1xD,WAAAA,CAC1B,CAAC2xD,CAAAA,CAAgBn+D,CAAAA,GAAwB,CAClCM,CAAAA,CAAO,cAAA,GACZN,CAAAA,CAAE,eAAA,EAAgB,CAClB09D,CAAAA,CAAgBS,CAAM,CAAA,EACxB,CAAA,CACA,CAAC79D,EAAO,cAAc,CACxB,CAAA,CAEM6jC,CAAAA,CAAkB33B,WAAAA,CACrBxM,CAAAA,EAAuC,CACtC,GAAI,CAACy9D,CAAAA,EAAgB,CAACp0B,CAAAA,CAAO,OAAA,CAAS,OAGtC,IAAMjqC,EAAAA,CADMiqC,CAAAA,CAAO,OAAA,CACF,qBAAA,EAAsB,CACjCv1C,EAAAA,CAAAA,CAAKkM,CAAAA,CAAE,OAAA,CAAUZ,EAAAA,CAAK,IAAA,CAAO2+D,CAAAA,CAAI,CAAA,EAAKhlC,CAAAA,CACtChlC,EAAAA,CAAAA,CAAKiM,CAAAA,CAAE,OAAA,CAAUZ,EAAAA,CAAK,GAAA,CAAM2+D,CAAAA,CAAI,CAAA,EAAKhlC,CAAAA,CAE3CykC,CAAAA,CAAmBvwD,EAAAA,EACjBA,EAAAA,CAAK,GAAA,CAAKue,EAAAA,EACRA,EAAAA,CAAK,EAAA,GAAOiyC,CAAAA,CAAe,CAAE,GAAGjyC,EAAAA,CAAM,CAAA,CAAA13B,EAAAA,CAAG,CAAA,CAAAC,EAAAA,CAAG,EAAA,CAAID,EAAAA,CAAG,EAAA,CAAIC,EAAE,CAAA,CAAIy3B,EAC/D,CACF,EACF,CAAA,CACA,CAACiyC,CAAAA,CAAc1kC,EAAMglC,CAAG,CAC1B,CAAA,CAEMz5B,CAAAA,CAAgB93B,WAAAA,CAAY,IAAM,CACtCkxD,CAAAA,CAAgB,IAAI,EACtB,CAAA,CAAG,EAAE,CAAA,CAGCU,CAAAA,CAAkB5xD,WAAAA,CACtB,CAACgf,CAAAA,CAAsBxrB,CAAAA,GAAwB,CAC7CA,CAAAA,CAAE,eAAA,EAAgB,CAClBs9D,CAAAA,GAAgB,CACd,IAAA,CAAM,YAAA,CACN,IAAA,CAAA9xC,CAAAA,CACA,QAAA,CAAU,CAAE,CAAA,CAAGxrB,CAAAA,CAAE,OAAA,CAAS,CAAA,CAAGA,CAAAA,CAAE,OAAQ,CACzC,CAAC,EACH,CAAA,CACA,CAACs9D,CAAa,CAChB,CAAA,CAGMe,CAAAA,CAAkB7xD,WAAAA,CACtB,CAACywD,CAAAA,CAAiBj9D,CAAAA,GAAwB,CACxCA,CAAAA,CAAE,eAAA,EAAgB,CAClBs9D,CAAAA,GAAgB,CACd,IAAA,CAAM,YAAA,CACN,IAAA,CAAAL,CAAAA,CACA,QAAA,CAAU,CAAE,EAAGj9D,CAAAA,CAAE,OAAA,CAAS,CAAA,CAAGA,CAAAA,CAAE,OAAQ,CACzC,CAAC,EACH,CAAA,CACA,CAACs9D,CAAa,CAChB,CAAA,CAGMgB,CAAAA,CAAkB9xD,WAAAA,CACrB2xD,CAAAA,EAA6C,CAC5C,IAAM3yC,CAAAA,CAAO+xC,CAAAA,CAAe,IAAA,CAAMhyD,EAAAA,EAAMA,EAAAA,CAAE,EAAA,GAAO4yD,CAAM,CAAA,CACvD,OAAO3yC,CAAAA,CAAO,CAAE,CAAA,CAAGA,CAAAA,CAAK,CAAA,CAAG,CAAA,CAAGA,CAAAA,CAAK,CAAE,CAAA,CAAI,CAAE,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAE,CACxD,CAAA,CACA,CAAC+xC,CAAc,CACjB,CAAA,CAGMgB,CAAAA,CAAe/xD,WAAAA,CAClBgf,CAAAA,EAAiC,CAChC,GAAIA,CAAAA,CAAK,cAAA,CAAgB,OAAO,SAAA,CAEhC,OAAQlrB,CAAAA,CAAO,WAAA,EACb,KAAK,QAAA,CACH,OAAOkrB,CAAAA,CAAK,IAAA,CAAK,QAAA,GAAa,MAAA,CAAS,SAAA,CAAY,SAAA,CACrD,KAAK,UAAA,CACH,IAAM/sB,CAAAA,CAAW+sB,CAAAA,CAAK,IAAA,CAAK,QAAA,CAC3B,OAAI/sB,CAAAA,GAAa,QAAA,CAAiB,SAAA,CAC9BA,CAAAA,GAAa,MAAA,CAAe,SAAA,CAC5BA,CAAAA,GAAa,QAAA,CAAiB,SAAA,CAC3B,SAAA,CACT,KAAK,UAAA,CACH,OAAO+sB,CAAAA,CAAK,IAAA,CAAK,UAAA,CAAa,SAAA,CAAY,SAAA,CAC5C,QACE,OAAO,SACX,CACF,CAAA,CACA,CAAClrB,CAAAA,CAAO,WAAW,CACrB,CAAA,CAEA,OAAIg8D,CAAAA,CAAM,MAAA,GAAW,CAAA,CAEjB/9D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,2BAAA,CAA6B+J,CAAS,CAAA,CACvD,QAAA,CAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,WAAA,CAAE,CAAA,CAClDA,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,gCAAA,CAAiC,QAAA,CAAA,6BAAA,CAA2B,CAAA,CACzEA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,mCAAA,CAAoC,QAAA,CAAA,kDAAA,CAEjD,CAAA,CAAA,CACF,CAAA,CAKFkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW3J,CAAAA,CAAG,qBAAA,CAAuB+J,CAAS,CAAA,CAEjD,QAAA,CAAA,CAAAJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,2BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,0BAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CAAkC,QAAA,CAAAg8D,CAAAA,CAAM,UAAA,CAAW,CAAA,CACnEh8D,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,OAAA,CAAK,CAAA,CAAA,CACxD,CAAA,CACAkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,0BAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CAAkC,QAAA,CAAAg8D,CAAAA,CAAM,UAAA,CAAW,CAAA,CACnEh8D,GAAAA,CAAC,QAAK,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,WAAA,CAAS,CAAA,CAAA,CAC5D,CAAA,CACCu2C,CAAAA,EACCr1C,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,4DAAA,CACd,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CACb,QAAA,CAAAu2C,CAAAA,CAAa,OAAA,CAAQ,MAAA,CACxB,CAAA,CACAv2C,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CAAiC,QAAA,CAAA,eAAA,CAAa,CAAA,CAAA,CAChE,CAAA,CAAA,CAEJ,CAAA,CAGCiD,CAAAA,CAAO,UAAA,EACN/B,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,mCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,OAAA,CAAS,IAAM0gD,CAAAA,CAASygB,CAAAA,EAAM,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAI,EAAA,CAAK,CAAC,CAAC,CAAA,CACnD,QAAA,CAAA,GAAA,CAED,CAAA,CACAjgE,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,gCAAA,CAAkC,QAAA,CAAA,CAAA,IAAA,CAAK,KAAA,CAAMw6B,CAAAA,CAAO,GAAG,CAAA,CAAE,GAAA,CAAA,CAAC,EAC1E17B,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,OAAA,CAAS,IAAM0gD,CAAAA,CAASygB,CAAAA,EAAM,IAAA,CAAK,GAAA,CAAIA,CAAAA,CAAI,EAAA,CAAK,EAAG,CAAC,CAAA,CACrD,QAAA,CAAA,QAAA,CAED,CAAA,CACAnhE,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,8BAAA,CACV,OAAA,CAAS,IAAM,CACb0gD,CAAAA,CAAQ,CAAC,CAAA,CACTigB,CAAAA,CAAO,CAAE,CAAA,CAAG,CAAA,CAAG,CAAA,CAAG,CAAE,CAAC,EACvB,CAAA,CACD,QAAA,CAAA,OAAA,CAED,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAGA3gE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4BAAA,CACZ,QAAA,CAAA,KAAA,CAAM,IAAA,CAAK,IAAI,GAAA,CAAIk/D,CAAAA,CAAM,GAAA,CAAKv8D,CAAAA,EAAMA,CAAAA,CAAE,IAAI,CAAC,CAAC,CAAA,CAAE,GAAA,CAAK0iB,CAAAA,EAClDnkB,IAAAA,CAAC,KAAA,CAAA,CAAe,SAAA,CAAU,iCAAA,CACxB,UAAAlB,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,kCAAA,CACV,KAAA,CAAO,CAAE,UAAA,CAAY4+D,EAAAA,CAAqBv5C,CAAI,CAAE,CAAA,CAClD,CAAA,CACAnkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,kCAAA,CACb,QAAA,CAAA,CAAA49D,EAAAA,CAAoBz5C,CAAI,CAAA,CAAE,GAAA,CAAEw5C,EAAAA,CAAqBx5C,CAAI,CAAA,CAAA,CACxD,CAAA,CAAA,CAAA,CAPQA,CAQV,CACD,CAAA,CACH,CAAA,CAGAnkB,IAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAK8qC,CAAAA,CACL,SAAA,CAAU,4BAAA,CACV,KAAA,CAAO/oC,CAAAA,CAAO,KAAA,CACd,MAAA,CAAQA,CAAAA,CAAO,MAAA,CACf,WAAA,CAAa6jC,CAAAA,CACb,SAAA,CAAWG,CAAAA,CACX,YAAA,CAAcA,CAAAA,CAEd,QAAA,CAAA,CAAA/lC,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAW,CAAA,UAAA,EAAaw/D,CAAAA,CAAI,CAAC,CAAA,EAAA,EAAKA,CAAAA,CAAI,CAAC,CAAA,QAAA,EAAWhlC,CAAI,CAAA,CAAA,CAAA,CAEvD,QAAA,CAAA,CAAA17B,GAAAA,CAAC,KAAE,SAAA,CAAU,2BAAA,CACV,QAAA,CAAAk/D,CAAAA,CAAM,GAAA,CAAKU,CAAAA,EAAS,CACnB,IAAMwB,CAAAA,CAAYH,CAAAA,CAChB,OAAOrB,CAAAA,CAAK,MAAA,EAAW,QAAA,CAAWA,CAAAA,CAAK,MAAA,CAASA,CAAAA,CAAK,MAAA,CAAO,EAC9D,CAAA,CACMyB,EAAAA,CAAYJ,CAAAA,CAChB,OAAOrB,CAAAA,CAAK,MAAA,EAAW,QAAA,CAAWA,CAAAA,CAAK,MAAA,CAASA,CAAAA,CAAK,MAAA,CAAO,EAC9D,CAAA,CAEM0B,EAAAA,CAAgBvC,EAAAA,CAA0Ba,CAAAA,CAAK,IAAI,CAAA,CACnDz3B,EAAAA,CAAYq4B,CAAAA,GAAgBZ,CAAAA,CAAK,EAAA,CACjC2B,EAAAA,CAAa3B,CAAAA,CAAK,cAAA,CAExB,OACE1+D,IAAAA,CAAC,GAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,0BAAA,CACA4wC,EAAAA,EAAa,SAAA,CACbo5B,EAAAA,EAAc,UAChB,CAAA,CACA,YAAA,CAAc,IAAMd,CAAAA,CAAeb,CAAAA,CAAK,EAAE,CAAA,CAC1C,YAAA,CAAc,IAAMa,CAAAA,CAAe,IAAI,CAAA,CACvC,OAAA,CAAU99D,EAAAA,EAAMq+D,CAAAA,CAAgBpB,CAAAA,CAAMj9D,EAAC,CAAA,CAEvC,QAAA,CAAA,CAAA3C,GAAAA,CAAC,MAAA,CAAA,CACC,EAAA,CAAIohE,CAAAA,CAAU,CAAA,CACd,EAAA,CAAIA,CAAAA,CAAU,CAAA,CACd,EAAA,CAAIC,EAAAA,CAAU,CAAA,CACd,EAAA,CAAIA,EAAAA,CAAU,CAAA,CACd,MAAA,CAAQzC,EAAAA,CAAqBgB,CAAAA,CAAK,IAAI,CAAA,CACtC,WAAA,CAAa2B,EAAAA,CAAat+D,CAAAA,CAAO,SAAA,CAAY,CAAA,CAAIA,CAAAA,CAAO,SAAA,CACxD,aAAA,CAAeklC,EAAAA,CAAY,CAAA,CAAI,EAAA,CAC/B,SAAA,CAAWm5B,EAAAA,CAAgB,iBAAA,CAAoB,MAAA,CACjD,CAAA,CACCr+D,CAAAA,CAAO,cAAA,EAAkBklC,EAAAA,EACxBnoC,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAA,CAAIohE,CAAAA,CAAU,CAAA,CAAIC,EAAAA,CAAU,CAAA,EAAK,CAAA,CACjC,CAAA,CAAA,CAAID,CAAAA,CAAU,CAAA,CAAIC,EAAAA,CAAU,CAAA,EAAK,CAAA,CACjC,UAAU,gCAAA,CACV,UAAA,CAAW,QAAA,CAEV,QAAA,CAAAxC,EAAAA,CAAqBe,CAAAA,CAAK,IAAI,CAAA,CACjC,CAAA,CAAA,CAAA,CA5BGA,CAAAA,CAAK,EA8BZ,CAEJ,CAAC,CAAA,CACH,CAAA,CAGA5/D,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,2BAAA,CACV,QAAA,CAAAkgE,CAAAA,CAAe,GAAA,CAAK/xC,CAAAA,EAAS,CAC5B,IAAMga,CAAAA,CAAYm4B,CAAAA,GAAgBnyC,CAAAA,CAAK,EAAA,CACjCozC,EAAAA,CAAapzC,CAAAA,CAAK,cAAA,CAExB,OACEjtB,IAAAA,CAAC,GAAA,CAAA,CAEC,SAAA,CAAW3J,CAAAA,CACT,0BAAA,CACA4wC,CAAAA,EAAa,SAAA,CACbo5B,EAAAA,EAAc,UAChB,CAAA,CACA,SAAA,CAAW,CAAA,UAAA,EAAapzC,CAAAA,CAAK,CAAC,CAAA,EAAA,EAAKA,CAAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CACzC,WAAA,CAAcxrB,EAAAA,EAAMk+D,CAAAA,CAAoB1yC,CAAAA,CAAK,EAAA,CAAIxrB,EAAC,CAAA,CAClD,YAAA,CAAc,IAAM49D,CAAAA,CAAepyC,CAAAA,CAAK,EAAE,CAAA,CAC1C,YAAA,CAAc,IAAMoyC,CAAAA,CAAe,IAAI,CAAA,CACvC,OAAA,CAAU59D,EAAAA,EAAMo+D,CAAAA,CAAgB5yC,CAAAA,CAAMxrB,EAAC,CAAA,CAEvC,QAAA,CAAA,CAAA3C,GAAAA,CAAC,QAAA,CAAA,CACC,CAAA,CAAGuhE,EAAAA,CAAat+D,CAAAA,CAAO,QAAA,CAAW,GAAA,CAAMA,CAAAA,CAAO,QAAA,CAC/C,IAAA,CAAMi+D,CAAAA,CAAa/yC,CAAI,CAAA,CACvB,MAAA,CAAQozC,EAAAA,CAAa,SAAA,CAAY,SAAA,CACjC,WAAA,CAAaA,EAAAA,CAAa,CAAA,CAAI,CAAA,CAC9B,OAAA,CAASp5B,CAAAA,CAAY,CAAA,CAAI,EAAA,CAC3B,CAAA,CACCllC,CAAAA,CAAO,UAAA,EACNjD,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAGiD,CAAAA,CAAO,QAAA,CAAW,EAAA,CACrB,SAAA,CAAU,gCAAA,CACV,UAAA,CAAW,QAAA,CAEV,QAAA,CAAAkrB,CAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,MAAA,CAAS,EAAA,CACtBA,CAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,SAAA,CAAU,CAAA,CAAG,EAAE,CAAA,CAAI,KAAA,CACnCA,CAAAA,CAAK,IAAA,CAAK,KAAA,CAChB,CAAA,CAAA,CAAA,CA5BGA,CAAAA,CAAK,EA8BZ,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGAnuB,GAAAA,CAAC,MAAA,CAAA,CACC,QAAA,CAAAA,GAAAA,CAAC,QAAA,CAAA,CACC,EAAA,CAAG,WAAA,CACH,WAAA,CAAY,IAAA,CACZ,YAAA,CAAa,IAAA,CACb,IAAA,CAAK,GAAA,CACL,IAAA,CAAK,GAAA,CACL,MAAA,CAAO,MAAA,CACP,WAAA,CAAY,aAAA,CAEZ,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,kBAAA,CAAmB,IAAA,CAAK,SAAA,CAAU,CAAA,CAC5C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CCxcO,SAASwhE,GAAkB,CAChC,MAAA,CAAAjgE,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,eAAA,CAAAquD,CAAAA,CACA,cAAA,CAAAv+C,CAAAA,CACA,SAAA,CAAWw+C,CACb,CAAA,CAA2B,CACzB,GAAM,CAACC,CAAAA,CAAQC,CAAS,CAAA,CAAIthE,QAAAA,CAAS,EAAE,CAAA,CACjC,CAACuhE,CAAAA,CAAcC,CAAe,CAAA,CAAIxhE,QAAAA,CAAS,KAAK,CAAA,CAChD,CAAC7H,CAAAA,CAAOqtB,CAAQ,CAAA,CAAIxlB,QAAAA,CAAwB,IAAI,CAAA,CAChD,CAACyhE,CAAAA,CAAeC,CAAgB,CAAA,CAAI1hE,QAAAA,CAA+B,IAAI,CAAA,CACvEqK,CAAAA,CAAW/I,MAAAA,CAA4B,IAAI,CAAA,CAE3C8Z,CAAAA,CAAYmmD,CAAAA,EAAgBH,CAAAA,CAGlCjhE,SAAAA,CAAU,IAAM,CACVc,CAAAA,EAAUoJ,CAAAA,CAAS,OAAA,EACrBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,GAErB,CAAA,CAAG,CAACpJ,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,CAAC+Y,CAAAA,EACzBmI,CAAAA,GAEJ,CAAA,CAEA,GAAItiB,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAAA,CAAQma,CAAS,CAAC,CAAA,CAEtB,IAAMmI,CAAAA,CAAc,IAAM,CACnBnI,CAAAA,GACHkmD,CAAAA,CAAU,EAAE,CAAA,CACZ97C,CAAAA,CAAS,IAAI,CAAA,CACbk8C,CAAAA,CAAiB,IAAI,CAAA,CACrB5uD,CAAAA,EAAQ,EAEZ,CAAA,CAEM6uD,CAAAA,CAAiB,SAAY,CACjC,GAAI,EAAA,CAACN,CAAAA,CAAO,IAAA,EAAK,EAAKjmD,CAAAA,CAAAA,CAEtB,CAAAomD,EAAgB,IAAI,CAAA,CACpBh8C,CAAAA,CAAS,IAAI,CAAA,CACbk8C,CAAAA,CAAiB,IAAI,CAAA,CAErB,GAAI,CACF,IAAME,CAAAA,CAAO,MAAMh/C,CAAAA,CAAey+C,CAAAA,CAAO,IAAA,EAAM,CAAA,CAC/CK,CAAAA,CAAiBE,CAAI,EACvB,CAAA,MAASz7C,CAAAA,CAAK,CACZX,CAAAA,CAASW,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAI,OAAA,CAAU,yBAAyB,EACzE,CAAA,OAAE,CACAq7C,CAAAA,CAAgB,KAAK,EACvB,CAAA,CACF,CAAA,CAEMK,CAAAA,CAAkB,IAAM,CACxBJ,CAAAA,GACFN,CAAAA,CAAgBM,CAAa,CAAA,CAC7Bl+C,CAAAA,EAAY,EAEhB,CAAA,CAEA,OAAKtiB,CAAAA,CAGHL,IAAAA,CAAChB,EAAAA,CAAA,CAEC,QAAA,CAAA,CAAAF,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uDAAA,CACV,OAAA,CAAS6jB,CAAAA,CACX,CAAA,CAGA7jB,GAAAA,CAAC,OAAI,SAAA,CAAU,+DAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,2FAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,WAAA,CAAa,2BAAA,CACb,SAAA,CAAW,oEACb,CAAA,CACA,OAAA,CAAUyB,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sEAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,sDAAA,CACZ,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CACN,SAAA,CAAU,eAAA,CAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,4BAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,EACAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,mBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,mBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CAAA,CACF,CAAA,CAAM,+BAAA,CAAA,CAER,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,iEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS6jB,CAAAA,CACT,QAAA,CAAUnI,CAAAA,CACV,SAAA,CAAU,sEAAA,CAEV,QAAA,CAAA1b,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,sBAAA,CACF,MAAA,CAAO,cAAA,CACP,YAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CAChB,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sCAAA,CACZ,QAAA,CAAC+hE,CAAAA,CAmDA/hE,GAAAA,CAAA+H,QAAAA,CAAA,CAEE,QAAA,CAAA7G,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,iBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAgB,QAAA,CAAA,8BAAA,CAA4B,CAAA,CAAA,CAC9D,CAAA,CAGC+hE,CAAAA,CAAc,WAAA,EACb/hE,GAAAA,CAAC,OAAI,SAAA,CAAU,yDAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAA+hE,CAAAA,CAAc,WAAA,CAAY,CAAA,CAClE,CAAA,CAIF7gE,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,0CAAA,CAA2C,QAAA,CAAA,CAAA,WAAA,CAC7C6gE,CAAAA,CAAc,OAAA,CAAQ,MAAA,CAAO,GAAA,CAAA,CACzC,CAAA,CACA/hE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACZ,QAAA,CAAA+hE,CAAAA,CAAc,OAAA,CAAQ,GAAA,CAAI,CAACjmE,CAAAA,CAAK7D,CAAAA,GAC/B+H,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,gFAAA,CAET,QAAA,CAAAlE,CAAAA,CAAI,KAAA,CAAA,CAHA7D,CAIP,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,0CAAA,CAA2C,QAAA,CAAA,CAAA,SAAA,CAC/C6gE,CAAAA,CAAc,KAAA,CAAM,MAAA,CAAO,GAAA,CAAA,CACrC,CAAA,CACA7gE,IAAAA,CAAC,OAAI,SAAA,CAAU,oCAAA,CACZ,QAAA,CAAA,CAAA6gE,CAAAA,CAAc,KAAA,CAAM,KAAA,CAAM,CAAA,CAAG,EAAE,CAAA,CAAE,GAAA,CAAI,CAACnmE,CAAAA,CAAM3D,CAAAA,GAC3C+H,GAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,kDAAA,CAEV,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,UAAU,mCAAA,CAAqC,QAAA,CAAApE,CAAAA,CAAK,KAAA,CAAM,CAAA,CAC5DA,CAAAA,CAAK,WAAA,EACJoE,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,yCAAA,CACV,QAAA,CAAApE,CAAAA,CAAK,WAAA,CACR,CAAA,CAAA,CAEJ,CAAA,CACCA,CAAAA,CAAK,QAAA,EACJoE,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAW,CAAA,0CAAA,EACTpE,CAAAA,CAAK,QAAA,GAAa,QAAA,CACd,4BAAA,CACAA,CAAAA,CAAK,QAAA,GAAa,MAAA,CAClB,kCAAA,CACAA,EAAK,QAAA,GAAa,QAAA,CAClB,kCAAA,CACA,8BACN,CAAA,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAK,QAAA,CACR,CAAA,CAAA,CAEJ,CAAA,CAAA,CA3BK3D,CA4BP,CACD,CAAA,CACA8pE,CAAAA,CAAc,KAAA,CAAM,MAAA,CAAS,EAAA,EAC5B7gE,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,wCAAA,CAAyC,QAAA,CAAA,CAAA,GAAA,CAClD6gE,CAAAA,CAAc,KAAA,CAAM,MAAA,CAAS,EAAA,CAAG,gBAAA,CAAA,CACpC,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAxIA7gE,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA7G,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,gDAAA,CAAiD,QAAA,CAAA,qBAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,UAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,KAAA,CAAOg3D,CAAAA,CACP,QAAA,CAAWh/D,CAAAA,EAAMi/D,CAAAA,CAAUj/D,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACzC,WAAA,CAAY,2IAAA,CACZ,SAAA,CAAU,6KAAA,CACV,SAAU+Y,CAAAA,CACZ,CAAA,CACA1b,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,2FAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CAGCvH,CAAAA,EACCuH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4EAAA,CACZ,QAAA,CAAAvH,CAAAA,CACH,CAAA,CAIFyI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,mEAAA,CAAoE,QAAA,CAAA,iBAAA,CAEjF,CAAA,CACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAA,CACC,2GAAA,CACA,8GAAA,CACA,0GACF,CAAA,CAAE,GAAA,CAAI,CAACoiE,CAAAA,CAASnqE,CAAAA,GACd+H,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM4hE,CAAAA,CAAUQ,CAAO,CAAA,CAChC,QAAA,CAAU1mD,CAAAA,CACV,SAAA,CAAU,+KAAA,CAET,QAAA,CAAA0mD,CAAAA,CAAAA,CALInqE,CAMP,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CA0FJ,CAAA,CAGAiJ,IAAAA,CAAC,OAAI,SAAA,CAAU,sEAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACE,QAAA,CAAA0b,CAAAA,EACCxa,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+CAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,OAAA,CAAQ,WAAA,CAC5C,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,SAAA,CAAU,YAAA,CACV,EAAA,CAAG,IAAA,CACH,EAAA,CAAG,IAAA,CACH,CAAA,CAAE,IAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,IAAA,CAAK,MAAA,CACP,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,YAAA,CACV,IAAA,CAAK,cAAA,CACL,CAAA,CAAE,iHAAA,CACJ,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,uBAAA,CAAqB,CAAA,CAAA,CAC7B,CAAA,CAEJ,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS6jB,CAAAA,CACT,QAAA,CAAUnI,EACV,SAAA,CAAU,+GAAA,CACX,QAAA,CAAA,QAAA,CAED,CAAA,CACEqmD,CAAAA,CAaA/hE,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASmiE,CAAAA,CACT,SAAA,CAAU,2DAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,SACT,CAAA,CACD,QAAA,CAAA,qBAAA,CAED,CAAA,CArBAniE,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASiiE,CAAAA,CACT,QAAA,CAAU,CAACN,CAAAA,CAAO,IAAA,EAAK,EAAKjmD,CAAAA,CAC5B,SAAA,CAAU,+EAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,SACT,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAY,eAAA,CAAkB,eAAA,CACjC,CAAA,CAAA,CAaJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAzRkB,IA2RtB,CChWO,IAAM2mD,EAAAA,CAAY,CAEvB,aAAA,CAAe,CACb,SAAU,QAAA,CACV,IAAA,CAAM,aAAA,CACN,aAAA,CAAe,KAAA,CACf,cAAA,CAAgB,GAAA,CAChB,eAAA,CAAiB,GAAA,CACjB,cAAA,CAAgB,IAAA,CAChB,YAAA,CAAc,IAChB,CAAA,CACA,OAAA,CAAS,CACP,QAAA,CAAU,QAAA,CACV,IAAA,CAAM,OAAA,CACN,aAAA,CAAe,IAAA,CACf,cAAA,CAAgB,GAAA,CAChB,eAAA,CAAiB,GAAA,CACjB,cAAA,CAAgB,KAAA,CAChB,YAAA,CAAc,IAChB,CAAA,CACA,eAAA,CAAiB,CACf,QAAA,CAAU,QAAA,CACV,IAAA,CAAM,eAAA,CACN,aAAA,CAAe,KAAA,CACf,cAAA,CAAgB,IAAA,CAChB,eAAA,CAAiB,KAAA,CACjB,cAAA,CAAgB,KAAA,CAChB,YAAA,CAAc,IAChB,CAAA,CAGA,4BAAA,CAA8B,CAC5B,QAAA,CAAU,WAAA,CACV,IAAA,CAAM,mBAAA,CACN,aAAA,CAAe,GAAA,CACf,cAAA,CAAgB,IAAA,CAChB,eAAA,CAAiB,IAAA,CACjB,cAAA,CAAgB,IAAA,CAChB,aAAc,IAChB,CAAA,CACA,wBAAA,CAA0B,CACxB,QAAA,CAAU,WAAA,CACV,IAAA,CAAM,eAAA,CACN,aAAA,CAAe,GAAA,CACf,cAAA,CAAgB,IAAA,CAChB,eAAA,CAAiB,IAAA,CACjB,cAAA,CAAgB,IAAA,CAChB,YAAA,CAAc,IAChB,CAAA,CACA,yBAAA,CAA2B,CACzB,QAAA,CAAU,WAAA,CACV,IAAA,CAAM,gBAAA,CACN,aAAA,CAAe,GAAA,CACf,cAAA,CAAgB,KAAA,CAChB,eAAA,CAAiB,MAAA,CACjB,cAAA,CAAgB,IAAA,CAChB,YAAA,CAAc,IAChB,CACF,EAgBO,IAAMC,EAAAA,CAAc,CACzB,KAAA,CAAO,CACL,gBAAA,CAAkB,EAAA,CAClB,aAAA,CAAe,CAAA,CACf,mBAAA,CAAqB,IACvB,CAAA,CACA,GAAA,CAAK,CACH,gBAAA,CAAkB,GAAA,CAClB,aAAA,CAAe,CAAA,CACf,mBAAA,CAAqB,IACvB,CAAA,CACA,UAAA,CAAY,CACV,gBAAA,CAAkB,GAAA,CAClB,cAAe,EAAA,CACf,mBAAA,CAAqB,KACvB,CACF,CAAA,CAKaC,EAAAA,CAAc,CACzB,YAAA,CAAc,CACZ,OAAA,CAAS,IAAA,CACT,WAAA,CAAa,OAAA,CACb,eAAA,CAAiB,GACnB,CAAA,CACA,YAAA,CAAc,CACZ,OAAA,CAAS,IAAA,CACT,WAAA,CAAa,KAAA,CACb,eAAA,CAAiB,IACnB,CAAA,CACA,eAAA,CAAiB,CACf,OAAA,CAAS,IAAA,CACT,WAAA,CAAa,OAAA,CACb,eAAA,CAAiB,GACnB,CAAA,CACA,cAAA,CAAgB,CACd,OAAA,CAAS,IAAA,CACT,WAAA,CAAa,YAAA,CACb,eAAA,CAAiB,GACnB,CAAA,CACA,gBAAA,CAAkB,CAChB,OAAA,CAAS,IAAA,CACT,WAAA,CAAa,OAAA,CACb,eAAA,CAAiB,GACnB,CACF,EC9GO,SAASC,EAAAA,CACdC,CAAAA,CACAC,CAAAA,CACAC,CAAAA,CACQ,CACR,IAAMC,CAAAA,CAAYP,EAAAA,CAAUI,CAAK,CAAA,CACjC,GAAI,CAACG,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,CAAA,eAAA,EAAkBH,CAAK,CAAA,CAAE,CAAA,CAG3C,IAAMI,CAAAA,CAAaH,CAAAA,CAAc,GAAA,CAAQE,CAAAA,CAAU,cAAA,CAC7CE,CAAAA,CAAcH,CAAAA,CAAe,GAAA,CAAQC,CAAAA,CAAU,eAAA,CAErD,OAAOC,CAAAA,CAAYC,CACrB,CAKO,SAASC,EAAAA,CAAWC,CAAAA,CAAsB,CAC/C,OAAO,CAAA,CAAA,EAAIA,CAAAA,CAAK,OAAA,CAAQ,CAAC,CAAC,CAAA,CAC5B,CAOO,IAAMC,EAAAA,CAAN,KAAqB,CAArB,WAAA,EAAA,CACL,IAAA,CAAQ,UAAA,CAA4B,EAAC,CACrC,IAAA,CAAQ,SAAA,CAAqD,GAAC,CAK9D,MAAA,CAAOC,CAAAA,CAAwE,CAC7E,IAAMF,CAAAA,CAAOR,EAAAA,CAAcU,CAAAA,CAAU,KAAA,CAAOA,CAAAA,CAAU,WAAA,CAAaA,CAAAA,CAAU,YAAY,CAAA,CAEnFC,CAAAA,CAA6B,CACjC,GAAGD,CAAAA,CACH,EAAA,CAAI,CAAA,GAAA,EAAM,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,SAAA,CAAU,CAAC,CAAC,CAAA,CAAA,CAC/D,SAAA,CAAW,IAAI,IAAA,CACf,IAAA,CAAAF,CACF,CAAA,CAEA,OAAA,IAAA,CAAK,UAAA,CAAW,IAAA,CAAKG,CAAa,CAAA,CAGlC,IAAA,CAAK,SAAA,CAAU,OAAA,CAASC,CAAAA,EAAaA,CAAAA,CAASD,CAAa,CAAC,CAAA,CAGxD,IAAA,CAAK,UAAA,CAAW,MAAA,CAAS,GAAA,GAC3B,IAAA,CAAK,UAAA,CAAa,IAAA,CAAK,UAAA,CAAW,KAAA,CAAM,IAAK,CAAA,CAAA,CAGxCA,CACT,CAKA,QAAA,CAASE,CAAAA,CAAoD,CAC3D,IAAIC,CAAAA,CAAa,IAAA,CAAK,UAAA,CAGlBD,CAAAA,GACFC,CAAAA,CAAaA,EAAW,MAAA,CACrBC,CAAAA,EAAOA,CAAAA,CAAG,SAAA,EAAaF,CAAAA,CAAU,KAAA,EAASE,CAAAA,CAAG,SAAA,EAAaF,CAAAA,CAAU,GACvE,CAAA,CAAA,CAGF,IAAMG,CAAAA,CAAkBF,CAAAA,CAAW,MAAA,CAC7BG,CAAAA,CAAYH,CAAAA,CAAW,MAAA,CAAO,CAACv0C,CAAAA,CAAKw0C,CAAAA,GAAOx0C,CAAAA,CAAMw0C,CAAAA,CAAG,IAAA,CAAM,CAAC,CAAA,CAC3DG,CAAAA,CAAmBJ,CAAAA,CAAW,MAAA,CAAO,CAACv0C,CAAAA,CAAKw0C,CAAAA,GAAOx0C,CAAAA,CAAMw0C,CAAAA,CAAG,WAAA,CAAa,CAAC,CAAA,CACzEI,CAAAA,CAAoBL,CAAAA,CAAW,MAAA,CAAO,CAACv0C,CAAAA,CAAKw0C,CAAAA,GAAOx0C,CAAAA,CAAMw0C,CAAAA,CAAG,YAAA,CAAc,CAAC,CAAA,CAC3EK,CAAAA,CAAgBN,CAAAA,CAAW,MAAA,CAAQC,CAAAA,EAAOA,CAAAA,CAAG,OAAO,CAAA,CACpDM,CAAAA,CAAgBP,CAAAA,CAAW,MAAA,CAAO,CAACv0C,CAAAA,CAAKw0C,CAAAA,GAAOx0C,CAAAA,CAAMw0C,EAAG,QAAA,CAAU,CAAC,CAAA,CAGnEO,CAAAA,CAA8C,EAAC,CAC/CC,CAAAA,CAAyC,EAAC,CAEhD,OAAAT,CAAAA,CAAW,OAAA,CAASC,CAAAA,EAAO,CACzBO,CAAAA,CAAoBP,CAAAA,CAAG,OAAO,CAAA,CAAA,CAAKO,CAAAA,CAAoBP,CAAAA,CAAG,OAAO,CAAA,EAAK,CAAA,EAAK,CAAA,CAC3EQ,CAAAA,CAAeR,CAAAA,CAAG,OAAO,CAAA,CAAA,CAAKQ,CAAAA,CAAeR,CAAAA,CAAG,OAAO,CAAA,EAAK,CAAA,EAAKA,CAAAA,CAAG,KACtE,CAAC,CAAA,CAEM,CACL,eAAA,CAAAC,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CACA,iBAAA,CAAAC,CAAAA,CACA,mBAAA,CAAAG,CAAAA,CACA,cAAA,CAAAC,CAAAA,CACA,eAAA,CAAiBP,CAAAA,CAAkB,CAAA,CAAIK,CAAAA,CAAgBL,CAAAA,CAAkB,CAAA,CACzE,WAAA,CAAaA,CAAAA,CAAkB,CAAA,CAAII,CAAAA,CAAc,MAAA,CAASJ,CAAAA,CAAkB,CAC9E,CACF,CAKA,mBAAA,CAAoBQ,CAAAA,CAAQ,EAAA,CAAmB,CAC7C,OAAO,IAAA,CAAK,UAAA,CAAW,KAAA,CAAM,CAACA,CAAK,CAAA,CAAE,OAAA,EACvC,CAKA,UAAA,CAAWC,CAAAA,CAA0CC,CAAAA,CAA0B,OAAA,CAM7E,CAOA,IAAMF,CAAAA,CANS,CACb,KAAA,CAAO,CAAE,KAAA,CAAO,EAAA,CAAI,GAAA,CAAK,CAAE,CAAA,CAC3B,GAAA,CAAK,CAAE,KAAA,CAAO,GAAA,CAAK,GAAA,CAAK,EAAG,CAAA,CAC3B,UAAA,CAAY,CAAE,KAAA,CAAO,GAAA,CAAM,GAAA,CAAK,GAAI,CACtC,CAAA,CAEqBC,CAAQ,CAAA,CAAEC,CAAM,CAAA,CAG/BzgE,CAAAA,CAAM,IAAI,IAAA,CACVa,CAAAA,CAAQ,IAAI,IAAA,CACd4/D,CAAAA,GAAW,OAAA,CACb5/D,CAAAA,CAAM,QAAA,CAASb,CAAAA,CAAI,QAAA,GAAa,CAAC,CAAA,CAEjCa,CAAAA,CAAM,OAAA,CAAQb,CAAAA,CAAI,OAAA,EAAQ,CAAI,CAAC,CAAA,CAGjC,IAAM0gE,CAAAA,CAAmB,IAAA,CAAK,UAAA,CAAW,MAAA,CAAQZ,CAAAA,EAAOA,CAAAA,CAAG,SAAA,EAAaj/D,CAAK,CAAA,CAAE,MAAA,CAEzEukC,CAAAA,CAAY,IAAA,CAAK,GAAA,CAAI,CAAA,CAAGm7B,CAAAA,CAAQG,CAAgB,CAAA,CAChDC,CAAAA,CAAeD,CAAAA,CAAmBH,CAAAA,CAAS,GAAA,CAEjD,OAAO,CACL,IAAA,CAAMG,CAAAA,CACN,KAAA,CAAAH,CAAAA,CACA,SAAA,CAAAn7B,CAAAA,CACA,WAAA,CAAAu7B,CAAAA,CACA,UAAA,CAAYD,CAAAA,EAAoBH,CAClC,CACF,CAKA,SAAA,CAAUZ,CAAAA,CAAwD,CAChE,OAAA,IAAA,CAAK,SAAA,CAAU,IAAA,CAAKA,CAAQ,CAAA,CAGrB,IAAM,CACX,IAAMzkE,CAAAA,CAAQ,IAAA,CAAK,SAAA,CAAU,OAAA,CAAQykE,CAAQ,EACzCzkE,CAAAA,CAAQ,EAAA,EACV,IAAA,CAAK,SAAA,CAAU,MAAA,CAAOA,CAAAA,CAAO,CAAC,EAElC,CACF,CAKA,KAAA,EAAc,CACZ,IAAA,CAAK,UAAA,CAAa,GACpB,CAKA,MAAA,EAAiB,CACf,OAAO,IAAA,CAAK,SAAA,CAAU,IAAA,CAAK,UAAA,CAAY,IAAA,CAAM,CAAC,CAChD,CACF,CAAA,CAKa0lE,EAAAA,CAAiB,IAAIpB,GCpM3B,SAASqB,EAAAA,CAAiB,CAC/B,MAAA,CAAA/iE,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,QAAA,CAAA6wD,CAAAA,CAAW,OACb,CAAA,CAA0B,CACxB,GAAM,CAACjI,CAAAA,CAAOuI,CAAQ,CAAA,CAAIjkE,QAAAA,CAAqB+jE,EAAAA,CAAe,QAAA,EAAU,CAAA,CAClE,CAACL,CAAAA,CAAOQ,CAAQ,EAAIlkE,QAAAA,CAAS+jE,EAAAA,CAAe,UAAA,CAAWJ,CAAQ,CAAC,CAAA,CA6BtE,GA1BAxjE,SAAAA,CAAU,IAAM,CACd,GAAI,CAACc,CAAAA,CAAQ,OAEb,IAAMkjE,CAAAA,CAAW,WAAA,CAAY,IAAM,CACjCF,CAAAA,CAASF,EAAAA,CAAe,QAAA,EAAU,CAAA,CAClCG,CAAAA,CAASH,EAAAA,CAAe,UAAA,CAAWJ,CAAQ,CAAC,EAC9C,CAAA,CAAG,GAAI,CAAA,CAEP,OAAO,IAAM,aAAA,CAAcQ,CAAQ,CACrC,CAAA,CAAG,CAACljE,CAAAA,CAAQ0iE,CAAQ,CAAC,CAAA,CAGrBxjE,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EACZyQ,CAAAA,GAEJ,CAAA,CAEA,GAAI7R,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAAA,CAAQ6R,CAAO,CAAC,CAAA,CAEhB,CAAC7R,CAAAA,CAAQ,OAAO,IAAA,CAEpB,IAAMmjE,CAAAA,CAAYL,EAAAA,CAAe,mBAAA,CAAoB,CAAC,CAAA,CAEtD,OACEnjE,IAAAA,CAAChB,EAAAA,CAAA,CAEC,QAAA,CAAA,CAAAF,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uDAAA,CACV,OAAA,CAASoT,CAAAA,CACX,CAAA,CAGApT,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+DAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,2FAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,WAAA,CAAa,2BAAA,CACb,SAAA,CAAW,oEACb,CAAA,CACA,OAAA,CAAUyB,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uEACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,8BAAA,CAA+B,QAAA,CAAA,oBAAA,CAAkB,CAAA,CAC/DA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,uCAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAU,kDAAA,CAEV,QAAA,CAAApT,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,sBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CAChB,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sCAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,6FAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yCACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,qCAAA,CAAsC,QAAA,CAAA,CAAA,iBAAA,CACpC+iE,CAAAA,CAAS,WAAA,EAAY,CAAE,GAAA,CAAA,CACzC,CAAA,CACA/iE,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAA8iE,CAAAA,CAAM,IAAA,CAAK,KAAA,CAAIA,CAAAA,CAAM,KAAA,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CACAhkE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,qDAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uBAAA,CACV,KAAA,CAAO,CACL,KAAA,CAAO,CAAA,EAAG,IAAA,CAAK,GAAA,CAAI,GAAA,CAAKgkE,CAAAA,CAAM,WAAW,CAAC,CAAA,CAAA,CAAA,CAC1C,UAAA,CACEA,CAAAA,CAAM,WAAA,CAAc,EAAA,CAChB,SAAA,CACAA,CAAAA,CAAM,WAAA,CAAc,EAAA,CACpB,SAAA,CACA,SACR,CAAA,CACF,CAAA,CACF,CAAA,CACA9iE,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CACV,QAAA,CAAA,CAAA8iE,CAAAA,CAAM,UAAU,kCAAA,CAAA,CACnB,CAAA,CAAA,CACF,CAAA,CAGA9iE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CAEb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8DAAA,CAA+D,QAAA,CAAA,YAAA,CAE5E,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,wCAAA,CACV,QAAA,CAAA+iE,EAAAA,CAAW/G,CAAAA,CAAM,SAAS,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAGA96D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8DAAA,CAA+D,QAAA,CAAA,YAAA,CAE5E,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,uCAAA,CACV,QAAA,CAAAg8D,CAAAA,CAAM,eAAA,CACT,CAAA,CAAA,CACF,CAAA,CAGA96D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8DAAA,CAA+D,QAAA,CAAA,aAAA,CAE5E,CAAA,CACAA,GAAAA,CAAC,KAAE,SAAA,CAAU,yCAAA,CACT,QAAA,CAAA,CAAAg8D,CAAAA,CAAM,gBAAA,CAAmBA,CAAAA,CAAM,iBAAA,EAAmB,cAAA,EAAe,CACrE,CAAA,CACA96D,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CACV,QAAA,CAAA,CAAA86D,CAAAA,CAAM,gBAAA,CAAiB,cAAA,EAAe,CAAE,OAAA,CAAM,GAAA,CAC9CA,CAAAA,CAAM,iBAAA,CAAkB,cAAA,EAAe,CAAE,MAAA,CAAA,CAC5C,CAAA,CAAA,CACF,CAAA,CAGA96D,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,kDAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8DAAA,CAA+D,QAAA,CAAA,cAAA,CAE5E,CAAA,CACAkB,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,wCAAA,CACT,QAAA,CAAA,CAAA,CAAA86D,CAAAA,CAAM,WAAA,CAAc,GAAA,EAAK,OAAA,CAAQ,CAAC,CAAA,CAAE,GAAA,CAAA,CACxC,CAAA,CACA96D,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,CAAA,OAAA,CAClC86D,CAAAA,CAAM,eAAA,CAAgB,OAAA,CAAQ,CAAC,CAAA,CAAE,MACzC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGA96D,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,0CAAA,CAA2C,QAAA,CAAA,kBAAA,CAAgB,CAAA,CACzEA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAA,MAAA,CAAO,OAAA,CAAQg8D,CAAAA,CAAM,mBAAmB,CAAA,CAAE,GAAA,CAAI,CAAC,CAAC2I,CAAAA,CAAS5sE,CAAK,CAAA,GAAM,CACnE,IAAMirE,CAAAA,CAAOhH,CAAAA,CAAM,cAAA,CAAe2I,CAAO,CAAA,EAAK,CAAA,CACxCl0C,CAAAA,CACJurC,CAAAA,CAAM,eAAA,CAAkB,CAAA,CACnBjkE,CAAAA,CAAQikE,CAAAA,CAAM,eAAA,CAAmB,GAAA,CAClC,CAAA,CAEN,OACE96D,IAAAA,CAAC,KAAA,CAAA,CAAkB,SAAA,CAAU,kDAAA,CAC3B,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,8CAAA,CACb,QAAA,CAAA2kE,CAAAA,CAAQ,OAAA,CAAQ,WAAY,KAAK,CAAA,CAAE,IAAA,EAAK,CAC3C,CAAA,CACAzjE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAA,CAAAnJ,CAAAA,CAAM,MAAA,CAAA,CAAI,CAAA,CACnDiI,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sCAAA,CACb,QAAA,CAAA+iE,EAAAA,CAAWC,CAAI,CAAA,CAClB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACAhjE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uDAAA,CACb,QAAA,CAAAA,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,oBAAA,CACV,KAAA,CAAO,CAAE,KAAA,CAAO,CAAA,EAAGywB,CAAO,CAAA,CAAA,CAAI,CAAA,CAChC,CAAA,CACF,CAAA,CAAA,CAAA,CAjBQk0C,CAkBV,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAGAzjE,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,0CAAA,CAA2C,QAAA,CAAA,mBAAA,CAAiB,CAAA,CACzE0kE,EAAU,MAAA,GAAW,CAAA,CACpB1kE,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,wCAAA,CAAyC,QAAA,CAAA,6CAAA,CAEtD,CAAA,CAEAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAA0kE,CAAAA,CAAU,GAAA,CAAKnB,CAAAA,EACdriE,IAAAA,CAAC,KAAA,CAAA,CAEC,SAAA,CAAU,oFAAA,CAEV,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8CAAA,CACV,QAAA,CAAAujE,CAAAA,CAAG,OAAA,CAAQ,OAAA,CAAQ,UAAA,CAAY,KAAK,CAAA,CAAE,IAAA,EAAK,CAC9C,CAAA,CACAriE,IAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,8BAAA,CACV,QAAA,CAAA,CAAA,IAAI,IAAA,CAAKqiE,CAAAA,CAAG,SAAS,CAAA,CAAE,kBAAA,EAAmB,CAAE,SAAA,CAAG,GAAA,CAC/CA,CAAAA,CAAG,QAAA,CAAS,IAAA,CAAA,CACf,CAAA,CAAA,CACF,CAAA,CACAriE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,QAAK,SAAA,CAAU,uBAAA,CACb,QAAA,CAAA,CAAAqiE,CAAAA,CAAG,WAAA,CAAcA,CAAAA,CAAG,YAAA,CAAa,SAAA,CAAA,CACpC,CAAA,CACAvjE,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sCAAA,CACb,QAAA,CAAA+iE,EAAAA,CAAWQ,CAAAA,CAAG,IAAI,CAAA,CACrB,CAAA,CACAvjE,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAW,CAAA,qBAAA,EACTujE,CAAAA,CAAG,OAAA,CAAU,cAAA,CAAiB,YAChC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAxBKA,CAAAA,CAAG,EAyBV,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAGAriE,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sEAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,mDAAA,CAErC,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASoT,CAAAA,CACT,SAAA,CAAU,2FAAA,CACX,QAAA,CAAA,OAAA,CAED,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CC9NO,SAASwxD,EAAAA,CAAyB,CACvC,MAAA,CAAArjE,CAAAA,CACA,OAAA,CAAA6R,CAAAA,CACA,gBAAA,CAAAyxD,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,SAAA,CAAWpD,CAAAA,CACX,WAAA,CAAAvsB,CACF,CAAA,CAAkC,CAChC,GAAM,CAACwsB,CAAAA,CAAQC,CAAS,CAAA,CAAIthE,QAAAA,CAAS,EAAE,CAAA,CACjC,CAAC8C,CAAAA,CAAW0d,CAAY,CAAA,CAAIxgB,QAAAA,CAAS,EAAE,CAAA,CACvC,CAAC+C,CAAAA,CAAS0d,CAAU,CAAA,CAAIzgB,QAAAA,CAAS,EAAE,CAAA,CACnC,CAACuhE,CAAAA,CAAcC,CAAe,CAAA,CAAIxhE,QAAAA,CAAS,KAAK,CAAA,CAChD,CAAC7H,CAAAA,CAAOqtB,CAAQ,CAAA,CAAIxlB,QAAAA,CAAwB,IAAI,CAAA,CAChD,CAACykE,CAAAA,CAAgBC,CAAiB,CAAA,CAAI1kE,QAAAA,CAA6B,IAAI,CAAA,CACvE,CAAC2kE,CAAAA,CAAkBC,CAAmB,CAAA,CAAI5kE,QAAAA,CAMtC,IAAI,CAAA,CACRqK,CAAAA,CAAW/I,MAAAA,CAA4B,IAAI,CAAA,CAE3C8Z,CAAAA,CAAYmmD,CAAAA,EAAgBH,CAAAA,CAGlCjhE,SAAAA,CAAU,IAAM,CACVc,CAAAA,EAAUoJ,CAAAA,CAAS,OAAA,EACrBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,GAErB,CAAA,CAAG,CAACpJ,CAAM,CAAC,CAAA,CAGXd,SAAAA,CAAU,IAAM,CACd,IAAMiC,CAAAA,CAAgBC,CAAAA,EAAqB,CACrCA,CAAAA,CAAE,GAAA,GAAQ,QAAA,EAAY,CAAC+Y,CAAAA,EACzBmI,CAAAA,GAEJ,CAAA,CAEA,GAAItiB,CAAAA,CACF,OAAA,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWmB,CAAY,CAAA,CAC1C,IAAM,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWA,CAAY,CAGrE,CAAA,CAAG,CAACnB,CAAAA,CAAQma,CAAS,CAAC,CAAA,CAEtB,IAAMmI,CAAAA,CAAc,IAAM,CACnBnI,CAAAA,GACHkmD,CAAAA,CAAU,EAAE,CAAA,CACZ9gD,CAAAA,CAAa,EAAE,CAAA,CACfC,CAAAA,CAAW,EAAE,CAAA,CACb+E,CAAAA,CAAS,IAAI,CAAA,CACbk/C,CAAAA,CAAkB,IAAI,CAAA,CACtBE,CAAAA,CAAoB,IAAI,CAAA,CACxB9xD,CAAAA,EAAQ,EAEZ,CAAA,CAEM6uD,CAAAA,CAAiB,SAAY,CACjC,GAAI,EAAA,CAACN,CAAAA,CAAO,IAAA,EAAK,EAAKjmD,CAAAA,CAAAA,CAEtB,CAAAomD,CAAAA,CAAgB,IAAI,CAAA,CACpBh8C,CAAAA,CAAS,IAAI,CAAA,CACbk/C,CAAAA,CAAkB,IAAI,CAAA,CACtBE,CAAAA,CAAoB,IAAI,CAAA,CAExB,GAAI,CACF,IAAMvW,EAAW,MAAMmW,CAAAA,CAAgB,CACrC,MAAA,CAAQnD,CAAAA,CAAO,IAAA,EAAK,CACpB,WAAA,CAAaxsB,CAAAA,EAAe,aAAA,CAC5B,SAAA,CAAW/xC,CAAAA,EAAa,KAAA,CAAA,CACxB,OAAA,CAASC,CAAAA,EAAW,KAAA,CACtB,CAAC,CAAA,CAED2hE,CAAAA,CAAkBrW,CAAAA,CAAS,KAAA,CAAM,KAAK,CAAA,CACtCuW,CAAAA,CAAoB,CAClB,UAAA,CAAYvW,CAAAA,CAAS,UAAA,CACrB,WAAA,CAAaA,CAAAA,CAAS,WAAA,CACtB,SAAA,CAAWA,CAAAA,CAAS,SAAA,CACpB,UAAA,CAAYA,CAAAA,CAAS,UAAA,CACrB,YAAA,CAAcA,CAAAA,CAAS,YACzB,CAAC,EACH,CAAA,MAASloC,CAAAA,CAAK,CACZX,CAAAA,CAASW,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAI,OAAA,CAAU,0BAA0B,EAC1E,CAAA,OAAE,CACAq7C,CAAAA,CAAgB,KAAK,EACvB,CAAA,CACF,CAAA,CAEMqD,CAAAA,CAAmB,IAAM,CACzBJ,IACFF,CAAAA,CAAiBE,CAAc,CAAA,CAC/BlhD,CAAAA,EAAY,EAEhB,CAAA,CAEA,GAAI,CAACtiB,CAAAA,CAAQ,OAAO,IAAA,CAEpB,IAAM6jE,CAAAA,CAAaH,CAAAA,EAAkB,UAAA,CAAA,CAAA,CAC/BA,CAAAA,CAAiB,UAAA,EAAc,CAAA,EAAK,GAAA,EAAK,OAAA,CAAQ,CAAC,CAAA,CACpD,GAAA,CAEJ,OACE/jE,IAAAA,CAAChB,EAAAA,CAAA,CAEC,QAAA,CAAA,CAAAF,GAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,uDAAA,CACV,OAAA,CAAS6jB,CAAAA,CACX,CAAA,CAGA7jB,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+DAAA,CACb,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAU,2FAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,WAAA,CAAa,2BAAA,CACb,SAAA,CAAW,oEACb,CAAA,CACA,OAAA,CAAUyB,CAAAA,EAAMA,CAAAA,CAAE,eAAA,EAAgB,CAGlC,QAAA,CAAA,CAAAzB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,uEACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAA,IAAAA,CAAC,IAAA,CAAA,CAAG,SAAA,CAAU,sDAAA,CACZ,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CACN,SAAA,CAAU,eAAA,CAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,IAAA,CAAK,cAAA,CAAe,CAAA,CACnEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,IAAA,CAAK,cAAA,CAAe,CAAA,CACnEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,IAAA,CAAK,KAAA,CAAM,IAAA,CAAK,OAAO,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,IAAA,CAAK,cAAA,CAAe,CAAA,CACpEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,GAAA,CAAI,CAAA,CAAE,IAAA,CAAK,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,IAAA,CAAK,cAAA,CAAe,CAAA,CAAA,CACtE,CAAA,CAAM,8BAAA,CAAA,CAER,CAAA,CACAA,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,kEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS6jB,CAAAA,CACT,QAAA,CAAUnI,CAAAA,CACV,SAAA,CAAU,sEAAA,CAEV,QAAA,CAAA1b,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,sBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CAChB,CAAA,CACF,EACF,CAAA,CAAA,CACF,CAAA,CAGAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sCAAA,CACZ,QAAA,CAAC+kE,CAAAA,CAgFA/kE,GAAAA,CAAA+H,QAAAA,CAAA,CAEE,QAAA,CAAA7G,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CACnD,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,iBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,OAAA,CACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAgB,QAAA,CAAA,+BAAA,CAA6B,CAAA,CAAA,CAC/D,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CACZ,QAAA,CAAA,CAAA+jE,CAAAA,EAAkB,SAAA,EACjBjlE,GAAAA,CAAC,QAAK,SAAA,CAAU,yGAAA,CAA0G,QAAA,CAAA,WAAA,CAE1H,CAAA,CAEDilE,CAAAA,EAAkB,UAAA,CACjB/jE,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mGAAA,CAAoG,QAAA,CAAA,CAAA,cAAA,CACrGkkE,CAAAA,CAAW,YAAA,CAAA,CAC1B,CAAA,CAEAplE,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sGAAA,CAAuG,QAAA,CAAA,cAAA,CAEvH,CAAA,CAEFkB,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yGAAA,CACb,QAAA,CAAA,CAAA+jE,CAAAA,EAAkB,WAAA,EAAe,CAAA,CAAE,SAAA,CAAA,CACtC,CAAA,CACCA,CAAAA,EAAkB,YAAA,EACjB/jE,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yGAAA,CACb,QAAA,CAAA,CAAA+jE,CAAAA,CAAiB,YAAA,CAAa,eAAA,CAAA,CACjC,CAAA,CAEF/jE,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,mGAAA,CACb,QAAA,CAAA,CAAA6jE,CAAAA,CAAe,MAAA,CAAO,QAAA,CAAA,CACzB,CAAA,CAAA,CACF,CAAA,CAGA/kE,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,oCAAA,CACZ,QAAA,CAAA+kE,CAAAA,CAAe,GAAA,CAAI,CAACl9D,CAAAA,CAAM5P,CAAAA,GACzB+H,GAAAA,CAAC,OAEC,SAAA,CAAU,sFAAA,CAEV,QAAA,CAAAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wCAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,QAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,8BAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAwB,QAAA,CAAA,CAAA,GAAA,CAAEjJ,CAAAA,CAAI,CAAA,CAAA,CAAE,CAAA,CAChD+H,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,mCAAA,CAAqC,QAAA,CAAA6H,CAAAA,CAAK,IAAA,CAAK,CAAA,CAAA,CAC9D,CAAA,CACA3G,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+CAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,yBAAA,CACd,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,IAAA,CACP,OAAA,CAAQ,WAAA,CACR,IAAA,CAAK,MAAA,CACL,SAAA,CAAU,eAAA,CAEV,QAAA,CAAA,CAAAlB,GAAAA,CAAC,MAAA,CAAA,CACC,CAAA,CAAE,GAAA,CACF,EAAE,GAAA,CACF,KAAA,CAAM,IAAA,CACN,MAAA,CAAO,GAAA,CACP,EAAA,CAAG,GAAA,CACH,MAAA,CAAO,cAAA,CACT,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,SAAA,CAAU,MAAA,CAAO,cAAA,CAAe,CAAA,CAAA,CAC1C,CAAA,CACC6H,CAAAA,CAAK,KAAA,CAAM,UAAA,CAAIA,CAAAA,CAAK,GAAA,CAAA,CACvB,CAAA,CACA3G,IAAAA,CAAC,MAAA,CAAA,CAAM,QAAA,CAAA,CAAA2G,CAAAA,CAAK,QAAA,CAAS,OAAA,CAAA,CAAK,CAAA,CACzBA,CAAAA,CAAK,YAAA,CAAa,MAAA,CAAS,CAAA,EAC1B3G,IAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,eAAA,CAAgB,QAAA,CAAA,CAAA,WAAA,CACpB2G,CAAAA,CAAK,YAAA,CAAa,IAAA,CAAK,IAAI,CAAA,CAAA,CACvC,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACA7H,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAW,CAAA,0CAAA,EACT6H,CAAAA,CAAK,QAAA,GAAa,MAAA,CACd,4BAAA,CACAA,CAAAA,CAAK,QAAA,GAAa,QAAA,CAClB,kCAAA,CACA,8BACN,CAAA,CAAA,CAEC,SAAAA,CAAAA,CAAK,QAAA,CACR,CAAA,CAAA,CACF,CAAA,CAAA,CAjDKA,CAAAA,CAAK,EAkDZ,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAtLA3G,IAAAA,CAAA6G,QAAAA,CAAA,CAEE,QAAA,CAAA,CAAA7G,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,gDAAA,CAAiD,QAAA,CAAA,uBAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,UAAA,CAAA,CACC,GAAA,CAAK2K,CAAAA,CACL,KAAA,CAAOg3D,CAAAA,CACP,QAAA,CAAWh/D,CAAAA,EAAMi/D,CAAAA,CAAUj/D,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACzC,WAAA,CAAY,2IAAA,CACZ,SAAA,CAAU,6KAAA,CACV,QAAA,CAAU+Y,CAAAA,CACZ,CAAA,CACA1b,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,4BAAA,CAA6B,QAAA,CAAA,2FAAA,CAG1C,CAAA,CAAA,CACF,CAAA,CAGAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,wBAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,iDAAiD,QAAA,CAAA,uBAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOoD,CAAAA,CACP,QAAA,CAAWT,CAAAA,EAAMme,CAAAA,CAAane,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC5C,SAAA,CAAU,uIAAA,CACV,QAAA,CAAU+Y,CAAAA,CACZ,CAAA,CAAA,CACF,CAAA,CACAxa,IAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAlB,GAAAA,CAAC,OAAA,CAAA,CAAM,SAAA,CAAU,gDAAA,CAAiD,QAAA,CAAA,qBAAA,CAElE,CAAA,CACAA,GAAAA,CAAC,OAAA,CAAA,CACC,IAAA,CAAK,MAAA,CACL,KAAA,CAAOqD,CAAAA,CACP,QAAA,CAAWV,CAAAA,EAAMoe,CAAAA,CAAWpe,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CAC1C,SAAA,CAAU,uIAAA,CACV,QAAA,CAAU+Y,CAAAA,CACZ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAGCjjB,CAAAA,EACCuH,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,4EAAA,CACZ,QAAA,CAAAvH,CAAAA,CACH,CAAA,CAIFyI,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+BAAA,CACb,UAAAlB,GAAAA,CAAC,GAAA,CAAA,CAAE,SAAA,CAAU,mEAAA,CAAoE,QAAA,CAAA,iBAAA,CAEjF,CAAA,CACAA,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,WAAA,CACZ,QAAA,CAAA,CACC,2GAAA,CACA,8GAAA,CACA,0GACF,CAAA,CAAE,GAAA,CAAI,CAACoiE,CAAAA,CAASnqE,CAAAA,GACd+H,GAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM4hE,CAAAA,CAAUQ,CAAO,CAAA,CAChC,QAAA,CAAU1mD,CAAAA,CACV,SAAA,CAAU,+KAAA,CAET,QAAA,CAAA0mD,CAAAA,CAAAA,CALInqE,CAMP,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CA2GJ,CAAA,CAGAiJ,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sEAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,KAAA,CAAA,CACE,QAAA,CAAA0b,CAAAA,EACCxa,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,+CAAA,CACb,QAAA,CAAA,CAAAA,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,sBAAA,CAAuB,OAAA,CAAQ,WAAA,CAC5C,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,UAAU,YAAA,CACV,EAAA,CAAG,IAAA,CACH,EAAA,CAAG,IAAA,CACH,CAAA,CAAE,IAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,IAAA,CAAK,MAAA,CACP,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CACC,SAAA,CAAU,YAAA,CACV,IAAA,CAAK,cAAA,CACL,CAAA,CAAE,iHAAA,CACJ,CAAA,CAAA,CACF,CAAA,CACAA,GAAAA,CAAC,MAAA,CAAA,CAAK,QAAA,CAAA,uBAAA,CAAqB,CAAA,CAAA,CAC7B,CAAA,CAEJ,CAAA,CACAkB,IAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAU,yBAAA,CACb,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAAS6jB,CAAAA,CACT,QAAA,CAAUnI,CAAAA,CACV,SAAA,CAAU,+GAAA,CACX,QAAA,CAAA,QAAA,CAED,CAAA,CACEqpD,CAAAA,CAaA/kE,GAAAA,CAAC,QAAA,CAAA,CACC,OAAA,CAASmlE,CAAAA,CACT,SAAA,CAAU,2DAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,SACT,CAAA,CACD,QAAA,CAAA,sBAAA,CAED,CAAA,CArBAnlE,GAAAA,CAAC,UACC,OAAA,CAASiiE,CAAAA,CACT,QAAA,CAAU,CAACN,CAAAA,CAAO,IAAA,EAAK,EAAKjmD,CAAAA,CAC5B,SAAA,CAAU,+EAAA,CACV,KAAA,CAAO,CACL,UAAA,CAAY,mDAAA,CACZ,KAAA,CAAO,SACT,CAAA,CAEC,QAAA,CAAAA,CAAAA,CAAY,eAAA,CAAkB,gBAAA,CACjC,CAAA,CAAA,CAaJ,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAEJ,CC9ZO,SAAS2pD,EAAAA,CAAe,CAC7B,YAAA,CAAAC,CAAAA,CACA,SAAA,CAAAC,CACF,CAAA,CAAgD,CAC9C,GAAM,CAACjqE,CAAAA,CAAOkqE,CAAQ,CAAA,CAAIllE,QAAAA,CAAgBglE,CAAY,CAAA,CAGhDG,CAAAA,CAAet2D,WAAAA,CAClBu2D,CAAAA,EAAwB,CACnBH,CAAAA,EAEFrsE,EAAAA,CACE,IAAM,OAAA,CAAQ,OAAA,CAAQqsE,CAAAA,CAAUG,CAAY,CAAC,CAAA,CAC7C,CACE,WAAA,CAAa,CAAA,CACb,YAAA,CAAc,GAAA,CACd,OAAA,CAAS,CAACjtE,CAAAA,CAAOG,CAAAA,CAASI,CAAAA,GAAU,CAClC,OAAA,CAAQ,IAAA,CACN,CAAA,cAAA,EAAiBJ,CAAO,CAAA,OAAA,EAAUI,CAAK,CAAA,IAAA,EAAOP,CAAAA,CAAM,OAAO,CAAA,CAC7D,EACF,CACF,CACF,CAAA,CAAE,IAAA,CAAMwB,CAAAA,EAAW,CACZA,CAAAA,CAAO,OAAA,EACV,OAAA,CAAQ,KAAA,CACN,CAAA,8BAAA,EAAiCA,CAAAA,CAAO,QAAQ,CAAA,UAAA,CAAA,CAChDA,CAAAA,CAAO,KACT,EAGJ,CAAC,EAEL,CAAA,CACA,CAACsrE,CAAS,CACZ,CAAA,CAGMI,CAAAA,CAAiBx2D,WAAAA,CACrB,MAAO7I,CAAAA,CAAgB+W,CAAAA,CAAwB8L,CAAAA,GAAqB,CAClEq8C,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMhU,CAAAA,CAAOgU,CAAAA,CAAK,KAAA,CAAM,IAAA,CAAMyK,GAAMA,CAAAA,CAAE,EAAA,GAAO/T,CAAM,CAAA,CACnD,GAAI,CAAC1K,CAAAA,CAAM,OAAOgU,CAAAA,CAElB,IAAMg2D,CAAAA,CAAiBhqE,CAAAA,CAAK,QAAA,CAGtBmiB,CAAAA,CAAc,CAClB,GAAGniB,CAAAA,CACH,QAAA,CAAUyhB,CAAAA,CACV,QAAA,CAAA8L,CACF,CAAA,CAGM08C,CAAAA,CAAej2D,CAAAA,CAAK,KAAA,CAAM,GAAA,CAAKyK,CAAAA,EACnCA,CAAAA,CAAE,EAAA,GAAO/T,CAAAA,CAASyX,CAAAA,CAAc1D,CAClC,CAAA,CAGMyrD,CAAAA,CAAiBl2D,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAK9T,CAAAA,EAAQ,CAC/C,GAAIA,CAAAA,CAAI,EAAA,GAAO8pE,CAAAA,CAEb,OAAO,CACL,GAAG9pE,CAAAA,CACH,OAAA,CAASA,CAAAA,CAAI,OAAA,CAAQ,MAAA,CAAQ0L,CAAAA,EAAOA,CAAAA,GAAOlB,CAAM,CACnD,CAAA,CACK,GAAIxK,CAAAA,CAAI,EAAA,GAAOuhB,CAAAA,CAAgB,CAEpC,IAAM0oD,EAAcF,CAAAA,CACjB,MAAA,CAAQxrD,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAagD,CAAc,CAAA,CAC3C,IAAA,CAAK,CAACtK,CAAAA,CAAGiK,CAAAA,GAAMjK,CAAAA,CAAE,QAAA,CAAWiK,CAAAA,CAAE,QAAQ,CAAA,CACzC,OAAO,CACL,GAAGlhB,CAAAA,CACH,OAAA,CAASiqE,CAAAA,CAAY,GAAA,CAAK1rD,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CACtC,CACF,CACA,OAAOve,CACT,CAAC,CAAA,CAEK4pE,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAOi2D,CAAAA,CACP,OAAA,CAASC,CACX,CAAA,CAEA,OAAAL,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMxpD,CAAAA,CAAmB9M,WAAAA,CACvB,MAAO7I,CAAAA,CAAgB4V,CAAAA,GAA2B,CAChDspD,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMi2D,CAAAA,CAAej2D,CAAAA,CAAK,KAAA,CAAM,GAAA,CAAKhU,CAAAA,EACnCA,CAAAA,CAAK,EAAA,GAAO0K,CAAAA,CAAS,CAAE,GAAG1K,CAAAA,CAAM,GAAGsgB,CAAQ,CAAA,CAAItgB,CACjD,CAAA,CAEM8pE,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAOi2D,CACT,CAAA,CAEA,OAAAJ,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMO,CAAAA,CAAmB72D,WAAAA,CACvB,MAAOvT,CAAAA,EAA2B,CAChC,IAAMqqE,CAAAA,CAAY,CAAA,KAAA,EAAQ,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,MAAA,CAAO,CAAA,CAAG,CAAC,CAAC,CAAA,CAAA,CAE/ET,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMs2D,CAAAA,CAAgB,CACpB,GAAGtqE,CAAAA,CACH,EAAA,CAAIqqE,CACN,CAAA,CAGMH,CAAAA,CAAiBl2D,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAK9T,CAAAA,EACvCA,CAAAA,CAAI,EAAA,GAAOF,CAAAA,CAAK,QAAA,CACZ,CAAE,GAAGE,CAAAA,CAAK,OAAA,CAAS,CAAC,GAAGA,CAAAA,CAAI,OAAA,CAASmqE,CAAS,CAAE,CAAA,CAC/CnqE,CACN,CAAA,CAEM4pE,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAO,CAAC,GAAGA,CAAAA,CAAK,KAAA,CAAOs2D,CAAO,CAAA,CAC9B,OAAA,CAASJ,CACX,CAAA,CAEA,OAAAL,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMU,CAAAA,CAAmBh3D,WAAAA,CACvB,MAAO7I,CAAAA,EAAmB,CACxBk/D,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMhU,CAAAA,CAAOgU,CAAAA,CAAK,KAAA,CAAM,IAAA,CAAMyK,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAO/T,CAAM,CAAA,CACnD,GAAI,CAAC1K,CAAAA,CAAM,OAAOgU,CAAAA,CAGlB,IAAMi2D,CAAAA,CAAej2D,CAAAA,CAAK,KAAA,CAAM,MAAA,CAAQyK,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAO/T,CAAM,CAAA,CAGvDw/D,CAAAA,CAAiBl2D,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAK9T,CAAAA,EACvCA,CAAAA,CAAI,EAAA,GAAOF,CAAAA,CAAK,QAAA,CACZ,CAAE,GAAGE,CAAAA,CAAK,OAAA,CAASA,CAAAA,CAAI,OAAA,CAAQ,MAAA,CAAQ0L,CAAAA,EAAOA,CAAAA,GAAOlB,CAAM,CAAE,CAAA,CAC7DxK,CACN,CAAA,CAEM4pE,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAOi2D,CAAAA,CACP,OAAA,CAASC,CACX,CAAA,CAEA,OAAAL,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMW,CAAAA,CAAqBj3D,WAAAA,CACzB,MAAOtT,CAAAA,EAA2C,CAChD,IAAMwqE,CAAAA,CAAc,CAAA,IAAA,EAAO,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,MAAA,CAAO,CAAA,CAAG,CAAC,CAAC,CAAA,CAAA,CAEhFb,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMojD,CAAAA,CAAoB,CACxB,GAAGn3D,CAAAA,CACH,EAAA,CAAIwqE,CAAAA,CACJ,OAAA,CAAS,EACX,CAAA,CAEMX,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,OAAA,CAAS,CAAC,GAAGA,CAAAA,CAAK,OAAA,CAASojD,CAAS,CACtC,CAAA,CAEA,OAAAyS,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,EACA,CAACD,CAAY,CACf,CAAA,CAGMa,CAAAA,CAAqBn3D,WAAAA,CACzB,MAAOiN,CAAAA,CAAkBF,CAAAA,GAA6B,CACpDspD,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAMk2D,CAAAA,CAAiBl2D,CAAAA,CAAK,OAAA,CAAQ,GAAA,CAAK9T,CAAAA,EACvCA,CAAAA,CAAI,EAAA,GAAOsgB,CAAAA,CAAW,CAAE,GAAGtgB,CAAAA,CAAK,GAAGogB,CAAQ,CAAA,CAAIpgB,CACjD,CAAA,CAEM4pE,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,OAAA,CAASk2D,CACX,CAAA,CAEA,OAAAL,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMppD,CAAAA,CAAqBlN,WAAAA,CACzB,MAAOiN,CAAAA,EAAqB,CAC1BopD,CAAAA,CAAU51D,CAAAA,EAAS,CAEjB,IAAMi2D,CAAAA,CAAej2D,CAAAA,CAAK,KAAA,CAAM,MAAA,CAAQyK,GAAMA,CAAAA,CAAE,QAAA,GAAa+B,CAAQ,CAAA,CAC/D0pD,CAAAA,CAAiBl2D,CAAAA,CAAK,OAAA,CAAQ,MAAA,CAAQ9T,CAAAA,EAAQA,CAAAA,CAAI,EAAA,GAAOsgB,CAAQ,CAAA,CAEjEspD,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAOi2D,CAAAA,CACP,OAAA,CAASC,CACX,CAAA,CAEA,OAAAL,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CACA,CAACD,CAAY,CACf,CAAA,CAGMc,CAAAA,CAAUp3D,WAAAA,CACbvT,CAAAA,EAAmC,CAClC,IAAMqqE,CAAAA,CAAY,CAAA,KAAA,EAAQ,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,MAAA,CAAO,CAAA,CAAG,CAAC,CAAC,CAAA,CAAA,CAC/E,OAAAD,CAAAA,CAAiBpqE,CAAI,CAAA,CACdqqE,CACT,CAAA,CACA,CAACD,CAAgB,CACnB,CAAA,CAGMnT,CAAAA,CAAY1jD,WAAAA,CACftT,CAAAA,EAAmD,CAClD,IAAMwqE,CAAAA,CAAc,CAAA,IAAA,EAAO,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,MAAA,CAAO,CAAA,CAAG,CAAC,CAAC,CAAA,CAAA,CAChF,OAAAD,CAAAA,CAAmBvqE,CAAM,CAAA,CAClBwqE,CACT,CAAA,CACA,CAACD,CAAkB,CACrB,CAAA,CAGMI,CAAAA,CAAar3D,WAAAA,CAAY,IAAM,CACnCq2D,CAAAA,CAAU51D,CAAAA,EAAS,CACjB,IAAM81D,CAAAA,CAAe,CACnB,GAAG91D,CAAAA,CACH,KAAA,CAAO,EAAC,CACR,OAAA,CAAS,EACX,CAAA,CAEA,OAAA61D,CAAAA,CAAaC,CAAY,CAAA,CAClBA,CACT,CAAC,EACH,CAAA,CAAG,CAACD,CAAY,CAAC,CAAA,CAYjB,OAAO,CACL,KAAA,CAAAnqE,CAAAA,CACA,SAAA,CAZgC,CAChC,UAAA,CAAYqqE,CAAAA,CACZ,YAAA,CAAc1pD,CAAAA,CACd,YAAA,CAAc+pD,CAAAA,CACd,YAAA,CAAcG,CAAAA,CACd,cAAA,CAAgBC,CAAAA,CAChB,cAAA,CAAgBE,CAAAA,CAChB,cAAA,CAAgBjqD,CAClB,CAAA,CAKE,QAAA,CAAAmpD,CAAAA,CACA,OAAA,CAAS,CACP,OAAA,CAAAe,CAAAA,CACA,SAAA,CAAA1T,CAAAA,CACA,UAAA,CAAYsT,CAAAA,CACZ,YAAA,CAAc9pD,CAAAA,CACd,UAAA,CAAAmqD,CACF,CACF,CACF,CClTO,SAASC,EAAAA,CAAS,CACvB,WAAA,CAAAC,CAAAA,CACA,cAAA,CAAA3hE,CAAAA,CAAiB,EAAC,CAClB,MAAA,CAAA6H,CACF,CAAA,CAAoC,CAClC,GAAM,CAAE,KAAA,CAAAtR,CAAAA,CAAO,UAAAkgB,CAAAA,CAAW,OAAA,CAAAmrD,CAAQ,CAAA,CAAItB,EAAAA,CAAe,CACnD,YAAA,CAAcqB,CAAAA,CACd,SAAA,CAAW95D,CACb,CAAC,CAAA,CAEKg6D,CAAAA,CAAQ9pD,OAAAA,CACZ,KAAO,CACL,OAAA,CAAS,CAACV,CAAAA,CAAkBzP,CAAAA,CAAenR,CAAAA,CAAqB,EAAC,GAAM,CACrEmrE,CAAAA,CAAQ,OAAA,CAAQ,CACd,KAAA,CAAAh6D,CAAAA,CACA,QAAA,CAAAyP,CAAAA,CACA,QAAA,CAAU9gB,CAAAA,CAAM,KAAA,CAAM,MAAA,CAAQ+e,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAa+B,CAAQ,CAAA,CAAE,MAAA,CAC7D,GAAG5gB,CACL,CAAC,EACH,CAAA,CACA,SAAA,CAAW,CAACmR,CAAAA,CAAewc,CAAAA,GAAsB,CAE/C,IAAM09C,CAAAA,CAAcvrE,CAAAA,CAAM,OAAA,CAAQ,MAAA,CAAS,CAAA,CACvC,IAAA,CAAK,GAAA,CAAI,GAAGA,CAAAA,CAAM,OAAA,CAAQ,IAAIQ,CAAAA,EAAOA,CAAAA,CAAI,QAAQ,CAAC,CAAA,CAClD,CAAA,CAEJ6qE,CAAAA,CAAQ,SAAA,CAAU,CAChB,KAAA,CAAAh6D,CAAAA,CACA,QAAA,CAAUwc,CAAAA,EAAa09C,CAAAA,CAAc,GACvC,CAAC,EACH,CAAA,CACA,KAAA,CAAOF,CAAAA,CAAQ,UACjB,CAAA,CAAA,CACA,CAACrrE,CAAAA,CAAM,KAAA,CAAOA,CAAAA,CAAM,OAAA,CAASqrE,CAAO,CACtC,CAAA,CAWA,OAAO,CACL,KAAA,CAVY7pD,OAAAA,CACZ,KAAO,CACL,KAAA,CAAAxhB,CAAAA,CACA,SAAA,CAAAkgB,CAAAA,CACA,cAAA,CAAAzW,CACF,CAAA,CAAA,CACA,CAACzJ,CAAAA,CAAOkgB,CAAAA,CAAWzW,CAAc,CACnC,CAAA,CAIE,KAAA,CAAAzJ,CAAAA,CACA,SAAA,CAAAkgB,CAAAA,CACA,KAAA,CAAAorD,CACF,CACF,CCjDA,IAAME,EAAAA,CAA+B,CACnC,UAAA,CAAY,KAAA,CACZ,UAAA,CAAY,EAAC,CACb,SAAA,CAAW,EAAC,CACZ,MAAA,CAAQ,EAAC,CACT,OAAA,CAAS,EAAC,CACV,MAAA,CAAQ,EACV,CAAA,CAEMC,EAAAA,CAA0B,CAC9B,EAAA,CAAI,MAAA,CACJ,KAAA,CAAO,KACT,CAAA,CAcO,SAASC,EAAAA,CAAW,CACzB,cAAA,CAAAC,CAAAA,CAAiB,EAAC,CAClB,WAAA,CAAAC,CAAAA,CAAc,EAAC,CACf,aAAA,CAAA5/C,CACF,CAAA,CAAuB,EAAC,CAAqB,CAC3C,GAAM,CAACoP,CAAAA,CAASywC,CAAe,CAAA,CAAI7mE,QAAAA,CAAsB,CACvD,GAAGwmE,EAAAA,CACH,GAAGG,CACL,CAAC,CAAA,CAEK,CAACtwC,CAAAA,CAAMywC,CAAY,EAAI9mE,QAAAA,CAAoB,CAC/C,GAAGymE,EAAAA,CACH,GAAGG,CACL,CAAC,CAAA,CAEKG,CAAAA,CAAal4D,WAAAA,CAAam4D,CAAAA,EAAqC,CACnEH,CAAAA,CAAiBv3D,CAAAA,GAAU,CAAE,GAAGA,CAAAA,CAAM,GAAG03D,CAAW,CAAA,CAAE,EACxD,CAAA,CAAG,EAAE,CAAA,CAECC,CAAAA,CAAUp4D,WAAAA,CAAaq4D,CAAAA,EAAgC,CAC3DJ,CAAAA,CAAcx3D,CAAAA,GAAU,CAAE,GAAGA,CAAAA,CAAM,GAAG43D,CAAQ,CAAA,CAAE,EAClD,CAAA,CAAG,EAAE,CAAA,CAECC,CAAAA,CAAet4D,WAAAA,CAAY,IAAM,CACrCg4D,CAAAA,CAAgBL,EAAe,CAAA,CAC/BM,CAAAA,CAAaL,EAAY,EAC3B,CAAA,CAAG,EAAE,CAAA,CAECW,CAAAA,CAAgBv4D,WAAAA,CAAY,IAAM,CACjCmY,CAAAA,EAEL6/C,CAAAA,CAAgB,CACd,GAAGL,EAAAA,CACH,SAAA,CAAW,CAACx/C,CAAa,CAC3B,CAAC,EACH,CAAA,CAAG,CAACA,CAAa,CAAC,CAAA,CAEZqgD,CAAAA,CAAgBx4D,WAAAA,CAAY,IAAM,CAEtCg4D,CAAAA,CAAgB,CACd,GAAGL,EAAAA,CACH,UAAA,CAAY,SACd,CAAC,EACH,CAAA,CAAG,EAAE,CAAA,CAECc,CAAAA,CAAqBz4D,WAAAA,CAAY,IAAM,CAE3Cg4D,CAAAA,CAAgB,CACd,GAAGL,EAAAA,CACH,UAAA,CAAY,CAAC,MAAA,CAAQ,QAAQ,CAC/B,CAAC,EACH,CAAA,CAAG,EAAE,CAAA,CAECnvC,CAAAA,CAAmB7a,OAAAA,CAAQ,IAE7B4Z,CAAAA,CAAQ,UAAA,GAAe,KAAA,EACvBA,CAAAA,CAAQ,UAAA,CAAW,MAAA,CAAS,CAAA,EAC5BA,CAAAA,CAAQ,SAAA,CAAU,MAAA,CAAS,CAAA,EAC3BA,EAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,EACxBA,CAAAA,CAAQ,OAAA,CAAQ,MAAA,CAAS,CAAA,EACzBA,CAAAA,CAAQ,MAAA,GAAW,EAAA,EACnBC,CAAAA,CAAK,EAAA,GAAO,MAAA,CAEb,CAACD,CAAAA,CAASC,CAAI,CAAC,CAAA,CAEZkxC,CAAAA,CAAe14D,WAAAA,CAClB9Q,CAAAA,EAA0B,CACzB,IAAIgR,CAAAA,CAAW,CAAC,GAAGhR,CAAK,CAAA,CAExB,GAAIq4B,CAAAA,CAAQ,MAAA,CAAQ,CAClB,IAAM6/B,CAAAA,CAAQ7/B,CAAAA,CAAQ,MAAA,CAAO,WAAA,EAAY,CACzCrnB,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CACjBzT,CAAAA,EACCA,CAAAA,CAAK,KAAA,CAAM,WAAA,EAAY,CAAE,QAAA,CAAS26D,CAAK,CAAA,EACvC36D,CAAAA,CAAK,WAAA,EAAa,WAAA,EAAY,CAAE,QAAA,CAAS26D,CAAK,CAClD,EACF,CAEA,GAAI7/B,CAAAA,CAAQ,UAAA,GAAe,KAAA,CAAO,CAChC,IAAMjzB,CAAAA,CAAM,IAAI,IAAA,CAIVG,CAAAA,CAAOH,CAAAA,CAAI,WAAA,EAAY,CACvBI,CAAAA,CAAQ,MAAA,CAAOJ,CAAAA,CAAI,QAAA,EAAS,CAAI,CAAC,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CAClDK,CAAAA,CAAM,MAAA,CAAOL,CAAAA,CAAI,OAAA,EAAS,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CAC3CqkE,CAAAA,CAAc,CAAA,EAAGlkE,CAAI,CAAA,CAAA,EAAIC,CAAK,CAAA,CAAA,EAAIC,CAAG,CAAA,CAAA,CAE3CuL,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CAAQzT,CAAAA,EAAS,CACnC,GAAI,CAACA,CAAAA,CAAK,OAAA,EAAW,CAACA,CAAAA,CAAK,OAAA,CAAS,OAAO,MAAA,CAE3C,IAAMmsE,CAAAA,CAAUnsE,CAAAA,CAAK,OAAA,EAAWA,CAAAA,CAAK,OAAA,CACrC,GAAI,CAACmsE,CAAAA,CAAS,OAAO,MAAA,CAGrB,IAAIC,CAAAA,CACJ,GAAI,OAAOD,CAAAA,EAAY,QAAA,CAGrBC,CAAAA,CADcD,CAAAA,CAAQ,KAAA,CAAM,GAAG,CAAA,CACT,CAAC,CAAA,EAAKA,CAAAA,CAAAA,KACvB,CAEL,IAAMrxE,CAAAA,CAAIqxE,CAAAA,CAAQ,cAAA,EAAe,CAC3Bn/B,CAAAA,CAAI,MAAA,CAAOm/B,CAAAA,CAAQ,WAAA,EAAY,CAAI,CAAC,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CACrD/hE,CAAAA,CAAI,MAAA,CAAO+hE,CAAAA,CAAQ,UAAA,EAAY,CAAA,CAAE,QAAA,CAAS,CAAA,CAAG,GAAG,CAAA,CACtDC,CAAAA,CAAgB,CAAA,EAAGtxE,CAAC,CAAA,CAAA,EAAIkyC,CAAC,CAAA,CAAA,EAAI5iC,CAAC,CAAA,EAChC,CAEA,OAAQ0wB,CAAAA,CAAQ,UAAA,EACd,KAAK,SAAA,CACH,OAAOsxC,CAAAA,CAAgBF,CAAAA,CACzB,KAAK,OAAA,CACH,OAAOE,CAAAA,GAAkBF,EAC3B,KAAK,WAAA,CAEH,IAAM1M,CAAAA,CAAY,IAAI,IAAA,CAAK0M,CAAAA,CAAc,WAAW,CAAA,CAC9CG,CAAAA,CAAc,IAAI,IAAA,CAAKD,CAAAA,CAAgB,WAAW,CAAA,CAClDrlC,CAAAA,CAAc,IAAI,IAAA,CAAKy4B,CAAS,CAAA,CACtC,OAAAz4B,CAAAA,CAAY,OAAA,CAAQA,CAAAA,CAAY,OAAA,EAAQ,CAAI,CAAC,CAAA,CACtCslC,CAAAA,EAAe7M,CAAAA,EAAa6M,CAAAA,EAAetlC,CAAAA,CACpD,KAAK,QAAA,CACH,GAAIjM,CAAAA,CAAQ,SAAA,CAAW,CACrB,IAAMwxC,CAAAA,CAAM,OAAOH,CAAAA,EAAY,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAO,CAAA,CAAIA,CAAAA,CAC9D,OACEG,CAAAA,EAAOxxC,CAAAA,CAAQ,SAAA,CAAU,KAAA,EAASwxC,CAAAA,EAAOxxC,CAAAA,CAAQ,SAAA,CAAU,GAE/D,CACA,OAAO,KAAA,CACT,QACE,OAAO,KACX,CACF,CAAC,EACH,CAEA,OAAIA,CAAAA,CAAQ,UAAA,CAAW,MAAA,CAAS,CAAA,GAC9BrnB,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CACjBzT,CAAAA,EAASA,CAAAA,CAAK,QAAA,EAAY86B,CAAAA,CAAQ,UAAA,CAAW,QAAA,CAAS96B,CAAAA,CAAK,QAAQ,CACtE,CAAA,CAAA,CAGE86B,CAAAA,CAAQ,SAAA,CAAU,MAAA,CAAS,CAAA,GAC7BrnB,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CAAQzT,CAAAA,EAAAA,CACJA,CAAAA,CAAK,eAAA,GAAoBA,CAAAA,CAAK,UAAA,CAAa,CAACA,CAAAA,CAAK,UAAU,CAAA,CAAI,EAAC,CAAA,EACjE,IAAA,CAAM4L,CAAAA,EAAOkvB,CAAAA,CAAQ,SAAA,CAAU,QAAA,CAASlvB,CAAE,CAAC,CACjE,CAAA,CAAA,CAGCkvB,CAAAA,CAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,GAC1BrnB,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CAAQzT,CAAAA,EAExBA,CAAAA,CAAK,MAAA,EACLA,CAAAA,CAAK,MAAA,CAAO,IAAA,CAAMuN,GAAUutB,CAAAA,CAAQ,MAAA,CAAO,QAAA,CAASvtB,CAAK,CAAC,CAE7D,CAAA,CAAA,CAGCutB,CAAAA,CAAQ,OAAA,CAAQ,MAAA,CAAS,CAAA,GAC3BrnB,CAAAA,CAAWA,CAAAA,CAAS,MAAA,CAAQzT,CAAAA,EAC1B86B,CAAAA,CAAQ,OAAA,CAAQ,QAAA,CAAS96B,CAAAA,CAAK,QAAQ,CACxC,CAAA,CAAA,CAGE+6B,CAAAA,CAAK,EAAA,GAAO,MAAA,EACdtnB,CAAAA,CAAS,IAAA,CAAK,CAAC0D,CAAAA,CAAGiK,CAAAA,GAAM,CACtB,IAAImrD,CAAAA,CAAa,CAAA,CAEjB,OAAQxxC,CAAAA,CAAK,EAAA,EACX,KAAK,SAAA,CACH,IAAMyxC,CAAAA,CAAWr1D,CAAAA,CAAE,SAAA,CAAY,IAAI,IAAA,CAAKA,CAAAA,CAAE,SAAS,CAAA,CAAE,OAAA,EAAQ,CAAI,CAAA,CAC3Ds1D,CAAAA,CAAWrrD,CAAAA,CAAE,SAAA,CAAY,IAAI,IAAA,CAAKA,CAAAA,CAAE,SAAS,CAAA,CAAE,OAAA,EAAQ,CAAI,EACjEmrD,CAAAA,CAAaC,CAAAA,CAAWC,CAAAA,CACxB,MAEF,KAAK,UAAA,CACH,IAAM3R,CAAAA,CAAgB,CAAE,MAAA,CAAQ,CAAA,CAAG,IAAA,CAAM,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAG,GAAA,CAAK,CAAE,CAAA,CACxD4R,CAAAA,CAAY5R,CAAAA,CAAc3jD,CAAAA,CAAE,QAAA,EAAY,KAAK,CAAA,CAC7Cw1D,CAAAA,CAAY7R,CAAAA,CAAc15C,CAAAA,CAAE,QAAA,EAAY,KAAK,CAAA,CACnDmrD,CAAAA,CAAaG,CAAAA,CAAYC,CAAAA,CACzB,MAEF,KAAK,SAAA,CACH,IAAMC,CAAAA,CAAOz1D,CAAAA,CAAE,OAAA,EAAWA,CAAAA,CAAE,OAAA,CACtB01D,CAAAA,CAAOzrD,CAAAA,CAAE,OAAA,EAAWA,CAAAA,CAAE,OAAA,CAC5B,GAAI,CAACwrD,CAAAA,CAAM,OAAO,CAAA,CAClB,GAAI,CAACC,CAAAA,CAAM,OAAO,GAAA,CAClB,IAAMC,CAAAA,CAAQ,OAAOF,CAAAA,EAAS,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAI,CAAA,CAAE,OAAA,EAAQ,CAAIA,CAAAA,CAAK,OAAA,EAAQ,CAC3EG,CAAAA,CAAQ,OAAOF,CAAAA,EAAS,QAAA,CAAW,IAAI,IAAA,CAAKA,CAAI,CAAA,CAAE,OAAA,EAAQ,CAAIA,CAAAA,CAAK,OAAA,EAAQ,CACjFN,CAAAA,CAAaO,CAAAA,CAAQC,CAAAA,CACrB,MAEF,KAAK,OAAA,CACHR,CAAAA,CAAap1D,CAAAA,CAAE,KAAA,CAAM,cAAciK,CAAAA,CAAE,KAAK,CAAA,CAC1C,MAEF,KAAK,UAAA,CACH,IAAM4rD,CAAAA,CAAO71D,CAAAA,CAAE,aAAA,EAAiB,CAAA,CAC1B81D,CAAAA,CAAO7rD,CAAAA,CAAE,aAAA,EAAiB,CAAA,CAChCmrD,CAAAA,CAAaS,CAAAA,CAAOC,CAAAA,CACpB,MAEF,QACEV,CAAAA,CAAa,EACjB,CAEA,OAAOxxC,CAAAA,CAAK,KAAA,GAAU,KAAA,CAAQwxC,CAAAA,CAAa,CAACA,CAC9C,CAAC,CAAA,CAGI94D,CACT,CAAA,CACA,CAACqnB,CAAAA,CAASC,CAAI,CAChB,CAAA,CAEA,OAAO,CACL,OAAA,CAAAD,CAAAA,CACA,IAAA,CAAAC,CAAAA,CACA,UAAA,CAAA0wC,CAAAA,CACA,OAAA,CAAAE,CAAAA,CACA,YAAA,CAAAE,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,aAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAC,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAlwC,CACF,CACF,CC9PA,IAAImxC,EAAAA,CACAC,EAAAA,CAEJ,GAAI,OAAO,MAAA,CAAW,GAAA,CACpB,GAAI,CAEF,IAAMC,CAAAA,CAAQ,EAAA,CAAQ,IAAI,CAAA,CAC1BF,EAAAA,CAAiBE,CAAAA,CAAM,cAAA,CACvBD,EAAAA,CAAeC,CAAAA,CAAM,aACvB,CAAA,KAAQ,CAER,CAkBK,SAASC,GAAM7vE,CAAAA,CAAwB,EAAC,CAAgB,CAC7D,GAAM,CAACsiB,CAAAA,CAAWogC,CAAY,CAAA,CAAIx7C,QAAAA,CAAS,KAAK,CAAA,CAC1C,CAAC7H,CAAAA,CAAOqtB,CAAQ,CAAA,CAAIxlB,QAAAA,CAAuB,IAAI,CAAA,CAE/C4oE,CAAAA,CAAc,CAAA,EAClBJ,EAAAA,EAAkBC,EAAAA,EAAgB3vE,CAAAA,CAAQ,MAAA,CAAA,CAItC8pB,CAAAA,CAAiB/T,WAAAA,CACrB,MAAOwyD,CAAAA,EAA2C,CAChD,GAAI,CAACuH,CAAAA,CACH,MAAM,IAAI,KAAA,CACR,mFACF,CAAA,CAGFptB,CAAAA,CAAa,IAAI,CAAA,CACjBh2B,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CAGF,OAAA,OAAA,CAAQ,GAAA,CAAI,sBAAA,CAAwB67C,CAAM,CAAA,CAGZ,CAC5B,OAAA,CAAS,CACP,CACE,KAAA,CAAO,OAAA,CACP,QAAA,CAAU,GAAA,CACV,OAAA,CAAS,EACX,EACA,CACE,KAAA,CAAO,aAAA,CACP,QAAA,CAAU,GAAA,CACV,OAAA,CAAS,EACX,CAAA,CACA,CACE,KAAA,CAAO,MAAA,CACP,QAAA,CAAU,GAAA,CACV,OAAA,CAAS,EACX,CACF,CAAA,CACA,KAAA,CAAO,CACL,CACE,KAAA,CAAO,wBAAA,CACP,WAAA,CAAa,CAAA,UAAA,EAAaA,CAAM,CAAA,CAAA,CAChC,QAAA,CAAU,GAAA,CACV,QAAA,CAAU,YACZ,CACF,CAAA,CACA,WAAA,CAAa,8DACf,CAGF,CAAA,MAASl7C,CAAAA,CAAK,CACZ,IAAMhuB,CAAAA,CACJguB,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAM,IAAI,KAAA,CAAM,yBAAyB,CAAA,CAClE,MAAAX,CAAAA,CAASrtB,CAAK,CAAA,CACRA,CACR,CAAA,OAAE,CACAqjD,CAAAA,CAAa,KAAK,EACpB,CACF,CAAA,CACA,CAACotB,CAAW,CACd,CAAA,CAGM/hD,CAAAA,CAAoBhY,WAAAA,CACxB,MAAOvT,CAAAA,EAA4C,CACjD,GAAI,CAACstE,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CAG7CptB,CAAAA,CAAa,IAAI,CAAA,CACjBh2B,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CAEF,OAAA,OAAA,CAAQ,GAAA,CAAI,0BAAA,CAA4BlqB,CAAAA,CAAK,KAAK,CAAA,CAE3C,CACL,MAAA,CAAQ,UAAA,CACR,UAAA,CAAY,GAAA,CACZ,SAAA,CAAW,yCACb,CACF,CAAA,MAAS6qB,CAAAA,CAAK,CACZ,IAAMhuB,CAAAA,CACJguB,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAM,IAAI,KAAA,CAAM,4BAA4B,CAAA,CACrE,MAAAX,CAAAA,CAASrtB,CAAK,CAAA,CACRA,CACR,CAAA,OAAE,CACAqjD,CAAAA,CAAa,KAAK,EACpB,CACF,CAAA,CACA,CAACotB,CAAW,CACd,CAAA,CAGM/lD,CAAAA,CAAiBhU,WAAAA,CACrB,MAAOg6D,CAAAA,EAA2C,CAChD,GAAI,CAACD,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CAG7CptB,CAAAA,CAAa,IAAI,CAAA,CACjBh2B,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CACF,OAAA,OAAA,CAAQ,GAAA,CAAI,8BAA8B,CAAA,CAGd,CAC1B,CACE,IAAA,CAAM,eAAA,CACN,QAAA,CAAU,MAAA,CACV,KAAA,CAAO,0BAAA,CACP,WAAA,CAAa,iCAAA,CACb,UAAA,CAAY,EAAA,CACZ,eAAA,CAAiB,4CACnB,CACF,CAGF,CAAA,MAASW,CAAAA,CAAK,CACZ,IAAMhuB,CAAAA,CACJguB,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAM,IAAI,KAAA,CAAM,yBAAyB,CAAA,CAClE,MAAAX,CAAAA,CAASrtB,CAAK,CAAA,CACRA,CACR,CAAA,OAAE,CACAqjD,EAAa,KAAK,EACpB,CACF,CAAA,CACA,CAACotB,CAAW,CACd,CAAA,CAGM9hD,CAAAA,CAAqBjY,WAAAA,CACzB,MAAOvT,CAAAA,EAA4C,CACjD,GAAI,CAACstE,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CAG7CptB,CAAAA,CAAa,IAAI,CAAA,CACjBh2B,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CACF,OAAA,OAAA,CAAQ,GAAA,CAAI,0BAAA,CAA4BlqB,CAAAA,CAAK,KAAK,CAAA,CAE3C,CACL,CACE,KAAA,CAAO,CAAA,eAAA,EAAkBA,CAAAA,CAAK,KAAK,CAAA,CAAA,CACnC,QAAA,CAAUA,CAAAA,CAAK,QAAA,CAAW,EAAA,CAC1B,QAAA,CAAUA,CAAAA,CAAK,QACjB,CAAA,CACA,CACE,KAAA,CAAO,CAAA,eAAA,EAAkBA,CAAAA,CAAK,KAAK,CAAA,CAAA,CACnC,QAAA,CAAUA,CAAAA,CAAK,QAAA,CAAW,EAAA,CAC1B,QAAA,CAAUA,CAAAA,CAAK,QACjB,CACF,CACF,CAAA,MAAS6qB,CAAAA,CAAK,CACZ,IAAMhuB,CAAAA,CACJguB,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAM,IAAI,KAAA,CAAM,6BAA6B,CAAA,CACtE,MAAAX,CAAAA,CAASrtB,CAAK,CAAA,CACRA,CACR,CAAA,OAAE,CACAqjD,CAAAA,CAAa,KAAK,EACpB,CACF,CAAA,CACA,CAACotB,CAAW,CACd,CAAA,CAGM7hD,CAAAA,CAAmBlY,WAAAA,CACvB,MACEvT,CAAAA,EACmD,CACnD,GAAI,CAACstE,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CAG7CptB,CAAAA,CAAa,IAAI,CAAA,CACjBh2B,CAAAA,CAAS,IAAI,CAAA,CAEb,GAAI,CACF,OAAA,OAAA,CAAQ,GAAA,CAAI,wBAAA,CAA0BlqB,CAAAA,CAAK,KAAK,CAAA,CAEzC,CACL,KAAA,CAAO,CAAA,CACP,UAAA,CAAY,GACd,CACF,CAAA,MAAS6qB,CAAAA,CAAK,CACZ,IAAMhuB,CAAAA,CACJguB,CAAAA,YAAe,KAAA,CAAQA,CAAAA,CAAM,IAAI,KAAA,CAAM,2BAA2B,CAAA,CACpE,MAAAX,CAAAA,CAASrtB,CAAK,CAAA,CACRA,CACR,CAAA,OAAE,CACAqjD,CAAAA,CAAa,KAAK,EACpB,CACF,CAAA,CACA,CAACotB,CAAW,CACd,CAAA,CAEA,OAAO,CACL,cAAA,CAAAhmD,CAAAA,CACA,iBAAA,CAAAiE,CAAAA,CACA,cAAA,CAAAhE,CAAAA,CACA,kBAAA,CAAAiE,CAAAA,CACA,gBAAA,CAAAC,CAAAA,CACA,WAAA,CAAA6hD,CAAAA,CACA,SAAA,CAAAxtD,CAAAA,CACA,KAAA,CAAAjjB,CACF,CACF,CC/OO,SAAS2wE,EAAAA,EAA6C,CAC3D,GAAM,CAACluD,CAAAA,CAAOC,CAAQ,CAAA,CAAI7a,QAAAA,CAAyB,IAAM+oE,cAAAA,CAAe,QAAA,EAAU,CAAA,CAElF5oE,SAAAA,CAAU,IAEY4oE,cAAAA,CAAe,SAAA,CAAWhuD,CAAAA,EAAa,CACzDF,CAAAA,CAASE,CAAQ,EACnB,CAAC,CAAA,CAGA,EAAE,CAAA,CAEL,IAAMiuD,CAAAA,CAAoBn6D,WAAAA,CAAakM,CAAAA,EAA6B,CAClEguD,cAAAA,CAAe,QAAA,CAAShuD,CAAQ,EAClC,CAAA,CAAG,EAAE,CAAA,CAEL,OAAO,CAACH,CAAAA,CAAOouD,CAAiB,CAClC,CCnBO,SAASC,EAAAA,CAAenwE,CAAAA,CAAsD,CACnF,GAAM,CAAE,KAAA,CAAAiF,CAAM,CAAA,CAAIjF,CAAAA,CACZ,CAACowE,CAAAA,CAAgBF,CAAiB,CAAA,CAAIF,IAAkB,CAExDK,CAAAA,CAAiBt6D,WAAAA,CACpB7I,CAAAA,EACQkjE,CAAAA,CAAe,eAAA,CAAgB,QAAA,CAASljE,CAAM,CAAA,CAEvD,CAACkjE,CAAAA,CAAe,eAAe,CACjC,CAAA,CAEME,CAAAA,CAAav6D,WAAAA,CACjB,CAAC7I,CAAAA,CAAgB/G,CAAAA,GAA6B,CAC5C,GAAI,CAACA,CAAAA,CAAO,CAEV+pE,CAAAA,CAAkB,CAChB,eAAA,CAAiB,CAAChjE,CAAM,CAAA,CACxB,kBAAA,CAAoBA,CACtB,CAAC,CAAA,CACD,MACF,CAEA,IAAMqjE,CAAAA,CAAcpqE,CAAAA,CAAM,OAAA,EAAWA,CAAAA,CAAM,OAAA,CACrCqqE,CAAAA,CAAUrqE,CAAAA,CAAM,QAAA,CAEtB,GAAIoqE,CAAAA,CAEEH,CAAAA,CAAe,eAAA,CAAgB,QAAA,CAASljE,CAAM,CAAA,CAChDgjE,CAAAA,CAAkB,CAChB,eAAA,CAAiBE,CAAAA,CAAe,eAAA,CAAgB,MAAA,CAAQhiE,CAAAA,EAAOA,CAAAA,GAAOlB,CAAM,CAAA,CAC5E,mBAAoBkjE,CAAAA,CAAe,kBACrC,CAAC,CAAA,CAEDF,CAAAA,CAAkB,CAChB,eAAA,CAAiB,CAAC,GAAGE,CAAAA,CAAe,eAAA,CAAiBljE,CAAM,CAAA,CAC3D,kBAAA,CAAoBA,CACtB,CAAC,CAAA,CAAA,KAAA,GAEMsjE,CAAAA,EAAWJ,CAAAA,CAAe,kBAAA,CAAoB,CAEvD,IAAM5tE,CAAAA,CAAOyC,CAAAA,CAAM,IAAA,CAAMgc,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAO/T,CAAM,CAAA,CACxCujE,CAAAA,CAAWxrE,CAAAA,CAAM,IAAA,CAAMgc,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOmvD,CAAAA,CAAe,kBAAkB,CAAA,CAE7E,GAAI5tE,CAAAA,EAAQiuE,CAAAA,EAAYjuE,CAAAA,CAAK,QAAA,GAAaiuE,CAAAA,CAAS,QAAA,CAAU,CAE3D,IAAM1xE,CAAAA,CAAckG,CAAAA,CACjB,MAAA,CAAQgc,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAaze,CAAAA,CAAK,QAAQ,CAAA,CAC1C,IAAA,CAAK,CAACmX,CAAAA,CAAGiK,CAAAA,GAAMjK,CAAAA,CAAE,SAAWiK,CAAAA,CAAE,QAAQ,CAAA,CAEnC8sD,CAAAA,CAAa3xE,CAAAA,CAAY,SAAA,CAAWkiB,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOmvD,CAAAA,CAAe,kBAAkB,CAAA,CACpFO,CAAAA,CAAW5xE,CAAAA,CAAY,SAAA,CAAWkiB,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAO/T,CAAM,CAAA,CAEvD,CAAC0jE,CAAAA,CAAUC,CAAQ,CAAA,CAAIH,CAAAA,CAAaC,CAAAA,CACtC,CAACD,CAAAA,CAAYC,CAAQ,CAAA,CACrB,CAACA,CAAAA,CAAUD,CAAU,CAAA,CAEnBI,CAAAA,CAAe/xE,CAAAA,CAClB,KAAA,CAAM6xE,CAAAA,CAAUC,CAAAA,CAAW,CAAC,CAAA,CAC5B,GAAA,CAAK5vD,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CAAA,CAGZ8vD,CAAAA,CAAe,KAAA,CAAM,IAAA,CACzB,IAAI,GAAA,CAAI,CAAC,GAAGX,CAAAA,CAAe,eAAA,CAAiB,GAAGU,CAAY,CAAC,CAC9D,CAAA,CAEAZ,CAAAA,CAAkB,CAChB,gBAAiBa,CAAAA,CACjB,kBAAA,CAAoB7jE,CACtB,CAAC,EACH,CAAA,KAEEgjE,CAAAA,CAAkB,CAChB,eAAA,CAAiB,CAAChjE,CAAM,CAAA,CACxB,kBAAA,CAAoBA,CACtB,CAAC,EAEL,CAAA,KAEEgjE,CAAAA,CAAkB,CAChB,eAAA,CAAiB,CAAChjE,CAAM,CAAA,CACxB,kBAAA,CAAoBA,CACtB,CAAC,EAEL,CAAA,CACA,CAACjI,CAAAA,CAAOmrE,CAAAA,CAAgBF,CAAiB,CAC3C,CAAA,CAEMc,CAAAA,CAAej7D,WAAAA,CAClB7I,CAAAA,EAAmB,CAClBgjE,CAAAA,CAAkB,CAChB,eAAA,CAAiBE,CAAAA,CAAe,eAAA,CAAgB,MAAA,CAAQhiE,CAAAA,EAAOA,CAAAA,GAAOlB,CAAM,CAAA,CAC5E,kBAAA,CAAoBkjE,CAAAA,CAAe,kBACrC,CAAC,EACH,CAAA,CACA,CAACA,CAAAA,CAAgBF,CAAiB,CACpC,CAAA,CAEM7oC,CAAAA,CAAiBtxB,WAAAA,CAAY,IAAM,CACvCm6D,CAAAA,CAAkB,CAChB,eAAA,CAAiB,EAAC,CAClB,kBAAA,CAAoB,IACtB,CAAC,EACH,CAAA,CAAG,CAACA,CAAiB,CAAC,CAAA,CAEhBe,CAAAA,CAAYl7D,WAAAA,CAAY,IAAM,CAClCm6D,CAAAA,CAAkB,CAChB,eAAA,CAAiBjrE,CAAAA,CAAM,GAAA,CAAKzC,CAAAA,EAASA,CAAAA,CAAK,EAAE,CAAA,CAC5C,kBAAA,CAAoByC,CAAAA,CAAMA,CAAAA,CAAM,MAAA,CAAS,CAAC,CAAA,EAAG,EAAA,EAAM,IACrD,CAAC,EACH,CAAA,CAAG,CAACA,CAAAA,CAAOirE,CAAiB,CAAC,CAAA,CAEvBgB,CAAAA,CAAan7D,WAAAA,CAChB7I,CAAAA,EAAmB,CACdkjE,CAAAA,CAAe,eAAA,CAAgB,QAAA,CAASljE,CAAM,CAAA,CAChD8jE,CAAAA,CAAa9jE,CAAM,CAAA,CAEnBgjE,CAAAA,CAAkB,CAChB,eAAA,CAAiB,CAAC,GAAGE,CAAAA,CAAe,eAAA,CAAiBljE,CAAM,CAAA,CAC3D,kBAAA,CAAoBA,CACtB,CAAC,EAEL,CAAA,CACA,CAACkjE,CAAAA,CAAgBY,CAAAA,CAAcd,CAAiB,CAClD,CAAA,CAEMiB,CAAAA,CAAmBp7D,WAAAA,CAAY,IAC5B9Q,CAAAA,CAAM,MAAA,CAAQzC,CAAAA,EACnB4tE,CAAAA,CAAe,eAAA,CAAgB,QAAA,CAAS5tE,CAAAA,CAAK,EAAE,CACjD,CAAA,CACC,CAACyC,CAAAA,CAAOmrE,CAAAA,CAAe,eAAe,CAAC,CAAA,CAE1C,OAAO,CACL,eAAA,CAAiBA,CAAAA,CAAe,eAAA,CAChC,kBAAA,CAAoBA,CAAAA,CAAe,kBAAA,CACnC,cAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,YAAA,CAAAU,CAAAA,CACA,cAAA,CAAA3pC,CAAAA,CACA,SAAA,CAAA4pC,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,gBAAA,CAAAC,CACF,CACF,CChIO,IAAMC,EAAAA,CAA0C,CACrD,kBAAA,CAAoB,IAAA,CACpB,4BAAA,CAA8B,EAAA,CAC9B,gBAAA,CAAkB,CAAA,CAClB,oBAAA,CAAsB,IAAA,CACtB,kBAAA,CAAoB,IAAA,CACpB,iBAAA,CAAmB,GACrB,CAAA,CCRO,SAASC,EAAAA,CAAgBrxE,CAAAA,CAAwD,CACtF,GAAM,CAAE,KAAA,CAAAiF,CAAAA,CAAO,MAAA,CAAQqsE,CAAAA,CAAY,SAAA,CAAAC,CAAU,CAAA,CAAIvxE,CAAAA,CAG3C6J,CAAAA,CAAS6Z,OAAAA,CACb,KAAO,CACL,GAAG0tD,EAAAA,CACH,GAAGE,CACL,CAAA,CAAA,CACA,CAACA,CAAU,CACb,CAAA,CAGM,CAACE,CAAAA,CAAQC,CAAS,CAAA,CAAIvqE,QAAAA,CAAsB,EAAE,CAAA,CAG9CwqE,CAAAA,CAAc37D,WAAAA,CAClB,CAACxC,CAAAA,CAAeklB,CAAAA,CAAmBzV,CAAAA,CAAkB2uD,CAAAA,CAA4B9pE,CAAAA,GAAmB,CAClG,GAAI4wB,CAAAA,CAAQ,MAAA,CAAS5uB,CAAAA,CAAO,gBAAA,CAAkB,CAC5C,OAAA,CAAQ,IAAA,CAAK,CAAA,6BAAA,EAAgCA,CAAAA,CAAO,gBAAgB,CAAA,eAAA,CAAiB,CAAA,CACrF,MACF,CAEA,IAAM+nE,CAAAA,CAAsB,CAC1B,EAAA,CAAI,CAAA,MAAA,EAAS,IAAA,CAAK,GAAA,EAAK,CAAA,CAAA,EAAI,IAAA,CAAK,MAAA,EAAO,CAAE,QAAA,CAAS,EAAE,CAAA,CAAE,MAAA,CAAO,CAAA,CAAG,CAAC,CAAC,CAAA,CAAA,CAClE,KAAA,CAAAr+D,CAAAA,CACA,OAAA,CAAAklB,CAAAA,CACA,QAAA,CAAAzV,CAAAA,CACA,QAAA,CAAA2uD,CAAAA,CACA,KAAA,CAAA9pE,CAAAA,CACA,UAAA,CAAY,IAAA,CACZ,QAAA,CAAU2pE,CAAAA,CAAO,MAAA,CAAQ53D,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAaoJ,CAAQ,CAAA,CAAE,MAAA,CACxD,SAAA,CAAW,IAAI,IACjB,CAAA,CAEAyuD,CAAAA,CAAWj7D,CAAAA,EAAS,CAAC,GAAGA,CAAAA,CAAMo7D,CAAQ,CAAC,EACzC,CAAA,CACA,CAAC/nE,CAAAA,CAAO,gBAAA,CAAkB2nE,CAAM,CAClC,CAAA,CAGMK,CAAAA,CAAc97D,WAAAA,CAAa+7D,CAAAA,EAAoB,CACnDL,CAAAA,CAAWj7D,CAAAA,EAASA,CAAAA,CAAK,MAAA,CAAQoD,CAAAA,EAAMA,CAAAA,CAAE,EAAA,GAAOk4D,CAAO,CAAC,EAC1D,CAAA,CAAG,EAAE,CAAA,CAGCC,CAAAA,CAAch8D,WAAAA,CAAa+7D,CAAAA,EAAoB,CACnDL,CAAAA,CAAWj7D,CAAAA,EACTA,CAAAA,CAAK,GAAA,CAAKoD,CAAAA,EAAOA,CAAAA,CAAE,EAAA,GAAOk4D,CAAAA,CAAU,CAAE,GAAGl4D,CAAAA,CAAG,UAAA,CAAY,CAACA,CAAAA,CAAE,UAAW,CAAA,CAAIA,CAAE,CAC9E,EACF,CAAA,CAAG,EAAE,CAAA,CAGCo4D,CAAAA,CAAaj8D,WAAAA,CAAY,CAAC+7D,CAAAA,CAAiB5kE,CAAAA,GAAmB,CAClEukE,EAAWj7D,CAAAA,EACTA,CAAAA,CAAK,GAAA,CAAKoD,CAAAA,EACJA,CAAAA,CAAE,EAAA,GAAOk4D,CAAAA,EAAW,CAACl4D,CAAAA,CAAE,OAAA,CAAQ,QAAA,CAAS1M,CAAM,CAAA,CACzC,CAAE,GAAG0M,CAAAA,CAAG,OAAA,CAAS,CAAC,GAAGA,CAAAA,CAAE,OAAA,CAAS1M,CAAM,CAAE,CAAA,CAE1C0M,CACR,CACH,EACF,CAAA,CAAG,EAAE,CAAA,CAGCq4D,CAAAA,CAAkBl8D,WAAAA,CACtB,CAAC+7D,CAAAA,CAAiB5kE,CAAAA,GAAmB,CACnCukE,CAAAA,CAAWj7D,CAAAA,EACTA,CAAAA,CACG,GAAA,CAAKoD,CAAAA,EAAM,CACV,GAAIA,CAAAA,CAAE,EAAA,GAAOk4D,CAAAA,CAAS,CACpB,IAAMI,CAAAA,CAAat4D,CAAAA,CAAE,OAAA,CAAQ,MAAA,CAAQxL,CAAAA,EAAOA,CAAAA,GAAOlB,CAAM,CAAA,CAEzD,OAAIglE,CAAAA,CAAW,MAAA,CAASroE,CAAAA,CAAO,gBAAA,CACtB,KAEF,CAAE,GAAG+P,CAAAA,CAAG,OAAA,CAASs4D,CAAW,CACrC,CACA,OAAOt4D,CACT,CAAC,CAAA,CACA,MAAA,CAAQA,CAAAA,EAAsBA,CAAAA,GAAM,IAAI,CAC7C,EACF,CAAA,CACA,CAAC/P,CAAAA,CAAO,gBAAgB,CAC1B,CAAA,CAGMsoE,CAAAA,CAAqBp8D,WAAAA,CACxBiN,CAAAA,EACQwuD,CAAAA,CAAO,MAAA,CAAQ53D,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAaoJ,CAAQ,CAAA,CAAE,IAAA,CAAK,CAACrJ,CAAAA,CAAG,CAAA,GAAMA,CAAAA,CAAE,QAAA,CAAW,CAAA,CAAE,QAAQ,CAAA,CAE7F,CAAC63D,CAAM,CACT,CAAA,CAGMY,CAAAA,CAAiBr8D,WAAAA,CACrB,MAAOiN,CAAAA,EAAiD,CACtD,IAAMjkB,CAAAA,CAAckG,CAAAA,CAAM,MAAA,CAAQgc,CAAAA,EAAMA,CAAAA,CAAE,QAAA,GAAa+B,CAAQ,CAAA,CAE/D,GAAIjkB,CAAAA,CAAY,OAAS8K,CAAAA,CAAO,gBAAA,CAAmB,CAAA,CACjD,OAAO,EAAC,CAGV,IAAMklB,CAAAA,CAAiC,EAAC,CAGlCsjD,CAAAA,CAAW,IAAI,GAAA,CACrBtzE,CAAAA,CAAY,OAAA,CAASyD,CAAAA,EAAS,CACxBA,CAAAA,CAAK,MAAA,EAAUA,CAAAA,CAAK,MAAA,CAAO,MAAA,CAAS,CAAA,EACtCA,CAAAA,CAAK,MAAA,CAAO,OAAA,CAASuN,CAAAA,EAAU,CACxBsiE,CAAAA,CAAS,GAAA,CAAItiE,CAAK,CAAA,EACrBsiE,CAAAA,CAAS,GAAA,CAAItiE,CAAAA,CAAO,EAAE,CAAA,CAExBsiE,CAAAA,CAAS,GAAA,CAAItiE,CAAK,CAAA,CAAG,IAAA,CAAKvN,CAAI,EAChC,CAAC,EAEL,CAAC,CAAA,CAED6vE,CAAAA,CAAS,OAAA,CAAQ,CAACptE,CAAAA,CAAO8K,CAAAA,GAAU,CAC7B9K,CAAAA,CAAM,MAAA,EAAU4E,CAAAA,CAAO,gBAAA,EACzBklB,CAAAA,CAAY,IAAA,CAAK,CACf,MAAO,CACL,KAAA,CAAO,CAAA,UAAA,EAAMhf,CAAK,CAAA,CAAA,CAClB,OAAA,CAAS9K,CAAAA,CAAM,GAAA,CAAKgc,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CAAA,CAC9B,QAAA,CAAA+B,CAAAA,CACA,QAAA,CAAU,QAAA,CACV,KAAA,CAAO,SACT,CAAA,CACA,MAAA,CAAQ,CAAA,EAAG/d,CAAAA,CAAM,MAAM,CAAA,mBAAA,EAAsB8K,CAAK,CAAA,CAAA,CAAA,CAClD,UAAA,CAAY,GACd,CAAC,EAEL,CAAC,CAAA,CAGD,IAAMuiE,CAAAA,CAAa,IAAI,GAAA,CACvBvzE,CAAAA,CAAY,OAAA,CAASyD,CAAAA,EAAS,CACxBA,CAAAA,CAAK,eAAA,EAAmBA,CAAAA,CAAK,eAAA,CAAgB,MAAA,CAAS,CAAA,EACxDA,CAAAA,CAAK,eAAA,CAAgB,OAAA,CAAS+lB,CAAAA,EAAW,CAClC+pD,CAAAA,CAAW,GAAA,CAAI/pD,CAAM,CAAA,EACxB+pD,CAAAA,CAAW,GAAA,CAAI/pD,CAAAA,CAAQ,EAAE,CAAA,CAE3B+pD,CAAAA,CAAW,IAAI/pD,CAAM,CAAA,CAAG,IAAA,CAAK/lB,CAAI,EACnC,CAAC,EAEL,CAAC,CAAA,CAED8vE,CAAAA,CAAW,OAAA,CAAQ,CAACrtE,CAAAA,CAAOsjB,CAAAA,GAAW,CAChCtjB,CAAAA,CAAM,MAAA,EAAU4E,CAAAA,CAAO,gBAAA,EACzBklB,CAAAA,CAAY,IAAA,CAAK,CACf,KAAA,CAAO,CACL,KAAA,CAAO,CAAA,2BAAA,EAAuBxG,CAAAA,CAAO,KAAA,CAAM,EAAE,CAAC,CAAA,CAAA,CAC9C,OAAA,CAAStjB,CAAAA,CAAM,GAAA,CAAKgc,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CAAA,CAC9B,QAAA,CAAA+B,CAAAA,CACA,QAAA,CAAU,UAAA,CACV,KAAA,CAAO,SACT,CAAA,CACA,MAAA,CAAQ,CAAA,EAAG/d,CAAAA,CAAM,MAAM,CAAA,gCAAA,CAAA,CACvB,UAAA,CAAY,EACd,CAAC,EAEL,CAAC,CAAA,CAGD,IAAMstE,CAAAA,CAAa,IAAI,GAAA,CAkCvB,GAjCAxzE,CAAAA,CAAY,QAASyD,CAAAA,EAAS,CACxBA,CAAAA,CAAK,QAAA,GACF+vE,CAAAA,CAAW,GAAA,CAAI/vE,CAAAA,CAAK,QAAQ,CAAA,EAC/B+vE,CAAAA,CAAW,GAAA,CAAI/vE,CAAAA,CAAK,QAAA,CAAU,EAAE,CAAA,CAElC+vE,CAAAA,CAAW,GAAA,CAAI/vE,CAAAA,CAAK,QAAQ,CAAA,CAAG,IAAA,CAAKA,CAAI,CAAA,EAE5C,CAAC,CAAA,CAED+vE,CAAAA,CAAW,OAAA,CAAQ,CAACttE,CAAAA,CAAO+C,CAAAA,GAAa,CACtC,GAAI/C,CAAAA,CAAM,MAAA,EAAU4E,CAAAA,CAAO,gBAAA,CAAkB,CAC3C,IAAM2oE,CAAAA,CAAgB,CACpB,GAAA,CAAK,WAAA,CACL,MAAA,CAAQ,WAAA,CACR,IAAA,CAAM,WAAA,CACN,MAAA,CAAQ,WACV,CAAA,CAAExqE,CAAAA,CAAS,WAAA,EAAa,CAAA,EAAK,QAAA,CAE7B+mB,CAAAA,CAAY,IAAA,CAAK,CACf,KAAA,CAAO,CACL,KAAA,CAAO,CAAA,EAAGyjD,CAAa,CAAA,CAAA,EAAIxqE,CAAQ,CAAA,SAAA,CAAA,CACnC,OAAA,CAAS/C,CAAAA,CAAM,GAAA,CAAKgc,CAAAA,EAAMA,CAAAA,CAAE,EAAE,CAAA,CAC9B,QAAA,CAAA+B,CAAAA,CACA,QAAA,CAAU,UAAA,CACV,KAAA,CAAOhb,CAAAA,GAAa,MAAA,EAAUA,CAAAA,GAAa,QAAA,CAAW,SAAA,CAAY,SACpE,CAAA,CACA,MAAA,CAAQ,CAAA,EAAG/C,CAAAA,CAAM,MAAM,CAAA,YAAA,EAAe+C,CAAQ,CAAA,SAAA,CAAA,CAC9C,UAAA,CAAY,GACd,CAAC,EACH,CACF,CAAC,CAAA,CAGGupE,CAAAA,EAAa1nE,CAAAA,CAAO,kBAAA,CAEtB,IAAA,IAAWrH,CAAAA,IAAQzD,CAAAA,CAAa,CAE9B,IAAM0zE,CAAAA,CAAAA,CADU,MAAMlB,CAAAA,CAAU,WAAA,CAAY/uE,CAAAA,CAAMzD,CAAW,CAAA,EAC9B,MAAA,CAC5B6a,CAAAA,EAAMA,CAAAA,CAAE,UAAA,EAAc/P,CAAAA,CAAO,4BAChC,CAAA,CAEA,GAAI4oE,CAAAA,CAAe,MAAA,EAAU5oE,CAAAA,CAAO,iBAAmB,CAAA,CAAG,CACxD,IAAM4uB,CAAAA,CAAU,CAACj2B,CAAAA,CAAK,EAAA,CAAI,GAAGiwE,CAAAA,CAAe,GAAA,CAAK74D,CAAAA,EAAMA,CAAAA,CAAE,IAAA,CAAK,EAAE,CAAC,CAAA,CAC3D84D,CAAAA,CACJD,CAAAA,CAAe,MAAA,CAAO,CAAC98C,CAAAA,CAAK/b,CAAAA,GAAM+b,CAAAA,CAAM/b,CAAAA,CAAE,UAAA,CAAY,CAAC,CAAA,CAAI64D,CAAAA,CAAe,MAAA,CAE5E1jD,CAAAA,CAAY,IAAA,CAAK,CACf,KAAA,CAAO,CACL,KAAA,CAAO,CAAA,mBAAA,EAAiBvsB,CAAAA,CAAK,KAAA,CAAM,SAAA,CAAU,CAAA,CAAG,EAAE,CAAC,CAAA,EAAGA,CAAAA,CAAK,KAAA,CAAM,MAAA,CAAS,EAAA,CAAK,KAAA,CAAQ,EAAE,CAAA,CAAA,CAAA,CACzF,OAAA,CAAAi2B,CAAAA,CACA,QAAA,CAAAzV,CAAAA,CACA,QAAA,CAAU,eAAA,CACV,KAAA,CAAO,SACT,CAAA,CACA,MAAA,CAAQ,CAAA,YAAA,EAAeyvD,CAAAA,CAAe,OAAS,CAAC,CAAA,cAAA,CAAA,CAChD,UAAA,CAAYC,CACd,CAAC,EACH,CACF,CAIF,OAAO3jD,CAAAA,CACJ,MAAA,CAAQnV,CAAAA,EAAMA,CAAAA,CAAE,UAAA,EAAc/P,CAAAA,CAAO,4BAA4B,CAAA,CACjE,IAAA,CAAK,CAAC8P,CAAAA,CAAGiK,CAAAA,GAAMA,CAAAA,CAAE,UAAA,CAAajK,CAAAA,CAAE,UAAU,CAAA,CAC1C,KAAA,CAAM,CAAA,CAAG,CAAC,CACf,CAAA,CACA,CAAC1U,CAAAA,CAAO4E,CAAAA,CAAQ0nE,CAAS,CAC3B,CAAA,CAGMoB,CAAAA,CAAkB58D,WAAAA,CACrB0Z,CAAAA,EAAgC,CAC/BiiD,CAAAA,CACEjiD,CAAAA,CAAW,KAAA,CAAM,KAAA,CACjBA,CAAAA,CAAW,KAAA,CAAM,OAAA,CACjBA,CAAAA,CAAW,KAAA,CAAM,QAAA,CACjBA,CAAAA,CAAW,KAAA,CAAM,QAAA,CACjBA,CAAAA,CAAW,KAAA,CAAM,KACnB,EACF,CAAA,CACA,CAACiiD,CAAW,CACd,EAGA,OAAArqE,SAAAA,CAAU,IAAM,CACVwC,CAAAA,CAAO,kBAAA,EAAsB2nE,CAAAA,CAAO,MAAA,GAAW,CAAA,EAE/B,IAAI,GAAA,CAAIvsE,CAAAA,CAAM,GAAA,CAAKgc,CAAAA,EAAMA,CAAAA,CAAE,QAAQ,CAAC,CAAA,CAC5C,OAAA,CAAQ,MAAO+B,CAAAA,EAAa,CACpC,IAAM+L,CAAAA,CAAc,MAAMqjD,CAAAA,CAAepvD,CAAQ,CAAA,CAE3C4vD,CAAAA,CAAgB7jD,CAAAA,CAAY,CAAC,CAAA,CAC/BA,CAAAA,CAAY,MAAA,CAAS,CAAA,EAAK6jD,CAAAA,EAAiBA,CAAAA,CAAc,UAAA,EAAc,EAAA,EACzED,CAAAA,CAAgBC,CAAa,EAEjC,CAAC,EAGL,CAAA,CAAG,EAAE,CAAA,CAEE,CACL,MAAA,CAAApB,CAAAA,CACA,WAAA,CAAAE,CAAAA,CACA,WAAA,CAAAG,CAAAA,CACA,WAAA,CAAAE,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,eAAA,CAAAC,CAAAA,CACA,kBAAA,CAAAE,EACA,cAAA,CAAAC,CAAAA,CACA,eAAA,CAAAO,CAAAA,CACA,MAAA,CAAA9oE,CACF,CACF,CC7TA,IAAMgpE,EAAAA,CAAexsE,aAAAA,CAAwC,IAAI,CAAA,CA2B1D,SAASysE,EAAAA,CAAc,CAAE,QAAA,CAAApsE,CAAAA,CAAU,WAAA,CAAA4mE,CAAAA,CAAa,aAAA,CAAAyF,CAAc,CAAA,CAAuB,CAE1F,IAAMC,CAAAA,CAAWxqE,MAAAA,EAAmB,CAEpC,GAAI,CAACwqE,CAAAA,CAAS,OAAA,CAAS,CAErB,IAAM9tE,CAAAA,CAAa,IAAI,GAAA,CACjB+tE,CAAAA,CAAW,IAAI,GAAA,CAGrB3F,CAAAA,EAAa,OAAA,EAAS,OAAA,CAAQ4F,CAAAA,EAAW,CACvC,GAAM,CAAE,MAAA,CAAAthE,CAAO,CAAA,CAAI,EAAA,CAAQ,cAAc,CAAA,CACzC1M,CAAAA,CAAW,GAAA,CAAIguE,CAAAA,CAAQ,EAAA,CAAI,IAAIthE,CAAAA,CAAOshE,CAAO,CAAC,EAChD,CAAC,CAAA,CAGD5F,CAAAA,EAAa,KAAA,EAAO,OAAA,CAAQjoE,CAAAA,EAAY,CACtC,GAAM,CAAE,IAAA,CAAAuJ,CAAK,CAAA,CAAI,EAAA,CAAQ,cAAc,CAAA,CACvCqkE,CAAAA,CAAS,GAAA,CAAI5tE,CAAAA,CAAS,EAAA,CAAI,IAAIuJ,CAAAA,CAAKvJ,CAAQ,CAAC,EAC9C,CAAC,CAAA,CAGD,IAAInD,CAAAA,CAAQ,IAAA,CACZ,GAAIorE,CAAAA,EAAa,KAAA,CAAO,CACtB,GAAM,CAAE,KAAA,CAAA6F,CAAM,CAAA,CAAI,EAAA,CAAQ,cAAc,CAAA,CACxCjxE,CAAAA,CAAQ,IAAIixE,CAAAA,CAAM7F,CAAAA,CAAY,KAAK,EACrC,CAEA0F,CAAAA,CAAS,OAAA,CAAU,IAAII,UAAAA,CAAW,CAChC,KAAA,CAAAlxE,CAAAA,CACA,OAAA,CAASgD,CAAAA,CACT,KAAA,CAAO+tE,CACT,CAAC,EACH,CAEA,IAAMI,CAAAA,CAAQL,CAAAA,CAAS,OAAA,CAGvB,OAAA3rE,SAAAA,CAAU,IAAM,CACd,GAAK0rE,CAAAA,CAEL,OAAOM,CAAAA,CAAM,YAAA,CAAcC,CAAAA,EAAW,CACpCP,CAAAA,CAAcM,CAAAA,CAAM,QAAA,EAAU,EAChC,CAAC,CACH,CAAA,CAAG,CAACA,CAAAA,CAAON,CAAa,CAAC,CAAA,CAGvBnsE,GAAAA,CAACisE,EAAAA,CAAa,QAAA,CAAb,CAAsB,KAAA,CAAO,CAAE,KAAA,CAAAQ,CAAM,CAAA,CACnC,QAAA,CAAA3sE,CAAAA,CACH,CAEJ,CAOO,SAAS6sE,EAAAA,EAA4B,CAC1C,IAAM7xE,CAAAA,CAAU6E,UAAAA,CAAWssE,EAAY,CAAA,CAEvC,GAAI,CAACnxE,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,iDAAiD,CAAA,CAGnE,OAAOA,CAAAA,CAAQ,KACjB,CC7CO,SAAS2rE,EAAAA,EAA2B,CACzC,IAAMgG,CAAAA,CAAQE,EAAAA,EAAc,CAGtB,CAACrxE,CAAAA,CAAOkqE,CAAQ,CAAA,CAAIllE,QAAAA,CAAuBmsE,CAAAA,CAAM,QAAA,EAAU,CAAA,CAC3D,CAAC/tD,CAAAA,CAAS4jC,CAAU,CAAA,CAAIhiD,QAAAA,CAAmBmsE,CAAAA,CAAM,aAAA,EAAe,CAAA,CAChE,CAACpuE,CAAAA,CAAOuuE,CAAQ,CAAA,CAAItsE,QAAAA,CAAiBmsE,CAAAA,CAAM,WAAA,EAAa,CAAA,CAG9DhsE,SAAAA,CAAU,IACYgsE,CAAAA,CAAM,YAAA,CAAa,IAAM,CAC3CjH,CAAAA,CAASiH,EAAM,QAAA,EAAU,CAAA,CACzBnqB,CAAAA,CAAWmqB,CAAAA,CAAM,aAAA,EAAe,CAAA,CAChCG,CAAAA,CAASH,CAAAA,CAAM,WAAA,EAAa,EAC9B,CAAC,CAAA,CAGA,CAACA,CAAK,CAAC,CAAA,CAGV,IAAMI,CAAAA,CAAc19D,WAAAA,CACjB29D,CAAAA,EAAiF,CAChFL,CAAAA,CAAM,WAAA,CAAYK,CAAO,EAC3B,CAAA,CACA,CAACL,CAAK,CACR,CAAA,CAGM5Z,CAAAA,CAAY1jD,WAAAA,CACf49D,CAAAA,EAA4D,CAC3DN,CAAAA,CAAM,SAAA,CAAUM,CAAU,EAC5B,CAAA,CACA,CAACN,CAAK,CACR,CAAA,CAEMO,CAAAA,CAAe79D,WAAAA,CACnB,CAACiN,CAAAA,CAAkB0wD,CAAAA,GAA2D,CAC5EL,CAAAA,CAAM,YAAA,CAAarwD,CAAAA,CAAU0wD,CAAO,EACtC,CAAA,CACA,CAACL,CAAK,CACR,CAAA,CAEMQ,EAAe99D,WAAAA,CAClBiN,CAAAA,EAAqB,CACpBqwD,CAAAA,CAAM,YAAA,CAAarwD,CAAQ,EAC7B,CAAA,CACA,CAACqwD,CAAK,CACR,CAAA,CAEMS,CAAAA,CAAY/9D,WAAAA,CACfiN,CAAAA,EACQqwD,CAAAA,CAAM,SAAA,CAAUrwD,CAAQ,CAAA,CAEjC,CAACqwD,CAAK,CACR,CAAA,CAGMlG,CAAAA,CAAUp3D,WAAAA,CACb1Q,CAAAA,EAAwD,CACvDguE,CAAAA,CAAM,OAAA,CAAQhuE,CAAQ,EACxB,CAAA,CACA,CAACguE,CAAK,CACR,CAAA,CAEMU,CAAAA,CAAah+D,WAAAA,CACjB,CAAC7I,CAAAA,CAAgBwmE,CAAAA,GAAyD,CACxEL,CAAAA,CAAM,UAAA,CAAWnmE,CAAAA,CAAQwmE,CAAO,EAClC,CAAA,CACA,CAACL,CAAK,CACR,CAAA,CAEMW,CAAAA,CAAaj+D,WAAAA,CAChB7I,CAAAA,EAAmB,CAClBmmE,CAAAA,CAAM,UAAA,CAAWnmE,CAAM,EACzB,CAAA,CACA,CAACmmE,CAAK,CACR,CAAA,CAEMY,CAAAA,CAAWl+D,WAAAA,CACf,CAAC7I,CAAAA,CAAgBgnE,CAAAA,CAAoBC,CAAAA,GAAwB,CAC3Dd,CAAAA,CAAM,QAAA,CAASnmE,CAAAA,CAAQgnE,CAAAA,CAAYC,CAAW,EAChD,CAAA,CACA,CAACd,CAAK,CACR,CAAA,CAEMe,CAAAA,CAAUr+D,WAAAA,CACb7I,CAAAA,EACQmmE,CAAAA,CAAM,OAAA,CAAQnmE,CAAM,CAAA,CAE7B,CAACmmE,CAAK,CACR,CAAA,CAEMgB,CAAAA,CAAmBt+D,WAAAA,CACtBiN,CAAAA,EACQqwD,CAAAA,CAAM,gBAAA,CAAiBrwD,CAAQ,CAAA,CAExC,CAACqwD,CAAK,CACR,CAAA,CAEA,OAAO,CAEL,KAAA,CAAAnxE,CAAAA,CACA,OAAA,CAAAojB,CAAAA,CACA,KAAA,CAAArgB,CAAAA,CAGA,WAAA,CAAAwuE,CAAAA,CAGA,SAAA,CAAAha,CAAAA,CACA,YAAA,CAAAma,CAAAA,CACA,YAAA,CAAAC,CAAAA,CACA,SAAA,CAAAC,CAAAA,CAGA,OAAA,CAAA3G,CAAAA,CACA,WAAA4G,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,OAAA,CAAAG,CAAAA,CACA,gBAAA,CAAAC,CACF,CACF,CC/IO,SAASC,EAAAA,CAAiBh3C,CAAAA,CAA+B,CAC9D,GAAM,CAAE,KAAA,CAAAr4B,CAAM,CAAA,CAAIooE,EAAAA,EAAS,CAE3B,OAAO3pD,OAAAA,CAAQ,IACR4Z,CAAAA,CAEEr4B,CAAAA,CAAM,MAAA,CAAOzC,CAAAA,EAAQ,CAE1B,GAAI86B,CAAAA,CAAQ,WAAA,CAAa,CACvB,IAAM6/B,CAAAA,CAAQ7/B,CAAAA,CAAQ,WAAA,CAAY,WAAA,EAAY,CACxCi3C,CAAAA,CAAe/xE,CAAAA,CAAK,KAAA,CAAM,WAAA,EAAY,CAAE,QAAA,CAAS26D,CAAK,CAAA,CACtDqX,CAAAA,CAAchyE,CAAAA,CAAK,WAAA,EAAa,WAAA,EAAY,CAAE,QAAA,CAAS26D,CAAK,CAAA,CAClE,GAAI,CAACoX,GAAgB,CAACC,CAAAA,CAAa,OAAO,MAC5C,CAsCA,OAnCI,EAAAl3C,CAAAA,CAAQ,UAAA,EAAcA,CAAAA,CAAQ,UAAA,CAAW,MAAA,CAAS,CAAA,GAChD,CAAC96B,CAAAA,CAAK,QAAA,EAAY,CAAC86B,CAAAA,CAAQ,UAAA,CAAW,QAAA,CAAS96B,CAAAA,CAAK,QAAQ,CAAA,CAAA,EAM9D86B,CAAAA,CAAQ,QAAA,EAAYA,CAAAA,CAAQ,QAAA,CAAS,MAAA,CAAS,CAAA,GAC5C,CAAC96B,CAAAA,CAAK,MAAA,EAAU,CAAC86B,CAAAA,CAAQ,QAAA,CAAS,QAAA,CAAS96B,CAAAA,CAAK,MAAM,CAAA,CAAA,EAMxD86B,CAAAA,CAAQ,eAAA,EAAmBA,CAAAA,CAAQ,eAAA,CAAgB,MAAA,CAAS,CAAA,EAI1D,CAHoBA,CAAAA,CAAQ,eAAA,CAAgB,IAAA,CAAK/U,CAAAA,EACnD/lB,CAAAA,CAAK,YAAA,CAAa+lB,CAAM,CAC1B,CAAA,EAKE+U,CAAAA,CAAQ,MAAA,EAAUA,CAAAA,CAAQ,MAAA,CAAO,MAAA,CAAS,CAAA,EAExC,CADaA,EAAQ,MAAA,CAAO,IAAA,CAAKvtB,CAAAA,EAASvN,CAAAA,CAAK,QAAA,CAASuN,CAAK,CAAC,CAAA,EAKhEutB,CAAAA,CAAQ,SAAA,EAAaA,CAAAA,CAAQ,SAAA,CAAU,MAAA,CAAS,CAAA,EAC9C,CAACA,CAAAA,CAAQ,SAAA,CAAU,QAAA,CAAS96B,CAAAA,CAAK,QAAQ,CAAA,EAM3C86B,CAAAA,CAAQ,SAAA,GAAc,MAAA,EACpBA,CAAAA,CAAQ,SAAA,GAAc96B,CAAAA,CAAK,SAAA,EAAU,CAM7C,CAAC,CAAA,CAtDoByC,CAAAA,CAuDpB,CAACA,CAAAA,CAAOq4B,CAAO,CAAC,CACrB,CASO,SAASm3C,EAAAA,CACdC,CAAAA,CAAwE,UAAA,CACxEjZ,CAAAA,CAA4B,KAAA,CACpB,CACR,GAAM,CAAE,KAAA,CAAAx2D,CAAM,CAAA,CAAIooE,EAAAA,EAAS,CAE3B,OAAO3pD,OAAAA,CAAQ,IACE,CAAC,GAAGze,CAAK,CAAA,CAAE,IAAA,CAAK,CAAC0U,CAAAA,CAAGiK,IAAM,CACvC,IAAImrD,CAAAA,CAAa,CAAA,CAEjB,OAAQ2F,CAAAA,EACN,KAAK,OAAA,CACH3F,CAAAA,CAAap1D,CAAAA,CAAE,KAAA,CAAM,aAAA,CAAciK,CAAAA,CAAE,KAAK,CAAA,CAC1C,MACF,KAAK,UAAA,CAAY,CACf,IAAM05C,CAAAA,CAAgB,CAAE,MAAA,CAAQ,CAAA,CAAG,IAAA,CAAM,CAAA,CAAG,MAAA,CAAQ,CAAA,CAAG,GAAA,CAAK,CAAE,CAAA,CACxD4R,CAAAA,CAAYv1D,CAAAA,CAAE,QAAA,CAAW2jD,CAAAA,CAAc3jD,CAAAA,CAAE,QAAQ,CAAA,CAAI,CAAA,CACrDw1D,CAAAA,CAAYvrD,CAAAA,CAAE,QAAA,CAAW05C,CAAAA,CAAc15C,CAAAA,CAAE,QAAQ,CAAA,CAAI,CAAA,CAC3DmrD,CAAAA,CAAaG,CAAAA,CAAYC,CAAAA,CACzB,KACF,CACA,KAAK,WAAA,CACHJ,CAAAA,CAAap1D,CAAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CAAIiK,CAAAA,CAAE,SAAA,CAAU,SAAQ,CACzD,MACF,KAAK,WAAA,CACHmrD,CAAAA,CAAap1D,CAAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CAAIiK,CAAAA,CAAE,SAAA,CAAU,OAAA,EAAQ,CACzD,MACF,KAAK,UAAA,CACHmrD,CAAAA,CAAap1D,CAAAA,CAAE,QAAA,CAAWiK,CAAAA,CAAE,QAAA,CAC5B,KACJ,CAEA,OAAO63C,CAAAA,GAAc,KAAA,CAAQsT,CAAAA,CAAa,CAACA,CAC7C,CAAC,CAAA,CAGA,CAAC9pE,CAAAA,CAAOyvE,CAAAA,CAAQjZ,CAAS,CAAC,CAC/B,CC3IO,IAAMkZ,EAAAA,CAAN,KAA8C,CAA9C,WAAA,EAAA,CACL,IAAA,CAAQ,OAAA,CAA+B,IAAI,GAAA,CAC3C,IAAA,CAAQ,OAAA,CAAuB,IAAI,GAAA,CACnC,IAAA,CAAQ,MAAA,CAA2C,IAAI,GAAA,CACvD,IAAA,CAAQ,OAAA,CAAgC,IAAA,CACxC,IAAA,CAAQ,YAAA,CAAe3yE,EAAAA,CAAO,KAAA,CAAM,eAAe,EAAA,CAKnD,UAAA,CAAWN,CAAAA,CAA8B,CACvC,IAAA,CAAK,OAAA,CAAUA,EACjB,CAKA,QAAA,CAASkzE,CAAAA,CAAsB,CAE7B,GAAI,CAACA,CAAAA,CAAO,EAAA,EAAM,CAACA,CAAAA,CAAO,IAAA,EAAQ,CAACA,CAAAA,CAAO,OAAA,CACxC,MAAM,IAAI,KAAA,CAAM,wCAAwC,CAAA,CAQ1D,GALI,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAAA,CAAO,EAAE,CAAA,EAC5B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,OAAA,EAAUA,CAAAA,CAAO,EAAE,CAAA,sCAAA,CAAwC,CAAA,CAIhFA,CAAAA,CAAO,YAAA,CAAA,CACT,IAAA,IAAWznE,CAAAA,IAASynE,CAAAA,CAAO,YAAA,CACzB,GAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIznE,CAAK,CAAA,CACzB,MAAM,IAAI,KAAA,CAAM,CAAA,OAAA,EAAUynE,CAAAA,CAAO,EAAE,CAAA,YAAA,EAAeznE,CAAK,0BAA0B,CAAA,CAMvF,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIynE,CAAAA,CAAO,EAAA,CAAIA,CAAM,CAAA,CAG9BA,CAAAA,CAAO,aAAA,EACT,IAAA,CAAK,MAAA,CAAO,GAAA,CAAIA,CAAAA,CAAO,EAAA,CAAI,CAAE,GAAGA,CAAAA,CAAO,aAAc,CAAC,CAAA,CAIxD,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAAA,CAAO,EAAE,CAAA,CAE1B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,mBAAA,EAAsBA,CAAAA,CAAO,IAAI,CAAA,EAAA,EAAKA,CAAAA,CAAO,OAAO,CAAA,CAAE,CAAA,CAGzEA,CAAAA,CAAO,MAAA,EAAU,IAAA,CAAK,OAAA,EACxB,OAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAO,MAAA,CAAO,IAAA,CAAK,OAAO,CAAC,CAAA,CAAE,KAAA,CAAOv1E,CAAAA,EAAU,CAC5D,IAAA,CAAK,YAAA,CAAa,KAAA,CAAM,CAAA,4BAAA,EAA+Bu1E,CAAAA,CAAO,EAAE,CAAA,CAAA,CAAIv1E,CAAAA,CAAO,CACzE,OAAQu1E,CAAAA,CAAO,EACjB,CAAC,EACH,CAAC,EAEL,CAKA,UAAA,CAAWC,CAAAA,CAAwB,CACjC,IAAMD,CAAAA,CAAS,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIC,CAAQ,CAAA,CAExC,GAAI,CAACD,CAAAA,CAAQ,CACX,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,OAAA,EAAUC,CAAQ,CAAA,kBAAA,CAAoB,CAAA,CAC7D,MACF,CAGID,CAAAA,CAAO,SAAA,EACT,OAAA,CAAQ,OAAA,CAAQA,CAAAA,CAAO,SAAA,EAAW,CAAA,CAAE,KAAA,CAAOv1E,CAAAA,EAAU,CACnD,IAAA,CAAK,YAAA,CAAa,KAAA,CAAM,CAAA,yBAAA,EAA4Bw1E,CAAQ,CAAA,CAAA,CAAIx1E,CAAK,EACvE,CAAC,CAAA,CAGH,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAOw1E,CAAQ,CAAA,CAC5B,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAOA,CAAQ,CAAA,CAC5B,IAAA,CAAK,OAAO,MAAA,CAAOA,CAAQ,CAAA,CAE3B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,qBAAA,EAAwBD,CAAAA,CAAO,IAAI,CAAA,CAAE,EAC9D,CAKA,SAAA,CAAUC,CAAAA,CAAsC,CAC9C,OAAO,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAQ,CAClC,CAKA,UAAA,EAAuB,CACrB,OAAO,KAAA,CAAM,IAAA,CAAK,IAAA,CAAK,OAAA,CAAQ,MAAA,EAAQ,CACzC,CAKA,SAAA,CAAUA,CAAAA,CAA2B,CACnC,OAAO,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAQ,CAClC,CAKA,UAAA,CAAWA,CAAAA,CAAkB9yE,CAAAA,CAAwB,CACnD,GAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI8yE,CAAQ,CAAA,CAC5B,MAAM,IAAI,KAAA,CAAM,CAAA,OAAA,EAAUA,CAAQ,CAAA,kBAAA,CAAoB,CAAA,CAGpD9yE,CAAAA,EACF,KAAK,OAAA,CAAQ,GAAA,CAAI8yE,CAAQ,CAAA,CACzB,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,gBAAA,EAAmBA,CAAQ,CAAA,CAAE,CAAA,GAEpD,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAOA,CAAQ,CAAA,CAC5B,IAAA,CAAK,YAAA,CAAa,IAAA,CAAK,CAAA,iBAAA,EAAoBA,CAAQ,CAAA,CAAE,CAAA,EAEzD,CAKA,SAAA,CAAUA,CAAAA,CAA2B,CACnC,OAAO,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAQ,CAClC,CAKA,SAAA,CAAmBA,CAAAA,CAAkBjrE,CAAAA,CAA4B,CAE/D,OADe,IAAA,CAAK,MAAA,CAAO,GAAA,CAAIirE,CAAQ,CAAA,GACvBjrE,CAAG,CACrB,CAKA,SAAA,CAAUirE,CAAAA,CAAkBjrE,CAAAA,CAAa5F,CAAAA,CAAkB,CACpD,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI6wE,CAAQ,CAAA,EAC3B,IAAA,CAAK,MAAA,CAAO,GAAA,CAAIA,CAAAA,CAAU,EAAE,CAAA,CAG9B,IAAMhrE,CAAAA,CAAS,IAAA,CAAK,MAAA,CAAO,GAAA,CAAIgrE,CAAQ,CAAA,CACvChrE,CAAAA,CAAOD,CAAG,CAAA,CAAI5F,CAAAA,CAEd,IAAA,CAAK,YAAA,CAAa,KAAA,CAAM,CAAA,mBAAA,EAAsB6wE,CAAQ,CAAA,CAAA,EAAIjrE,CAAG,CAAA,CAAA,CAAI,CAAE,KAAA,CAAA5F,CAAM,CAAC,EAC5E,CAKA,MAAM,WAAA,CACJ8wE,CAAAA,CACAp0E,CAAAA,CACAq0E,CAAAA,CACwB,CACxB,IAAIl0E,CAAAA,CAAwBk0E,CAAAA,CAE5B,IAAA,IAAWH,CAAAA,IAAU,IAAA,CAAK,OAAA,CAAQ,MAAA,EAAO,CAAG,CAC1C,GAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAIA,CAAAA,CAAO,EAAE,CAAA,CAC7B,SAGF,IAAMI,CAAAA,CAAOJ,CAAAA,CAAOE,CAAQ,CAAA,CAE5B,GAAI,OAAOE,CAAAA,EAAS,UAAA,CAClB,GAAI,CACF,IAAMC,CAAAA,CAAa,MAAM,OAAA,CAAQ,OAAA,CAAQD,CAAAA,CAAK,KAAA,CAAMJ,CAAAA,CAAQl0E,CAAI,CAAC,CAAA,CAG7Du0E,CAAAA,GAAe,KAAA,CAAA,GACjBp0E,CAAAA,CAASo0E,CAAAA,CACTv0E,CAAAA,CAAK,CAAC,CAAA,CAAIu0E,CAAAA,EAEd,CAAA,MAAS51E,CAAAA,CAAO,CACd,IAAA,CAAK,YAAA,CAAa,KAAA,CAAM,CAAA,oBAAA,EAAuBu1E,CAAAA,CAAO,EAAE,CAAA,CAAA,EAAIE,CAAQ,CAAA,CAAA,CAAIz1E,CAAAA,CAAgB,CACtF,MAAA,CAAQu1E,CAAAA,CAAO,EAAA,CACf,IAAA,CAAME,CACR,CAAC,EACH,CAEJ,CAEA,OAAOj0E,CACT,CAKA,MAAM,mBAAA,CAAoBi0E,CAAAA,CAAwBp0E,CAAAA,CAA4B,CAC5E,IAAMw0E,CAAAA,CAA2B,EAAC,CAElC,IAAA,IAAWN,CAAAA,IAAU,IAAA,CAAK,OAAA,CAAQ,MAAA,EAAO,CAAG,CAC1C,GAAI,CAAC,KAAK,OAAA,CAAQ,GAAA,CAAIA,CAAAA,CAAO,EAAE,CAAA,CAC7B,SAGF,IAAMI,CAAAA,CAAOJ,CAAAA,CAAOE,CAAQ,CAAA,CAExB,OAAOE,CAAAA,EAAS,UAAA,EAClBE,CAAAA,CAAS,IAAA,CACP,OAAA,CAAQ,OAAA,CAAQF,CAAAA,CAAK,KAAA,CAAMJ,CAAAA,CAAQl0E,CAAI,CAAC,CAAA,CAAE,KAAA,CAAOrB,CAAAA,EAAU,CACzD,IAAA,CAAK,YAAA,CAAa,KAAA,CAAM,CAAA,oBAAA,EAAuBu1E,CAAAA,CAAO,EAAE,CAAA,CAAA,EAAIE,CAAQ,CAAA,CAAA,CAAIz1E,CAAAA,CAAgB,CACtF,MAAA,CAAQu1E,CAAAA,CAAO,EAAA,CACf,IAAA,CAAME,CACR,CAAC,EACH,CAAC,CACH,EAEJ,CAEA,MAAM,OAAA,CAAQ,GAAA,CAAII,CAAQ,EAC5B,CACF,CAAA,CAKaC,EAAAA,CAAgB,IAAIR,GCzL1B,SAASS,EAAAA,CAAe,CAC7B,KAAA,CAAA3xC,CAAAA,CACA,MAAA,CAAAnO,CAAAA,CACA,YAAA,CAAA+/C,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,SAAA,CAAAptE,CAAAA,CAAY,EAAA,CACZ,QAAA,CAAAqtE,CAAAA,CAAW,CAAA,CACX,UAAA,CAAAC,CAAAA,CAAa,KAAA,CACb,GAAA,CAAAC,CAAAA,CAAM,CAAA,CACN,UAAA,CAAAC,CACF,CAAA,CAAwB,CACtB,IAAM/iE,CAAAA,CAAYnK,MAAAA,CAAuB,IAAI,CAAA,CAEvCqK,CAAAA,CAAcC,cAAAA,CAAe,CACjC,KAAA,CAAO2wB,CAAAA,CAAM,MAAA,CACb,gBAAA,CAAkB,IAAM9wB,CAAAA,CAAU,OAAA,CAClC,YAAA,CAAc,IAAM0iE,CAAAA,CACpB,QAAA,CAAAE,CAAAA,CACA,UAAA,CAAAC,CAAAA,CACA,GAAA,CAAAC,CACF,CAAC,CAAA,CAEKE,CAAAA,CAAe9iE,CAAAA,CAAY,iBAAgB,CAE3C+iE,CAAAA,CAAsC,CAC1C,MAAA,CAAQ,OAAOtgD,CAAAA,EAAW,QAAA,CAAW,CAAA,EAAGA,CAAM,CAAA,EAAA,CAAA,CAAOA,CAAAA,CACrD,KAAA,CAAO,MAAA,CACP,QAAA,CAAU,MAAA,CACV,QAAA,CAAU,UACZ,CAAA,CAEMugD,CAAAA,CAAkCL,CAAAA,CACpC,CACE,KAAA,CAAO,CAAA,EAAG3iE,CAAAA,CAAY,YAAA,EAAc,CAAA,EAAA,CAAA,CACpC,MAAA,CAAQ,MAAA,CACR,QAAA,CAAU,UACZ,CAAA,CACA,CACE,MAAA,CAAQ,CAAA,EAAGA,CAAAA,CAAY,YAAA,EAAc,CAAA,EAAA,CAAA,CACrC,KAAA,CAAO,MAAA,CACP,QAAA,CAAU,UACZ,CAAA,CAEJ,OACEjM,GAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+L,CAAAA,CAAW,KAAA,CAAOijE,CAAAA,CAAgB,SAAA,CAAW1tE,CAAAA,CACrD,QAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAOivE,CAAAA,CACT,QAAA,CAAAF,CAAAA,CAAa,GAAA,CAAKtiE,CAAAA,EAAgB,CACjC,IAAMoG,CAAAA,CAAOgqB,CAAAA,CAAMpwB,CAAAA,CAAY,KAAK,CAAA,CACpC,GAAI,CAACoG,CAAAA,CAAM,OAAO,IAAA,CAClB,IAAM7P,CAAAA,CAAM8rE,CAAAA,CAAaA,CAAAA,CAAWj8D,CAAAA,CAAMpG,CAAAA,CAAY,KAAK,CAAA,CAAIA,CAAAA,CAAY,KAAA,CAErEyiE,CAAAA,CAAiC,CACrC,QAAA,CAAU,UAAA,CACV,GAAA,CAAKN,CAAAA,CAAa,CAAA,CAAIniE,CAAAA,CAAY,KAAA,CAClC,IAAA,CAAMmiE,CAAAA,CAAaniE,CAAAA,CAAY,KAAA,CAAQ,CAAA,CACvC,KAAA,CAAOmiE,CAAAA,CAAaniE,CAAAA,CAAY,IAAA,CAAO,MAAA,CACvC,MAAA,CAAQmiE,CAAAA,CAAa,MAAA,CAASniE,CAAAA,CAAY,IAC5C,CAAA,CAEA,OACEzM,GAAAA,CAAC,KAAA,CAAA,CAAc,KAAA,CAAOkvE,CAAAA,CAAW,YAAA,CAAYziE,CAAAA,CAAY,KAAA,CACtD,QAAA,CAAAiiE,CAAAA,CAAW77D,CAAAA,CAAMpG,CAAAA,CAAY,KAAK,CAAA,CAAA,CAD3BzJ,CAEV,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAEJ,CAKO,SAASmsE,EAAAA,CAAkB/1E,CAAAA,CAO/B,CACD,OAAO8S,cAAAA,CAAe,CACpB,KAAA,CAAO9S,CAAAA,CAAQ,KAAA,CAAM,MAAA,CACrB,gBAAA,CAAkB,IAAMA,CAAAA,CAAQ,aAAA,CAChC,YAAA,CAAc,IAAMA,CAAAA,CAAQ,YAAA,CAC5B,QAAA,CAAUA,CAAAA,CAAQ,QAAA,EAAY,CAAA,CAC9B,UAAA,CAAYA,CAAAA,CAAQ,UAAA,EAAc,KAAA,CAClC,GAAA,CAAKA,CAAAA,CAAQ,GAAA,EAAO,CACtB,CAAC,CACH,CCvFO,SAASg2E,EAAAA,CAAe,CAC7B,KAAA,CAAAvyC,CAAAA,CACA,MAAA,CAAAnO,CAAAA,CACA,KAAA,CAAAzF,CAAAA,CAAQ,MAAA,CACR,mBAAA,CAAAomD,CAAAA,CACA,YAAA,CAAApkE,EACA,SAAA,CAAA3J,CAAAA,CAAY,EAAA,CACZ,QAAA,CAAAqtE,CAAAA,CAAW,CAAA,CACX,GAAA,CAAAE,CAAAA,CAAM,EAAA,CACN,UAAA,CAAAC,CAAAA,CACA,UAAA,CAAAF,CAAAA,CAAa,IACf,CAAA,CAAwB,CACtB,IAAM7iE,CAAAA,CAAYnK,MAAAA,CAAuB,IAAI,CAAA,CAEvC0tE,CAAAA,CAAoBpjE,cAAAA,CAAe,CACvC,UAAA,CAAA0iE,CAAAA,CACA,KAAA,CAAO/xC,CAAAA,CAAM,MAAA,CACb,gBAAA,CAAkB,IAAM9wB,CAAAA,CAAU,OAAA,CAClC,YAAA,CAAc,IAAMsjE,CAAAA,CACpB,QAAA,CAAAV,CAAAA,CACA,GAAA,CAAAE,CACF,CAAC,CAAA,CAEKU,CAAAA,CAAiBD,CAAAA,CAAkB,eAAA,EAAgB,CAEnDN,CAAAA,CAAsC,CAC1C,MAAA,CAAQ,OAAOtgD,CAAAA,EAAW,QAAA,CAAW,CAAA,EAAGA,CAAM,CAAA,EAAA,CAAA,CAAOA,CAAAA,CACrD,KAAA,CAAO,OAAOzF,CAAAA,EAAU,QAAA,CAAW,CAAA,EAAGA,CAAK,KAAOA,CAAAA,CAClD,QAAA,CAAU,MAAA,CACV,QAAA,CAAU,UACZ,CAAA,CAEMgmD,CAAAA,CAAkC,CACtC,KAAA,CAAO,CAAA,EAAGK,CAAAA,CAAkB,YAAA,EAAc,CAAA,EAAA,CAAA,CAC1C,MAAA,CAAQ,MAAA,CACR,QAAA,CAAU,UACZ,CAAA,CAEA,OACEtvE,GAAAA,CAAC,KAAA,CAAA,CAAI,GAAA,CAAK+L,CAAAA,CAAW,KAAA,CAAOijE,CAAAA,CAAgB,SAAA,CAAW1tE,CAAAA,CACrD,QAAA,CAAAtB,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAOivE,CAAAA,CACT,QAAA,CAAAM,CAAAA,CAAe,GAAA,CAAKC,CAAAA,EAAkB,CACrC,IAAM38D,CAAAA,CAAOgqB,CAAAA,CAAM2yC,CAAAA,CAAc,KAAK,CAAA,CACtC,GAAI,CAAC38D,CAAAA,CAAM,OAAO,IAAA,CAClB,IAAM7P,CAAAA,CAAM8rE,CAAAA,CAAaA,CAAAA,CAAWj8D,CAAAA,CAAM28D,CAAAA,CAAc,KAAK,CAAA,CAAIA,CAAAA,CAAc,KAAA,CAEzEC,CAAAA,CAAmC,CACvC,QAAA,CAAU,WACV,GAAA,CAAK,CAAA,CACL,IAAA,CAAMD,CAAAA,CAAc,KAAA,CACpB,KAAA,CAAOA,CAAAA,CAAc,IAAA,CACrB,MAAA,CAAQ,MACV,CAAA,CAEA,OACExvE,GAAAA,CAAC,KAAA,CAAA,CAAc,KAAA,CAAOyvE,CAAAA,CAAa,YAAA,CAAYD,CAAAA,CAAc,KAAA,CAC1D,QAAA,CAAAvkE,CAAAA,CAAa4H,CAAAA,CAAM28D,CAAAA,CAAc,KAAK,CAAA,CAAA,CAD/BxsE,CAEV,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAEJ,CAKO,SAAS0sE,EAAAA,CAAkBt2E,CAAAA,CAO/B,CACD,IAAMk2E,CAAAA,CAAoBpjE,cAAAA,CAAe,CACvC,UAAA,CAAY,IAAA,CACZ,KAAA,CAAO9S,CAAAA,CAAQ,KAAA,CAAM,MAAA,CACrB,gBAAA,CAAkB,IAAMA,CAAAA,CAAQ,aAAA,CAChC,YAAA,CAAc,IAAMA,CAAAA,CAAQ,mBAAA,CAC5B,QAAA,CAAUA,CAAAA,CAAQ,QAAA,EAAY,CAAA,CAC9B,GAAA,CAAKA,CAAAA,CAAQ,GAAA,EAAO,CACtB,CAAC,CAAA,CAED,OAAO,CACL,iBAAA,CAAAk2E,CAAAA,CACA,cAAA,CAAgBA,CAAAA,CAAkB,eAAA,EAAgB,CAClD,UAAA,CAAYA,CAAAA,CAAkB,YAAA,EAChC,CACF,CAKO,SAASK,EAAAA,CAAqBvxD,CAAAA,CAAqB7lB,CAAAA,CAAY,EAAA,CAAa,CACjF,OAAO6lB,CAAAA,CAAc7lB,CACvB,CCxIO,IAAMq3E,EAAAA,CAAU,CACrB,IAAA,CAAM,CAAA,CACN,EAAA,CAAI,CAAA,CACJ,EAAA,CAAI,CAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EACT,CAAA,CAKatjC,EAAAA,CAAe,CAC1B,IAAA,CAAM,CAAA,CACN,EAAA,CAAI,CAAA,CACJ,EAAA,CAAI,CAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,GACJ,KAAA,CAAO,EAAA,CACP,IAAA,CAAM,IACR,CAAA,CAKaujC,EAAAA,CAAW,CACtB,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,IAAA,CAAM,EAAA,CACN,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EAAA,CACP,KAAA,CAAO,EACT,CAAA,CAKaC,EAAAA,CAAa,CACxB,KAAA,CAAO,GAAA,CACP,MAAA,CAAQ,GAAA,CACR,MAAA,CAAQ,GAAA,CACR,QAAA,CAAU,GAAA,CACV,IAAA,CAAM,GAAA,CACN,SAAA,CAAW,GACb,CAAA,CAKaC,EAAAA,CAAa,CACxB,IAAA,CAAM,CAAA,CACN,KAAA,CAAO,IAAA,CACP,IAAA,CAAM,KAAA,CACN,MAAA,CAAQ,GAAA,CACR,OAAA,CAAS,KAAA,CACT,KAAA,CAAO,CACT,CAAA,CAKa7qB,EAAAA,CAAS,CACpB,IAAA,CAAM,CAAA,CACN,QAAA,CAAU,GAAA,CACV,OAAQ,IAAA,CACR,KAAA,CAAO,IAAA,CACP,aAAA,CAAe,IAAA,CACf,KAAA,CAAO,IAAA,CACP,OAAA,CAAS,IAAA,CACT,OAAA,CAAS,IACX,CAAA,CAKa7tD,EAAAA,CAAW,CACtB,OAAA,CAAS,CAAA,CACT,OAAA,CAAS,EAAA,CACT,MAAA,CAAQ,GAAA,CACR,IAAA,CAAM,GAAA,CACN,MAAA,CAAQ,GAAA,CACR,IAAA,CAAM,GAAA,CACN,MAAA,CAAQ,GAAA,CACR,OAAA,CAAS,GACX,CAAA,CAKaC,EAAAA,CAAS,CACpB,MAAA,CAAQ,QAAA,CACR,IAAA,CAAM,MAAA,CACN,MAAA,CAAQ,SAAA,CACR,OAAA,CAAS,UAAA,CACT,SAAA,CAAW,aAAA,CAEX,MAAA,CAAQ,gCAAA,CACR,KAAA,CAAO,gCAAA,CACP,MAAA,CAAQ,wCACV,CAAA,CAKa04E,EAAAA,CAAU,CACrB,IAAA,CAAM,MAAA,CACN,EAAA,CAAI,iCAAA,CACJ,IAAA,CAAM,iEAAA,CACN,EAAA,CAAI,uEAAA,CACJ,EAAA,CAAI,yEAAA,CACJ,GAAI,2EAAA,CACJ,KAAA,CAAO,uCAAA,CACP,KAAA,CAAO,uCACT,CAAA,CAKaC,EAAAA,CAAU,CACrB,CAAA,CAAG,CAAA,CACH,CAAA,CAAG,GAAA,CACH,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,EAAA,CAAI,EAAA,CACJ,GAAA,CAAK,CACP,CAAA,CAKaC,EAAAA,CAAS,CACpB,MAAA,CAAQ,CACN,KAAA,CAAO,GAAA,CACP,QAAA,CAAU,GAAA,CACV,QAAA,CAAU,GAAA,CACV,GAAA,CAAK,EAAA,CACL,OAAA,CAAS,EAAA,CACT,YAAA,CAAc,EAChB,CAAA,CACA,IAAA,CAAM,CACJ,SAAA,CAAW,EAAA,CACX,SAAA,CAAW,GAAA,CACX,OAAA,CAAS,EAAA,CACT,GAAA,CAAK,CACP,CAAA,CACA,KAAA,CAAO,CACL,OAAA,CAAS,EAAA,CACT,GAAA,CAAK,EACP,CACF,CAAA,CAKaC,EAAAA,CAAQ,CACnB,QAAA,CAAU,CACR,YAAA,CAAc,EAAA,CACd,SAAA,CAAW,EAAA,CACX,YAAA,CAAc,EAAA,CACd,YAAA,CAAc,EAAA,CACd,WAAA,CAAa,CAAA,CACb,aAAA,CAAe,CACjB,CAAA,CACA,IAAA,CAAM,CACJ,MAAA,CAAQ,EAAA,CACR,SAAA,CAAW,EAAA,CACX,SAAA,CAAW,EAAA,CACX,YAAA,CAAc,CAAA,CACd,OAAA,CAAS,CACX,CAAA,CACA,UAAA,CAAY,CACV,SAAA,CAAW,CAAA,CACX,SAAA,CAAW,CACb,CAAA,CACA,KAAA,CAAO,CACL,GAAA,CAAK,CACH,WAAA,CAAa,EAAA,CACb,cAAA,CAAgB,EAAA,CAChB,cAAA,CAAgB,EAClB,CAAA,CACA,IAAA,CAAM,CACJ,WAAA,CAAa,EAAA,CACb,cAAA,CAAgB,EAAA,CAChB,cAAA,CAAgB,GAClB,EACA,KAAA,CAAO,CACL,WAAA,CAAa,GAAA,CACb,cAAA,CAAgB,EAAA,CAChB,cAAA,CAAgB,GAClB,CAAA,CACA,OAAA,CAAS,CACP,WAAA,CAAa,GAAA,CACb,cAAA,CAAgB,GAAA,CAChB,cAAA,CAAgB,GAClB,CACF,CAAA,CACA,SAAA,CAAW,CACT,IAAA,CAAM,EAAA,CACN,QAAA,CAAU,EACZ,CACF,CAAA,CAKaC,EAAAA,CAAe,CAC1B,OAAA,CAAAR,EAAAA,CACA,YAAA,CAAAtjC,EAAAA,CACA,QAAA,CAAAujC,EAAAA,CACA,UAAA,CAAAC,EAAAA,CACA,UAAA,CAAAC,EAAAA,CACA,MAAA,CAAA7qB,EAAAA,CACA,QAAA,CAAA7tD,EAAAA,CACA,MAAA,CAAAC,EAAAA,CACA,OAAA,CAAA04E,EAAAA,CACA,OAAA,CAAAC,EAAAA,CACA,MAAA,CAAAC,EAAAA,CACA,KAAA,CAAAC,EACF,EAyBO,SAASE,EAAAA,CACdC,CAAAA,CACAttE,CAAAA,CACAwf,CAAAA,CACG,CACH,OAAO8tD,CAAAA,CAAOttE,CAAG,CAAA,EAAKwf,CACxB,CCnQA,SAAS+tD,EAAAA,CACPC,CAAAA,CACA91E,CAAAA,CAAS,EAAA,CACTT,CAAAA,CAAqC,EAAC,CACV,CAC5B,IAAA,GAAW,CAAC+I,CAAAA,CAAK5F,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQozE,CAAG,CAAA,CAAG,CAC9C,IAAMC,CAAAA,CAAS/1E,CAAAA,CAAS,CAAA,EAAGA,CAAM,CAAA,CAAA,EAAIsI,CAAG,CAAA,CAAA,CAAKA,CAAAA,CAEzC,OAAO5F,CAAAA,EAAU,QAAA,EAAYA,CAAAA,GAAU,IAAA,EAAQ,CAAC,KAAA,CAAM,OAAA,CAAQA,CAAK,CAAA,CACrEmzE,EAAAA,CAAcnzE,CAAAA,CAAkCqzE,CAAAA,CAAQx2E,CAAM,CAAA,CAAA,CACrD,OAAOmD,CAAAA,EAAU,QAAA,EAAY,OAAOA,CAAAA,EAAU,QAAA,IACvDnD,CAAAA,CAAOw2E,CAAM,CAAA,CAAIrzE,CAAAA,EAErB,CAEA,OAAOnD,CACT,CAKA,SAASy2E,EAAAA,CAAetzE,EAA2B,CACjD,OAAI,OAAOA,CAAAA,EAAU,QAAA,CAEfA,CAAAA,CAAQ,CAAA,EAAKA,CAAAA,CAAQ,GAAA,CAChB,CAAA,EAAGA,CAAK,CAAA,EAAA,CAAA,CAEVA,CAAAA,CAAM,QAAA,EAAS,CAEjBA,CACT,CAKO,SAASuzE,EAAAA,CAAqBj2E,CAAAA,CAAS,QAAA,CAAkB,CAC9D,IAAMk2E,CAAAA,CAAaL,EAAAA,CAAcH,EAAY,CAAA,CACvCS,CAAAA,CAAoB,EAAC,CAE3B,IAAA,GAAW,CAAC7tE,CAAAA,CAAK5F,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQwzE,CAAU,CAAA,CAAG,CACrD,IAAM/2C,CAAAA,CAAU,CAAA,EAAA,EAAKn/B,CAAM,CAAA,CAAA,EAAIsI,CAAG,CAAA,CAAA,CAC5B8tE,CAAAA,CAAWJ,EAAAA,CAAetzE,CAAK,CAAA,CACrCyzE,CAAAA,CAAQ,IAAA,CAAK,CAAA,EAAA,EAAKh3C,CAAO,CAAA,EAAA,EAAKi3C,CAAQ,CAAA,CAAA,CAAG,EAC3C,CAEA,OAAO,CAAA;AAAA,EAAYD,EAAQ,IAAA,CAAK;AAAA,CAAI,CAAC;AAAA,CAAA,CACvC,CAqEO,SAASE,EAAAA,CACdpwE,EACAjG,CAAAA,CAAS,QAAA,CACD,CACR,IAAMm2E,CAAAA,CAAoB,EAAC,CAGrBG,EAAaT,EAAAA,CAAc5vE,CAA2C,EAE5E,IAAA,GAAW,CAACqC,EAAK5F,CAAK,CAAA,GAAK,MAAA,CAAO,OAAA,CAAQ4zE,CAAU,CAAA,CAAG,CACrD,IAAMn3C,CAAAA,CAAU,CAAA,EAAA,EAAKn/B,CAAM,CAAA,OAAA,EAAUsI,CAAG,GACxC6tE,CAAAA,CAAQ,IAAA,CAAK,KAAKh3C,CAAO,CAAA,EAAA,EAAKz8B,CAAK,CAAA,CAAA,CAAG,EACxC,CAEA,OAAO,CAAA;AAAA,EAAYyzE,EAAQ,IAAA,CAAK;AAAA,CAAI,CAAC;AAAA,CAAA,CACvC,CAKO,IAAMxyD,EAAAA,CAAyB,CACpC,WAAY,CACV,OAAA,CAAS,SAAA,CACT,SAAA,CAAW,UACX,QAAA,CAAU,SAAA,CACV,IAAA,CAAM,SAAA,CACN,MAAO,SAAA,CACP,MAAA,CAAQ,SACV,CAAA,CACA,KAAM,CACJ,OAAA,CAAS,SAAA,CACT,SAAA,CAAW,UACX,QAAA,CAAU,SAAA,CACV,QAAA,CAAU,SAAA,CACV,QAAS,SACX,CAAA,CACA,MAAA,CAAQ,CACN,QAAS,SAAA,CACT,KAAA,CAAO,SAAA,CACP,KAAA,CAAO,UACP,MAAA,CAAQ,SACV,CAAA,CACA,MAAA,CAAQ,CACN,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,SAAA,CACT,MAAO,SAAA,CACP,IAAA,CAAM,SACR,CAAA,CACA,SAAU,CACR,GAAA,CAAK,SAAA,CACL,MAAA,CAAQ,UACR,IAAA,CAAM,SAAA,CACN,MAAA,CAAQ,SACV,EACA,WAAA,CAAa,CACX,OAAA,CAAS,SAAA,CACT,aAAc,SAAA,CACd,aAAA,CAAe,SAAA,CACf,SAAA,CAAW,UACX,cAAA,CAAgB,SAAA,CAChB,eAAA,CAAiB,SACnB,EACA,KAAA,CAAO,CACL,QAAA,CAAU,SAAA,CACV,UAAW,SAAA,CACX,cAAA,CAAgB,SAAA,CAChB,UAAA,CAAY,UACZ,YAAA,CAAc,SAAA,CACd,SAAA,CAAW,SAAA,CACX,WAAY,SAAA,CACZ,OAAA,CAAS,SACX,CACF,EAKaC,EAAAA,CAA0B,CACrC,UAAA,CAAY,CACV,QAAS,SAAA,CACT,SAAA,CAAW,SAAA,CACX,QAAA,CAAU,UACV,IAAA,CAAM,SAAA,CACN,KAAA,CAAO,SAAA,CACP,OAAQ,SACV,CAAA,CACA,IAAA,CAAM,CACJ,QAAS,SAAA,CACT,SAAA,CAAW,SAAA,CACX,QAAA,CAAU,UACV,QAAA,CAAU,SAAA,CACV,OAAA,CAAS,SACX,EACA,MAAA,CAAQ,CACN,OAAA,CAAS,SAAA,CACT,MAAO,SAAA,CACP,KAAA,CAAO,SAAA,CACP,MAAA,CAAQ,SACV,CAAA,CACA,MAAA,CAAQ,CACN,OAAA,CAAS,UACT,OAAA,CAAS,SAAA,CACT,KAAA,CAAO,SAAA,CACP,KAAM,SACR,CAAA,CACA,QAAA,CAAU,CACR,IAAK,SAAA,CACL,MAAA,CAAQ,SAAA,CACR,IAAA,CAAM,UACN,MAAA,CAAQ,SACV,CAAA,CACA,WAAA,CAAa,CACX,OAAA,CAAS,SAAA,CACT,YAAA,CAAc,SAAA,CACd,cAAe,SAAA,CACf,SAAA,CAAW,SAAA,CACX,cAAA,CAAgB,UAChB,eAAA,CAAiB,SACnB,CAAA,CACA,KAAA,CAAO,CACL,QAAA,CAAU,SAAA,CACV,SAAA,CAAW,SAAA,CACX,eAAgB,SAAA,CAChB,UAAA,CAAY,SAAA,CACZ,YAAA,CAAc,UACd,SAAA,CAAW,SAAA,CACX,UAAA,CAAY,SAAA,CACZ,QAAS,SACX,CACF,CAAA,CAKaga,EAAAA,CAA4B,CACvC,UAAA,CAAY,CACV,OAAA,CAAS,SAAA,CACT,UAAW,SAAA,CACX,QAAA,CAAU,SAAA,CACV,IAAA,CAAM,UACN,KAAA,CAAO,SAAA,CACP,MAAA,CAAQ,SACV,EACA,IAAA,CAAM,CACJ,OAAA,CAAS,SAAA,CACT,UAAW,SAAA,CACX,QAAA,CAAU,SAAA,CACV,QAAA,CAAU,UACV,OAAA,CAAS,SACX,CAAA,CACA,MAAA,CAAQ,CACN,OAAA,CAAS,SAAA,CACT,KAAA,CAAO,SAAA,CACP,MAAO,SAAA,CACP,MAAA,CAAQ,SACV,CAAA,CACA,OAAQ,CACN,OAAA,CAAS,SAAA,CACT,OAAA,CAAS,UACT,KAAA,CAAO,SAAA,CACP,IAAA,CAAM,SACR,EACA,QAAA,CAAU,CACR,GAAA,CAAK,SAAA,CACL,OAAQ,SAAA,CACR,IAAA,CAAM,SAAA,CACN,MAAA,CAAQ,SACV,CAAA,CACA,WAAA,CAAa,CACX,OAAA,CAAS,UACT,YAAA,CAAc,SAAA,CACd,aAAA,CAAe,SAAA,CACf,UAAW,SAAA,CACX,cAAA,CAAgB,SAAA,CAChB,eAAA,CAAiB,SACnB,CAAA,CACA,KAAA,CAAO,CACL,QAAA,CAAU,UACV,SAAA,CAAW,SAAA,CACX,cAAA,CAAgB,SAAA,CAChB,WAAY,SAAA,CACZ,YAAA,CAAc,SAAA,CACd,SAAA,CAAW,UACX,UAAA,CAAY,SAAA,CACZ,OAAA,CAAS,SACX,CACF,EAKO,SAAS24C,EAAAA,CACdtwE,CAAAA,CAAqB0d,GACrB3jB,CAAAA,CAAS,QAAA,CACD,CACR,IAAMw2E,EAAYP,EAAAA,CAAqBj2E,CAAM,CAAA,CACvCy2E,CAAAA,CAAYJ,GAAuBpwE,CAAAA,CAAOjG,CAAM,CAAA,CAEtD,OAAO,GAAGw2E,CAAS;;AAAA,EAAOC,CAAS,CAAA,CACrC,CAKO,SAASC,EAAAA,EAA4B,CAC1C,OAAO,CAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,EAMPH,EAAAA,CAAoB5yD,EAAS,CAAC;;AAAA;AAAA;AAAA,EAI9B0yD,EAAAA,CAAuBzyD,EAAAA,CAAY,QAAQ,CAAA,CAC1C,KAAA,CAAM;AAAA,CAAI,CAAA,CACV,KAAA,CAAM,CAAA,CAAG,EAAE,EACX,IAAA,CAAK;AAAA,CAAI,CAAC;AAAA;;AAAA;AAAA;AAAA,EAKXyyD,EAAAA,CAAuBz4C,EAAAA,CAAc,QAAQ,CAAA,CAC5C,KAAA,CAAM;AAAA,CAAI,CAAA,CACV,KAAA,CAAM,CAAA,CAAG,EAAE,EACX,IAAA,CAAK;AAAA,CAAI,CAAC;AAAA;AAAA,CAGb,CCjVA,IAAM+4C,EAAAA,CAAY,CAAC,CAAE,KAAA,CAAA1wE,CAAM,CAAA,GAA4B,CACrD,OAAQA,CAAAA,EACN,KAAK,MAAA,CACH,OACEX,GAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,QAAA,CAAAA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,oUAAA,CAAqU,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAM,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CACna,CAAA,CAEJ,KAAK,OAAA,CACH,OACEkB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAK,CAAA,CACnEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,sGAAA,CAAuG,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAM,aAAA,CAAc,OAAA,CAAO,CAAA,CAAA,CAC9K,CAAA,CAEJ,KAAK,SAAA,CACH,OACEkB,IAAAA,CAAC,KAAA,CAAA,CAAI,KAAA,CAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM,4BAAA,CAChE,QAAA,CAAA,CAAAlB,GAAAA,CAAC,QAAA,CAAA,CAAO,EAAA,CAAG,GAAA,CAAI,EAAA,CAAG,GAAA,CAAI,CAAA,CAAE,GAAA,CAAI,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,KAAA,CAAK,CAAA,CACnEA,GAAAA,CAAC,MAAA,CAAA,CAAK,CAAA,CAAE,cAAA,CAAe,MAAA,CAAO,cAAA,CAAe,WAAA,CAAY,MAAM,aAAA,CAAc,OAAA,CAAQ,cAAA,CAAe,OAAA,CAAO,CAAA,CAAA,CAC7G,CAEN,CACF,CAAA,CAEO,SAASsxE,EAAAA,CAAc,CAAE,UAAA,CAAAC,CAAAA,CAAa,IAAA,CAAM,OAAA,CAAAn6C,CAAAA,CAAU,KAAA,CAAO,SAAA,CAAA91B,CAAAA,CAAY,EAAG,CAAA,CAAuB,CACxG,GAAM,CAAE,KAAA,CAAO43B,CAAAA,CAAc,QAAA,CAAAH,CAAAA,CAAU,MAAA,CAAAzP,CAAO,CAAA,CAAIgQ,EAAAA,EAAS,CAE3D,OACEt5B,GAAAA,CAAC,KAAA,CAAA,CAAI,SAAA,CAAW,CAAA,eAAA,EAAkBo3B,CAAAA,CAAU,yBAAA,CAA4B,EAAE,CAAA,CAAA,EAAI91B,CAAS,CAAA,CAAA,CACpF,QAAA,CAAA,MAAA,CAAO,OAAA,CAAQgoB,CAAM,CAAA,CAAE,GAAA,CAAI,CAAC,CAACtmB,CAAAA,CAAKy2B,CAAS,CAAA,GAAM,CAChD,IAAM15B,CAAAA,CAAYiD,CAAAA,CACZ63B,CAAAA,CAAW96B,CAAAA,GAAcm5B,CAAAA,CAE/B,OACEh4B,IAAAA,CAAC,QAAA,CAAA,CAEC,OAAA,CAAS,IAAM63B,CAAAA,CAASh5B,CAAS,CAAA,CACjC,SAAA,CAAW,CAAA,uBAAA,EAA0B86B,CAAAA,CAAW,gCAAA,CAAmC,EAAE,CAAA,CAAA,CACrF,YAAA,CAAY,CAAA,UAAA,EAAapB,CAAAA,CAAU,WAAW,CAAA,MAAA,CAAA,CAC9C,cAAA,CAAcoB,CAAAA,CACd,KAAA,CAAOpB,CAAAA,CAAU,WAAA,CAEjB,QAAA,CAAA,CAAAz5B,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,sBAAA,CAAuB,aAAA,CAAY,MAAA,CACjD,QAAA,CAAAA,GAAAA,CAACqxE,EAAAA,CAAA,CAAU,KAAA,CAAOtxE,CAAAA,CAAW,CAAA,CAC/B,CAAA,CACCwxE,CAAAA,EAAc,CAACn6C,CAAAA,EAAWp3B,GAAAA,CAAC,MAAA,CAAA,CAAK,SAAA,CAAU,uBAAA,CAAyB,QAAA,CAAAy5B,CAAAA,CAAU,WAAA,CAAY,CAAA,CAAA,CAAA,CAVrF15B,CAWP,CAEJ,CAAC,CAAA,CACH,CAEJ","file":"index.js","sourcesContent":["/**\r\n * KanbanViewAdapter - ViewAdapter implementation for Kanban board\r\n * @module views/KanbanViewAdapter\r\n *\r\n * Implements the ViewAdapter interface from @libxai/core to enable\r\n * the Kanban board to work with AsakaaRuntime and ViewRegistry.\r\n */\r\n\r\nimport { createRoot, type Root } from 'react-dom/client'\r\nimport { BaseViewAdapter, type ViewBoardData, type ViewOptions, type ExportFormat } from '@libxai/core'\r\nimport { KanbanBoard } from '../components/Board'\r\nimport type { KanbanBoardProps } from '../types'\r\nimport type { Card, Column } from '../types'\r\n\r\n/**\r\n * Kanban view configuration\r\n */\r\nexport interface KanbanViewConfig {\r\n  /**\r\n   * Board callbacks\r\n   */\r\n  callbacks?: KanbanBoardProps['callbacks']\r\n\r\n  /**\r\n   * Card click handler\r\n   */\r\n  onCardClick?: KanbanBoardProps['onCardClick']\r\n\r\n  /**\r\n   * Custom render props\r\n   */\r\n  renderProps?: KanbanBoardProps['renderProps']\r\n\r\n  /**\r\n   * Board configuration\r\n   */\r\n  config?: KanbanBoardProps['config']\r\n\r\n  /**\r\n   * Available users for assignment\r\n   */\r\n  availableUsers?: KanbanBoardProps['availableUsers']\r\n\r\n  /**\r\n   * Custom class name\r\n   */\r\n  className?: string\r\n\r\n  /**\r\n   * Custom inline styles (React.CSSProperties)\r\n   */\r\n  style?: React.CSSProperties\r\n\r\n  /**\r\n   * View options\r\n   */\r\n  viewOptions?: ViewOptions\r\n}\r\n\r\n/**\r\n * KanbanViewAdapter\r\n *\r\n * React-based ViewAdapter implementation that wraps the KanbanBoard component.\r\n * This allows the Kanban board to be used as a view in the ViewRegistry and\r\n * work seamlessly with AsakaaRuntime.\r\n *\r\n * @example\r\n * ```typescript\r\n * import { KanbanViewAdapter } from '@libxai/board'\r\n * import { ViewRegistry } from '@libxai/core'\r\n *\r\n * const registry = new ViewRegistry()\r\n * const kanbanView = new KanbanViewAdapter({\r\n *   callbacks: {\r\n *     onCardMove: (cardId, columnId) => { ... },\r\n *     onCardUpdate: (cardId, updates) => { ... }\r\n *   }\r\n * })\r\n *\r\n * registry.register(kanbanView)\r\n * await registry.activate('kanban', container, data)\r\n * ```\r\n */\r\nexport class KanbanViewAdapter extends BaseViewAdapter<ViewBoardData> {\r\n  readonly id = 'kanban'\r\n  readonly name = 'Kanban Board'\r\n  readonly version = '1.0.0'\r\n  readonly description = ''\r\n  readonly icon = ''\r\n  readonly supportedExports: ExportFormat[] = ['json', 'csv', 'pdf', 'png']\r\n\r\n  private root: Root | null = null\r\n  private kanbanConfig: KanbanViewConfig\r\n\r\n  constructor(config: KanbanViewConfig = {}) {\r\n    super()\r\n\r\n    // Set description and icon after construction\r\n    ;(this as any).description = 'Interactive Kanban board with drag & drop, filters, and real-time updates'\r\n    ;(this as any).icon = ''\r\n\r\n    this.kanbanConfig = config\r\n    this.options = {\r\n      animations: config.viewOptions?.animations ?? true,\r\n      virtualScrolling: config.viewOptions?.virtualScrolling ?? false,\r\n      theme: config.viewOptions?.theme ?? 'dark',\r\n      readonly: config.viewOptions?.readonly ?? false,\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // LIFECYCLE\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Mount the Kanban view\r\n   *\r\n   * @param container - DOM element to mount into\r\n   * @param data - Initial board data\r\n   */\r\n  mount(container: HTMLElement, data: ViewBoardData): void {\r\n    if (this.isMounted()) {\r\n      console.warn('[KanbanViewAdapter] Already mounted, unmounting first')\r\n      this.unmount()\r\n    }\r\n\r\n    // Store references\r\n    this.container = container\r\n    this.data = data\r\n\r\n    // Create React root\r\n    this.root = createRoot(container)\r\n\r\n    // Render Kanban board\r\n    this.render()\r\n\r\n    // Emit mounted event\r\n    this.emit('view:mounted', { viewId: this.id, timestamp: Date.now() })\r\n  }\r\n\r\n  /**\r\n   * Unmount the Kanban view\r\n   */\r\n  unmount(): void {\r\n    if (!this.isMounted()) {\r\n      return\r\n    }\r\n\r\n    // Emit unmounted event BEFORE cleanup\r\n    this.emit('view:unmounted', { viewId: this.id, timestamp: Date.now() })\r\n\r\n    // Unmount React\r\n    if (this.root) {\r\n      this.root.unmount()\r\n      this.root = null\r\n    }\r\n\r\n    // Clear references\r\n    if (this.container) {\r\n      this.container.innerHTML = ''\r\n      this.container = null\r\n    }\r\n\r\n    this.data = null\r\n  }\r\n\r\n  /**\r\n   * Update the view with new data\r\n   *\r\n   * @param data - New board data\r\n   */\r\n  update(data: ViewBoardData): void {\r\n    if (!this.isMounted()) {\r\n      console.warn('[KanbanViewAdapter] Not mounted, cannot update')\r\n      return\r\n    }\r\n\r\n    this.data = data\r\n    this.render()\r\n\r\n    this.emit('view:updated', { viewId: this.id, data })\r\n  }\r\n\r\n  /**\r\n   * Configure the view\r\n   *\r\n   * @param options - View options\r\n   */\r\n  configure(options: ViewOptions): void {\r\n    this.options = { ...this.options, ...options }\r\n\r\n    // Re-render if mounted\r\n    if (this.isMounted()) {\r\n      this.render()\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // EXPORT\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Export the view to a specific format\r\n   *\r\n   * @param format - Export format\r\n   * @returns Promise resolving to exported data\r\n   */\r\n  async export(format: 'json' | 'csv' | 'pdf' | 'png'): Promise<string | Blob> {\r\n    if (!this.data) {\r\n      throw new Error('No data to export')\r\n    }\r\n\r\n    switch (format) {\r\n      case 'json':\r\n        return JSON.stringify(this.data, null, 2)\r\n\r\n      case 'csv':\r\n        return this.exportToCSV()\r\n\r\n      case 'pdf':\r\n        return this.exportToPDF()\r\n\r\n      case 'png':\r\n        return this.exportToPNG()\r\n\r\n      default:\r\n        throw new Error(`Unsupported export format: ${format}`)\r\n    }\r\n  }\r\n\r\n  // ========================================================================\r\n  // PRIVATE METHODS\r\n  // ========================================================================\r\n\r\n  /**\r\n   * Render the Kanban board\r\n   */\r\n  private render(): void {\r\n    if (!this.root || !this.data) {\r\n      return\r\n    }\r\n\r\n    // Convert ViewBoardData to KanbanBoard props format\r\n    const board = {\r\n      id: this.data.board?.id || 'board-1',\r\n      title: this.data.board?.title || 'Untitled Board',\r\n      columns: this.data.columns,\r\n      cards: this.data.cards,\r\n    }\r\n\r\n    // Render React component\r\n    this.root.render(\r\n      <KanbanBoard\r\n        board={board}\r\n        callbacks={this.kanbanConfig.callbacks || {}}\r\n        onCardClick={this.kanbanConfig.onCardClick}\r\n        renderProps={this.kanbanConfig.renderProps}\r\n        config={this.kanbanConfig.config}\r\n        availableUsers={this.kanbanConfig.availableUsers}\r\n        className={this.kanbanConfig.className}\r\n        style={this.kanbanConfig.style}\r\n      />\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Export board data to CSV format\r\n   */\r\n  private exportToCSV(): string {\r\n    if (!this.data) return ''\r\n\r\n    const rows: string[][] = [\r\n      ['Card ID', 'Title', 'Column', 'Description', 'Labels', 'Assignees', 'Due Date', 'Position'],\r\n    ]\r\n\r\n    this.data.cards.forEach((card: Card) => {\r\n      const column = this.data!.columns.find((col: Column) => col.id === card.columnId)\r\n      rows.push([\r\n        card.id,\r\n        card.title,\r\n        column?.title || '',\r\n        card.description || '',\r\n        card.labels?.join(', ') || '',\r\n        card.assignedUserIds?.join(', ') || card.assigneeId || '',\r\n        card.dueDate?.toString() || '',\r\n        card.position.toString(),\r\n      ])\r\n    })\r\n\r\n    return rows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')).join('\\n')\r\n  }\r\n\r\n  /**\r\n   * Export board to PDF\r\n   * Uses the PDF export functionality from the Board component\r\n   */\r\n  private async exportToPDF(): Promise<Blob> {\r\n    // TODO: Integrate with PDF export from CardDetailModal/PDFExport\r\n    // For now, return a simple PDF placeholder\r\n    throw new Error('PDF export not yet implemented in ViewAdapter')\r\n  }\r\n\r\n  /**\r\n   * Export board to PNG image\r\n   * Uses html2canvas to capture the board\r\n   */\r\n  private async exportToPNG(): Promise<Blob> {\r\n    if (!this.container) {\r\n      throw new Error('View not mounted')\r\n    }\r\n\r\n    // Dynamic import to avoid bundling if not used\r\n    const html2canvas = await import('html2canvas')\r\n\r\n    const canvas = await html2canvas.default(this.container, {\r\n      backgroundColor: this.options.theme === 'dark' ? '#1a1a1a' : '#ffffff',\r\n      scale: 2, // Higher resolution\r\n    })\r\n\r\n    return new Promise((resolve, reject) => {\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          resolve(blob)\r\n        } else {\r\n          reject(new Error('Failed to create PNG blob'))\r\n        }\r\n      }, 'image/png')\r\n    })\r\n  }\r\n}\r\n\r\n// ========================================================================\r\n// FACTORY FUNCTION\r\n// ========================================================================\r\n\r\n/**\r\n * Create a new Kanban view adapter\r\n *\r\n * @param config - View configuration\r\n * @returns KanbanViewAdapter instance\r\n *\r\n * @example\r\n * ```typescript\r\n * const kanbanView = createKanbanView({\r\n *   callbacks: {\r\n *     onCardMove: (cardId, columnId) => console.log('Card moved'),\r\n *   },\r\n *   theme: 'dark',\r\n * })\r\n * ```\r\n */\r\nexport function createKanbanView(config: KanbanViewConfig = {}): KanbanViewAdapter {\r\n  return new KanbanViewAdapter(config)\r\n}\r\n","// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const canUseDOM =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined';\n","export type Transform = {\n  x: number;\n  y: number;\n  scaleX: number;\n  scaleY: number;\n};\n\nexport interface Transition {\n  property: string;\n  easing: string;\n  duration: number;\n}\n\nexport const CSS = Object.freeze({\n  Translate: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {x, y} = transform;\n\n      return `translate3d(${x ? Math.round(x) : 0}px, ${\n        y ? Math.round(y) : 0\n      }px, 0)`;\n    },\n  },\n  Scale: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      const {scaleX, scaleY} = transform;\n\n      return `scaleX(${scaleX}) scaleY(${scaleY})`;\n    },\n  },\n  Transform: {\n    toString(transform: Transform | null) {\n      if (!transform) {\n        return;\n      }\n\n      return [\n        CSS.Translate.toString(transform),\n        CSS.Scale.toString(transform),\n      ].join(' ');\n    },\n  },\n  Transition: {\n    toString({property, duration, easing}: Transition) {\n      return `${property} ${duration}ms ${easing}`;\n    },\n  },\n});\n","/**\r\n * Class name utility (cn)\r\n * Combines clsx and tailwind-merge for optimal Tailwind class handling\r\n */\r\n\r\nimport { type ClassValue, clsx } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\n/**\r\n * Merge class names intelligently\r\n * Handles Tailwind class conflicts properly\r\n *\r\n * @example\r\n * cn('px-2 py-1', 'px-4') // => 'py-1 px-4'\r\n * cn('text-red-500', condition && 'text-blue-500') // => 'text-blue-500' if condition is true\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","/**\r\n * Lexicographic positioning utilities\r\n * Uses fractional indexing for efficient reordering without touching all items\r\n * @module utils/positioning\r\n */\r\n\r\n/**\r\n * Calculate position between two items\r\n * Uses lexicographic ordering (fractional indexing)\r\n *\r\n * @param before - Position of item before (or null if first)\r\n * @param after - Position of item after (or null if last)\r\n * @returns New position value\r\n *\r\n * @example\r\n * calculatePosition(null, 1000) // => 500 (before first item)\r\n * calculatePosition(1000, 2000) // => 1500 (between two items)\r\n * calculatePosition(1000, null) // => 2000 (after last item)\r\n */\r\nexport function calculatePosition(\r\n  before: number | null,\r\n  after: number | null\r\n): number {\r\n  // First item\r\n  if (before === null && after === null) {\r\n    return 1000\r\n  }\r\n\r\n  // Insert at beginning\r\n  if (before === null && after !== null) {\r\n    return after / 2\r\n  }\r\n\r\n  // Insert at end\r\n  if (before !== null && after === null) {\r\n    return before + 1000\r\n  }\r\n\r\n  // Insert between\r\n  if (before !== null && after !== null) {\r\n    return (before + after) / 2\r\n  }\r\n\r\n  return 1000\r\n}\r\n\r\n/**\r\n * Generate initial positions for an array of items\r\n * Spaces them 1000 apart for room to insert\r\n *\r\n * @param count - Number of items\r\n * @returns Array of position values\r\n */\r\nexport function generateInitialPositions(count: number): number[] {\r\n  return Array.from({ length: count }, (_, i) => (i + 1) * 1000)\r\n}\r\n\r\n/**\r\n * Rebalance positions when they get too close\r\n * Call this periodically to maintain clean spacing\r\n *\r\n * @param positions - Current positions (sorted)\r\n * @returns Rebalanced positions\r\n */\r\nexport function rebalancePositions(positions: number[]): number[] {\r\n  if (positions.length === 0) return []\r\n  if (positions.length === 1) return [1000]\r\n\r\n  const sorted = [...positions].sort((a, b) => a - b)\r\n  return sorted.map((_, i) => (i + 1) * 1000)\r\n}\r\n\r\n/**\r\n * Check if positions need rebalancing\r\n * Returns true if any two positions are < 1 apart\r\n */\r\nexport function needsRebalancing(positions: number[]): boolean {\r\n  const sorted = [...positions].sort((a, b) => a - b)\r\n\r\n  for (let i = 0; i < sorted.length - 1; i++) {\r\n    if (sorted[i + 1]! - sorted[i]! < 1) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Find position for dropping a card\r\n *\r\n * @param columnCards - Cards in target column (sorted by position)\r\n * @param dropIndex - Index where card is dropped\r\n * @returns New position value\r\n */\r\nexport function calculateDropPosition(\r\n  columnCards: { position: number }[],\r\n  dropIndex: number\r\n): number {\r\n  // Empty column\r\n  if (columnCards.length === 0) {\r\n    return 1000\r\n  }\r\n\r\n  // Drop at beginning\r\n  if (dropIndex === 0) {\r\n    return calculatePosition(null, columnCards[0]!.position)\r\n  }\r\n\r\n  // Drop at end\r\n  if (dropIndex >= columnCards.length) {\r\n    return calculatePosition(\r\n      columnCards[columnCards.length - 1]!.position,\r\n      null\r\n    )\r\n  }\r\n\r\n  // Drop between items\r\n  return calculatePosition(\r\n    columnCards[dropIndex - 1]!.position,\r\n    columnCards[dropIndex]!.position\r\n  )\r\n}\r\n","/**\r\n * Performance utilities\r\n * @module utils/performance\r\n */\r\n\r\nimport { useEffect, useRef } from 'react'\r\n\r\n/**\r\n * Debounce function calls\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: ReturnType<typeof setTimeout> | null = null\r\n\r\n  return function executedFunction(...args: Parameters<T>) {\r\n    const later = () => {\r\n      timeout = null\r\n      func(...args)\r\n    }\r\n\r\n    if (timeout) {\r\n      clearTimeout(timeout)\r\n    }\r\n    timeout = setTimeout(later, wait)\r\n  }\r\n}\r\n\r\n/**\r\n * Throttle function calls\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean\r\n  let lastResult: ReturnType<T>\r\n\r\n  return function executedFunction(...args: Parameters<T>) {\r\n    if (!inThrottle) {\r\n      inThrottle = true\r\n      setTimeout(() => (inThrottle = false), limit)\r\n      lastResult = func(...args)\r\n    }\r\n    return lastResult\r\n  }\r\n}\r\n\r\n/**\r\n * Custom hook for measuring render performance\r\n * Only active in development\r\n */\r\nexport function useRenderPerformance(componentName: string) {\r\n  const renderCount = useRef(0)\r\n  const lastRenderTime = useRef<number>(0)\r\n\r\n  if (process.env.NODE_ENV === 'development') {\r\n    const start = performance.now()\r\n\r\n    useEffect(() => {\r\n      const end = performance.now()\r\n      renderCount.current++\r\n      const renderTime = end - start\r\n\r\n      if (renderTime > 16) {\r\n        // > 1 frame at 60fps\r\n        console.warn(\r\n          `[Performance] ${componentName} render #${renderCount.current} took ${renderTime.toFixed(2)}ms`\r\n        )\r\n      }\r\n\r\n      lastRenderTime.current = renderTime\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * Check if virtualization should be enabled\r\n */\r\nexport function shouldVirtualize(itemCount: number, threshold = 100): boolean {\r\n  return itemCount > threshold\r\n}\r\n\r\n/**\r\n * Request idle callback wrapper with fallback\r\n */\r\nexport const requestIdleCallback =\r\n  typeof window !== 'undefined' && 'requestIdleCallback' in window\r\n    ? window.requestIdleCallback\r\n    : (cb: IdleRequestCallback) => setTimeout(cb, 1)\r\n\r\n/**\r\n * Cancel idle callback wrapper with fallback\r\n */\r\nexport const cancelIdleCallback =\r\n  typeof window !== 'undefined' && 'cancelIdleCallback' in window\r\n    ? window.cancelIdleCallback\r\n    : (id: number) => clearTimeout(id)\r\n\r\n/**\r\n * Memoization helper for expensive computations\r\n */\r\nexport function memoize<T extends (...args: any[]) => any>(fn: T): T {\r\n  const cache = new Map<string, ReturnType<T>>()\r\n\r\n  return ((...args: Parameters<T>) => {\r\n    const key = JSON.stringify(args)\r\n    if (cache.has(key)) {\r\n      return cache.get(key)!\r\n    }\r\n    const result = fn(...args)\r\n    cache.set(key, result)\r\n    return result\r\n  }) as T\r\n}\r\n","/**\r\n * Retry utilities with exponential backoff\r\n * For resilient API calls and persistence operations\r\n * @module utils/retry\r\n */\r\n\r\nexport interface RetryOptions {\r\n  /** Maximum number of retry attempts (default: 3) */\r\n  maxAttempts?: number\r\n  /** Initial delay in ms (default: 1000) */\r\n  initialDelay?: number\r\n  /** Multiplier for exponential backoff (default: 2) */\r\n  backoffMultiplier?: number\r\n  /** Maximum delay in ms (default: 10000) */\r\n  maxDelay?: number\r\n  /** Function to determine if error should be retried */\r\n  shouldRetry?: (error: Error, attempt: number) => boolean\r\n  /** Callback when retry is attempted */\r\n  onRetry?: (error: Error, attempt: number, delay: number) => void\r\n}\r\n\r\nexport interface RetryResult<T> {\r\n  data?: T\r\n  error?: Error\r\n  attempts: number\r\n  success: boolean\r\n}\r\n\r\n/**\r\n * Default retry logic - retries on network errors\r\n */\r\nconst defaultShouldRetry = (error: Error): boolean => {\r\n  // Retry on network errors\r\n  if (error.message.includes('network') || error.message.includes('fetch')) {\r\n    return true\r\n  }\r\n\r\n  // Retry on specific error codes\r\n  if ('status' in error) {\r\n    const status = (error as any).status\r\n    // Retry on server errors (5xx) and rate limiting (429)\r\n    return status >= 500 || status === 429\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Calculate delay with exponential backoff\r\n */\r\nfunction calculateDelay(\r\n  attempt: number,\r\n  initialDelay: number,\r\n  backoffMultiplier: number,\r\n  maxDelay: number\r\n): number {\r\n  const delay = initialDelay * Math.pow(backoffMultiplier, attempt - 1)\r\n  // Add jitter (random variation) to prevent thundering herd\r\n  const jitter = delay * 0.2 * Math.random()\r\n  return Math.min(delay + jitter, maxDelay)\r\n}\r\n\r\n/**\r\n * Retry a function with exponential backoff\r\n *\r\n * @example\r\n * ```ts\r\n * const result = await retryWithBackoff(\r\n *   () => api.updateBoard(board),\r\n *   {\r\n *     maxAttempts: 3,\r\n *     onRetry: (error, attempt) => {\r\n *       console.log(`Retry attempt ${attempt}: ${error.message}`)\r\n *     }\r\n *   }\r\n * )\r\n * ```\r\n */\r\nexport async function retryWithBackoff<T>(\r\n  fn: () => Promise<T>,\r\n  options: RetryOptions = {}\r\n): Promise<RetryResult<T>> {\r\n  const {\r\n    maxAttempts = 3,\r\n    initialDelay = 1000,\r\n    backoffMultiplier = 2,\r\n    maxDelay = 10000,\r\n    shouldRetry = defaultShouldRetry,\r\n    onRetry,\r\n  } = options\r\n\r\n  let lastError: Error | undefined\r\n  let attempts = 0\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    attempts = attempt\r\n\r\n    try {\r\n      const data = await fn()\r\n      return {\r\n        data,\r\n        attempts,\r\n        success: true,\r\n      }\r\n    } catch (error) {\r\n      lastError = error as Error\r\n\r\n      // Check if we should retry\r\n      const isLastAttempt = attempt === maxAttempts\r\n      if (isLastAttempt || !shouldRetry(lastError, attempt)) {\r\n        return {\r\n          error: lastError,\r\n          attempts,\r\n          success: false,\r\n        }\r\n      }\r\n\r\n      // Calculate delay for next attempt\r\n      const delay = calculateDelay(attempt, initialDelay, backoffMultiplier, maxDelay)\r\n\r\n      // Call retry callback\r\n      if (onRetry) {\r\n        try {\r\n          onRetry(lastError, attempt, delay)\r\n        } catch (callbackError) {\r\n          console.error('Error in retry callback:', callbackError)\r\n        }\r\n      }\r\n\r\n      // Wait before retrying\r\n      await new Promise((resolve) => setTimeout(resolve, delay))\r\n    }\r\n  }\r\n\r\n  // This should never be reached, but TypeScript doesn't know that\r\n  return {\r\n    error: lastError || new Error('Unknown error'),\r\n    attempts,\r\n    success: false,\r\n  }\r\n}\r\n\r\n/**\r\n * Retry a function synchronously (for non-async operations)\r\n * No backoff, just immediate retries\r\n */\r\nexport function retrySyncOperation<T>(\r\n  fn: () => T,\r\n  maxAttempts: number = 3\r\n): { data?: T; error?: Error; success: boolean } {\r\n  let lastError: Error | undefined\r\n\r\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n    try {\r\n      const data = fn()\r\n      return { data, success: true }\r\n    } catch (error) {\r\n      lastError = error as Error\r\n\r\n      if (attempt === maxAttempts) {\r\n        return { error: lastError, success: false }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { error: lastError || new Error('Unknown error'), success: false }\r\n}\r\n\r\n/**\r\n * Create a retry wrapper function\r\n * Returns a function that automatically retries on failure\r\n *\r\n * @example\r\n * ```ts\r\n * const saveBoard = createRetryWrapper(\r\n *   api.saveBoard,\r\n *   { maxAttempts: 3 }\r\n * )\r\n *\r\n * const result = await saveBoard(boardData)\r\n * ```\r\n */\r\nexport function createRetryWrapper<TArgs extends any[], TReturn>(\r\n  fn: (...args: TArgs) => Promise<TReturn>,\r\n  options: RetryOptions = {}\r\n): (...args: TArgs) => Promise<RetryResult<TReturn>> {\r\n  return async (...args: TArgs) => {\r\n    return retryWithBackoff(() => fn(...args), options)\r\n  }\r\n}\r\n\r\n/**\r\n * Retry with circuit breaker pattern\r\n * Stops retrying if too many failures occur\r\n */\r\nexport class CircuitBreaker {\r\n  private failures: number = 0\r\n  private lastFailureTime: number = 0\r\n  private isOpen: boolean = false\r\n\r\n  constructor(\r\n    private threshold: number = 5,\r\n    private resetTimeout: number = 60000 // 1 minute\r\n  ) {}\r\n\r\n  async execute<T>(fn: () => Promise<T>): Promise<T> {\r\n    // Check if circuit is open\r\n    if (this.isOpen) {\r\n      const timeSinceLastFailure = Date.now() - this.lastFailureTime\r\n\r\n      // Try to close circuit after reset timeout\r\n      if (timeSinceLastFailure >= this.resetTimeout) {\r\n        this.reset()\r\n      } else {\r\n        throw new Error('Circuit breaker is open - too many failures')\r\n      }\r\n    }\r\n\r\n    try {\r\n      const result = await fn()\r\n      this.onSuccess()\r\n      return result\r\n    } catch (error) {\r\n      this.onFailure()\r\n      throw error\r\n    }\r\n  }\r\n\r\n  private onSuccess(): void {\r\n    this.failures = 0\r\n    this.isOpen = false\r\n  }\r\n\r\n  private onFailure(): void {\r\n    this.failures++\r\n    this.lastFailureTime = Date.now()\r\n\r\n    if (this.failures >= this.threshold) {\r\n      this.isOpen = true\r\n    }\r\n  }\r\n\r\n  private reset(): void {\r\n    this.failures = 0\r\n    this.isOpen = false\r\n  }\r\n\r\n  getStatus(): { failures: number; isOpen: boolean } {\r\n    return {\r\n      failures: this.failures,\r\n      isOpen: this.isOpen,\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Structured Logger for ASAKAA\r\n * Lightweight, browser-compatible logging system\r\n * @module utils/logger\r\n */\r\n\r\nexport enum LogLevel {\r\n  DEBUG = 0,\r\n  INFO = 1,\r\n  WARN = 2,\r\n  ERROR = 3,\r\n  NONE = 4,\r\n}\r\n\r\nexport interface LogContext {\r\n  [key: string]: any\r\n}\r\n\r\nexport interface LogEntry {\r\n  timestamp: string\r\n  level: string\r\n  message: string\r\n  context?: LogContext\r\n  component?: string\r\n  action?: string\r\n  duration?: number\r\n  error?: {\r\n    message: string\r\n    stack?: string\r\n    name: string\r\n  }\r\n}\r\n\r\nexport interface LoggerOptions {\r\n  /** Minimum log level (default: INFO in production, DEBUG in development) */\r\n  minLevel?: LogLevel\r\n  /** Enable/disable logging (default: true) */\r\n  enabled?: boolean\r\n  /** Custom log handler for sending logs to external service */\r\n  onLog?: (entry: LogEntry) => void\r\n  /** Enable performance timing (default: true) */\r\n  enableTiming?: boolean\r\n  /** Component name prefix */\r\n  componentName?: string\r\n}\r\n\r\n/**\r\n * Structured Logger Class\r\n *\r\n * @example\r\n * ```ts\r\n * const logger = new Logger({ componentName: 'KanbanBoard' })\r\n *\r\n * logger.info('Board loaded', { boardId: 'abc-123', cardCount: 42 })\r\n * logger.warn('Slow operation detected', { duration: 1500 })\r\n * logger.error('Failed to save', { error: err })\r\n *\r\n * // With timing\r\n * const timer = logger.startTimer('drag-operation')\r\n * // ... do work\r\n * timer.end({ cardId: 'card-1' })\r\n * ```\r\n */\r\nexport class Logger {\r\n  private options: Required<LoggerOptions>\r\n  private static globalOptions: Partial<LoggerOptions> = {}\r\n\r\n  constructor(options: LoggerOptions = {}) {\r\n    const isDev = process.env.NODE_ENV === 'development'\r\n\r\n    this.options = {\r\n      minLevel: options.minLevel ?? (isDev ? LogLevel.DEBUG : LogLevel.INFO),\r\n      enabled: options.enabled ?? true,\r\n      onLog: options.onLog ?? this.defaultLogHandler,\r\n      enableTiming: options.enableTiming ?? true,\r\n      componentName: options.componentName ?? 'ASAKAA',\r\n      ...Logger.globalOptions,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set global logger configuration\r\n   * Applies to all logger instances\r\n   */\r\n  static configure(options: Partial<LoggerOptions>): void {\r\n    Logger.globalOptions = { ...Logger.globalOptions, ...options }\r\n  }\r\n\r\n  /**\r\n   * Create child logger with component name\r\n   */\r\n  child(componentName: string): Logger {\r\n    return new Logger({\r\n      ...this.options,\r\n      componentName: `${this.options.componentName}:${componentName}`,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Log debug message\r\n   */\r\n  debug(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.DEBUG, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log info message\r\n   */\r\n  info(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.INFO, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log warning message\r\n   */\r\n  warn(message: string, context?: LogContext): void {\r\n    this.log(LogLevel.WARN, message, context)\r\n  }\r\n\r\n  /**\r\n   * Log error message\r\n   */\r\n  error(message: string, error?: Error, context?: LogContext): void {\r\n    this.log(LogLevel.ERROR, message, {\r\n      ...context,\r\n      error: error\r\n        ? {\r\n            message: error.message,\r\n            stack: error.stack,\r\n            name: error.name,\r\n          }\r\n        : undefined,\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Start a timer for performance tracking\r\n   */\r\n  startTimer(action: string): Timer {\r\n    if (!this.options.enableTiming) {\r\n      return new Timer(() => {}, false)\r\n    }\r\n\r\n    return new Timer(\r\n      (duration: number, context?: LogContext) => {\r\n        this.log(LogLevel.DEBUG, `${action} completed`, {\r\n          ...context,\r\n          action,\r\n          duration,\r\n        })\r\n      },\r\n      true\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Core logging method\r\n   */\r\n  private log(level: LogLevel, message: string, context?: LogContext): void {\r\n    if (!this.options.enabled || level < this.options.minLevel) {\r\n      return\r\n    }\r\n\r\n    const entry: LogEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      level: LogLevel[level],\r\n      message,\r\n      component: this.options.componentName,\r\n      ...context,\r\n    }\r\n\r\n    this.options.onLog(entry)\r\n  }\r\n\r\n  /**\r\n   * Default log handler (console)\r\n   */\r\n  private defaultLogHandler = (entry: LogEntry): void => {\r\n    const { timestamp, level, message, component, ...rest } = entry\r\n\r\n    const prefix = `[${timestamp}] [${level}] [${component}]`\r\n    const hasContext = Object.keys(rest).length > 0\r\n\r\n    switch (level) {\r\n      case 'DEBUG':\r\n        console.debug(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'INFO':\r\n        console.info(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'WARN':\r\n        console.warn(prefix, message, hasContext ? rest : '')\r\n        break\r\n      case 'ERROR':\r\n        console.error(prefix, message, hasContext ? rest : '')\r\n        if (entry.error?.stack) {\r\n          console.error(entry.error.stack)\r\n        }\r\n        break\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Timer for performance tracking\r\n */\r\nclass Timer {\r\n  private startTime: number\r\n\r\n  constructor(\r\n    private onEnd: (duration: number, context?: LogContext) => void,\r\n    private enabled: boolean\r\n  ) {\r\n    this.startTime = enabled ? performance.now() : 0\r\n  }\r\n\r\n  /**\r\n   * End timer and log duration\r\n   */\r\n  end(context?: LogContext): number {\r\n    if (!this.enabled) {\r\n      return 0\r\n    }\r\n\r\n    const duration = Math.round(performance.now() - this.startTime)\r\n    this.onEnd(duration, context)\r\n    return duration\r\n  }\r\n\r\n  /**\r\n   * Get elapsed time without ending timer\r\n   */\r\n  elapsed(): number {\r\n    if (!this.enabled) {\r\n      return 0\r\n    }\r\n    return Math.round(performance.now() - this.startTime)\r\n  }\r\n}\r\n\r\n/**\r\n * Global logger instance\r\n */\r\nexport const logger = new Logger()\r\n\r\n/**\r\n * Create a scoped logger for a component\r\n */\r\nexport function createLogger(componentName: string, options?: LoggerOptions): Logger {\r\n  return new Logger({\r\n    ...options,\r\n    componentName,\r\n  })\r\n}\r\n","import { jsPDF } from 'jspdf'\r\nimport html2canvas from 'html2canvas'\r\nimport type { Board, ExportOptions, ExportFormat } from '../types'\r\n\r\nexport function exportToJSON(board: Board, _options?: ExportOptions): string {\r\n  const data = {\r\n    board: {\r\n      id: board.id,\r\n      title: board.title,\r\n      metadata: board.metadata,\r\n      exportedAt: new Date().toISOString(),\r\n    },\r\n    columns: board.columns,\r\n    cards: board.cards,\r\n    options: _options,\r\n  }\r\n\r\n  return JSON.stringify(data, null, 2)\r\n}\r\n\r\nexport function exportToCSV(board: Board, _options?: ExportOptions): string {\r\n  const headers = [\r\n    'Card ID',\r\n    'Title',\r\n    'Description',\r\n    'Column',\r\n    'Priority',\r\n    'Labels',\r\n    'Assigned Users',\r\n    'Start Date',\r\n    'End Date',\r\n    'Created At',\r\n    'Updated At',\r\n  ]\r\n\r\n  const rows = board.cards.map((card) => {\r\n    const column = board.columns.find((col) => col.id === card.columnId)\r\n\r\n    return [\r\n      card.id,\r\n      escapeCSV(card.title),\r\n      escapeCSV(card.description || ''),\r\n      escapeCSV(column?.title || ''),\r\n      card.priority || '',\r\n      (card.labels || []).join(';'),\r\n      (card.assignedUserIds || []).join(';'),\r\n      card.startDate || '',\r\n      card.endDate || '',\r\n      card.createdAt || '',\r\n      card.updatedAt || '',\r\n    ]\r\n  })\r\n\r\n  const csvContent = [\r\n    headers.join(','),\r\n    ...rows.map((row) => row.join(',')),\r\n  ].join('\\n')\r\n\r\n  return csvContent\r\n}\r\n\r\nexport async function exportToPDF(\r\n  board: Board,\r\n  boardElement?: HTMLElement,\r\n  _options?: ExportOptions\r\n): Promise<jsPDF> {\r\n  // Try to find board element automatically if not provided\r\n  let element = boardElement\r\n\r\n  if (!element) {\r\n    // Look for the board element in the DOM\r\n    const boardEl = document.querySelector<HTMLElement>('.asakaa-board')\r\n    if (boardEl) {\r\n      element = boardEl.parentElement || boardEl\r\n    }\r\n  }\r\n\r\n  // If board element is available, capture it visually\r\n  if (element) {\r\n    try {\r\n      const canvas = await html2canvas(element, {\r\n        backgroundColor: '#0a0a0a',\r\n        scale: 1.5, // Balance between quality and performance\r\n        logging: false,\r\n        useCORS: true,\r\n        allowTaint: true,\r\n        windowWidth: element.scrollWidth,\r\n        windowHeight: element.scrollHeight,\r\n      })\r\n\r\n      const imgData = canvas.toDataURL('image/png')\r\n\r\n      // Calculate dimensions for landscape PDF\r\n      const pdfWidth = 297 // A4 landscape width in mm\r\n      const pdfHeight = 210 // A4 landscape height in mm\r\n      const imgAspect = canvas.width / canvas.height\r\n\r\n      let imgWidth = pdfWidth - 20 // margins\r\n      let imgHeight = imgWidth / imgAspect\r\n\r\n      // If image is too tall, scale to fit height\r\n      if (imgHeight > pdfHeight - 20) {\r\n        imgHeight = pdfHeight - 20\r\n        imgWidth = imgHeight * imgAspect\r\n      }\r\n\r\n      const doc = new jsPDF({\r\n        orientation: 'landscape',\r\n        unit: 'mm',\r\n        format: 'a4',\r\n      })\r\n\r\n      // Add title\r\n      doc.setFontSize(16)\r\n      doc.setTextColor(255, 255, 255)\r\n      doc.setFillColor(10, 10, 10)\r\n      doc.rect(0, 0, pdfWidth, 15, 'F')\r\n      doc.text(board.title || 'Kanban Board', 10, 10)\r\n\r\n      // Add board image\r\n      const xOffset = (pdfWidth - imgWidth) / 2\r\n      doc.addImage(imgData, 'PNG', xOffset, 20, imgWidth, imgHeight)\r\n\r\n      return doc\r\n    } catch (error) {\r\n      console.error('Error capturing board:', error)\r\n      // Fall back to text-based export\r\n    }\r\n  }\r\n\r\n  // Fallback: Text-based PDF export\r\n  const doc = new jsPDF()\r\n  let yPosition = 20\r\n\r\n  doc.setFontSize(20)\r\n  doc.text(board.title || 'Kanban Board', 20, yPosition)\r\n  yPosition += 10\r\n\r\n  doc.setFontSize(10)\r\n  doc.setTextColor(128, 128, 128)\r\n  doc.text(`Exported on ${new Date().toLocaleString()}`, 20, yPosition)\r\n  yPosition += 15\r\n\r\n  doc.setTextColor(0, 0, 0)\r\n\r\n  board.columns.forEach((column) => {\r\n    const columnCards = board.cards.filter((card) => card.columnId === column.id)\r\n\r\n    if (yPosition > 250) {\r\n      doc.addPage()\r\n      yPosition = 20\r\n    }\r\n\r\n    doc.setFontSize(16)\r\n    doc.setFont('helvetica', 'bold')\r\n    doc.text(column.title, 20, yPosition)\r\n    yPosition += 8\r\n\r\n    if (columnCards.length === 0) {\r\n      doc.setFontSize(10)\r\n      doc.setFont('helvetica', 'italic')\r\n      doc.setTextColor(128, 128, 128)\r\n      doc.text('No cards in this column', 20, yPosition)\r\n      doc.setTextColor(0, 0, 0)\r\n      yPosition += 10\r\n    } else {\r\n      columnCards.forEach((card) => {\r\n        if (yPosition > 260) {\r\n          doc.addPage()\r\n          yPosition = 20\r\n        }\r\n\r\n        doc.setFontSize(12)\r\n        doc.setFont('helvetica', 'bold')\r\n        doc.text(card.title, 25, yPosition)\r\n        yPosition += 6\r\n\r\n        if (card.description) {\r\n          doc.setFontSize(9)\r\n          doc.setFont('helvetica', 'normal')\r\n          const lines = doc.splitTextToSize(card.description, 160)\r\n          doc.text(lines, 25, yPosition)\r\n          yPosition += lines.length * 5\r\n        }\r\n\r\n        const metadata: string[] = []\r\n        if (card.priority) metadata.push(`Priority: ${card.priority}`)\r\n        if (card.labels && card.labels.length > 0) {\r\n          metadata.push(`Labels: ${card.labels.join(', ')}`)\r\n        }\r\n        if (card.assignedUserIds && card.assignedUserIds.length > 0) {\r\n          metadata.push(`Assigned: ${card.assignedUserIds.length} user(s)`)\r\n        }\r\n        if (card.startDate || card.endDate) {\r\n          const dates = []\r\n          if (card.startDate) dates.push(`Start: ${card.startDate}`)\r\n          if (card.endDate) dates.push(`End: ${card.endDate}`)\r\n          metadata.push(dates.join('  '))\r\n        }\r\n\r\n        if (metadata.length > 0) {\r\n          doc.setFontSize(8)\r\n          doc.setTextColor(100, 100, 100)\r\n          doc.text(metadata.join('  '), 25, yPosition)\r\n          doc.setTextColor(0, 0, 0)\r\n          yPosition += 5\r\n        }\r\n\r\n        yPosition += 5\r\n      })\r\n    }\r\n\r\n    yPosition += 5\r\n  })\r\n\r\n  return doc\r\n}\r\n\r\nfunction escapeCSV(value: string): string {\r\n  if (value.includes(',') || value.includes('\"') || value.includes('\\n')) {\r\n    return `\"${value.replace(/\"/g, '\"\"')}\"`\r\n  }\r\n  return value\r\n}\r\n\r\nexport async function exportBoard(\r\n  board: Board,\r\n  format: ExportFormat,\r\n  boardElement?: HTMLElement,\r\n  options?: ExportOptions\r\n): Promise<string | jsPDF> {\r\n  switch (format) {\r\n    case 'json':\r\n      return exportToJSON(board, options)\r\n    case 'csv':\r\n      return exportToCSV(board, options)\r\n    case 'pdf':\r\n      return await exportToPDF(board, boardElement, options)\r\n    default:\r\n      throw new Error(`Unsupported export format: ${format}`)\r\n  }\r\n}\r\n\r\nexport function downloadExport(\r\n  content: string | jsPDF,\r\n  format: ExportFormat,\r\n  filename?: string\r\n): void {\r\n  const defaultFilename = `board-export-${new Date().getTime()}`\r\n\r\n  // Check if content is a jsPDF object by checking for the save method\r\n  if (format === 'pdf' && typeof content === 'object' && content !== null && 'save' in content) {\r\n    const finalFilename = filename || `${defaultFilename}.pdf`\r\n    ;(content as jsPDF).save(finalFilename)\r\n    return\r\n  }\r\n\r\n  if (typeof content !== 'string') {\r\n    throw new Error('Invalid content type for non-PDF export')\r\n  }\r\n\r\n  const extensions: Record<ExportFormat, string> = {\r\n    json: 'json',\r\n    csv: 'csv',\r\n    pdf: 'pdf',\r\n  }\r\n\r\n  const finalFilename = filename || `${defaultFilename}.${extensions[format]}`\r\n\r\n  const mimeTypes: Record<ExportFormat, string> = {\r\n    json: 'application/json',\r\n    csv: 'text/csv',\r\n    pdf: 'application/pdf',\r\n  }\r\n\r\n  const blob = new Blob([content], { type: mimeTypes[format] })\r\n  const url = URL.createObjectURL(blob)\r\n  const link = document.createElement('a')\r\n  link.href = url\r\n  link.download = finalFilename\r\n  document.body.appendChild(link)\r\n  link.click()\r\n  document.body.removeChild(link)\r\n  URL.revokeObjectURL(url)\r\n}\r\n","/**\r\n * Import utility functions\r\n * @module utils/import\r\n */\r\n\r\nimport type { Board, Card, Column, ImportResult } from '../types'\r\n\r\n/**\r\n * Import board from JSON format\r\n */\r\nexport function importFromJSON(jsonString: string): ImportResult {\r\n  try {\r\n    const data = JSON.parse(jsonString)\r\n\r\n    if (!data.board || !data.columns || !data.cards) {\r\n      return {\r\n        success: false,\r\n        errors: ['Invalid JSON format: missing required fields (board, columns, cards)'],\r\n      }\r\n    }\r\n\r\n    const board: Board = {\r\n      id: data.board.id,\r\n      title: data.board.title,\r\n      columns: data.columns,\r\n      cards: data.cards,\r\n      metadata: data.board.metadata,\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      cardsImported: board.cards.length,\r\n      columnsImported: board.columns.length,\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      errors: [`Failed to parse JSON: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Import board from CSV format\r\n */\r\nexport function importFromCSV(csvString: string): ImportResult {\r\n  try {\r\n    const lines = csvString.trim().split('\\n')\r\n\r\n    if (lines.length < 1 || !lines[0]) {\r\n      return {\r\n        success: false,\r\n        errors: ['CSV file is empty or invalid'],\r\n      }\r\n    }\r\n\r\n    const headers = parseCSVLine(lines[0])\r\n    const cards: Card[] = []\r\n    const columnsMap = new Map<string, Column>()\r\n    const errors: string[] = []\r\n\r\n    for (let i = 1; i < lines.length; i++) {\r\n      try {\r\n        const values = parseCSVLine(lines[i] || '')\r\n\r\n        if (values.length > headers.length) {\r\n          errors.push(`Line ${i + 1}: Too many columns`)\r\n          continue\r\n        }\r\n\r\n        // If missing more than 3 columns, likely a malformed row\r\n        const missingColumns = headers.length - values.length\r\n        if (missingColumns > 3) {\r\n          errors.push(`Line ${i + 1}: Column count mismatch (expected ${headers.length}, got ${values.length})`)\r\n          continue\r\n        }\r\n\r\n        // Pad trailing empty columns\r\n        while (values.length < headers.length) {\r\n          values.push('')\r\n        }\r\n\r\n        const cardData: Record<string, string> = {}\r\n        headers.forEach((header, index) => {\r\n          cardData[header] = values[index] || ''\r\n        })\r\n\r\n        // Create column if it doesn't exist\r\n        const columnTitle = cardData['Column'] || 'Unnamed'\r\n        if (!columnsMap.has(columnTitle)) {\r\n          columnsMap.set(columnTitle, {\r\n            id: `col-${columnsMap.size + 1}`,\r\n            title: columnTitle,\r\n            position: columnsMap.size + 1,\r\n            cardIds: [],\r\n          })\r\n        }\r\n\r\n        const column = columnsMap.get(columnTitle)!\r\n\r\n        const card: Card = {\r\n          id: cardData['Card ID'] || `card-${i}`,\r\n          title: cardData['Title'] || 'Untitled',\r\n          description: cardData['Description'] ? cardData['Description'] : undefined,\r\n          columnId: column.id,\r\n          position: column.cardIds.length + 1,\r\n          priority: (cardData['Priority'] as any) || undefined,\r\n          labels: cardData['Labels'] ? cardData['Labels'].split(';').filter(Boolean) : undefined,\r\n          assignedUserIds: cardData['Assigned Users']\r\n            ? cardData['Assigned Users'].split(';').filter(Boolean)\r\n            : undefined,\r\n          startDate: cardData['Start Date'] ? (cardData['Start Date'] as any) : undefined,\r\n          endDate: cardData['End Date'] ? (cardData['End Date'] as any) : undefined,\r\n          createdAt: cardData['Created At'] ? (cardData['Created At'] as any) : undefined,\r\n          updatedAt: cardData['Updated At'] ? (cardData['Updated At'] as any) : undefined,\r\n        }\r\n\r\n        cards.push(card)\r\n        column.cardIds.push(card.id)\r\n      } catch (error) {\r\n        errors.push(\r\n          `Line ${i + 1}: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n        )\r\n      }\r\n    }\r\n\r\n    if (cards.length === 0) {\r\n      return {\r\n        success: false,\r\n        errors: ['No valid cards found in CSV', ...errors],\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      cardsImported: cards.length,\r\n      columnsImported: columnsMap.size,\r\n      errors: errors.length > 0 ? errors : undefined,\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      errors: [`Failed to parse CSV: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Parse a CSV line with proper quote handling\r\n */\r\nfunction parseCSVLine(line: string): string[] {\r\n  const result: string[] = []\r\n  let current = ''\r\n  let inQuotes = false\r\n\r\n  for (let i = 0; i < line.length; i++) {\r\n    const char = line[i]\r\n    const nextChar = line[i + 1]\r\n\r\n    if (char === '\"' && inQuotes && nextChar === '\"') {\r\n      current += '\"'\r\n      i++ // Skip next quote\r\n    } else if (char === '\"') {\r\n      inQuotes = !inQuotes\r\n    } else if (char === ',' && !inQuotes) {\r\n      result.push(current)\r\n      current = ''\r\n    } else {\r\n      current += char\r\n    }\r\n  }\r\n\r\n  result.push(current)\r\n  return result\r\n}\r\n\r\n/**\r\n * Main import function\r\n */\r\nexport function importBoard(content: string, format: 'json' | 'csv'): ImportResult {\r\n  switch (format) {\r\n    case 'json':\r\n      return importFromJSON(content)\r\n    case 'csv':\r\n      return importFromCSV(content)\r\n    default:\r\n      return {\r\n        success: false,\r\n        errors: [`Unsupported import format: ${format}`],\r\n      }\r\n  }\r\n}\r\n\r\n/**\r\n * Read file content\r\n */\r\nexport function readFile(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.onload = (event) => {\r\n      if (event.target?.result) {\r\n        resolve(event.target.result as string)\r\n      } else {\r\n        reject(new Error('Failed to read file'))\r\n      }\r\n    }\r\n    reader.onerror = () => reject(new Error('Failed to read file'))\r\n    reader.readAsText(file)\r\n  })\r\n}\r\n","/**\r\n * Gantt Theme Context\r\n * Provides derived theme to Portal components for consistent styling\r\n * @module components/Gantt/GanttThemeContext\r\n */\r\n\r\nimport { createContext, useContext } from 'react'\r\nimport type { GanttTheme } from './types'\r\n\r\nexport interface GanttThemeContextValue {\r\n  theme: GanttTheme\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport const GanttThemeContext = createContext<GanttThemeContextValue | null>(null)\r\n\r\n/**\r\n * Hook to access the Gantt theme context\r\n * Returns null if not within a GanttBoard\r\n */\r\nexport function useGanttTheme() {\r\n  return useContext(GanttThemeContext)\r\n}\r\n","/**\r\n * Kanban Theme Context\r\n * Provides theme information to Portal components within KanbanBoard\r\n */\r\n\r\nimport { createContext, useContext, type ReactNode } from 'react'\r\n\r\nexport interface KanbanThemeContextValue {\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport const KanbanThemeContext = createContext<KanbanThemeContextValue | null>(null)\r\n\r\nexport interface KanbanThemeProviderProps {\r\n  children: ReactNode\r\n  themeName: 'dark' | 'light' | 'neutral'\r\n}\r\n\r\nexport function KanbanThemeProvider({ children, themeName }: KanbanThemeProviderProps) {\r\n  return (\r\n    <KanbanThemeContext.Provider value={{ themeName }}>\r\n      {children}\r\n    </KanbanThemeContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useKanbanTheme(): KanbanThemeContextValue | null {\r\n  return useContext(KanbanThemeContext)\r\n}\r\n","/**\r\n * Portal Component\r\n * Renders children outside the parent DOM hierarchy\r\n * Solves z-index stacking context issues\r\n */\r\n\r\nimport { useEffect, useState, type ReactNode, type CSSProperties } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useGanttTheme } from '../Gantt/GanttThemeContext'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\n\r\nexport interface PortalProps {\r\n  children: ReactNode\r\n  /** Element to portal into (defaults to document.body) */\r\n  container?: HTMLElement\r\n}\r\n\r\n/**\r\n * Portal component that renders children at the root level\r\n * Perfect for modals, tooltips, dropdowns that need to escape stacking context\r\n * Automatically applies Gantt or Kanban theme when used within their respective boards\r\n */\r\nexport function Portal({ children, container }: PortalProps) {\r\n  const [mounted, setMounted] = useState(false)\r\n  const ganttTheme = useGanttTheme()\r\n  const kanbanTheme = useKanbanTheme()\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    return () => setMounted(false)\r\n  }, [])\r\n\r\n  if (!mounted) {\r\n    return null\r\n  }\r\n\r\n  const target = container || (typeof document !== 'undefined' ? document.body : null)\r\n\r\n  if (!target) {\r\n    return null\r\n  }\r\n\r\n  // If we have a Gantt theme, wrap children in a themed container\r\n  if (ganttTheme) {\r\n    const { theme, themeName } = ganttTheme\r\n\r\n    // Generate CSS variables from the theme\r\n    const themeStyles: CSSProperties & Record<string, string> = {\r\n      // Background variables\r\n      '--asakaa-color-background-primary': theme.bgPrimary,\r\n      '--asakaa-color-background-secondary': theme.bgSecondary,\r\n      '--asakaa-color-background-card': theme.bgGrid,\r\n      '--asakaa-color-background-hover': theme.hoverBg,\r\n\r\n      // Text variables\r\n      '--asakaa-color-text-primary': theme.textPrimary,\r\n      '--asakaa-color-text-secondary': theme.textSecondary,\r\n      '--asakaa-color-text-tertiary': theme.textTertiary,\r\n      '--asakaa-color-text-inverse': theme.taskBarHandle || '#FFFFFF',\r\n\r\n      // Border variables\r\n      '--asakaa-color-border-default': theme.border,\r\n      '--asakaa-color-border-hover': theme.borderLight,\r\n      '--asakaa-color-border-subtle': theme.borderLight,\r\n\r\n      // Interactive variables\r\n      '--asakaa-color-interactive-primary': theme.accent,\r\n      '--asakaa-color-interactive-primaryHover': theme.accentHover,\r\n      '--asakaa-color-interactive-primaryBorder': `${theme.accent}4D`, // 30% opacity\r\n      '--asakaa-color-interactive-primaryBackground': `${theme.accent}1A`, // 10% opacity\r\n      '--asakaa-color-interactive-primaryBackgroundHover': `${theme.accent}33`, // 20% opacity\r\n\r\n      // Status colors\r\n      '--asakaa-color-status-success': theme.statusCompleted,\r\n      '--asakaa-color-status-warning': theme.milestone,\r\n      '--asakaa-color-status-error': theme.criticalPath,\r\n      '--asakaa-color-danger': theme.criticalPath,\r\n      '--asakaa-color-danger-border': `${theme.criticalPath}4D`,\r\n      '--asakaa-color-danger-background': `${theme.criticalPath}14`,\r\n      '--asakaa-color-danger-backgroundHover': `${theme.criticalPath}26`,\r\n    }\r\n\r\n    return createPortal(\r\n      <div\r\n        data-theme={themeName}\r\n        data-gantt-portal=\"true\"\r\n        style={themeStyles}\r\n      >\r\n        {children}\r\n      </div>,\r\n      target\r\n    )\r\n  }\r\n\r\n  // If we have a Kanban theme, wrap children with data-theme attribute\r\n  if (kanbanTheme) {\r\n    return createPortal(\r\n      <div\r\n        data-theme={kanbanTheme.themeName}\r\n        data-kanban-portal=\"true\"\r\n      >\r\n        {children}\r\n      </div>,\r\n      target\r\n    )\r\n  }\r\n\r\n  return createPortal(children, target)\r\n}\r\n","import { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { Priority } from '../../types'\r\n\r\nexport interface PrioritySelectorProps {\r\n  priority?: Priority\r\n  onChange: (priority?: Priority) => void\r\n  className?: string\r\n}\r\n\r\nconst PRIORITY_CONFIG = {\r\n  URGENT: { label: 'Urgent', color: '#E74C3C' },\r\n  HIGH: { label: 'High', color: '#E67E22' },\r\n  MEDIUM: { label: 'Normal', color: '#F1C40F' },\r\n  LOW: { label: 'Low', color: '#2ECC71' },\r\n} as const\r\n\r\nconst CLEAR_COLOR = '#BDC3C7'\r\n\r\nconst PriorityIcon = ({ color }: { color: string }) => (\r\n  <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <circle cx=\"8\" cy=\"8\" r=\"6\" fill={color} opacity=\"0.9\" />\r\n    <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" opacity=\"0.3\" />\r\n  </svg>\r\n)\r\n\r\nexport function PrioritySelector({\r\n  priority,\r\n  onChange,\r\n  className,\r\n}: PrioritySelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // v0.17.63: Calculate position and open menu synchronously\r\n  const openMenu = () => {\r\n    if (!buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 160\r\n    const menuHeight = 220\r\n    const GAP = 4\r\n\r\n    let leftPos = rect.right - menuWidth\r\n    if (leftPos < 10) leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n    setIsOpen(true)\r\n  }\r\n\r\n  // v0.17.65: Scroll lock removed - position:fixed handles positioning correctly\r\n  // The Portal renders outside the overflow container, so no lock needed\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') setIsOpen(false)\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (newPriority?: Priority) => {\r\n    onChange(newPriority)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const currentConfig = priority ? PRIORITY_CONFIG[priority] : null\r\n  const flagColor = currentConfig?.color || CLEAR_COLOR\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => isOpen ? setIsOpen(false) : openMenu()}\r\n        className=\"flex items-center justify-center w-8 h-8 rounded-lg transition-all hover:bg-white/15 hover:scale-110 active:scale-95\"\r\n        style={{\r\n          background: priority ? `${flagColor}10` : 'transparent',\r\n          boxShadow: priority ? `0 0 0 2px ${flagColor}30 inset` : 'none',\r\n        }}\r\n        title={currentConfig?.label || 'Set priority'}\r\n      >\r\n        <svg\r\n          width=\"20\"\r\n          height=\"20\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M3 2L3 14M3 2L13 6L3 8V2Z\"\r\n            stroke={flagColor}\r\n            strokeWidth=\"1.5\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            fill={flagColor}\r\n            fillOpacity={priority ? \"0.6\" : \"0.4\"}\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* v0.17.57: Fixed positioning for proper viewport handling */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"priority-selector-menu\"\r\n            style={{\r\n              position: 'fixed',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              zIndex: 99999,\r\n              minWidth: '160px',\r\n              maxHeight: 'calc(100vh - 40px)',\r\n              borderRadius: '8px',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n            }}\r\n          >\r\n          <div\r\n            className=\"px-3 py-1.5 border-b\"\r\n            style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n          >\r\n            <span\r\n              className=\"text-[10px] font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}\r\n            >\r\n              Priority\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {(Object.entries(PRIORITY_CONFIG) as [Priority, typeof PRIORITY_CONFIG[Priority]][]).map(\r\n              ([key, config]) => (\r\n                <button\r\n                  key={key}\r\n                  onClick={() => handleSelect(key)}\r\n                  className=\"w-full px-3 py-1.5 flex items-center gap-2 text-xs font-medium transition-all active:scale-[0.98] priority-option\"\r\n                  style={{\r\n                    color: config.color,\r\n                    background: 'transparent'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'transparent'\r\n                  }}\r\n                >\r\n                  <PriorityIcon color={config.color} />\r\n                  <span className=\"font-semibold text-sm\">{config.label}</span>\r\n                  {priority === key && (\r\n                    <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              )\r\n            )}\r\n\r\n            <div\r\n              className=\"mt-0.5 pt-0.5 border-t\"\r\n              style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n            >\r\n              <button\r\n                onClick={() => handleSelect(undefined)}\r\n                className=\"w-full px-3 py-1.5 flex items-center gap-2 text-xs font-medium transition-all active:scale-[0.98]\"\r\n                style={{\r\n                  color: 'var(--modal-v2-text-primary, #e5e5e5)',\r\n                  background: 'transparent'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                  <circle cx=\"8\" cy=\"8\" r=\"6\" stroke=\"#9CA3AF\" strokeWidth=\"1.5\" strokeDasharray=\"2 2\" opacity=\"0.6\" />\r\n                </svg>\r\n                <span className=\"font-semibold text-sm\">Clear</span>\r\n                {!priority && (\r\n                  <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                    <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Date Range Picker Component\r\n * Quick selection buttons + interactive calendar\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\n\r\nexport interface DateRangePickerProps {\r\n  startDate?: string\r\n  endDate?: string\r\n  onChange: (startDate?: string, endDate?: string) => void\r\n  className?: string\r\n}\r\n\r\nconst QUICK_OPTIONS = [\r\n  { label: 'Today', days: 0 },\r\n  { label: 'Tomorrow', days: 1 },\r\n  { label: 'Next Week', days: 7 },\r\n  { label: '2 Weeks', days: 14 },\r\n  { label: '4 Weeks', days: 28 },\r\n  { label: '8 Weeks', days: 56 },\r\n]\r\n\r\nexport function DateRangePicker({\r\n  startDate,\r\n  endDate,\r\n  onChange,\r\n  className,\r\n}: DateRangePickerProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n  const kanbanTheme = useKanbanTheme()\r\n  const themeName = kanbanTheme?.themeName || 'dark'\r\n  // Only 'dark' theme uses dark colors, 'light' and 'neutral' use light colors\r\n  const isDark = themeName === 'dark'\r\n\r\n  // v0.17.65: Calculate position and open menu synchronously (same as other selectors)\r\n  const openMenu = () => {\r\n    if (!buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 320\r\n    const menuHeight = 380\r\n    const GAP = 4\r\n\r\n    // Horizontal positioning\r\n    let leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n    if (leftPos < 10) leftPos = 10\r\n\r\n    // Vertical positioning - open upward if no space below\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n    setIsOpen(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleQuickSelect = (days: number) => {\r\n    const now = new Date()\r\n\r\n    const formatLocalDate = (date: Date) => {\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    }\r\n\r\n    const todayStr = formatLocalDate(now)\r\n\r\n    const endDate = new Date(now)\r\n    endDate.setDate(endDate.getDate() + days)\r\n    const endStr = formatLocalDate(endDate)\r\n\r\n    onChange(todayStr, endStr)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const formatDateRange = () => {\r\n    if (!startDate || !endDate) return 'Set date'\r\n\r\n    const parseLocalDate = (dateStr: string | Date) => {\r\n      if (dateStr instanceof Date) return dateStr\r\n      if (typeof dateStr !== 'string' || !dateStr.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\r\n        return null\r\n      }\r\n      const parts = dateStr.split('-').map(Number)\r\n      if (parts.length !== 3 || parts.some(p => isNaN(p))) {\r\n        return null\r\n      }\r\n      const year = parts[0]\r\n      const month = parts[1]\r\n      const day = parts[2]\r\n      if (year === undefined || month === undefined || day === undefined) {\r\n        return null\r\n      }\r\n      return new Date(year, month - 1, day)\r\n    }\r\n\r\n    const start = parseLocalDate(startDate)\r\n    const end = parseLocalDate(endDate)\r\n\r\n    if (!start || !end || isNaN(start.getTime()) || isNaN(end.getTime())) {\r\n      return 'Set date'\r\n    }\r\n\r\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n\r\n    return `${monthNames[start.getMonth()]} ${start.getDate()}  ${monthNames[end.getMonth()]} ${end.getDate()}`\r\n  }\r\n\r\n  const hasDateSet = startDate && endDate\r\n\r\n  const isOverdue = () => {\r\n    if (!endDate) return false\r\n    const end = typeof endDate === 'string' ? new Date(endDate) : endDate\r\n    const today = new Date()\r\n    today.setHours(0, 0, 0, 0)\r\n    return end < today\r\n  }\r\n\r\n  const overdue = isOverdue()\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => isOpen ? setIsOpen(false) : openMenu()}\r\n        className={`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs transition-all hover:bg-white/5 ${\r\n          overdue ? 'asakaa-date-overdue' : 'asakaa-date'\r\n        }`}\r\n        title={hasDateSet ? `${formatDateRange()}` : 'Set date range'}\r\n      >\r\n        <svg\r\n          width=\"14\"\r\n          height=\"14\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <rect\r\n            x=\"2\"\r\n            y=\"3\"\r\n            width=\"12\"\r\n            height=\"11\"\r\n            rx=\"2\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"1.5\"\r\n          />\r\n          <path d=\"M2 6H14\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\r\n          <path d=\"M5 2V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n          <path d=\"M11 2V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n        </svg>\r\n        {startDate && endDate && (\r\n          <span className=\"whitespace-nowrap\">{formatDateRange()}</span>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"date-picker-menu rounded-xl shadow-2xl border min-w-[320px]\"\r\n            style={{\r\n              position: 'fixed',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: isDark ? '#1A1D25' : '#FFFFFF',\r\n              border: `1px solid ${isDark ? 'rgba(255, 255, 255, 0.15)' : 'rgba(0, 0, 0, 0.12)'}`,\r\n              boxShadow: isDark\r\n                ? '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)'\r\n                : '0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.08)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n            <div className=\"p-4 border-b\" style={{ borderColor: isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.08)' }}>\r\n              <span\r\n                className=\"text-xs font-bold uppercase tracking-wider block mb-3\"\r\n                style={{ color: isDark ? 'rgba(255, 255, 255, 0.85)' : 'rgba(0, 0, 0, 0.7)' }}\r\n              >\r\n                Quick Select\r\n              </span>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {QUICK_OPTIONS.map((option) => (\r\n                  <button\r\n                    key={option.label}\r\n                    onClick={() => handleQuickSelect(option.days)}\r\n                    className=\"px-3 py-2.5 rounded-lg text-xs font-semibold transition-all active:scale-95\"\r\n                    style={{\r\n                      color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                      border: `1px solid ${isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)'}`,\r\n                      backgroundColor: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = isDark ? 'rgba(255, 255, 255, 0.2)' : 'rgba(0, 0, 0, 0.1)'\r\n                      e.currentTarget.style.border = `1px solid ${isDark ? 'rgba(255, 255, 255, 0.4)' : 'rgba(0, 0, 0, 0.25)'}`\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)'\r\n                      e.currentTarget.style.border = `1px solid ${isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)'}`\r\n                    }}\r\n                  >\r\n                    {option.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-4\">\r\n              <span\r\n                className=\"text-xs font-bold uppercase tracking-wider block mb-3\"\r\n                style={{ color: isDark ? 'rgba(255, 255, 255, 0.85)' : 'rgba(0, 0, 0, 0.7)' }}\r\n              >\r\n                Custom Range\r\n              </span>\r\n              <div className=\"space-y-3\">\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate || ''}\r\n                  onChange={(e) => onChange(e.target.value, endDate)}\r\n                  className=\"w-full px-3 py-2.5 rounded-lg text-sm border focus:outline-none transition-all\"\r\n                  style={{\r\n                    background: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    borderColor: isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)',\r\n                    color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                    colorScheme: isDark ? 'dark' : 'light',\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate || ''}\r\n                  onChange={(e) => onChange(startDate, e.target.value)}\r\n                  className=\"w-full px-3 py-2.5 rounded-lg text-sm border focus:outline-none transition-all\"\r\n                  style={{\r\n                    background: isDark ? 'rgba(255, 255, 255, 0.12)' : 'rgba(0, 0, 0, 0.05)',\r\n                    borderColor: isDark ? 'rgba(255, 255, 255, 0.25)' : 'rgba(0, 0, 0, 0.15)',\r\n                    color: isDark ? 'rgba(255, 255, 255, 0.95)' : 'rgba(0, 0, 0, 0.85)',\r\n                    colorScheme: isDark ? 'dark' : 'light',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {(startDate || endDate) && (\r\n                <button\r\n                  onClick={() => {\r\n                    onChange(undefined, undefined)\r\n                    setIsOpen(false)\r\n                  }}\r\n                  className=\"mt-4 w-full px-3 py-2.5 rounded-lg text-sm font-semibold transition-all active:scale-95 border\"\r\n                  style={{\r\n                    color: '#ef4444',\r\n                    borderColor: 'rgba(239, 68, 68, 0.3)',\r\n                    background: 'rgba(239, 68, 68, 0.1)',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(239, 68, 68, 0.1)'\r\n                  }}\r\n                >\r\n                  Clear Dates\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * User Assignment Selector Component\r\n * Multi-select user assignment with avatar display\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface User {\r\n  id: string\r\n  name: string\r\n  avatar?: string\r\n  initials: string\r\n  color: string\r\n}\r\n\r\nexport interface UserAssignmentSelectorProps {\r\n  assignedUsers?: User[]\r\n  availableUsers: User[]\r\n  onChange: (users: User[]) => void\r\n  className?: string\r\n  maxVisibleAvatars?: number\r\n}\r\n\r\nexport function UserAssignmentSelector({\r\n  assignedUsers = [],\r\n  availableUsers,\r\n  onChange,\r\n  className,\r\n  maxVisibleAvatars = 3,\r\n}: UserAssignmentSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // v0.17.63: Calculate position and open menu in ONE synchronous action\r\n  const openMenu = () => {\r\n    if (!buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 300\r\n    const menuHeight = 380\r\n    const GAP = 4\r\n\r\n    // Horizontal positioning\r\n    let leftPos = rect.right - menuWidth\r\n    if (leftPos < 10) leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n\r\n    // Vertical positioning - open upward if no space below\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      // Open downward\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      // Open upward - position so bottom of menu is at top of button\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      // Not enough space either way - use the one with more space\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    // Set position FIRST, then open (synchronous batch)\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n    setIsOpen(true)\r\n  }\r\n\r\n  // v0.17.65: Scroll lock removed - position:fixed handles positioning correctly\r\n  // The Portal renders outside the overflow container, so no lock needed\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleToggleUser = (user: User) => {\r\n    const isAssigned = assignedUsers.some((u) => u.id === user.id)\r\n\r\n    if (isAssigned) {\r\n      onChange(assignedUsers.filter((u) => u.id !== user.id))\r\n    } else {\r\n      onChange([...assignedUsers, user])\r\n    }\r\n  }\r\n\r\n  const filteredUsers = availableUsers.filter((user) =>\r\n    user.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  )\r\n\r\n  const visibleUsers = assignedUsers.slice(0, maxVisibleAvatars)\r\n  const overflowCount = assignedUsers.length - maxVisibleAvatars\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Avatar display or add button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => isOpen ? setIsOpen(false) : openMenu()}\r\n        className=\"flex items-center gap-1 p-0.5 rounded transition-all hover:bg-white/10 hover:scale-105 active:scale-95\"\r\n        title={assignedUsers.length > 0 ? `${assignedUsers.length} assigned` : 'Assign users'}\r\n      >\r\n        {assignedUsers.length > 0 ? (\r\n          <div className=\"asakaa-avatar-group\">\r\n            {visibleUsers.map((user) => (\r\n              <div\r\n                key={user.id}\r\n                className=\"asakaa-avatar\"\r\n                title={user.name}\r\n              >\r\n                {user.avatar ? (\r\n                  <img\r\n                    src={user.avatar}\r\n                    alt={user.name}\r\n                    className=\"asakaa-avatar-img\"\r\n                  />\r\n                ) : (\r\n                  user.initials\r\n                )}\r\n              </div>\r\n            ))}\r\n            {overflowCount > 0 && (\r\n              <div className=\"asakaa-avatar\">\r\n                +{overflowCount}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div\r\n            className=\"w-7 h-7 rounded-full flex items-center justify-center transition-all\"\r\n            style={{\r\n              background: 'rgba(96, 165, 250, 0.15)',\r\n              border: '1.5px solid rgba(96, 165, 250, 0.4)',\r\n              color: '#60a5fa',\r\n            }}\r\n          >\r\n            <svg\r\n              width=\"16\"\r\n              height=\"16\"\r\n              viewBox=\"0 0 16 16\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M8 8a3 3 0 100-6 3 3 0 000 6zM4 14c0-2.21 1.79-4 4-4s4 1.79 4 4\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n              <line\r\n                x1=\"13\"\r\n                y1=\"5\"\r\n                x2=\"13\"\r\n                y2=\"9\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n              <line\r\n                x1=\"11\"\r\n                y1=\"7\"\r\n                x2=\"15\"\r\n                y2=\"7\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"1.5\"\r\n                strokeLinecap=\"round\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </button>\r\n\r\n      {/* User selection menu - Using Portal to escape stacking context */}\r\n      {/* v0.17.57: Fixed positioning + smart upward/downward + maxHeight for viewport safety */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"user-selector-menu rounded-xl shadow-2xl border min-w-[300px]\"\r\n            style={{\r\n              position: 'fixed',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              maxHeight: 'calc(100vh - 40px)',\r\n              overflow: 'hidden',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n          {/* Header */}\r\n          <div className=\"px-4 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}>\r\n            <span className=\"text-xs font-bold uppercase tracking-wider\" style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.8))' }}>\r\n              Assign Users\r\n            </span>\r\n          </div>\r\n\r\n          {/* Search input */}\r\n          <div className=\"px-3 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              placeholder=\"Search users...\"\r\n              className=\"w-full px-3 py-2.5 rounded-lg text-sm border outline-none transition-all\"\r\n              style={{\r\n                background: 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))',\r\n                borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.2))',\r\n                color: 'var(--modal-v2-text-primary, #ffffff)',\r\n              }}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          {/* User list */}\r\n          <div className=\"py-2 max-h-[300px] overflow-y-auto\">\r\n            {filteredUsers.length === 0 ? (\r\n              <div className=\"px-4 py-3 text-sm text-center\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.6))' }}>\r\n                No users found\r\n              </div>\r\n            ) : (\r\n              filteredUsers.map((user) => {\r\n                const isAssigned = assignedUsers.some((u) => u.id === user.id)\r\n\r\n                return (\r\n                  <button\r\n                    key={user.id}\r\n                    onClick={() => handleToggleUser(user)}\r\n                    className=\"w-full px-4 py-2.5 flex items-center gap-3 text-sm transition-all active:scale-98\"\r\n                    style={{ background: 'transparent' }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.1))'\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = 'transparent'\r\n                    }}\r\n                  >\r\n                    {/* Avatar */}\r\n                    <div\r\n                      className=\"w-7 h-7 rounded-full flex items-center justify-center text-[11px] font-bold flex-shrink-0 shadow-sm\"\r\n                      style={{\r\n                        backgroundColor: user.color,\r\n                        color: '#fff',\r\n                      }}\r\n                    >\r\n                      {user.avatar ? (\r\n                        <img\r\n                          src={user.avatar}\r\n                          alt={user.name}\r\n                          className=\"w-full h-full rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        user.initials\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Name */}\r\n                    <span className=\"font-semibold flex-1 text-left truncate\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.95))' }}>\r\n                      {user.name}\r\n                    </span>\r\n\r\n                    {/* Checkmark - fixed width for consistent alignment */}\r\n                    <span className=\"w-5 text-lg flex-shrink-0 text-right\" style={{ color: isAssigned ? '#3b82f6' : 'transparent' }}>\r\n                      {isAssigned ? '' : ''}\r\n                    </span>\r\n                  </button>\r\n                )\r\n              })\r\n            )}\r\n          </div>\r\n\r\n          {/* Clear button */}\r\n          {assignedUsers.length > 0 && (\r\n            <div className=\"px-3 py-3 border-t border-white/10\">\r\n              <button\r\n                onClick={() => {\r\n                  onChange([])\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full px-3 py-2.5 rounded-lg text-sm font-semibold transition-all hover:bg-red-600/30 active:scale-95 border\"\r\n                style={{\r\n                  color: '#f87171',\r\n                  borderColor: 'rgba(248, 113, 113, 0.3)',\r\n                  background: 'rgba(248, 113, 113, 0.08)',\r\n                }}\r\n              >\r\n                Clear All\r\n              </button>\r\n            </div>\r\n          )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Dependencies Selector Component\r\n * Select task dependencies with link icon\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { Card } from '../../types'\r\n\r\n/**\r\n * Validate if adding a dependency would create a circular reference\r\n * Uses Depth-First Search (DFS) algorithm\r\n * @param allCards - All cards in the board\r\n * @param fromCardId - The card that would become a dependency (the task being depended on)\r\n * @param toCardId - The card that would depend on fromCardId\r\n * @returns True if adding this dependency would create a circular reference\r\n */\r\nexport function wouldCreateCircularDependency(\r\n  allCards: Card[],\r\n  fromCardId: string,\r\n  toCardId: string\r\n): boolean {\r\n  // Build dependency map from all cards\r\n  const dependencyMap = new Map<string, string[]>()\r\n  allCards.forEach((card) => {\r\n    if (card.dependencies && Array.isArray(card.dependencies)) {\r\n      // Handle both string[] and Dependency[] formats\r\n      // Dependency from @libxai/core has 'taskId', not 'targetId'\r\n      const deps = card.dependencies.map((d) => {\r\n        if (typeof d === 'string') return d\r\n        // Handle both possible formats\r\n        const depObj = d as { taskId?: string; targetId?: string }\r\n        return depObj.taskId || depObj.targetId || ''\r\n      }).filter(Boolean)\r\n      dependencyMap.set(card.id, deps)\r\n    }\r\n  })\r\n\r\n  // Simulate adding the new dependency (toCardId depends on fromCardId)\r\n  const existingDeps = dependencyMap.get(toCardId) || []\r\n  dependencyMap.set(toCardId, [...existingDeps, fromCardId])\r\n\r\n  // DFS to detect cycle\r\n  const visited = new Set<string>()\r\n  const recStack = new Set<string>()\r\n\r\n  const hasCycle = (cardId: string): boolean => {\r\n    if (!visited.has(cardId)) {\r\n      visited.add(cardId)\r\n      recStack.add(cardId)\r\n\r\n      const deps = dependencyMap.get(cardId) || []\r\n      for (const depId of deps) {\r\n        if (!visited.has(depId) && hasCycle(depId)) {\r\n          return true\r\n        } else if (recStack.has(depId)) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    recStack.delete(cardId)\r\n    return false\r\n  }\r\n\r\n  return hasCycle(toCardId)\r\n}\r\n\r\nexport interface DependenciesSelectorProps {\r\n  /** Current card (to exclude from dependencies) */\r\n  currentCardId: string\r\n  /** Currently selected dependencies */\r\n  dependencies?: string[]\r\n  /** All available tasks */\r\n  availableTasks: Card[]\r\n  /** Change handler */\r\n  onChange: (dependencies: string[]) => void\r\n  /** Custom className */\r\n  className?: string\r\n  /** Enable circular dependency validation (default: true) */\r\n  validateCircular?: boolean\r\n  /** Callback when circular dependency is detected */\r\n  onCircularDependencyError?: (targetCardId: string, targetCardTitle: string) => void\r\n}\r\n\r\nexport function DependenciesSelector({\r\n  currentCardId,\r\n  dependencies = [],\r\n  availableTasks,\r\n  onChange,\r\n  className,\r\n  validateCircular = true,\r\n  onCircularDependencyError,\r\n}: DependenciesSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [hasDependencies, setHasDependencies] = useState(dependencies.length > 0)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const [circularError, setCircularError] = useState<string | null>(null)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // v0.17.66: Calculate position with dynamic height based on menu state\r\n  const openMenu = () => {\r\n    if (!buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 300\r\n    // v0.17.66: Use smaller height for collapsed menu, larger for expanded\r\n    const menuHeight = hasDependencies ? 380 : 120\r\n    const GAP = 4\r\n\r\n    let leftPos = rect.right - menuWidth\r\n    if (leftPos < 10) leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n    setIsOpen(true)\r\n  }\r\n\r\n  // v0.17.65: Scroll lock removed - position:fixed handles positioning correctly\r\n  // The Portal renders outside the overflow container, so no lock needed\r\n\r\n  // v0.17.66: Recalculate position when menu expands/collapses\r\n  useEffect(() => {\r\n    if (!isOpen || !buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 300\r\n    const menuHeight = hasDependencies ? 380 : 120\r\n    const GAP = 4\r\n\r\n    let leftPos = rect.right - menuWidth\r\n    if (leftPos < 10) leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n  }, [hasDependencies, isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setSearchQuery('')\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleToggleDependency = (taskId: string) => {\r\n    const isDependency = dependencies.includes(taskId)\r\n    const targetTask = availableTasks.find((t) => t.id === taskId)\r\n\r\n    // Clear any previous error\r\n    setCircularError(null)\r\n\r\n    if (isDependency) {\r\n      // Removing dependency - always allowed\r\n      const newDeps = dependencies.filter((id) => id !== taskId)\r\n      onChange(newDeps)\r\n      if (newDeps.length === 0) {\r\n        setHasDependencies(false)\r\n      }\r\n    } else {\r\n      // Adding dependency - validate for circular references\r\n      if (validateCircular) {\r\n        const wouldBeCircular = wouldCreateCircularDependency(\r\n          availableTasks,\r\n          taskId,\r\n          currentCardId\r\n        )\r\n\r\n        if (wouldBeCircular) {\r\n          const errorMsg = `Cannot add \"${targetTask?.title || taskId}\" as dependency - would create circular reference`\r\n          setCircularError(errorMsg)\r\n          onCircularDependencyError?.(taskId, targetTask?.title || taskId)\r\n          // Auto-clear error after 3 seconds\r\n          setTimeout(() => setCircularError(null), 3000)\r\n          return // Don't add the dependency\r\n        }\r\n      }\r\n\r\n      onChange([...dependencies, taskId])\r\n      setHasDependencies(true)\r\n    }\r\n  }\r\n\r\n  const handleToggleHasDependencies = () => {\r\n    const newValue = !hasDependencies\r\n    setHasDependencies(newValue)\r\n\r\n    if (!newValue) {\r\n      // Clear all dependencies\r\n      onChange([])\r\n    }\r\n  }\r\n\r\n  // Filter out current card and apply search\r\n  const filteredTasks = availableTasks\r\n    .filter((task) => task.id !== currentCardId)\r\n    .filter(\r\n      (task) =>\r\n        task.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        task.id.toLowerCase().includes(searchQuery.toLowerCase())\r\n    )\r\n\r\n  const linkColor = dependencies.length > 0 ? '#3B82F6' : '#BDC3C7'\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Link icon button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => isOpen ? setIsOpen(false) : openMenu()}\r\n        className=\"flex items-center gap-1 px-2 py-1 rounded transition-all hover:bg-white/5\"\r\n        title={\r\n          dependencies.length > 0\r\n            ? `${dependencies.length} dependencies`\r\n            : 'Add dependencies'\r\n        }\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M7 9L9 7M11.5 3.5L10 2C8.89543 0.89543 7.10457 0.89543 6 2C4.89543 3.10457 4.89543 4.89543 6 6L7.5 7.5M4.5 12.5L6 14C7.10457 15.1046 8.89543 15.1046 10 14C11.1046 12.8954 11.1046 11.1046 10 10L8.5 8.5\"\r\n            stroke={linkColor}\r\n            strokeWidth=\"1.5\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          />\r\n        </svg>\r\n        {dependencies.length > 0 && (\r\n          <span className=\"text-xs font-medium\" style={{ color: linkColor }}>\r\n            {dependencies.length}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Dependencies menu - Using Portal to escape stacking context */}\r\n      {/* v0.17.57: Fixed positioning for proper viewport handling */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"dependencies-selector-menu rounded-xl shadow-2xl border min-w-[300px]\"\r\n            style={{\r\n              position: 'fixed',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              maxHeight: 'calc(100vh - 40px)',\r\n              overflow: 'hidden',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n          {/* Circular dependency error */}\r\n          {circularError && (\r\n            <div\r\n              className=\"px-4 py-3 flex items-center gap-2\"\r\n              style={{\r\n                background: 'rgba(239, 68, 68, 0.15)',\r\n                borderBottom: '1px solid rgba(239, 68, 68, 0.3)',\r\n              }}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M8 5V8M8 11H8.01M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z\"\r\n                  stroke=\"#ef4444\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n              <span className=\"text-xs font-medium\" style={{ color: '#ef4444' }}>\r\n                {circularError}\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Header */}\r\n          <div className=\"px-4 py-2 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n            <span className=\"text-xs font-semibold uppercase tracking-wide\" style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}>\r\n              Task Dependencies\r\n            </span>\r\n          </div>\r\n\r\n          {/* Has dependencies checkbox */}\r\n          <div className=\"px-4 py-3 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n            <label\r\n              className=\"flex items-center gap-2 cursor-pointer group\"\r\n              onClick={handleToggleHasDependencies}\r\n            >\r\n              <div\r\n                className=\"w-4 h-4 rounded border-2 flex items-center justify-center transition-all\"\r\n                style={{\r\n                  background: hasDependencies ? '#3b82f6' : 'transparent',\r\n                  borderColor: hasDependencies ? '#3b82f6' : 'var(--modal-v2-border, rgba(255, 255, 255, 0.3))',\r\n                }}\r\n              >\r\n                {hasDependencies && (\r\n                  <svg\r\n                    width=\"12\"\r\n                    height=\"12\"\r\n                    viewBox=\"0 0 12 12\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M2 6L5 9L10 3\"\r\n                      stroke=\"white\"\r\n                      strokeWidth=\"2\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n              </div>\r\n              <span className=\"text-sm font-medium\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.8))' }}>\r\n                Has dependencies\r\n              </span>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Task selection (only if hasDependencies is true) */}\r\n          {hasDependencies && (\r\n            <>\r\n              {/* Search input */}\r\n              <div className=\"px-3 py-2 border-b\" style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.05))' }}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  placeholder=\"Search by name or ID...\"\r\n                  className=\"w-full px-3 py-2 rounded-md text-xs border outline-none transition-all\"\r\n                  style={{\r\n                    background: 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))',\r\n                    borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))',\r\n                    color: 'var(--modal-v2-text-primary, #ffffff)',\r\n                  }}\r\n                  autoFocus\r\n                />\r\n              </div>\r\n\r\n              {/* Task list */}\r\n              <div className=\"py-2 max-h-[280px] overflow-y-auto\">\r\n                {filteredTasks.length === 0 ? (\r\n                  <div className=\"px-4 py-3 text-xs text-center\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.5))' }}>\r\n                    No tasks found\r\n                  </div>\r\n                ) : (\r\n                  filteredTasks.map((task) => {\r\n                    const isDependency = dependencies.includes(task.id)\r\n\r\n                    return (\r\n                      <button\r\n                        key={task.id}\r\n                        onClick={() => handleToggleDependency(task.id)}\r\n                        className=\"w-full px-4 py-2 flex items-start gap-3 text-sm transition-colors\"\r\n                        style={{ background: 'transparent' }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.background = 'var(--modal-v2-bg-secondary, rgba(255, 255, 255, 0.05))'\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.background = 'transparent'\r\n                        }}\r\n                      >\r\n                        {/* Checkbox */}\r\n                        <div\r\n                          className=\"w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-all\"\r\n                          style={{\r\n                            background: isDependency ? '#3b82f6' : 'transparent',\r\n                            borderColor: isDependency ? '#3b82f6' : 'var(--modal-v2-border, rgba(255, 255, 255, 0.3))',\r\n                          }}\r\n                        >\r\n                          {isDependency && (\r\n                            <svg\r\n                              width=\"12\"\r\n                              height=\"12\"\r\n                              viewBox=\"0 0 12 12\"\r\n                              fill=\"none\"\r\n                              xmlns=\"http://www.w3.org/2000/svg\"\r\n                            >\r\n                              <path\r\n                                d=\"M2 6L5 9L10 3\"\r\n                                stroke=\"white\"\r\n                                strokeWidth=\"2\"\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                              />\r\n                            </svg>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Task info */}\r\n                        <div className=\"flex-1 text-left\">\r\n                          <div className=\"font-medium\" style={{ color: 'var(--modal-v2-text-primary, rgba(255, 255, 255, 0.9))' }}>\r\n                            {task.title}\r\n                          </div>\r\n                          <div className=\"text-xs mt-0.5\" style={{ color: 'var(--modal-v2-text-tertiary, rgba(255, 255, 255, 0.5))' }}>\r\n                            {task.id}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    )\r\n                  })\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* Clear button */}\r\n          {dependencies.length > 0 && (\r\n            <div className=\"px-3 py-2 border-t border-white/5\">\r\n              <button\r\n                onClick={() => {\r\n                  onChange([])\r\n                  setHasDependencies(false)\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full px-3 py-2 rounded-md text-xs font-medium transition-all hover:bg-red-600/20 border border-red-500/30\"\r\n                style={{ color: '#E74C3C' }}\r\n              >\r\n                Clear All Dependencies\r\n              </button>\r\n            </div>\r\n          )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\n * Card Component\n * Individual task card in the Kanban board\n * @module components/Card\n */\n\nimport { memo } from 'react'\nimport { useSortable } from '@dnd-kit/sortable'\nimport { CSS } from '@dnd-kit/utilities'\nimport type { Card as CardType } from '../../types'\nimport type { User } from './UserAssignmentSelector'\nimport { cn } from '../../utils'\nimport { PrioritySelector } from './PrioritySelector'\nimport { DateRangePicker } from './DateRangePicker'\nimport { UserAssignmentSelector } from './UserAssignmentSelector'\nimport { DependenciesSelector } from './DependenciesSelector'\n\nexport interface CardProps {\n  /** Card data */\n  card: CardType\n  /** Custom render function */\n  render?: (card: CardType) => React.ReactNode\n  /** Click handler */\n  onClick?: (card: CardType) => void\n  /** Is card selected */\n  isSelected?: boolean\n  /** Disable drag */\n  disableDrag?: boolean\n  /** Custom className */\n  className?: string\n  /** Card update handler */\n  onUpdate?: (cardId: string, updates: Partial<CardType>) => void\n  /** Available users for assignment */\n  availableUsers?: User[]\n  /** All cards (for dependencies) */\n  allCards?: CardType[]\n}\n\n/**\n * Default Card Component\n * Optimized with memo to prevent unnecessary re-renders\n */\nexport const Card = memo<CardProps>(\n  ({\n    card,\n    render,\n    onClick,\n    isSelected,\n    disableDrag,\n    className,\n    onUpdate,\n    availableUsers = [],\n    allCards = [],\n  }) => {\n    const {\n      attributes,\n      listeners,\n      setNodeRef,\n      transform,\n      transition,\n      isDragging,\n    } = useSortable({\n      id: card.id,\n      disabled: disableDrag,\n      data: {\n        type: 'card',\n        card,\n      },\n    })\n\n    const style = {\n      transform: CSS.Transform.toString(transform),\n      transition,\n    }\n\n    // If custom render provided, use it\n    if (render) {\n      return (\n        <div\n          ref={setNodeRef}\n          style={style}\n          {...attributes}\n          {...listeners}\n          onClick={() => onClick?.(card)}\n        >\n          {render(card)}\n        </div>\n      )\n    }\n\n    // Get assigned users from IDs\n    const assignedUsers = availableUsers.filter((user) =>\n      card.assignedUserIds?.includes(user.id)\n    )\n\n    // v0.17.41: Detect completed tasks for strikethrough styling\n    const isCompleted = card.progress === 100\n\n    // v0.17.182: Filter image attachments for thumbnail display\n    const imageAttachments = (card.attachments || []).filter((att) =>\n      att.type.startsWith('image/')\n    )\n\n    // Default card rendering with optional color accent\n    const cardStyle = {\n      ...style,\n      // v0.17.29: Apply custom color as top border accent\n      ...(card.color && {\n        borderTopWidth: '3px',\n        borderTopStyle: 'solid' as const,\n        borderTopColor: card.color,\n      }),\n    }\n\n    return (\n      <div\n        ref={setNodeRef}\n        style={cardStyle}\n        className={cn(\n          'asakaa-card',\n          isDragging && 'asakaa-card-dragging',\n          isSelected && 'ring-2 ring-asakaa-accent-blue',\n          className\n        )}\n        {...attributes}\n        {...listeners}\n        onClick={(e) => {\n          // Prevent card click when interacting with configurables\n          if (\n            (e.target as HTMLElement).closest(\n              '.priority-selector, .date-picker, .user-selector, .dependencies-selector'\n            )\n          ) {\n            return\n          }\n          onClick?.(card)\n        }}\n      >\n        {/* Cover Image */}\n        {card.coverImage && (\n          <div className=\"asakaa-card-cover mb-3\">\n            <img\n              src={card.coverImage}\n              alt={`Cover for ${card.title}`}\n              className=\"w-full h-32 object-cover rounded-md\"\n              loading=\"lazy\"\n              onError={(e) => {\n                // Hide image if it fails to load\n                e.currentTarget.style.display = 'none'\n              }}\n            />\n          </div>\n        )}\n\n        {/* v0.17.182: Image Attachment Thumbnails */}\n        {/* v0.17.228: Fixed blurry thumbnails - use full URL and GPU acceleration */}\n        {imageAttachments.length > 0 && !card.coverImage && (\n          <div className=\"asakaa-card-attachments mb-3\">\n            {imageAttachments.length === 1 && imageAttachments[0] ? (\n              // Single image: show as cover-like\n              <img\n                src={imageAttachments[0].url}\n                alt={imageAttachments[0].name}\n                className=\"w-full h-32 object-cover rounded-md\"\n                loading=\"lazy\"\n                decoding=\"async\"\n                style={{\n                  imageRendering: 'auto',\n                  WebkitBackfaceVisibility: 'hidden',\n                  backfaceVisibility: 'hidden',\n                  transform: 'translateZ(0)',\n                }}\n                onError={(e) => {\n                  e.currentTarget.style.display = 'none'\n                }}\n              />\n            ) : (\n              // Multiple images: show grid of thumbnails (max 4)\n              <div className=\"grid grid-cols-2 gap-1\">\n                {imageAttachments.slice(0, 4).map((att, index) => (\n                  <div key={att.id} className=\"relative\">\n                    <img\n                      src={att.url}\n                      alt={att.name}\n                      className=\"w-full h-16 object-cover rounded\"\n                      loading=\"lazy\"\n                      decoding=\"async\"\n                      style={{\n                        imageRendering: 'auto',\n                        WebkitBackfaceVisibility: 'hidden',\n                        backfaceVisibility: 'hidden',\n                        transform: 'translateZ(0)',\n                      }}\n                      onError={(e) => {\n                        e.currentTarget.style.display = 'none'\n                      }}\n                    />\n                    {/* Show +N overlay on last image if more than 4 */}\n                    {index === 3 && imageAttachments.length > 4 && (\n                      <div className=\"absolute inset-0 bg-black/60 rounded flex items-center justify-center\">\n                        <span className=\"text-white text-sm font-medium\">\n                          +{imageAttachments.length - 4}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Title - v0.17.41: Strikethrough for completed tasks */}\n        <h3\n          className=\"asakaa-card-title mb-2\"\n          style={{\n            textDecoration: isCompleted ? 'line-through' : 'none',\n            opacity: isCompleted ? 0.6 : 1,\n          }}\n        >\n          {card.title}\n        </h3>\n\n        {/* Description */}\n        {card.description && (\n          <p className=\"asakaa-card-description mb-3\">{card.description}</p>\n        )}\n\n        {/* Configurable properties row */}\n        <div className=\"flex items-center gap-3 mb-3 pt-1\">\n          {/* Priority selector */}\n          <div onClick={(e) => e.stopPropagation()} className=\"priority-selector\">\n            <PrioritySelector\n              priority={card.priority}\n              onChange={(priority) => onUpdate?.(card.id, { priority })}\n            />\n          </div>\n\n          {/* Date range picker */}\n          <div onClick={(e) => e.stopPropagation()} className=\"date-picker\">\n            <DateRangePicker\n              startDate={\n                card.startDate\n                  ? typeof card.startDate === 'string'\n                    ? card.startDate\n                    : card.startDate.toISOString().split('T')[0]\n                  : undefined\n              }\n              endDate={\n                card.endDate\n                  ? typeof card.endDate === 'string'\n                    ? card.endDate\n                    : card.endDate.toISOString().split('T')[0]\n                  : undefined\n              }\n              onChange={(startDate, endDate) =>\n                onUpdate?.(card.id, { startDate, endDate })\n              }\n            />\n          </div>\n\n          {/* User assignment */}\n          {availableUsers.length > 0 && (\n            <div onClick={(e) => e.stopPropagation()} className=\"user-selector\">\n              <UserAssignmentSelector\n                assignedUsers={assignedUsers}\n                availableUsers={availableUsers}\n                onChange={(users) =>\n                  onUpdate?.(card.id, {\n                    assignedUserIds: users.map((u) => u.id),\n                  })\n                }\n              />\n            </div>\n          )}\n\n          {/* Dependencies */}\n          <div onClick={(e) => e.stopPropagation()} className=\"dependencies-selector\">\n            <DependenciesSelector\n              currentCardId={card.id}\n              dependencies={\n                Array.isArray(card.dependencies)\n                  ? card.dependencies.map((d) => (typeof d === 'string' ? d : d.taskId))\n                  : []\n              }\n              availableTasks={allCards}\n              onChange={(dependencies) => onUpdate?.(card.id, { dependencies })}\n            />\n          </div>\n        </div>\n\n        {/* Labels */}\n        {card.labels && card.labels.length > 0 && (\n          <div className=\"flex flex-wrap gap-1\">\n            {card.labels.slice(0, 3).map((label) => (\n              <span key={label} className=\"asakaa-label\">\n                {label}\n              </span>\n            ))}\n          </div>\n        )}\n\n        {/* Progress Bar - v0.17.37, v0.17.40: Fixed electric blue color */}\n        {typeof card.progress === 'number' && (\n          <div className=\"mt-3 pt-2 border-t border-white/5\">\n            <div className=\"flex items-center justify-between mb-1\">\n              <span className=\"text-[10px] text-[#6B7280]\">Progreso</span>\n              <span className=\"text-[10px] font-medium\" style={{ color: '#3B82F6' }}>\n                {Math.round(card.progress)}%\n              </span>\n            </div>\n            <div className=\"h-1.5 rounded-full bg-white/5 overflow-hidden\">\n              <div\n                className=\"h-full rounded-full transition-all duration-300\"\n                style={{\n                  width: `${Math.min(100, Math.max(0, card.progress))}%`,\n                  backgroundColor: '#3B82F6',\n                }}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  },\n  // Custom comparison function for optimal performance\n  (prevProps, nextProps) => {\n    return (\n      prevProps.card.id === nextProps.card.id &&\n      prevProps.card.title === nextProps.card.title &&\n      prevProps.card.description === nextProps.card.description &&\n      prevProps.card.position === nextProps.card.position &&\n      prevProps.card.columnId === nextProps.card.columnId &&\n      prevProps.card.priority === nextProps.card.priority &&\n      prevProps.card.color === nextProps.card.color && // v0.17.29\n      prevProps.card.progress === nextProps.card.progress && // v0.17.37\n      prevProps.card.startDate === nextProps.card.startDate &&\n      prevProps.card.endDate === nextProps.card.endDate &&\n      prevProps.isSelected === nextProps.isSelected &&\n      JSON.stringify(prevProps.card.labels) ===\n        JSON.stringify(nextProps.card.labels) &&\n      JSON.stringify(prevProps.card.assignedUserIds) ===\n        JSON.stringify(nextProps.card.assignedUserIds) &&\n      JSON.stringify(prevProps.card.dependencies) ===\n        JSON.stringify(nextProps.card.dependencies) &&\n      // v0.17.182: Compare attachments for thumbnail updates\n      JSON.stringify(prevProps.card.attachments?.map((a) => a.id)) ===\n        JSON.stringify(nextProps.card.attachments?.map((a) => a.id))\n    )\n  }\n)\n\nCard.displayName = 'Card'\n","/**\r\n * Status Selector Component\r\n * Reusable status selector for both Card and Gantt\r\n * Follows the same pattern as PrioritySelector\r\n * v0.17.54: Added support for custom statuses from Kanban columns\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\n// v0.17.54: Keep for backward compatibility, but allow string type for custom statuses\r\nexport type TaskStatus = 'todo' | 'in-progress' | 'completed'\r\n\r\n// v0.17.54: Custom status interface for dynamic Kanban columns\r\nexport interface CustomStatusOption {\r\n  id: string\r\n  title: string\r\n  color?: string\r\n}\r\n\r\nexport interface StatusSelectorProps {\r\n  status?: string // v0.17.54: Changed to string to support custom statuses\r\n  onChange: (status: string) => void // v0.17.54: Changed to string\r\n  className?: string\r\n  customStatuses?: CustomStatusOption[] // v0.17.54: Custom statuses from Kanban columns\r\n}\r\n\r\nconst STATUS_CONFIG = {\r\n  'todo': {\r\n    label: 'To Do',\r\n    color: '#94a3b8',\r\n    icon: 'circle'\r\n  },\r\n  'in-progress': {\r\n    label: 'In Progress',\r\n    color: '#60a5fa',\r\n    icon: 'circle-dot'\r\n  },\r\n  'completed': {\r\n    label: 'Completed',\r\n    color: '#34d399',\r\n    icon: 'check-circle'\r\n  },\r\n} as const\r\n\r\nconst StatusIcon = ({ icon, color }: { icon: string; color: string }) => {\r\n  if (icon === 'circle') {\r\n    return (\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill=\"none\" />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  if (icon === 'circle-dot') {\r\n    return (\r\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill=\"none\" />\r\n        <circle cx=\"8\" cy=\"8\" r=\"3\" fill={color} />\r\n      </svg>\r\n    )\r\n  }\r\n\r\n  // check-circle\r\n  return (\r\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <circle cx=\"8\" cy=\"8\" r=\"6\" stroke={color} strokeWidth=\"1.5\" fill={color} fillOpacity=\"0.2\" />\r\n      <path d=\"M5 8L7 10L11 6\" stroke={color} strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n    </svg>\r\n  )\r\n}\r\n\r\nexport function StatusSelector({\r\n  status = 'todo',\r\n  onChange,\r\n  className,\r\n  customStatuses = [],\r\n}: StatusSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // v0.17.54: Build combined status list (default + custom)\r\n  const allStatuses: Array<{ id: string; label: string; color: string; icon: string }> = [\r\n    ...Object.entries(STATUS_CONFIG).map(([id, config]) => ({\r\n      id,\r\n      label: config.label,\r\n      color: config.color,\r\n      icon: config.icon,\r\n    })),\r\n    ...customStatuses\r\n      .filter(cs => !Object.keys(STATUS_CONFIG).includes(cs.id))\r\n      .map(cs => ({\r\n        id: cs.id,\r\n        label: cs.title,\r\n        color: cs.color || '#8B5CF6', // Default purple for custom statuses\r\n        icon: 'circle-dot', // Default icon for custom\r\n      })),\r\n  ]\r\n\r\n  // v0.17.54: Get current status config (from defaults or custom)\r\n  const getCurrentConfig = () => {\r\n    const defaultConfig = STATUS_CONFIG[status as TaskStatus]\r\n    if (defaultConfig) {\r\n      return { ...defaultConfig, id: status }\r\n    }\r\n    const customConfig = customStatuses.find(cs => cs.id === status)\r\n    if (customConfig) {\r\n      return {\r\n        id: customConfig.id,\r\n        label: customConfig.title,\r\n        color: customConfig.color || '#8B5CF6',\r\n        icon: 'circle-dot',\r\n      }\r\n    }\r\n    // Fallback to todo\r\n    return { ...STATUS_CONFIG['todo'], id: 'todo' }\r\n  }\r\n\r\n  // v0.17.63: Calculate position and open menu synchronously\r\n  const openMenu = () => {\r\n    if (!buttonRef.current) return\r\n\r\n    const rect = buttonRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const menuWidth = 180\r\n    const menuHeight = 280\r\n    const GAP = 4\r\n\r\n    let leftPos = rect.right - menuWidth\r\n    if (leftPos < 10) leftPos = rect.left\r\n    if (leftPos + menuWidth > viewportWidth - 10) {\r\n      leftPos = viewportWidth - menuWidth - 10\r\n    }\r\n\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= menuHeight + GAP) {\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= menuHeight + GAP) {\r\n      topPos = rect.top - menuHeight - GAP\r\n    } else {\r\n      topPos = spaceBelow >= spaceAbove\r\n        ? rect.bottom + GAP\r\n        : Math.max(10, rect.top - menuHeight - GAP)\r\n    }\r\n\r\n    setMenuPosition({ top: topPos, left: leftPos })\r\n    setIsOpen(true)\r\n  }\r\n\r\n  // v0.17.65: Scroll lock removed - position:fixed handles positioning correctly\r\n  // The Portal renders outside the overflow container, so no lock needed\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') setIsOpen(false)\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (newStatus: string) => {\r\n    onChange(newStatus)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  // v0.17.54: Use dynamic config lookup\r\n  const currentConfig = getCurrentConfig()\r\n  const statusColor = currentConfig.color\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => isOpen ? setIsOpen(false) : openMenu()}\r\n        className=\"flex items-center justify-center w-8 h-8 rounded-lg transition-all hover:bg-white/15 hover:scale-110 active:scale-95\"\r\n        style={{\r\n          background: `${statusColor}10`,\r\n          boxShadow: `0 0 0 2px ${statusColor}30 inset`,\r\n        }}\r\n        title={currentConfig.label}\r\n      >\r\n        <StatusIcon icon={currentConfig.icon} color={statusColor} />\r\n      </button>\r\n\r\n      {/* v0.17.57: Fixed positioning for proper viewport handling */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"status-selector-menu\"\r\n            style={{\r\n              position: 'fixed',\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              zIndex: 99999,\r\n              minWidth: '180px',\r\n              maxHeight: 'calc(100vh - 40px)',\r\n              overflowY: 'auto',\r\n              borderRadius: '8px',\r\n              background: 'var(--modal-v2-bg, #1f1f1f)',\r\n              border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n            }}\r\n          >\r\n          <div\r\n            className=\"px-3 py-1.5 border-b\"\r\n            style={{ borderColor: 'var(--modal-v2-border, rgba(255, 255, 255, 0.1))' }}\r\n          >\r\n            <span\r\n              className=\"text-[10px] font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--modal-v2-text-secondary, rgba(255, 255, 255, 0.7))' }}\r\n            >\r\n              Status\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {/* v0.17.54: Render all statuses (default + custom) */}\r\n            {allStatuses.map((statusOption) => (\r\n                <button\r\n                  key={statusOption.id}\r\n                  onClick={() => handleSelect(statusOption.id)}\r\n                  className=\"w-full px-3 py-2 flex items-center gap-2.5 text-sm font-medium transition-all active:scale-[0.98] status-option\"\r\n                  style={{\r\n                    color: statusOption.color,\r\n                    background: 'transparent'\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'var(--modal-v2-bg-tertiary, rgba(255, 255, 255, 0.15))'\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'transparent'\r\n                  }}\r\n                >\r\n                  <StatusIcon icon={statusOption.icon} color={statusOption.color} />\r\n                  <span className=\"font-semibold\">{statusOption.label}</span>\r\n                  {status === statusOption.id && (\r\n                    <svg className=\"ml-auto\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M13.5 4.5L6 12L2.5 8.5\" stroke=\"#3B82F6\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              )\r\n            )}\r\n          </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Column Menu Component\r\n * Three-dot menu for column actions (rename, delete, etc.)\r\n * v0.17.55: Added delete functionality for custom columns\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface ColumnMenuProps {\r\n  /** Current column title */\r\n  columnTitle: string\r\n  /** Rename handler */\r\n  onRename: (newTitle: string) => void\r\n  /** v0.17.55: Delete handler - if provided, shows delete option */\r\n  onDelete?: () => void\r\n  /** v0.17.55: Whether column can be deleted (default columns cannot) */\r\n  isDeletable?: boolean\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\nexport function ColumnMenu({\r\n  columnTitle,\r\n  onRename,\r\n  onDelete,\r\n  isDeletable = false,\r\n  className,\r\n}: ColumnMenuProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isRenaming, setIsRenaming] = useState(false)\r\n  const [newTitle, setNewTitle] = useState(columnTitle)\r\n  const [menuPosition, setMenuPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Update menu position when opened\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect()\r\n      setMenuPosition({\r\n        top: rect.bottom + window.scrollY + 8,\r\n        left: rect.left + window.scrollX,\r\n      })\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Close menu when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        !buttonRef.current?.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n        setIsRenaming(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setIsRenaming(false)\r\n        setNewTitle(columnTitle)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, columnTitle])\r\n\r\n  // Focus input when renaming starts\r\n  useEffect(() => {\r\n    if (isRenaming && inputRef.current) {\r\n      inputRef.current.focus()\r\n      inputRef.current.select()\r\n    }\r\n  }, [isRenaming])\r\n\r\n  const handleRenameClick = () => {\r\n    setIsRenaming(true)\r\n    setNewTitle(columnTitle)\r\n  }\r\n\r\n  const handleRenameSubmit = () => {\r\n    const trimmedTitle = newTitle.trim()\r\n    if (trimmedTitle && trimmedTitle !== columnTitle) {\r\n      onRename(trimmedTitle)\r\n    }\r\n    setIsRenaming(false)\r\n    setIsOpen(false)\r\n    setNewTitle(columnTitle)\r\n  }\r\n\r\n  const handleRenameKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      handleRenameSubmit()\r\n    } else if (e.key === 'Escape') {\r\n      setIsRenaming(false)\r\n      setNewTitle(columnTitle)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`relative ${className || ''}`}>\r\n      {/* Three-dot menu button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-white/10\"\r\n        title=\"Column options\"\r\n        aria-label=\"Column menu\"\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 16 16\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <circle cx=\"8\" cy=\"3\" r=\"1.5\" fill=\"currentColor\" />\r\n          <circle cx=\"8\" cy=\"8\" r=\"1.5\" fill=\"currentColor\" />\r\n          <circle cx=\"8\" cy=\"13\" r=\"1.5\" fill=\"currentColor\" />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Menu dropdown */}\r\n      {isOpen && (\r\n        <Portal>\r\n          <div\r\n            ref={menuRef}\r\n            className=\"fixed rounded-xl shadow-2xl border min-w-[200px]\"\r\n            style={{\r\n              top: `${menuPosition.top}px`,\r\n              left: `${menuPosition.left}px`,\r\n              background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n              borderColor: 'rgba(255, 255, 255, 0.15)',\r\n              boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n              zIndex: 99999,\r\n            }}\r\n          >\r\n            {isRenaming ? (\r\n              // Rename input\r\n              <div className=\"p-3\">\r\n                <label className=\"text-xs font-bold text-white/80 uppercase tracking-wider block mb-2\">\r\n                  Rename Column\r\n                </label>\r\n                <input\r\n                  ref={inputRef}\r\n                  type=\"text\"\r\n                  value={newTitle}\r\n                  onChange={(e) => setNewTitle(e.target.value)}\r\n                  onKeyDown={handleRenameKeyDown}\r\n                  onBlur={handleRenameSubmit}\r\n                  className=\"w-full px-3 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/50 outline-none focus:border-blue-500/50 transition-all\"\r\n                  placeholder=\"Column name\"\r\n                  maxLength={50}\r\n                />\r\n              </div>\r\n            ) : (\r\n              // Menu options\r\n              <div className=\"py-1\">\r\n                <button\r\n                  onClick={handleRenameClick}\r\n                  className=\"w-full px-4 py-2.5 flex items-center gap-3 text-sm text-white/90 hover:bg-white/10 transition-all\"\r\n                >\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 16 16\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M11.5 1.5L14.5 4.5L5 14H2V11L11.5 1.5Z\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"1.5\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                  <span className=\"font-medium\">Rename</span>\r\n                </button>\r\n\r\n                {/* v0.17.55: Delete option - only for custom columns */}\r\n                {isDeletable && onDelete && (\r\n                  <>\r\n                    <div className=\"h-px bg-white/10 mx-2 my-1\" />\r\n                    <button\r\n                      onClick={() => {\r\n                        onDelete()\r\n                        setIsOpen(false)\r\n                      }}\r\n                      className=\"w-full px-4 py-2.5 flex items-center gap-3 text-sm text-red-400 hover:bg-red-500/10 transition-all\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 16 16\"\r\n                        fill=\"none\"\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                      >\r\n                        <path\r\n                          d=\"M2 4H14M5 4V2.5C5 2.22386 5.22386 2 5.5 2H10.5C10.7761 2 11 2.22386 11 2.5V4M12.5 4V13.5C12.5 13.7761 12.2761 14 12 14H4C3.72386 14 3.5 13.7761 3.5 13.5V4\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"1.5\"\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                        />\r\n                        <path\r\n                          d=\"M6.5 7V11M9.5 7V11\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"1.5\"\r\n                          strokeLinecap=\"round\"\r\n                        />\r\n                      </svg>\r\n                      <span className=\"font-medium\">Delete</span>\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Column Component\r\n * Vertical column containing cards\r\n * @module components/Column\r\n */\r\n\r\nimport { memo, useRef } from 'react'\r\nimport { useDroppable } from '@dnd-kit/core'\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\nimport type { Column as ColumnType, Card as CardType } from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { Card } from '../Card'\r\nimport { ColumnMenu } from './ColumnMenu'\r\nimport { cn, shouldVirtualize } from '../../utils'\r\n\r\nexport interface ColumnProps {\r\n  /** Column data */\r\n  column: ColumnType\r\n  /** Cards in this column */\r\n  cards: CardType[]\r\n  /** Custom column renderer */\r\n  renderColumn?: (column: ColumnType, cards: CardType[]) => React.ReactNode\r\n  /** Custom card renderer */\r\n  renderCard?: (card: CardType) => React.ReactNode\r\n  /** Custom header renderer */\r\n  renderHeader?: (column: ColumnType, cardCount: number) => React.ReactNode\r\n  /** Custom empty state */\r\n  renderEmptyState?: (column: ColumnType) => React.ReactNode\r\n  /** Card click handler */\r\n  onCardClick?: (card: CardType) => void\r\n  /** Card update handler */\r\n  onCardUpdate?: (cardId: string, updates: Partial<CardType>) => void\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** All cards (for dependencies) */\r\n  allCards?: CardType[]\r\n  /** Enable virtualization */\r\n  enableVirtualization?: boolean\r\n  /** Estimated card height for virtualization */\r\n  cardHeight?: number\r\n  /** Is column collapsed */\r\n  isCollapsed?: boolean\r\n  /** Toggle collapse */\r\n  onToggleCollapse?: () => void\r\n  /** Column rename handler */\r\n  onColumnRename?: (columnId: string, newTitle: string) => void\r\n  /** v0.17.55: Column delete handler */\r\n  onColumnDelete?: (columnId: string) => void\r\n  /** v0.17.55: Whether column can be deleted (false for default columns) */\r\n  isDeletable?: boolean\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Column Component\r\n * Uses virtualization for large lists automatically\r\n */\r\nexport const Column = memo<ColumnProps>(\r\n  ({\r\n    column,\r\n    cards,\r\n    renderColumn,\r\n    renderCard,\r\n    renderHeader,\r\n    renderEmptyState,\r\n    onCardClick,\r\n    onCardUpdate,\r\n    availableUsers,\r\n    allCards,\r\n    enableVirtualization,\r\n    cardHeight = 120,\r\n    isCollapsed,\r\n    onToggleCollapse,\r\n    onColumnRename,\r\n    onColumnDelete,\r\n    isDeletable = false,\r\n    className,\r\n  }) => {\r\n    const { setNodeRef, isOver } = useDroppable({\r\n      id: column.id,\r\n      data: {\r\n        type: 'column',\r\n        column,\r\n      },\r\n    })\r\n\r\n    const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n    // Auto-enable virtualization for large lists\r\n    const useVirtualization =\r\n      enableVirtualization ?? shouldVirtualize(cards.length)\r\n\r\n    // Setup virtualizer\r\n    const virtualizer = useVirtualizer({\r\n      count: cards.length,\r\n      getScrollElement: () => parentRef.current,\r\n      estimateSize: () => cardHeight,\r\n      enabled: useVirtualization,\r\n    })\r\n\r\n    // Custom column renderer\r\n    if (renderColumn) {\r\n      return (\r\n        <div ref={setNodeRef} className={className}>\r\n          {renderColumn(column, cards)}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    // Calculate WIP limit status\r\n    const getWipLimitStatus = () => {\r\n      if (!column.wipLimit) return { state: 'none', percentage: 0 }\r\n\r\n      const percentage = (cards.length / column.wipLimit) * 100\r\n\r\n      if (cards.length > column.wipLimit) {\r\n        return { state: 'exceeded', percentage }\r\n      } else if (percentage >= 80) {\r\n        return { state: 'warning', percentage }\r\n      } else if (percentage >= 60) {\r\n        return { state: 'approaching', percentage }\r\n      } else {\r\n        return { state: 'ok', percentage }\r\n      }\r\n    }\r\n\r\n    const wipStatus = getWipLimitStatus()\r\n    const isOverWipLimit = wipStatus.state === 'exceeded'\r\n\r\n    // WIP limit badge styling - simplified without color backgrounds\r\n    const getWipBadgeClasses = () => {\r\n      // All WIP limits use the same base class for consistent, subtle display\r\n      return 'asakaa-column-count'\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={setNodeRef}\r\n        className={cn(\r\n          'asakaa-column',\r\n          isOver && 'ring-2 ring-asakaa-accent-blue',\r\n          isOverWipLimit && 'ring-2 ring-asakaa-accent-red',\r\n          className\r\n        )}\r\n      >\r\n        {/* Header */}\r\n        {renderHeader ? (\r\n          renderHeader(column, cards.length)\r\n        ) : (\r\n          <div className=\"asakaa-column-header group\">\r\n            <h2 className=\"asakaa-column-title\">{column.title}</h2>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className={cn(getWipBadgeClasses())}>\r\n                {cards.length}\r\n                {column.wipLimit && ` / ${column.wipLimit}`}\r\n              </span>\r\n              {/* WIP limit status indicator */}\r\n              {column.wipLimit && wipStatus.state !== 'none' && (\r\n                <span\r\n                  className=\"text-xs font-medium flex items-center\"\r\n                  title={`${wipStatus.percentage.toFixed(0)}% capacity${\r\n                    column.wipLimitType === 'hard'\r\n                      ? ' (Hard limit - blocks new cards)'\r\n                      : ' (Soft limit - shows warning)'\r\n                  }`}\r\n                >\r\n                  {wipStatus.state === 'exceeded' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <circle cx=\"8\" cy=\"8\" r=\"7\" fill=\"#EF4444\" opacity=\"0.9\" />\r\n                      <path d=\"M5 5L11 11M11 5L5 11\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'warning' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M8 1L15 14H1L8 1Z\" fill=\"#F59E0B\" opacity=\"0.9\" />\r\n                      <path d=\"M8 6V9M8 11V11.5\" stroke=\"white\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'approaching' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <path d=\"M8 1L10 7H14L10 10L12 16L8 12L4 16L6 10L2 7H6L8 1Z\" fill=\"#FB923C\" opacity=\"0.9\" />\r\n                    </svg>\r\n                  )}\r\n                  {wipStatus.state === 'ok' && (\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n                      <circle cx=\"8\" cy=\"8\" r=\"7\" fill=\"#10B981\" opacity=\"0.9\" />\r\n                      <path d=\"M5 8L7 10L11 6\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                </span>\r\n              )}\r\n              {(onColumnRename || onColumnDelete) && (\r\n                <ColumnMenu\r\n                  columnTitle={column.title}\r\n                  onRename={(newTitle) => onColumnRename?.(column.id, newTitle)}\r\n                  onDelete={onColumnDelete ? () => onColumnDelete(column.id) : undefined}\r\n                  isDeletable={isDeletable}\r\n                />\r\n              )}\r\n              {onToggleCollapse && (\r\n                <button\r\n                  onClick={onToggleCollapse}\r\n                  className=\"text-asakaa-text-tertiary hover:text-asakaa-text-primary\"\r\n                  aria-label={isCollapsed ? 'Expand column' : 'Collapse column'}\r\n                >\r\n                  {isCollapsed ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cards */}\r\n        {!isCollapsed && (\r\n          <div\r\n            ref={parentRef}\r\n            className=\"asakaa-column-cards\"\r\n            style={{\r\n              maxHeight: useVirtualization ? '600px' : undefined,\r\n            }}\r\n          >\r\n            <SortableContext\r\n              items={cards.map((card) => card.id)}\r\n              strategy={verticalListSortingStrategy}\r\n            >\r\n              {cards.length === 0 ? (\r\n                // Empty state\r\n                renderEmptyState ? (\r\n                  renderEmptyState(column)\r\n                ) : (\r\n                  <div className=\"asakaa-drop-zone asakaa-empty\">\r\n                    <p>Drop cards here</p>\r\n                  </div>\r\n                )\r\n              ) : useVirtualization ? (\r\n                // Virtualized list\r\n                <div\r\n                  style={{\r\n                    height: `${virtualizer.getTotalSize()}px`,\r\n                    position: 'relative',\r\n                  }}\r\n                >\r\n                  {virtualizer.getVirtualItems().map((virtualItem) => {\r\n                    const card = cards[virtualItem.index]\r\n                    if (!card) return null\r\n\r\n                    return (\r\n                      <div\r\n                        key={card.id}\r\n                        style={{\r\n                          position: 'absolute',\r\n                          top: 0,\r\n                          left: 0,\r\n                          width: '100%',\r\n                          transform: `translateY(${virtualItem.start}px)`,\r\n                        }}\r\n                      >\r\n                        <Card\r\n                          card={card}\r\n                          render={renderCard}\r\n                          onClick={onCardClick}\r\n                          onUpdate={onCardUpdate}\r\n                          availableUsers={availableUsers}\r\n                          allCards={allCards}\r\n                        />\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              ) : (\r\n                // Regular list\r\n                cards.map((card) => (\r\n                  <Card\r\n                    key={card.id}\r\n                    card={card}\r\n                    render={renderCard}\r\n                    onClick={onCardClick}\r\n                    onUpdate={onCardUpdate}\r\n                    availableUsers={availableUsers}\r\n                    allCards={allCards}\r\n                  />\r\n                ))\r\n              )}\r\n            </SortableContext>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n  // Memoization removed to allow card property updates to trigger re-renders\r\n  // The individual Card components are still memoized for performance\r\n)\r\n\r\nColumn.displayName = 'Column'\r\n","/**\r\n * Editable Column Title Component\r\n * Allows inline editing of column names\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface EditableColumnTitleProps {\r\n  title: string\r\n  onSave: (newTitle: string) => void\r\n  className?: string\r\n}\r\n\r\nexport function EditableColumnTitle({\r\n  title,\r\n  onSave,\r\n  className,\r\n}: EditableColumnTitleProps) {\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [editValue, setEditValue] = useState(title)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus()\r\n      inputRef.current.select()\r\n    }\r\n  }, [isEditing])\r\n\r\n  const handleSave = () => {\r\n    const trimmed = editValue.trim()\r\n    if (trimmed && trimmed !== title) {\r\n      onSave(trimmed)\r\n    } else {\r\n      setEditValue(title)\r\n    }\r\n    setIsEditing(false)\r\n  }\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSave()\r\n    } else if (e.key === 'Escape') {\r\n      setEditValue(title)\r\n      setIsEditing(false)\r\n    }\r\n  }\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={editValue}\r\n        onChange={(e) => setEditValue(e.target.value)}\r\n        onBlur={handleSave}\r\n        onKeyDown={handleKeyDown}\r\n        className={cn(\r\n          'asakaa-column-title bg-transparent border-b-2 border-blue-500',\r\n          'outline-none px-1 -ml-1',\r\n          className\r\n        )}\r\n        maxLength={50}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <h2\r\n      className={cn('asakaa-column-title cursor-pointer', className)}\r\n      onClick={() => setIsEditing(true)}\r\n      title=\"Click to edit\"\r\n    >\r\n      {title}\r\n    </h2>\r\n  )\r\n}\r\n","/**\r\n * MentionInput Component\r\n * A textarea with @mention autocomplete functionality\r\n * @version 0.17.401\r\n */\r\n\r\nimport { useState, useRef, useEffect, useCallback, KeyboardEvent, ChangeEvent } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Send } from 'lucide-react';\r\nimport { cn } from '../../utils';\r\n\r\n// ============================================================================\r\n// TYPES\r\n// ============================================================================\r\n\r\nexport interface MentionUser {\r\n  id: string;\r\n  name: string;\r\n  email?: string;\r\n  avatar?: string;\r\n  avatarUrl?: string;\r\n  color?: string;\r\n}\r\n\r\nexport interface MentionInputProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSubmit: () => void;\r\n  users: MentionUser[];\r\n  placeholder?: string;\r\n  disabled?: boolean;\r\n  isSubmitting?: boolean;\r\n  theme?: 'dark' | 'light';\r\n  locale?: 'en' | 'es';\r\n  currentUser?: {\r\n    id: string;\r\n    name: string;\r\n    avatarUrl?: string;\r\n    color?: string;\r\n  };\r\n}\r\n\r\ninterface MentionMatch {\r\n  start: number;\r\n  end: number;\r\n  query: string;\r\n}\r\n\r\n// ============================================================================\r\n// HELPERS\r\n// ============================================================================\r\n\r\n/**\r\n * Find the current @mention being typed\r\n */\r\nfunction findMentionMatch(text: string, cursorPosition: number): MentionMatch | null {\r\n  const beforeCursor = text.slice(0, cursorPosition);\r\n  const atIndex = beforeCursor.lastIndexOf('@');\r\n\r\n  if (atIndex === -1) return null;\r\n\r\n  // Check if @ is at start or preceded by whitespace\r\n  const charBefore = beforeCursor[atIndex - 1];\r\n  if (atIndex > 0 && charBefore && !/\\s/.test(charBefore)) {\r\n    return null;\r\n  }\r\n\r\n  const afterAt = beforeCursor.slice(atIndex + 1);\r\n\r\n  // If there's a space after @, the mention is complete\r\n  if (/\\s/.test(afterAt)) return null;\r\n\r\n  return {\r\n    start: atIndex,\r\n    end: cursorPosition,\r\n    query: afterAt.toLowerCase(),\r\n  };\r\n}\r\n\r\n/**\r\n * Extract all @mentions from text and return mentioned user IDs\r\n */\r\nexport function extractMentionedUserIds(text: string, users: MentionUser[]): string[] {\r\n  const mentionedIds: string[] = [];\r\n  const mentionRegex = /@(\\S+)/g;\r\n  let match;\r\n\r\n  while ((match = mentionRegex.exec(text)) !== null) {\r\n    const mentionName = match[1]?.toLowerCase() ?? '';\r\n    if (!mentionName) continue;\r\n    const user = users.find(u =>\r\n      u.name.toLowerCase().replace(/\\s+/g, '') === mentionName ||\r\n      u.name.toLowerCase() === mentionName\r\n    );\r\n    if (user && !mentionedIds.includes(user.id)) {\r\n      mentionedIds.push(user.id);\r\n    }\r\n  }\r\n\r\n  return mentionedIds;\r\n}\r\n\r\n/**\r\n * Get initials from name\r\n */\r\nfunction getInitials(name: string): string {\r\n  return name\r\n    .split(' ')\r\n    .map(n => n[0])\r\n    .join('')\r\n    .toUpperCase()\r\n    .slice(0, 2);\r\n}\r\n\r\n// ============================================================================\r\n// COMPONENT\r\n// ============================================================================\r\n\r\nexport function MentionInput({\r\n  value,\r\n  onChange,\r\n  onSubmit,\r\n  users,\r\n  placeholder,\r\n  disabled = false,\r\n  isSubmitting = false,\r\n  theme = 'dark',\r\n  locale = 'es',\r\n  currentUser,\r\n}: MentionInputProps) {\r\n  const isDark = theme === 'dark';\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [filteredUsers, setFilteredUsers] = useState<MentionUser[]>([]);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const [mentionMatch, setMentionMatch] = useState<MentionMatch | null>(null);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Filter users based on mention query\r\n  const updateMentionState = useCallback((text: string, cursorPos: number) => {\r\n    const match = findMentionMatch(text, cursorPos);\r\n    setMentionMatch(match);\r\n\r\n    if (match) {\r\n      const filtered = users.filter(user =>\r\n        user.name.toLowerCase().includes(match.query) ||\r\n        (user.email && user.email.toLowerCase().includes(match.query))\r\n      ).slice(0, 5);\r\n\r\n      setFilteredUsers(filtered);\r\n      setShowDropdown(filtered.length > 0);\r\n      setSelectedIndex(0);\r\n    } else {\r\n      setShowDropdown(false);\r\n      setFilteredUsers([]);\r\n    }\r\n  }, [users]);\r\n\r\n  // Handle text change\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.value;\r\n    onChange(newValue);\r\n    updateMentionState(newValue, e.target.selectionStart || 0);\r\n  };\r\n\r\n  // Handle cursor position changes\r\n  const handleSelect = () => {\r\n    if (inputRef.current) {\r\n      updateMentionState(value, inputRef.current.selectionStart || 0);\r\n    }\r\n  };\r\n\r\n  // Insert mention into text\r\n  const insertMention = useCallback((user: MentionUser) => {\r\n    if (!mentionMatch || !inputRef.current) return;\r\n\r\n    const beforeMention = value.slice(0, mentionMatch.start);\r\n    const afterMention = value.slice(mentionMatch.end);\r\n    const mentionText = `@${user.name.replace(/\\s+/g, '')} `;\r\n\r\n    const newValue = beforeMention + mentionText + afterMention;\r\n    onChange(newValue);\r\n\r\n    setShowDropdown(false);\r\n    setMentionMatch(null);\r\n\r\n    setTimeout(() => {\r\n      if (inputRef.current) {\r\n        const newCursorPos = mentionMatch.start + mentionText.length;\r\n        inputRef.current.selectionStart = newCursorPos;\r\n        inputRef.current.selectionEnd = newCursorPos;\r\n        inputRef.current.focus();\r\n      }\r\n    }, 0);\r\n  }, [mentionMatch, value, onChange]);\r\n\r\n  // Handle keyboard navigation\r\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (showDropdown && filteredUsers.length > 0) {\r\n      switch (e.key) {\r\n        case 'ArrowDown':\r\n          e.preventDefault();\r\n          setSelectedIndex(prev =>\r\n            prev < filteredUsers.length - 1 ? prev + 1 : 0\r\n          );\r\n          break;\r\n        case 'ArrowUp':\r\n          e.preventDefault();\r\n          setSelectedIndex(prev =>\r\n            prev > 0 ? prev - 1 : filteredUsers.length - 1\r\n          );\r\n          break;\r\n        case 'Enter': {\r\n          e.preventDefault();\r\n          const selectedUser = filteredUsers[selectedIndex];\r\n          if (selectedUser) insertMention(selectedUser);\r\n          break;\r\n        }\r\n        case 'Tab': {\r\n          e.preventDefault();\r\n          const tabSelectedUser = filteredUsers[selectedIndex];\r\n          if (tabSelectedUser) insertMention(tabSelectedUser);\r\n          break;\r\n        }\r\n        case 'Escape':\r\n          e.preventDefault();\r\n          setShowDropdown(false);\r\n          break;\r\n      }\r\n    } else if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      onSubmit();\r\n    }\r\n  };\r\n\r\n  // Close dropdown on click outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (\r\n        dropdownRef.current &&\r\n        !dropdownRef.current.contains(e.target as Node) &&\r\n        inputRef.current &&\r\n        !inputRef.current.contains(e.target as Node)\r\n      ) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Scroll selected item into view\r\n  useEffect(() => {\r\n    if (showDropdown && dropdownRef.current) {\r\n      const selectedElement = dropdownRef.current.children[selectedIndex] as HTMLElement;\r\n      if (selectedElement) {\r\n        selectedElement.scrollIntoView({ block: 'nearest' });\r\n      }\r\n    }\r\n  }, [selectedIndex, showDropdown]);\r\n\r\n  return (\r\n    <div className=\"flex items-start gap-2\">\r\n      {/* Current User Avatar */}\r\n      {currentUser && (\r\n        <div\r\n          className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\r\n          style={{ backgroundColor: currentUser.color || '#8B5CF6' }}\r\n        >\r\n          {currentUser.name?.slice(0, 2).toUpperCase() || 'U'}\r\n        </div>\r\n      )}\r\n\r\n      <div className={cn(\r\n        \"flex-1 relative\",\r\n      )}>\r\n        <div className={cn(\r\n          \"flex items-center gap-2 px-3 py-2 rounded-lg\",\r\n          isDark ? \"bg-white/5\" : \"bg-white border border-gray-200\"\r\n        )}>\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            onSelect={handleSelect}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder={placeholder || (locale === 'es' ? 'Escribe un comentario...' : 'Write a comment...')}\r\n            disabled={disabled || isSubmitting}\r\n            className={cn(\r\n              \"flex-1 bg-transparent text-sm outline-none\",\r\n              isDark ? \"text-white placeholder:text-[#6B7280]\" : \"text-gray-900 placeholder:text-gray-400\",\r\n              (disabled || isSubmitting) && \"opacity-50\"\r\n            )}\r\n          />\r\n          <button\r\n            onClick={onSubmit}\r\n            disabled={isSubmitting || !value.trim() || disabled}\r\n            className={cn(\r\n              \"p-1.5 rounded transition-colors\",\r\n              value.trim() && !disabled\r\n                ? (isDark ? \"bg-blue-500 text-white hover:bg-blue-600\" : \"bg-blue-500 text-white hover:bg-blue-600\")\r\n                : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\"),\r\n              isSubmitting && \"opacity-50 cursor-not-allowed\"\r\n            )}\r\n          >\r\n            {isSubmitting ? (\r\n              <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n            ) : (\r\n              <Send className=\"w-4 h-4\" />\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Autocomplete Dropdown */}\r\n        <AnimatePresence>\r\n          {showDropdown && filteredUsers.length > 0 && (\r\n            <motion.div\r\n              ref={dropdownRef}\r\n              initial={{ opacity: 0, y: 5 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: 5 }}\r\n              className={cn(\r\n                \"absolute bottom-full left-0 right-0 mb-1 py-1 rounded-lg shadow-xl z-50\",\r\n                \"max-h-[200px] overflow-y-auto\",\r\n                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\r\n              )}\r\n            >\r\n              {filteredUsers.map((user, index) => (\r\n                <button\r\n                  key={user.id}\r\n                  type=\"button\"\r\n                  onClick={() => insertMention(user)}\r\n                  className={cn(\r\n                    \"w-full flex items-center gap-3 px-3 py-2 text-left transition-colors\",\r\n                    index === selectedIndex\r\n                      ? (isDark ? \"bg-white/10\" : \"bg-gray-100\")\r\n                      : (isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\")\r\n                  )}\r\n                >\r\n                  <div\r\n                    className=\"w-7 h-7 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\r\n                    style={{ backgroundColor: user.color || '#8B5CF6' }}\r\n                  >\r\n                    {getInitials(user.name)}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <p className={cn(\r\n                      \"text-sm font-medium truncate\",\r\n                      isDark ? \"text-white\" : \"text-gray-900\"\r\n                    )}>\r\n                      {user.name}\r\n                    </p>\r\n                    {user.email && (\r\n                      <p className={cn(\r\n                        \"text-xs truncate\",\r\n                        isDark ? \"text-[#6B7280]\" : \"text-gray-500\"\r\n                      )}>\r\n                        {user.email}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Render comment content with highlighted mentions\r\n */\r\nexport function CommentContent({\r\n  content,\r\n  theme = 'dark'\r\n}: {\r\n  content: string;\r\n  theme?: 'dark' | 'light';\r\n}) {\r\n  const isDark = theme === 'dark';\r\n  const parts: { type: 'text' | 'mention'; value: string }[] = [];\r\n  const mentionRegex = /@(\\S+)/g;\r\n  let lastIndex = 0;\r\n  let match;\r\n\r\n  while ((match = mentionRegex.exec(content)) !== null) {\r\n    if (match.index > lastIndex) {\r\n      parts.push({\r\n        type: 'text',\r\n        value: content.slice(lastIndex, match.index),\r\n      });\r\n    }\r\n    parts.push({\r\n      type: 'mention',\r\n      value: match[0],\r\n    });\r\n    lastIndex = match.index + match[0].length;\r\n  }\r\n\r\n  if (lastIndex < content.length) {\r\n    parts.push({\r\n      type: 'text',\r\n      value: content.slice(lastIndex),\r\n    });\r\n  }\r\n\r\n  return (\r\n    <span className=\"whitespace-pre-wrap break-words\">\r\n      {parts.map((part, index) => {\r\n        if (part.type === 'mention') {\r\n          return (\r\n            <span\r\n              key={index}\r\n              className={cn(\r\n                \"inline-flex items-center px-1 py-0.5 rounded\",\r\n                \"font-medium text-sm\",\r\n                isDark\r\n                  ? \"bg-blue-500/20 text-blue-400\"\r\n                  : \"bg-blue-100 text-blue-700\"\r\n              )}\r\n            >\r\n              {part.value}\r\n            </span>\r\n          );\r\n        }\r\n        return <span key={index}>{part.value}</span>;\r\n      })}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default MentionInput;\r\n","/**\r\n * TagPicker - ClickUp-style tag selector for tasks\r\n * v0.17.158: Initial implementation\r\n *\r\n * Features:\r\n * - Search existing tags\r\n * - Create new tags inline\r\n * - Color picker for new tags\r\n * - Multiple selection\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Tag, Plus, X, Check, ChevronDown } from 'lucide-react';\r\nimport { TaskTag } from './types';\r\n\r\n// Predefined tag colors (ClickUp-style palette)\r\nconst TAG_COLORS = [\r\n  '#EF4444', // Red\r\n  '#F97316', // Orange\r\n  '#F59E0B', // Amber\r\n  '#EAB308', // Yellow\r\n  '#84CC16', // Lime\r\n  '#22C55E', // Green\r\n  '#10B981', // Emerald\r\n  '#14B8A6', // Teal\r\n  '#06B6D4', // Cyan\r\n  '#0EA5E9', // Sky\r\n  '#3B82F6', // Blue\r\n  '#6366F1', // Indigo\r\n  '#8B5CF6', // Violet\r\n  '#A855F7', // Purple\r\n  '#D946EF', // Fuchsia\r\n  '#EC4899', // Pink\r\n];\r\n\r\ninterface TagPickerProps {\r\n  /** Currently selected tags on the task */\r\n  selectedTags: TaskTag[];\r\n  /** All available tags in the workspace */\r\n  availableTags: TaskTag[];\r\n  /** Callback when tags change */\r\n  onChange: (tags: TaskTag[]) => void;\r\n  /** Callback to create a new tag */\r\n  onCreateTag?: (name: string, color: string) => Promise<TaskTag | null>;\r\n  /** Theme colors */\r\n  theme: any;\r\n  /** Disabled state */\r\n  disabled?: boolean;\r\n  /** Compact mode (pill style) */\r\n  compact?: boolean;\r\n}\r\n\r\nexport function TagPicker({\r\n  selectedTags,\r\n  availableTags,\r\n  onChange,\r\n  onCreateTag,\r\n  theme,\r\n  disabled = false,\r\n  compact: _compact = true,\r\n}: TagPickerProps) {\r\n  void _compact; // Suppress unused variable warning\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const [newTagColor, setNewTagColor] = useState(TAG_COLORS[10] || '#3B82F6'); // Default blue\r\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0 });\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Filter available tags based on search\r\n  const filteredTags = availableTags.filter(tag =>\r\n    tag.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  // Check if search query matches an existing tag\r\n  const exactMatch = availableTags.some(\r\n    tag => tag.name.toLowerCase() === searchQuery.toLowerCase()\r\n  );\r\n\r\n  // Calculate dropdown position when opening\r\n  useEffect(() => {\r\n    if (isOpen && buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect();\r\n      setDropdownPosition({\r\n        top: rect.bottom + 6,\r\n        left: rect.left,\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Close on click outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as Node;\r\n      const isInsideContainer = containerRef.current?.contains(target);\r\n      const isInsideDropdown = dropdownRef.current?.contains(target);\r\n\r\n      if (!isInsideContainer && !isInsideDropdown) {\r\n        setIsOpen(false);\r\n        setSearchQuery('');\r\n        setIsCreating(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return undefined;\r\n  }, [isOpen]);\r\n\r\n  // Focus input when opening\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleToggleTag = (tag: TaskTag) => {\r\n    const isSelected = selectedTags.some(t => t.id === tag.id);\r\n    if (isSelected) {\r\n      onChange(selectedTags.filter(t => t.id !== tag.id));\r\n    } else {\r\n      onChange([...selectedTags, tag]);\r\n    }\r\n  };\r\n\r\n  const handleCreateTag = async () => {\r\n    if (!onCreateTag || !searchQuery.trim()) return;\r\n\r\n    setIsCreating(true);\r\n    try {\r\n      const newTag = await onCreateTag(searchQuery.trim(), newTagColor);\r\n      if (newTag) {\r\n        onChange([...selectedTags, newTag]);\r\n        setSearchQuery('');\r\n        setNewTagColor(TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)] || '#3B82F6');\r\n      }\r\n    } finally {\r\n      setIsCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveTag = (tagId: string, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    onChange(selectedTags.filter(t => t.id !== tagId));\r\n  };\r\n\r\n  const pillStyle = {\r\n    backgroundColor: `${theme.textTertiary}15`,\r\n    border: `1px solid ${theme.borderLight}`,\r\n    color: theme.textSecondary,\r\n  };\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"relative\">\r\n      {/* Trigger Button */}\r\n      <button\r\n        ref={buttonRef}\r\n        type=\"button\"\r\n        onClick={() => !disabled && setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm transition-all hover:opacity-80\"\r\n        style={pillStyle}\r\n        disabled={disabled}\r\n      >\r\n        <Tag className=\"w-3.5 h-3.5\" />\r\n        {selectedTags.length > 0 ? (\r\n          <div className=\"flex items-center gap-1\">\r\n            {selectedTags.slice(0, 2).map(tag => (\r\n              <span\r\n                key={tag.id}\r\n                className=\"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs font-medium\"\r\n                style={{ backgroundColor: `${tag.color}20`, color: tag.color }}\r\n              >\r\n                {tag.name}\r\n              </span>\r\n            ))}\r\n            {selectedTags.length > 2 && (\r\n              <span className=\"text-xs\" style={{ color: theme.textTertiary }}>\r\n                +{selectedTags.length - 2}\r\n              </span>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <span>Agregar</span>\r\n        )}\r\n        <ChevronDown className=\"w-3 h-3\" style={{ color: theme.textTertiary }} />\r\n      </button>\r\n\r\n      {/* Dropdown - rendered via Portal to escape overflow:hidden containers */}\r\n      {typeof document !== 'undefined' && createPortal(\r\n        <AnimatePresence>\r\n          {isOpen && (\r\n            <motion.div\r\n              ref={dropdownRef}\r\n              initial={{ opacity: 0, y: -5 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -5 }}\r\n              transition={{ duration: 0.12 }}\r\n              className=\"rounded-lg min-w-[240px]\"\r\n              style={{\r\n                position: 'fixed',\r\n                top: dropdownPosition.top,\r\n                left: dropdownPosition.left,\r\n                zIndex: 99999,\r\n                backgroundColor: theme.bgPrimary,\r\n                border: `1px solid ${theme.border}`,\r\n                boxShadow: '0 4px 20px rgba(0, 0, 0, 0.25)',\r\n              }}\r\n            >\r\n            {/* Search Input */}\r\n            <div className=\"p-2 border-b\" style={{ borderColor: theme.border }}>\r\n              <input\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder=\"Buscar o crear etiqueta...\"\r\n                className=\"w-full px-3 py-1.5 text-sm rounded-md outline-none\"\r\n                style={{\r\n                  backgroundColor: theme.bgSecondary,\r\n                  color: theme.textPrimary,\r\n                  border: `1px solid ${theme.borderLight}`,\r\n                }}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && searchQuery.trim() && !exactMatch && onCreateTag) {\r\n                    handleCreateTag();\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {/* Selected Tags */}\r\n            {selectedTags.length > 0 && (\r\n              <div className=\"p-2 border-b\" style={{ borderColor: theme.border }}>\r\n                <p className=\"text-xs mb-1.5\" style={{ color: theme.textTertiary }}>\r\n                  Seleccionadas\r\n                </p>\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                  {selectedTags.map(tag => (\r\n                    <span\r\n                      key={tag.id}\r\n                      className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium cursor-pointer hover:opacity-80\"\r\n                      style={{ backgroundColor: `${tag.color}20`, color: tag.color }}\r\n                      onClick={(e) => handleRemoveTag(tag.id, e)}\r\n                    >\r\n                      {tag.name}\r\n                      <X className=\"w-3 h-3\" />\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Available Tags List */}\r\n            <div className=\"max-h-[200px] overflow-y-auto p-1\">\r\n              {filteredTags.length > 0 ? (\r\n                filteredTags.map(tag => {\r\n                  const isSelected = selectedTags.some(t => t.id === tag.id);\r\n                  return (\r\n                    <button\r\n                      key={tag.id}\r\n                      type=\"button\"\r\n                      onClick={() => handleToggleTag(tag)}\r\n                      className=\"w-full flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors\"\r\n                      style={{\r\n                        backgroundColor: isSelected ? `${tag.color}15` : 'transparent',\r\n                        color: theme.textPrimary,\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        if (!isSelected) e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        if (!isSelected) e.currentTarget.style.backgroundColor = 'transparent';\r\n                      }}\r\n                    >\r\n                      <div\r\n                        className=\"w-3 h-3 rounded-full\"\r\n                        style={{ backgroundColor: tag.color }}\r\n                      />\r\n                      <span className=\"flex-1 text-left\">{tag.name}</span>\r\n                      {isSelected && (\r\n                        <Check className=\"w-4 h-4\" style={{ color: tag.color }} />\r\n                      )}\r\n                    </button>\r\n                  );\r\n                })\r\n              ) : searchQuery.trim() ? (\r\n                <div className=\"p-2 text-center text-sm\" style={{ color: theme.textTertiary }}>\r\n                  No se encontraron etiquetas\r\n                </div>\r\n              ) : (\r\n                <div className=\"p-2 text-center text-sm\" style={{ color: theme.textTertiary }}>\r\n                  No hay etiquetas disponibles\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Create New Tag */}\r\n            {searchQuery.trim() && !exactMatch && onCreateTag && (\r\n              <div className=\"p-2 border-t\" style={{ borderColor: theme.border }}>\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <p className=\"text-xs\" style={{ color: theme.textTertiary }}>\r\n                    Crear nueva etiqueta\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Color Picker */}\r\n                <div className=\"flex flex-wrap gap-1 mb-2\">\r\n                  {TAG_COLORS.map(color => (\r\n                    <button\r\n                      key={color}\r\n                      type=\"button\"\r\n                      onClick={() => setNewTagColor(color)}\r\n                      className=\"w-5 h-5 rounded-full transition-transform hover:scale-110\"\r\n                      style={{\r\n                        backgroundColor: color,\r\n                        outline: newTagColor === color ? `2px solid ${color}` : 'none',\r\n                        outlineOffset: '2px',\r\n                      }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Create Button */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCreateTag}\r\n                  disabled={isCreating}\r\n                  className=\"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors\"\r\n                  style={{\r\n                    backgroundColor: newTagColor,\r\n                    color: '#FFFFFF',\r\n                    opacity: isCreating ? 0.7 : 1,\r\n                  }}\r\n                >\r\n                  {isCreating ? (\r\n                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                  ) : (\r\n                    <Plus className=\"w-4 h-4\" />\r\n                  )}\r\n                  Crear \"{searchQuery.trim()}\"\r\n                </button>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n          )}\r\n        </AnimatePresence>,\r\n        document.body\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * TagBadge - Small tag badge for displaying in cards/lists\r\n */\r\nexport function TagBadge({ tag, onRemove, size = 'sm' }: {\r\n  tag: TaskTag;\r\n  onRemove?: () => void;\r\n  size?: 'xs' | 'sm';\r\n}) {\r\n  const sizeClasses = size === 'xs'\r\n    ? 'px-1.5 py-0.5 text-[10px]'\r\n    : 'px-2 py-0.5 text-xs';\r\n\r\n  return (\r\n    <span\r\n      className={`inline-flex items-center gap-1 rounded-full font-medium ${sizeClasses}`}\r\n      style={{ backgroundColor: `${tag.color}20`, color: tag.color }}\r\n    >\r\n      {tag.name}\r\n      {onRemove && (\r\n        <button\r\n          type=\"button\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onRemove();\r\n          }}\r\n          className=\"hover:opacity-70\"\r\n        >\r\n          <X className=\"w-3 h-3\" />\r\n        </button>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n\r\n/**\r\n * TagList - Display list of tags (for cards)\r\n */\r\nexport function TagList({\r\n  tags,\r\n  maxVisible = 3,\r\n  size = 'sm',\r\n}: {\r\n  tags: TaskTag[];\r\n  maxVisible?: number;\r\n  size?: 'xs' | 'sm';\r\n}) {\r\n  if (!tags || tags.length === 0) return null;\r\n\r\n  const visibleTags = tags.slice(0, maxVisible);\r\n  const hiddenCount = tags.length - maxVisible;\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap gap-1\">\r\n      {visibleTags.map(tag => (\r\n        <TagBadge key={tag.id} tag={tag} size={size} />\r\n      ))}\r\n      {hiddenCount > 0 && (\r\n        <span\r\n          className={`inline-flex items-center rounded-full font-medium ${\r\n            size === 'xs' ? 'px-1.5 py-0.5 text-[10px]' : 'px-2 py-0.5 text-xs'\r\n          }`}\r\n          style={{ backgroundColor: 'rgba(100,100,100,0.2)', color: '#9CA3AF' }}\r\n        >\r\n          +{hiddenCount}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ColorPicker Component - v0.17.187\r\n * Professional color selector for tasks with pastel palette\r\n * Fixed: All colors now clickable with pointerEvents none on inner circle\r\n */\r\n\r\nimport { Check } from 'lucide-react';\r\n\r\nexport interface TaskColor {\r\n  name: string;\r\n  value: string;\r\n  light: string;\r\n}\r\n\r\n// v0.17.112: Professional vibrant color palette - all colors are eye-catching\r\nexport const TASK_COLORS: TaskColor[] = [\r\n  { name: 'Azul', value: '#6366F1', light: '#818CF8' },\r\n  { name: 'Prpura', value: '#A855F7', light: '#C084FC' },\r\n  { name: 'Rosa', value: '#EC4899', light: '#F472B6' },\r\n  { name: 'Rojo', value: '#EF4444', light: '#F87171' },\r\n  { name: 'Naranja', value: '#F59E0B', light: '#FBBF24' },\r\n  { name: 'Amarillo', value: '#EAB308', light: '#FACC15' },\r\n  { name: 'Lima', value: '#84CC16', light: '#A3E635' },\r\n  { name: 'Verde', value: '#10B981', light: '#34D399' },\r\n  { name: 'Esmeralda', value: '#059669', light: '#10B981' },\r\n  { name: 'Cyan', value: '#06B6D4', light: '#22D3EE' },\r\n  { name: 'Azul Cielo', value: '#0EA5E9', light: '#38BDF8' },\r\n  { name: 'ndigo', value: '#4F46E5', light: '#6366F1' },\r\n  { name: 'Violeta', value: '#8B5CF6', light: '#A78BFA' },\r\n  { name: 'Fucsia', value: '#D946EF', light: '#E879F9' },\r\n  { name: 'Coral', value: '#F97316', light: '#FB923C' },\r\n  { name: 'Magenta', value: '#E11D48', light: '#FB7185' },\r\n];\r\n\r\ninterface ColorPickerProps {\r\n  value?: string;\r\n  onChange: (color: string) => void;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function ColorPicker({ value = '#6366F1', onChange, disabled = false }: ColorPickerProps) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {/* v0.17.187: Grid with larger click area (28px) and small visual circle (16px) */}\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(6, 28px)', gap: '2px' }}>\r\n        {TASK_COLORS.map((color) => {\r\n          const isSelected = value === color.value;\r\n\r\n          return (\r\n            <button\r\n              key={color.value}\r\n              type=\"button\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (!disabled) onChange(color.value);\r\n              }}\r\n              style={{\r\n                width: '28px',\r\n                height: '28px',\r\n                borderRadius: '6px',\r\n                backgroundColor: 'transparent',\r\n                cursor: disabled ? 'not-allowed' : 'pointer',\r\n                border: 'none',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                padding: 0,\r\n                opacity: disabled ? 0.5 : 1,\r\n              }}\r\n              title={color.name}\r\n              disabled={disabled}\r\n            >\r\n              <span\r\n                style={{\r\n                  width: '16px',\r\n                  height: '16px',\r\n                  borderRadius: '50%',\r\n                  backgroundColor: color.value,\r\n                  outline: isSelected ? `2px solid ${color.value}` : 'none',\r\n                  outlineOffset: '2px',\r\n                  pointerEvents: 'none',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                }}\r\n              >\r\n                {isSelected && (\r\n                  <Check className=\"w-3 h-3 text-white drop-shadow-md\" strokeWidth={3} style={{ pointerEvents: 'none' }} />\r\n                )}\r\n              </span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Color name label */}\r\n      {value && (\r\n        <div className=\"text-xs text-center font-medium\" style={{ color: value }}>\r\n          {TASK_COLORS.find(c => c.value === value)?.name || 'Personalizado'}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\n * TaskDetailModal Component\n * Shared task detail modal for Calendar, Kanban, and Gantt views\n * ClickUp-style full-screen modal with all task fields\n * @version 0.17.401\n *\n * v0.17.401: Added @mentions support in comments\n * v0.17.253: Editable task name with debounce auto-save\n */\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  CheckCircle2,\n  Circle,\n  X,\n  Flag,\n  User,\n  CalendarDays,\n  Clock,\n  Tag,\n  Link2,\n  FileText,\n  MoreHorizontal,\n  Sparkles,\n  Plus,\n  Maximize2,\n  ListChecks,\n  Upload,\n  MessageSquare,\n  Check,\n  ChevronDown,\n  Trash2,\n  File,\n  Image,\n  FileText as FileTextIcon,\n  Palette,\n  Diamond,\n} from 'lucide-react';\nimport { MentionInput, CommentContent, extractMentionedUserIds } from './MentionInput';\nimport type { MentionUser } from './MentionInput';\nimport type { Task, Assignee, TaskTag } from '../Gantt/types';\nimport type { Card, Attachment } from '../../types';\nimport { cn } from '../../utils';\nimport { TagPicker } from '../Gantt/TagPicker';\nimport { TASK_COLORS } from '../Gantt/ColorPicker';\n\n// Type for item that can be either Task or Card\nexport type TaskOrCard = Task | Card;\n\n// Helper to convert Card to Task format for internal use\nfunction normalizeToTask(item: TaskOrCard, availableUsers: Assignee[] = []): Task {\n  // Check if it's a Card (has 'title' instead of 'name')\n  if ('title' in item && !('name' in item)) {\n    const card = item as Card;\n    // Map card assignedUserIds to Task assignees format\n    // Resolve IDs to actual user info from availableUsers\n    const assignees: Assignee[] = (card.assignedUserIds || []).map(id => {\n      // Try to find user by ID in availableUsers\n      const user = availableUsers.find(u => (u as any).id === id);\n      if (user) {\n        return user;\n      }\n      // Fallback if user not found - but don't show as assignee\n      return null;\n    }).filter((a): a is Assignee => a !== null);\n\n    return {\n      id: card.id,\n      name: card.title,\n      startDate: card.startDate ? new Date(card.startDate) : undefined,\n      endDate: card.endDate ? new Date(card.endDate) : undefined,\n      progress: card.progress || 0,\n      status: card.columnId as any,\n      priority: card.priority?.toLowerCase() as any,\n      assignees,\n      dependencies: Array.isArray(card.dependencies)\n        ? card.dependencies.map(d => typeof d === 'string' ? d : d.taskId)\n        : [],\n      tags: card.tags,\n      subtasks: card.subtasks?.map(s => ({\n        id: s.id,\n        name: s.title,\n        progress: s.completed ? 100 : 0,\n        startDate: new Date(),\n        endDate: new Date(),\n      })),\n      color: card.color,\n      description: card.description,\n    } as Task;\n  }\n  return item as Task;\n}\n\n// Helper to convert Task back to Card format\nfunction taskToCard(task: Task, originalCard: Card): Card {\n  return {\n    ...originalCard,\n    title: task.name,\n    startDate: task.startDate,\n    endDate: task.endDate,\n    progress: task.progress,\n    priority: task.priority?.toUpperCase() as any,\n    tags: task.tags,\n    description: (task as any).description,\n    color: task.color,\n    columnId: task.status as string,\n    // Keep original assignedUserIds - assignees in Task don't have IDs\n    // The original card's assignedUserIds remain unchanged unless consumer updates them\n    assignedUserIds: originalCard.assignedUserIds,\n  };\n}\n\n/** Comment type for activity panel */\nexport interface TaskComment {\n  id: string;\n  taskId: string;\n  userId: string;\n  content: string;\n  createdAt: Date | string;\n  updatedAt?: Date | string;\n  user?: {\n    id: string;\n    name: string;\n    email?: string;\n    avatarUrl?: string;\n    color?: string;\n  };\n}\n\nexport interface TaskDetailModalProps {\n  /** Task or Card to display */\n  task: TaskOrCard | null;\n  /** Whether modal is open */\n  isOpen: boolean;\n  /** Close callback */\n  onClose: () => void;\n  /** Update task callback (receives Task type) */\n  onTaskUpdate?: (task: Task) => void;\n  /** Update card callback (receives Card type) - use this for Kanban */\n  onCardUpdate?: (card: Card) => void;\n  /** Theme */\n  theme?: 'dark' | 'light';\n  /** Locale */\n  locale?: 'en' | 'es';\n  /** Available users for assignment */\n  availableUsers?: Assignee[];\n  /** Available tags in workspace for selection */\n  availableTags?: TaskTag[];\n  /** Callback to create a new tag */\n  onCreateTag?: (name: string, color: string) => Promise<TaskTag | null>;\n  /** v0.17.241: Attachments for the task */\n  attachments?: Attachment[];\n  /** v0.17.241: Callback when files are dropped/selected for upload */\n  onUploadAttachments?: (taskId: string, files: File[]) => Promise<void>;\n  /** v0.17.241: Callback to delete an attachment */\n  onDeleteAttachment?: (attachmentId: string) => Promise<void>;\n  /** v0.17.243: Available tasks for dependencies selection */\n  availableTasks?: Task[];\n  /** v0.17.252: Comments for activity panel */\n  comments?: TaskComment[];\n  /** v0.17.401: Callback to add a new comment (with optional mentionedUserIds) */\n  onAddComment?: (taskId: string, content: string, mentionedUserIds?: string[]) => Promise<void>;\n  /** v0.17.252: Current user info for displaying comments */\n  currentUser?: {\n    id: string;\n    name: string;\n    avatarUrl?: string;\n    color?: string;\n  };\n  /** v0.17.401: Users available for @mentions in comments */\n  mentionableUsers?: MentionUser[];\n}\n\n/**\n * TaskDetailModal - ClickUp style full-screen task detail\n */\nexport function TaskDetailModal({\n  task,\n  isOpen,\n  onClose,\n  onTaskUpdate,\n  onCardUpdate,\n  theme = 'dark',\n  locale = 'es',\n  availableUsers = [],\n  availableTags = [],\n  onCreateTag,\n  attachments = [],\n  onUploadAttachments,\n  onDeleteAttachment,\n  availableTasks = [],\n  comments = [],\n  onAddComment,\n  currentUser,\n  mentionableUsers = [],\n}: TaskDetailModalProps) {\n  const isDark = theme === 'dark';\n\n  // Theme object for TagPicker\n  const tagPickerTheme = {\n    textTertiary: isDark ? '#6B7280' : '#9CA3AF',\n    textSecondary: isDark ? '#9CA3AF' : '#6B7280',\n    textPrimary: isDark ? '#FFFFFF' : '#111827',\n    borderLight: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n    border: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n    bgPrimary: isDark ? '#1A1D25' : '#FFFFFF',\n    bgSecondary: isDark ? '#0F1117' : '#F9FAFB',\n    hoverBg: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)',\n  };\n\n  // Check if original item is a Card\n  const isCard = task && 'title' in task && !('name' in task);\n  const originalItem = task;\n\n  // Local state for editing (always use Task format internally)\n  const [selectedTask, setSelectedTask] = useState<Task | null>(task ? normalizeToTask(task, availableUsers) : null);\n  const [showStatusDropdown, setShowStatusDropdown] = useState(false);\n  const [showPriorityDropdown, setShowPriorityDropdown] = useState(false);\n  const [showAssigneesDropdown, setShowAssigneesDropdown] = useState(false);\n  const [showDatePicker, setShowDatePicker] = useState<'start' | 'end' | null>(null);\n  const [datePickerMonth, setDatePickerMonth] = useState(new Date());\n  const [editingProgress, setEditingProgress] = useState(false);\n  const [showDependenciesDropdown, setShowDependenciesDropdown] = useState(false);\n  const [dependencySearch, setDependencySearch] = useState('');\n  const [showColorPicker, setShowColorPicker] = useState(false);\n\n  // v0.17.241: Attachment drag state\n  const [isDraggingFile, setIsDraggingFile] = useState(false);\n  const [isUploadingFiles, setIsUploadingFiles] = useState(false);\n\n  // v0.17.251: Local description state with debounce for auto-save\n  const [localDescription, setLocalDescription] = useState('');\n  const descriptionDebounceRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // v0.17.253: Local task name state with debounce for auto-save\n  const [localTaskName, setLocalTaskName] = useState('');\n  const taskNameDebounceRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // v0.17.252: Comment input state\n  const [commentText, setCommentText] = useState('');\n  const [isSubmittingComment, setIsSubmittingComment] = useState(false);\n\n  // Update local state when task prop changes\n  useEffect(() => {\n    if (task) {\n      const normalizedTask = normalizeToTask(task, availableUsers);\n      setSelectedTask(normalizedTask);\n      setLocalDescription((normalizedTask as any).description || '');\n      setLocalTaskName(normalizedTask.name || '');\n    }\n  }, [task?.id, availableUsers]);\n\n  // Cleanup debounce timers on unmount\n  useEffect(() => {\n    return () => {\n      if (descriptionDebounceRef.current) {\n        clearTimeout(descriptionDebounceRef.current);\n      }\n      if (taskNameDebounceRef.current) {\n        clearTimeout(taskNameDebounceRef.current);\n      }\n    };\n  }, []);\n\n  // Handle update - emit in correct format\n  const handleUpdate = useCallback((updatedTask: Task) => {\n    setSelectedTask(updatedTask);\n\n    // If original was a Card, convert back and call onCardUpdate\n    if (isCard && onCardUpdate && originalItem) {\n      onCardUpdate(taskToCard(updatedTask, originalItem as Card));\n    } else if (onTaskUpdate) {\n      onTaskUpdate(updatedTask);\n    }\n  }, [isCard, originalItem, onCardUpdate, onTaskUpdate]);\n\n  // Close all dropdowns\n  const closeAllDropdowns = useCallback(() => {\n    setShowStatusDropdown(false);\n    setShowPriorityDropdown(false);\n    setShowAssigneesDropdown(false);\n    setShowDatePicker(null);\n    setShowDependenciesDropdown(false);\n    setDependencySearch('');\n    setShowColorPicker(false);\n  }, []);\n\n  // Update task field\n  const updateTaskField = useCallback((field: keyof Task, value: any) => {\n    if (!selectedTask) return;\n    const updatedTask = { ...selectedTask, [field]: value };\n    handleUpdate(updatedTask);\n  }, [selectedTask, handleUpdate]);\n\n  // v0.17.251: Handle description change with debounce (auto-save after typing stops)\n  const handleDescriptionChange = useCallback((value: string) => {\n    // Update local state immediately for responsive UI\n    setLocalDescription(value);\n\n    // Clear any existing debounce timer\n    if (descriptionDebounceRef.current) {\n      clearTimeout(descriptionDebounceRef.current);\n    }\n\n    // Set new debounce timer (800ms delay before saving)\n    descriptionDebounceRef.current = setTimeout(() => {\n      if (selectedTask) {\n        const updatedTask = { ...selectedTask, description: value } as Task;\n        handleUpdate(updatedTask);\n      }\n    }, 800);\n  }, [selectedTask, handleUpdate]);\n\n  // v0.17.253: Handle task name change with debounce (auto-save after typing stops)\n  const handleTaskNameChange = useCallback((value: string) => {\n    // Update local state immediately for responsive UI\n    setLocalTaskName(value);\n\n    // Clear any existing debounce timer\n    if (taskNameDebounceRef.current) {\n      clearTimeout(taskNameDebounceRef.current);\n    }\n\n    // Set new debounce timer (800ms delay before saving)\n    taskNameDebounceRef.current = setTimeout(() => {\n      if (selectedTask && value.trim()) {\n        const updatedTask = { ...selectedTask, name: value.trim() };\n        handleUpdate(updatedTask);\n      }\n    }, 800);\n  }, [selectedTask, handleUpdate]);\n\n  // v0.17.401: Handle submit comment with mentions support\n  const handleSubmitComment = useCallback(async () => {\n    if (!selectedTask || !commentText.trim() || !onAddComment) return;\n\n    setIsSubmittingComment(true);\n    try {\n      // Extract mentioned user IDs from the comment text\n      const mentionedUserIds = extractMentionedUserIds(commentText, mentionableUsers);\n      await onAddComment(selectedTask.id, commentText.trim(), mentionedUserIds.length > 0 ? mentionedUserIds : undefined);\n      setCommentText('');\n    } finally {\n      setIsSubmittingComment(false);\n    }\n  }, [selectedTask, commentText, onAddComment, mentionableUsers]);\n\n  // v0.17.252: Format comment date\n  const formatCommentDate = useCallback((date: Date | string) => {\n    const d = typeof date === 'string' ? new Date(date) : date;\n    const now = new Date();\n    const diffMs = now.getTime() - d.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return locale === 'es' ? 'Ahora' : 'Just now';\n    if (diffMins < 60) return locale === 'es' ? `Hace ${diffMins} min` : `${diffMins}m ago`;\n    if (diffHours < 24) return locale === 'es' ? `Hace ${diffHours}h` : `${diffHours}h ago`;\n    if (diffDays < 7) return locale === 'es' ? `Hace ${diffDays}d` : `${diffDays}d ago`;\n\n    return d.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n  }, [locale]);\n\n  // Update task status\n  const updateTaskStatus = useCallback((statusId: string) => {\n    if (!selectedTask) return;\n    let progress = selectedTask.progress || 0;\n    if (statusId === 'completed') progress = 100;\n    else if (statusId === 'in-progress' && progress === 0) progress = 10;\n    else if (statusId === 'todo') progress = 0;\n\n    const updatedTask = { ...selectedTask, status: statusId as any, progress };\n    handleUpdate(updatedTask);\n    setShowStatusDropdown(false);\n  }, [selectedTask, handleUpdate]);\n\n  // Update task dates\n  const updateTaskDates = useCallback((startDate: Date | undefined, endDate: Date | undefined) => {\n    if (!selectedTask) return;\n    const updatedTask = { ...selectedTask, startDate, endDate };\n    handleUpdate(updatedTask);\n  }, [selectedTask, handleUpdate]);\n\n  // Generate calendar days for date picker\n  const getDatePickerDays = useCallback(() => {\n    const year = datePickerMonth.getFullYear();\n    const month = datePickerMonth.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startDayOfWeek = firstDay.getDay();\n\n    const days: { date: Date; isCurrentMonth: boolean }[] = [];\n\n    // Previous month days\n    const prevMonthLastDay = new Date(year, month, 0).getDate();\n    for (let i = startDayOfWeek - 1; i >= 0; i--) {\n      days.push({\n        date: new Date(year, month - 1, prevMonthLastDay - i),\n        isCurrentMonth: false,\n      });\n    }\n\n    // Current month days\n    for (let i = 1; i <= daysInMonth; i++) {\n      days.push({\n        date: new Date(year, month, i),\n        isCurrentMonth: true,\n      });\n    }\n\n    // Next month days\n    const remainingDays = 42 - days.length;\n    for (let i = 1; i <= remainingDays; i++) {\n      days.push({\n        date: new Date(year, month + 1, i),\n        isCurrentMonth: false,\n      });\n    }\n\n    return days;\n  }, [datePickerMonth]);\n\n  // v0.17.241: Handle file drop for attachments\n  const handleFileDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(false);\n\n    if (!selectedTask || !onUploadAttachments) return;\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length === 0) return;\n\n    setIsUploadingFiles(true);\n    try {\n      await onUploadAttachments(selectedTask.id, files);\n    } finally {\n      setIsUploadingFiles(false);\n    }\n  }, [selectedTask, onUploadAttachments]);\n\n  // v0.17.241: Handle file input change\n  const handleFileInputChange = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!selectedTask || !onUploadAttachments || !e.target.files) return;\n\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n\n    setIsUploadingFiles(true);\n    try {\n      await onUploadAttachments(selectedTask.id, files);\n    } finally {\n      setIsUploadingFiles(false);\n    }\n    // Reset input\n    e.target.value = '';\n  }, [selectedTask, onUploadAttachments]);\n\n  // v0.17.241: Handle drag events\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(false);\n  }, []);\n\n  // v0.17.241: Format file size\n  const formatFileSize = useCallback((bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  }, []);\n\n  // v0.17.241: Get file icon based on type\n  const getFileIcon = useCallback((mimeType: string) => {\n    if (mimeType.startsWith('image/')) return Image;\n    if (mimeType.includes('pdf') || mimeType.includes('document')) return FileTextIcon;\n    return File;\n  }, []);\n\n  if (!isOpen || !selectedTask) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && selectedTask && (\n        <>\n          {/* Overlay */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-40\"\n          />\n          {/* Modal - Full screen like ClickUp */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.98 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.98 }}\n            className={cn(\n              \"fixed inset-4 md:inset-8 lg:inset-12 rounded-xl shadow-2xl z-50 flex overflow-hidden\",\n              isDark ? \"bg-[#1A1D25]\" : \"bg-white\"\n            )}\n          >\n            {/* Main Content */}\n            <div className=\"flex-1 flex flex-col overflow-hidden\">\n              {/* Header */}\n              <div className={cn(\"px-6 py-3 border-b flex items-center gap-3\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                <div className=\"flex items-center gap-2\">\n                  <Circle className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")} />\n                  <span className={cn(\"text-xs px-2 py-0.5 rounded\", isDark ? \"bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 text-gray-600\")}>\n                    {locale === 'es' ? 'Tarea' : 'Task'} \n                  </span>\n                  <span className={cn(\"text-xs font-mono\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                    {selectedTask.id.slice(0, 8)}\n                  </span>\n                  <button className={cn(\n                    \"flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium transition-colors\",\n                    isDark ? \"bg-purple-500/20 text-purple-400 hover:bg-purple-500/30\" : \"bg-purple-100 text-purple-700 hover:bg-purple-200\"\n                  )}>\n                    <Sparkles className=\"w-3 h-3\" />\n                    Ask AI\n                  </button>\n                </div>\n                <div className=\"flex-1\" />\n                <button className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}>\n                  <Maximize2 className=\"w-4 h-4\" />\n                </button>\n                <button className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}>\n                  <MoreHorizontal className=\"w-5 h-5\" />\n                </button>\n                <button\n                  onClick={onClose}\n                  className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n\n              {/* Task Title with checkbox - v0.17.253: Editable name */}\n              <div className=\"px-6 py-4\">\n                <div className=\"flex items-start gap-3\">\n                  <button\n                    onClick={() => {\n                      const newProgress = selectedTask.progress === 100 ? 0 : 100;\n                      const newStatus = newProgress === 100 ? 'completed' : 'todo';\n                      const updatedTask = { ...selectedTask, progress: newProgress, status: newStatus as any };\n                      handleUpdate(updatedTask);\n                    }}\n                    className={cn(\n                      \"mt-2 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0\",\n                      selectedTask.progress === 100\n                        ? \"bg-green-500 border-green-500\"\n                        : isDark ? \"border-white/30 hover:border-white/50\" : \"border-gray-300 hover:border-gray-400\"\n                    )}\n                  >\n                    {selectedTask.progress === 100 && (\n                      <CheckCircle2 className=\"w-3 h-3 text-white\" />\n                    )}\n                  </button>\n                  <input\n                    type=\"text\"\n                    value={localTaskName}\n                    onChange={(e) => handleTaskNameChange(e.target.value)}\n                    placeholder={locale === 'es' ? 'Nombre de la tarea...' : 'Task name...'}\n                    className={cn(\n                      \"text-xl font-semibold flex-1 bg-transparent outline-none border-none px-0 py-0\",\n                      \"focus:ring-0 focus:outline-none\",\n                      selectedTask.progress === 100\n                        ? \"line-through text-[#6B7280]\"\n                        : (isDark ? \"text-white placeholder:text-[#6B7280]\" : \"text-gray-900 placeholder:text-gray-400\")\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Fields Grid */}\n              <div className=\"px-6 pb-6 flex-1 overflow-y-auto overflow-x-visible\">\n                <div className=\"grid grid-cols-2 gap-x-12 gap-y-5\">\n                  {/* Status */}\n                  <div className=\"flex items-center gap-3 relative\">\n                    <CheckCircle2 className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Estado' : 'Status'}\n                    </span>\n                    <button\n                      onClick={() => {\n                        closeAllDropdowns();\n                        setShowStatusDropdown(!showStatusDropdown);\n                      }}\n                      className={cn(\n                        \"text-xs px-2 py-1 rounded font-medium cursor-pointer transition-all hover:ring-2 hover:ring-white/20\",\n                        selectedTask.progress === 100 || selectedTask.status === 'completed'\n                          ? \"bg-green-500/20 text-green-400\"\n                          : (selectedTask.progress && selectedTask.progress > 0) || selectedTask.status === 'in-progress'\n                            ? \"bg-blue-500/20 text-blue-400\"\n                            : isDark ? \"bg-white/10 text-white\" : \"bg-gray-100 text-gray-700\"\n                      )}\n                    >\n                      {selectedTask.progress === 100 || selectedTask.status === 'completed'\n                        ? (locale === 'es' ? 'COMPLETADO' : 'DONE')\n                        : (selectedTask.progress && selectedTask.progress > 0) || selectedTask.status === 'in-progress'\n                          ? (locale === 'es' ? 'EN PROGRESO' : 'IN PROGRESS')\n                          : (locale === 'es' ? 'POR HACER' : 'TO DO')}\n                    </button>\n                    {/* Status Dropdown */}\n                    <AnimatePresence>\n                      {showStatusDropdown && (\n                        <>\n                          <div className=\"fixed inset-0 z-40\" onClick={() => setShowStatusDropdown(false)} />\n                          <motion.div\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -5 }}\n                            className={cn(\n                              \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[140px]\",\n                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                            )}\n                          >\n                            {[\n                              { id: 'todo', label: locale === 'es' ? 'Por hacer' : 'To Do', color: 'bg-gray-400' },\n                              { id: 'in-progress', label: locale === 'es' ? 'En progreso' : 'In Progress', color: 'bg-blue-500' },\n                              { id: 'completed', label: locale === 'es' ? 'Completado' : 'Done', color: 'bg-green-500' },\n                            ].map((status) => (\n                              <button\n                                key={status.id}\n                                onClick={() => updateTaskStatus(status.id)}\n                                className={cn(\n                                  \"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors text-left\",\n                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                  selectedTask.status === status.id && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                )}\n                              >\n                                <span className={cn(\"w-2 h-2 rounded-full\", status.color)} />\n                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{status.label}</span>\n                              </button>\n                            ))}\n                          </motion.div>\n                        </>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Assignees */}\n                  <div className=\"flex items-center gap-3 relative\">\n                    <User className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Asignados' : 'Assignees'}\n                    </span>\n                    <button\n                      onClick={() => {\n                        closeAllDropdowns();\n                        setShowAssigneesDropdown(!showAssigneesDropdown);\n                      }}\n                      className={cn(\n                        \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                        isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                      )}\n                    >\n                      {selectedTask.assignees && selectedTask.assignees.length > 0 ? (\n                        <div className=\"flex items-center gap-1\">\n                          {selectedTask.assignees.slice(0, 3).map((assignee, i) => (\n                            <div\n                              key={i}\n                              className=\"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium\"\n                              style={{ backgroundColor: assignee.color || '#8B5CF6' }}\n                              title={assignee.name}\n                            >\n                              {assignee.initials || assignee.name.slice(0, 2).toUpperCase()}\n                            </div>\n                          ))}\n                          {selectedTask.assignees.length > 3 && (\n                            <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                              +{selectedTask.assignees.length - 3}\n                            </span>\n                          )}\n                        </div>\n                      ) : (\n                        <span className={cn(\"text-sm\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                          {locale === 'es' ? 'Agregar' : 'Add'}\n                        </span>\n                      )}\n                      <ChevronDown className={cn(\"w-3 h-3\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    </button>\n\n                    {/* Assignees Dropdown */}\n                    <AnimatePresence>\n                      {showAssigneesDropdown && (\n                        <>\n                          <div className=\"fixed inset-0 z-40\" onClick={() => setShowAssigneesDropdown(false)} />\n                          <motion.div\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -5 }}\n                            className={cn(\n                              \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[200px] max-h-[280px] overflow-y-auto\",\n                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                            )}\n                          >\n                            {availableUsers.length > 0 ? (\n                              availableUsers.map((user) => {\n                                const isSelected = selectedTask.assignees?.some(a => a.name === user.name);\n                                return (\n                                  <button\n                                    key={user.name}\n                                    onClick={() => {\n                                      const currentAssignees = selectedTask.assignees || [];\n                                      let newAssignees: Assignee[];\n                                      if (isSelected) {\n                                        newAssignees = currentAssignees.filter(a => a.name !== user.name);\n                                      } else {\n                                        newAssignees = [...currentAssignees, user];\n                                      }\n                                      updateTaskField('assignees', newAssignees);\n                                    }}\n                                    className={cn(\n                                      \"w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors text-left\",\n                                      isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                      isSelected && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                    )}\n                                  >\n                                    <div\n                                      className=\"w-7 h-7 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\n                                      style={{ backgroundColor: user.color || '#8B5CF6' }}\n                                    >\n                                      {user.initials || user.name.slice(0, 2).toUpperCase()}\n                                    </div>\n                                    <span className={cn(\"flex-1\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                      {user.name}\n                                    </span>\n                                    {isSelected && (\n                                      <Check className=\"w-4 h-4 text-green-500\" />\n                                    )}\n                                  </button>\n                                );\n                              })\n                            ) : (\n                              <div className={cn(\"px-3 py-4 text-sm text-center\", isDark ? \"text-[#6B7280]\" : \"text-gray-500\")}>\n                                {locale === 'es' ? 'No hay usuarios disponibles' : 'No users available'}\n                              </div>\n                            )}\n                          </motion.div>\n                        </>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Dates */}\n                  <div className=\"flex items-center gap-3 relative\">\n                    <CalendarDays className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Fechas' : 'Dates'}\n                    </span>\n                    <button\n                      onClick={() => {\n                        setShowDatePicker(showDatePicker ? null : 'start');\n                        setDatePickerMonth(selectedTask.startDate || new Date());\n                      }}\n                      className={cn(\n                        \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                        isDark ? \"bg-white/5 hover:bg-white/10 text-white\" : \"bg-gray-100 hover:bg-gray-200 text-gray-900\"\n                      )}\n                    >\n                      {selectedTask.startDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'short', day: 'numeric' }) || (locale === 'es' ? 'Inicio' : 'Start')}\n                      <span className={cn(\"mx-1\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}></span>\n                      {selectedTask.endDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'short', day: 'numeric' }) || (locale === 'es' ? 'Fin' : 'End')}\n                    </button>\n\n                    {/* Date Picker Popover */}\n                    <AnimatePresence>\n                      {showDatePicker && (\n                        <>\n                          <div className=\"fixed inset-0 z-40\" onClick={() => setShowDatePicker(null)} />\n                          <motion.div\n                            initial={{ opacity: 0, y: -10 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -10 }}\n                            className={cn(\n                              \"absolute left-0 top-full mt-2 z-50 rounded-xl shadow-2xl overflow-hidden flex\",\n                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                            )}\n                            onClick={(e) => e.stopPropagation()}\n                          >\n                            {/* Quick Options - Left Side */}\n                            <div className={cn(\"w-44 py-2 border-r\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                              {(() => {\n                                const today = new Date();\n                                const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1);\n                                const nextSaturday = new Date(today); nextSaturday.setDate(today.getDate() + ((6 - today.getDay() + 7) % 7 || 7));\n                                const nextMonday = new Date(today); nextMonday.setDate(today.getDate() + ((1 - today.getDay() + 7) % 7 || 7));\n                                const nextWeekend = new Date(today); nextWeekend.setDate(today.getDate() + ((6 - today.getDay() + 7) % 7) + 7);\n                                const twoWeeks = new Date(today); twoWeeks.setDate(today.getDate() + 14);\n                                const fourWeeks = new Date(today); fourWeeks.setDate(today.getDate() + 28);\n\n                                const quickOptions = [\n                                  { label: locale === 'es' ? 'Hoy' : 'Today', date: today, display: today.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                  { label: locale === 'es' ? 'Maana' : 'Tomorrow', date: tomorrow, display: tomorrow.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                  { label: locale === 'es' ? 'Este fin de semana' : 'This weekend', date: nextSaturday, display: locale === 'es' ? 'sb.' : 'sat.' },\n                                  { label: locale === 'es' ? 'Prxima semana' : 'Next week', date: nextMonday, display: locale === 'es' ? 'lun.' : 'mon.' },\n                                  { label: locale === 'es' ? 'Prximo fin de semana' : 'Next weekend', date: nextWeekend, display: nextWeekend.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                  { label: locale === 'es' ? '2 semanas' : '2 weeks', date: twoWeeks, display: twoWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                  { label: locale === 'es' ? '4 semanas' : '4 weeks', date: fourWeeks, display: fourWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                ];\n\n                                return quickOptions.map((option, i) => (\n                                  <button\n                                    key={i}\n                                    className={cn(\n                                      \"w-full flex items-center justify-between px-3 py-2 text-sm transition-colors\",\n                                      isDark ? \"hover:bg-white/5 text-white\" : \"hover:bg-gray-50 text-gray-900\"\n                                    )}\n                                    onClick={() => {\n                                      if (showDatePicker === 'start') {\n                                        const newEndDate = selectedTask.endDate && option.date > selectedTask.endDate\n                                          ? option.date\n                                          : selectedTask.endDate;\n                                        updateTaskDates(option.date, newEndDate);\n                                        setShowDatePicker('end');\n                                      } else {\n                                        const newStartDate = selectedTask.startDate && option.date < selectedTask.startDate\n                                          ? option.date\n                                          : selectedTask.startDate;\n                                        updateTaskDates(newStartDate, option.date);\n                                        setShowDatePicker(null);\n                                      }\n                                    }}\n                                  >\n                                    <span>{option.label}</span>\n                                    <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                      {option.display}\n                                    </span>\n                                  </button>\n                                ));\n                              })()}\n                              {/* Clear dates button */}\n                              <div className={cn(\"border-t mt-2 pt-2\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                                <button\n                                  onClick={() => {\n                                    updateTaskDates(undefined, undefined);\n                                    setShowDatePicker(null);\n                                  }}\n                                  className={cn(\n                                    \"w-full flex items-center justify-between px-3 py-2 text-sm transition-colors\",\n                                    isDark ? \"hover:bg-white/5 text-red-400\" : \"hover:bg-gray-50 text-red-500\"\n                                  )}\n                                >\n                                  <span>{locale === 'es' ? 'Quitar fechas' : 'Clear dates'}</span>\n                                  <X className=\"w-4 h-4 opacity-50\" />\n                                </button>\n                              </div>\n                            </div>\n\n                            {/* Calendar - Right Side */}\n                            <div className=\"p-4\">\n                              {/* Selection indicator */}\n                              <div className={cn(\"text-xs mb-3 px-2 py-1 rounded\", isDark ? \"bg-white/5 text-[#9CA3AF]\" : \"bg-gray-100 text-gray-600\")}>\n                                {showDatePicker === 'start'\n                                  ? (locale === 'es' ? ' Selecciona fecha de inicio' : ' Select start date')\n                                  : (locale === 'es' ? ' Selecciona fecha de fin' : ' Select end date')}\n                              </div>\n                              {/* Month Header */}\n                              <div className=\"flex items-center justify-between mb-4\">\n                                <span className={cn(\"font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                  {datePickerMonth.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'long', year: 'numeric' })}\n                                </span>\n                                <div className=\"flex items-center gap-1\">\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date())}\n                                    className={cn(\n                                      \"p-1 rounded text-sm transition-colors\",\n                                      isDark ? \"hover:bg-white/10 text-white\" : \"hover:bg-gray-100 text-gray-700\"\n                                    )}\n                                  >\n                                    {locale === 'es' ? 'Hoy' : 'Today'}\n                                  </button>\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() - 1))}\n                                    className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                  >\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>\n                                  </button>\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() + 1))}\n                                    className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                  >\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\n                                  </button>\n                                </div>\n                              </div>\n\n                              {/* Weekday Headers */}\n                              <div className=\"grid grid-cols-7 gap-1 mb-2\">\n                                {(locale === 'es'\n                                  ? ['do', 'lu', 'ma', 'mi', 'ju', 'vi', 's']\n                                  : ['su', 'mo', 'tu', 'we', 'th', 'fr', 'sa']\n                                ).map((day) => (\n                                  <div key={day} className={cn(\"w-8 h-8 flex items-center justify-center text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                    {day}\n                                  </div>\n                                ))}\n                              </div>\n\n                              {/* Calendar Days */}\n                              <div className=\"grid grid-cols-7 gap-1\">\n                                {getDatePickerDays().map((d, i) => {\n                                  const isToday = d.date.toDateString() === new Date().toDateString();\n                                  const isStartDate = selectedTask.startDate?.toDateString() === d.date.toDateString();\n                                  const isEndDate = selectedTask.endDate?.toDateString() === d.date.toDateString();\n                                  const isSelected = isStartDate || isEndDate;\n                                  const isInRange = selectedTask.startDate && selectedTask.endDate &&\n                                    d.date >= selectedTask.startDate && d.date <= selectedTask.endDate;\n\n                                  return (\n                                    <button\n                                      key={i}\n                                      onClick={() => {\n                                        const clickedDate = new Date(d.date);\n                                        if (showDatePicker === 'start') {\n                                          const newEndDate = selectedTask.endDate && clickedDate > selectedTask.endDate\n                                            ? clickedDate\n                                            : selectedTask.endDate;\n                                          updateTaskDates(clickedDate, newEndDate);\n                                          setShowDatePicker('end');\n                                        } else {\n                                          const newStartDate = selectedTask.startDate && clickedDate < selectedTask.startDate\n                                            ? clickedDate\n                                            : selectedTask.startDate;\n                                          updateTaskDates(newStartDate, clickedDate);\n                                          setShowDatePicker(null);\n                                        }\n                                      }}\n                                      className={cn(\n                                        \"w-8 h-8 rounded-full flex items-center justify-center text-sm transition-colors\",\n                                        !d.isCurrentMonth && (isDark ? \"text-[#4B5563]\" : \"text-gray-300\"),\n                                        d.isCurrentMonth && (isDark ? \"text-white\" : \"text-gray-900\"),\n                                        isToday && \"ring-2 ring-[#3B82F6]\",\n                                        isStartDate && \"bg-[#3B82F6] text-white\",\n                                        isEndDate && !isStartDate && \"bg-[#7C3AED] text-white\",\n                                        isInRange && !isSelected && (isDark ? \"bg-[#7C3AED]/20\" : \"bg-purple-100\"),\n                                        !isSelected && (isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")\n                                      )}\n                                    >\n                                      {d.date.getDate()}\n                                    </button>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          </motion.div>\n                        </>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Priority */}\n                  <div className=\"flex items-center gap-3 relative\">\n                    <Flag className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Prioridad' : 'Priority'}\n                    </span>\n                    <button\n                      onClick={() => {\n                        closeAllDropdowns();\n                        setShowPriorityDropdown(!showPriorityDropdown);\n                      }}\n                      className={cn(\n                        \"text-xs px-2 py-1 rounded font-medium transition-all hover:ring-2 hover:ring-white/20\",\n                        selectedTask.priority === 'high' || selectedTask.priority === 'urgent'\n                          ? \"bg-red-500/20 text-red-400\"\n                          : selectedTask.priority === 'medium'\n                            ? \"bg-yellow-500/20 text-yellow-400\"\n                            : selectedTask.priority === 'low'\n                              ? \"bg-green-500/20 text-green-400\"\n                              : isDark ? \"bg-white/10 text-white\" : \"bg-gray-100 text-gray-700\"\n                      )}\n                    >\n                      {selectedTask.priority\n                        ? (selectedTask.priority === 'high' || selectedTask.priority === 'urgent'\n                            ? (locale === 'es' ? 'Alta' : 'High')\n                            : selectedTask.priority === 'medium'\n                              ? (locale === 'es' ? 'Media' : 'Medium')\n                              : (locale === 'es' ? 'Baja' : 'Low'))\n                        : (locale === 'es' ? 'Sin prioridad' : 'No priority')}\n                    </button>\n                    {/* Priority Dropdown */}\n                    <AnimatePresence>\n                      {showPriorityDropdown && (\n                        <>\n                          <div className=\"fixed inset-0 z-40\" onClick={() => setShowPriorityDropdown(false)} />\n                          <motion.div\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -5 }}\n                            className={cn(\n                              \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[140px]\",\n                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                            )}\n                          >\n                            {[\n                              { id: 'urgent', label: locale === 'es' ? 'Urgente' : 'Urgent', color: 'bg-red-500' },\n                              { id: 'high', label: locale === 'es' ? 'Alta' : 'High', color: 'bg-orange-500' },\n                              { id: 'medium', label: locale === 'es' ? 'Media' : 'Medium', color: 'bg-yellow-500' },\n                              { id: 'low', label: locale === 'es' ? 'Baja' : 'Low', color: 'bg-green-500' },\n                              { id: undefined, label: locale === 'es' ? 'Sin prioridad' : 'No priority', color: 'bg-gray-400' },\n                            ].map((priority) => (\n                              <button\n                                key={priority.id || 'none'}\n                                onClick={() => {\n                                  updateTaskField('priority', priority.id as Task['priority']);\n                                  setShowPriorityDropdown(false);\n                                }}\n                                className={cn(\n                                  \"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors text-left\",\n                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                  selectedTask.priority === priority.id && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                )}\n                              >\n                                <span className={cn(\"w-2 h-2 rounded-full\", priority.color)} />\n                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{priority.label}</span>\n                              </button>\n                            ))}\n                          </motion.div>\n                        </>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Duration */}\n                  <div className=\"flex items-center gap-3\">\n                    <Clock className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Duracin' : 'Duration'}\n                    </span>\n                    <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {selectedTask.startDate && selectedTask.endDate\n                        ? `${Math.ceil((selectedTask.endDate.getTime() - selectedTask.startDate.getTime()) / (1000 * 60 * 60 * 24))} ${locale === 'es' ? 'das' : 'days'}`\n                        : (locale === 'es' ? 'Sin definir' : 'Not set')}\n                    </span>\n                  </div>\n\n                  {/* Progress */}\n                  <div className=\"flex items-center gap-3\">\n                    <div className={cn(\"w-4 h-4 rounded-full border-2\", isDark ? \"border-[#6B7280]\" : \"border-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Progreso' : 'Progress'}\n                    </span>\n                    <div className=\"flex items-center gap-2 flex-1\">\n                      {editingProgress ? (\n                        <input\n                          type=\"range\"\n                          min=\"0\"\n                          max=\"100\"\n                          step=\"5\"\n                          value={selectedTask.progress || 0}\n                          onChange={(e) => {\n                            const newProgress = parseInt(e.target.value);\n                            let newStatus = selectedTask.status;\n                            if (newProgress === 100) newStatus = 'completed';\n                            else if (newProgress > 0) newStatus = 'in-progress';\n                            else newStatus = 'todo';\n                            const updatedTask = { ...selectedTask, progress: newProgress, status: newStatus as any };\n                            handleUpdate(updatedTask);\n                          }}\n                          onBlur={() => setEditingProgress(false)}\n                          className={cn(\n                            \"flex-1 max-w-[120px] h-2 rounded-full appearance-none cursor-pointer\",\n                            isDark ? \"bg-white/10\" : \"bg-gray-200\",\n                            \"[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#3B82F6] [&::-webkit-slider-thumb]:cursor-pointer\"\n                          )}\n                          autoFocus\n                        />\n                      ) : (\n                        <button\n                          onClick={() => setEditingProgress(true)}\n                          className={cn(\n                            \"flex-1 h-2 rounded-full overflow-hidden max-w-[120px] cursor-pointer hover:ring-2 hover:ring-white/20 transition-all\",\n                            isDark ? \"bg-white/10\" : \"bg-gray-200\"\n                          )}\n                        >\n                          <div\n                            className={cn(\n                              \"h-full rounded-full transition-all\",\n                              selectedTask.progress === 100 ? \"bg-green-500\" : \"bg-[#3B82F6]\"\n                            )}\n                            style={{ width: `${selectedTask.progress || 0}%` }}\n                          />\n                        </button>\n                      )}\n                      <span className={cn(\"text-sm font-medium min-w-[40px]\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {selectedTask.progress || 0}%\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Tags */}\n                  <div className=\"flex items-center gap-3\">\n                    <Tag className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Etiquetas' : 'Tags'}\n                    </span>\n                    <TagPicker\n                      selectedTags={selectedTask.tags || []}\n                      availableTags={availableTags}\n                      onChange={(newTags) => {\n                        updateTaskField('tags', newTags);\n                      }}\n                      onCreateTag={onCreateTag}\n                      theme={tagPickerTheme}\n                    />\n                  </div>\n\n                  {/* Dependencies */}\n                  <div className=\"flex items-start gap-3 relative\">\n                    <Link2 className={cn(\"w-4 h-4 mt-1.5\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24 mt-1\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Relaciones' : 'Relations'}\n                    </span>\n                    <div className=\"flex-1\">\n                      {/* Selected dependencies as chips */}\n                      {selectedTask.dependencies && selectedTask.dependencies.length > 0 && (\n                        <div className=\"flex flex-wrap gap-1.5 mb-2\">\n                          {selectedTask.dependencies.map((depId) => {\n                            const depTask = availableTasks.find(t => t.id === depId);\n                            return (\n                              <span\n                                key={depId}\n                                className={cn(\n                                  \"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\",\n                                  isDark ? \"bg-blue-500/20 text-blue-400\" : \"bg-blue-100 text-blue-700\"\n                                )}\n                              >\n                                {depTask?.name || depId.slice(0, 8)}\n                                <button\n                                  onClick={() => {\n                                    const newDeps = (selectedTask.dependencies || []).filter(id => id !== depId);\n                                    updateTaskField('dependencies', newDeps);\n                                  }}\n                                  className={cn(\n                                    \"ml-0.5 hover:bg-white/20 rounded-full p-0.5 transition-colors\"\n                                  )}\n                                >\n                                  <X className=\"w-3 h-3\" />\n                                </button>\n                              </span>\n                            );\n                          })}\n                        </div>\n                      )}\n\n                      {/* Add dependency button */}\n                      <button\n                        onClick={() => {\n                          closeAllDropdowns();\n                          setShowDependenciesDropdown(!showDependenciesDropdown);\n                        }}\n                        className={cn(\n                          \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                          isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                        )}\n                      >\n                        <Plus className=\"w-3.5 h-3.5\" />\n                        <span className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                          {locale === 'es' ? 'Agregar dependencia' : 'Add dependency'}\n                        </span>\n                      </button>\n\n                      {/* Dependencies Dropdown */}\n                      <AnimatePresence>\n                        {showDependenciesDropdown && (\n                          <>\n                            <div className=\"fixed inset-0 z-40\" onClick={() => {\n                              setShowDependenciesDropdown(false);\n                              setDependencySearch('');\n                            }} />\n                            <motion.div\n                              initial={{ opacity: 0, y: -5 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -5 }}\n                              className={cn(\n                                \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[280px] max-h-[320px]\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                            >\n                              {/* Search input */}\n                              <div className={cn(\"p-2 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                                <input\n                                  type=\"text\"\n                                  value={dependencySearch}\n                                  onChange={(e) => setDependencySearch(e.target.value)}\n                                  placeholder={locale === 'es' ? 'Buscar tarea...' : 'Search task...'}\n                                  className={cn(\n                                    \"w-full px-3 py-2 rounded-md text-sm outline-none\",\n                                    isDark\n                                      ? \"bg-white/5 text-white placeholder:text-[#6B7280] focus:bg-white/10\"\n                                      : \"bg-gray-100 text-gray-900 placeholder:text-gray-400\"\n                                  )}\n                                  autoFocus\n                                />\n                              </div>\n\n                              {/* Task list */}\n                              <div className=\"max-h-[240px] overflow-y-auto\">\n                                {availableTasks.length > 0 ? (\n                                  availableTasks\n                                    .filter(t => t.id !== selectedTask.id)\n                                    .filter(t =>\n                                      dependencySearch === '' ||\n                                      t.name.toLowerCase().includes(dependencySearch.toLowerCase())\n                                    )\n                                    .map((depTask) => {\n                                      const isSelected = selectedTask.dependencies?.includes(depTask.id);\n                                      return (\n                                        <button\n                                          key={depTask.id}\n                                          onClick={() => {\n                                            const currentDeps = selectedTask.dependencies || [];\n                                            let newDeps: string[];\n                                            if (isSelected) {\n                                              newDeps = currentDeps.filter(id => id !== depTask.id);\n                                            } else {\n                                              newDeps = [...currentDeps, depTask.id];\n                                            }\n                                            updateTaskField('dependencies', newDeps);\n                                          }}\n                                          className={cn(\n                                            \"w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors text-left\",\n                                            isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                            isSelected && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                          )}\n                                        >\n                                          <div\n                                            className={cn(\n                                              \"w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0\",\n                                              isSelected\n                                                ? \"bg-blue-500 border-blue-500\"\n                                                : isDark ? \"border-white/30\" : \"border-gray-300\"\n                                            )}\n                                          >\n                                            {isSelected && (\n                                              <Check className=\"w-3 h-3 text-white\" />\n                                            )}\n                                          </div>\n                                          <div className=\"flex-1 min-w-0\">\n                                            <span className={cn(\"block truncate\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                              {depTask.name}\n                                            </span>\n                                            <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                              {depTask.id.slice(0, 8)}\n                                            </span>\n                                          </div>\n                                        </button>\n                                      );\n                                    })\n                                ) : (\n                                  <div className={cn(\"px-3 py-4 text-sm text-center\", isDark ? \"text-[#6B7280]\" : \"text-gray-500\")}>\n                                    {locale === 'es' ? 'No hay tareas disponibles' : 'No tasks available'}\n                                  </div>\n                                )}\n                              </div>\n                            </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n                  </div>\n\n                  {/* Color */}\n                  <div className=\"flex items-center gap-3 relative\">\n                    <Palette className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Color' : 'Color'}\n                    </span>\n                    <button\n                      onClick={() => {\n                        closeAllDropdowns();\n                        setShowColorPicker(!showColorPicker);\n                      }}\n                      className={cn(\n                        \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                        isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                      )}\n                    >\n                      <div\n                        className=\"w-4 h-4 rounded-full\"\n                        style={{ backgroundColor: selectedTask.color || '#6366F1' }}\n                      />\n                      <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {TASK_COLORS.find(c => c.value === selectedTask.color)?.name || (locale === 'es' ? 'Azul' : 'Blue')}\n                      </span>\n                      <ChevronDown className={cn(\"w-3 h-3\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    </button>\n\n                    {/* Color Picker Dropdown */}\n                    <AnimatePresence>\n                      {showColorPicker && (\n                        <>\n                          <div className=\"fixed inset-0 z-40\" onClick={() => setShowColorPicker(false)} />\n                          <motion.div\n                            initial={{ opacity: 0, y: -5 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -5 }}\n                            className={cn(\n                              \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden p-3\",\n                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                            )}\n                          >\n                            <div className=\"grid grid-cols-6 gap-1.5\">\n                              {TASK_COLORS.map((color) => {\n                                const isSelected = selectedTask.color === color.value;\n                                return (\n                                  <button\n                                    key={color.value}\n                                    onClick={() => {\n                                      updateTaskField('color', color.value);\n                                      setShowColorPicker(false);\n                                    }}\n                                    className={cn(\n                                      \"w-7 h-7 rounded-full flex items-center justify-center transition-all\",\n                                      isSelected && \"ring-2 ring-offset-2\",\n                                      isDark ? \"ring-offset-[#1A1D25]\" : \"ring-offset-white\"\n                                    )}\n                                    style={{\n                                      backgroundColor: color.value,\n                                      outlineColor: isSelected ? color.value : undefined,\n                                    }}\n                                    title={color.name}\n                                  >\n                                    {isSelected && (\n                                      <Check className=\"w-3.5 h-3.5 text-white\" />\n                                    )}\n                                  </button>\n                                );\n                              })}\n                            </div>\n                          </motion.div>\n                        </>\n                      )}\n                    </AnimatePresence>\n                  </div>\n\n                  {/* Milestone */}\n                  <div className=\"flex items-center gap-3\">\n                    <Diamond className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                      {locale === 'es' ? 'Hito' : 'Milestone'}\n                    </span>\n                    <label className=\"flex items-center gap-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedTask.isMilestone || false}\n                        onChange={(e) => updateTaskField('isMilestone' as any, e.target.checked)}\n                        className={cn(\n                          \"w-4 h-4 rounded border-2 cursor-pointer appearance-none transition-colors\",\n                          selectedTask.isMilestone\n                            ? \"bg-purple-500 border-purple-500\"\n                            : isDark ? \"border-white/30 bg-transparent\" : \"border-gray-300 bg-transparent\",\n                          \"checked:bg-purple-500 checked:border-purple-500\"\n                        )}\n                      />\n                      <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {locale === 'es' ? 'Marcar como hito' : 'Mark as milestone'}\n                      </span>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Description section */}\n                <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                  <div className=\"flex items-center gap-2 mb-3\">\n                    <FileText className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                    <h3 className={cn(\"text-sm font-semibold\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {locale === 'es' ? 'Descripcin' : 'Description'}\n                    </h3>\n                  </div>\n                  <textarea\n                    value={localDescription}\n                    onChange={(e) => handleDescriptionChange(e.target.value)}\n                    placeholder={locale === 'es' ? 'Agregar descripcin...' : 'Add description...'}\n                    className={cn(\n                      \"w-full min-h-[100px] px-3 py-2 rounded-lg text-sm resize-none outline-none transition-colors\",\n                      isDark\n                        ? \"bg-white/5 text-white placeholder:text-[#6B7280] focus:bg-white/10\"\n                        : \"bg-gray-100 text-gray-900 placeholder:text-gray-400 focus:bg-gray-200\"\n                    )}\n                  />\n                  <button className={cn(\n                    \"flex items-center gap-2 text-sm mt-2 transition-colors\",\n                    isDark ? \"text-purple-400 hover:text-purple-300\" : \"text-purple-600 hover:text-purple-700\"\n                  )}>\n                    <Sparkles className=\"w-4 h-4\" />\n                    {locale === 'es' ? 'Escribe con IA' : 'Write with AI'}\n                  </button>\n                </div>\n\n                {/* Custom Fields section */}\n                <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                  <h3 className={cn(\"text-sm font-semibold mb-3\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                    {locale === 'es' ? 'Campos personalizados' : 'Custom fields'}\n                  </h3>\n                  <button className={cn(\n                    \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                    isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                  )}>\n                    <Plus className=\"w-4 h-4\" />\n                    {locale === 'es' ? 'Crea un campo en esta lista' : 'Create a field in this list'}\n                  </button>\n                </div>\n\n                {/* Subtasks section */}\n                <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                  <h3 className={cn(\"text-sm font-semibold mb-3\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                    {locale === 'es' ? 'Subtareas' : 'Subtasks'}\n                  </h3>\n                  {selectedTask.subtasks && selectedTask.subtasks.length > 0 && (\n                    <div className=\"space-y-2 mb-3\">\n                      {selectedTask.subtasks.map((subtask) => (\n                        <div key={subtask.id} className=\"flex items-center gap-2\">\n                          <div className={cn(\n                            \"w-4 h-4 rounded border flex items-center justify-center cursor-pointer\",\n                            subtask.progress === 100\n                              ? \"bg-green-500 border-green-500\"\n                              : isDark ? \"border-white/20 hover:border-white/40\" : \"border-gray-300 hover:border-gray-400\"\n                          )}>\n                            {subtask.progress === 100 && (\n                              <CheckCircle2 className=\"w-3 h-3 text-white\" />\n                            )}\n                          </div>\n                          <span className={cn(\n                            \"text-sm\",\n                            subtask.progress === 100\n                              ? \"line-through text-[#6B7280]\"\n                              : isDark ? \"text-white\" : \"text-gray-900\"\n                          )}>\n                            {subtask.name}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                  <button className={cn(\n                    \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                    isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                  )}>\n                    <Plus className=\"w-4 h-4\" />\n                    {locale === 'es' ? 'Agregar subtarea' : 'Add subtask'}\n                  </button>\n                </div>\n\n                {/* Checklists Section */}\n                <div className={cn(\n                  \"mt-6 pt-4 border-t\",\n                  isDark ? \"border-white/10\" : \"border-gray-200\"\n                )}>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className={cn(\n                      \"text-sm font-semibold\",\n                      isDark ? \"text-white\" : \"text-gray-900\"\n                    )}>\n                      {locale === 'es' ? 'Listas de control' : 'Checklists'}\n                    </h3>\n                    <button className={cn(\n                      \"p-1 rounded transition-colors\",\n                      isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\"\n                    )}>\n                      <Plus className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                  <button className={cn(\n                    \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                    isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                  )}>\n                    <ListChecks className=\"w-4 h-4\" />\n                    {locale === 'es' ? 'Crear lista de control' : 'Create checklist'}\n                  </button>\n                </div>\n\n                {/* Attachments Section - v0.17.241: Functional */}\n                <div className={cn(\n                  \"mt-6 pt-4 border-t\",\n                  isDark ? \"border-white/10\" : \"border-gray-200\"\n                )}>\n                  <h3 className={cn(\n                    \"text-sm font-semibold mb-3\",\n                    isDark ? \"text-white\" : \"text-gray-900\"\n                  )}>\n                    {locale === 'es' ? 'Adjuntos' : 'Attachments'}\n                    {attachments.length > 0 && (\n                      <span className={cn(\"ml-2 text-xs font-normal\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                        ({attachments.length})\n                      </span>\n                    )}\n                  </h3>\n\n                  {/* Existing attachments */}\n                  {attachments.length > 0 && (\n                    <div className=\"space-y-2 mb-4\">\n                      {attachments.map((attachment) => {\n                        const FileIcon = getFileIcon(attachment.type);\n                        const isImage = attachment.type.startsWith('image/');\n\n                        return (\n                          <div\n                            key={attachment.id}\n                            className={cn(\n                              \"flex items-center gap-3 p-2 rounded-lg group transition-colors\",\n                              isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-50 hover:bg-gray-100\"\n                            )}\n                          >\n                            {/* Thumbnail or icon */}\n                            {isImage && attachment.thumbnailUrl ? (\n                              <img\n                                src={attachment.thumbnailUrl}\n                                alt={attachment.name}\n                                className=\"w-10 h-10 rounded object-cover\"\n                              />\n                            ) : (\n                              <div className={cn(\n                                \"w-10 h-10 rounded flex items-center justify-center\",\n                                isDark ? \"bg-white/10\" : \"bg-gray-200\"\n                              )}>\n                                <FileIcon className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")} />\n                              </div>\n                            )}\n\n                            {/* File info */}\n                            <div className=\"flex-1 min-w-0\">\n                              <a\n                                href={attachment.url}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className={cn(\n                                  \"text-sm font-medium truncate block hover:underline\",\n                                  isDark ? \"text-white\" : \"text-gray-900\"\n                                )}\n                              >\n                                {attachment.name}\n                              </a>\n                              <p className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                {formatFileSize(attachment.size)}\n                              </p>\n                            </div>\n\n                            {/* Delete button */}\n                            {onDeleteAttachment && (\n                              <button\n                                onClick={() => onDeleteAttachment(attachment.id)}\n                                className={cn(\n                                  \"p-1.5 rounded opacity-0 group-hover:opacity-100 transition-all\",\n                                  isDark ? \"hover:bg-red-500/20 text-red-400\" : \"hover:bg-red-100 text-red-500\"\n                                )}\n                                title={locale === 'es' ? 'Eliminar' : 'Delete'}\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                          </div>\n                        );\n                      })}\n                    </div>\n                  )}\n\n                  {/* Drop zone */}\n                  <div\n                    onDragOver={handleDragOver}\n                    onDragLeave={handleDragLeave}\n                    onDrop={handleFileDrop}\n                    className={cn(\n                      \"border-2 border-dashed rounded-lg p-6 text-center transition-all cursor-pointer relative\",\n                      isDraggingFile\n                        ? (isDark ? \"border-blue-500 bg-blue-500/10\" : \"border-blue-400 bg-blue-50\")\n                        : (isDark ? \"border-white/10 hover:border-white/20\" : \"border-gray-200 hover:border-gray-300\"),\n                      isUploadingFiles && \"pointer-events-none opacity-50\"\n                    )}\n                  >\n                    <input\n                      type=\"file\"\n                      multiple\n                      onChange={handleFileInputChange}\n                      className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                      disabled={!onUploadAttachments || isUploadingFiles}\n                    />\n                    {isUploadingFiles ? (\n                      <>\n                        <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n                        <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                          {locale === 'es' ? 'Subiendo...' : 'Uploading...'}\n                        </p>\n                      </>\n                    ) : (\n                      <>\n                        <Upload className={cn(\n                          \"w-6 h-6 mx-auto mb-2\",\n                          isDraggingFile ? \"text-blue-500\" : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\")\n                        )} />\n                        <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                          {isDraggingFile\n                            ? (locale === 'es' ? 'Suelta los archivos aqu' : 'Drop files here')\n                            : (locale === 'es'\n                                ? <>Suelta tus archivos aqu o <span className=\"underline\">haz clic para subir</span></>\n                                : <>Drop your files here or <span className=\"underline\">click to upload</span></>\n                              )\n                          }\n                        </p>\n                        {!onUploadAttachments && (\n                          <p className={cn(\"text-xs mt-1\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                            {locale === 'es' ? 'Upload no disponible' : 'Upload not available'}\n                          </p>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Activity Panel - Right Sidebar */}\n            <div className={cn(\n              \"w-80 border-l flex flex-col\",\n              isDark ? \"border-white/10 bg-[#0F1117]\" : \"border-gray-200 bg-gray-50\"\n            )}>\n              {/* Activity Header */}\n              <div className={cn(\n                \"px-4 py-3 border-b\",\n                isDark ? \"border-white/10\" : \"border-gray-200\"\n              )}>\n                <h3 className={cn(\n                  \"text-sm font-semibold\",\n                  isDark ? \"text-white\" : \"text-gray-900\"\n                )}>\n                  {locale === 'es' ? 'Actividad' : 'Activity'}\n                  {comments.length > 0 && (\n                    <span className={cn(\"ml-2 text-xs font-normal\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                      ({comments.length})\n                    </span>\n                  )}\n                </h3>\n              </div>\n\n              {/* Activity Content - Comments List */}\n              <div className=\"flex-1 overflow-y-auto p-4\">\n                {comments.length > 0 ? (\n                  <div className=\"space-y-4\">\n                    {comments.map((comment) => (\n                      <div key={comment.id} className=\"flex gap-3\">\n                        {/* Avatar */}\n                        <div\n                          className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\n                          style={{ backgroundColor: comment.user?.color || '#8B5CF6' }}\n                        >\n                          {comment.user?.name?.slice(0, 2).toUpperCase() || 'U'}\n                        </div>\n                        {/* Comment Content */}\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={cn(\"text-sm font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                              {comment.user?.name || (locale === 'es' ? 'Usuario' : 'User')}\n                            </span>\n                            <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                              {formatCommentDate(comment.createdAt)}\n                            </span>\n                          </div>\n                          <div className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\n                            <CommentContent content={comment.content} theme={theme} />\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  /* Empty State */\n                  <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                    <MessageSquare className={cn(\n                      \"w-10 h-10 mb-3\",\n                      isDark ? \"text-[#3B4252]\" : \"text-gray-300\"\n                    )} />\n                    <p className={cn(\n                      \"text-sm\",\n                      isDark ? \"text-[#6B7280]\" : \"text-gray-500\"\n                    )}>\n                      {locale === 'es' ? 'Sin actividad reciente' : 'No recent activity'}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Comment Input - v0.17.401: Now with @mentions support */}\n              <div className={cn(\n                \"p-4 border-t\",\n                isDark ? \"border-white/10\" : \"border-gray-200\"\n              )}>\n                <MentionInput\n                  value={commentText}\n                  onChange={setCommentText}\n                  onSubmit={handleSubmitComment}\n                  users={mentionableUsers}\n                  placeholder={locale === 'es' ? 'Escribe un comentario... (usa @ para mencionar)' : 'Write a comment... (use @ to mention)'}\n                  disabled={!onAddComment}\n                  isSubmitting={isSubmittingComment}\n                  theme={theme}\n                  locale={locale}\n                  currentUser={currentUser}\n                />\n              </div>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n","/**\r\n * useDragState - React hook for drag state management\r\n * @module hooks/useDragState\r\n *\r\n * Replacement for Jotai's useAtom(dragStateAtom)\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { dragStore, type DragState } from '@libxai/core'\r\n\r\n/**\r\n * Hook return type\r\n */\r\nexport type UseDragStateReturn = [\r\n  state: DragState,\r\n  setState: (state: DragState) => void\r\n]\r\n\r\n/**\r\n * React hook for drag state\r\n *\r\n * Drop-in replacement for `useAtom(dragStateAtom)`\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const [dragState, setDragState] = useDragState()\r\n *\r\n *   const handleDragStart = () => {\r\n *     setDragState({\r\n *       isDragging: true,\r\n *       draggedCardId: 'card-1',\r\n *       sourceColumnId: 'col-1',\r\n *       targetColumnId: 'col-1',\r\n *     })\r\n *   }\r\n *\r\n *   return <div>{dragState.isDragging ? 'Dragging...' : 'Idle'}</div>\r\n * }\r\n * ```\r\n */\r\nexport function useDragState(): UseDragStateReturn {\r\n  const [state, setState] = useState<DragState>(() => dragStore.getState())\r\n\r\n  useEffect(() => {\r\n    // Subscribe to store changes\r\n    const unsubscribe = dragStore.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [])\r\n\r\n  const setDragState = useCallback((newState: DragState) => {\r\n    dragStore.setState(newState)\r\n  }, [])\r\n\r\n  return [state, setDragState]\r\n}\r\n","import { useCallback, useMemo, useState } from 'react'\nimport {\n  DndContext,\n  DragOverlay,\n  closestCorners,\n  PointerSensor,\n  KeyboardSensor,\n  useSensor,\n  useSensors,\n  DragStartEvent,\n  DragEndEvent,\n  DragOverEvent,\n} from '@dnd-kit/core'\nimport { sortableKeyboardCoordinates } from '@dnd-kit/sortable'\nimport type { KanbanBoardProps, Card as CardType } from '../../types'\nimport type { Task } from '../Gantt/types'\nimport { Column } from '../Column'\nimport { Card } from '../Card'\nimport { TaskDetailModal } from '../TaskDetailModal'\nimport { cn, calculateDropPosition } from '../../utils'\nimport { useDragState } from '../../hooks/useDragState'\nimport { KanbanThemeProvider } from './KanbanThemeContext'\n\nexport function KanbanBoard({\n  board,\n  callbacks,\n  onCardClick,\n  renderProps,\n  config,\n  availableUsers = [],\n  className,\n  style,\n  isLoading,\n  error,\n  children,\n  availableTags = [],\n  onCreateTag,\n  attachmentsByCard,\n  onUploadAttachments,\n  onDeleteAttachment,\n  // v0.17.254: Comments support\n  comments,\n  onAddComment,\n  currentUser,\n  mentionableUsers,\n  onTaskOpen,\n}: KanbanBoardProps & { children?: React.ReactNode }) {\n  const [dragState, setDragState] = useDragState()\n\n  // State for task detail modal\n  const [selectedCard, setSelectedCard] = useState<CardType | null>(null)\n\n  // Determine theme class - default to 'dark'\n  const themeName = config?.theme || 'dark'\n  const isDark = themeName === 'dark' || themeName === 'neutral'\n  const themeClass = isDark ? 'dark' : ''\n\n  const handleCardUpdate = useCallback(\n    (cardId: string, updates: Partial<typeof board.cards[0]>) => {\n      callbacks.onCardUpdate?.(cardId, updates)\n    },\n    [callbacks]\n  )\n\n  const handleColumnRename = useCallback(\n    (columnId: string, newTitle: string) => {\n      callbacks.onColumnUpdate?.(columnId, { title: newTitle })\n    },\n    [callbacks]\n  )\n\n  // v0.17.55: Handler for column delete\n  const handleColumnDelete = useCallback(\n    (columnId: string) => {\n      callbacks.onColumnDelete?.(columnId)\n    },\n    [callbacks]\n  )\n\n  // v0.17.55: Default column IDs that cannot be deleted\n  const DEFAULT_COLUMN_IDS = ['todo', 'in-progress', 'completed']\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  )\n\n  const cardsByColumn = useMemo(() => {\n    const map = new Map<string, typeof board.cards>()\n\n    board.columns.forEach((column) => {\n      const columnCards = column.cardIds\n        .map((cardId) => board.cards.find((card) => card.id === cardId))\n        .filter((card): card is NonNullable<typeof card> => card !== undefined)\n        .sort((a, b) => a.position - b.position)\n\n      map.set(column.id, columnCards)\n    })\n\n    return map\n  }, [board.cards, board.columns])\n\n  // v0.17.243: Convert cards to Task format for dependencies in TaskDetailModal\n  const availableTasksForDependencies = useMemo((): Task[] => {\n    return board.cards.map(card => ({\n      id: card.id,\n      name: card.title,\n      startDate: card.startDate ? new Date(card.startDate) : undefined,\n      endDate: card.endDate ? new Date(card.endDate) : undefined,\n      progress: card.progress || 0,\n      status: card.columnId as any,\n      priority: card.priority?.toLowerCase() as any,\n      dependencies: Array.isArray(card.dependencies)\n        ? card.dependencies.map(d => typeof d === 'string' ? d : d.taskId)\n        : [],\n    }))\n  }, [board.cards])\n\n  const handleDragStart = useCallback(\n    (event: DragStartEvent) => {\n      const { active } = event\n      const card = board.cards.find((c) => c.id === active.id)\n\n      if (card) {\n        setDragState({\n          isDragging: true,\n          draggedCardId: card.id,\n          sourceColumnId: card.columnId,\n          targetColumnId: card.columnId,\n        })\n      }\n    },\n    [board.cards, setDragState]\n  )\n\n  const handleDragOver = useCallback(\n    (event: DragOverEvent) => {\n      const { active, over } = event\n      if (!over) return\n\n      const activeCard = board.cards.find((c) => c.id === active.id)\n      if (!activeCard) return\n\n      let targetColumnId: string | null = null\n\n      if (over.data.current?.type === 'column') {\n        targetColumnId = over.id as string\n      } else if (over.data.current?.type === 'card') {\n        const overCard = board.cards.find((c) => c.id === over.id)\n        targetColumnId = overCard?.columnId || null\n      }\n\n      if (targetColumnId && targetColumnId !== dragState.targetColumnId) {\n        setDragState({\n          ...dragState,\n          targetColumnId,\n        })\n      }\n    },\n    [board.cards, dragState, setDragState]\n  )\n\n  const handleDragEnd = useCallback(\n    async (event: DragEndEvent) => {\n      const { active, over } = event\n\n      setDragState({\n        isDragging: false,\n        draggedCardId: null,\n        sourceColumnId: null,\n        targetColumnId: null,\n      })\n\n      if (!over) return\n\n      const activeCard = board.cards.find((c) => c.id === active.id)\n      if (!activeCard) return\n\n      let targetColumnId: string\n      let targetPosition: number\n\n      if (over.data.current?.type === 'column') {\n        targetColumnId = over.id as string\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\n        targetPosition = calculateDropPosition(targetColumnCards, 0)\n      } else {\n        const overCard = board.cards.find((c) => c.id === over.id)\n        if (!overCard) return\n\n        targetColumnId = overCard.columnId\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\n        const overIndex = targetColumnCards.findIndex((c) => c.id === over.id)\n\n        targetPosition = calculateDropPosition(targetColumnCards, overIndex)\n      }\n\n      const targetColumn = board.columns.find((col) => col.id === targetColumnId)\n      if (targetColumn && targetColumn.wipLimit && targetColumn.wipLimitType === 'hard') {\n        const targetColumnCards = cardsByColumn.get(targetColumnId) || []\n\n        if (activeCard.columnId !== targetColumnId) {\n          if (targetColumnCards.length >= targetColumn.wipLimit) {\n            callbacks.onWipLimitExceeded?.(targetColumn, activeCard)\n            return\n          }\n        }\n      }\n\n      if (\n        activeCard.columnId !== targetColumnId ||\n        activeCard.position !== targetPosition\n      ) {\n        await callbacks.onCardMove?.(activeCard.id, targetColumnId, targetPosition)\n      }\n    },\n    [board.cards, board.columns, cardsByColumn, callbacks, setDragState]\n  )\n\n  // Handle card click - open modal and notify consumer\n  // v0.17.254: Also call onTaskOpen to load comments\n  const handleCardClick = useCallback(\n    (card: typeof board.cards[0]) => {\n      setSelectedCard(card)\n      onCardClick?.(card)\n      onTaskOpen?.(card.id)\n    },\n    [onCardClick, onTaskOpen]\n  )\n\n  // Handle card update from modal\n  const handleModalCardUpdate = useCallback(\n    (updatedCard: CardType) => {\n      callbacks.onCardUpdate?.(updatedCard.id, updatedCard)\n      setSelectedCard(updatedCard)\n    },\n    [callbacks]\n  )\n\n  if (isLoading) {\n    return (\n      <div className={cn('asakaa-board', themeClass, className)} style={style}>\n        <LoadingSkeleton columnCount={3} />\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className={cn('asakaa-board', themeClass, className)} style={style}>\n        <div className=\"flex items-center justify-center w-full h-64\">\n          <div className=\"text-center\">\n            <p className=\"text-asakaa-accent-red text-lg font-semibold mb-2\">\n              Error loading board\n            </p>\n            <p className=\"text-asakaa-text-secondary text-sm\">\n              {typeof error === 'string' ? error : error.message}\n            </p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <KanbanThemeProvider themeName={themeName}>\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCorners}\n        onDragStart={handleDragStart}\n        onDragOver={handleDragOver}\n        onDragEnd={handleDragEnd}\n      >\n        <div className={cn('asakaa-board', themeClass, className)} style={style} data-theme={themeName}>\n          {board.columns\n            .sort((a, b) => a.position - b.position)\n            .map((column) => {\n              const cards = cardsByColumn.get(column.id) || []\n\n              // v0.17.55: Check if column is deletable (not a default column)\n              const isDeletable = !DEFAULT_COLUMN_IDS.includes(column.id)\n\n              return (\n                <Column\n                  key={column.id}\n                  column={column}\n                  cards={cards}\n                  renderCard={renderProps?.renderCard}\n                  renderColumn={renderProps?.renderColumn}\n                  renderHeader={renderProps?.renderColumnHeader}\n                  renderEmptyState={renderProps?.renderEmptyState}\n                  onCardClick={handleCardClick}\n                  onCardUpdate={handleCardUpdate}\n                  onColumnRename={handleColumnRename}\n                  onColumnDelete={handleColumnDelete}\n                  isDeletable={isDeletable}\n                  availableUsers={availableUsers}\n                  allCards={board.cards}\n                  enableVirtualization={config?.enableVirtualization}\n                  cardHeight={config?.cardHeight}\n                />\n              )\n            })}\n          {children}\n        </div>\n\n        <DragOverlay>\n          {dragState.draggedCardId ? (\n            <Card\n              card={\n                board.cards.find((c) => c.id === dragState.draggedCardId)!\n              }\n              render={renderProps?.renderCardOverlay || renderProps?.renderCard}\n              disableDrag\n              className=\"opacity-90 rotate-3 shadow-2xl\"\n            />\n          ) : null}\n        </DragOverlay>\n      </DndContext>\n\n      {/* Task Detail Modal - same as Calendar */}\n      {/* v0.17.254: Added comments support */}\n      <TaskDetailModal\n        task={selectedCard}\n        isOpen={!!selectedCard}\n        onClose={() => setSelectedCard(null)}\n        onCardUpdate={handleModalCardUpdate}\n        theme={isDark ? 'dark' : 'light'}\n        locale={config?.locale === 'es' ? 'es' : 'en'}\n        availableUsers={availableUsers}\n        availableTags={availableTags}\n        onCreateTag={onCreateTag}\n        attachments={selectedCard ? attachmentsByCard?.get(selectedCard.id) || [] : []}\n        onUploadAttachments={onUploadAttachments}\n        onDeleteAttachment={onDeleteAttachment}\n        availableTasks={availableTasksForDependencies}\n        comments={comments}\n        onAddComment={onAddComment}\n        currentUser={currentUser}\n        mentionableUsers={mentionableUsers}\n      />\n    </KanbanThemeProvider>\n  )\n}\n\nfunction LoadingSkeleton({ columnCount }: { columnCount: number }) {\n  return (\n    <>\n      {Array.from({ length: columnCount }).map((_, i) => (\n        <div key={i} className=\"asakaa-column\">\n          <div className=\"asakaa-skeleton h-8 mb-3\" />\n          <div className=\"flex flex-col gap-2\">\n            <div className=\"asakaa-skeleton h-24\" />\n            <div className=\"asakaa-skeleton h-32\" />\n            <div className=\"asakaa-skeleton h-28\" />\n          </div>\n        </div>\n      ))}\n    </>\n  )\n}\n","import { useState, useRef, useEffect } from 'react';\r\nimport { Plus, ChevronDown, Download, FileSpreadsheet, FileText, FileJson } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport type { Column as ColumnType } from '../../types';\r\n\r\n// v0.17.27: Simple button mode vs column selector mode\r\n\r\n// Theme type for toolbar styling\r\ninterface KanbanToolbarTheme {\r\n  bgGrid: string;\r\n  bgSecondary: string;\r\n  border: string;\r\n  borderLight: string;\r\n  textPrimary: string;\r\n  textSecondary: string;\r\n  textTertiary: string;\r\n  accent: string;\r\n  accentLight: string;\r\n  hoverBg: string;\r\n}\r\n\r\n// Default themes\r\nconst darkTheme: KanbanToolbarTheme = {\r\n  bgGrid: '#0F1117',\r\n  bgSecondary: '#1A1D25',\r\n  border: 'rgba(255, 255, 255, 0.1)',\r\n  borderLight: 'rgba(255, 255, 255, 0.05)',\r\n  textPrimary: '#E5E7EB',\r\n  textSecondary: '#9CA3AF',\r\n  textTertiary: '#6B7280',\r\n  accent: '#3B82F6',\r\n  accentLight: 'rgba(59, 130, 246, 0.15)',\r\n  hoverBg: 'rgba(255, 255, 255, 0.05)',\r\n};\r\n\r\nconst lightTheme: KanbanToolbarTheme = {\r\n  bgGrid: '#FFFFFF',\r\n  bgSecondary: '#F9FAFB',\r\n  border: 'rgba(0, 0, 0, 0.1)',\r\n  borderLight: 'rgba(0, 0, 0, 0.05)',\r\n  textPrimary: '#111827',\r\n  textSecondary: '#6B7280',\r\n  textTertiary: '#9CA3AF',\r\n  accent: '#3B82F6',\r\n  accentLight: 'rgba(59, 130, 246, 0.1)',\r\n  hoverBg: 'rgba(0, 0, 0, 0.05)',\r\n};\r\n\r\n// i18n translations\r\ninterface KanbanToolbarI18n {\r\n  newTask: string;\r\n  selectColumn: string;\r\n  export: string;\r\n  exportCSV: string;\r\n  exportJSON: string;\r\n  exportExcel: string;\r\n}\r\n\r\nconst defaultI18n: KanbanToolbarI18n = {\r\n  newTask: 'Nueva Tarea',\r\n  selectColumn: 'Seleccionar columna',\r\n  export: 'Exportar',\r\n  exportCSV: 'CSV',\r\n  exportJSON: 'JSON',\r\n  exportExcel: 'Excel',\r\n};\r\n\r\nconst englishI18n: KanbanToolbarI18n = {\r\n  newTask: 'New Task',\r\n  selectColumn: 'Select column',\r\n  export: 'Export',\r\n  exportCSV: 'CSV',\r\n  exportJSON: 'JSON',\r\n  exportExcel: 'Excel',\r\n};\r\n\r\nexport interface KanbanToolbarProps {\r\n  columns: ColumnType[];\r\n  /**\r\n   * Handler for creating a new task.\r\n   * - If useColumnSelector is true: receives columnId as parameter\r\n   * - If useColumnSelector is false: called with no parameters (opens modal)\r\n   */\r\n  onCreateTask?: (columnId?: string) => void;\r\n  createTaskLabel?: string;\r\n  theme?: 'dark' | 'light';\r\n  locale?: 'es' | 'en';\r\n  /**\r\n   * v0.17.27: If true, shows dropdown to select column before creating task.\r\n   * If false, shows a simple button that triggers onCreateTask() without columnId.\r\n   * @default false\r\n   */\r\n  useColumnSelector?: boolean;\r\n  // Export handlers\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportExcel?: () => Promise<void>;\r\n  // Custom translations\r\n  translations?: Partial<KanbanToolbarI18n>;\r\n}\r\n\r\n// Column Selector Dropdown\r\ninterface ColumnSelectorProps {\r\n  columns: ColumnType[];\r\n  onSelect: (columnId: string) => void;\r\n  theme: KanbanToolbarTheme;\r\n  t: KanbanToolbarI18n;\r\n  createTaskLabel?: string;\r\n}\r\n\r\nfunction ColumnSelector({ columns, onSelect, theme, t, createTaskLabel }: ColumnSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const handleSelect = (columnId: string) => {\r\n    onSelect(columnId);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n        style={{\r\n          background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n          color: '#FFFFFF',\r\n          fontFamily: 'Inter, sans-serif',\r\n          fontWeight: 500,\r\n          boxShadow: '0 2px 8px rgba(59, 130, 246, 0.3)',\r\n        }}\r\n        whileHover={{\r\n          scale: 1.02,\r\n          boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Plus className=\"w-3.5 h-3.5\" />\r\n        <span>{createTaskLabel || t.newTask}</span>\r\n        <ChevronDown\r\n          className=\"w-3 h-3 transition-transform\"\r\n          style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}\r\n        />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute right-0 mt-2 w-48 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              <div\r\n                className=\"px-3 py-2 text-[10px] uppercase tracking-wider\"\r\n                style={{ color: theme.textTertiary }}\r\n              >\r\n                {t.selectColumn}\r\n              </div>\r\n              {columns\r\n                .sort((a, b) => a.position - b.position)\r\n                .map((column, index) => (\r\n                  <motion.button\r\n                    key={column.id}\r\n                    onClick={() => handleSelect(column.id)}\r\n                    className=\"w-full flex items-center gap-3 px-3 py-2.5 text-left transition-all\"\r\n                    style={{\r\n                      backgroundColor: 'transparent',\r\n                      borderBottom: index < columns.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                    }}\r\n                    whileHover={{\r\n                      backgroundColor: theme.hoverBg,\r\n                    }}\r\n                    initial={{ opacity: 0, x: -10 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.03 }}\r\n                  >\r\n                    {/* Column color indicator */}\r\n                    <div\r\n                      className=\"w-2 h-2 rounded-full\"\r\n                      style={{\r\n                        backgroundColor: column.color || theme.accent,\r\n                      }}\r\n                    />\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className=\"text-xs font-medium truncate\"\r\n                        style={{ color: theme.textPrimary }}\r\n                      >\r\n                        {column.title}\r\n                      </div>\r\n                      <div\r\n                        className=\"text-[10px] truncate\"\r\n                        style={{ color: theme.textTertiary }}\r\n                      >\r\n                        {column.cardIds.length} {column.cardIds.length === 1 ? 'tarea' : 'tareas'}\r\n                      </div>\r\n                    </div>\r\n                  </motion.button>\r\n                ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Export Dropdown Component\r\ninterface ExportDropdownProps {\r\n  theme: KanbanToolbarTheme;\r\n  t: KanbanToolbarI18n;\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportExcel?: () => Promise<void>;\r\n}\r\n\r\nfunction ExportDropdown({ theme, t, onExportCSV, onExportJSON, onExportExcel }: ExportDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isExporting, setIsExporting] = useState<string | null>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const hasAnyExport = onExportCSV || onExportJSON || onExportExcel;\r\n\r\n  if (!hasAnyExport) return null;\r\n\r\n  const exportOptions = [\r\n    {\r\n      id: 'csv',\r\n      label: t.exportCSV,\r\n      description: 'Comma-separated',\r\n      icon: <FileText className=\"w-4 h-4\" />,\r\n      handler: onExportCSV,\r\n    },\r\n    {\r\n      id: 'json',\r\n      label: t.exportJSON,\r\n      description: 'Data',\r\n      icon: <FileJson className=\"w-4 h-4\" />,\r\n      handler: onExportJSON,\r\n    },\r\n    {\r\n      id: 'excel',\r\n      label: t.exportExcel,\r\n      description: 'Spreadsheet',\r\n      icon: <FileSpreadsheet className=\"w-4 h-4\" />,\r\n      handler: onExportExcel,\r\n    },\r\n  ].filter(opt => opt.handler);\r\n\r\n  const handleExport = async (id: string, handler: (() => void | Promise<void>) | undefined) => {\r\n    if (!handler) return;\r\n\r\n    setIsExporting(id);\r\n    try {\r\n      await handler();\r\n    } catch (error) {\r\n      console.error(`Export ${id} failed:`, error);\r\n    } finally {\r\n      setIsExporting(null);\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n        style={{\r\n          backgroundColor: isOpen ? theme.accent : theme.bgSecondary,\r\n          border: `1px solid ${isOpen ? theme.accent : theme.borderLight}`,\r\n          color: isOpen ? '#FFFFFF' : theme.textSecondary,\r\n          fontFamily: 'Inter, sans-serif',\r\n          fontWeight: 500,\r\n        }}\r\n        whileHover={{\r\n          scale: 1.02,\r\n          backgroundColor: theme.accent,\r\n          color: '#FFFFFF',\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Download className=\"w-3.5 h-3.5\" />\r\n        <span>{t.export}</span>\r\n        <ChevronDown\r\n          className=\"w-3 h-3 transition-transform\"\r\n          style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}\r\n        />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute right-0 mt-2 w-44 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              {exportOptions.map((option, index) => (\r\n                <motion.button\r\n                  key={option.id}\r\n                  onClick={() => handleExport(option.id, option.handler)}\r\n                  disabled={isExporting !== null}\r\n                  className=\"w-full flex items-center gap-3 px-3 py-2.5 text-left transition-all\"\r\n                  style={{\r\n                    backgroundColor: 'transparent',\r\n                    borderBottom: index < exportOptions.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                  }}\r\n                  whileHover={{\r\n                    backgroundColor: theme.hoverBg,\r\n                  }}\r\n                  initial={{ opacity: 0, x: -10 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: index * 0.03 }}\r\n                >\r\n                  <div\r\n                    className=\"flex items-center justify-center w-8 h-8 rounded-md\"\r\n                    style={{\r\n                      backgroundColor: theme.accentLight,\r\n                      color: theme.accent,\r\n                    }}\r\n                  >\r\n                    {isExporting === option.id ? (\r\n                      <motion.div\r\n                        animate={{ rotate: 360 }}\r\n                        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n                      >\r\n                        <Download className=\"w-4 h-4\" />\r\n                      </motion.div>\r\n                    ) : (\r\n                      option.icon\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div\r\n                      className=\"text-xs font-medium truncate\"\r\n                      style={{ color: theme.textPrimary }}\r\n                    >\r\n                      {option.label}\r\n                    </div>\r\n                    <div\r\n                      className=\"text-[10px] truncate\"\r\n                      style={{ color: theme.textTertiary }}\r\n                    >\r\n                      {option.description}\r\n                    </div>\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Simple Create Task Button (no dropdown)\r\ninterface SimpleCreateButtonProps {\r\n  onClick: () => void;\r\n  label: string;\r\n}\r\n\r\nfunction SimpleCreateButton({ onClick, label }: SimpleCreateButtonProps) {\r\n  return (\r\n    <motion.button\r\n      onClick={onClick}\r\n      className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n      style={{\r\n        background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n        color: '#FFFFFF',\r\n        fontFamily: 'Inter, sans-serif',\r\n        fontWeight: 500,\r\n        boxShadow: '0 2px 8px rgba(59, 130, 246, 0.3)',\r\n      }}\r\n      whileHover={{\r\n        scale: 1.02,\r\n        boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n      }}\r\n      whileTap={{ scale: 0.98 }}\r\n    >\r\n      <Plus className=\"w-3.5 h-3.5\" />\r\n      <span>{label}</span>\r\n    </motion.button>\r\n  );\r\n}\r\n\r\nexport function KanbanToolbar({\r\n  columns,\r\n  onCreateTask,\r\n  createTaskLabel,\r\n  theme = 'dark',\r\n  locale = 'es',\r\n  useColumnSelector = false,\r\n  onExportCSV,\r\n  onExportJSON,\r\n  onExportExcel,\r\n  translations,\r\n}: KanbanToolbarProps) {\r\n  const themeStyles = theme === 'dark' ? darkTheme : lightTheme;\r\n  const t: KanbanToolbarI18n = {\r\n    ...(locale === 'es' ? defaultI18n : englishI18n),\r\n    ...translations,\r\n  };\r\n\r\n  const hasExport = onExportCSV || onExportJSON || onExportExcel;\r\n\r\n  // v0.17.37: Removed redundant task counts - column headers already show counts\r\n\r\n  return (\r\n    <div\r\n      className=\"h-12 px-4 flex items-center justify-end border-b sticky top-0 z-10\"\r\n      style={{\r\n        backgroundColor: themeStyles.bgGrid,\r\n        borderColor: themeStyles.border,\r\n      }}\r\n    >\r\n      {/* Right Section - Create Task + Export */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {hasExport && (\r\n          <>\r\n            <ExportDropdown\r\n              theme={themeStyles}\r\n              t={t}\r\n              onExportCSV={onExportCSV}\r\n              onExportJSON={onExportJSON}\r\n              onExportExcel={onExportExcel}\r\n            />\r\n            {onCreateTask && (\r\n              <div\r\n                className=\"w-px h-6\"\r\n                style={{ backgroundColor: themeStyles.borderLight }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {onCreateTask && (\r\n          useColumnSelector ? (\r\n            <ColumnSelector\r\n              columns={columns}\r\n              onSelect={onCreateTask}\r\n              theme={themeStyles}\r\n              t={t}\r\n              createTaskLabel={createTaskLabel}\r\n            />\r\n          ) : (\r\n            <SimpleCreateButton\r\n              onClick={() => onCreateTask()}\r\n              label={createTaskLabel || t.newTask}\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * AddColumnButton Component\r\n * Button to add new columns to the Kanban board\r\n * @module components/Board/AddColumnButton\r\n */\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface AddColumnButtonProps {\r\n  /** Callback when a new column should be created */\r\n  onAddColumn: (title: string) => void\r\n  /** Custom class name */\r\n  className?: string\r\n  /** Placeholder text for input */\r\n  placeholder?: string\r\n  /** Button label */\r\n  buttonLabel?: string\r\n  /** Whether the button is disabled */\r\n  disabled?: boolean\r\n}\r\n\r\n/**\r\n * AddColumnButton - A button that allows users to add new columns to the Kanban board\r\n *\r\n * Can be used in two modes:\r\n * 1. Simple mode: Just a button that calls onAddColumn with a default name\r\n * 2. Input mode: Shows an input field for the user to type the column name\r\n *\r\n * @example\r\n * ```tsx\r\n * // Simple usage - inside KanbanBoard as children\r\n * <KanbanBoard board={board} callbacks={callbacks}>\r\n *   <AddColumnButton onAddColumn={(title) => callbacks.onColumnCreate?.({ title, position: 1000 })} />\r\n * </KanbanBoard>\r\n *\r\n * // With useKanbanState hook\r\n * const { helpers } = useKanbanState({ initialBoard })\r\n * <AddColumnButton onAddColumn={(title) => helpers.addColumn({ title, position: Date.now() })} />\r\n * ```\r\n */\r\nexport function AddColumnButton({\r\n  onAddColumn,\r\n  className,\r\n  placeholder = 'Nombre de la columna...',\r\n  buttonLabel = 'Agregar Columna',\r\n  disabled = false,\r\n}: AddColumnButtonProps) {\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [title, setTitle] = useState('')\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    const trimmedTitle = title.trim()\r\n    if (trimmedTitle) {\r\n      onAddColumn(trimmedTitle)\r\n      setTitle('')\r\n      setIsEditing(false)\r\n    }\r\n  }, [title, onAddColumn])\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === 'Enter') {\r\n        e.preventDefault()\r\n        handleSubmit()\r\n      } else if (e.key === 'Escape') {\r\n        setTitle('')\r\n        setIsEditing(false)\r\n      }\r\n    },\r\n    [handleSubmit]\r\n  )\r\n\r\n  const handleBlur = useCallback(() => {\r\n    // Small delay to allow submit button click to register\r\n    setTimeout(() => {\r\n      if (!title.trim()) {\r\n        setIsEditing(false)\r\n      }\r\n    }, 150)\r\n  }, [title])\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <div\r\n        className={cn(\r\n          'asakaa-add-column asakaa-add-column--editing',\r\n          className\r\n        )}\r\n      >\r\n        <div className=\"asakaa-add-column__input-wrapper\">\r\n          <input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            onBlur={handleBlur}\r\n            placeholder={placeholder}\r\n            autoFocus\r\n            className=\"asakaa-add-column__input\"\r\n          />\r\n          <div className=\"asakaa-add-column__actions\">\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={!title.trim()}\r\n              className=\"asakaa-add-column__submit\"\r\n              type=\"button\"\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <polyline points=\"20 6 9 17 4 12\" />\r\n              </svg>\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setTitle('')\r\n                setIsEditing(false)\r\n              }}\r\n              className=\"asakaa-add-column__cancel\"\r\n              type=\"button\"\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('asakaa-add-column', className)}>\r\n      <button\r\n        onClick={() => setIsEditing(true)}\r\n        disabled={disabled}\r\n        className=\"asakaa-add-column__button\"\r\n        type=\"button\"\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        >\r\n          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n          <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n        </svg>\r\n        {buttonLabel}\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * AddCardButton Component - ClickUp-style inline task creation\r\n * Inline form to add new cards/tasks to a Kanban column\r\n * @module components/Board/AddCardButton\r\n */\r\n\r\nimport { useState, useCallback, useRef, useEffect } from 'react'\r\nimport { cn } from '../../utils'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\n\r\nexport interface AddCardData {\r\n  /** Task name (required) */\r\n  name: string\r\n  /** Column ID where the card will be created */\r\n  columnId: string\r\n  /** Assigned user IDs */\r\n  assigneeIds?: string[]\r\n  /** Start date */\r\n  startDate?: Date\r\n  /** End date / due date */\r\n  endDate?: Date\r\n  /** Priority */\r\n  priority?: 'low' | 'medium' | 'high' | 'urgent'\r\n}\r\n\r\nexport interface AddCardButtonProps {\r\n  /** Column ID where cards will be created */\r\n  columnId: string\r\n  /** Callback when a new card should be created */\r\n  onAddCard: (data: AddCardData) => void | Promise<void>\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** Custom class name */\r\n  className?: string\r\n  /** Placeholder text for input */\r\n  placeholder?: string\r\n  /** Button label */\r\n  buttonLabel?: string\r\n  /** Whether the button is disabled */\r\n  disabled?: boolean\r\n  /** Theme: 'light' or 'dark' */\r\n  theme?: 'light' | 'dark'\r\n  /** Locale for translations */\r\n  locale?: 'en' | 'es'\r\n}\r\n\r\n/**\r\n * AddCardButton - ClickUp-style inline form to add new cards to a Kanban column\r\n *\r\n * Features:\r\n * - Expandable inline form with accent border\r\n * - Quick name input with inline action buttons\r\n * - Optional: assignee selector, date picker, priority\r\n * - Keyboard shortcuts (Enter to save, Escape to cancel)\r\n *\r\n * @example\r\n * ```tsx\r\n * <AddCardButton\r\n *   columnId=\"todo\"\r\n *   onAddCard={(data) => createTask(data)}\r\n *   availableUsers={users}\r\n * />\r\n * ```\r\n */\r\nexport function AddCardButton({\r\n  columnId,\r\n  onAddCard,\r\n  availableUsers = [],\r\n  className,\r\n  placeholder,\r\n  buttonLabel,\r\n  disabled = false,\r\n  theme = 'dark',\r\n  locale = 'es',\r\n}: AddCardButtonProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n  const [name, setName] = useState('')\r\n  const [selectedAssignees, setSelectedAssignees] = useState<string[]>([])\r\n  const [startDate, setStartDate] = useState<string>('')\r\n  const [endDate, setEndDate] = useState<string>('')\r\n  const [priority, setPriority] = useState<'low' | 'medium' | 'high' | 'urgent' | ''>('')\r\n  const [showAssignees, setShowAssignees] = useState(false)\r\n  const [showDates, setShowDates] = useState(false)\r\n  const [showPriority, setShowPriority] = useState(false)\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n  const formRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Translations\r\n  const t = {\r\n    placeholder: placeholder || (locale === 'es' ? 'Nombre de la tarea...' : 'Task Name...'),\r\n    buttonLabel: buttonLabel || (locale === 'es' ? 'Agregar Tarea' : 'Add Task'),\r\n    save: locale === 'es' ? 'Guardar' : 'Save',\r\n    addAssignee: locale === 'es' ? 'Agregar asignado' : 'Add assignee',\r\n    addDates: locale === 'es' ? 'Agregar fechas' : 'Add dates',\r\n    addPriority: locale === 'es' ? 'Agregar prioridad' : 'Add priority',\r\n    startDate: locale === 'es' ? 'Inicio' : 'Start',\r\n    endDate: locale === 'es' ? 'Fin' : 'End',\r\n    low: locale === 'es' ? 'Baja' : 'Low',\r\n    medium: locale === 'es' ? 'Media' : 'Medium',\r\n    high: locale === 'es' ? 'Alta' : 'High',\r\n    urgent: locale === 'es' ? 'Urgente' : 'Urgent',\r\n  }\r\n\r\n  // Cancel handler - defined early for useEffect dependency\r\n  const handleCancel = useCallback(() => {\r\n    setName('')\r\n    setSelectedAssignees([])\r\n    setStartDate('')\r\n    setEndDate('')\r\n    setPriority('')\r\n    setShowAssignees(false)\r\n    setShowDates(false)\r\n    setShowPriority(false)\r\n    setIsExpanded(false)\r\n  }, [])\r\n\r\n  // Focus input when expanded\r\n  useEffect(() => {\r\n    if (isExpanded && inputRef.current) {\r\n      inputRef.current.focus()\r\n    }\r\n  }, [isExpanded])\r\n\r\n  // Handle click outside to collapse\r\n  useEffect(() => {\r\n    if (!isExpanded) return\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (formRef.current && !formRef.current.contains(e.target as Node)) {\r\n        if (!name.trim()) {\r\n          handleCancel()\r\n        }\r\n      }\r\n    }\r\n\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [isExpanded, name, handleCancel])\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    const trimmedName = name.trim()\r\n    if (!trimmedName || isSubmitting) return\r\n\r\n    setIsSubmitting(true)\r\n\r\n    try {\r\n      await onAddCard({\r\n        name: trimmedName,\r\n        columnId,\r\n        assigneeIds: selectedAssignees.length > 0 ? selectedAssignees : undefined,\r\n        startDate: startDate ? new Date(startDate) : undefined,\r\n        endDate: endDate ? new Date(endDate) : undefined,\r\n        priority: priority || undefined,\r\n      })\r\n\r\n      // Reset form\r\n      setName('')\r\n      setSelectedAssignees([])\r\n      setStartDate('')\r\n      setEndDate('')\r\n      setPriority('')\r\n      setShowAssignees(false)\r\n      setShowDates(false)\r\n      setShowPriority(false)\r\n      // Keep expanded for quick consecutive adds\r\n      inputRef.current?.focus()\r\n    } catch (error) {\r\n      console.error('Error creating card:', error)\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }, [name, columnId, selectedAssignees, startDate, endDate, priority, onAddCard, isSubmitting])\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === 'Enter' && !e.shiftKey) {\r\n        e.preventDefault()\r\n        handleSubmit()\r\n      } else if (e.key === 'Escape') {\r\n        handleCancel()\r\n      }\r\n    },\r\n    [handleSubmit, handleCancel]\r\n  )\r\n\r\n  const toggleAssignee = useCallback((userId: string) => {\r\n    setSelectedAssignees((prev) =>\r\n      prev.includes(userId) ? prev.filter((id) => id !== userId) : [...prev, userId]\r\n    )\r\n  }, [])\r\n\r\n  // Theme-based colors\r\n  const isDark = theme === 'dark'\r\n\r\n  // ClickUp-style \"+ Add Task\" button (collapsed state)\r\n  if (!isExpanded) {\r\n    return (\r\n      <button\r\n        onClick={() => setIsExpanded(true)}\r\n        disabled={disabled}\r\n        className={cn(\r\n          'w-full flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-200',\r\n          'text-emerald-500 hover:text-emerald-400',\r\n          isDark ? 'hover:bg-[#2a2a3e]' : 'hover:bg-gray-100',\r\n          disabled && 'opacity-50 cursor-not-allowed',\r\n          className\r\n        )}\r\n        type=\"button\"\r\n      >\r\n        <svg\r\n          width=\"16\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        >\r\n          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n          <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n        </svg>\r\n        <span className=\"text-sm font-medium\">{t.buttonLabel}</span>\r\n      </button>\r\n    )\r\n  }\r\n\r\n  // ClickUp-style expanded form with accent border\r\n  return (\r\n    <div\r\n      ref={formRef}\r\n      className={cn(\r\n        'rounded-lg overflow-hidden shadow-lg',\r\n        isDark ? 'bg-[#1e1e2e]' : 'bg-white',\r\n        className\r\n      )}\r\n      style={{\r\n        border: '2px solid #10b981', // Emerald/turquoise accent border like ClickUp\r\n      }}\r\n    >\r\n      {/* Main input area */}\r\n      <div className=\"p-3\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder={t.placeholder}\r\n          disabled={isSubmitting}\r\n          className={cn(\r\n            'w-full px-0 py-1 text-sm font-medium border-0 bg-transparent focus:outline-none focus:ring-0',\r\n            isDark ? 'text-gray-100 placeholder-gray-500' : 'text-gray-800 placeholder-gray-400'\r\n          )}\r\n        />\r\n\r\n        {/* Inline action buttons row - ClickUp style */}\r\n        <div className=\"flex items-center gap-1 mt-3\">\r\n          {/* Add Assignee */}\r\n          {availableUsers.length > 0 && (\r\n            <button\r\n              onClick={() => setShowAssignees(!showAssignees)}\r\n              className={cn(\r\n                'flex items-center gap-1 px-2 py-1.5 rounded-md text-xs transition-colors',\r\n                showAssignees || selectedAssignees.length > 0\r\n                  ? 'bg-emerald-500/20 text-emerald-400'\r\n                  : isDark\r\n                    ? 'text-gray-400 hover:bg-[#2a2a3e] hover:text-gray-300'\r\n                    : 'text-gray-500 hover:bg-gray-100 hover:text-gray-700'\r\n              )}\r\n              type=\"button\"\r\n              title={t.addAssignee}\r\n            >\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" />\r\n                <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n              </svg>\r\n              {selectedAssignees.length > 0 && (\r\n                <span className=\"ml-0.5\">{selectedAssignees.length}</span>\r\n              )}\r\n            </button>\r\n          )}\r\n\r\n          {/* Add Dates */}\r\n          <button\r\n            onClick={() => setShowDates(!showDates)}\r\n            className={cn(\r\n              'flex items-center gap-1 px-2 py-1.5 rounded-md text-xs transition-colors',\r\n              showDates || startDate || endDate\r\n                ? 'bg-blue-500/20 text-blue-400'\r\n                : isDark\r\n                  ? 'text-gray-400 hover:bg-[#2a2a3e] hover:text-gray-300'\r\n                  : 'text-gray-500 hover:bg-gray-100 hover:text-gray-700'\r\n            )}\r\n            type=\"button\"\r\n            title={t.addDates}\r\n          >\r\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n              <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\r\n              <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\r\n              <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Add Priority */}\r\n          <button\r\n            onClick={() => setShowPriority(!showPriority)}\r\n            className={cn(\r\n              'flex items-center gap-1 px-2 py-1.5 rounded-md text-xs transition-colors',\r\n              showPriority || priority\r\n                ? priority === 'urgent' ? 'bg-red-500/20 text-red-400'\r\n                  : priority === 'high' ? 'bg-orange-500/20 text-orange-400'\r\n                  : priority === 'medium' ? 'bg-yellow-500/20 text-yellow-400'\r\n                  : priority === 'low' ? 'bg-green-500/20 text-green-400'\r\n                  : 'bg-orange-500/20 text-orange-400'\r\n                : isDark\r\n                  ? 'text-gray-400 hover:bg-[#2a2a3e] hover:text-gray-300'\r\n                  : 'text-gray-500 hover:bg-gray-100 hover:text-gray-700'\r\n            )}\r\n            type=\"button\"\r\n            title={t.addPriority}\r\n          >\r\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\" />\r\n              <line x1=\"4\" y1=\"22\" x2=\"4\" y2=\"15\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Spacer */}\r\n          <div className=\"flex-1\" />\r\n\r\n          {/* Save button */}\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={!name.trim() || isSubmitting}\r\n            className={cn(\r\n              'px-3 py-1.5 rounded-md text-xs font-medium text-white transition-all',\r\n              'bg-emerald-500 hover:bg-emerald-600',\r\n              'disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-emerald-500'\r\n            )}\r\n            type=\"button\"\r\n          >\r\n            {isSubmitting ? (\r\n              <div className=\"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n            ) : (\r\n              t.save\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expandable Sections */}\r\n      {showAssignees && availableUsers.length > 0 && (\r\n        <div className={cn(\r\n          'px-3 pb-3 pt-0',\r\n          'border-t',\r\n          isDark ? 'border-[#3a3a4e]' : 'border-gray-200'\r\n        )}>\r\n          <div className=\"flex flex-wrap gap-1.5 pt-3\">\r\n            {availableUsers.map((user) => (\r\n              <button\r\n                key={user.id}\r\n                onClick={() => toggleAssignee(user.id)}\r\n                className={cn(\r\n                  'flex items-center gap-1.5 px-2 py-1 rounded-full text-xs transition-all',\r\n                  selectedAssignees.includes(user.id)\r\n                    ? 'bg-emerald-500 text-white'\r\n                    : isDark\r\n                      ? 'bg-[#2a2a3e] text-gray-300 hover:bg-[#3a3a4e]'\r\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                )}\r\n                type=\"button\"\r\n              >\r\n                {user.avatar ? (\r\n                  <img src={user.avatar} alt={user.name} className=\"w-4 h-4 rounded-full\" />\r\n                ) : (\r\n                  <div className={cn(\r\n                    'w-4 h-4 rounded-full flex items-center justify-center text-[10px] font-medium',\r\n                    selectedAssignees.includes(user.id) ? 'bg-emerald-600 text-white' : 'bg-emerald-500 text-white'\r\n                  )}>\r\n                    {user.name.charAt(0).toUpperCase()}\r\n                  </div>\r\n                )}\r\n                <span>{user.name.split(' ')[0]}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showDates && (\r\n        <div className={cn(\r\n          'px-3 pb-3 pt-0',\r\n          'border-t',\r\n          isDark ? 'border-[#3a3a4e]' : 'border-gray-200'\r\n        )}>\r\n          <div className=\"grid grid-cols-2 gap-2 pt-3\">\r\n            <div>\r\n              <label className={cn('block text-[10px] uppercase tracking-wide mb-1', isDark ? 'text-gray-500' : 'text-gray-400')}>\r\n                {t.startDate}\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={startDate}\r\n                onChange={(e) => setStartDate(e.target.value)}\r\n                className={cn(\r\n                  'w-full px-2 py-1.5 rounded text-xs border',\r\n                  isDark\r\n                    ? 'bg-[#2a2a3e] border-[#3a3a4e] text-gray-200'\r\n                    : 'bg-gray-50 border-gray-200 text-gray-800'\r\n                )}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className={cn('block text-[10px] uppercase tracking-wide mb-1', isDark ? 'text-gray-500' : 'text-gray-400')}>\r\n                {t.endDate}\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={endDate}\r\n                onChange={(e) => setEndDate(e.target.value)}\r\n                className={cn(\r\n                  'w-full px-2 py-1.5 rounded text-xs border',\r\n                  isDark\r\n                    ? 'bg-[#2a2a3e] border-[#3a3a4e] text-gray-200'\r\n                    : 'bg-gray-50 border-gray-200 text-gray-800'\r\n                )}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showPriority && (\r\n        <div className={cn(\r\n          'px-3 pb-3 pt-0',\r\n          'border-t',\r\n          isDark ? 'border-[#3a3a4e]' : 'border-gray-200'\r\n        )}>\r\n          <div className=\"flex gap-1.5 pt-3\">\r\n            {(['low', 'medium', 'high', 'urgent'] as const).map((p) => {\r\n              const colors = {\r\n                low: 'bg-green-500',\r\n                medium: 'bg-yellow-500',\r\n                high: 'bg-orange-500',\r\n                urgent: 'bg-red-500',\r\n              }\r\n              return (\r\n                <button\r\n                  key={p}\r\n                  onClick={() => setPriority(priority === p ? '' : p)}\r\n                  className={cn(\r\n                    'flex-1 px-2 py-1.5 rounded text-xs font-medium transition-all',\r\n                    priority === p\r\n                      ? `${colors[p]} text-white`\r\n                      : isDark\r\n                        ? 'bg-[#2a2a3e] text-gray-400 hover:bg-[#3a3a4e]'\r\n                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                  )}\r\n                  type=\"button\"\r\n                >\r\n                  {t[p]}\r\n                </button>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Error Boundary Component\r\n * Catches errors in child components and provides fallback UI\r\n * @module components/ErrorBoundary\r\n */\r\n\r\nimport React, { Component, ErrorInfo, ReactNode } from 'react'\r\n\r\nexport interface ErrorBoundaryProps {\r\n  /** Child components to wrap */\r\n  children: ReactNode\r\n  /** Custom fallback UI (receives error and reset callback) */\r\n  fallback?: (error: Error, reset: () => void) => ReactNode\r\n  /** Callback when error is caught */\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void\r\n  /** Component identifier for error tracking */\r\n  componentName?: string\r\n}\r\n\r\ninterface ErrorBoundaryState {\r\n  hasError: boolean\r\n  error: Error | null\r\n  errorInfo: ErrorInfo | null\r\n}\r\n\r\n/**\r\n * Error Boundary for catching React errors\r\n *\r\n * @example\r\n * ```tsx\r\n * <ErrorBoundary\r\n *   onError={(error) => console.error(error)}\r\n *   componentName=\"KanbanBoard\"\r\n * >\r\n *   <KanbanBoard {...props} />\r\n * </ErrorBoundary>\r\n * ```\r\n */\r\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\r\n    const { onError, componentName } = this.props\r\n\r\n    // Log error to console in development\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.error(`Error in ${componentName || 'Component'}:`, error)\r\n      console.error('Error Info:', errorInfo)\r\n    }\r\n\r\n    // Update state with error info\r\n    this.setState({\r\n      errorInfo,\r\n    })\r\n\r\n    // Call custom error handler\r\n    if (onError) {\r\n      try {\r\n        onError(error, errorInfo)\r\n      } catch (handlerError) {\r\n        console.error('Error in error handler:', handlerError)\r\n      }\r\n    }\r\n  }\r\n\r\n  resetError = (): void => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    })\r\n  }\r\n\r\n  render(): ReactNode {\r\n    const { hasError, error } = this.state\r\n    const { children, fallback, componentName } = this.props\r\n\r\n    if (hasError && error) {\r\n      // Use custom fallback if provided\r\n      if (fallback) {\r\n        return fallback(error, this.resetError)\r\n      }\r\n\r\n      // Default fallback UI\r\n      return (\r\n        <div\r\n          className=\"p-6 rounded-lg border\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(239, 68, 68, 0.3)',\r\n          }}\r\n        >\r\n          <div className=\"flex items-start gap-3\">\r\n            {/* Error icon */}\r\n            <svg\r\n              width=\"24\"\r\n              height=\"24\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              className=\"flex-shrink-0\"\r\n            >\r\n              <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"#EF4444\" strokeWidth=\"2\" />\r\n              <path d=\"M12 8V12\" stroke=\"#EF4444\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n              <circle cx=\"12\" cy=\"16\" r=\"1\" fill=\"#EF4444\" />\r\n            </svg>\r\n\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"text-lg font-semibold text-red-400 mb-1\">\r\n                {componentName ? `Error in ${componentName}` : 'Something went wrong'}\r\n              </h3>\r\n              <p className=\"text-sm text-white/70 mb-3\">\r\n                {error.message || 'An unexpected error occurred'}\r\n              </p>\r\n\r\n              {process.env.NODE_ENV === 'development' && (\r\n                <details className=\"mb-3\">\r\n                  <summary className=\"text-xs text-white/50 cursor-pointer hover:text-white/70 mb-2\">\r\n                    Error Details (Development Only)\r\n                  </summary>\r\n                  <pre className=\"text-xs text-white/60 bg-black/30 p-3 rounded overflow-auto max-h-48\">\r\n                    {error.stack}\r\n                  </pre>\r\n                </details>\r\n              )}\r\n\r\n              <button\r\n                onClick={this.resetError}\r\n                className=\"px-4 py-2 rounded-lg text-sm font-medium transition-all hover:bg-red-600/20 border border-red-500/30\"\r\n                style={{ color: '#EF4444' }}\r\n              >\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return children\r\n  }\r\n}\r\n\r\n/**\r\n * Hook-based error boundary wrapper\r\n * Use this for functional components\r\n */\r\nexport function withErrorBoundary<P extends object>(\r\n  Component: React.ComponentType<P>,\r\n  errorBoundaryProps?: Omit<ErrorBoundaryProps, 'children'>\r\n) {\r\n  const WrappedComponent = (props: P) => (\r\n    <ErrorBoundary {...errorBoundaryProps}>\r\n      <Component {...props} />\r\n    </ErrorBoundary>\r\n  )\r\n\r\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name || 'Component'})`\r\n\r\n  return WrappedComponent\r\n}\r\n","/**\r\n * CommandPalette - Premium command palette (Cmd+K / Ctrl+K)\r\n * Quick access to all board actions, search, navigation, and AI features\r\n */\r\n\r\nimport { useEffect, useState, useCallback } from 'react'\r\nimport { Command } from 'cmdk'\r\nimport { Portal } from '../Portal'\r\nimport type { Board, Priority, User } from '../../types'\r\nimport './command-palette.css'\r\n\r\nexport interface CommandPaletteProps {\r\n  /** Current board state */\r\n  board: Board\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Callback to create a new card */\r\n  onCreateCard?: (columnId: string, title: string) => void\r\n\r\n  /** Callback to navigate to a card */\r\n  onNavigateToCard?: (cardId: string) => void\r\n\r\n  /** Callback to search and filter cards */\r\n  onSearch?: (query: string) => void\r\n\r\n  /** Callback to change card priority */\r\n  onChangePriority?: (cardId: string, priority: Priority) => void\r\n\r\n  /** Callback to assign user to card */\r\n  onAssignUser?: (cardId: string, userId: string) => void\r\n\r\n  /** AI Callbacks */\r\n  onGeneratePlan?: () => void\r\n  onPredictRisks?: () => void\r\n  onOpenAIUsage?: () => void\r\n\r\n  /** Custom keyboard shortcut (default: Cmd+K / Ctrl+K) */\r\n  shortcut?: string\r\n\r\n  /** Custom CSS class */\r\n  className?: string\r\n}\r\n\r\ntype CommandPage = 'home' | 'create-card' | 'navigate' | 'priority' | 'assign' | 'ai'\r\n\r\nexport function CommandPalette({\r\n  board,\r\n  onCreateCard,\r\n  onNavigateToCard,\r\n  onSearch,\r\n  onChangePriority,\r\n  onAssignUser,\r\n  onGeneratePlan,\r\n  onPredictRisks,\r\n  onOpenAIUsage,\r\n  shortcut = 'k',\r\n  className = '',\r\n}: CommandPaletteProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [search, setSearch] = useState('')\r\n  const [page, setPage] = useState<CommandPage>('home')\r\n  const [selectedColumn, setSelectedColumn] = useState<string>('')\r\n  const [selectedCard, setSelectedCard] = useState<string>('')\r\n\r\n  // Keyboard shortcut handler\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if ((e.metaKey || e.ctrlKey) && e.key === shortcut) {\r\n        e.preventDefault()\r\n        setIsOpen((open) => !open)\r\n      }\r\n\r\n      // Escape to close\r\n      if (e.key === 'Escape') {\r\n        setIsOpen(false)\r\n        setPage('home')\r\n        setSearch('')\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKeyDown)\r\n    return () => document.removeEventListener('keydown', handleKeyDown)\r\n  }, [shortcut])\r\n\r\n  // Reset state when closed\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setPage('home')\r\n      setSearch('')\r\n      setSelectedColumn('')\r\n      setSelectedCard('')\r\n    }\r\n  }, [isOpen])\r\n\r\n  const handleClose = useCallback(() => {\r\n    setIsOpen(false)\r\n  }, [])\r\n\r\n  const handleSelectCommand = useCallback(\r\n    (value: string) => {\r\n      // Parse command value\r\n      const [action, param] = value.split(':')\r\n\r\n      switch (action) {\r\n        case 'create-card':\r\n          setPage('create-card')\r\n          break\r\n\r\n        case 'create-card-in':\r\n          setSelectedColumn(param || '')\r\n          // Focus on input to type card title\r\n          break\r\n\r\n        case 'navigate':\r\n          if (param) {\r\n            onNavigateToCard?.(param)\r\n            handleClose()\r\n          } else {\r\n            setPage('navigate')\r\n          }\r\n          break\r\n\r\n        case 'search':\r\n          onSearch?.(search)\r\n          handleClose()\r\n          break\r\n\r\n        case 'priority':\r\n          setPage('priority')\r\n          break\r\n\r\n        case 'set-priority':\r\n          if (selectedCard && param) {\r\n            onChangePriority?.(selectedCard, param as Priority)\r\n            handleClose()\r\n          }\r\n          break\r\n\r\n        case 'assign':\r\n          setPage('assign')\r\n          break\r\n\r\n        case 'assign-user':\r\n          if (selectedCard && param) {\r\n            onAssignUser?.(selectedCard, param)\r\n            handleClose()\r\n          }\r\n          break\r\n\r\n        case 'ai':\r\n          setPage('ai')\r\n          break\r\n\r\n        case 'ai-generate-plan':\r\n          onGeneratePlan?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'ai-predict-risks':\r\n          onPredictRisks?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'ai-usage':\r\n          onOpenAIUsage?.()\r\n          handleClose()\r\n          break\r\n\r\n        case 'back':\r\n          setPage('home')\r\n          break\r\n\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    [\r\n      search,\r\n      selectedCard,\r\n      onCreateCard,\r\n      onNavigateToCard,\r\n      onSearch,\r\n      onChangePriority,\r\n      onAssignUser,\r\n      onGeneratePlan,\r\n      onPredictRisks,\r\n      onOpenAIUsage,\r\n      handleClose,\r\n    ]\r\n  )\r\n\r\n  const handleCreateCard = useCallback(() => {\r\n    if (selectedColumn && search.trim()) {\r\n      onCreateCard?.(selectedColumn, search.trim())\r\n      handleClose()\r\n    }\r\n  }, [selectedColumn, search, onCreateCard, handleClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"command-palette-overlay\" onClick={handleClose}>\r\n        <div\r\n          className={`command-palette ${className}`}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <Command value={search} onValueChange={setSearch} label=\"Command Menu\">\r\n            <div className=\"command-palette-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n                <path d=\"m21 21-4.35-4.35\" />\r\n              </svg>\r\n              <Command.Input\r\n                placeholder={\r\n                  page === 'create-card' && selectedColumn\r\n                    ? 'Type card title and press Enter...'\r\n                    : page === 'create-card'\r\n                    ? 'Select a column first...'\r\n                    : 'Type a command or search...'\r\n                }\r\n                className=\"command-palette-input\"\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && page === 'create-card' && selectedColumn) {\r\n                    handleCreateCard()\r\n                  }\r\n                }}\r\n              />\r\n              <div className=\"command-palette-shortcut\">\r\n                <kbd>{navigator.platform.includes('Mac') ? '' : 'Ctrl'}</kbd>\r\n                <kbd>K</kbd>\r\n              </div>\r\n            </div>\r\n\r\n            <Command.List className=\"command-palette-list\">\r\n              <Command.Empty className=\"command-palette-empty\">\r\n                No results found.\r\n              </Command.Empty>\r\n\r\n              {/* HOME PAGE */}\r\n              {page === 'home' && (\r\n                <>\r\n                  <Command.Group heading=\"Actions\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"create-card\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\r\n                        <path d=\"M12 8v8m-4-4h8\" />\r\n                      </svg>\r\n                      <span>Create Card</span>\r\n                      <div className=\"command-palette-item-shortcut\">C</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"navigate\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <polyline points=\"12 16 16 12 12 8\" />\r\n                        <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" />\r\n                      </svg>\r\n                      <span>Navigate to Card</span>\r\n                      <div className=\"command-palette-item-shortcut\">G</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"search\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n                        <path d=\"m21 21-4.35-4.35\" />\r\n                      </svg>\r\n                      <span>Search Cards</span>\r\n                      <div className=\"command-palette-item-shortcut\">/</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n\r\n                  <Command.Group heading=\"AI Features\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"ai\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <span>AI Commands</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n\r\n                  <Command.Group heading=\"Cards\" className=\"command-palette-group\">\r\n                    {board.cards.slice(0, 5).map((card) => (\r\n                      <Command.Item\r\n                        key={card.id}\r\n                        value={`navigate:${card.id}`}\r\n                        onSelect={handleSelectCommand}\r\n                        className=\"command-palette-item\"\r\n                      >\r\n                        <div\r\n                          className=\"command-palette-item-dot\"\r\n                          style={{\r\n                            background:\r\n                              card.priority === 'URGENT'\r\n                                ? '#EF4444'\r\n                                : card.priority === 'HIGH'\r\n                                ? '#F59E0B'\r\n                                : card.priority === 'MEDIUM'\r\n                                ? '#3B82F6'\r\n                                : '#6B7280',\r\n                          }}\r\n                        />\r\n                        <span>{card.title}</span>\r\n                        {card.labels && card.labels.length > 0 && (\r\n                          <div className=\"command-palette-item-labels\">\r\n                            {card.labels.slice(0, 2).map((label) => (\r\n                              <span key={label} className=\"command-palette-item-label\">\r\n                                {label}\r\n                              </span>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </Command.Item>\r\n                    ))}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* CREATE CARD PAGE */}\r\n              {page === 'create-card' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group\r\n                    heading=\"Select Column\"\r\n                    className=\"command-palette-group\"\r\n                  >\r\n                    {board.columns.map((column) => (\r\n                      <Command.Item\r\n                        key={column.id}\r\n                        value={`create-card-in:${column.id}`}\r\n                        onSelect={handleSelectCommand}\r\n                        className=\"command-palette-item\"\r\n                      >\r\n                        <svg\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <rect x=\"3\" y=\"3\" width=\"7\" height=\"18\" rx=\"1\" />\r\n                        </svg>\r\n                        <span>{column.title}</span>\r\n                        <div className=\"command-palette-item-count\">\r\n                          {column.cardIds.length} cards\r\n                        </div>\r\n                      </Command.Item>\r\n                    ))}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* NAVIGATE PAGE */}\r\n              {page === 'navigate' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group heading=\"All Cards\" className=\"command-palette-group\">\r\n                    {board.cards.map((card) => {\r\n                      const column = board.columns.find((c) => c.id === card.columnId)\r\n                      return (\r\n                        <Command.Item\r\n                          key={card.id}\r\n                          value={`navigate:${card.id}`}\r\n                          onSelect={handleSelectCommand}\r\n                          className=\"command-palette-item\"\r\n                          keywords={[card.title, card.description || '', ...(card.labels || [])]}\r\n                        >\r\n                          <div\r\n                            className=\"command-palette-item-dot\"\r\n                            style={{\r\n                              background:\r\n                                card.priority === 'URGENT'\r\n                                  ? '#EF4444'\r\n                                  : card.priority === 'HIGH'\r\n                                  ? '#F59E0B'\r\n                                  : card.priority === 'MEDIUM'\r\n                                  ? '#3B82F6'\r\n                                  : '#6B7280',\r\n                            }}\r\n                          />\r\n                          <div className=\"command-palette-item-content\">\r\n                            <div>{card.title}</div>\r\n                            <div className=\"command-palette-item-meta\">\r\n                              {column?.title}\r\n                            </div>\r\n                          </div>\r\n                          {card.labels && card.labels.length > 0 && (\r\n                            <div className=\"command-palette-item-labels\">\r\n                              {card.labels.slice(0, 2).map((label) => (\r\n                                <span key={label} className=\"command-palette-item-label\">\r\n                                  {label}\r\n                                </span>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </Command.Item>\r\n                      )\r\n                    })}\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n\r\n              {/* AI PAGE */}\r\n              {page === 'ai' && (\r\n                <>\r\n                  <Command.Item\r\n                    value=\"back\"\r\n                    onSelect={handleSelectCommand}\r\n                    className=\"command-palette-item\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n                    </svg>\r\n                    <span>Back</span>\r\n                  </Command.Item>\r\n\r\n                  <Command.Group heading=\"AI Features\" className=\"command-palette-group\">\r\n                    <Command.Item\r\n                      value=\"ai-generate-plan\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <span>Generate Project Plan</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"ai-predict-risks\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z\" />\r\n                        <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\r\n                        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\r\n                      </svg>\r\n                      <span>Predict Risks</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n\r\n                    <Command.Item\r\n                      value=\"ai-usage\"\r\n                      onSelect={handleSelectCommand}\r\n                      className=\"command-palette-item command-palette-item-ai\"\r\n                    >\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\" />\r\n                        <path d=\"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" />\r\n                      </svg>\r\n                      <span>AI Usage & Costs</span>\r\n                      <div className=\"command-palette-item-badge\">AI</div>\r\n                    </Command.Item>\r\n                  </Command.Group>\r\n                </>\r\n              )}\r\n            </Command.List>\r\n\r\n            <div className=\"command-palette-footer\">\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd></kbd>\r\n                <kbd></kbd>\r\n                <span>Navigate</span>\r\n              </div>\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd>Enter</kbd>\r\n                <span>Select</span>\r\n              </div>\r\n              <div className=\"command-palette-footer-hint\">\r\n                <kbd>Esc</kbd>\r\n                <span>Close</span>\r\n              </div>\r\n            </div>\r\n          </Command>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * AttachmentUploader Component\r\n * Drag & drop file uploader with preview\r\n */\r\n\r\nimport { useState, useCallback, useRef } from 'react'\r\nimport type { Attachment } from '../../types'\r\nimport './attachments.css'\r\n\r\n// v0.17.171: Native DOM lightbox to escape all stacking contexts (framer-motion transform issue)\r\nfunction openNativeLightbox(\r\n  imageUrl: string,\r\n  imageName: string,\r\n  allImages: Attachment[],\r\n  currentIndex: number,\r\n  onNavigate: (newIndex: number) => void\r\n) {\r\n  // Remove any existing lightbox\r\n  const existing = document.getElementById('attachment-lightbox-native')\r\n  if (existing) existing.remove()\r\n\r\n  // Create lightbox container\r\n  const lightbox = document.createElement('div')\r\n  lightbox.id = 'attachment-lightbox-native'\r\n  lightbox.className = 'attachment-lightbox'\r\n  lightbox.style.cssText = `\r\n    position: fixed !important;\r\n    inset: 0 !important;\r\n    z-index: 2147483647 !important;\r\n    display: flex !important;\r\n    align-items: center !important;\r\n    justify-content: center !important;\r\n    background: rgba(0, 0, 0, 0.95) !important;\r\n    cursor: pointer !important;\r\n  `\r\n\r\n  // Create image\r\n  const img = document.createElement('img')\r\n  img.src = imageUrl\r\n  img.alt = imageName\r\n  img.className = 'attachment-lightbox-image'\r\n  img.style.cssText = `\r\n    max-width: 92vw !important;\r\n    max-height: 92vh !important;\r\n    object-fit: contain !important;\r\n    cursor: default !important;\r\n  `\r\n  img.onclick = (e) => e.stopPropagation()\r\n\r\n  // Create hint\r\n  const hint = document.createElement('div')\r\n  hint.className = 'attachment-lightbox-hint'\r\n  hint.textContent = 'Click anywhere or press ESC to close'\r\n  hint.style.cssText = `\r\n    position: absolute !important;\r\n    bottom: 24px !important;\r\n    left: 50% !important;\r\n    transform: translateX(-50%) !important;\r\n    font-size: 12px !important;\r\n    color: rgba(255, 255, 255, 0.4) !important;\r\n    pointer-events: none !important;\r\n  `\r\n\r\n  // Close function\r\n  const closeLightbox = () => {\r\n    lightbox.remove()\r\n    document.removeEventListener('keydown', handleKeyDown)\r\n  }\r\n\r\n  // Keyboard handler\r\n  const handleKeyDown = (e: KeyboardEvent) => {\r\n    if (e.key === 'Escape') {\r\n      closeLightbox()\r\n    } else if (e.key === 'ArrowLeft' && allImages.length > 1) {\r\n      const newIdx = currentIndex > 0 ? currentIndex - 1 : allImages.length - 1\r\n      closeLightbox()\r\n      onNavigate(newIdx)\r\n    } else if (e.key === 'ArrowRight' && allImages.length > 1) {\r\n      const newIdx = currentIndex < allImages.length - 1 ? currentIndex + 1 : 0\r\n      closeLightbox()\r\n      onNavigate(newIdx)\r\n    }\r\n  }\r\n\r\n  lightbox.onclick = closeLightbox\r\n  document.addEventListener('keydown', handleKeyDown)\r\n\r\n  // Add navigation if multiple images\r\n  if (allImages.length > 1) {\r\n    // Dots container\r\n    const dots = document.createElement('div')\r\n    dots.className = 'attachment-lightbox-dots'\r\n    dots.style.cssText = `\r\n      position: absolute !important;\r\n      bottom: 48px !important;\r\n      left: 50% !important;\r\n      transform: translateX(-50%) !important;\r\n      display: flex !important;\r\n      gap: 8px !important;\r\n      padding: 8px 12px !important;\r\n      background: rgba(0, 0, 0, 0.4) !important;\r\n      border-radius: 20px !important;\r\n    `\r\n    dots.onclick = (e) => e.stopPropagation()\r\n\r\n    allImages.forEach((_, idx) => {\r\n      const dot = document.createElement('button')\r\n      dot.className = `attachment-lightbox-dot ${idx === currentIndex ? 'active' : ''}`\r\n      dot.style.cssText = `\r\n        width: 8px !important;\r\n        height: 8px !important;\r\n        border-radius: 50% !important;\r\n        background: ${idx === currentIndex ? 'white' : 'rgba(255, 255, 255, 0.3)'} !important;\r\n        border: none !important;\r\n        padding: 0 !important;\r\n        cursor: pointer !important;\r\n      `\r\n      dot.onclick = (e) => {\r\n        e.stopPropagation()\r\n        closeLightbox()\r\n        onNavigate(idx)\r\n      }\r\n      dots.appendChild(dot)\r\n    })\r\n\r\n    // Navigation arrows\r\n    const prevBtn = document.createElement('button')\r\n    prevBtn.className = 'attachment-lightbox-nav-area attachment-lightbox-nav-prev'\r\n    prevBtn.innerHTML = '<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M15 18L9 12L15 6\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>'\r\n    prevBtn.style.cssText = `\r\n      position: absolute !important;\r\n      left: 0 !important;\r\n      top: 0 !important;\r\n      bottom: 0 !important;\r\n      width: 120px !important;\r\n      display: flex !important;\r\n      align-items: center !important;\r\n      justify-content: center !important;\r\n      background: transparent !important;\r\n      border: none !important;\r\n      cursor: pointer !important;\r\n      opacity: 0.5 !important;\r\n    `\r\n    prevBtn.onmouseenter = () => { prevBtn.style.opacity = '1' }\r\n    prevBtn.onmouseleave = () => { prevBtn.style.opacity = '0.5' }\r\n    prevBtn.onclick = (e) => {\r\n      e.stopPropagation()\r\n      const newIdx = currentIndex > 0 ? currentIndex - 1 : allImages.length - 1\r\n      closeLightbox()\r\n      onNavigate(newIdx)\r\n    }\r\n\r\n    const nextBtn = document.createElement('button')\r\n    nextBtn.className = 'attachment-lightbox-nav-area attachment-lightbox-nav-next'\r\n    nextBtn.innerHTML = '<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M9 18L15 12L9 6\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>'\r\n    nextBtn.style.cssText = `\r\n      position: absolute !important;\r\n      right: 0 !important;\r\n      top: 0 !important;\r\n      bottom: 0 !important;\r\n      width: 120px !important;\r\n      display: flex !important;\r\n      align-items: center !important;\r\n      justify-content: center !important;\r\n      background: transparent !important;\r\n      border: none !important;\r\n      cursor: pointer !important;\r\n      opacity: 0.5 !important;\r\n    `\r\n    nextBtn.onmouseenter = () => { nextBtn.style.opacity = '1' }\r\n    nextBtn.onmouseleave = () => { nextBtn.style.opacity = '0.5' }\r\n    nextBtn.onclick = (e) => {\r\n      e.stopPropagation()\r\n      const newIdx = currentIndex < allImages.length - 1 ? currentIndex + 1 : 0\r\n      closeLightbox()\r\n      onNavigate(newIdx)\r\n    }\r\n\r\n    lightbox.appendChild(dots)\r\n    lightbox.appendChild(prevBtn)\r\n    lightbox.appendChild(nextBtn)\r\n  }\r\n\r\n  lightbox.appendChild(img)\r\n  lightbox.appendChild(hint)\r\n  document.body.appendChild(lightbox)\r\n\r\n  // Fade out hint after 2 seconds\r\n  setTimeout(() => {\r\n    hint.style.transition = 'opacity 0.5s ease'\r\n    hint.style.opacity = '0'\r\n  }, 2000)\r\n}\r\n\r\nexport interface AttachmentUploaderProps {\r\n  /** Card ID for attachments */\r\n  cardId: string\r\n  /** Existing attachments */\r\n  attachments?: Attachment[]\r\n  /** Callback when files are uploaded */\r\n  onUpload?: (files: File[]) => Promise<void> | void\r\n  /** Callback when attachment is deleted */\r\n  onDelete?: (attachmentId: string) => void\r\n  /** Current user ID */\r\n  currentUserId?: string\r\n  /** Max file size in MB */\r\n  maxSizeMB?: number\r\n  /** Allowed file types (MIME types) */\r\n  allowedTypes?: string[]\r\n  /** Max number of files */\r\n  maxFiles?: number\r\n}\r\n\r\n/**\r\n * Format file size to human readable string\r\n */\r\nfunction formatFileSize(bytes: number): string {\r\n  if (bytes === 0) return '0 Bytes'\r\n  const k = 1024\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\r\n}\r\n\r\n/**\r\n * Get file icon based on MIME type\r\n */\r\nfunction getFileIcon(type: string): string {\r\n  if (type.startsWith('image/')) return ''\r\n  if (type.startsWith('video/')) return ''\r\n  if (type.startsWith('audio/')) return ''\r\n  if (type.includes('pdf')) return ''\r\n  if (type.includes('word') || type.includes('document')) return ''\r\n  if (type.includes('sheet') || type.includes('excel')) return ''\r\n  if (type.includes('presentation') || type.includes('powerpoint')) return ''\r\n  if (type.includes('zip') || type.includes('rar') || type.includes('compressed')) return ''\r\n  if (type.includes('text')) return ''\r\n  return ''\r\n}\r\n\r\n/**\r\n * Check if file is an image\r\n */\r\nfunction isImage(type: string): boolean {\r\n  return type.startsWith('image/')\r\n}\r\n\r\nexport function AttachmentUploader({\r\n  attachments = [],\r\n  onUpload,\r\n  onDelete,\r\n  maxSizeMB = 10,\r\n  allowedTypes,\r\n  maxFiles = 10,\r\n}: AttachmentUploaderProps) {\r\n  const [isDragging, setIsDragging] = useState(false)\r\n  const [isUploading, setIsUploading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n  // Store attachments ref for native lightbox navigation\r\n  const attachmentsRef = useRef(attachments)\r\n  attachmentsRef.current = attachments\r\n\r\n  // v0.17.171: Handle image click - use native DOM lightbox to escape all stacking contexts\r\n  const handleImageClick = useCallback((attachment: Attachment, e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    const imageAttachments = attachmentsRef.current.filter(a => isImage(a.type))\r\n    const currentIndex = imageAttachments.findIndex(a => a.id === attachment.id)\r\n\r\n    const handleNavigate = (newIndex: number) => {\r\n      const imgs = attachmentsRef.current.filter(a => isImage(a.type))\r\n      const newImg = imgs[newIndex]\r\n      if (newImg) {\r\n        openNativeLightbox(newImg.url, newImg.name, imgs, newIndex, handleNavigate)\r\n      }\r\n    }\r\n\r\n    openNativeLightbox(attachment.url, attachment.name, imageAttachments, currentIndex, handleNavigate)\r\n  }, [])\r\n\r\n  // Handle file validation\r\n  const validateFiles = useCallback(\r\n    (files: File[]): { valid: File[]; errors: string[] } => {\r\n      const valid: File[] = []\r\n      const errors: string[] = []\r\n\r\n      // Check max files\r\n      if (attachments.length + files.length > maxFiles) {\r\n        errors.push(`Maximum ${maxFiles} files allowed`)\r\n        return { valid, errors }\r\n      }\r\n\r\n      files.forEach((file) => {\r\n        // Check file size\r\n        const sizeMB = file.size / (1024 * 1024)\r\n        if (sizeMB > maxSizeMB) {\r\n          errors.push(`${file.name} is too large (max ${maxSizeMB}MB)`)\r\n          return\r\n        }\r\n\r\n        // Check file type\r\n        if (allowedTypes && !allowedTypes.some((type) => file.type.match(type))) {\r\n          errors.push(`${file.name} has invalid file type`)\r\n          return\r\n        }\r\n\r\n        valid.push(file)\r\n      })\r\n\r\n      return { valid, errors }\r\n    },\r\n    [attachments.length, maxFiles, maxSizeMB, allowedTypes]\r\n  )\r\n\r\n  // Handle file upload\r\n  const handleUpload = useCallback(\r\n    async (files: File[]) => {\r\n      const { valid, errors } = validateFiles(files)\r\n\r\n      if (errors.length > 0) {\r\n        setError(errors.join(', '))\r\n        setTimeout(() => setError(null), 5000)\r\n        return\r\n      }\r\n\r\n      if (valid.length === 0) return\r\n\r\n      setIsUploading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        await onUpload?.(valid)\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Upload failed')\r\n        setTimeout(() => setError(null), 5000)\r\n      } finally {\r\n        setIsUploading(false)\r\n      }\r\n    },\r\n    [validateFiles, onUpload]\r\n  )\r\n\r\n  // Handle drag events\r\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    setIsDragging(true)\r\n  }, [])\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    setIsDragging(false)\r\n  }, [])\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n  }, [])\r\n\r\n  const handleDrop = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      setIsDragging(false)\r\n\r\n      const files = Array.from(e.dataTransfer.files)\r\n      handleUpload(files)\r\n    },\r\n    [handleUpload]\r\n  )\r\n\r\n  // Handle file input change\r\n  const handleFileInputChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const files = e.target.files ? Array.from(e.target.files) : []\r\n      handleUpload(files)\r\n      // Reset input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = ''\r\n      }\r\n    },\r\n    [handleUpload]\r\n  )\r\n\r\n  // Handle click to open file dialog\r\n  const handleClick = useCallback(() => {\r\n    fileInputRef.current?.click()\r\n  }, [])\r\n\r\n  // Handle delete\r\n  const handleDelete = useCallback(\r\n    (attachmentId: string) => {\r\n      if (confirm('Are you sure you want to delete this attachment?')) {\r\n        onDelete?.(attachmentId)\r\n      }\r\n    },\r\n    [onDelete]\r\n  )\r\n\r\n  return (\r\n    <div className=\"attachment-uploader\">\r\n      {/* Drop zone */}\r\n      <div\r\n        className={`attachment-dropzone ${isDragging ? 'dragging' : ''} ${isUploading ? 'uploading' : ''}`}\r\n        onDragEnter={handleDragEnter}\r\n        onDragLeave={handleDragLeave}\r\n        onDragOver={handleDragOver}\r\n        onDrop={handleDrop}\r\n        onClick={handleClick}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          onChange={handleFileInputChange}\r\n          style={{ display: 'none' }}\r\n          accept={allowedTypes?.join(',')}\r\n        />\r\n\r\n        <div className=\"attachment-dropzone-content\">\r\n          {isUploading ? (\r\n            <>\r\n              <div className=\"attachment-spinner\" />\r\n              <p className=\"attachment-dropzone-text\">Uploading...</p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg\r\n                width=\"48\"\r\n                height=\"48\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"attachment-dropzone-icon\"\r\n              >\r\n                <path\r\n                  d=\"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M17 8L12 3L7 8\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M12 3V15\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n              <p className=\"attachment-dropzone-text\">\r\n                {isDragging ? 'Drop files here' : 'Drag & drop files here'}\r\n              </p>\r\n              <p className=\"attachment-dropzone-subtext\">or click to browse</p>\r\n              <p className=\"attachment-dropzone-info\">\r\n                Max {maxSizeMB}MB  {attachments.length}/{maxFiles} files\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error message */}\r\n      {error && (\r\n        <div className=\"attachment-error\">\r\n          <span className=\"attachment-error-icon\"></span>\r\n          <span className=\"attachment-error-text\">{error}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Attachment list */}\r\n      {attachments.length > 0 && (\r\n        <div className=\"attachment-list\">\r\n          {attachments.map((attachment) => (\r\n            <div key={attachment.id} className=\"attachment-item\">\r\n              <div className=\"attachment-preview\">\r\n                {isImage(attachment.type) && attachment.url ? (\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"attachment-thumbnail-btn\"\r\n                    onClick={(e) => handleImageClick(attachment, e)}\r\n                    title=\"Click to view full size\"\r\n                  >\r\n                    <img\r\n                      src={attachment.thumbnailUrl || attachment.url}\r\n                      alt={attachment.name}\r\n                      className=\"attachment-thumbnail\"\r\n                    />\r\n                    <div className=\"attachment-thumbnail-overlay\">\r\n                      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M15 3H21V9\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                        <path d=\"M9 21H3V15\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                        <path d=\"M21 3L14 10\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                        <path d=\"M3 21L10 14\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                      </svg>\r\n                    </div>\r\n                  </button>\r\n                ) : (\r\n                  <div className=\"attachment-icon\">{getFileIcon(attachment.type)}</div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"attachment-info\">\r\n                <a\r\n                  href={attachment.url}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"attachment-name\"\r\n                  title={attachment.name}\r\n                >\r\n                  {attachment.name}\r\n                </a>\r\n                <div className=\"attachment-meta\">\r\n                  <span className=\"attachment-size\">{formatFileSize(attachment.size)}</span>\r\n                  <span className=\"attachment-separator\"></span>\r\n                  <span className=\"attachment-date\">\r\n                    {new Date(attachment.uploadedAt).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => handleDelete(attachment.id)}\r\n                className=\"attachment-delete\"\r\n                title=\"Delete attachment\"\r\n                type=\"button\"\r\n              >\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    d=\"M18 6L6 18M6 6L18 18\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* v0.17.171: Lightbox is now handled via native DOM (openNativeLightbox) to escape all stacking contexts */}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardDetailModal - Premium full-featured card detail modal\r\n * Features: Details tab, Comments, Activity log, AI suggestions\r\n */\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport { AttachmentUploader } from '../Attachments'\r\nimport type { Card, User, Comment, Activity, Insight, AssigneeSuggestion, Attachment } from '../../types'\r\nimport './card-detail-modal.css'\r\n\r\nexport interface CardDetailModalProps {\r\n  /** Card to display */\r\n  card: Card | null\r\n\r\n  /** Whether modal is open */\r\n  isOpen: boolean\r\n\r\n  /** Close callback */\r\n  onClose: () => void\r\n\r\n  /** Update card callback */\r\n  onUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n\r\n  /** Delete card callback */\r\n  onDelete?: (cardId: string) => void\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Comments for this card */\r\n  comments?: Comment[]\r\n\r\n  /** Activity log for this card */\r\n  activities?: Activity[]\r\n\r\n  /** AI insights for this card */\r\n  aiInsights?: Insight[]\r\n\r\n  /** Attachments for this card */\r\n  attachments?: Attachment[]\r\n\r\n  /** Add comment callback */\r\n  onAddComment?: (cardId: string, content: string) => void\r\n\r\n  /** Delete comment callback */\r\n  onDeleteComment?: (commentId: string) => void\r\n\r\n  /** Upload attachments callback */\r\n  onUploadAttachments?: (cardId: string, files: File[]) => Promise<void> | void\r\n\r\n  /** Delete attachment callback */\r\n  onDeleteAttachment?: (attachmentId: string) => void\r\n\r\n  /** Current user ID */\r\n  currentUserId?: string\r\n\r\n  /** AI: Suggest assignee */\r\n  onSuggestAssignee?: (card: Card) => Promise<AssigneeSuggestion[]>\r\n\r\n  /** AI: Generate subtasks */\r\n  onGenerateSubtasks?: (card: Card) => Promise<Omit<Card, 'id'>[]>\r\n\r\n  /** AI: Estimate effort */\r\n  onEstimateEffort?: (card: Card) => Promise<{ hours: number; confidence: number }>\r\n}\r\n\r\ntype TabType = 'details' | 'comments' | 'activity' | 'attachments' | 'ai'\r\n\r\nexport function CardDetailModal({\r\n  card,\r\n  isOpen,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete,\r\n  availableUsers = [],\r\n  comments = [],\r\n  activities = [],\r\n  aiInsights = [],\r\n  attachments = [],\r\n  onAddComment,\r\n  onDeleteComment,\r\n  onUploadAttachments,\r\n  onDeleteAttachment,\r\n  onSuggestAssignee,\r\n  onGenerateSubtasks,\r\n  onEstimateEffort,\r\n  currentUserId = 'user-1',\r\n}: CardDetailModalProps) {\r\n  const [activeTab, setActiveTab] = useState<TabType>('details')\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [editedCard, setEditedCard] = useState<Partial<Card>>({})\r\n  const [newComment, setNewComment] = useState('')\r\n  const [aiLoading, setAiLoading] = useState(false)\r\n  const [aiSuggestions, setAiSuggestions] = useState<{\r\n    assignees?: AssigneeSuggestion[]\r\n    subtasks?: Omit<Card, 'id'>[]\r\n    effort?: { hours: number; confidence: number }\r\n  }>({})\r\n\r\n  if (!isOpen || !card) return null\r\n\r\n  const handleClose = useCallback(() => {\r\n    setIsEditing(false)\r\n    setEditedCard({})\r\n    setActiveTab('details')\r\n    setNewComment('')\r\n    setAiSuggestions({})\r\n    onClose()\r\n  }, [onClose])\r\n\r\n  const handleSave = useCallback(() => {\r\n    if (onUpdate && Object.keys(editedCard).length > 0) {\r\n      onUpdate(card.id, editedCard)\r\n      setEditedCard({})\r\n      setIsEditing(false)\r\n    }\r\n  }, [card.id, editedCard, onUpdate])\r\n\r\n  const handleDelete = useCallback(() => {\r\n    if (\r\n      onDelete &&\r\n      window.confirm('Are you sure you want to delete this card?')\r\n    ) {\r\n      onDelete(card.id)\r\n      handleClose()\r\n    }\r\n  }, [card.id, onDelete, handleClose])\r\n\r\n  const handleAddComment = useCallback(() => {\r\n    if (onAddComment && newComment.trim()) {\r\n      onAddComment(card.id, newComment.trim())\r\n      setNewComment('')\r\n    }\r\n  }, [card.id, newComment, onAddComment])\r\n\r\n  const handleSuggestAssignee = useCallback(async () => {\r\n    if (!onSuggestAssignee) return\r\n    setAiLoading(true)\r\n    try {\r\n      const suggestions = await onSuggestAssignee(card)\r\n      setAiSuggestions((prev) => ({ ...prev, assignees: suggestions }))\r\n    } catch (error) {\r\n      console.error('Failed to suggest assignee:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onSuggestAssignee])\r\n\r\n  const handleGenerateSubtasks = useCallback(async () => {\r\n    if (!onGenerateSubtasks) return\r\n    setAiLoading(true)\r\n    try {\r\n      const subtasks = await onGenerateSubtasks(card)\r\n      setAiSuggestions((prev) => ({ ...prev, subtasks }))\r\n    } catch (error) {\r\n      console.error('Failed to generate subtasks:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onGenerateSubtasks])\r\n\r\n  const handleEstimateEffort = useCallback(async () => {\r\n    if (!onEstimateEffort) return\r\n    setAiLoading(true)\r\n    try {\r\n      const effort = await onEstimateEffort(card)\r\n      setAiSuggestions((prev) => ({ ...prev, effort }))\r\n    } catch (error) {\r\n      console.error('Failed to estimate effort:', error)\r\n    } finally {\r\n      setAiLoading(false)\r\n    }\r\n  }, [card, onEstimateEffort])\r\n\r\n  const currentCard = { ...card, ...editedCard }\r\n\r\n  const assignedUsers = availableUsers.filter((user) =>\r\n    currentCard.assignedUserIds?.includes(user.id)\r\n  )\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"card-detail-overlay\" onClick={handleClose}>\r\n        <div\r\n          className=\"card-detail-modal\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"card-detail-header\">\r\n            <div className=\"card-detail-header-left\">\r\n              <div\r\n                className=\"card-detail-priority-dot\"\r\n                style={{\r\n                  background:\r\n                    currentCard.priority === 'URGENT'\r\n                      ? '#EF4444'\r\n                      : currentCard.priority === 'HIGH'\r\n                      ? '#F59E0B'\r\n                      : currentCard.priority === 'MEDIUM'\r\n                      ? '#3B82F6'\r\n                      : '#6B7280',\r\n                }}\r\n              />\r\n              {isEditing ? (\r\n                <input\r\n                  type=\"text\"\r\n                  value={editedCard.title ?? currentCard.title}\r\n                  onChange={(e) =>\r\n                    setEditedCard({ ...editedCard, title: e.target.value })\r\n                  }\r\n                  className=\"card-detail-title-input\"\r\n                  placeholder=\"Card title\"\r\n                />\r\n              ) : (\r\n                <h2 className=\"card-detail-title\">{currentCard.title}</h2>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"card-detail-header-actions\">\r\n              {isEditing ? (\r\n                <>\r\n                  <button\r\n                    onClick={handleSave}\r\n                    className=\"card-detail-btn card-detail-btn-primary\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsEditing(false)\r\n                      setEditedCard({})\r\n                    }}\r\n                    className=\"card-detail-btn\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={() => setIsEditing(true)}\r\n                  className=\"card-detail-btn\"\r\n                >\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\r\n                    <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                  </svg>\r\n                  Edit\r\n                </button>\r\n              )}\r\n\r\n              <button onClick={handleDelete} className=\"card-detail-btn card-detail-btn-danger\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <polyline points=\"3 6 5 6 21 6\" />\r\n                  <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                </svg>\r\n                Delete\r\n              </button>\r\n\r\n              <button onClick={handleClose} className=\"card-detail-btn-close\">\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"card-detail-tabs\">\r\n            <button\r\n              onClick={() => setActiveTab('details')}\r\n              className={`card-detail-tab ${activeTab === 'details' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z\" />\r\n                <polyline points=\"14 2 14 8 20 8\" />\r\n                <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                <polyline points=\"10 9 9 9 8 9\" />\r\n              </svg>\r\n              Details\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('comments')}\r\n              className={`card-detail-tab ${activeTab === 'comments' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n              </svg>\r\n              Comments\r\n              {comments.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{comments.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('activity')}\r\n              className={`card-detail-tab ${activeTab === 'activity' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\r\n              </svg>\r\n              Activity\r\n              {activities.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{activities.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('attachments')}\r\n              className={`card-detail-tab ${activeTab === 'attachments' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\r\n              </svg>\r\n              Attachments\r\n              {attachments.length > 0 && (\r\n                <span className=\"card-detail-tab-badge\">{attachments.length}</span>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setActiveTab('ai')}\r\n              className={`card-detail-tab ${activeTab === 'ai' ? 'active' : ''}`}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"16\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                <path d=\"M2 17L12 22L22 17\" />\r\n                <path d=\"M2 12L12 17L22 12\" />\r\n              </svg>\r\n              AI Insights\r\n              <span className=\"card-detail-tab-badge card-detail-tab-badge-ai\">\r\n                AI\r\n              </span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tab Content */}\r\n          <div className=\"card-detail-content\">\r\n            {/* DETAILS TAB */}\r\n            {activeTab === 'details' && (\r\n              <div className=\"card-detail-details\">\r\n                {/* Description */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Description</label>\r\n                  {isEditing ? (\r\n                    <textarea\r\n                      value={editedCard.description ?? currentCard.description ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({ ...editedCard, description: e.target.value })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      placeholder=\"Add a description...\"\r\n                      rows={4}\r\n                    />\r\n                  ) : (\r\n                    <p className=\"card-detail-text\">\r\n                      {currentCard.description || 'No description'}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Assignees */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Assigned To</label>\r\n                  {isEditing ? (\r\n                    <select\r\n                      multiple\r\n                      value={editedCard.assignedUserIds ?? currentCard.assignedUserIds ?? []}\r\n                      onChange={(e) => {\r\n                        const selected = Array.from(e.target.selectedOptions, (option) => option.value)\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          assignedUserIds: selected,\r\n                        })\r\n                      }}\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: '120px', padding: '8px 12px' }}\r\n                    >\r\n                      {availableUsers.map((user) => (\r\n                        <option key={user.id} value={user.id}>\r\n                          {user.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  ) : (\r\n                    <div className=\"card-detail-users\">\r\n                      {assignedUsers.length > 0 ? (\r\n                        assignedUsers.map((user) => (\r\n                          <div key={user.id} className=\"card-detail-user\">\r\n                            <div\r\n                              className=\"card-detail-user-avatar\"\r\n                              style={{ background: user.color }}\r\n                            >\r\n                              {user.initials}\r\n                            </div>\r\n                            <span>{user.name}</span>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <span className=\"card-detail-empty\">Unassigned</span>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Priority */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Priority</label>\r\n                  {isEditing ? (\r\n                    <select\r\n                      value={editedCard.priority ?? currentCard.priority ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          priority: (e.target.value || undefined) as any,\r\n                        })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: 'auto', padding: '8px 12px' }}\r\n                    >\r\n                      <option value=\"\">None</option>\r\n                      <option value=\"LOW\">LOW</option>\r\n                      <option value=\"MEDIUM\">MEDIUM</option>\r\n                      <option value=\"HIGH\">HIGH</option>\r\n                      <option value=\"URGENT\">URGENT</option>\r\n                    </select>\r\n                  ) : (\r\n                    <div className=\"card-detail-priority\">\r\n                      <div\r\n                        className=\"card-detail-priority-dot\"\r\n                        style={{\r\n                          background:\r\n                            currentCard.priority === 'URGENT'\r\n                              ? '#EF4444'\r\n                              : currentCard.priority === 'HIGH'\r\n                              ? '#F59E0B'\r\n                              : currentCard.priority === 'MEDIUM'\r\n                              ? '#3B82F6'\r\n                              : '#6B7280',\r\n                        }}\r\n                      />\r\n                      <span>{currentCard.priority || 'None'}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Labels */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Labels</label>\r\n                  <div className=\"card-detail-labels\">\r\n                    {currentCard.labels && currentCard.labels.length > 0 ? (\r\n                      currentCard.labels.map((label) => (\r\n                        <span key={label} className=\"card-detail-label-tag\">\r\n                          {label}\r\n                        </span>\r\n                      ))\r\n                    ) : (\r\n                      <span className=\"card-detail-empty\">No labels</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Dates */}\r\n                <div className=\"card-detail-section-row\">\r\n                  <div className=\"card-detail-section\">\r\n                    <label className=\"card-detail-label\">Start Date</label>\r\n                    {isEditing ? (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={\r\n                          editedCard.startDate\r\n                            ? new Date(editedCard.startDate).toISOString().split('T')[0]\r\n                            : currentCard.startDate\r\n                            ? new Date(currentCard.startDate).toISOString().split('T')[0]\r\n                            : ''\r\n                        }\r\n                        onChange={(e) =>\r\n                          setEditedCard({\r\n                            ...editedCard,\r\n                            startDate: e.target.value || undefined,\r\n                          })\r\n                        }\r\n                        className=\"card-detail-textarea\"\r\n                        style={{ height: 'auto', padding: '8px 12px' }}\r\n                      />\r\n                    ) : (\r\n                      <span className=\"card-detail-text\">\r\n                        {currentCard.startDate\r\n                          ? new Date(currentCard.startDate).toLocaleDateString()\r\n                          : 'Not set'}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"card-detail-section\">\r\n                    <label className=\"card-detail-label\">End Date</label>\r\n                    {isEditing ? (\r\n                      <input\r\n                        type=\"date\"\r\n                        value={\r\n                          editedCard.endDate\r\n                            ? new Date(editedCard.endDate).toISOString().split('T')[0]\r\n                            : currentCard.endDate\r\n                            ? new Date(currentCard.endDate).toISOString().split('T')[0]\r\n                            : ''\r\n                        }\r\n                        onChange={(e) =>\r\n                          setEditedCard({\r\n                            ...editedCard,\r\n                            endDate: e.target.value || undefined,\r\n                          })\r\n                        }\r\n                        className=\"card-detail-textarea\"\r\n                        style={{ height: 'auto', padding: '8px 12px' }}\r\n                      />\r\n                    ) : (\r\n                      <span className=\"card-detail-text\">\r\n                        {currentCard.endDate\r\n                          ? new Date(currentCard.endDate).toLocaleDateString()\r\n                          : 'Not set'}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Estimated Time */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Estimated Hours</label>\r\n                  {isEditing ? (\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.5\"\r\n                      value={editedCard.estimatedTime ?? currentCard.estimatedTime ?? ''}\r\n                      onChange={(e) =>\r\n                        setEditedCard({\r\n                          ...editedCard,\r\n                          estimatedTime: e.target.value ? parseFloat(e.target.value) : undefined,\r\n                        })\r\n                      }\r\n                      className=\"card-detail-textarea\"\r\n                      style={{ height: 'auto', padding: '8px 12px' }}\r\n                      placeholder=\"Enter hours\"\r\n                    />\r\n                  ) : (\r\n                    <span className=\"card-detail-text\">\r\n                      {currentCard.estimatedTime || 'Not estimated'}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Dependencies */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Dependencies</label>\r\n                  <div className=\"card-detail-dependencies\">\r\n                    {currentCard.dependencies && currentCard.dependencies.length > 0 ? (\r\n                      currentCard.dependencies.map((dep) => {\r\n                        const depId = typeof dep === 'string' ? dep : dep.taskId\r\n                        return (\r\n                          <span key={depId} className=\"card-detail-dependency\">\r\n                            Card #{depId.slice(-4)}\r\n                          </span>\r\n                        )\r\n                      })\r\n                    ) : (\r\n                      <span className=\"card-detail-empty\">No dependencies</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Metadata */}\r\n                <div className=\"card-detail-section\">\r\n                  <label className=\"card-detail-label\">Created</label>\r\n                  <span className=\"card-detail-text\">\r\n                    {currentCard.createdAt\r\n                      ? new Date(currentCard.createdAt).toLocaleString()\r\n                      : 'Unknown'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* COMMENTS TAB */}\r\n            {activeTab === 'comments' && (\r\n              <div className=\"card-detail-comments\">\r\n                {/* New Comment */}\r\n                <div className=\"card-detail-comment-form\">\r\n                  <textarea\r\n                    value={newComment}\r\n                    onChange={(e) => setNewComment(e.target.value)}\r\n                    className=\"card-detail-comment-textarea\"\r\n                    placeholder=\"Write a comment...\"\r\n                    rows={3}\r\n                  />\r\n                  <button\r\n                    onClick={handleAddComment}\r\n                    disabled={!newComment.trim()}\r\n                    className=\"card-detail-btn card-detail-btn-primary\"\r\n                  >\r\n                    Add Comment\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Comments List */}\r\n                <div className=\"card-detail-comments-list\">\r\n                  {comments.length > 0 ? (\r\n                    comments.map((comment) => {\r\n                      const author = availableUsers.find((u) => u.id === comment.authorId)\r\n                      return (\r\n                        <div key={comment.id} className=\"card-detail-comment\">\r\n                          <div className=\"card-detail-comment-header\">\r\n                            <div className=\"card-detail-comment-author\">\r\n                              {author && (\r\n                                <div\r\n                                  className=\"card-detail-user-avatar\"\r\n                                  style={{ background: author.color }}\r\n                                >\r\n                                  {author.initials}\r\n                                </div>\r\n                              )}\r\n                              <div>\r\n                                <div className=\"card-detail-comment-author-name\">\r\n                                  {author?.name || 'Unknown'}\r\n                                </div>\r\n                                <div className=\"card-detail-comment-time\">\r\n                                  {new Date(comment.createdAt).toLocaleString()}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {onDeleteComment && (\r\n                              <button\r\n                                onClick={() => onDeleteComment(comment.id)}\r\n                                className=\"card-detail-comment-delete\"\r\n                              >\r\n                                <svg\r\n                                  width=\"14\"\r\n                                  height=\"14\"\r\n                                  viewBox=\"0 0 24 24\"\r\n                                  fill=\"none\"\r\n                                  stroke=\"currentColor\"\r\n                                  strokeWidth=\"2\"\r\n                                >\r\n                                  <polyline points=\"3 6 5 6 21 6\" />\r\n                                  <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                                </svg>\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"card-detail-comment-content\">{comment.content}</p>\r\n                        </div>\r\n                      )\r\n                    })\r\n                  ) : (\r\n                    <div className=\"card-detail-empty-state\">\r\n                      <svg\r\n                        width=\"48\"\r\n                        height=\"48\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"1.5\"\r\n                      >\r\n                        <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n                      </svg>\r\n                      <p>No comments yet</p>\r\n                      <span>Be the first to comment</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ACTIVITY TAB */}\r\n            {activeTab === 'activity' && (\r\n              <div className=\"card-detail-activity\">\r\n                {activities.length > 0 ? (\r\n                  <div className=\"card-detail-activity-list\">\r\n                    {activities.map((activity) => {\r\n                      const user = availableUsers.find((u) => u.id === activity.userId)\r\n                      return (\r\n                        <div key={activity.id} className=\"card-detail-activity-item\">\r\n                          <div className=\"card-detail-activity-icon\">\r\n                            {activity.type.includes('CREATED') && ''}\r\n                            {activity.type.includes('UPDATED') && ''}\r\n                            {activity.type.includes('MOVED') && ''}\r\n                            {activity.type.includes('DELETED') && ''}\r\n                            {activity.type.includes('COMMENT') && ''}\r\n                            {activity.type.includes('ASSIGNED') && ''}\r\n                            {activity.type.includes('PRIORITY') && ''}\r\n                            {activity.type.includes('LABEL') && ''}\r\n                            {activity.type.includes('ATTACHMENT') && ''}\r\n                          </div>\r\n                          <div className=\"card-detail-activity-content\">\r\n                            <div className=\"card-detail-activity-text\">\r\n                              <strong>{user?.name || 'Unknown'}</strong>{' '}\r\n                              {activity.type.replace(/_/g, ' ').toLowerCase()}\r\n                              {activity.newValue && (\r\n                                <span className=\"card-detail-activity-value\">\r\n                                  {' '}\r\n                                  to <strong>{activity.newValue}</strong>\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"card-detail-activity-time\">\r\n                              {new Date(activity.timestamp).toLocaleString()}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"card-detail-empty-state\">\r\n                    <svg\r\n                      width=\"48\"\r\n                      height=\"48\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"1.5\"\r\n                    >\r\n                      <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\r\n                    </svg>\r\n                    <p>No activity yet</p>\r\n                    <span>Activity will appear here</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ATTACHMENTS TAB */}\r\n            {activeTab === 'attachments' && (\r\n              <div className=\"card-detail-attachments\">\r\n                <AttachmentUploader\r\n                  cardId={card.id}\r\n                  attachments={attachments}\r\n                  onUpload={onUploadAttachments ? (files) => onUploadAttachments(card.id, files) : undefined}\r\n                  onDelete={onDeleteAttachment}\r\n                  currentUserId={currentUserId}\r\n                  maxSizeMB={10}\r\n                  maxFiles={20}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* AI TAB */}\r\n            {activeTab === 'ai' && (\r\n              <div className=\"card-detail-ai\">\r\n                {/* AI Actions */}\r\n                <div className=\"card-detail-ai-actions\">\r\n                  <h3 className=\"card-detail-ai-heading\">AI-Powered Suggestions</h3>\r\n\r\n                  <button\r\n                    onClick={handleSuggestAssignee}\r\n                    disabled={aiLoading || !onSuggestAssignee}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n                      <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n                    </svg>\r\n                    Suggest Best Assignee\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={handleGenerateSubtasks}\r\n                    disabled={aiLoading || !onGenerateSubtasks}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\" />\r\n                      <line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\" />\r\n                      <line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\" />\r\n                      <line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\" />\r\n                      <line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\" />\r\n                      <line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\" />\r\n                    </svg>\r\n                    Generate Subtasks\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={handleEstimateEffort}\r\n                    disabled={aiLoading || !onEstimateEffort}\r\n                    className=\"card-detail-ai-btn\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                      <polyline points=\"12 6 12 12 16 14\" />\r\n                    </svg>\r\n                    Estimate Effort\r\n                  </button>\r\n                </div>\r\n\r\n                {/* AI Suggestions Results */}\r\n                {aiSuggestions.assignees && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Assignee Suggestions</h4>\r\n                    {aiSuggestions.assignees.map((suggestion, index) => {\r\n                      const user = availableUsers.find((u) => u.id === suggestion.userId)\r\n                      return (\r\n                        <div key={index} className=\"card-detail-ai-suggestion\">\r\n                          {user && (\r\n                            <div\r\n                              className=\"card-detail-user-avatar\"\r\n                              style={{ background: user.color }}\r\n                            >\r\n                              {user.initials}\r\n                            </div>\r\n                          )}\r\n                          <div>\r\n                            <div className=\"card-detail-ai-suggestion-name\">\r\n                              {user?.name}\r\n                            </div>\r\n                            <div className=\"card-detail-ai-suggestion-reason\">\r\n                              {suggestion.reasoning}\r\n                            </div>\r\n                            <div className=\"card-detail-ai-suggestion-confidence\">\r\n                              Confidence: {(suggestion.confidence * 100).toFixed(0)}%\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                )}\r\n\r\n                {aiSuggestions.subtasks && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Suggested Subtasks</h4>\r\n                    {aiSuggestions.subtasks.map((subtask, index) => (\r\n                      <div key={index} className=\"card-detail-ai-subtask\">\r\n                        <div className=\"card-detail-ai-subtask-title\">\r\n                          {subtask.title}\r\n                        </div>\r\n                        {subtask.description && (\r\n                          <div className=\"card-detail-ai-subtask-desc\">\r\n                            {subtask.description}\r\n                          </div>\r\n                        )}\r\n                        {subtask.estimatedTime && (\r\n                          <div className=\"card-detail-ai-subtask-time\">\r\n                            Est: {subtask.estimatedTime}h\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {aiSuggestions.effort && (\r\n                  <div className=\"card-detail-ai-results\">\r\n                    <h4>Effort Estimate</h4>\r\n                    <div className=\"card-detail-ai-effort\">\r\n                      <div className=\"card-detail-ai-effort-hours\">\r\n                        {aiSuggestions.effort.hours} hours\r\n                      </div>\r\n                      <div className=\"card-detail-ai-effort-confidence\">\r\n                        Confidence: {(aiSuggestions.effort.confidence * 100).toFixed(0)}%\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* AI Insights */}\r\n                {aiInsights.length > 0 && (\r\n                  <div className=\"card-detail-ai-insights\">\r\n                    <h4>AI Insights</h4>\r\n                    {aiInsights.map((insight) => (\r\n                      <div\r\n                        key={insight.id}\r\n                        className={`card-detail-ai-insight card-detail-ai-insight-${insight.severity.toLowerCase()}`}\r\n                      >\r\n                        <div className=\"card-detail-ai-insight-header\">\r\n                          <span className=\"card-detail-ai-insight-title\">\r\n                            {insight.title}\r\n                          </span>\r\n                          <span className=\"card-detail-ai-insight-severity\">\r\n                            {insight.severity}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"card-detail-ai-insight-desc\">\r\n                          {insight.description}\r\n                        </p>\r\n                        {insight.suggestedAction && (\r\n                          <div className=\"card-detail-ai-insight-action\">\r\n                             {insight.suggestedAction}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {!aiSuggestions.assignees &&\r\n                  !aiSuggestions.subtasks &&\r\n                  !aiSuggestions.effort &&\r\n                  aiInsights.length === 0 && (\r\n                    <div className=\"card-detail-empty-state\">\r\n                      <svg\r\n                        width=\"48\"\r\n                        height=\"48\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"1.5\"\r\n                      >\r\n                        <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" />\r\n                        <path d=\"M2 17L12 22L22 17\" />\r\n                        <path d=\"M2 12L12 17L22 12\" />\r\n                      </svg>\r\n                      <p>AI Suggestions</p>\r\n                      <span>Click a button above to get AI-powered insights</span>\r\n                    </div>\r\n                  )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * SmartPopover - Intelligent dropdown positioning\r\n *\r\n * Features:\r\n * - Uses Portal to escape overflow containers\r\n * - Calculates position relative to viewport\r\n * - Opens upward when no space below\r\n * - Locks scroll on parent containers\r\n * - Closes on outside click and Escape key\r\n */\r\n\r\nimport { useState, useEffect, useRef, useCallback, ReactNode } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\ninterface SmartPopoverProps {\r\n  /** Reference to the trigger button */\r\n  triggerRef: React.RefObject<HTMLElement>\r\n  /** Whether the popover is open */\r\n  isOpen: boolean\r\n  /** Close callback */\r\n  onClose: () => void\r\n  /** Popover content */\r\n  children: ReactNode\r\n  /** Menu width in pixels */\r\n  width?: number\r\n  /** Estimated menu height for positioning calculation */\r\n  estimatedHeight?: number\r\n  /** Additional className */\r\n  className?: string\r\n}\r\n\r\nexport function SmartPopover({\r\n  triggerRef,\r\n  isOpen,\r\n  onClose,\r\n  children,\r\n  width = 200,\r\n  estimatedHeight = 300,\r\n  className = '',\r\n}: SmartPopoverProps) {\r\n  const [position, setPosition] = useState({ top: 0, left: 0 })\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Calculate position when opening\r\n  const calculatePosition = useCallback(() => {\r\n    if (!triggerRef.current) return { top: 0, left: 0 }\r\n\r\n    const rect = triggerRef.current.getBoundingClientRect()\r\n    const viewportHeight = window.innerHeight\r\n    const viewportWidth = window.innerWidth\r\n    const GAP = 4\r\n\r\n    // Horizontal: align with trigger\r\n    let leftPos = rect.left\r\n    if (leftPos + width > viewportWidth - 10) {\r\n      leftPos = viewportWidth - width - 10\r\n    }\r\n    if (leftPos < 10) leftPos = 10\r\n\r\n    // Vertical: open down if space, else up\r\n    const spaceBelow = viewportHeight - rect.bottom\r\n    const spaceAbove = rect.top\r\n    let topPos: number\r\n\r\n    if (spaceBelow >= estimatedHeight + GAP) {\r\n      // Open downward\r\n      topPos = rect.bottom + GAP\r\n    } else if (spaceAbove >= estimatedHeight + GAP) {\r\n      // Open upward - bottom of menu at top of button\r\n      topPos = rect.top - estimatedHeight - GAP\r\n    } else {\r\n      // Not enough space - use direction with more space\r\n      if (spaceBelow >= spaceAbove) {\r\n        topPos = rect.bottom + GAP\r\n      } else {\r\n        topPos = Math.max(10, rect.top - estimatedHeight - GAP)\r\n      }\r\n    }\r\n\r\n    return { top: topPos, left: leftPos }\r\n  }, [triggerRef, width, estimatedHeight])\r\n\r\n  // Update position when opening\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setPosition(calculatePosition())\r\n    }\r\n  }, [isOpen, calculatePosition])\r\n\r\n  // v0.17.65: Scroll lock removed - position:fixed handles positioning correctly\r\n  // The Portal renders outside the overflow container, so no lock needed\r\n\r\n  // Close on outside click\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as Node\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(target) &&\r\n        triggerRef.current &&\r\n        !triggerRef.current.contains(target)\r\n      ) {\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    // Use setTimeout to avoid immediate close on the same click that opened\r\n    const timeoutId = setTimeout(() => {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n    }, 0)\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId)\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isOpen, onClose, triggerRef])\r\n\r\n  // Close on Escape\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleEscape)\r\n    return () => document.removeEventListener('keydown', handleEscape)\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <Portal>\r\n      <div\r\n        ref={menuRef}\r\n        className={`smart-popover ${className}`}\r\n        style={{\r\n          position: 'fixed',\r\n          top: `${position.top}px`,\r\n          left: `${position.left}px`,\r\n          width: `${width}px`,\r\n          maxHeight: 'calc(100vh - 40px)',\r\n          overflowY: 'auto',\r\n          zIndex: 99999,\r\n          padding: '6px',\r\n          background: 'var(--modal-v2-bg, #1f1f1f)',\r\n          border: '1px solid var(--modal-v2-border, rgba(255, 255, 255, 0.15))',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 8px 24px rgba(0, 0, 0, 0.3)',\r\n          animation: 'popoverSlideIn 100ms ease-out',\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","import { GanttTheme } from './types';\r\n\r\nexport const themes: Record<string, GanttTheme> = {\r\n  dark: {\r\n    // Backgrounds\r\n    // v0.17.71: Improved contrast - sidebar darker, main area brighter\r\n    bgPrimary: '#1A1D21',\r\n    bgSecondary: '#22262D',  // Slightly lighter for better card contrast\r\n    bgGrid: '#1E2126',  // v0.17.71: More visible zebra stripes\r\n    bgWeekend: 'rgba(59, 130, 246, 0.03)',\r\n\r\n    // Borders - v0.17.71: More visible separation\r\n    border: '#334155',  // Brighter border for better column separation\r\n    borderLight: '#2D3139',\r\n\r\n    // Text - v0.17.71: Enhanced hierarchy\r\n    textPrimary: '#FFFFFF',  // Pure white for maximum brightness (Phases)\r\n    textSecondary: '#CBD5E1',  // Slate 300 - for child tasks\r\n    textTertiary: '#64748B',  // Slate 500 - for metadata\r\n\r\n    // Accent & Interactive - Electric Blue brand color\r\n    accent: '#3B82F6',\r\n    accentHover: '#60A5FA',\r\n    accentLight: 'rgba(59, 130, 246, 0.12)',\r\n\r\n    // Task Elements - Electric Blue brand color\r\n    taskBarPrimary: '#3B82F6',\r\n    taskBarProgress: '#2563EB',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    // v0.17.361: Solid colors for better visibility\r\n    dependency: '#9CA3AF',\r\n    dependencyHover: '#6B7280',\r\n    criticalPath: '#EF4444',\r\n    criticalPathLight: 'rgba(239, 68, 68, 0.12)',\r\n\r\n    // Special Elements - v0.17.180: Exact ClickUp \"Today\" line color\r\n    today: '#D21E24',  // Exact ClickUp red\r\n    todayLight: 'rgba(210, 30, 36, 0.12)',\r\n    milestone: '#F59E0B',\r\n    milestoneLight: 'rgba(245, 158, 11, 0.1)',\r\n\r\n    // Status Colors\r\n    statusTodo: '#64748B',  // Slate 500\r\n    statusInProgress: '#3B82F6',\r\n    statusCompleted: '#10B981',\r\n\r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(255, 255, 255, 0.06)',\r\n    focusRing: '#3B82F6',\r\n  },\r\n  \r\n  light: {\r\n    // Backgrounds\r\n    // v0.17.71: Improved contrast and visual breathing\r\n    bgPrimary: '#FFFFFF',\r\n    bgSecondary: '#F8FAFC',  // Slate 50 - subtle contrast\r\n    bgGrid: '#F1F5F9',  // Slate 100 - more visible zebra stripes\r\n    bgWeekend: 'rgba(37, 99, 235, 0.03)',\r\n\r\n    // Borders - v0.17.71: More visible separation\r\n    border: '#CBD5E1',  // Slate 300 - stronger column dividers\r\n    borderLight: '#E2E8F0',  // Slate 200\r\n\r\n    // Text - v0.17.71: Enhanced hierarchy\r\n    textPrimary: '#0F172A',  // Slate 900 - darkest for phases\r\n    textSecondary: '#334155',  // Slate 700 - for child tasks\r\n    textTertiary: '#64748B',  // Slate 500 - for metadata\r\n\r\n    // Accent & Interactive\r\n    accent: '#2563EB',\r\n    accentHover: '#1D4ED8',\r\n    accentLight: 'rgba(37, 99, 235, 0.08)',\r\n\r\n    // Task Elements\r\n    taskBarPrimary: '#2563EB',\r\n    taskBarProgress: '#1E40AF',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    // v0.17.361: Solid colors for better visibility\r\n    dependency: '#6B7280',\r\n    dependencyHover: '#4B5563',\r\n    criticalPath: '#DC2626',\r\n    criticalPathLight: 'rgba(220, 38, 38, 0.1)',\r\n\r\n    // Special Elements - v0.17.180: Exact ClickUp \"Today\" line color\r\n    today: '#D21E24',  // Exact ClickUp red\r\n    todayLight: 'rgba(210, 30, 36, 0.1)',\r\n    milestone: '#F59E0B',\r\n    milestoneLight: 'rgba(245, 158, 11, 0.08)',\r\n\r\n    // Status Colors\r\n    statusTodo: '#64748B',  // Slate 500\r\n    statusInProgress: '#2563EB',\r\n    statusCompleted: '#059669',\r\n\r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(0, 0, 0, 0.04)',\r\n    focusRing: '#2563EB',\r\n  },\r\n  \r\n  neutral: {\r\n    // Backgrounds\r\n    // v0.17.71: Improved contrast and visual breathing\r\n    bgPrimary: '#FAFAF9',\r\n    bgSecondary: '#F5F5F4',\r\n    bgGrid: '#EFEDEC',  // v0.17.71: More visible zebra stripes\r\n    bgWeekend: 'rgba(41, 37, 36, 0.02)',\r\n\r\n    // Borders - v0.17.71: More visible separation\r\n    border: '#D6D3D1',  // Stone 300 - visible column dividers\r\n    borderLight: '#E7E5E4',  // Stone 200\r\n\r\n    // Text - v0.17.71: Enhanced hierarchy\r\n    textPrimary: '#0C0A09',  // Stone 950 - maximum contrast for phases\r\n    textSecondary: '#44403C',  // Stone 700 - for child tasks\r\n    textTertiary: '#78716C',  // Stone 500 - for metadata\r\n\r\n    // Accent & Interactive\r\n    accent: '#292524',\r\n    accentHover: '#44403C',\r\n    accentLight: 'rgba(41, 37, 36, 0.08)',\r\n\r\n    // Task Elements\r\n    taskBarPrimary: '#292524',\r\n    taskBarProgress: '#1C1917',\r\n    taskBarHandle: '#FFFFFF',\r\n\r\n    // Dependencies & Critical Path\r\n    // v0.17.361: Solid colors for better visibility\r\n    dependency: '#78716C',\r\n    dependencyHover: '#57534E',\r\n    criticalPath: '#44403C',  // Dark gray instead of red - monochromatic\r\n    criticalPathLight: 'rgba(68, 64, 60, 0.08)',\r\n\r\n    // Special Elements - v0.17.71: Darker \"Today\" line for zen mode\r\n    today: '#1C1917',  // Black - maintains monochrome philosophy\r\n    todayLight: 'rgba(28, 25, 23, 0.06)',\r\n    milestone: '#57534E',  // Medium gray - no yellow\r\n    milestoneLight: 'rgba(87, 83, 78, 0.08)',\r\n\r\n    // Status Colors\r\n    statusTodo: '#78716C',  // Stone 500\r\n    statusInProgress: '#292524',\r\n    statusCompleted: '#15803D',\r\n\r\n    // Hover & Focus States\r\n    hoverBg: 'rgba(0, 0, 0, 0.035)',\r\n    focusRing: '#292524',\r\n  },\r\n};","/**\r\n * CardDetailModal V2.0 - Premium task detail view\r\n *\r\n * Design Philosophy:\r\n * - Speed above all: <100ms open time\r\n * - Keyboard-first interaction\r\n * - Single vertical flow (no sidebars)\r\n * - Instant inline editing\r\n * - Zero friction UX\r\n *\r\n * ALL PHASES IMPLEMENTED:\r\n *  Phase 1: Modal + Header + Metadata (COMPLETE)\r\n *  Phase 2: Status & Priority selectors (COMPLETE)\r\n *  Phase 3: Assignees & Labels selectors (COMPLETE)\r\n *  Phase 4: Date picker & Time input (COMPLETE)\r\n *  Phase 5: Markdown renderer (COMPLETE)\r\n *  Phase 6: Animations & Accessibility polish (COMPLETE)\r\n */\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport remarkGfm from 'remark-gfm'\r\nimport rehypeSanitize from 'rehype-sanitize'\r\nimport { Portal } from '../Portal'\r\nimport { SmartPopover } from './SmartPopover'\r\n// COVER IMAGE - Commented out for future use. Uncomment to enable cover image functionality\r\n// import { CoverImageManager } from '../CoverImage'\r\nimport { AttachmentUploader } from '../Attachments'\r\nimport { useKanbanTheme } from '../Board/KanbanThemeContext'\r\nimport { TagPicker } from '../Gantt/TagPicker'\r\nimport { themes as ganttThemes } from '../Gantt/themes'\r\nimport type { TaskTag } from '../Gantt/types'\r\nimport type { Card, User, Comment, Activity, Subtask, Attachment } from '../../types'\r\nimport './card-detail-modal-v2.css'\r\n\r\nexport interface CardDetailModalV2Props {\r\n  /** Card to display */\r\n  card: Card | null\r\n\r\n  /** Whether modal is open */\r\n  isOpen: boolean\r\n\r\n  /** Close callback */\r\n  onClose: () => void\r\n\r\n  /** Update card callback */\r\n  onUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n\r\n  /** Delete card callback */\r\n  onDelete?: (cardId: string) => void\r\n\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n\r\n  /** Comments for this card */\r\n  comments?: Comment[]\r\n\r\n  /** Activity log for this card */\r\n  activities?: Activity[]\r\n\r\n  /** Add comment callback */\r\n  onAddComment?: (cardId: string, content: string) => void\r\n\r\n  /** Delete comment callback */\r\n  onDeleteComment?: (commentId: string) => void\r\n\r\n  /** Current user */\r\n  currentUser?: User\r\n\r\n  /** AI: Generate description */\r\n  onAIGenerateDescription?: (card: Card) => Promise<string>\r\n\r\n  /** AI: Create subtasks */\r\n  onAICreateSubtasks?: (card: Card) => Promise<string[]>\r\n\r\n  /** AI: Find similar tasks */\r\n  onAIFindSimilar?: (card: Card) => Promise<Card[]>\r\n\r\n  /** Available columns for status */\r\n  availableColumns?: Array<{ id: string; title: string }>\r\n\r\n  /** Available labels (legacy - use availableTags for colored tags) */\r\n  availableLabels?: string[]\r\n\r\n  /** v0.17.158: Available tags with colors (ClickUp-style) */\r\n  availableTags?: TaskTag[]\r\n\r\n  /** v0.17.158: Callback to create a new tag */\r\n  onCreateTag?: (name: string, color: string) => Promise<TaskTag | null>\r\n\r\n  /** Upload cover image callback (optional - returns public URL) */\r\n  onUploadCoverImage?: (file: File) => Promise<string>\r\n\r\n  /** Unsplash API key for cover images (optional) */\r\n  unsplashAccessKey?: string\r\n\r\n  /** Theme for the modal (dark, light, neutral). If not provided, uses KanbanThemeContext or defaults to 'dark' */\r\n  theme?: 'dark' | 'light' | 'neutral'\r\n\r\n  /** Callback when subtasks are changed (for persistence) */\r\n  onSubtasksChange?: (cardId: string, subtasks: Subtask[]) => void\r\n\r\n  /** Attachments for this card */\r\n  attachments?: Attachment[]\r\n\r\n  /** Upload attachments callback */\r\n  onUploadAttachments?: (cardId: string, files: File[]) => Promise<void> | void\r\n\r\n  /** Delete attachment callback */\r\n  onDeleteAttachment?: (attachmentId: string) => void\r\n}\r\n\r\nconst PRIORITY_OPTIONS = ['LOW', 'MEDIUM', 'HIGH', 'URGENT'] as const\r\nconst STATUS_OPTIONS = ['todo', 'in-progress', 'review', 'done'] as const\r\n\r\nexport function CardDetailModalV2({\r\n  card,\r\n  isOpen,\r\n  onClose,\r\n  onUpdate,\r\n  onDelete: _onDelete,\r\n  availableUsers = [],\r\n  comments = [],\r\n  activities = [],\r\n  onAddComment,\r\n  onDeleteComment: _onDeleteComment,\r\n  currentUser,\r\n  onAIGenerateDescription: _onAIGenerateDescription,\r\n  onAICreateSubtasks: _onAICreateSubtasks,\r\n  onAIFindSimilar: _onAIFindSimilar,\r\n  availableColumns = [],\r\n  availableLabels = [],\r\n  availableTags = [],\r\n  onCreateTag,\r\n  // COVER IMAGE - Commented out for future use\r\n  onUploadCoverImage: _onUploadCoverImage,\r\n  unsplashAccessKey: _unsplashAccessKey,\r\n  theme,\r\n  onSubtasksChange,\r\n  attachments = [],\r\n  onUploadAttachments,\r\n  onDeleteAttachment,\r\n}: CardDetailModalV2Props) {\r\n  // Get theme: prop > context > fallback\r\n  const kanbanTheme = useKanbanTheme()\r\n  const themeName = theme || kanbanTheme?.themeName || 'dark'\r\n\r\n  // Local state - Initialize immediately from card prop to avoid render delay\r\n  const [localCard, setLocalCard] = useState<Card | null>(card)\r\n\r\n  const [isEditingDescription, setIsEditingDescription] = useState(false)\r\n  const [subtasks, setSubtasks] = useState<Subtask[]>(card?.subtasks || [])\r\n  const [isAddingSubtask, setIsAddingSubtask] = useState(false)\r\n  const [newSubtaskTitle, setNewSubtaskTitle] = useState('')\r\n  const [commentText, setCommentText] = useState('')\r\n  const [activityFilter, setActivityFilter] = useState<'all' | 'comments' | 'history'>('all')\r\n  // COVER IMAGE - Commented out for future use. Uncomment when enabling cover image functionality\r\n  // const [showCoverManager, setShowCoverManager] = useState(false)\r\n\r\n  // Popover states\r\n  const [showStatusMenu, setShowStatusMenu] = useState(false)\r\n  const [showPriorityMenu, setShowPriorityMenu] = useState(false)\r\n  const [showAssigneeMenu, setShowAssigneeMenu] = useState(false)\r\n  const [showLabelMenu, setShowLabelMenu] = useState(false)\r\n  const [showDatePicker, setShowDatePicker] = useState(false)\r\n  const [showTimePicker, setShowTimePicker] = useState(false)\r\n\r\n  // Refs\r\n  const titleRef = useRef<HTMLHeadingElement>(null)\r\n  const descriptionRef = useRef<HTMLTextAreaElement>(null)\r\n  const commentRef = useRef<HTMLTextAreaElement>(null)\r\n  const statusMenuRef = useRef<HTMLDivElement>(null)\r\n  const priorityMenuRef = useRef<HTMLDivElement>(null)\r\n  const assigneeMenuRef = useRef<HTMLDivElement>(null)\r\n  const labelMenuRef = useRef<HTMLDivElement>(null)\r\n  const datePickerRef = useRef<HTMLInputElement>(null)\r\n  // Button refs for SmartPopover positioning\r\n  const statusBtnRef = useRef<HTMLButtonElement>(null)\r\n  const assigneeBtnRef = useRef<HTMLButtonElement>(null)\r\n  const priorityBtnRef = useRef<HTMLButtonElement>(null)\r\n  const labelBtnRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // Update local card when prop changes - THIS IS THE FIX!\r\n  // Initialize local card immediately when card prop is available\r\n  useEffect(() => {\r\n    if (card && !localCard) {\r\n      setLocalCard({ ...card })\r\n      setSubtasks(card.subtasks || [])\r\n    } else if (card && localCard && card.id !== localCard.id) {\r\n      setLocalCard({ ...card })\r\n      setSubtasks(card.subtasks || [])\r\n    }\r\n  }, [card, localCard])\r\n\r\n  // Close popovers when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as HTMLElement\r\n\r\n      if (statusMenuRef.current && !statusMenuRef.current.contains(target)) {\r\n        setShowStatusMenu(false)\r\n      }\r\n      if (priorityMenuRef.current && !priorityMenuRef.current.contains(target)) {\r\n        setShowPriorityMenu(false)\r\n      }\r\n      if (assigneeMenuRef.current && !assigneeMenuRef.current.contains(target)) {\r\n        setShowAssigneeMenu(false)\r\n      }\r\n      if (labelMenuRef.current && !labelMenuRef.current.contains(target)) {\r\n        setShowLabelMenu(false)\r\n      }\r\n    }\r\n\r\n    if (showStatusMenu || showPriorityMenu || showAssigneeMenu || showLabelMenu) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n\r\n    return undefined\r\n  }, [showStatusMenu, showPriorityMenu, showAssigneeMenu, showLabelMenu])\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Check if user is typing in an input/textarea\r\n      const target = e.target as HTMLElement\r\n      const isTyping =\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable\r\n\r\n      // ESC - Close modal or menus\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        if (showStatusMenu || showPriorityMenu || showAssigneeMenu || showLabelMenu || showDatePicker || showTimePicker) {\r\n          setShowStatusMenu(false)\r\n          setShowPriorityMenu(false)\r\n          setShowAssigneeMenu(false)\r\n          setShowLabelMenu(false)\r\n          setShowDatePicker(false)\r\n          setShowTimePicker(false)\r\n        } else if (!isTyping) {\r\n          onClose()\r\n        }\r\n        return\r\n      }\r\n\r\n      // Ignore shortcuts if typing\r\n      if (isTyping && e.key !== 'Escape') return\r\n\r\n      const isMod = e.metaKey || e.ctrlKey\r\n\r\n      // Single key shortcuts\r\n      switch (e.key.toLowerCase()) {\r\n        case 's':\r\n          e.preventDefault()\r\n          setShowStatusMenu(true)\r\n          break\r\n        case 'a':\r\n          e.preventDefault()\r\n          setShowAssigneeMenu(true)\r\n          break\r\n        case 'p':\r\n          e.preventDefault()\r\n          setShowPriorityMenu(true)\r\n          break\r\n        case 'l':\r\n          e.preventDefault()\r\n          setShowLabelMenu(true)\r\n          break\r\n        case 'd':\r\n          if (!isMod) {\r\n            e.preventDefault()\r\n            setShowDatePicker(true)\r\n            setTimeout(() => datePickerRef.current?.focus(), 0)\r\n          }\r\n          break\r\n        case 'e':\r\n          if (!isMod) {\r\n            e.preventDefault()\r\n            setShowTimePicker(true)\r\n          }\r\n          break\r\n        case 'i':\r\n          e.preventDefault()\r\n          setIsEditingDescription(true)\r\n          setTimeout(() => descriptionRef.current?.focus(), 0)\r\n          break\r\n        case 't':\r\n          e.preventDefault()\r\n          setIsAddingSubtask(true)\r\n          break\r\n        case 'c':\r\n          e.preventDefault()\r\n          commentRef.current?.focus()\r\n          break\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n    }, [isOpen, onClose, showStatusMenu, showPriorityMenu, showAssigneeMenu, showLabelMenu, showDatePicker, showTimePicker])\r\n\r\n\r\n  // Handlers\r\n  const handleTitleChange = useCallback(\r\n    (e: React.FormEvent<HTMLHeadingElement>) => {\r\n      const newTitle = e.currentTarget.textContent?.trim() || ''\r\n      if (localCard && newTitle !== localCard.title) {\r\n        const updated = { ...localCard, title: newTitle }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { title: newTitle })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleTitleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLHeadingElement>) => {\r\n      if (e.key === 'Enter') {\r\n        e.preventDefault()\r\n        e.currentTarget.blur()\r\n      }\r\n      if (e.key === 'Escape') {\r\n        e.preventDefault()\r\n        e.currentTarget.textContent = localCard?.title || ''\r\n        e.currentTarget.blur()\r\n      }\r\n    },\r\n    [localCard]\r\n  )\r\n\r\n  // Note: handleDescriptionChange removed - now handled inline in MarkdownEditor\r\n\r\n  const handleDescriptionBlur = useCallback(() => {\r\n    if (localCard && card && localCard.description !== card.description) {\r\n      onUpdate?.(localCard.id, { description: localCard.description })\r\n    }\r\n    setIsEditingDescription(false)\r\n  }, [localCard, card, onUpdate])\r\n\r\n  const handleStatusChange = useCallback(\r\n    (status: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, columnId: status }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { columnId: status })\r\n        setShowStatusMenu(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handlePriorityChange = useCallback(\r\n    (priority: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, priority: priority as any }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { priority: priority as any })\r\n        setShowPriorityMenu(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleToggleAssignee = useCallback(\r\n    (userId: string) => {\r\n      if (localCard) {\r\n        const currentAssignees = localCard.assignedUserIds || []\r\n        const newAssignees = currentAssignees.includes(userId)\r\n          ? currentAssignees.filter((id) => id !== userId)\r\n          : [...currentAssignees, userId]\r\n\r\n        const updated = { ...localCard, assignedUserIds: newAssignees }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { assignedUserIds: newAssignees })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleToggleLabel = useCallback(\r\n    (label: string) => {\r\n      if (localCard) {\r\n        const currentLabels = localCard.labels || []\r\n        const newLabels = currentLabels.includes(label)\r\n          ? currentLabels.filter((l) => l !== label)\r\n          : [...currentLabels, label]\r\n\r\n        const updated = { ...localCard, labels: newLabels }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { labels: newLabels })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  // v0.17.158: Handle tags change (with colors)\r\n  const handleTagsChange = useCallback(\r\n    (tags: TaskTag[]) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, tags }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { tags } as any)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleDateChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (localCard) {\r\n        const newDate = e.target.value\r\n        const updated = { ...localCard, endDate: newDate }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { endDate: newDate })\r\n        setShowDatePicker(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleTimeChange = useCallback(\r\n    (hours: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, estimatedTime: parseFloat(hours) || 0 }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { estimatedTime: parseFloat(hours) || 0 })\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleAddSubtask = useCallback(() => {\r\n    if (newSubtaskTitle.trim() && localCard) {\r\n      const newSubtask: Subtask = {\r\n        id: `subtask-${Date.now()}`,\r\n        title: newSubtaskTitle.trim(),\r\n        completed: false,\r\n        createdAt: new Date(),\r\n      }\r\n      const updatedSubtasks = [...subtasks, newSubtask]\r\n      setSubtasks(updatedSubtasks)\r\n      setNewSubtaskTitle('')\r\n      setIsAddingSubtask(false)\r\n      // Persist subtasks\r\n      onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n    }\r\n  }, [newSubtaskTitle, subtasks, localCard, onSubtasksChange])\r\n\r\n  const handleToggleSubtask = useCallback(\r\n    (id: string) => {\r\n      const updatedSubtasks = subtasks.map((st) =>\r\n        st.id === id ? { ...st, completed: !st.completed, updatedAt: new Date() } : st\r\n      )\r\n      setSubtasks(updatedSubtasks)\r\n      // Persist subtasks\r\n      if (localCard) {\r\n        onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n      }\r\n    },\r\n    [subtasks, localCard, onSubtasksChange]\r\n  )\r\n\r\n  const handleDeleteSubtask = useCallback(\r\n    (id: string) => {\r\n      const updatedSubtasks = subtasks.filter((st) => st.id !== id)\r\n      setSubtasks(updatedSubtasks)\r\n      // Persist subtasks\r\n      if (localCard) {\r\n        onSubtasksChange?.(localCard.id, updatedSubtasks)\r\n      }\r\n    },\r\n    [subtasks, localCard, onSubtasksChange]\r\n  )\r\n\r\n  const handleSendComment = useCallback(() => {\r\n    if (commentText.trim() && localCard && onAddComment) {\r\n      onAddComment(localCard.id, commentText.trim())\r\n      setCommentText('')\r\n    }\r\n  }, [commentText, localCard, onAddComment])\r\n\r\n  const handleCommentKeyDown = useCallback(\r\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {\r\n        e.preventDefault()\r\n        handleSendComment()\r\n      }\r\n    },\r\n    [handleSendComment]\r\n  )\r\n\r\n  // COVER IMAGE HANDLERS - Commented out for future use\r\n  // Uncomment these functions when enabling cover image functionality\r\n  /*\r\n  const handleCoverImageChange = useCallback(\r\n    (url: string) => {\r\n      if (localCard) {\r\n        const updated = { ...localCard, coverImage: url }\r\n        setLocalCard(updated)\r\n        onUpdate?.(localCard.id, { coverImage: url })\r\n        setShowCoverManager(false)\r\n      }\r\n    },\r\n    [localCard, onUpdate]\r\n  )\r\n\r\n  const handleCoverImageRemove = useCallback(() => {\r\n    if (localCard) {\r\n      const updated = { ...localCard, coverImage: undefined }\r\n      setLocalCard(updated)\r\n      onUpdate?.(localCard.id, { coverImage: undefined })\r\n    }\r\n  }, [localCard, onUpdate])\r\n  */\r\n\r\n  // Enhanced markdown renderer with GFM support\r\n  const renderMarkdown = (text: string) => {\r\n    return (\r\n      <ReactMarkdown\r\n        remarkPlugins={[remarkGfm]}\r\n        rehypePlugins={[rehypeSanitize]}\r\n        components={{\r\n          a: ({ node, ...props }) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\" />,\r\n        }}\r\n      >\r\n        {text}\r\n      </ReactMarkdown>\r\n    )\r\n  }\r\n\r\n  // Filter activities\r\n  const filteredActivity = activities.filter((activity) => {\r\n    if (activityFilter === 'comments') {\r\n      return activity.type.includes('COMMENT')\r\n    }\r\n    if (activityFilter === 'history') {\r\n      return !activity.type.includes('COMMENT')\r\n    }\r\n    return true\r\n  })\r\n\r\n  // CRITICAL FIX: Use card prop directly for early return check\r\n  // Using localCard causes race condition with Portal mount + useEffect timing\r\n  if (!isOpen || !card) {\r\n    return null\r\n  }\r\n\r\n  // Use localCard if available (for live edits), fallback to card prop\r\n  const displayCard = localCard || card\r\n\r\n  const assignedUsers = availableUsers.filter((user) =>\r\n    displayCard.assignedUserIds?.includes(user.id)\r\n  )\r\n\r\n  const completedSubtasksCount = subtasks.filter((st) => st.completed).length\r\n\r\n  return (\r\n    <Portal>\r\n      <div\r\n        className=\"modal-v2-backdrop\"\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          inset: '0',\r\n          zIndex: 9999,\r\n          background: 'rgba(0, 0, 0, 0.7)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n        }}\r\n      >\r\n        <div\r\n          className=\"modal-v2-container\"\r\n          onClick={(e) => e.stopPropagation()}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"modal-title\"\r\n          data-theme={themeName}\r\n        >\r\n          {/* HEADER */}\r\n          <header className=\"modal-v2-header\">\r\n            <h1\r\n              id=\"modal-title\"\r\n              ref={titleRef}\r\n              className=\"modal-v2-title\"\r\n              contentEditable\r\n              suppressContentEditableWarning\r\n              onBlur={handleTitleChange}\r\n              onKeyDown={handleTitleKeyDown}\r\n            >\r\n              {displayCard.title}\r\n            </h1>\r\n\r\n            <p className=\"modal-v2-ai-prompt\">\r\n              <span className=\"modal-v2-ai-icon\"></span>\r\n              Ask AI to write a description, create subtasks, or find similar tasks\r\n            </p>\r\n\r\n            <button className=\"modal-v2-close\" onClick={onClose} aria-label=\"Close\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n              </svg>\r\n            </button>\r\n          </header>\r\n\r\n          {/* COVER IMAGE SECTION - COMMENTED OUT FOR FUTURE USE\r\n           * To enable cover image functionality, uncomment this section\r\n           * and ensure CoverImageManager import is active\r\n           */}\r\n          {/*\r\n          <section className=\"modal-v2-cover-section\">\r\n            {!showCoverManager && !displayCard.coverImage && (\r\n              <button\r\n                className=\"modal-v2-add-cover-button\"\r\n                onClick={() => setShowCoverManager(true)}\r\n              >\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                  <polyline points=\"21 15 16 10 5 21\" />\r\n                </svg>\r\n                Add cover image\r\n              </button>\r\n            )}\r\n\r\n            {!showCoverManager && displayCard.coverImage && (\r\n              <div className=\"modal-v2-cover-preview-wrapper\">\r\n                <img\r\n                  src={displayCard.coverImage}\r\n                  alt={`Cover for ${displayCard.title}`}\r\n                  className=\"modal-v2-cover-image\"\r\n                  onError={(e) => {\r\n                    e.currentTarget.style.display = 'none'\r\n                  }}\r\n                />\r\n                <div className=\"modal-v2-cover-actions\">\r\n                  <button\r\n                    className=\"modal-v2-cover-action-button\"\r\n                    onClick={() => setShowCoverManager(true)}\r\n                  >\r\n                    Change\r\n                  </button>\r\n                  <button\r\n                    className=\"modal-v2-cover-action-button danger\"\r\n                    onClick={handleCoverImageRemove}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {showCoverManager && (\r\n              <div className=\"modal-v2-cover-manager-wrapper\">\r\n                <div className=\"modal-v2-cover-manager-header\">\r\n                  <h3>Cover Image</h3>\r\n                  <button\r\n                    className=\"modal-v2-cover-manager-close\"\r\n                    onClick={() => setShowCoverManager(false)}\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n                <CoverImageManager\r\n                  coverImage={displayCard.coverImage}\r\n                  onUpload={onUploadCoverImage}\r\n                  onChange={handleCoverImageChange}\r\n                  onRemove={handleCoverImageRemove}\r\n                  unsplashAccessKey={unsplashAccessKey}\r\n                  showRecentUploads={true}\r\n                  theme={themeName}\r\n                />\r\n              </div>\r\n            )}\r\n          </section>\r\n          */}\r\n\r\n          {/* METADATA GRID */}\r\n          <section className=\"modal-v2-metadata\">\r\n            {/* STATUS FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={statusMenuRef}>\r\n              <button\r\n                ref={statusBtnRef}\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowStatusMenu(!showStatusMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <path d=\"M12 6v6l4 2\" />\r\n                  </svg>\r\n                  <span>Status</span>\r\n                  <kbd className=\"modal-v2-shortcut\">S</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">{displayCard.columnId || 'No status'}</div>\r\n              </button>\r\n              <SmartPopover\r\n                triggerRef={statusBtnRef}\r\n                isOpen={showStatusMenu}\r\n                onClose={() => setShowStatusMenu(false)}\r\n                width={250}\r\n                estimatedHeight={200}\r\n              >\r\n                {(availableColumns.length > 0 ? availableColumns : STATUS_OPTIONS.map(s => ({ id: s, title: s }))).map((col) => (\r\n                  <button\r\n                    key={col.id}\r\n                    className={`modal-v2-popover-item ${\r\n                      displayCard.columnId === col.id ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handleStatusChange(col.id)}\r\n                  >\r\n                    {col.title}\r\n                  </button>\r\n                ))}\r\n              </SmartPopover>\r\n            </div>\r\n\r\n            {/* ASSIGNEES FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={assigneeMenuRef}>\r\n              <button\r\n                ref={assigneeBtnRef}\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowAssigneeMenu(!showAssigneeMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n                    <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n                  </svg>\r\n                  <span>Assignees</span>\r\n                  <kbd className=\"modal-v2-shortcut\">A</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {assignedUsers.length > 0 ? (\r\n                    <div className=\"modal-v2-avatars\">\r\n                      {assignedUsers.map((user) => (\r\n                        <div\r\n                          key={user.id}\r\n                          className=\"modal-v2-avatar\"\r\n                          style={{ background: user.color }}\r\n                          title={user.name}\r\n                        >\r\n                          {user.initials}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <span className=\"modal-v2-empty\">Empty</span>\r\n                  )}\r\n                </div>\r\n              </button>\r\n              <SmartPopover\r\n                triggerRef={assigneeBtnRef}\r\n                isOpen={showAssigneeMenu}\r\n                onClose={() => setShowAssigneeMenu(false)}\r\n                width={280}\r\n                estimatedHeight={300}\r\n              >\r\n                {availableUsers.map((user) => (\r\n                  <button\r\n                    key={user.id}\r\n                    className={`modal-v2-popover-item ${\r\n                      displayCard.assignedUserIds?.includes(user.id) ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handleToggleAssignee(user.id)}\r\n                  >\r\n                    <div\r\n                      className=\"modal-v2-avatar-small\"\r\n                      style={{ background: user.color }}\r\n                    >\r\n                      {user.initials}\r\n                    </div>\r\n                    {user.name}\r\n                    {displayCard.assignedUserIds?.includes(user.id) && (\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        style={{ marginLeft: 'auto' }}\r\n                      >\r\n                        <polyline points=\"20 6 9 17 4 12\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </SmartPopover>\r\n            </div>\r\n\r\n            {/* PRIORITY FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\" ref={priorityMenuRef}>\r\n              <button\r\n                ref={priorityBtnRef}\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowPriorityMenu(!showPriorityMenu)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z\" />\r\n                    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\r\n                    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\r\n                  </svg>\r\n                  <span>Priority</span>\r\n                  <kbd className=\"modal-v2-shortcut\">P</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {displayCard.priority || 'None'}\r\n                </div>\r\n              </button>\r\n              <SmartPopover\r\n                triggerRef={priorityBtnRef}\r\n                isOpen={showPriorityMenu}\r\n                onClose={() => setShowPriorityMenu(false)}\r\n                width={180}\r\n                estimatedHeight={220}\r\n              >\r\n                {PRIORITY_OPTIONS.map((priority) => (\r\n                  <button\r\n                    key={priority}\r\n                    className={`modal-v2-popover-item priority-${priority.toLowerCase()} ${\r\n                      displayCard.priority === priority ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handlePriorityChange(priority)}\r\n                  >\r\n                    {priority}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  className=\"modal-v2-popover-item\"\r\n                  onClick={() => handlePriorityChange('')}\r\n                >\r\n                  None\r\n                </button>\r\n              </SmartPopover>\r\n            </div>\r\n\r\n            {/* LABELS/TAGS FIELD - v0.17.158: Use TagPicker when tags available */}\r\n            {availableTags.length > 0 || onCreateTag ? (\r\n              <div className=\"modal-v2-field-wrapper\">\r\n                <div className=\"modal-v2-field\" style={{ cursor: 'default' }}>\r\n                  <div className=\"modal-v2-field-label\">\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z\" />\r\n                      <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" />\r\n                    </svg>\r\n                    <span>Etiquetas</span>\r\n                  </div>\r\n                  <div className=\"modal-v2-field-value\">\r\n                    <TagPicker\r\n                      selectedTags={((displayCard as any).tags || []) as TaskTag[]}\r\n                      availableTags={availableTags}\r\n                      onChange={handleTagsChange}\r\n                      onCreateTag={onCreateTag}\r\n                      theme={ganttThemes[themeName] || ganttThemes.dark}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"modal-v2-field-wrapper\" ref={labelMenuRef}>\r\n                <button\r\n                  ref={labelBtnRef}\r\n                  className=\"modal-v2-field\"\r\n                  onClick={() => setShowLabelMenu(!showLabelMenu)}\r\n                >\r\n                  <div className=\"modal-v2-field-label\">\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z\" />\r\n                      <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" />\r\n                    </svg>\r\n                    <span>Labels</span>\r\n                    <kbd className=\"modal-v2-shortcut\">L</kbd>\r\n                  </div>\r\n                  <div className=\"modal-v2-field-value\">\r\n                    {displayCard.labels && displayCard.labels.length > 0 ? (\r\n                      <span>{displayCard.labels.join(', ')}</span>\r\n                    ) : (\r\n                      <span className=\"modal-v2-empty\">Empty</span>\r\n                    )}\r\n                  </div>\r\n                </button>\r\n                <SmartPopover\r\n                  triggerRef={labelBtnRef}\r\n                  isOpen={showLabelMenu}\r\n                  onClose={() => setShowLabelMenu(false)}\r\n                  width={220}\r\n                  estimatedHeight={200}\r\n                >\r\n                  {(availableLabels.length > 0 ? availableLabels : ['Bug', 'Feature', 'Enhancement', 'Documentation']).map((label) => (\r\n                    <button\r\n                      key={label}\r\n                      className={`modal-v2-popover-item ${\r\n                        displayCard.labels?.includes(label) ? 'active' : ''\r\n                      }`}\r\n                      onClick={() => handleToggleLabel(label)}\r\n                    >\r\n                      {label}\r\n                      {displayCard.labels?.includes(label) && (\r\n                        <svg\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                          style={{ marginLeft: 'auto' }}\r\n                        >\r\n                          <polyline points=\"20 6 9 17 4 12\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </SmartPopover>\r\n              </div>\r\n            )}\r\n\r\n            {/* DUE DATE FIELD */}\r\n            <button\r\n              className=\"modal-v2-field\"\r\n              onClick={() => {\r\n                setShowDatePicker(!showDatePicker)\r\n                setTimeout(() => datePickerRef.current?.showPicker?.(), 0)\r\n              }}\r\n            >\r\n              <div className=\"modal-v2-field-label\">\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\r\n                  <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\r\n                  <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\r\n                </svg>\r\n                <span>Due Date</span>\r\n                <kbd className=\"modal-v2-shortcut\">D</kbd>\r\n              </div>\r\n              <div className=\"modal-v2-field-value\">\r\n                {displayCard.endDate\r\n                  ? new Date(displayCard.endDate).toLocaleDateString()\r\n                  : 'Not set'}\r\n              </div>\r\n              <input\r\n                ref={datePickerRef}\r\n                type=\"date\"\r\n                value={\r\n                  typeof displayCard.endDate === 'string'\r\n                    ? displayCard.endDate.split('T')[0]\r\n                    : displayCard.endDate\r\n                    ? (() => {\r\n                        // Convert Date to YYYY-MM-DD using UTC to avoid timezone shifts\r\n                        const d = new Date(displayCard.endDate)\r\n                        const year = d.getUTCFullYear()\r\n                        const month = String(d.getUTCMonth() + 1).padStart(2, '0')\r\n                        const day = String(d.getUTCDate()).padStart(2, '0')\r\n                        return `${year}-${month}-${day}`\r\n                      })()\r\n                    : ''\r\n                }\r\n                onChange={handleDateChange}\r\n                style={{ position: 'absolute', opacity: 0, pointerEvents: 'none' }}\r\n              />\r\n            </button>\r\n\r\n            {/* ESTIMATED TIME FIELD */}\r\n            <div className=\"modal-v2-field-wrapper\">\r\n              <button\r\n                className=\"modal-v2-field\"\r\n                onClick={() => setShowTimePicker(!showTimePicker)}\r\n              >\r\n                <div className=\"modal-v2-field-label\">\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <polyline points=\"12 6 12 12 16 14\" />\r\n                  </svg>\r\n                  <span>Estimated Time</span>\r\n                  <kbd className=\"modal-v2-shortcut\">E</kbd>\r\n                </div>\r\n                <div className=\"modal-v2-field-value\">\r\n                  {displayCard.estimatedTime ? `${displayCard.estimatedTime}h` : 'Not set'}\r\n                </div>\r\n              </button>\r\n              {showTimePicker && (\r\n                <div className=\"modal-v2-popover\">\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.5\"\r\n                    placeholder=\"Hours\"\r\n                    value={displayCard.estimatedTime || ''}\r\n                    onChange={(e) => handleTimeChange(e.target.value)}\r\n                    className=\"modal-v2-time-input\"\r\n                    autoFocus\r\n                    onBlur={() => setShowTimePicker(false)}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* DESCRIPTION */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z\" />\r\n                <polyline points=\"14 2 14 8 20 8\" />\r\n                <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                <polyline points=\"10 9 9 9 8 9\" />\r\n              </svg>\r\n              <h2>Description</h2>\r\n            </div>\r\n\r\n            {isEditingDescription ? (\r\n              <textarea\r\n                className=\"modal-v2-textarea\"\r\n                value={displayCard.description || ''}\r\n                onChange={(e) => {\r\n                  if (localCard) {\r\n                    const updated: Card = { ...localCard, description: e.target.value }\r\n                    setLocalCard(updated)\r\n                  }\r\n                }}\r\n                onBlur={handleDescriptionBlur}\r\n                placeholder=\"Add a detailed description...\"\r\n                autoFocus\r\n              />\r\n            ) : (\r\n              <div className=\"modal-v2-content\" onClick={() => setIsEditingDescription(true)}>\r\n                {displayCard.description ? (\r\n                  <div className=\"modal-v2-markdown\">{renderMarkdown(displayCard.description)}</div>\r\n                ) : (\r\n                  <p className=\"modal-v2-placeholder\">\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\r\n                      <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                    </svg>\r\n                    Add description...\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </section>\r\n\r\n          {/* SUBTASKS */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M9 11l3 3L22 4\" />\r\n                <path d=\"M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11\" />\r\n              </svg>\r\n              <h2>Subtasks</h2>\r\n              {subtasks.length > 0 && (\r\n                <span className=\"modal-v2-count\">\r\n                  {completedSubtasksCount}/{subtasks.length}\r\n                </span>\r\n              )}\r\n              <button className=\"modal-v2-add-button\" onClick={() => setIsAddingSubtask(true)}>\r\n                <svg\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n                </svg>\r\n                Add\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"modal-v2-subtasks\">\r\n              {subtasks.map((subtask) => (\r\n                <div\r\n                  key={subtask.id}\r\n                  className={`modal-v2-subtask ${subtask.completed ? 'completed' : ''}`}\r\n                >\r\n                  <button\r\n                    className=\"modal-v2-subtask-checkbox\"\r\n                    onClick={() => handleToggleSubtask(subtask.id)}\r\n                  >\r\n                    {subtask.completed ? (\r\n                      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <path\r\n                          d=\"M9 12l2 2 4-4\"\r\n                          stroke=\"white\"\r\n                          strokeWidth=\"2\"\r\n                          fill=\"none\"\r\n                        />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg\r\n                        width=\"18\"\r\n                        height=\"18\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  <span className=\"modal-v2-subtask-title\">{subtask.title}</span>\r\n                  <button\r\n                    className=\"modal-v2-subtask-delete\"\r\n                    onClick={() => handleDeleteSubtask(subtask.id)}\r\n                  >\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                    >\r\n                      <polyline points=\"3 6 5 6 21 6\" />\r\n                      <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n\r\n              {isAddingSubtask && (\r\n                <div className=\"modal-v2-subtask-input-row\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Subtask title...\"\r\n                    value={newSubtaskTitle}\r\n                    onChange={(e) => setNewSubtaskTitle(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') handleAddSubtask()\r\n                      if (e.key === 'Escape') {\r\n                        setIsAddingSubtask(false)\r\n                        setNewSubtaskTitle('')\r\n                      }\r\n                    }}\r\n                    onBlur={handleAddSubtask}\r\n                    autoFocus\r\n                    className=\"modal-v2-subtask-input\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* ATTACHMENTS */}\r\n          {(onUploadAttachments || attachments.length > 0) && (\r\n            <section className=\"modal-v2-section\">\r\n              <div className=\"modal-v2-section-header\">\r\n                <svg\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                >\r\n                  <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\r\n                </svg>\r\n                <h2>Attachments</h2>\r\n                {attachments.length > 0 && (\r\n                  <span className=\"modal-v2-count\">{attachments.length}</span>\r\n                )}\r\n              </div>\r\n\r\n              <AttachmentUploader\r\n                cardId={displayCard.id}\r\n                attachments={attachments}\r\n                onUpload={onUploadAttachments ? (files) => onUploadAttachments(displayCard.id, files) : undefined}\r\n                onDelete={onDeleteAttachment}\r\n                maxSizeMB={10}\r\n                maxFiles={20}\r\n              />\r\n            </section>\r\n          )}\r\n\r\n          {/* ACTIVITY & COMMENTS */}\r\n          <section className=\"modal-v2-section\">\r\n            <div className=\"modal-v2-section-header\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n              >\r\n                <path d=\"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z\" />\r\n              </svg>\r\n              <h2>Activity</h2>\r\n              <div className=\"modal-v2-filters\">\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'all' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('all')}\r\n                >\r\n                  All\r\n                </button>\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'comments' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('comments')}\r\n                >\r\n                  Comments\r\n                </button>\r\n                <button\r\n                  className={`modal-v2-filter ${activityFilter === 'history' ? 'active' : ''}`}\r\n                  onClick={() => setActivityFilter('history')}\r\n                >\r\n                  History\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Comment Input */}\r\n            <div className=\"modal-v2-comment-input\">\r\n              {currentUser && (\r\n                <div className=\"modal-v2-avatar\" style={{ background: currentUser.color }}>\r\n                  {currentUser.initials}\r\n                </div>\r\n              )}\r\n              <div className=\"modal-v2-comment-wrapper\">\r\n                <textarea\r\n                  ref={commentRef}\r\n                  className=\"modal-v2-comment-textarea\"\r\n                  placeholder=\"Write a comment...\"\r\n                  value={commentText}\r\n                  onChange={(e) => setCommentText(e.target.value)}\r\n                  onKeyDown={handleCommentKeyDown}\r\n                  rows={1}\r\n                />\r\n                <div className=\"modal-v2-comment-toolbar\">\r\n                  <div className=\"modal-v2-toolbar-left\">\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Attach file\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\r\n                      </svg>\r\n                    </button>\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Mention user\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n                        <path d=\"M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94\" />\r\n                      </svg>\r\n                    </button>\r\n                    <button className=\"modal-v2-toolbar-button\" title=\"Add emoji\">\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                      >\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                        <path d=\"M8 14s1.5 2 4 2 4-2 4-2\" />\r\n                        <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\" />\r\n                        <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\" />\r\n                      </svg>\r\n                    </button>\r\n                  </div>\r\n                  <button\r\n                    className=\"modal-v2-send-button\"\r\n                    onClick={handleSendComment}\r\n                    disabled={!commentText.trim()}\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Activity Timeline */}\r\n            <div className=\"modal-v2-timeline\">\r\n              {filteredActivity.map((activity) => {\r\n                const user = availableUsers.find((u) => u.id === activity.userId)\r\n                const isComment = activity.type.includes('COMMENT')\r\n\r\n                if (isComment) {\r\n                  const comment = comments.find((c) => c.id === activity.metadata?.commentId)\r\n                  if (!comment) return null\r\n\r\n                  return (\r\n                    <div key={activity.id} className=\"modal-v2-activity-item comment-item\">\r\n                      {user && (\r\n                        <div className=\"modal-v2-avatar\" style={{ background: user.color }}>\r\n                          {user.initials}\r\n                        </div>\r\n                      )}\r\n                      <div className=\"modal-v2-activity-content\">\r\n                        <div className=\"modal-v2-activity-header\">\r\n                          <span className=\"modal-v2-activity-user\">\r\n                            {user?.name || 'Unknown'}\r\n                          </span>\r\n                          <span className=\"modal-v2-activity-time\">\r\n                            {new Date(activity.timestamp).toLocaleString()}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"modal-v2-comment-body\">{comment.content}</div>\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                }\r\n\r\n                // History item\r\n                return (\r\n                  <div key={activity.id} className=\"modal-v2-activity-item history-item\">\r\n                    <div className=\"modal-v2-history-icon\">\r\n                      {activity.type.includes('CREATED') && ''}\r\n                      {activity.type.includes('UPDATED') && ''}\r\n                      {activity.type.includes('MOVED') && ''}\r\n                      {activity.type.includes('DELETED') && ''}\r\n                      {activity.type.includes('ASSIGNED') && ''}\r\n                      {activity.type.includes('PRIORITY') && ''}\r\n                      {activity.type.includes('LABEL') && ''}\r\n                    </div>\r\n                    <div className=\"modal-v2-activity-content\">\r\n                      <div className=\"modal-v2-history-text\">\r\n                        <span className=\"modal-v2-activity-user\">\r\n                          {user?.name || 'Unknown'}\r\n                        </span>{' '}\r\n                        {activity.type.replace(/_/g, ' ').toLowerCase()}\r\n                        {activity.newValue && (\r\n                          <>\r\n                            {' to '}\r\n                            <strong>{activity.newValue}</strong>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                      <span className=\"modal-v2-activity-time\">\r\n                        {new Date(activity.timestamp).toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n\r\n              {filteredActivity.length === 0 && (\r\n                <div className=\"modal-v2-empty\">\r\n                  <p>No activity yet</p>\r\n                  <span>Activity will appear here</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * VelocityChart Component\r\n * Shows team velocity over time (cards completed per week/sprint)\r\n */\r\n\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface VelocityDataPoint {\r\n  /** Period name (e.g., \"Week 1\", \"Sprint 3\") */\r\n  period: string\r\n  /** Number of cards completed */\r\n  completed: number\r\n  /** Number of cards planned */\r\n  planned?: number\r\n  /** Average velocity (optional) */\r\n  average?: number\r\n}\r\n\r\nexport interface VelocityChartProps {\r\n  /** Velocity data points */\r\n  data: VelocityDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Show average line */\r\n  showAverage?: boolean\r\n  /** Show planned line */\r\n  showPlanned?: boolean\r\n}\r\n\r\n/**\r\n * Custom tooltip for velocity chart\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{payload[0].payload.period}</p>\r\n      {payload.map((entry: any, index: number) => (\r\n        <p key={index} className=\"chart-tooltip-value\" style={{ color: entry.color }}>\r\n          {entry.name}: <strong>{entry.value}</strong> cards\r\n        </p>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function VelocityChart({\r\n  data,\r\n  title = 'Team Velocity',\r\n  height = 300,\r\n  showAverage = true,\r\n  showPlanned = true,\r\n}: VelocityChartProps) {\r\n  // Calculate average if not provided\r\n  const dataWithAverage = data.map((point) => ({\r\n    ...point,\r\n    average:\r\n      point.average ??\r\n      data.reduce((sum, p) => sum + p.completed, 0) / data.length,\r\n  }))\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        <LineChart\r\n          data={dataWithAverage}\r\n          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n          <XAxis\r\n            dataKey=\"period\"\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <YAxis\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend\r\n            wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n          />\r\n\r\n          {/* Completed cards line */}\r\n          <Line\r\n            type=\"monotone\"\r\n            dataKey=\"completed\"\r\n            stroke=\"#10B981\"\r\n            strokeWidth={3}\r\n            name=\"Completed\"\r\n            dot={{ fill: '#10B981', r: 5 }}\r\n            activeDot={{ r: 7 }}\r\n          />\r\n\r\n          {/* Planned cards line */}\r\n          {showPlanned && (\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"planned\"\r\n              stroke=\"#3B82F6\"\r\n              strokeWidth={2}\r\n              strokeDasharray=\"5 5\"\r\n              name=\"Planned\"\r\n              dot={{ fill: '#3B82F6', r: 4 }}\r\n            />\r\n          )}\r\n\r\n          {/* Average line */}\r\n          {showAverage && (\r\n            <Line\r\n              type=\"monotone\"\r\n              dataKey=\"average\"\r\n              stroke=\"#F59E0B\"\r\n              strokeWidth={2}\r\n              strokeDasharray=\"3 3\"\r\n              name=\"Average\"\r\n              dot={false}\r\n            />\r\n          )}\r\n        </LineChart>\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Total Completed</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#10B981' }}>\r\n            {data.reduce((sum, point) => sum + point.completed, 0)}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Average Velocity</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#F59E0B' }}>\r\n            {(data.reduce((sum, point) => sum + point.completed, 0) / data.length).toFixed(1)}\r\n          </span>\r\n        </div>\r\n        {showPlanned && data.some((p) => p.planned) && (\r\n          <div className=\"chart-stat\">\r\n            <span className=\"chart-stat-label\">Total Planned</span>\r\n            <span className=\"chart-stat-value\" style={{ color: '#3B82F6' }}>\r\n              {data.reduce((sum, point) => sum + (point.planned || 0), 0)}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * BurnDownChart Component\r\n * Shows remaining work over time compared to ideal burndown\r\n */\r\n\r\nimport { AreaChart, Area, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface BurnDownDataPoint {\r\n  /** Day/Date label */\r\n  day: string\r\n  /** Remaining tasks */\r\n  remaining: number\r\n  /** Ideal burndown line */\r\n  ideal: number\r\n}\r\n\r\nexport interface BurnDownChartProps {\r\n  /** Burndown data points */\r\n  data: BurnDownDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Total tasks at start */\r\n  totalTasks?: number\r\n  /** Use area chart instead of line */\r\n  useArea?: boolean\r\n}\r\n\r\n/**\r\n * Custom tooltip for burndown chart\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{payload[0].payload.day}</p>\r\n      {payload.map((entry: any, index: number) => (\r\n        <p key={index} className=\"chart-tooltip-value\" style={{ color: entry.color }}>\r\n          {entry.name}: <strong>{entry.value}</strong> tasks\r\n        </p>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function BurnDownChart({\r\n  data,\r\n  title = 'Sprint Burndown',\r\n  height = 300,\r\n  totalTasks,\r\n  useArea = false,\r\n}: BurnDownChartProps) {\r\n  // Calculate total tasks if not provided\r\n  const total = totalTasks ?? (data[0]?.ideal || data[0]?.remaining || 0)\r\n\r\n  // Calculate stats\r\n  const currentRemaining = data[data.length - 1]?.remaining || 0\r\n  const idealRemaining = data[data.length - 1]?.ideal || 0\r\n  const progress = total > 0 ? ((total - currentRemaining) / total) * 100 : 0\r\n  const isOnTrack = currentRemaining <= idealRemaining\r\n\r\n  const ChartComponent = useArea ? AreaChart : LineChart\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        <ChartComponent\r\n          data={data}\r\n          margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n          <XAxis\r\n            dataKey=\"day\"\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <YAxis\r\n            stroke=\"rgba(255, 255, 255, 0.5)\"\r\n            style={{ fontSize: '12px' }}\r\n          />\r\n          <Tooltip content={<CustomTooltip />} />\r\n          <Legend\r\n            wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n          />\r\n\r\n          {useArea ? (\r\n            <>\r\n              {/* Ideal burndown area */}\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"ideal\"\r\n                stroke=\"#F59E0B\"\r\n                fill=\"rgba(245, 158, 11, 0.2)\"\r\n                strokeWidth={2}\r\n                strokeDasharray=\"5 5\"\r\n                name=\"Ideal\"\r\n              />\r\n              {/* Actual burndown area */}\r\n              <Area\r\n                type=\"monotone\"\r\n                dataKey=\"remaining\"\r\n                stroke={isOnTrack ? '#10B981' : '#EF4444'}\r\n                fill={isOnTrack ? 'rgba(16, 185, 129, 0.2)' : 'rgba(239, 68, 68, 0.2)'}\r\n                strokeWidth={3}\r\n                name=\"Remaining\"\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* Ideal burndown line */}\r\n              <Line\r\n                type=\"linear\"\r\n                dataKey=\"ideal\"\r\n                stroke=\"#F59E0B\"\r\n                strokeWidth={2}\r\n                strokeDasharray=\"5 5\"\r\n                name=\"Ideal\"\r\n                dot={{ fill: '#F59E0B', r: 4 }}\r\n              />\r\n              {/* Actual burndown line */}\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"remaining\"\r\n                stroke={isOnTrack ? '#10B981' : '#EF4444'}\r\n                strokeWidth={3}\r\n                name=\"Remaining\"\r\n                dot={{ fill: isOnTrack ? '#10B981' : '#EF4444', r: 5 }}\r\n                activeDot={{ r: 7 }}\r\n              />\r\n            </>\r\n          )}\r\n        </ChartComponent>\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Progress</span>\r\n          <span\r\n            className=\"chart-stat-value\"\r\n            style={{ color: progress >= 50 ? '#10B981' : '#F59E0B' }}\r\n          >\r\n            {progress.toFixed(0)}%\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Remaining</span>\r\n          <span\r\n            className=\"chart-stat-value\"\r\n            style={{ color: isOnTrack ? '#10B981' : '#EF4444' }}\r\n          >\r\n            {currentRemaining}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Status</span>\r\n          <span\r\n            className=\"chart-stat-badge\"\r\n            style={{\r\n              background: isOnTrack\r\n                ? 'rgba(16, 185, 129, 0.15)'\r\n                : 'rgba(239, 68, 68, 0.15)',\r\n              color: isOnTrack ? '#10B981' : '#EF4444',\r\n            }}\r\n          >\r\n            {isOnTrack ? ' On Track' : ' Behind'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * DistributionCharts Component\r\n * Shows distribution of cards by priority, status, or assignees\r\n */\r\n\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'\r\nimport './charts.css'\r\n\r\nexport interface DistributionDataPoint {\r\n  /** Category name */\r\n  name: string\r\n  /** Value/count */\r\n  value: number\r\n  /** Optional color */\r\n  color?: string\r\n}\r\n\r\nexport interface DistributionChartsProps {\r\n  /** Distribution data */\r\n  data: DistributionDataPoint[]\r\n  /** Chart title */\r\n  title?: string\r\n  /** Chart type */\r\n  type?: 'pie' | 'bar'\r\n  /** Chart height in pixels */\r\n  height?: number\r\n  /** Show percentages */\r\n  showPercentages?: boolean\r\n}\r\n\r\n// Default colors for priority\r\nconst PRIORITY_COLORS: Record<string, string> = {\r\n  URGENT: '#EF4444',\r\n  HIGH: '#F59E0B',\r\n  MEDIUM: '#3B82F6',\r\n  LOW: '#10B981',\r\n}\r\n\r\n// Default colors for common categories\r\nconst DEFAULT_COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899']\r\n\r\n/**\r\n * Custom label for pie chart\r\n */\r\nfunction renderPieLabel({\r\n  cx,\r\n  cy,\r\n  midAngle,\r\n  innerRadius,\r\n  outerRadius,\r\n  percent,\r\n}: any) {\r\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5\r\n  const x = cx + radius * Math.cos(-midAngle * (Math.PI / 180))\r\n  const y = cy + radius * Math.sin(-midAngle * (Math.PI / 180))\r\n\r\n  if (percent < 0.05) return null // Don't show label for small slices\r\n\r\n  return (\r\n    <text\r\n      x={x}\r\n      y={y}\r\n      fill=\"white\"\r\n      textAnchor={x > cx ? 'start' : 'end'}\r\n      dominantBaseline=\"central\"\r\n      style={{ fontSize: '12px', fontWeight: 600 }}\r\n    >\r\n      {`${(percent * 100).toFixed(0)}%`}\r\n    </text>\r\n  )\r\n}\r\n\r\n/**\r\n * Custom tooltip\r\n */\r\nfunction CustomTooltip({ active, payload }: any) {\r\n  if (!active || !payload || !payload.length) return null\r\n\r\n  const data = payload[0].payload\r\n  const total = payload[0].payload.totalValue || 0\r\n  const percentage = total > 0 ? ((data.value / total) * 100).toFixed(1) : '0'\r\n\r\n  return (\r\n    <div className=\"chart-tooltip\">\r\n      <p className=\"chart-tooltip-label\">{data.name}</p>\r\n      <p className=\"chart-tooltip-value\" style={{ color: data.color || payload[0].color }}>\r\n        Count: <strong>{data.value}</strong>\r\n      </p>\r\n      <p className=\"chart-tooltip-value\" style={{ color: 'rgba(255, 255, 255, 0.7)' }}>\r\n        Percentage: <strong>{percentage}%</strong>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DistributionCharts({\r\n  data,\r\n  title = 'Distribution',\r\n  type = 'pie',\r\n  height = 300,\r\n  showPercentages = true,\r\n}: DistributionChartsProps) {\r\n  // Calculate total and add to each data point\r\n  const total = data.reduce((sum, point) => sum + point.value, 0)\r\n  const dataWithTotal = data.map((point) => ({\r\n    ...point,\r\n    totalValue: total,\r\n    color: point.color || PRIORITY_COLORS[point.name] || DEFAULT_COLORS[data.indexOf(point) % DEFAULT_COLORS.length],\r\n  }))\r\n\r\n  // Get colors array\r\n  const colors = dataWithTotal.map((point) => point.color)\r\n\r\n  return (\r\n    <div className=\"chart-container\">\r\n      {title && <h3 className=\"chart-title\">{title}</h3>}\r\n\r\n      <ResponsiveContainer width=\"100%\" height={height}>\r\n        {type === 'pie' ? (\r\n          <PieChart>\r\n            <Pie\r\n              data={dataWithTotal}\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              labelLine={false}\r\n              label={showPercentages ? renderPieLabel : false}\r\n              outerRadius={height * 0.35}\r\n              fill=\"#8884d8\"\r\n              dataKey=\"value\"\r\n            >\r\n              {dataWithTotal.map((_, index) => (\r\n                <Cell key={`cell-${index}`} fill={colors[index]} />\r\n              ))}\r\n            </Pie>\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend\r\n              wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n              formatter={(value, legendEntry: any) => {\r\n                const point = legendEntry.payload\r\n                const percentage = total > 0 ? ((point.value / total) * 100).toFixed(0) : '0'\r\n                return `${value} (${point.value} - ${percentage}%)`\r\n              }}\r\n            />\r\n          </PieChart>\r\n        ) : (\r\n          <BarChart\r\n            data={dataWithTotal}\r\n            margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\r\n          >\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255, 255, 255, 0.1)\" />\r\n            <XAxis\r\n              dataKey=\"name\"\r\n              stroke=\"rgba(255, 255, 255, 0.5)\"\r\n              style={{ fontSize: '12px' }}\r\n            />\r\n            <YAxis\r\n              stroke=\"rgba(255, 255, 255, 0.5)\"\r\n              style={{ fontSize: '12px' }}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend\r\n              wrapperStyle={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.7)' }}\r\n            />\r\n            <Bar dataKey=\"value\" name=\"Count\" radius={[8, 8, 0, 0]}>\r\n              {dataWithTotal.map((_, index) => (\r\n                <Cell key={`cell-${index}`} fill={colors[index]} />\r\n              ))}\r\n            </Bar>\r\n          </BarChart>\r\n        )}\r\n      </ResponsiveContainer>\r\n\r\n      {/* Stats */}\r\n      <div className=\"chart-stats\">\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Total Cards</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#3B82F6' }}>\r\n            {total}\r\n          </span>\r\n        </div>\r\n        <div className=\"chart-stat\">\r\n          <span className=\"chart-stat-label\">Categories</span>\r\n          <span className=\"chart-stat-value\" style={{ color: '#10B981' }}>\r\n            {data.length}\r\n          </span>\r\n        </div>\r\n        {data.length > 0 && (\r\n          <div className=\"chart-stat\">\r\n            <span className=\"chart-stat-label\">Largest Category</span>\r\n            <span className=\"chart-stat-value\" style={{ color: '#F59E0B' }}>\r\n              {data.reduce((max, point) => (point.value > max.value ? point : max)).name}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Bulk Operations Toolbar\r\n * Floating toolbar for performing bulk actions on selected cards\r\n * @module components/BulkOperations\r\n */\r\n\r\nimport { memo, useState } from 'react'\r\nimport type { Card, Priority, BulkOperationsCallbacks } from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface BulkOperationsToolbarProps {\r\n  /** Selected cards */\r\n  selectedCards: Card[]\r\n  /** Available users for assignment */\r\n  availableUsers?: User[]\r\n  /** Callback when selection is cleared */\r\n  onClearSelection: () => void\r\n  /** Bulk operations callbacks */\r\n  callbacks: BulkOperationsCallbacks\r\n  /** Available columns for move operation */\r\n  columns?: Array<{ id: string; title: string }>\r\n  /** Available labels */\r\n  availableLabels?: string[]\r\n}\r\n\r\n/**\r\n * Bulk Operations Toolbar Component\r\n */\r\nexport const BulkOperationsToolbar = memo<BulkOperationsToolbarProps>(\r\n  ({\r\n    selectedCards,\r\n    availableUsers = [],\r\n    onClearSelection,\r\n    callbacks,\r\n    columns = [],\r\n    availableLabels = [],\r\n  }) => {\r\n    const [showPriorityMenu, setShowPriorityMenu] = useState(false)\r\n    const [showMoveMenu, setShowMoveMenu] = useState(false)\r\n    const [showUserMenu, setShowUserMenu] = useState(false)\r\n    const [showLabelMenu, setShowLabelMenu] = useState(false)\r\n\r\n    if (selectedCards.length === 0) return null\r\n\r\n    const cardIds = selectedCards.map((card) => card.id)\r\n\r\n    const handleUpdatePriority = (priority: Priority) => {\r\n      callbacks.onBulkUpdate?.(cardIds, { priority })\r\n      setShowPriorityMenu(false)\r\n    }\r\n\r\n    const handleMove = (columnId: string) => {\r\n      callbacks.onBulkMove?.(cardIds, columnId)\r\n      setShowMoveMenu(false)\r\n      onClearSelection()\r\n    }\r\n\r\n    const handleAssignUsers = (userIds: string[]) => {\r\n      callbacks.onBulkUpdate?.(cardIds, { assignedUserIds: userIds })\r\n      setShowUserMenu(false)\r\n    }\r\n\r\n    const handleAddLabels = (labels: string[]) => {\r\n      // Get existing labels from all selected cards\r\n      const existingLabels = new Set<string>()\r\n      selectedCards.forEach((card) => {\r\n        card.labels?.forEach((label) => existingLabels.add(label))\r\n      })\r\n\r\n      // Merge with new labels\r\n      const allLabels = Array.from(new Set([...existingLabels, ...labels]))\r\n\r\n      callbacks.onBulkUpdate?.(cardIds, { labels: allLabels })\r\n      setShowLabelMenu(false)\r\n    }\r\n\r\n    const handleDelete = () => {\r\n      if (confirm(`Delete ${selectedCards.length} card(s)? This cannot be undone.`)) {\r\n        callbacks.onBulkDelete?.(cardIds)\r\n        onClearSelection()\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"asakaa-bulk-toolbar\">\r\n        <div className=\"asakaa-bulk-toolbar-content\">\r\n          {/* Selection count */}\r\n          <div className=\"asakaa-bulk-toolbar-count\">\r\n            {selectedCards.length} card{selectedCards.length !== 1 ? 's' : ''} selected\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"asakaa-bulk-toolbar-actions\">\r\n            {/* Priority */}\r\n            <div className=\"relative\">\r\n              <button\r\n                className=\"asakaa-bulk-toolbar-button\"\r\n                onClick={() => setShowPriorityMenu(!showPriorityMenu)}\r\n                title=\"Update priority\"\r\n              >\r\n                <span className=\"text-sm\">Priority</span>\r\n              </button>\r\n              {showPriorityMenu && (\r\n                <div className=\"asakaa-bulk-menu\">\r\n                  {(['LOW', 'MEDIUM', 'HIGH', 'URGENT'] as Priority[]).map((priority) => (\r\n                    <button\r\n                      key={priority}\r\n                      className=\"asakaa-bulk-menu-item\"\r\n                      onClick={() => handleUpdatePriority(priority)}\r\n                    >\r\n                      <span\r\n                        className={cn(\r\n                          'asakaa-priority-dot',\r\n                          priority === 'LOW' && 'bg-asakaa-priority-low',\r\n                          priority === 'MEDIUM' && 'bg-asakaa-priority-medium',\r\n                          priority === 'HIGH' && 'bg-asakaa-priority-high',\r\n                          priority === 'URGENT' && 'bg-asakaa-priority-urgent'\r\n                        )}\r\n                      />\r\n                      {priority}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Move to column */}\r\n            {columns.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowMoveMenu(!showMoveMenu)}\r\n                  title=\"Move to column\"\r\n                >\r\n                  <span className=\"text-sm\">Move</span>\r\n                </button>\r\n                {showMoveMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {columns.map((column) => (\r\n                      <button\r\n                        key={column.id}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleMove(column.id)}\r\n                      >\r\n                        {column.title}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Assign users */}\r\n            {availableUsers.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowUserMenu(!showUserMenu)}\r\n                  title=\"Assign users\"\r\n                >\r\n                  <span className=\"text-sm\">Assign</span>\r\n                </button>\r\n                {showUserMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {availableUsers.map((user) => (\r\n                      <button\r\n                        key={user.id}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleAssignUsers([user.id])}\r\n                      >\r\n                        <div\r\n                          className=\"w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium\"\r\n                          style={{ backgroundColor: user.color }}\r\n                        >\r\n                          {user.initials}\r\n                        </div>\r\n                        {user.name}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Add labels */}\r\n            {availableLabels.length > 0 && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  className=\"asakaa-bulk-toolbar-button\"\r\n                  onClick={() => setShowLabelMenu(!showLabelMenu)}\r\n                  title=\"Add labels\"\r\n                >\r\n                  <span className=\"text-sm\">Labels</span>\r\n                </button>\r\n                {showLabelMenu && (\r\n                  <div className=\"asakaa-bulk-menu\">\r\n                    {availableLabels.map((label) => (\r\n                      <button\r\n                        key={label}\r\n                        className=\"asakaa-bulk-menu-item\"\r\n                        onClick={() => handleAddLabels([label])}\r\n                      >\r\n                        {label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Delete */}\r\n            <button\r\n              className=\"asakaa-bulk-toolbar-button asakaa-bulk-toolbar-button-danger\"\r\n              onClick={handleDelete}\r\n              title=\"Delete selected cards\"\r\n            >\r\n              <span className=\"text-sm\">Delete</span>\r\n            </button>\r\n\r\n            {/* Clear selection */}\r\n            <button\r\n              className=\"asakaa-bulk-toolbar-button\"\r\n              onClick={onClearSelection}\r\n              title=\"Clear selection\"\r\n            >\r\n              <span className=\"text-sm\"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\n\r\nBulkOperationsToolbar.displayName = 'BulkOperationsToolbar'\r\n","/**\r\n * SwimlaneBoardView Component\r\n * Displays board grouped by swimlanes (horizontal rows)\r\n * @module components/Swimlanes\r\n */\r\n\r\nimport { useMemo, useState, useCallback } from 'react'\r\nimport type {\r\n  Board,\r\n  Card,\r\n  Column,\r\n  GroupByOption,\r\n  Swimlane,\r\n  SwimlaneConfig,\r\n} from '../../types'\r\nimport type { User } from '../Card/UserAssignmentSelector'\r\nimport { KanbanBoard } from '../Board'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface SwimlaneBoardViewProps {\r\n  /** Board data */\r\n  board: Board\r\n  /** Swimlane configuration */\r\n  swimlaneConfig: SwimlaneConfig\r\n  /** All available users */\r\n  availableUsers?: User[]\r\n  /** Board callbacks */\r\n  callbacks: {\r\n    onCardMove?: (cardId: string, targetColumnId: string, position: number) => void\r\n    onCardUpdate?: (cardId: string, updates: Partial<Card>) => void\r\n    onColumnUpdate?: (columnId: string, updates: Partial<Column>) => void\r\n    onWipLimitExceeded?: (column: Column, card: Card) => void\r\n  }\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Generate swimlanes based on groupBy option\r\n */\r\nfunction generateSwimlanes(\r\n  cards: Card[],\r\n  groupBy: GroupByOption,\r\n  availableUsers?: User[]\r\n): Swimlane[] {\r\n  if (groupBy === 'none') {\r\n    return []\r\n  }\r\n\r\n  const laneMap = new Map<string, Swimlane>()\r\n\r\n  // Group cards by the selected criteria\r\n  cards.forEach((card) => {\r\n    let groupValue: any\r\n    let laneId: string\r\n    let laneTitle: string\r\n    let laneColor: string | undefined\r\n    let laneIcon: string | undefined\r\n\r\n    switch (groupBy) {\r\n      case 'assignee':\r\n        // Use assignedUserIds or fallback to assigneeId\r\n        const assignedUserIds = card.assignedUserIds || (card.assigneeId ? [card.assigneeId] : [])\r\n\r\n        if (assignedUserIds.length > 0) {\r\n          assignedUserIds.forEach((userId: string) => {\r\n            const user = availableUsers?.find((u) => u.id === userId)\r\n            laneId = `assignee-${userId}`\r\n            laneTitle = user?.name || `User ${userId}`\r\n            laneColor = user?.color\r\n            laneIcon = user?.avatar\r\n\r\n            if (!laneMap.has(laneId)) {\r\n              laneMap.set(laneId, {\r\n                id: laneId,\r\n                title: laneTitle,\r\n                groupValue: userId,\r\n                cardIds: [],\r\n                color: laneColor,\r\n                icon: laneIcon,\r\n              })\r\n            }\r\n            laneMap.get(laneId)!.cardIds.push(card.id)\r\n          })\r\n        } else {\r\n          // Unassigned lane\r\n          laneId = 'assignee-unassigned'\r\n          laneTitle = 'Unassigned'\r\n          laneColor = '#6b7280'\r\n          laneIcon = ''\r\n\r\n          if (!laneMap.has(laneId)) {\r\n            laneMap.set(laneId, {\r\n              id: laneId,\r\n              title: laneTitle,\r\n              groupValue: null,\r\n              cardIds: [],\r\n              color: laneColor,\r\n              icon: laneIcon,\r\n            })\r\n          }\r\n          laneMap.get(laneId)!.cardIds.push(card.id)\r\n        }\r\n        break\r\n\r\n      case 'priority':\r\n        groupValue = card.priority || 'NONE'\r\n        laneId = `priority-${groupValue}`\r\n\r\n        // Priority styling\r\n        const priorityConfig = {\r\n          URGENT: { title: ' Urgent', color: '#ef4444' },\r\n          HIGH: { title: ' High', color: '#f97316' },\r\n          MEDIUM: { title: ' Medium', color: '#eab308' },\r\n          LOW: { title: ' Low', color: '#22c55e' },\r\n          NONE: { title: ' No Priority', color: '#6b7280' },\r\n        }\r\n\r\n        const config = priorityConfig[groupValue as keyof typeof priorityConfig]\r\n        laneTitle = config.title\r\n        laneColor = config.color\r\n\r\n        if (!laneMap.has(laneId)) {\r\n          laneMap.set(laneId, {\r\n            id: laneId,\r\n            title: laneTitle,\r\n            groupValue,\r\n            cardIds: [],\r\n            color: laneColor,\r\n          })\r\n        }\r\n        laneMap.get(laneId)!.cardIds.push(card.id)\r\n        break\r\n\r\n      case 'label':\r\n        if (card.labels && card.labels.length > 0) {\r\n          card.labels.forEach((label: string) => {\r\n            laneId = `label-${label}`\r\n            laneTitle = label\r\n            laneColor = '#6b7280' // Default gray color for string labels\r\n\r\n            if (!laneMap.has(laneId)) {\r\n              laneMap.set(laneId, {\r\n                id: laneId,\r\n                title: laneTitle,\r\n                groupValue: label,\r\n                cardIds: [],\r\n                color: laneColor,\r\n              })\r\n            }\r\n            laneMap.get(laneId)!.cardIds.push(card.id)\r\n          })\r\n        } else {\r\n          // No labels lane\r\n          laneId = 'label-none'\r\n          laneTitle = 'No Labels'\r\n          laneColor = '#6b7280'\r\n\r\n          if (!laneMap.has(laneId)) {\r\n            laneMap.set(laneId, {\r\n              id: laneId,\r\n              title: laneTitle,\r\n              groupValue: null,\r\n              cardIds: [],\r\n              color: laneColor,\r\n            })\r\n          }\r\n          laneMap.get(laneId)!.cardIds.push(card.id)\r\n        }\r\n        break\r\n    }\r\n  })\r\n\r\n  return Array.from(laneMap.values()).sort((a, b) => {\r\n    // Sort by title\r\n    return a.title.localeCompare(b.title)\r\n  })\r\n}\r\n\r\n/**\r\n * SwimlaneBoardView Component\r\n */\r\nexport function SwimlaneBoardView({\r\n  board,\r\n  swimlaneConfig,\r\n  availableUsers,\r\n  callbacks,\r\n  className,\r\n}: SwimlaneBoardViewProps) {\r\n  const [collapsedLanes, setCollapsedLanes] = useState<Set<string>>(new Set())\r\n\r\n  // Generate swimlanes\r\n  const swimlanes = useMemo(() => {\r\n    return generateSwimlanes(\r\n      board.cards,\r\n      swimlaneConfig.groupBy,\r\n      availableUsers\r\n    )\r\n  }, [board.cards, swimlaneConfig.groupBy, availableUsers])\r\n\r\n  // Toggle lane collapse\r\n  const toggleLaneCollapse = useCallback((laneId: string) => {\r\n    setCollapsedLanes((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(laneId)) {\r\n        next.delete(laneId)\r\n      } else {\r\n        next.add(laneId)\r\n      }\r\n      return next\r\n    })\r\n  }, [])\r\n\r\n  // If no grouping, render standard board\r\n  if (swimlaneConfig.groupBy === 'none' || swimlanes.length === 0) {\r\n    return (\r\n      <KanbanBoard\r\n        board={board}\r\n        callbacks={callbacks}\r\n        availableUsers={availableUsers}\r\n        className={className}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('asakaa-swimlane-view', className)}>\r\n      {swimlanes.map((lane) => {\r\n        const isCollapsed = collapsedLanes.has(lane.id)\r\n\r\n        // Filter cards for this lane\r\n        const laneCards = board.cards.filter((card) =>\r\n          lane.cardIds.includes(card.id)\r\n        )\r\n\r\n        // Create filtered board for this lane\r\n        const laneBoard: Board = {\r\n          ...board,\r\n          cards: laneCards,\r\n        }\r\n\r\n        return (\r\n          <div\r\n            key={lane.id}\r\n            className=\"asakaa-swimlane mb-6 rounded-lg border border-white/10 overflow-hidden\"\r\n          >\r\n            {/* Swimlane Header */}\r\n            <div\r\n              className=\"asakaa-swimlane-header px-4 py-3 bg-white/5 backdrop-blur-sm flex items-center justify-between cursor-pointer hover:bg-white/10 transition-colors\"\r\n              onClick={() => swimlaneConfig.collapsible && toggleLaneCollapse(lane.id)}\r\n              style={{\r\n                borderLeft: lane.color ? `4px solid ${lane.color}` : undefined,\r\n              }}\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                {lane.icon && (\r\n                  <span className=\"text-2xl leading-none\">{lane.icon}</span>\r\n                )}\r\n                <h3\r\n                  className=\"text-lg font-semibold\"\r\n                  style={{ color: lane.color }}\r\n                >\r\n                  {lane.title}\r\n                </h3>\r\n                <span className=\"text-sm text-white/50 font-medium\">\r\n                  ({lane.cardIds.length} {lane.cardIds.length === 1 ? 'card' : 'cards'})\r\n                </span>\r\n              </div>\r\n\r\n              {swimlaneConfig.collapsible && (\r\n                <button\r\n                  className=\"text-white/50 hover:text-white transition-colors\"\r\n                  aria-label={isCollapsed ? 'Expand lane' : 'Collapse lane'}\r\n                >\r\n                  {isCollapsed ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* Swimlane Content */}\r\n            {!isCollapsed && (\r\n              <div className=\"asakaa-swimlane-content p-4\">\r\n                <KanbanBoard\r\n                  board={laneBoard}\r\n                  callbacks={callbacks}\r\n                  availableUsers={availableUsers}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )\r\n      })}\r\n\r\n      {/* Empty state */}\r\n      {swimlanes.length === 0 && (\r\n        <div className=\"text-center py-12 text-white/50\">\r\n          <p className=\"text-lg\">No cards to display</p>\r\n          <p className=\"text-sm mt-2\">\r\n            Cards will appear here when they match the grouping criteria\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * GroupBySelector Component\r\n * Dropdown to select swimlane grouping option\r\n * @module components/Swimlanes\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport type { GroupByOption } from '../../types'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface GroupBySelectorProps {\r\n  /** Current groupBy value */\r\n  value: GroupByOption\r\n  /** Change handler */\r\n  onChange: (groupBy: GroupByOption) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\ninterface GroupByConfig {\r\n  value: GroupByOption\r\n  label: string\r\n  icon: string\r\n  description: string\r\n}\r\n\r\nconst GROUP_BY_OPTIONS: GroupByConfig[] = [\r\n  {\r\n    value: 'none',\r\n    label: 'No Grouping',\r\n    icon: '',\r\n    description: 'Standard Kanban board view',\r\n  },\r\n  {\r\n    value: 'assignee',\r\n    label: 'By Assignee',\r\n    icon: '',\r\n    description: 'Group cards by assigned user',\r\n  },\r\n  {\r\n    value: 'priority',\r\n    label: 'By Priority',\r\n    icon: '',\r\n    description: 'Group cards by priority level',\r\n  },\r\n  {\r\n    value: 'label',\r\n    label: 'By Label',\r\n    icon: '',\r\n    description: 'Group cards by label/tag',\r\n  },\r\n]\r\n\r\n/**\r\n * GroupBySelector Component\r\n */\r\nexport function GroupBySelector({\r\n  value,\r\n  onChange,\r\n  className,\r\n}: GroupBySelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  const currentOption = GROUP_BY_OPTIONS.find((opt) => opt.value === value) || GROUP_BY_OPTIONS[0]!\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent): void {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        buttonRef.current &&\r\n        !buttonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (option: GroupByOption) => {\r\n    onChange(option)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relative inline-block', className)}>\r\n      {/* Trigger Button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/20 transition-all text-sm font-medium text-white/90\"\r\n      >\r\n        <span className=\"text-base leading-none\">{currentOption.icon}</span>\r\n        <span>{currentOption.label}</span>\r\n        <svg\r\n          className={cn(\r\n            'w-4 h-4 transition-transform',\r\n            isOpen && 'rotate-180'\r\n          )}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M19 9l-7 7-7-7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\r\n        <div\r\n          ref={menuRef}\r\n          className=\"absolute top-full left-0 mt-2 min-w-[280px] rounded-lg bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-xl border border-white/20 shadow-2xl z-50 overflow-hidden\"\r\n        >\r\n          <div className=\"px-3 py-2 border-b border-white/10\">\r\n            <span className=\"text-[10px] font-bold text-white/70 uppercase tracking-wider\">\r\n              Group By\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"py-1\">\r\n            {GROUP_BY_OPTIONS.map((option) => (\r\n              <button\r\n                key={option.value}\r\n                onClick={() => handleSelect(option.value)}\r\n                className={cn(\r\n                  'w-full px-3 py-2 flex items-start gap-3 text-left transition-all hover:bg-white/10',\r\n                  value === option.value && 'bg-white/5'\r\n                )}\r\n              >\r\n                <span className=\"text-xl leading-none mt-0.5\">\r\n                  {option.icon}\r\n                </span>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"font-semibold text-sm text-white\">\r\n                      {option.label}\r\n                    </span>\r\n                    {value === option.value && (\r\n                      <span className=\"text-blue-400 text-xs\"></span>\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/60 mt-0.5\">\r\n                    {option.description}\r\n                  </p>\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * useKeyboardShortcuts Hook\r\n * Global keyboard shortcuts system for board navigation and actions\r\n * @module hooks/keyboard\r\n */\r\n\r\nimport { useEffect, useCallback, useRef } from 'react'\r\nimport type { KeyboardShortcut, KeyboardAction } from '../../types'\r\n\r\nexport interface UseKeyboardShortcutsOptions {\r\n  /** Shortcuts configuration */\r\n  shortcuts?: KeyboardShortcut[]\r\n  /** Enable/disable shortcuts */\r\n  enabled?: boolean\r\n  /** Prevent default browser behavior */\r\n  preventDefault?: boolean\r\n}\r\n\r\nexport interface UseKeyboardShortcutsReturn {\r\n  /** Register a keyboard shortcut dynamically */\r\n  registerShortcut: (shortcut: KeyboardShortcut) => void\r\n  /** Unregister a keyboard shortcut */\r\n  unregisterShortcut: (action: KeyboardAction) => void\r\n  /** Check if shortcuts are enabled */\r\n  isEnabled: boolean\r\n}\r\n\r\n/**\r\n * Default keyboard shortcuts for Kanban board\r\n */\r\nexport const DEFAULT_SHORTCUTS: KeyboardShortcut[] = [\r\n  {\r\n    keys: 'ArrowUp',\r\n    action: 'navigate_up',\r\n    description: 'Navigate to card above',\r\n  },\r\n  {\r\n    keys: 'ArrowDown',\r\n    action: 'navigate_down',\r\n    description: 'Navigate to card below',\r\n  },\r\n  {\r\n    keys: 'ArrowLeft',\r\n    action: 'navigate_left',\r\n    description: 'Navigate to previous column',\r\n  },\r\n  {\r\n    keys: 'ArrowRight',\r\n    action: 'navigate_right',\r\n    description: 'Navigate to next column',\r\n  },\r\n  {\r\n    keys: 'Enter',\r\n    action: 'open_card',\r\n    description: 'Open selected card',\r\n  },\r\n  {\r\n    keys: 'Escape',\r\n    action: 'close_modal',\r\n    description: 'Close modal or dialog',\r\n  },\r\n  {\r\n    keys: 'Delete',\r\n    action: 'delete_card',\r\n    description: 'Delete selected card',\r\n    modifiers: { shift: true },\r\n  },\r\n  {\r\n    keys: 'n',\r\n    action: 'new_card',\r\n    description: 'Create new card',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'k',\r\n    action: 'search',\r\n    description: 'Open search/command palette',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 's',\r\n    action: 'save',\r\n    description: 'Save changes',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'z',\r\n    action: 'undo',\r\n    description: 'Undo last action',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'y',\r\n    action: 'redo',\r\n    description: 'Redo last undone action',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'a',\r\n    action: 'select_all',\r\n    description: 'Select all cards',\r\n    modifiers: { ctrl: true },\r\n  },\r\n  {\r\n    keys: 'Escape',\r\n    action: 'deselect_all',\r\n    description: 'Deselect all cards',\r\n  },\r\n  {\r\n    keys: '?',\r\n    action: 'show_shortcuts',\r\n    description: 'Show keyboard shortcuts help',\r\n    modifiers: { shift: true },\r\n  },\r\n]\r\n\r\n/**\r\n * Check if keyboard event matches shortcut\r\n */\r\nfunction matchesShortcut(event: KeyboardEvent, shortcut: KeyboardShortcut): boolean {\r\n  const keys = Array.isArray(shortcut.keys) ? shortcut.keys : [shortcut.keys]\r\n  const keyMatches = keys.some((key) => event.key === key || event.code === key)\r\n\r\n  if (!keyMatches) return false\r\n\r\n  const modifiers = shortcut.modifiers || {}\r\n  const ctrlMatch = modifiers.ctrl ? (event.ctrlKey || event.metaKey) : !event.ctrlKey && !event.metaKey\r\n  const shiftMatch = modifiers.shift ? event.shiftKey : !event.shiftKey\r\n  const altMatch = modifiers.alt ? event.altKey : !event.altKey\r\n  const metaMatch = modifiers.meta ? event.metaKey : true // Don't enforce meta unless specified\r\n\r\n  return ctrlMatch && shiftMatch && altMatch && metaMatch\r\n}\r\n\r\n/**\r\n * useKeyboardShortcuts Hook\r\n *\r\n * @example\r\n * ```tsx\r\n * const { registerShortcut } = useKeyboardShortcuts({\r\n *   shortcuts: DEFAULT_SHORTCUTS,\r\n *   enabled: true,\r\n *   preventDefault: true,\r\n * })\r\n *\r\n * // Listen for keyboard actions\r\n * useEffect(() => {\r\n *   const handleKeyboardAction = (event: CustomEvent<KeyboardAction>) => {\r\n *     console.log('Action triggered:', event.detail)\r\n *   }\r\n *\r\n *   window.addEventListener('keyboard-action', handleKeyboardAction)\r\n *   return () => window.removeEventListener('keyboard-action', handleKeyboardAction)\r\n * }, [])\r\n * ```\r\n */\r\nexport function useKeyboardShortcuts(\r\n  options: UseKeyboardShortcutsOptions = {}\r\n): UseKeyboardShortcutsReturn {\r\n  const {\r\n    shortcuts = DEFAULT_SHORTCUTS,\r\n    enabled = true,\r\n    preventDefault = true,\r\n  } = options\r\n\r\n  const shortcutsRef = useRef<KeyboardShortcut[]>(shortcuts)\r\n  const enabledRef = useRef(enabled)\r\n\r\n  // Update refs when options change\r\n  useEffect(() => {\r\n    shortcutsRef.current = shortcuts\r\n    enabledRef.current = enabled\r\n  }, [shortcuts, enabled])\r\n\r\n  // Register a new shortcut dynamically\r\n  const registerShortcut = useCallback((shortcut: KeyboardShortcut) => {\r\n    shortcutsRef.current = [...shortcutsRef.current, shortcut]\r\n  }, [])\r\n\r\n  // Unregister a shortcut\r\n  const unregisterShortcut = useCallback((action: KeyboardAction) => {\r\n    shortcutsRef.current = shortcutsRef.current.filter((s) => s.action !== action)\r\n  }, [])\r\n\r\n  // Handle keyboard events\r\n  useEffect(() => {\r\n    function handleKeyDown(event: KeyboardEvent): void {\r\n      if (!enabledRef.current) return\r\n\r\n      // Don't trigger shortcuts when typing in inputs, textareas, or contenteditable\r\n      const target = event.target as HTMLElement\r\n      if (\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable\r\n      ) {\r\n        // Allow Escape and Ctrl+shortcuts even in inputs\r\n        if (event.key !== 'Escape' && !event.ctrlKey && !event.metaKey) {\r\n          return\r\n        }\r\n      }\r\n\r\n      // Check each shortcut\r\n      for (const shortcut of shortcutsRef.current) {\r\n        if (matchesShortcut(event, shortcut)) {\r\n          if (preventDefault) {\r\n            event.preventDefault()\r\n          }\r\n\r\n          // Dispatch custom event with action\r\n          const customEvent = new CustomEvent('keyboard-action', {\r\n            detail: shortcut.action,\r\n            bubbles: true,\r\n            cancelable: true,\r\n          })\r\n          window.dispatchEvent(customEvent)\r\n\r\n          break // Only trigger first matching shortcut\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => window.removeEventListener('keydown', handleKeyDown)\r\n  }, [preventDefault])\r\n\r\n  return {\r\n    registerShortcut,\r\n    unregisterShortcut,\r\n    isEnabled: enabled,\r\n  }\r\n}\r\n","/**\r\n * KeyboardShortcutsHelp Component\r\n * Modal displaying available keyboard shortcuts\r\n * @module components/KeyboardShortcuts\r\n */\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport type { KeyboardShortcut } from '../../types'\r\nimport { DEFAULT_SHORTCUTS } from '../../hooks/keyboard/useKeyboardShortcuts'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface KeyboardShortcutsHelpProps {\r\n  /** Custom shortcuts to display */\r\n  shortcuts?: KeyboardShortcut[]\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Format keyboard key for display\r\n */\r\nfunction formatKey(key: string): string {\r\n  const keyMap: Record<string, string> = {\r\n    ArrowUp: '',\r\n    ArrowDown: '',\r\n    ArrowLeft: '',\r\n    ArrowRight: '',\r\n    Enter: '',\r\n    Escape: 'Esc',\r\n    Delete: 'Del',\r\n    ' ': 'Space',\r\n  }\r\n  return keyMap[key] || key.toUpperCase()\r\n}\r\n\r\n/**\r\n * Format modifiers for display\r\n */\r\nfunction formatModifiers(shortcut: KeyboardShortcut): string {\r\n  const parts: string[] = []\r\n  const isMac = typeof navigator !== 'undefined' && navigator.platform.includes('Mac')\r\n\r\n  if (shortcut.modifiers?.ctrl) {\r\n    parts.push(isMac ? '' : 'Ctrl')\r\n  }\r\n  if (shortcut.modifiers?.shift) {\r\n    parts.push('Shift')\r\n  }\r\n  if (shortcut.modifiers?.alt) {\r\n    parts.push(isMac ? '' : 'Alt')\r\n  }\r\n  if (shortcut.modifiers?.meta) {\r\n    parts.push('')\r\n  }\r\n\r\n  return parts.join(' + ')\r\n}\r\n\r\n/**\r\n * Get full shortcut display\r\n */\r\nfunction getShortcutDisplay(shortcut: KeyboardShortcut): string {\r\n  const keys = Array.isArray(shortcut.keys) ? shortcut.keys[0] : shortcut.keys\r\n  const modifiers = formatModifiers(shortcut)\r\n  const key = keys ? formatKey(keys) : ''\r\n\r\n  return modifiers ? `${modifiers} + ${key}` : key\r\n}\r\n\r\n/**\r\n * Group shortcuts by category\r\n */\r\nfunction groupShortcuts(shortcuts: KeyboardShortcut[]): Record<string, KeyboardShortcut[]> {\r\n  const groups: Record<string, KeyboardShortcut[]> = {\r\n    Navigation: [],\r\n    Actions: [],\r\n    Editing: [],\r\n    Selection: [],\r\n  }\r\n\r\n  shortcuts.forEach((shortcut) => {\r\n    if (shortcut.action.includes('navigate')) {\r\n      groups.Navigation?.push(shortcut)\r\n    } else if (shortcut.action.includes('select')) {\r\n      groups.Selection?.push(shortcut)\r\n    } else if (['undo', 'redo', 'save'].includes(shortcut.action)) {\r\n      groups.Editing?.push(shortcut)\r\n    } else {\r\n      groups.Actions?.push(shortcut)\r\n    }\r\n  })\r\n\r\n  return groups\r\n}\r\n\r\n/**\r\n * KeyboardShortcutsHelp Component\r\n */\r\nexport function KeyboardShortcutsHelp({\r\n  shortcuts = DEFAULT_SHORTCUTS,\r\n  isOpen,\r\n  onClose,\r\n  className,\r\n}: KeyboardShortcutsHelpProps) {\r\n  const [isMounted, setIsMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true)\r\n  }, [])\r\n\r\n  // Close on Escape\r\n  useEffect(() => {\r\n    function handleKeyDown(event: KeyboardEvent): void {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleKeyDown)\r\n      return () => document.removeEventListener('keydown', handleKeyDown)\r\n    }\r\n    return undefined\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isMounted || !isOpen) return null\r\n\r\n  const groups = groupShortcuts(shortcuts)\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"absolute inset-0 backdrop-blur-sm bg-black/40 dark:bg-black/60\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative backdrop-blur-xl rounded-2xl border shadow-2xl max-w-3xl w-full mx-4 max-h-[80vh] overflow-hidden bg-white dark:bg-gradient-to-br dark:from-gray-900/95 dark:to-gray-800/95 border-gray-200 dark:border-white/20\">\r\n        {/* Header */}\r\n        <div className=\"px-6 py-5 border-b flex items-center justify-between border-gray-200 dark:border-white/10\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold flex items-center gap-3 text-gray-900 dark:text-white\">\r\n              <span className=\"text-3xl\"></span>\r\n              Keyboard Shortcuts\r\n            </h2>\r\n            <p className=\"text-sm mt-1 text-gray-500 dark:text-white/60\">\r\n              Speed up your workflow with these shortcuts\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"transition-colors text-2xl leading-none p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:text-white/50 dark:hover:text-white dark:hover:bg-white/10\"\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"px-6 py-6 overflow-y-auto max-h-[calc(80vh-120px)]\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            {Object.entries(groups).map(([category, categoryShortcuts]) => {\r\n              if (categoryShortcuts.length === 0) return null\r\n\r\n              return (\r\n                <div key={category}>\r\n                  <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-800 dark:text-white/90\">\r\n                    <span className=\"w-1 h-5 bg-blue-500 rounded-full\" />\r\n                    {category}\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {categoryShortcuts.map((shortcut) => (\r\n                      <div\r\n                        key={shortcut.action}\r\n                        className=\"flex items-center justify-between gap-4 p-3 rounded-lg transition-colors bg-gray-50 hover:bg-gray-100 dark:bg-white/5 dark:hover:bg-white/10\"\r\n                      >\r\n                        <span className=\"text-sm text-gray-700 dark:text-white/80\">\r\n                          {shortcut.description}\r\n                        </span>\r\n                        <kbd className=\"px-3 py-1.5 border rounded-md text-xs font-mono shadow-sm whitespace-nowrap bg-white border-gray-300 text-gray-800 dark:bg-gradient-to-br dark:from-gray-700 dark:to-gray-800 dark:border-white/20 dark:text-white/90\">\r\n                          {getShortcutDisplay(shortcut)}\r\n                        </kbd>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"px-6 py-4 border-t border-gray-200 bg-gray-50 dark:border-white/10 dark:bg-white/5\">\r\n          <p className=\"text-xs text-center text-gray-500 dark:text-white/50\">\r\n            Press <kbd className=\"px-2 py-0.5 rounded bg-gray-200 text-gray-600 dark:bg-white/10 dark:text-white/70\">?</kbd> to toggle this help panel\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardTemplateSelector Component\r\n * Dropdown to select and apply card templates\r\n * @module components/Templates\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport type { CardTemplate } from '../../types'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardTemplateSelectorProps {\r\n  /** Available templates */\r\n  templates: CardTemplate[]\r\n  /** Template selection handler */\r\n  onSelectTemplate: (template: CardTemplate) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Default card templates\r\n */\r\nexport const DEFAULT_TEMPLATES: CardTemplate[] = [\r\n  {\r\n    id: 'bug-report',\r\n    name: 'Bug Report',\r\n    description: 'Report a bug or issue',\r\n    icon: '',\r\n    category: 'Development',\r\n    template: {\r\n      title: '[BUG] ',\r\n      description: '**Steps to reproduce:**\\n1. \\n\\n**Expected behavior:**\\n\\n**Actual behavior:**\\n\\n**Screenshots:**',\r\n      priority: 'HIGH',\r\n      labels: ['bug'],\r\n    },\r\n  },\r\n  {\r\n    id: 'feature-request',\r\n    name: 'Feature Request',\r\n    description: 'Propose a new feature',\r\n    icon: '',\r\n    category: 'Development',\r\n    template: {\r\n      title: '[FEATURE] ',\r\n      description: '**Problem:**\\n\\n**Proposed solution:**\\n\\n**Alternatives considered:**\\n\\n**Additional context:**',\r\n      priority: 'MEDIUM',\r\n      labels: ['feature', 'enhancement'],\r\n    },\r\n  },\r\n  {\r\n    id: 'task',\r\n    name: 'Task',\r\n    description: 'General task or to-do',\r\n    icon: '',\r\n    category: 'General',\r\n    template: {\r\n      title: '',\r\n      description: '**Objective:**\\n\\n**Acceptance criteria:**\\n- [ ] \\n\\n**Notes:**',\r\n      priority: 'MEDIUM',\r\n    },\r\n  },\r\n  {\r\n    id: 'research',\r\n    name: 'Research',\r\n    description: 'Investigation or research task',\r\n    icon: '',\r\n    category: 'General',\r\n    template: {\r\n      title: '[RESEARCH] ',\r\n      description: '**Goal:**\\n\\n**Questions to answer:**\\n- \\n\\n**Resources:**\\n- \\n\\n**Findings:**',\r\n      priority: 'LOW',\r\n      labels: ['research'],\r\n    },\r\n  },\r\n  {\r\n    id: 'documentation',\r\n    name: 'Documentation',\r\n    description: 'Documentation task',\r\n    icon: '',\r\n    category: 'Documentation',\r\n    template: {\r\n      title: '[DOCS] ',\r\n      description: '**What needs to be documented:**\\n\\n**Target audience:**\\n\\n**Key points:**\\n- ',\r\n      priority: 'LOW',\r\n      labels: ['documentation'],\r\n    },\r\n  },\r\n  {\r\n    id: 'meeting',\r\n    name: 'Meeting',\r\n    description: 'Meeting or discussion',\r\n    icon: '',\r\n    category: 'Communication',\r\n    template: {\r\n      title: 'Meeting: ',\r\n      description: '**Date & Time:**\\n\\n**Participants:**\\n- \\n\\n**Agenda:**\\n1. \\n\\n**Action items:**\\n- [ ] ',\r\n      priority: 'MEDIUM',\r\n      labels: ['meeting'],\r\n    },\r\n  },\r\n]\r\n\r\n/**\r\n * CardTemplateSelector Component\r\n */\r\nexport function CardTemplateSelector({\r\n  templates,\r\n  onSelectTemplate,\r\n  className,\r\n}: CardTemplateSelectorProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n  const buttonRef = useRef<HTMLButtonElement>(null)\r\n\r\n  // Close menu on outside click\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent): void {\r\n      if (\r\n        menuRef.current &&\r\n        !menuRef.current.contains(event.target as Node) &&\r\n        buttonRef.current &&\r\n        !buttonRef.current.contains(event.target as Node)\r\n      ) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n      return () => document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n    return undefined\r\n  }, [isOpen])\r\n\r\n  const handleSelect = (template: CardTemplate) => {\r\n    onSelectTemplate(template)\r\n    setIsOpen(false)\r\n  }\r\n\r\n  // Group templates by category\r\n  const groupedTemplates = templates.reduce((acc, template) => {\r\n    const category = template.category || 'Other'\r\n    if (!acc[category]) {\r\n      acc[category] = []\r\n    }\r\n    acc[category].push(template)\r\n    return acc\r\n  }, {} as Record<string, CardTemplate[]>)\r\n\r\n  return (\r\n    <div className={cn('relative inline-block', className)}>\r\n      {/* Trigger Button */}\r\n      <button\r\n        ref={buttonRef}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-sm font-medium shadow-lg\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n          color: 'var(--theme-text-primary)',\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n          e.currentTarget.style.borderColor = 'var(--theme-border-secondary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-secondary)'\r\n          e.currentTarget.style.borderColor = 'var(--theme-border-primary)'\r\n        }}\r\n        title=\"Create from template\"\r\n      >\r\n        <span className=\"text-base leading-none\"></span>\r\n        <span>Templates</span>\r\n        <svg\r\n          className={cn(\r\n            'w-4 h-4 transition-transform',\r\n            isOpen && 'rotate-180'\r\n          )}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M19 9l-7 7-7-7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\r\n        <div\r\n          ref={menuRef}\r\n          className=\"absolute top-full left-0 mt-2 min-w-[320px] max-w-[400px] rounded-xl backdrop-blur-xl border shadow-2xl z-50 overflow-hidden max-h-[500px] overflow-y-auto\"\r\n          style={{\r\n            backgroundColor: 'var(--theme-bg-primary)',\r\n            borderColor: 'var(--theme-border-primary)',\r\n          }}\r\n        >\r\n          <div\r\n            className=\"px-4 py-3 border-b sticky top-0 backdrop-blur-sm\"\r\n            style={{\r\n              borderColor: 'var(--theme-border-primary)',\r\n              backgroundColor: 'var(--theme-bg-secondary)',\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-sm font-bold uppercase tracking-wider\"\r\n              style={{ color: 'var(--theme-text-primary)' }}\r\n            >\r\n              Card Templates\r\n            </span>\r\n            <p\r\n              className=\"text-xs mt-0.5\"\r\n              style={{ color: 'var(--theme-text-tertiary)' }}\r\n            >\r\n              Quick start with pre-configured cards\r\n            </p>\r\n          </div>\r\n\r\n          {Object.entries(groupedTemplates).map(([category, categoryTemplates]) => (\r\n            <div key={category} className=\"py-2\">\r\n              <div className=\"px-4 py-2\">\r\n                <h4\r\n                  className=\"text-xs font-semibold uppercase tracking-wider\"\r\n                  style={{ color: 'var(--theme-text-secondary)' }}\r\n                >\r\n                  {category}\r\n                </h4>\r\n              </div>\r\n              <div>\r\n                {categoryTemplates.map((template) => (\r\n                  <button\r\n                    key={template.id}\r\n                    onClick={() => handleSelect(template)}\r\n                    className=\"w-full px-4 py-3 flex items-start gap-3 text-left transition-all active:scale-[0.98]\"\r\n                    style={{ color: 'var(--theme-text-primary)' }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'transparent'\r\n                    }}\r\n                  >\r\n                    <span className=\"text-2xl leading-none mt-0.5\">\r\n                      {template.icon}\r\n                    </span>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className=\"font-semibold text-sm\"\r\n                        style={{ color: 'var(--theme-text-primary)' }}\r\n                      >\r\n                        {template.name}\r\n                      </div>\r\n                      {template.description && (\r\n                        <p\r\n                          className=\"text-xs mt-0.5\"\r\n                          style={{ color: 'var(--theme-text-tertiary)' }}\r\n                        >\r\n                          {template.description}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {templates.length === 0 && (\r\n            <div\r\n              className=\"px-4 py-8 text-center\"\r\n              style={{ color: 'var(--theme-text-tertiary)' }}\r\n            >\r\n              <p className=\"text-sm\">No templates available</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ExportImportModal Component\r\n * Modal for exporting and importing board data\r\n * @module components/ExportImport\r\n */\r\n\r\nimport { useState, useRef } from 'react'\r\nimport type { Board, ExportFormat, ImportResult } from '../../types'\r\nimport { exportBoard, downloadExport } from '../../utils/export'\r\nimport { readFile, importBoard } from '../../utils/import'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ExportImportModalProps {\r\n  /** Board data to export */\r\n  board: Board\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Import handler */\r\n  onImport?: (result: ImportResult, content: string) => void\r\n  /** Board element ref for PDF export */\r\n  boardElementRef?: React.RefObject<HTMLElement>\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * ExportImportModal Component\r\n */\r\nexport function ExportImportModal({\r\n  board,\r\n  isOpen,\r\n  onClose,\r\n  onImport,\r\n  boardElementRef,\r\n  className,\r\n}: ExportImportModalProps) {\r\n  const [activeTab, setActiveTab] = useState<'export' | 'import'>('export')\r\n  const [selectedFormat, setSelectedFormat] = useState<ExportFormat>('json')\r\n  const [importResult, setImportResult] = useState<ImportResult | null>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n\r\n  if (!isOpen) return null\r\n\r\n  const handleExport = async () => {\r\n    const boardElement = boardElementRef?.current || undefined\r\n    const content = await exportBoard(board, selectedFormat, boardElement)\r\n    downloadExport(content, selectedFormat)\r\n  }\r\n\r\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0]\r\n    if (!file) return\r\n\r\n    try {\r\n      const content = await readFile(file)\r\n      const format = file.name.endsWith('.json') ? 'json' : 'csv'\r\n      const result = importBoard(content, format)\r\n\r\n      setImportResult(result)\r\n\r\n      if (result.success && onImport) {\r\n        onImport(result, content)\r\n      }\r\n    } catch (error) {\r\n      setImportResult({\r\n        success: false,\r\n        errors: [`Failed to read file: ${error instanceof Error ? error.message : 'Unknown error'}`],\r\n      })\r\n    }\r\n\r\n    // Reset file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = ''\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-xl rounded-2xl border border-white/20 shadow-2xl max-w-2xl w-full mx-4\">\r\n        {/* Header */}\r\n        <div className=\"px-6 py-5 border-b border-white/10 flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n              <span className=\"text-3xl\"></span>\r\n              Export / Import\r\n            </h2>\r\n            <p className=\"text-sm text-white/60 mt-1\">\r\n              Transfer your board data\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white/50 hover:text-white transition-colors text-2xl leading-none p-2 hover:bg-white/10 rounded-lg\"\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-white/10\">\r\n          <button\r\n            onClick={() => setActiveTab('export')}\r\n            className={cn(\r\n              'flex-1 px-6 py-4 font-semibold transition-colors',\r\n              activeTab === 'export'\r\n                ? 'text-white border-b-2 border-blue-500'\r\n                : 'text-white/50 hover:text-white/80'\r\n            )}\r\n          >\r\n            Export\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('import')}\r\n            className={cn(\r\n              'flex-1 px-6 py-4 font-semibold transition-colors',\r\n              activeTab === 'import'\r\n                ? 'text-white border-b-2 border-blue-500'\r\n                : 'text-white/50 hover:text-white/80'\r\n            )}\r\n          >\r\n            Import\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {activeTab === 'export' && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-white/90 mb-3\">\r\n                  Select format\r\n                </label>\r\n                <div className=\"grid grid-cols-3 gap-3\">\r\n                  {(['json', 'csv', 'pdf'] as ExportFormat[]).map((format) => (\r\n                    <button\r\n                      key={format}\r\n                      onClick={() => setSelectedFormat(format)}\r\n                      className={cn(\r\n                        'p-4 rounded-lg border-2 transition-all text-center',\r\n                        selectedFormat === format\r\n                          ? 'border-blue-500 bg-blue-500/20 text-white'\r\n                          : 'border-white/20 hover:border-white/40 text-white/70 hover:text-white'\r\n                      )}\r\n                    >\r\n                      <div className=\"text-2xl mb-2\">\r\n                        {format === 'json' && ''}\r\n                        {format === 'csv' && ''}\r\n                        {format === 'pdf' && ''}\r\n                      </div>\r\n                      <div className=\"font-semibold uppercase text-xs\">\r\n                        {format}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/5 rounded-lg p-4\">\r\n                <h3 className=\"text-sm font-semibold text-white/90 mb-2\">Preview</h3>\r\n                <div className=\"text-xs text-white/60\">\r\n                  <div>Board: <span className=\"text-white/90\">{board.title || 'Untitled'}</span></div>\r\n                  <div>Columns: <span className=\"text-white/90\">{board.columns.length}</span></div>\r\n                  <div>Cards: <span className=\"text-white/90\">{board.cards.length}</span></div>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleExport}\r\n                className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-semibold rounded-lg transition-all shadow-lg shadow-blue-500/20\"\r\n              >\r\n                Export Board\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'import' && (\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-white/90 mb-3\">\r\n                  Upload file\r\n                </label>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\".json,.csv\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                />\r\n                <button\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  className=\"w-full py-12 px-4 border-2 border-dashed border-white/30 hover:border-white/50 rounded-lg transition-colors text-white/70 hover:text-white\"\r\n                >\r\n                  <div className=\"text-5xl mb-3\"></div>\r\n                  <div className=\"font-semibold mb-1\">Click to select file</div>\r\n                  <div className=\"text-xs text-white/50\">Supports JSON and CSV files</div>\r\n                </button>\r\n              </div>\r\n\r\n              {importResult && (\r\n                <div\r\n                  className={cn(\r\n                    'p-4 rounded-lg',\r\n                    importResult.success\r\n                      ? 'bg-green-500/20 border border-green-500/30'\r\n                      : 'bg-red-500/20 border border-red-500/30'\r\n                  )}\r\n                >\r\n                  <h3\r\n                    className={cn(\r\n                      'font-semibold mb-2',\r\n                      importResult.success ? 'text-green-400' : 'text-red-400'\r\n                    )}\r\n                  >\r\n                    {importResult.success ? ' Import Successful' : ' Import Failed'}\r\n                  </h3>\r\n                  {importResult.success && (\r\n                    <div className=\"text-sm text-white/80\">\r\n                      <div>Cards imported: {importResult.cardsImported}</div>\r\n                      <div>Columns imported: {importResult.columnsImported}</div>\r\n                    </div>\r\n                  )}\r\n                  {importResult.errors && importResult.errors.length > 0 && (\r\n                    <div className=\"mt-2 text-sm\">\r\n                      {importResult.errors.map((error, index) => (\r\n                        <div key={index} className=\"text-red-300\">\r\n                           {error}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useCallback, useState } from 'react'\r\nimport type { Priority, User } from '../../types'\r\nimport type { FilterState, SortState, SortBy } from '../../hooks/useFilters'\r\nimport type { GroupByOption } from '../../types'\r\nimport './filter-bar.css'\r\n\r\nexport interface FilterBarProps {\r\n  filters: FilterState\r\n  sort: SortState\r\n  onFiltersChange: (filters: Partial<FilterState>) => void\r\n  onSortChange: (sort: Partial<SortState>) => void\r\n  onReset: () => void\r\n  onFilterMyTasks?: () => void\r\n  onFilterOverdue?: () => void\r\n  onFilterHighPriority?: () => void\r\n  availableUsers?: User[]\r\n  availableLabels?: string[]\r\n  availableColumns?: Array<{ id: string; title: string }>\r\n  showQuickFilters?: boolean\r\n  compact?: boolean\r\n  groupBy?: GroupByOption\r\n  onGroupByChange?: (value: GroupByOption) => void\r\n}\r\n\r\nconst PRIORITY_OPTIONS: Priority[] = ['URGENT', 'HIGH', 'MEDIUM', 'LOW']\r\n\r\nconst SORT_OPTIONS: Array<{ value: SortBy; label: string }> = [\r\n  { value: 'none', label: 'None' },\r\n  { value: 'created', label: 'Date Created' },\r\n  { value: 'priority', label: 'Priority' },\r\n  { value: 'dueDate', label: 'Due Date' },\r\n  { value: 'title', label: 'Title' },\r\n  { value: 'estimate', label: 'Estimate' },\r\n]\r\n\r\nconst GROUPBY_OPTIONS: Array<{ value: GroupByOption; label: string }> = [\r\n  { value: 'none', label: 'No Grouping' },\r\n  { value: 'priority', label: 'By Priority' },\r\n  { value: 'assignee', label: 'By Assignee' },\r\n  { value: 'label', label: 'By Label' },\r\n]\r\n\r\nexport function FilterBar({\r\n  filters,\r\n  sort,\r\n  onFiltersChange,\r\n  onSortChange,\r\n  onReset,\r\n  onFilterMyTasks,\r\n  onFilterOverdue,\r\n  onFilterHighPriority,\r\n  availableUsers = [],\r\n  availableLabels = [],\r\n  availableColumns: _availableColumns = [],\r\n  showQuickFilters = true,\r\n  compact = false,\r\n  groupBy = 'none',\r\n  onGroupByChange,\r\n}: FilterBarProps) {\r\n  const [isCollapsed, setIsCollapsed] = useState(true)\r\n\r\n  const handleSearchChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      onFiltersChange({ search: e.target.value })\r\n    },\r\n    [onFiltersChange]\r\n  )\r\n\r\n  const handleDateFilterChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      onFiltersChange({ dateFilter: e.target.value as any })\r\n    },\r\n    [onFiltersChange]\r\n  )\r\n\r\n  const handleSortChange = useCallback(\r\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n      onSortChange({ by: e.target.value as SortBy })\r\n    },\r\n    [onSortChange]\r\n  )\r\n\r\n  const handleSortOrderToggle = useCallback(() => {\r\n    onSortChange({ order: sort.order === 'asc' ? 'desc' : 'asc' })\r\n  }, [sort.order, onSortChange])\r\n\r\n  const hasActiveFilters =\r\n    filters.search ||\r\n    filters.dateFilter !== 'all' ||\r\n    filters.priorities.length > 0 ||\r\n    filters.assignees.length > 0 ||\r\n    filters.labels.length > 0 ||\r\n    sort.by !== 'none'\r\n\r\n  return (\r\n    <div\r\n      className={`filter-bar ${compact ? 'filter-bar--compact' : ''} ${isCollapsed ? 'filter-bar--collapsed' : ''}`}\r\n    >\r\n      <div\r\n        className=\"filter-bar__header\"\r\n        onClick={() => setIsCollapsed(!isCollapsed)}\r\n        style={{\r\n          cursor: 'pointer',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px',\r\n          marginBottom: isCollapsed ? '0' : '12px',\r\n          padding: '4px 6px',\r\n          borderRadius: '6px',\r\n          transition: 'all 0.2s ease',\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'transparent'\r\n        }}\r\n      >\r\n        <svg\r\n          width=\"14\"\r\n          height=\"14\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"2\"\r\n          style={{\r\n            transform: isCollapsed ? 'rotate(-90deg)' : 'rotate(0deg)',\r\n            transition: 'transform 0.2s',\r\n            color: 'var(--theme-text-secondary)',\r\n          }}\r\n        >\r\n          <polyline points=\"6 9 12 15 18 9\" />\r\n        </svg>\r\n        <span className=\"filter-bar__label\" style={{ fontWeight: 500, fontSize: '0.875rem', color: 'var(--theme-text-primary)' }}>\r\n          Filters & Grouping\r\n        </span>\r\n        {hasActiveFilters && (\r\n          <span\r\n            style={{\r\n              color: 'var(--theme-accent-primary)',\r\n              fontSize: '0.75rem',\r\n              fontWeight: 600,\r\n            }}\r\n          >\r\n            ({[filters.search && 'search', filters.dateFilter !== 'all' && 'date', filters.priorities.length > 0 && 'priority', filters.assignees.length > 0 && 'assignee', filters.labels.length > 0 && 'label', sort.by !== 'none' && 'sort'].filter(Boolean).length} active)\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {!isCollapsed && (\r\n        <div className=\"filter-bar__content\">\r\n          {showQuickFilters && (\r\n            <div className=\"filter-bar__quick\" style={{ marginBottom: '12px' }}>\r\n              <span className=\"filter-bar__label\">Quick:</span>\r\n              {onFilterMyTasks && (\r\n                <button\r\n                  onClick={onFilterMyTasks}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show only my tasks\"\r\n                >\r\n                  My Tasks\r\n                </button>\r\n              )}\r\n              {onFilterOverdue && (\r\n                <button\r\n                  onClick={onFilterOverdue}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show overdue tasks\"\r\n                >\r\n                  Overdue\r\n                </button>\r\n              )}\r\n              {onFilterHighPriority && (\r\n                <button\r\n                  onClick={onFilterHighPriority}\r\n                  className=\"filter-bar__quick-btn\"\r\n                  title=\"Show high priority tasks\"\r\n                >\r\n                  High Priority\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"filter-bar__main\">\r\n            <div className=\"filter-bar__field\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search tasks...\"\r\n                value={filters.search}\r\n                onChange={handleSearchChange}\r\n                className=\"filter-bar__search\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"filter-bar__field\">\r\n              <select\r\n                value={filters.dateFilter}\r\n                onChange={handleDateFilterChange}\r\n                className=\"filter-bar__select\"\r\n              >\r\n                <option value=\"all\">All Dates</option>\r\n                <option value=\"overdue\">Overdue</option>\r\n                <option value=\"today\">Today</option>\r\n                <option value=\"this-week\">This Week</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"filter-bar__field\">\r\n              <select\r\n                value={filters.priorities[0] || 'all'}\r\n                onChange={(e) => {\r\n                  const value = e.target.value\r\n                  onFiltersChange({\r\n                    priorities: value === 'all' ? [] : [value as Priority],\r\n                  })\r\n                }}\r\n                className=\"filter-bar__select\"\r\n              >\r\n                <option value=\"all\">All Priorities</option>\r\n                {PRIORITY_OPTIONS.map((priority) => (\r\n                  <option key={priority} value={priority}>\r\n                    {priority}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {availableUsers.length > 0 && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={filters.assignees[0] || 'all'}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value\r\n                    onFiltersChange({\r\n                      assignees: value === 'all' ? [] : [value],\r\n                    })\r\n                  }}\r\n                  className=\"filter-bar__select\"\r\n                >\r\n                  <option value=\"all\">All Assignees</option>\r\n                  {availableUsers.map((user) => (\r\n                    <option key={user.id} value={user.id}>\r\n                      {user.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {availableLabels.length > 0 && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={filters.labels[0] || 'all'}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value\r\n                    onFiltersChange({\r\n                      labels: value === 'all' ? [] : [value],\r\n                    })\r\n                  }}\r\n                  className=\"filter-bar__select\"\r\n                >\r\n                  <option value=\"all\">All Labels</option>\r\n                  {availableLabels.map((label) => (\r\n                    <option key={label} value={label}>\r\n                      {label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"filter-bar__field filter-bar__sort\">\r\n              <span className=\"filter-bar__label\" style={{ color: 'var(--theme-text-secondary)' }}>Sort:</span>\r\n              <select\r\n                value={sort.by}\r\n                onChange={handleSortChange}\r\n                className=\"filter-bar__select filter-bar__select--sm\"\r\n              >\r\n                {SORT_OPTIONS.map((option) => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {sort.by !== 'none' && (\r\n                <button\r\n                  onClick={handleSortOrderToggle}\r\n                  className=\"filter-bar__sort-toggle\"\r\n                  title={`Sort ${sort.order === 'asc' ? 'descending' : 'ascending'}`}\r\n                >\r\n                  {sort.order === 'asc' ? '' : ''}\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {onGroupByChange && (\r\n              <div className=\"filter-bar__field\">\r\n                <select\r\n                  value={groupBy}\r\n                  onChange={(e) => onGroupByChange(e.target.value as GroupByOption)}\r\n                  className=\"filter-bar__select\"\r\n                  style={{\r\n                    fontWeight: 500,\r\n                    borderWidth: '2px',\r\n                  }}\r\n                >\r\n                  {GROUPBY_OPTIONS.map((option) => (\r\n                    <option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n\r\n            {hasActiveFilters && (\r\n              <button\r\n                onClick={onReset}\r\n                className=\"filter-bar__reset\"\r\n                title=\"Clear all filters\"\r\n              >\r\n                Clear\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useRef, useEffect } from 'react'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ConfigMenuProps {\r\n  onOpenExport: () => void\r\n  onOpenThemes: () => void\r\n  onOpenShortcuts: () => void\r\n  className?: string\r\n  // v0.8.1: Gantt-specific exports\r\n  viewMode?: 'kanban' | 'gantt'\r\n  onExportGanttPDF?: () => Promise<void>\r\n  onExportGanttExcel?: () => Promise<void>\r\n  onExportGanttPNG?: () => Promise<void>\r\n  onExportGanttCSV?: () => void\r\n}\r\n\r\nexport function ConfigMenu({\r\n  onOpenExport,\r\n  onOpenThemes,\r\n  onOpenShortcuts,\r\n  className,\r\n  viewMode = 'kanban',\r\n  onExportGanttPDF,\r\n  onExportGanttExcel,\r\n  onExportGanttPNG,\r\n  onExportGanttCSV,\r\n}: ConfigMenuProps) {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const menuRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false)\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside)\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [isOpen])\r\n\r\n  const handleItemClick = (action: () => void) => {\r\n    action()\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relative', className)} ref={menuRef}>\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all border\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n          color: 'var(--theme-text-secondary)'\r\n        }}\r\n        onMouseEnter={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n          e.currentTarget.style.color = 'var(--theme-text-primary)'\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.currentTarget.style.backgroundColor = 'var(--theme-bg-secondary)'\r\n          e.currentTarget.style.color = 'var(--theme-text-secondary)'\r\n        }}\r\n        aria-label=\"Configuration Menu\"\r\n        aria-expanded={isOpen}\r\n      >\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n          <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n          <path d=\"M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2\" />\r\n        </svg>\r\n        <span>Config</span>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className=\"absolute right-0 mt-2 w-48 rounded-lg border shadow-lg overflow-hidden z-50\"\r\n          style={{\r\n            backgroundColor: 'var(--theme-bg-secondary)',\r\n            borderColor: 'var(--theme-border-primary)',\r\n          }}\r\n        >\r\n          {/* v0.8.1: Show different export options based on view mode */}\r\n          {viewMode === 'kanban' ? (\r\n            <button\r\n              onClick={() => handleItemClick(onOpenExport)}\r\n              className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n              style={{ color: 'var(--theme-text-primary)' }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'transparent'\r\n              }}\r\n            >\r\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3\" />\r\n              </svg>\r\n              Export\r\n            </button>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttPDF?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\r\n                  <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\r\n                  <polyline points=\"10 9 9 9 8 9\" />\r\n                </svg>\r\n                Export PDF\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttExcel?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"12\" />\r\n                  <line x1=\"9\" y1=\"15\" x2=\"15\" y2=\"15\" />\r\n                </svg>\r\n                Export Excel\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(async () => await onExportGanttPNG?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\r\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\r\n                  <polyline points=\"21 15 16 10 5 21\" />\r\n                </svg>\r\n                Export PNG\r\n              </button>\r\n              <button\r\n                onClick={() => handleItemClick(() => onExportGanttCSV?.())}\r\n                className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n                style={{ color: 'var(--theme-text-primary)' }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent'\r\n                }}\r\n              >\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  <polyline points=\"14 2 14 8 20 8\" />\r\n                  <line x1=\"8\" y1=\"13\" x2=\"16\" y2=\"13\" />\r\n                  <line x1=\"8\" y1=\"17\" x2=\"16\" y2=\"17\" />\r\n                </svg>\r\n                Export CSV\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          <button\r\n            onClick={() => handleItemClick(onOpenThemes)}\r\n            className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n            style={{ color: 'var(--theme-text-primary)' }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <circle cx=\"12\" cy=\"12\" r=\"5\" />\r\n              <path d=\"M12 1v6m0 6v6m8.5-8.5L17 15M7 9L3.5 5.5M7 15l-3.5 3.5M20.5 5.5L17 9m3.5 11.5L17 17\" />\r\n            </svg>\r\n            Themes\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => handleItemClick(onOpenShortcuts)}\r\n            className=\"w-full px-4 py-3 text-left text-sm font-medium transition-colors flex items-center gap-3\"\r\n            style={{ color: 'var(--theme-text-primary)' }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'var(--theme-bg-tertiary)'\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" />\r\n              <path d=\"M6 8h.01M10 8h.01M14 8h.01M18 8h.01M8 12h.01M12 12h.01M16 12h.01M7 16h10\" />\r\n            </svg>\r\n            Shortcuts\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Theme Definitions\r\n * ASAKAA v0.5.0 - Elite Theming System\r\n */\r\n\r\nimport type { Theme, ThemeName } from './types'\r\n\r\n/**\r\n * DARK THEME (Enhanced) - DEFAULT\r\n * Philosophy: Speed, efficiency, focus\r\n * Optimized for developer productivity\r\n */\r\nexport const darkTheme: Theme = {\r\n  name: 'dark',\r\n  displayName: 'Dark (Enhanced)',\r\n  emoji: '',\r\n  colors: {\r\n    // Background colors\r\n    bgPrimary: '#222326',\r\n    bgSecondary: '#2A2B2F',\r\n    bgTertiary: '#33343A',\r\n    bgCard: '#2d2d2d',\r\n    bgHover: '#353535',\r\n    bgActive: '#404040',\r\n    bgInput: '#2a2a2a',\r\n\r\n    // Text colors\r\n    textPrimary: '#F4F5F8',\r\n    textSecondary: '#AEB6C0',\r\n    textTertiary: '#7A7F8A',\r\n    textDisabled: '#606060',\r\n    textInverse: '#1a1a1a',\r\n\r\n    // Border colors\r\n    borderPrimary: 'rgba(255, 255, 255, 0.1)',\r\n    borderSecondary: 'rgba(255, 255, 255, 0.05)',\r\n    borderDefault: '#404040',\r\n    borderHover: '#505050',\r\n    borderSubtle: '#2a2a2a',\r\n\r\n    // Interactive colors\r\n    accentPrimary: '#5E6AD2',\r\n    accentHover: '#7780DD',\r\n    interactivePrimary: '#0ea5e9',\r\n    interactivePrimaryHover: '#0284c7',\r\n    interactivePrimaryBorder: 'rgba(14, 165, 233, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(14, 165, 233, 0.1)',\r\n    interactivePrimaryBackgroundHover: 'rgba(14, 165, 233, 0.2)',\r\n\r\n    // Status colors\r\n    success: '#10B981',\r\n    warning: '#F59E0B',\r\n    error: '#EF4444',\r\n    info: '#3B82F6',\r\n    danger: '#ef4444',\r\n    dangerBorder: 'rgba(239, 68, 68, 0.3)',\r\n    dangerBackground: 'rgba(239, 68, 68, 0.1)',\r\n    dangerBackgroundHover: 'rgba(239, 68, 68, 0.2)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 2px rgba(0, 0, 0, 0.3)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.4)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.5)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * LIGHT THEME (Accessible Standard)\r\n * Philosophy: Clarity, legibility, professionalism\r\n * WCAG AAA compliant (7:1 contrast)\r\n */\r\nexport const lightTheme: Theme = {\r\n  name: 'light',\r\n  displayName: 'Light (Standard)',\r\n  emoji: '',\r\n  colors: {\r\n    // Background colors\r\n    bgPrimary: '#FFFFFF',\r\n    bgSecondary: '#F7F7F8',\r\n    bgTertiary: '#EEEFF1',\r\n    bgCard: '#ffffff',\r\n    bgHover: '#f3f4f6',\r\n    bgActive: '#e5e7eb',\r\n    bgInput: '#f9fafb',\r\n\r\n    // Text colors\r\n    textPrimary: '#1A1A1A',\r\n    textSecondary: '#5A5A5A',\r\n    textTertiary: '#8A8A8A',\r\n    textDisabled: '#d1d5db',\r\n    textInverse: '#ffffff',\r\n\r\n    // Border colors\r\n    borderPrimary: 'rgba(0, 0, 0, 0.1)',\r\n    borderSecondary: 'rgba(0, 0, 0, 0.05)',\r\n    borderDefault: '#e5e7eb',\r\n    borderHover: '#d1d5db',\r\n    borderSubtle: '#f3f4f6',\r\n\r\n    // Interactive colors\r\n    accentPrimary: '#5E6AD2',\r\n    accentHover: '#4A56B8',\r\n    interactivePrimary: '#0ea5e9',\r\n    interactivePrimaryHover: '#0284c7',\r\n    interactivePrimaryBorder: 'rgba(14, 165, 233, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(14, 165, 233, 0.08)',\r\n    interactivePrimaryBackgroundHover: 'rgba(14, 165, 233, 0.15)',\r\n\r\n    // Status colors\r\n    success: '#059669',\r\n    warning: '#D97706',\r\n    error: '#DC2626',\r\n    info: '#2563EB',\r\n    danger: '#dc2626',\r\n    dangerBorder: 'rgba(220, 38, 38, 0.3)',\r\n    dangerBackground: 'rgba(220, 38, 38, 0.08)',\r\n    dangerBackgroundHover: 'rgba(220, 38, 38, 0.15)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 3px rgba(0, 0, 0, 0.12)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.15)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.2)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * NEUTRAL THEME (Zen Mode)\r\n * Philosophy: Minimalism, calm technology, maximum concentration\r\n * Strictly monochromatic - states communicated via icons/typography\r\n */\r\nexport const neutralTheme: Theme = {\r\n  name: 'neutral',\r\n  emoji: '',\r\n  displayName: 'Neutral (Zen)',\r\n  colors: {\r\n    // Background colors - Light neutral tones (matching Gantt neutral theme)\r\n    bgPrimary: '#FAFAF9',\r\n    bgSecondary: '#F5F5F4',\r\n    bgTertiary: '#E7E5E4',\r\n    bgCard: '#FEFEFE',\r\n    bgHover: '#F0EFEE',\r\n    bgActive: '#E7E5E4',\r\n    bgInput: '#FAFAF9',\r\n\r\n    // Text colors\r\n    textPrimary: '#1C1917',\r\n    textSecondary: '#57534E',\r\n    textTertiary: '#A8A29E',\r\n    textDisabled: '#D6D3D1',\r\n    textInverse: '#FAFAF9',\r\n\r\n    // Border colors\r\n    borderPrimary: '#E7E5E4',\r\n    borderSecondary: '#F0EFEE',\r\n    borderDefault: '#E7E5E4',\r\n    borderHover: '#D6D3D1',\r\n    borderSubtle: '#F5F5F4',\r\n\r\n    // Interactive colors - Neutral with subtle accents\r\n    accentPrimary: '#292524',\r\n    accentHover: '#44403C',\r\n    interactivePrimary: '#292524',\r\n    interactivePrimaryHover: '#44403C',\r\n    interactivePrimaryBorder: 'rgba(41, 37, 36, 0.3)',\r\n    interactivePrimaryBackground: 'rgba(41, 37, 36, 0.06)',\r\n    interactivePrimaryBackgroundHover: 'rgba(41, 37, 36, 0.12)',\r\n\r\n    // Status colors (minimal in Zen mode)\r\n    success: '#15803D',\r\n    warning: '#CA8A04',\r\n    error: '#B91C1C',\r\n    info: '#1D4ED8',\r\n    danger: '#B91C1C',\r\n    dangerBorder: 'rgba(185, 28, 28, 0.3)',\r\n    dangerBackground: 'rgba(185, 28, 28, 0.08)',\r\n    dangerBackgroundHover: 'rgba(185, 28, 28, 0.15)',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n    md: '0 4px 12px rgba(0, 0, 0, 0.12)',\r\n    lg: '0 12px 32px rgba(0, 0, 0, 0.15)',\r\n  },\r\n  radii: {\r\n    sm: '6px',\r\n    md: '8px',\r\n    lg: '12px',\r\n    full: '9999px',\r\n  },\r\n  spacing: {\r\n    xs: '4px',\r\n    sm: '8px',\r\n    md: '16px',\r\n    lg: '24px',\r\n    xl: '32px',\r\n  },\r\n}\r\n\r\n/**\r\n * All themes registry\r\n */\r\nexport const themes: Record<ThemeName, Theme> = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n}\r\n\r\n/**\r\n * Default theme\r\n */\r\nexport const defaultTheme: ThemeName = 'dark'\r\n","/**\r\n * Theme Provider\r\n * ASAKAA v0.5.0\r\n */\r\n\r\nimport { createContext, useContext, useEffect, useState, useCallback, type ReactNode } from 'react'\r\nimport type { ThemeName, ThemeContextValue } from './types'\r\nimport { themes, defaultTheme } from './themes'\r\n\r\nexport const ThemeContext = createContext<ThemeContextValue | undefined>(undefined)\r\n\r\nconst STORAGE_KEY = 'asakaa-theme'\r\n\r\nexport interface ThemeProviderProps {\r\n  children: ReactNode\r\n  defaultTheme?: ThemeName\r\n  storageKey?: string\r\n}\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme: initialTheme = defaultTheme,\r\n  storageKey = STORAGE_KEY,\r\n}: ThemeProviderProps) {\r\n  const [theme, setThemeState] = useState<ThemeName>(() => {\r\n    // Try to load from localStorage\r\n    if (typeof window !== 'undefined') {\r\n      const stored = localStorage.getItem(storageKey)\r\n      if (stored && (stored === 'dark' || stored === 'light' || stored === 'neutral')) {\r\n        return stored as ThemeName\r\n      }\r\n    }\r\n    return initialTheme\r\n  })\r\n\r\n  const setTheme = useCallback(\r\n    (newTheme: ThemeName) => {\r\n      setThemeState(newTheme)\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.setItem(storageKey, newTheme)\r\n      }\r\n    },\r\n    [storageKey]\r\n  )\r\n\r\n  // Apply theme to document\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return\r\n\r\n    const root = document.documentElement\r\n    const currentTheme = themes[theme]\r\n\r\n    // DUAL SYSTEM: Generate BOTH --theme-* AND --asakaa-color-* variables\r\n    // This ensures compatibility during migration from old to new system\r\n\r\n    // 1. Generate --theme-* variables (legacy compatibility)\r\n    Object.entries(currentTheme.colors).forEach(([key, value]) => {\r\n      if (value) {\r\n        root.style.setProperty(`--theme-${camelToKebab(key)}`, value)\r\n      }\r\n    })\r\n\r\n    // 2. Generate --asakaa-color-* variables (new system - following tokens.css naming)\r\n    const colorMap: Record<string, string> = {\r\n      // Background\r\n      bgPrimary: '--asakaa-color-background-primary',\r\n      bgSecondary: '--asakaa-color-background-secondary',\r\n      bgTertiary: '--asakaa-color-background-tertiary',\r\n      bgCard: '--asakaa-color-background-card',\r\n      bgHover: '--asakaa-color-background-hover',\r\n      bgActive: '--asakaa-color-background-active',\r\n      bgInput: '--asakaa-color-background-input',\r\n\r\n      // Text\r\n      textPrimary: '--asakaa-color-text-primary',\r\n      textSecondary: '--asakaa-color-text-secondary',\r\n      textTertiary: '--asakaa-color-text-tertiary',\r\n      textDisabled: '--asakaa-color-text-disabled',\r\n      textInverse: '--asakaa-color-text-inverse',\r\n\r\n      // Border\r\n      borderPrimary: '--asakaa-color-border-primary',\r\n      borderSecondary: '--asakaa-color-border-secondary',\r\n      borderDefault: '--asakaa-color-border-default',\r\n      borderHover: '--asakaa-color-border-hover',\r\n      borderSubtle: '--asakaa-color-border-subtle',\r\n\r\n      // Interactive\r\n      accentPrimary: '--asakaa-color-accent-primary',\r\n      accentHover: '--asakaa-color-accent-hover',\r\n      interactivePrimary: '--asakaa-color-interactive-primary',\r\n      interactivePrimaryHover: '--asakaa-color-interactive-primaryHover',\r\n      interactivePrimaryBorder: '--asakaa-color-interactive-primaryBorder',\r\n      interactivePrimaryBackground: '--asakaa-color-interactive-primaryBackground',\r\n      interactivePrimaryBackgroundHover: '--asakaa-color-interactive-primaryBackgroundHover',\r\n\r\n      // Status & Danger\r\n      success: '--asakaa-color-status-success',\r\n      warning: '--asakaa-color-status-warning',\r\n      error: '--asakaa-color-status-error',\r\n      info: '--asakaa-color-status-info',\r\n      danger: '--asakaa-color-danger',\r\n      dangerBorder: '--asakaa-color-danger-border',\r\n      dangerBackground: '--asakaa-color-danger-background',\r\n      dangerBackgroundHover: '--asakaa-color-danger-backgroundHover',\r\n    }\r\n\r\n    Object.entries(colorMap).forEach(([themeKey, cssVar]) => {\r\n      const value = currentTheme.colors[themeKey as keyof typeof currentTheme.colors]\r\n      if (value) {\r\n        root.style.setProperty(cssVar, value)\r\n      }\r\n    })\r\n\r\n    // 3. Set data-theme attribute for CSS selectors\r\n    root.setAttribute('data-theme', theme)\r\n\r\n    // 4. Set class for backward compatibility\r\n    root.classList.remove('theme-dark', 'theme-light', 'theme-neutral')\r\n    root.classList.add(`theme-${theme}`)\r\n  }, [theme])\r\n\r\n  const value: ThemeContextValue = {\r\n    theme,\r\n    setTheme,\r\n    themes,\r\n  }\r\n\r\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\r\n}\r\n\r\n/**\r\n * Hook to access theme context\r\n */\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext)\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within ThemeProvider')\r\n  }\r\n  return context\r\n}\r\n\r\n/**\r\n * Utility: Convert camelCase to kebab-case\r\n */\r\nfunction camelToKebab(str: string): string {\r\n  return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase()\r\n}\r\n","import { useTheme } from '../../theme/ThemeProvider'\r\nimport { themes } from '../../theme/themes'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface ThemeModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  className?: string\r\n}\r\n\r\nexport function ThemeModal({ isOpen, onClose, className }: ThemeModalProps) {\r\n  const { theme, setTheme } = useTheme()\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className={cn('fixed inset-0 z-[9999] flex items-center justify-center', className)}>\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      <div\r\n        className=\"relative rounded-2xl border shadow-2xl max-w-md w-full mx-4\"\r\n        style={{\r\n          backgroundColor: 'var(--theme-bg-secondary)',\r\n          borderColor: 'var(--theme-border-primary)',\r\n        }}\r\n      >\r\n        <div className=\"px-6 py-5 border-b flex items-center justify-between\" style={{ borderColor: 'var(--theme-border-primary)' }}>\r\n          <h2 className=\"text-2xl font-bold\" style={{ color: 'var(--theme-text-primary)' }}>\r\n            Select Theme\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-2xl leading-none p-2 hover:bg-white/10 rounded-lg transition-colors\"\r\n            style={{ color: 'var(--theme-text-secondary)' }}\r\n            aria-label=\"Close\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-3\">\r\n          {Object.entries(themes).map(([key, themeData]) => (\r\n            <button\r\n              key={key}\r\n              onClick={() => {\r\n                setTheme(key as any)\r\n                onClose()\r\n              }}\r\n              className={cn(\r\n                'w-full p-4 rounded-lg border-2 transition-all flex items-center gap-4',\r\n                theme === key\r\n                  ? 'border-blue-500 bg-blue-500/20'\r\n                  : 'border-white/20 hover:border-white/40'\r\n              )}\r\n              style={{\r\n                backgroundColor: theme === key ? 'var(--theme-accent-primary)20' : 'transparent',\r\n              }}\r\n            >\r\n              <div className=\"text-3xl\">{themeData.emoji}</div>\r\n              <div className=\"text-left flex-1\">\r\n                <div className=\"font-semibold\" style={{ color: 'var(--theme-text-primary)' }}>\r\n                  {themeData.displayName}\r\n                </div>\r\n                <div className=\"text-xs\" style={{ color: 'var(--theme-text-secondary)' }}>\r\n                  {key === 'dark' && 'Default dark theme with Linear-inspired colors'}\r\n                  {key === 'light' && 'Clean light theme with high contrast'}\r\n                  {key === 'neutral' && 'Monochrome zen theme'}\r\n                </div>\r\n              </div>\r\n              {theme === key && (\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\r\n                  <path d=\"M20 6L9 17l-5-5\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { GanttTheme } from './types';\r\nimport { themes } from './themes';\r\n\r\n/**\r\n * Deriva un objeto GanttTheme desde las variables CSS del ThemeProvider global.\r\n * Si no hay ThemeProvider, retorna el theme especificado o 'dark' por defecto.\r\n *\r\n * @param themeName - Nombre del tema ('dark' | 'light' | 'neutral')\r\n * @returns GanttTheme object con colores derivados de CSS variables\r\n */\r\nexport function deriveThemeFromCSS(themeName: 'dark' | 'light' | 'neutral' = 'dark'): GanttTheme {\r\n  // Si estamos en SSR, retornar theme esttico\r\n  if (typeof window === 'undefined' || typeof getComputedStyle === 'undefined') {\r\n    return themes[themeName] || themes.dark;\r\n  }\r\n\r\n  // Obtener valores computados de variables CSS\r\n  const root = document.documentElement;\r\n  const styles = getComputedStyle(root);\r\n\r\n  // Helper para obtener variable CSS con fallback\r\n  const getVar = (varName: string, fallback: string): string => {\r\n    const value = styles.getPropertyValue(varName).trim();\r\n    return value || fallback;\r\n  };\r\n\r\n  // Derivar theme desde variables CSS (sistema --theme-*)\r\n  const derivedTheme: GanttTheme = {\r\n    // Backgrounds\r\n    bgPrimary: getVar('--theme-bg-primary', themes[themeName].bgPrimary),\r\n    bgSecondary: getVar('--theme-bg-secondary', themes[themeName].bgSecondary),\r\n    bgGrid: getVar('--theme-bg-card', themes[themeName].bgGrid),\r\n    bgWeekend: getVar('--theme-bg-hover', themes[themeName].bgWeekend),\r\n\r\n    // Borders\r\n    border: getVar('--theme-border-primary', themes[themeName].border),\r\n    borderLight: getVar('--theme-border-subtle', themes[themeName].borderLight),\r\n\r\n    // Text\r\n    textPrimary: getVar('--theme-text-primary', themes[themeName].textPrimary),\r\n    textSecondary: getVar('--theme-text-secondary', themes[themeName].textSecondary),\r\n    textTertiary: getVar('--theme-text-tertiary', themes[themeName].textTertiary),\r\n\r\n    // Accent & Interactive\r\n    accent: getVar('--theme-accent-primary', themes[themeName].accent),\r\n    accentHover: getVar('--theme-accent-hover', themes[themeName].accentHover),\r\n    accentLight: getVar('--theme-accent-primary', themes[themeName].accentLight), // usaremos opacity\r\n\r\n    // Task Elements\r\n    taskBarPrimary: getVar('--theme-accent-primary', themes[themeName].taskBarPrimary),\r\n    taskBarProgress: getVar('--theme-accent-hover', themes[themeName].taskBarProgress),\r\n    taskBarHandle: getVar('--theme-text-inverse', themes[themeName].taskBarHandle || '#FFFFFF'),\r\n\r\n    // Dependencies & Critical Path\r\n    dependency: getVar('--theme-border-secondary', themes[themeName].dependency),\r\n    dependencyHover: getVar('--theme-border-secondary', themes[themeName].dependencyHover),\r\n    criticalPath: getVar('--theme-error', themes[themeName].criticalPath),\r\n    criticalPathLight: getVar('--theme-error', themes[themeName].criticalPathLight),\r\n\r\n    // Special Elements - Theme-specific today indicator\r\n    // Light: uses accent (blue), Neutral: uses text primary (black), Dark: custom\r\n    today: themeName === 'light'\r\n      ? getVar('--theme-accent-primary', themes[themeName].today)\r\n      : themeName === 'neutral'\r\n      ? getVar('--theme-text-primary', themes[themeName].today)\r\n      : getVar('--theme-error', themes[themeName].today),\r\n    todayLight: themeName === 'light'\r\n      ? getVar('--theme-accent-primary', themes[themeName].todayLight)\r\n      : themeName === 'neutral'\r\n      ? getVar('--theme-text-primary', themes[themeName].todayLight)\r\n      : getVar('--theme-error', themes[themeName].todayLight),\r\n    milestone: getVar('--theme-warning', themes[themeName].milestone),\r\n    milestoneLight: getVar('--theme-warning', themes[themeName].milestoneLight),\r\n\r\n    // Status Colors\r\n    statusTodo: getVar('--theme-text-tertiary', themes[themeName].statusTodo),\r\n    statusInProgress: getVar('--theme-accent-primary', themes[themeName].statusInProgress),\r\n    statusCompleted: getVar('--theme-success', themes[themeName].statusCompleted),\r\n\r\n    // Hover & Focus States\r\n    hoverBg: getVar('--theme-bg-hover', themes[themeName].hoverBg),\r\n    focusRing: getVar('--theme-accent-primary', themes[themeName].focusRing),\r\n  };\r\n\r\n  return derivedTheme;\r\n}\r\n","/**\r\n * Internationalization (i18n) system for GanttBoard\r\n * @version 0.15.0\r\n *\r\n * Supports English (en) and Spanish (es) out of the box.\r\n * Users can provide custom translations via the `locale` config prop.\r\n */\r\n\r\nexport type SupportedLocale = 'en' | 'es';\r\n\r\nexport interface GanttTranslations {\r\n  // Column headers\r\n  columns: {\r\n    taskName: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    duration: string;\r\n    assignees: string;\r\n    status: string;\r\n    progress: string;\r\n    priority: string; // v0.17.29\r\n  };\r\n\r\n  // Toolbar\r\n  toolbar: {\r\n    today: string;\r\n    day: string;\r\n    week: string;\r\n    month: string;\r\n    export: string;\r\n    exportPdf: string;\r\n    exportPng: string;\r\n    exportCsv: string;\r\n    exportExcel: string;\r\n    exportMsProject: string;\r\n    undo: string;\r\n    redo: string;\r\n    createTask: string;\r\n    // v0.16.0: Density dropdown\r\n    density: string;\r\n    compact: string;\r\n    normal: string;\r\n    spacious: string;\r\n    // v0.17.300: Task filter\r\n    filterAll: string;\r\n    filterIncomplete: string;\r\n    filterInProgress: string;\r\n    filterCompleted: string;\r\n    // v0.17.320: Filter dropdown enhancements\r\n    filter: string;\r\n    filterBy: string;\r\n    filterAllDesc: string;\r\n    filterIncompleteDesc: string;\r\n    filterInProgressDesc: string;\r\n    filterCompletedDesc: string;\r\n    clearFilter: string;\r\n  };\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: string;\r\n    addSubtask: string;\r\n    markIncomplete: string;\r\n    setInProgress: string;\r\n    markComplete: string;\r\n    splitTask: string;\r\n    deleteTask: string;\r\n  };\r\n\r\n  // Task actions (context menu)\r\n  actions: {\r\n    edit: string;\r\n    delete: string;\r\n    duplicate: string;\r\n    addSubtask: string;\r\n    indent: string;\r\n    outdent: string;\r\n    moveUp: string;\r\n    moveDown: string;\r\n    splitTask: string;\r\n    linkTasks: string;\r\n    unlinkTasks: string;\r\n  };\r\n\r\n  // Status labels\r\n  status: {\r\n    todo: string;\r\n    inProgress: string;\r\n    completed: string;\r\n  };\r\n\r\n  // Tooltips and labels\r\n  labels: {\r\n    progress: string;\r\n    duration: string;\r\n    days: string;\r\n    day: string;\r\n    assigned: string;\r\n    milestone: string;\r\n    criticalPath: string;\r\n    subtask: string;\r\n    task: string;\r\n    noTasks: string;\r\n    addTask: string;\r\n    newTask: string;\r\n    loading: string;\r\n    error: string;\r\n    today: string;\r\n    week: string; // v0.17.400: \"Week\" prefix for timeline headers\r\n    clickToSetDates: string; // v0.17.400: Placeholder for tasks without dates\r\n  };\r\n\r\n  // AI Assistant\r\n  ai: {\r\n    placeholder: string;\r\n    thinking: string;\r\n    suggestions: {\r\n      moveTask: string;\r\n      extendTask: string;\r\n      renameTask: string;\r\n      setProgress: string;\r\n      linkTasks: string;\r\n      createTask: string;\r\n      deleteTask: string;\r\n      assignTask: string;\r\n    };\r\n    errors: {\r\n      taskNotFound: string;\r\n      invalidDate: string;\r\n      invalidDuration: string;\r\n      invalidProgress: string;\r\n      unknownCommand: string;\r\n      processingError: string;\r\n    };\r\n  };\r\n\r\n  // Export\r\n  export: {\r\n    projectName: string;\r\n    ganttTasks: string;\r\n    taskId: string;\r\n    taskName: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    isMilestone: string;\r\n    parentId: string;\r\n    yes: string;\r\n    no: string;\r\n    noTasksToExport: string;\r\n  };\r\n\r\n  // Date formats (for display)\r\n  dateFormat: {\r\n    short: string; // e.g., 'MM/dd' or 'dd/MM'\r\n    medium: string; // e.g., 'MMM d' or 'd MMM'\r\n    long: string; // e.g., 'MMMM d, yyyy' or 'd de MMMM de yyyy'\r\n  };\r\n}\r\n\r\n/**\r\n * English translations (default)\r\n */\r\nexport const en: GanttTranslations = {\r\n  columns: {\r\n    taskName: 'TASK NAME',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    duration: 'Duration',\r\n    assignees: 'Assignees',\r\n    status: 'Status',\r\n    progress: '% Complete',\r\n    priority: 'Priority', // v0.17.29\r\n  },\r\n\r\n  toolbar: {\r\n    today: 'Today',\r\n    day: 'Day',\r\n    week: 'Week',\r\n    month: 'Month',\r\n    export: 'Export',\r\n    exportPdf: 'Export to PDF',\r\n    exportPng: 'Export to PNG',\r\n    exportCsv: 'Export to CSV',\r\n    exportExcel: 'Export to Excel',\r\n    exportMsProject: 'Export to MS Project',\r\n    undo: 'Undo',\r\n    redo: 'Redo',\r\n    createTask: 'New Task',\r\n    // v0.16.0: Density dropdown\r\n    density: 'Row Density',\r\n    compact: 'Compact',\r\n    normal: 'Normal',\r\n    spacious: 'Spacious',\r\n    // v0.17.300: Task filter\r\n    filterAll: 'All',\r\n    filterIncomplete: 'Incomplete',\r\n    filterInProgress: 'In Progress',\r\n    filterCompleted: 'Completed',\r\n    // v0.17.320: Filter dropdown enhancements\r\n    filter: 'Filter',\r\n    filterBy: 'Filter by status',\r\n    filterAllDesc: 'Show all tasks',\r\n    filterIncompleteDesc: 'Hide completed tasks',\r\n    filterInProgressDesc: 'Tasks currently being worked on',\r\n    filterCompletedDesc: 'Only show finished tasks',\r\n    clearFilter: 'Clear filter',\r\n  },\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: 'Edit Task',\r\n    addSubtask: 'Add Subtask',\r\n    markIncomplete: 'Mark Incomplete',\r\n    setInProgress: 'Set In Progress',\r\n    markComplete: 'Mark Complete',\r\n    splitTask: 'Split Task',\r\n    deleteTask: 'Delete Task',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Edit',\r\n    delete: 'Delete',\r\n    duplicate: 'Duplicate',\r\n    addSubtask: 'Add Subtask',\r\n    indent: 'Indent',\r\n    outdent: 'Outdent',\r\n    moveUp: 'Move Up',\r\n    moveDown: 'Move Down',\r\n    splitTask: 'Split Task',\r\n    linkTasks: 'Link Tasks',\r\n    unlinkTasks: 'Unlink Tasks',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  labels: {\r\n    progress: 'Progress',\r\n    duration: 'Duration',\r\n    days: 'days',\r\n    day: 'day',\r\n    assigned: 'Assigned',\r\n    milestone: 'Milestone',\r\n    criticalPath: 'Critical Path',\r\n    subtask: 'Subtask',\r\n    task: 'Task',\r\n    noTasks: 'No tasks yet',\r\n    addTask: 'Add task',\r\n    newTask: 'New Task',\r\n    loading: 'Loading...',\r\n    error: 'Error',\r\n    today: 'Today',\r\n    week: 'Week', // v0.17.400\r\n    clickToSetDates: 'Click to set dates...', // v0.17.400\r\n  },\r\n\r\n  ai: {\r\n    placeholder: 'Ask AI to edit tasks... (e.g., \"Move Design to next week\")',\r\n    thinking: 'Thinking...',\r\n    suggestions: {\r\n      moveTask: 'Move \"Task Name\" to next Monday',\r\n      extendTask: 'Extend \"Task Name\" by 3 days',\r\n      renameTask: 'Rename \"Old Name\" to \"New Name\"',\r\n      setProgress: 'Set \"Task Name\" progress to 50%',\r\n      linkTasks: 'Link \"Task A\" to \"Task B\"',\r\n      createTask: 'Create a new task called \"New Task\"',\r\n      deleteTask: 'Delete \"Task Name\"',\r\n      assignTask: 'Assign John to \"Task Name\"',\r\n    },\r\n    errors: {\r\n      taskNotFound: 'Task not found',\r\n      invalidDate: 'Invalid date',\r\n      invalidDuration: 'Invalid duration',\r\n      invalidProgress: 'Invalid progress value',\r\n      unknownCommand: 'Unknown command',\r\n      processingError: 'Error processing command',\r\n    },\r\n  },\r\n\r\n  export: {\r\n    projectName: 'Gantt Project',\r\n    ganttTasks: 'Gantt Tasks',\r\n    taskId: 'Task ID',\r\n    taskName: 'Task Name',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    isMilestone: 'Is Milestone',\r\n    parentId: 'Parent ID',\r\n    yes: 'Yes',\r\n    no: 'No',\r\n    noTasksToExport: 'No tasks available to export',\r\n  },\r\n\r\n  dateFormat: {\r\n    short: 'MM/dd',\r\n    medium: 'MMM d',\r\n    long: 'MMMM d, yyyy',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: GanttTranslations = {\r\n  columns: {\r\n    taskName: 'NOMBRE DE TAREA',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    duration: 'Duracin',\r\n    assignees: 'Asignados',\r\n    status: 'Estado',\r\n    progress: '% Completado',\r\n    priority: 'Prioridad', // v0.17.29\r\n  },\r\n\r\n  toolbar: {\r\n    today: 'Hoy',\r\n    day: 'Da',\r\n    week: 'Semana',\r\n    month: 'Mes',\r\n    export: 'Exportar',\r\n    exportPdf: 'Exportar a PDF',\r\n    exportPng: 'Exportar a PNG',\r\n    exportCsv: 'Exportar a CSV',\r\n    exportExcel: 'Exportar a Excel',\r\n    exportMsProject: 'Exportar a MS Project',\r\n    undo: 'Deshacer',\r\n    redo: 'Rehacer',\r\n    createTask: 'Nueva Tarea',\r\n    // v0.16.0: Density dropdown\r\n    density: 'Densidad',\r\n    compact: 'Compacto',\r\n    normal: 'Normal',\r\n    spacious: 'Espacioso',\r\n    // v0.17.300: Task filter\r\n    filterAll: 'Todas',\r\n    filterIncomplete: 'Sin completar',\r\n    filterInProgress: 'En progreso',\r\n    filterCompleted: 'Completadas',\r\n    // v0.17.320: Filter dropdown enhancements\r\n    filter: 'Filtrar',\r\n    filterBy: 'Filtrar por estado',\r\n    filterAllDesc: 'Mostrar todas las tareas',\r\n    filterIncompleteDesc: 'Ocultar tareas completadas',\r\n    filterInProgressDesc: 'Tareas en las que se est trabajando',\r\n    filterCompletedDesc: 'Solo mostrar tareas terminadas',\r\n    clearFilter: 'Limpiar filtro',\r\n  },\r\n\r\n  // v0.16.0: Context menu labels (right-click menu)\r\n  contextMenu: {\r\n    editTask: 'Editar Tarea',\r\n    addSubtask: 'Agregar Subtarea',\r\n    markIncomplete: 'Marcar Incompleta',\r\n    setInProgress: 'Marcar En Progreso',\r\n    markComplete: 'Marcar Completada',\r\n    splitTask: 'Dividir Tarea',\r\n    deleteTask: 'Eliminar Tarea',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Editar',\r\n    delete: 'Eliminar',\r\n    duplicate: 'Duplicar',\r\n    addSubtask: 'Agregar Subtarea',\r\n    indent: 'Aumentar Nivel',\r\n    outdent: 'Disminuir Nivel',\r\n    moveUp: 'Mover Arriba',\r\n    moveDown: 'Mover Abajo',\r\n    splitTask: 'Dividir Tarea',\r\n    linkTasks: 'Vincular Tareas',\r\n    unlinkTasks: 'Desvincular Tareas',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  labels: {\r\n    progress: 'Progreso',\r\n    duration: 'Duracin',\r\n    days: 'das',\r\n    day: 'da',\r\n    assigned: 'Asignado',\r\n    milestone: 'Hito',\r\n    criticalPath: 'Ruta Crtica',\r\n    subtask: 'Subtarea',\r\n    task: 'Tarea',\r\n    noTasks: 'Sin tareas an',\r\n    addTask: 'Agregar tarea',\r\n    newTask: 'Nueva Tarea',\r\n    loading: 'Cargando...',\r\n    error: 'Error',\r\n    today: 'Hoy',\r\n    week: 'Semana', // v0.17.400\r\n    clickToSetDates: 'Clic para establecer fechas...', // v0.17.400\r\n  },\r\n\r\n  ai: {\r\n    placeholder: 'Pdele a la IA que edite tareas... (ej: \"Mover Diseo a la prxima semana\")',\r\n    thinking: 'Pensando...',\r\n    suggestions: {\r\n      moveTask: 'Mover \"Nombre de Tarea\" al prximo lunes',\r\n      extendTask: 'Extender \"Nombre de Tarea\" por 3 das',\r\n      renameTask: 'Renombrar \"Nombre Anterior\" a \"Nombre Nuevo\"',\r\n      setProgress: 'Establecer progreso de \"Nombre de Tarea\" al 50%',\r\n      linkTasks: 'Vincular \"Tarea A\" con \"Tarea B\"',\r\n      createTask: 'Crear una nueva tarea llamada \"Nueva Tarea\"',\r\n      deleteTask: 'Eliminar \"Nombre de Tarea\"',\r\n      assignTask: 'Asignar a Juan a \"Nombre de Tarea\"',\r\n    },\r\n    errors: {\r\n      taskNotFound: 'Tarea no encontrada',\r\n      invalidDate: 'Fecha invlida',\r\n      invalidDuration: 'Duracin invlida',\r\n      invalidProgress: 'Valor de progreso invlido',\r\n      unknownCommand: 'Comando desconocido',\r\n      processingError: 'Error procesando el comando',\r\n    },\r\n  },\r\n\r\n  export: {\r\n    projectName: 'Proyecto Gantt',\r\n    ganttTasks: 'Tareas Gantt',\r\n    taskId: 'ID de Tarea',\r\n    taskName: 'Nombre de Tarea',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    isMilestone: 'Es Hito',\r\n    parentId: 'ID Padre',\r\n    yes: 'S',\r\n    no: 'No',\r\n    noTasksToExport: 'No hay tareas disponibles para exportar',\r\n  },\r\n\r\n  dateFormat: {\r\n    short: 'dd/MM',\r\n    medium: 'd MMM',\r\n    long: 'd de MMMM de yyyy',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const translations: Record<SupportedLocale, GanttTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n * Falls back to English if locale is not found\r\n */\r\nexport function getTranslations(locale: SupportedLocale | string): GanttTranslations {\r\n  return translations[locale as SupportedLocale] || translations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n * Allows partial overrides while keeping defaults for missing keys\r\n */\r\nexport function mergeTranslations(\r\n  locale: SupportedLocale | string,\r\n  customTranslations?: Partial<GanttTranslations>\r\n): GanttTranslations {\r\n  const base = getTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    columns: { ...base.columns, ...customTranslations.columns },\r\n    toolbar: { ...base.toolbar, ...customTranslations.toolbar },\r\n    contextMenu: { ...base.contextMenu, ...customTranslations.contextMenu }, // v0.16.0\r\n    actions: { ...base.actions, ...customTranslations.actions },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    labels: { ...base.labels, ...customTranslations.labels },\r\n    ai: {\r\n      ...base.ai,\r\n      ...customTranslations.ai,\r\n      suggestions: { ...base.ai.suggestions, ...customTranslations.ai?.suggestions },\r\n      errors: { ...base.ai.errors, ...customTranslations.ai?.errors },\r\n    },\r\n    export: { ...base.export, ...customTranslations.export },\r\n    dateFormat: { ...base.dateFormat, ...customTranslations.dateFormat },\r\n  };\r\n}\r\n","/**\r\n * GanttI18nContext - Provides translations to all Gantt components\r\n * @version 0.15.0\r\n */\r\n\r\nimport { createContext, useContext } from 'react';\r\nimport { GanttTranslations, en } from './i18n';\r\n\r\n/**\r\n * Context for Gantt internationalization\r\n * Default value is English translations\r\n */\r\nexport const GanttI18nContext = createContext<GanttTranslations>(en);\r\n\r\n/**\r\n * Hook to access translations in Gantt components\r\n * @returns The current translations object\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyGanttComponent() {\r\n *   const t = useGanttI18n();\r\n *   return <button>{t.toolbar.createTask}</button>;\r\n * }\r\n * ```\r\n */\r\nexport function useGanttI18n(): GanttTranslations {\r\n  return useContext(GanttI18nContext);\r\n}\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { ZoomIn, ZoomOut, Sun, Moon, Palette, Download, FileImage, FileSpreadsheet, FileText, FileJson, ChevronDown, FolderKanban, Plus, Rows3, Check, Filter } from 'lucide-react';\r\nimport { TimeScale, Theme, RowDensity, TaskFilterType } from './types';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useGanttI18n } from './GanttI18nContext'; // v0.15.0: i18n\r\n\r\n// Export options configuration\r\nexport interface ExportOption {\r\n  id: string;\r\n  label: string;\r\n  description: string;\r\n  icon: React.ReactNode;\r\n  action: () => void | Promise<void>;\r\n}\r\n\r\ninterface GanttToolbarProps {\r\n  theme: any;\r\n  timeScale: TimeScale;\r\n  onTimeScaleChange: (scale: TimeScale) => void;\r\n  zoom: number;\r\n  onZoomChange: (zoom: number) => void;\r\n  currentTheme: Theme;\r\n  onThemeChange: (theme: Theme) => void;\r\n  rowDensity: RowDensity;\r\n  onRowDensityChange: (density: RowDensity) => void;\r\n  showThemeSelector?: boolean;\r\n  // v0.14.3: Create task button\r\n  showCreateTaskButton?: boolean;\r\n  createTaskLabel?: string;\r\n  onCreateTask?: () => void;\r\n  // v0.17.300: Task filter\r\n  taskFilter?: TaskFilterType;\r\n  onTaskFilterChange?: (filter: TaskFilterType) => void;\r\n  // Export handlers\r\n  onExportPNG?: () => Promise<void>;\r\n  onExportPDF?: () => Promise<void>;\r\n  onExportExcel?: () => Promise<void>;\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportMSProject?: () => void;\r\n}\r\n\r\n// Export Dropdown Component\r\ninterface ExportDropdownProps {\r\n  theme: any;\r\n  onExportPNG?: () => Promise<void>;\r\n  onExportPDF?: () => Promise<void>;\r\n  onExportExcel?: () => Promise<void>;\r\n  onExportCSV?: () => void;\r\n  onExportJSON?: () => void;\r\n  onExportMSProject?: () => void;\r\n}\r\n\r\nfunction ExportDropdown({ theme, onExportPNG, onExportPDF, onExportExcel, onExportCSV, onExportJSON, onExportMSProject }: ExportDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isExporting, setIsExporting] = useState<string | null>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = useGanttI18n(); // v0.15.0: i18n\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const hasAnyExport = onExportPNG || onExportPDF || onExportExcel || onExportCSV || onExportJSON || onExportMSProject;\r\n\r\n  if (!hasAnyExport) return null;\r\n\r\n  const exportOptions = [\r\n    {\r\n      id: 'png',\r\n      label: 'PNG',\r\n      description: 'Image',\r\n      icon: <FileImage className=\"w-4 h-4\" />,\r\n      handler: onExportPNG,\r\n    },\r\n    {\r\n      id: 'pdf',\r\n      label: 'PDF',\r\n      description: 'Document',\r\n      icon: <FileText className=\"w-4 h-4\" />,\r\n      handler: onExportPDF,\r\n    },\r\n    {\r\n      id: 'excel',\r\n      label: 'Excel',\r\n      description: 'Spreadsheet',\r\n      icon: <FileSpreadsheet className=\"w-4 h-4\" />,\r\n      handler: onExportExcel,\r\n    },\r\n    {\r\n      id: 'csv',\r\n      label: 'CSV',\r\n      description: 'Comma-separated',\r\n      icon: <FileText className=\"w-4 h-4\" />,\r\n      handler: onExportCSV,\r\n    },\r\n    {\r\n      id: 'json',\r\n      label: 'JSON',\r\n      description: 'Data',\r\n      icon: <FileJson className=\"w-4 h-4\" />,\r\n      handler: onExportJSON,\r\n    },\r\n    {\r\n      id: 'msproject',\r\n      label: 'MS Project',\r\n      description: 'XML',\r\n      icon: <FolderKanban className=\"w-4 h-4\" />,\r\n      handler: onExportMSProject,\r\n    },\r\n  ].filter(opt => opt.handler);\r\n\r\n  const handleExport = async (id: string, handler: (() => void | Promise<void>) | undefined) => {\r\n    if (!handler) return;\r\n\r\n    setIsExporting(id);\r\n    try {\r\n      await handler();\r\n    } catch (error) {\r\n      console.error(`Export ${id} failed:`, error);\r\n    } finally {\r\n      setIsExporting(null);\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n        style={{\r\n          backgroundColor: isOpen ? theme.accent : theme.bgSecondary,\r\n          border: `1px solid ${isOpen ? theme.accent : theme.borderLight}`,\r\n          color: isOpen ? '#FFFFFF' : theme.textSecondary,\r\n          fontFamily: 'Inter, sans-serif',\r\n          fontWeight: 500,\r\n        }}\r\n        whileHover={{\r\n          scale: 1.02,\r\n          backgroundColor: theme.accent,\r\n          color: '#FFFFFF',\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Download className=\"w-3.5 h-3.5\" />\r\n        <span>{t.toolbar.export}</span>\r\n        <ChevronDown\r\n          className=\"w-3 h-3 transition-transform\"\r\n          style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}\r\n        />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute right-0 mt-2 w-48 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              {exportOptions.map((option, index) => (\r\n                <motion.button\r\n                  key={option.id}\r\n                  onClick={() => handleExport(option.id, option.handler)}\r\n                  disabled={isExporting !== null}\r\n                  className=\"w-full flex items-center gap-3 px-3 py-2.5 text-left transition-all\"\r\n                  style={{\r\n                    backgroundColor: 'transparent',\r\n                    borderBottom: index < exportOptions.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                  }}\r\n                  whileHover={{\r\n                    backgroundColor: theme.hoverBg,\r\n                  }}\r\n                  initial={{ opacity: 0, x: -10 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: index * 0.03 }}\r\n                >\r\n                  <div\r\n                    className=\"flex items-center justify-center w-8 h-8 rounded-md\"\r\n                    style={{\r\n                      backgroundColor: theme.accentLight,\r\n                      color: theme.accent,\r\n                    }}\r\n                  >\r\n                    {isExporting === option.id ? (\r\n                      <motion.div\r\n                        animate={{ rotate: 360 }}\r\n                        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n                      >\r\n                        <Download className=\"w-4 h-4\" />\r\n                      </motion.div>\r\n                    ) : (\r\n                      option.icon\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div\r\n                      className=\"text-xs font-medium truncate\"\r\n                      style={{ color: theme.textPrimary }}\r\n                    >\r\n                      {option.label}\r\n                    </div>\r\n                    <div\r\n                      className=\"text-[10px] truncate\"\r\n                      style={{ color: theme.textTertiary }}\r\n                    >\r\n                      {option.description}\r\n                    </div>\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Segmented Control Component (kept for theme selector)\r\ninterface SegmentedControlProps {\r\n  options: Array<{ value: string; label: string; icon?: React.ReactNode }>;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  theme: any;\r\n  layoutId?: string;\r\n}\r\n\r\nfunction SegmentedControl({ options, value, onChange, theme, layoutId = 'activeSegment' }: SegmentedControlProps) {\r\n  return (\r\n    <div\r\n      className=\"inline-flex p-1 rounded-lg relative\"\r\n      style={{\r\n        backgroundColor: theme.bgSecondary,\r\n        border: `1px solid ${theme.borderLight}`,\r\n      }}\r\n    >\r\n      {options.map((option) => {\r\n        const isActive = value === option.value;\r\n        return (\r\n          <motion.button\r\n            key={option.value}\r\n            onClick={() => onChange(option.value)}\r\n            className=\"relative px-3 py-1.5 rounded-md text-xs transition-all flex items-center gap-1.5 min-w-[70px] justify-center\"\r\n            style={{\r\n              color: isActive ? theme.textPrimary : theme.textTertiary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: isActive ? 600 : 500,\r\n              zIndex: isActive ? 2 : 1,\r\n            }}\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            {isActive && (\r\n              <motion.div\r\n                layoutId={layoutId}\r\n                className=\"absolute inset-0 rounded-md\"\r\n                style={{\r\n                  backgroundColor: theme.accent,\r\n                  boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                }}\r\n                transition={{\r\n                  type: 'spring',\r\n                  stiffness: 400,\r\n                  damping: 30,\r\n                }}\r\n              />\r\n            )}\r\n            {option.icon && (\r\n              <span className=\"relative z-10\" style={{ color: isActive ? '#FFFFFF' : theme.textTertiary }}>\r\n                {option.icon}\r\n              </span>\r\n            )}\r\n            <span className=\"relative z-10\" style={{ color: isActive ? '#FFFFFF' : theme.textTertiary }}>\r\n              {option.label}\r\n            </span>\r\n          </motion.button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * v0.16.0: Minimal Tabs Component - Linear/Notion style\r\n * Minimalist tab selector with underline indicator\r\n */\r\ninterface MinimalTabsProps {\r\n  options: Array<{ value: string; label: string }>;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  theme: any;\r\n}\r\n\r\nfunction MinimalTabs({ options, value, onChange, theme }: MinimalTabsProps) {\r\n  return (\r\n    <div className=\"inline-flex items-center gap-1\">\r\n      {options.map((option) => {\r\n        const isActive = value === option.value;\r\n        return (\r\n          <motion.button\r\n            key={option.value}\r\n            onClick={() => onChange(option.value)}\r\n            className=\"relative px-3 py-1.5 text-xs transition-all\"\r\n            style={{\r\n              color: isActive ? theme.accent : theme.textTertiary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: isActive ? 600 : 500,\r\n            }}\r\n            whileHover={{ color: isActive ? theme.accent : theme.textSecondary }}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            <span>{option.label}</span>\r\n            {/* Underline indicator */}\r\n            {isActive && (\r\n              <motion.div\r\n                layoutId=\"timeScaleUnderline\"\r\n                className=\"absolute bottom-0 left-1 right-1 h-0.5 rounded-full\"\r\n                style={{ backgroundColor: theme.accent }}\r\n                transition={{\r\n                  type: 'spring',\r\n                  stiffness: 400,\r\n                  damping: 30,\r\n                }}\r\n              />\r\n            )}\r\n          </motion.button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * v0.16.0: Density Dropdown Component\r\n * Consolidated density selector as a compact dropdown\r\n */\r\ninterface DensityDropdownProps {\r\n  theme: any;\r\n  value: RowDensity;\r\n  onChange: (density: RowDensity) => void;\r\n}\r\n\r\nfunction DensityDropdown({ theme, value, onChange }: DensityDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = useGanttI18n();\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const densityOptions = [\r\n    { value: 'compact' as RowDensity, label: t.toolbar.compact || 'Compact' },\r\n    { value: 'comfortable' as RowDensity, label: t.toolbar.normal || 'Normal' },\r\n    { value: 'spacious' as RowDensity, label: t.toolbar.spacious || 'Spacious' },\r\n  ];\r\n\r\n  const currentLabel = densityOptions.find(opt => opt.value === value)?.label || 'Normal';\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center justify-center p-2 rounded-lg transition-all\"\r\n        style={{\r\n          backgroundColor: isOpen ? theme.accentLight : theme.bgSecondary,\r\n          border: `1px solid ${isOpen ? theme.accent : theme.borderLight}`,\r\n          color: isOpen ? theme.accent : theme.textSecondary,\r\n        }}\r\n        whileHover={{\r\n          backgroundColor: theme.hoverBg,\r\n          scale: 1.02,\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n        title={`${t.toolbar.density || 'Density'}: ${currentLabel}`}\r\n      >\r\n        <Rows3 className=\"w-4 h-4\" />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute left-0 mt-2 w-36 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            <div className=\"py-1\">\r\n              {densityOptions.map((option, index) => {\r\n                const isActive = value === option.value;\r\n                return (\r\n                  <motion.button\r\n                    key={option.value}\r\n                    onClick={() => {\r\n                      onChange(option.value);\r\n                      setIsOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-center justify-between px-3 py-2 text-left transition-all\"\r\n                    style={{\r\n                      backgroundColor: isActive ? theme.accentLight : 'transparent',\r\n                      borderBottom: index < densityOptions.length - 1 ? `1px solid ${theme.borderLight}` : 'none',\r\n                    }}\r\n                    whileHover={{\r\n                      backgroundColor: isActive ? theme.accentLight : theme.hoverBg,\r\n                    }}\r\n                    initial={{ opacity: 0, x: -10 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.03 }}\r\n                  >\r\n                    <span\r\n                      className=\"text-xs\"\r\n                      style={{\r\n                        color: isActive ? theme.accent : theme.textPrimary,\r\n                        fontFamily: 'Inter, sans-serif',\r\n                        fontWeight: isActive ? 600 : 500,\r\n                      }}\r\n                    >\r\n                      {option.label}\r\n                    </span>\r\n                    {isActive && (\r\n                      <Check className=\"w-3.5 h-3.5\" style={{ color: theme.accent }} />\r\n                    )}\r\n                  </motion.button>\r\n                );\r\n              })}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * v0.17.320: Professional Filter Dropdown Component\r\n * Linear/Notion-style filter button with checkbox options\r\n * Shows active filter count as badge when filters are applied\r\n */\r\ninterface FilterDropdownProps {\r\n  theme: any;\r\n  value: TaskFilterType;\r\n  onChange: (filter: TaskFilterType) => void;\r\n}\r\n\r\nfunction FilterDropdown({ theme, value, onChange }: FilterDropdownProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = useGanttI18n();\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const filterOptions = [\r\n    {\r\n      value: 'all' as TaskFilterType,\r\n      label: t.toolbar.filterAll || 'All tasks',\r\n      description: t.toolbar.filterAllDesc || 'Show all tasks'\r\n    },\r\n    {\r\n      value: 'incomplete' as TaskFilterType,\r\n      label: t.toolbar.filterIncomplete || 'Incomplete only',\r\n      description: t.toolbar.filterIncompleteDesc || 'Hide completed tasks'\r\n    },\r\n    {\r\n      value: 'in_progress' as TaskFilterType,\r\n      label: t.toolbar.filterInProgress || 'In progress',\r\n      description: t.toolbar.filterInProgressDesc || 'Tasks currently being worked on'\r\n    },\r\n    {\r\n      value: 'completed' as TaskFilterType,\r\n      label: t.toolbar.filterCompleted || 'Completed',\r\n      description: t.toolbar.filterCompletedDesc || 'Only show finished tasks'\r\n    },\r\n  ];\r\n\r\n  const hasActiveFilter = value !== 'all';\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      <motion.button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n        style={{\r\n          backgroundColor: hasActiveFilter ? theme.accentLight : (isOpen ? theme.accentLight : theme.bgSecondary),\r\n          border: `1px solid ${hasActiveFilter || isOpen ? theme.accent : theme.borderLight}`,\r\n          color: hasActiveFilter || isOpen ? theme.accent : theme.textSecondary,\r\n          fontFamily: 'Inter, sans-serif',\r\n          fontWeight: 500,\r\n        }}\r\n        whileHover={{\r\n          backgroundColor: theme.accentLight,\r\n          borderColor: theme.accent,\r\n          color: theme.accent,\r\n          scale: 1.02,\r\n        }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Filter className=\"w-3.5 h-3.5\" />\r\n        <span>{t.toolbar.filter || 'Filter'}</span>\r\n        {hasActiveFilter && (\r\n          <motion.span\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            className=\"flex items-center justify-center w-4 h-4 rounded-full text-[10px] font-semibold\"\r\n            style={{\r\n              backgroundColor: theme.accent,\r\n              color: '#FFFFFF',\r\n            }}\r\n          >\r\n            1\r\n          </motion.span>\r\n        )}\r\n        <ChevronDown\r\n          className=\"w-3 h-3 transition-transform\"\r\n          style={{ transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}\r\n        />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -8, scale: 0.95 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            className=\"absolute left-0 mt-2 w-56 rounded-lg overflow-hidden z-50\"\r\n            style={{\r\n              backgroundColor: theme.bgSecondary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.25)',\r\n            }}\r\n          >\r\n            {/* Header */}\r\n            <div\r\n              className=\"px-3 py-2 border-b\"\r\n              style={{ borderColor: theme.borderLight }}\r\n            >\r\n              <span\r\n                className=\"text-xs font-medium\"\r\n                style={{ color: theme.textTertiary }}\r\n              >\r\n                {t.toolbar.filterBy || 'Filter by status'}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Options */}\r\n            <div className=\"py-1\">\r\n              {filterOptions.map((option, index) => {\r\n                const isActive = value === option.value;\r\n                return (\r\n                  <motion.button\r\n                    key={option.value}\r\n                    onClick={() => {\r\n                      onChange(option.value);\r\n                      setIsOpen(false);\r\n                    }}\r\n                    className=\"w-full flex items-start gap-3 px-3 py-2.5 text-left transition-all\"\r\n                    style={{\r\n                      backgroundColor: isActive ? theme.accentLight : 'transparent',\r\n                    }}\r\n                    whileHover={{\r\n                      backgroundColor: isActive ? theme.accentLight : theme.hoverBg,\r\n                    }}\r\n                    initial={{ opacity: 0, x: -10 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    transition={{ delay: index * 0.03 }}\r\n                  >\r\n                    {/* Checkbox-style indicator */}\r\n                    <div\r\n                      className=\"flex items-center justify-center w-4 h-4 rounded border mt-0.5 flex-shrink-0\"\r\n                      style={{\r\n                        borderColor: isActive ? theme.accent : theme.border,\r\n                        backgroundColor: isActive ? theme.accent : 'transparent',\r\n                      }}\r\n                    >\r\n                      {isActive && (\r\n                        <Check className=\"w-3 h-3\" style={{ color: '#FFFFFF' }} />\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Label and description */}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className=\"text-xs font-medium\"\r\n                        style={{\r\n                          color: isActive ? theme.accent : theme.textPrimary,\r\n                        }}\r\n                      >\r\n                        {option.label}\r\n                      </div>\r\n                      <div\r\n                        className=\"text-[10px] mt-0.5\"\r\n                        style={{ color: theme.textTertiary }}\r\n                      >\r\n                        {option.description}\r\n                      </div>\r\n                    </div>\r\n                  </motion.button>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Clear filter button (only when filter is active) */}\r\n            {hasActiveFilter && (\r\n              <div\r\n                className=\"px-3 py-2 border-t\"\r\n                style={{ borderColor: theme.borderLight }}\r\n              >\r\n                <motion.button\r\n                  onClick={() => {\r\n                    onChange('all');\r\n                    setIsOpen(false);\r\n                  }}\r\n                  className=\"w-full text-xs py-1.5 rounded-md\"\r\n                  style={{\r\n                    color: theme.textTertiary,\r\n                  }}\r\n                  whileHover={{\r\n                    backgroundColor: theme.hoverBg,\r\n                    color: theme.textSecondary,\r\n                  }}\r\n                >\r\n                  {t.toolbar.clearFilter || 'Clear filter'}\r\n                </motion.button>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function GanttToolbar({\r\n  theme,\r\n  timeScale,\r\n  onTimeScaleChange,\r\n  zoom,\r\n  onZoomChange,\r\n  currentTheme,\r\n  onThemeChange,\r\n  rowDensity,\r\n  onRowDensityChange,\r\n  showThemeSelector = false, // v0.17.29: Default to false - themes should be in app settings\r\n  showCreateTaskButton = false,\r\n  createTaskLabel, // v0.15.0: Will use translations if not provided\r\n  onCreateTask,\r\n  taskFilter = 'all', // v0.17.300: Task filter\r\n  onTaskFilterChange,\r\n  onExportPNG,\r\n  onExportPDF,\r\n  onExportExcel,\r\n  onExportCSV,\r\n  onExportJSON,\r\n  onExportMSProject,\r\n}: GanttToolbarProps) {\r\n  const t = useGanttI18n(); // v0.15.0: i18n\r\n  const hasExport = onExportPNG || onExportPDF || onExportExcel || onExportCSV || onExportJSON || onExportMSProject;\r\n\r\n  // v0.16.0: Use minimal tabs for time scale (Linear/Notion style)\r\n  const timeScaleOptions = [\r\n    { value: 'day', label: t.toolbar.day },\r\n    { value: 'week', label: t.toolbar.week },\r\n    { value: 'month', label: t.toolbar.month },\r\n  ];\r\n\r\n  // v0.17.320: Task filter options moved to FilterDropdown component\r\n\r\n  const themeOptions = [\r\n    { value: 'dark', label: 'Dark', icon: <Moon className=\"w-3.5 h-3.5\" /> },\r\n    { value: 'light', label: 'Light', icon: <Sun className=\"w-3.5 h-3.5\" /> },\r\n    { value: 'neutral', label: 'Zen', icon: <Palette className=\"w-3.5 h-3.5\" /> },\r\n  ];\r\n\r\n  return (\r\n    <div\r\n      className=\"h-12 px-4 flex items-center justify-between border-b\"\r\n      style={{\r\n        backgroundColor: theme.bgGrid,\r\n        borderColor: theme.border,\r\n      }}\r\n    >\r\n      {/* Left Section - Time Scale as Minimal Tabs */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* v0.16.0: Minimal tabs for time scale */}\r\n        <MinimalTabs\r\n          options={timeScaleOptions}\r\n          value={timeScale}\r\n          onChange={(val) => onTimeScaleChange(val as TimeScale)}\r\n          theme={theme}\r\n        />\r\n\r\n        {/* Divider */}\r\n        <div\r\n          className=\"w-px h-5\"\r\n          style={{ backgroundColor: theme.borderLight }}\r\n        />\r\n\r\n        {/* Zoom Controls - Compact */}\r\n        <div className=\"flex items-center gap-1\">\r\n          <motion.button\r\n            onClick={() => onZoomChange(Math.max(0.5, zoom - 0.1))}\r\n            className=\"p-1.5 rounded-md transition-all\"\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              color: theme.textSecondary,\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: theme.hoverBg,\r\n              scale: 1.05,\r\n            }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            <ZoomOut className=\"w-3.5 h-3.5\" />\r\n          </motion.button>\r\n\r\n          <div\r\n            className=\"px-2 py-0.5 rounded text-xs tabular-nums min-w-[42px] text-center\"\r\n            style={{\r\n              color: theme.textSecondary,\r\n              fontFamily: 'Inter, sans-serif',\r\n              fontWeight: 500,\r\n            }}\r\n          >\r\n            {Math.round(zoom * 100)}%\r\n          </div>\r\n\r\n          <motion.button\r\n            onClick={() => onZoomChange(Math.min(2, zoom + 0.1))}\r\n            className=\"p-1.5 rounded-md transition-all\"\r\n            style={{\r\n              backgroundColor: 'transparent',\r\n              color: theme.textSecondary,\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: theme.hoverBg,\r\n              scale: 1.05,\r\n            }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            <ZoomIn className=\"w-3.5 h-3.5\" />\r\n          </motion.button>\r\n        </div>\r\n\r\n        {/* Divider */}\r\n        <div\r\n          className=\"w-px h-5\"\r\n          style={{ backgroundColor: theme.borderLight }}\r\n        />\r\n\r\n        {/* v0.16.0: Row Density as Dropdown Icon */}\r\n        <DensityDropdown\r\n          theme={theme}\r\n          value={rowDensity}\r\n          onChange={onRowDensityChange}\r\n        />\r\n\r\n        {/* v0.17.320: Professional Filter Dropdown */}\r\n        {onTaskFilterChange && (\r\n          <>\r\n            {/* Divider */}\r\n            <div\r\n              className=\"w-px h-5\"\r\n              style={{ backgroundColor: theme.borderLight }}\r\n            />\r\n\r\n            {/* Filter Dropdown */}\r\n            <FilterDropdown\r\n              theme={theme}\r\n              value={taskFilter}\r\n              onChange={onTaskFilterChange}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Right Section - Create Task + Export + Theme Selector */}\r\n      <div className=\"flex items-center gap-3\">\r\n        {/* v0.14.3: Create Task Button */}\r\n        {showCreateTaskButton && onCreateTask && (\r\n          <>\r\n            <motion.button\r\n              onClick={onCreateTask}\r\n              className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs transition-all\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n                color: '#FFFFFF',\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 500,\r\n                boxShadow: '0 2px 8px rgba(59, 130, 246, 0.3)',\r\n              }}\r\n              whileHover={{\r\n                scale: 1.02,\r\n                boxShadow: '0 4px 12px rgba(59, 130, 246, 0.4)',\r\n              }}\r\n              whileTap={{ scale: 0.98 }}\r\n            >\r\n              <Plus className=\"w-3.5 h-3.5\" />\r\n              <span>{createTaskLabel || t.toolbar.createTask}</span>\r\n            </motion.button>\r\n            {(hasExport || showThemeSelector) && (\r\n              <div\r\n                className=\"w-px h-6\"\r\n                style={{ backgroundColor: theme.borderLight }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {hasExport && (\r\n          <>\r\n            <ExportDropdown\r\n              theme={theme}\r\n              onExportPNG={onExportPNG}\r\n              onExportPDF={onExportPDF}\r\n              onExportExcel={onExportExcel}\r\n              onExportCSV={onExportCSV}\r\n              onExportJSON={onExportJSON}\r\n              onExportMSProject={onExportMSProject}\r\n            />\r\n            {showThemeSelector && (\r\n              <div\r\n                className=\"w-px h-6\"\r\n                style={{ backgroundColor: theme.borderLight }}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n        {showThemeSelector && (\r\n          <SegmentedControl\r\n            options={themeOptions}\r\n            value={currentTheme}\r\n            onChange={(val) => onThemeChange(val as Theme)}\r\n            theme={theme}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Plus, Check } from 'lucide-react';\r\nimport { Portal } from '../Portal';\r\nimport { GanttColumn, ColumnType } from './types';\r\n\r\ninterface ColumnManagerProps {\r\n  columns: GanttColumn[];\r\n  onToggleColumn: (columnId: ColumnType) => void;\r\n  theme: any;\r\n}\r\n\r\nexport function ColumnManager({ columns, onToggleColumn, theme }: ColumnManagerProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [menuPosition, setMenuPosition] = useState({ x: 0, y: 0 });\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const availableColumns = columns.filter(col => col.id !== 'name');\r\n\r\n  return (\r\n    <>\r\n      <motion.button\r\n        ref={buttonRef}\r\n        onClick={() => {\r\n          if (!isOpen && buttonRef.current) {\r\n            const rect = buttonRef.current.getBoundingClientRect();\r\n            setMenuPosition({ x: rect.left, y: rect.bottom + 4 });\r\n          }\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className=\"p-2 rounded-md transition-colors flex items-center gap-1\"\r\n        style={{\r\n          backgroundColor: theme.bgSecondary,\r\n          border: `1px solid ${theme.borderLight}`,\r\n          color: theme.textSecondary,\r\n        }}\r\n        whileHover={{\r\n          backgroundColor: theme.hoverBg,\r\n          scale: 1.05,\r\n        }}\r\n        whileTap={{ scale: 0.95 }}\r\n      >\r\n        <Plus className=\"w-4 h-4\" />\r\n      </motion.button>\r\n\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <Portal>\r\n            <motion.div\r\n              ref={menuRef}\r\n              initial={{ opacity: 0, scale: 0.95, y: -10 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.95, y: -10 }}\r\n              transition={{ duration: 0.15 }}\r\n              className=\"column-manager-menu fixed min-w-[180px] rounded-lg shadow-xl z-[9999]\"\r\n              style={{\r\n                left: `${menuPosition.x}px`,\r\n                top: `${menuPosition.y}px`,\r\n                backgroundColor: theme.bgSecondary,\r\n                border: `1px solid ${theme.border}`,\r\n              }}\r\n            >\r\n              <div className=\"py-1\">\r\n                <div\r\n                  className=\"px-3 py-2 text-xs uppercase tracking-wider\"\r\n                  style={{\r\n                    color: theme.textTertiary,\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    fontWeight: 600,\r\n                  }}\r\n                >\r\n                  Add Column\r\n                </div>\r\n                {availableColumns.map((column) => (\r\n                  <button\r\n                    key={column.id}\r\n                    onClick={() => {\r\n                      onToggleColumn(column.id);\r\n                    }}\r\n                    className=\"w-full px-3 py-2 text-left flex items-center justify-between transition-colors text-sm\"\r\n                    style={{\r\n                      color: theme.textPrimary,\r\n                      backgroundColor: 'transparent',\r\n                      fontFamily: 'Inter, sans-serif',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.backgroundColor = 'transparent';\r\n                    }}\r\n                  >\r\n                    <span>{column.label}</span>\r\n                    {column.visible && (\r\n                      <Check className=\"w-4 h-4\" style={{ color: theme.accent }} />\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </motion.div>\r\n          </Portal>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Plus,\r\n  Minus,\r\n  Edit3,\r\n  Trash2,\r\n  Link2,\r\n  BarChart3,\r\n  ArrowUpDown,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  ChevronRight,\r\n  Eye,\r\n  EyeOff,\r\n  Settings,\r\n  Scissors, // v0.8.0: For Split task\r\n  Circle, // v0.16.0: For Mark Incomplete\r\n  PlayCircle, // v0.16.0: For Set In Progress\r\n  CheckCircle2, // v0.16.0: For Mark Complete\r\n  Pencil, // v0.16.0: Alias for Edit\r\n} from 'lucide-react';\r\n\r\nexport interface ContextMenuItem {\r\n  id: string;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n  onClick: () => void;\r\n  separator?: boolean;\r\n  disabled?: boolean;\r\n  submenu?: ContextMenuItem[];\r\n}\r\n\r\ninterface ContextMenuProps {\r\n  isOpen: boolean;\r\n  x: number;\r\n  y: number;\r\n  items: ContextMenuItem[];\r\n  onClose: () => void;\r\n  theme: any;\r\n}\r\n\r\nexport function ContextMenu({ isOpen, x, y, items, onClose, theme }: ContextMenuProps) {\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  // v0.17.32: Adaptive positioning to prevent menu from being cut off at edges\r\n  const [adjustedPosition, setAdjustedPosition] = useState({ x, y });\r\n\r\n  // v0.17.32: Calculate adjusted position when menu opens or position changes\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    // Menu dimensions (approximate - will be refined after render)\r\n    const menuWidth = 200; // min-w-[200px]\r\n    const menuHeight = items.length * 36 + 8; // ~36px per item + padding\r\n    const padding = 8; // Distance from edge\r\n\r\n    // Get viewport dimensions\r\n    const viewportWidth = window.innerWidth;\r\n    const viewportHeight = window.innerHeight;\r\n\r\n    let adjustedX = x;\r\n    let adjustedY = y;\r\n\r\n    // Adjust X if menu would overflow right edge\r\n    if (x + menuWidth + padding > viewportWidth) {\r\n      adjustedX = x - menuWidth; // Show to the left of cursor\r\n      // Ensure it doesn't go off left edge\r\n      if (adjustedX < padding) {\r\n        adjustedX = padding;\r\n      }\r\n    }\r\n\r\n    // Adjust Y if menu would overflow bottom edge\r\n    if (y + menuHeight + padding > viewportHeight) {\r\n      adjustedY = viewportHeight - menuHeight - padding;\r\n      // Ensure it doesn't go off top edge\r\n      if (adjustedY < padding) {\r\n        adjustedY = padding;\r\n      }\r\n    }\r\n\r\n    setAdjustedPosition({ x: adjustedX, y: adjustedY });\r\n  }, [isOpen, x, y, items.length]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('keydown', handleEscape);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // v0.17.33: Ensure solid background color (not transparent)\r\n  // Some themes use rgba colors, so we need to ensure full opacity\r\n  const getSolidBackground = (color: string): string => {\r\n    // If it's already a solid hex color, return as-is\r\n    if (color.startsWith('#') && (color.length === 7 || color.length === 4)) {\r\n      return color;\r\n    }\r\n    // For dark themes, use a solid dark color\r\n    // For light themes, use a solid light color\r\n    const isDarkTheme = theme.bgPrimary?.includes('1') || theme.bgPrimary?.includes('2') ||\r\n                        theme.textPrimary?.toLowerCase().includes('fff') ||\r\n                        theme.textPrimary?.toLowerCase().includes('white');\r\n    return isDarkTheme ? '#1E2128' : '#FFFFFF';\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        ref={menuRef}\r\n        initial={{ opacity: 0, scale: 0.95, y: -10 }}\r\n        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n        exit={{ opacity: 0, scale: 0.95, y: -10 }}\r\n        transition={{ duration: 0.15, ease: [0.4, 0, 0.2, 1] }}\r\n        className=\"fixed z-[9999] min-w-[200px] rounded-lg\"\r\n        style={{\r\n          left: `${adjustedPosition.x}px`,\r\n          top: `${adjustedPosition.y}px`,\r\n          backgroundColor: getSolidBackground(theme.bgSecondary),\r\n          border: `1px solid ${theme.border}`,\r\n          boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.2)',\r\n          backdropFilter: 'none', // v0.17.33: Ensure no blur effect\r\n        }}\r\n      >\r\n        <div className=\"py-1\">\r\n          {items.map((item) => (\r\n            <div key={item.id}>\r\n              {item.separator && (\r\n                <div\r\n                  className=\"my-1 h-px\"\r\n                  style={{ backgroundColor: theme.borderLight }}\r\n                />\r\n              )}\r\n              <button\r\n                onClick={() => {\r\n                  if (!item.disabled) {\r\n                    item.onClick();\r\n                    onClose();\r\n                  }\r\n                }}\r\n                disabled={item.disabled}\r\n                className=\"w-full px-3 py-2 text-left flex items-center gap-2 transition-colors text-sm\"\r\n                style={{\r\n                  color: item.disabled ? theme.textTertiary : theme.textPrimary,\r\n                  backgroundColor: 'transparent',\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  cursor: item.disabled ? 'not-allowed' : 'pointer',\r\n                  opacity: item.disabled ? 0.5 : 1,\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  if (!item.disabled) {\r\n                    e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                  }\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.backgroundColor = 'transparent';\r\n                }}\r\n              >\r\n                {item.icon && (\r\n                  <span style={{ color: theme.textSecondary }}>\r\n                    {item.icon}\r\n                  </span>\r\n                )}\r\n                <span className=\"flex-1\">{item.label}</span>\r\n                {item.submenu && (\r\n                  <ChevronRight className=\"w-3.5 h-3.5\" style={{ color: theme.textTertiary }} />\r\n                )}\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// Icon components for menu items\r\nexport const MenuIcons = {\r\n  Edit: <Edit3 className=\"w-4 h-4\" />,\r\n  Pencil: <Pencil className=\"w-4 h-4\" />, // v0.16.0: Alias for Edit\r\n  Delete: <Trash2 className=\"w-4 h-4\" />,\r\n  Add: <Plus className=\"w-4 h-4\" />,\r\n  AddSubtask: <Plus className=\"w-4 h-4\" />, // v0.16.0: Add subtask\r\n  Remove: <Minus className=\"w-4 h-4\" />,\r\n  Link: <Link2 className=\"w-4 h-4\" />,\r\n  Progress: <BarChart3 className=\"w-4 h-4\" />,\r\n  Sort: <ArrowUpDown className=\"w-4 h-4\" />,\r\n  SortAsc: <ArrowUp className=\"w-4 h-4\" />,\r\n  SortDesc: <ArrowDown className=\"w-4 h-4\" />,\r\n  Hide: <EyeOff className=\"w-4 h-4\" />,\r\n  Show: <Eye className=\"w-4 h-4\" />,\r\n  Settings: <Settings className=\"w-4 h-4\" />,\r\n  Split: <Scissors className=\"w-4 h-4\" />, // v0.8.0: Split task\r\n  // v0.16.0: Task status icons\r\n  MarkIncomplete: <Circle className=\"w-4 h-4\" />,\r\n  SetInProgress: <PlayCircle className=\"w-4 h-4\" />,\r\n  MarkComplete: <CheckCircle2 className=\"w-4 h-4\" />,\r\n};\r\n","import { useEffect, useCallback, useRef } from 'react';\r\nimport { Task } from './types';\r\n\r\ninterface UseGanttKeyboardProps {\r\n  tasks: Task[];\r\n  selectedTaskIds: Set<string>;\r\n  onTaskSelect: (taskId: string, multiSelect?: boolean) => void;\r\n  onTaskCreate: (afterTaskId: string, direction: 'above' | 'below') => void;\r\n  onTaskDelete: (taskIds: string[]) => void;\r\n  onTaskDuplicate: (taskIds: string[]) => void;\r\n  onTaskMove: (taskIds: string[], direction: 'up' | 'down') => void;\r\n  onTaskIndent: (taskIds: string[]) => void;\r\n  onTaskOutdent: (taskIds: string[]) => void;\r\n  onTaskRename: (taskId: string) => void;\r\n  onTaskToggleExpand: (taskId: string) => void;\r\n  onOpenTaskModal: (taskId: string) => void;\r\n  enableKeyboard?: boolean;\r\n}\r\n\r\nexport function useGanttKeyboard({\r\n  tasks,\r\n  selectedTaskIds,\r\n  onTaskSelect,\r\n  onTaskCreate,\r\n  onTaskDelete,\r\n  onTaskDuplicate,\r\n  onTaskMove,\r\n  onTaskIndent,\r\n  onTaskOutdent,\r\n  onTaskRename,\r\n  onTaskToggleExpand,\r\n  onOpenTaskModal,\r\n  enableKeyboard = true,\r\n}: UseGanttKeyboardProps) {\r\n  const isEditingRef = useRef(false);\r\n\r\n  // Set editing state from outside\r\n  const setIsEditing = useCallback((editing: boolean) => {\r\n    isEditingRef.current = editing;\r\n  }, []);\r\n\r\n  // Flatten tasks for navigation\r\n  const flattenTasks = useCallback((tasks: Task[]): Task[] => {\r\n    const result: Task[] = [];\r\n    const traverse = (tasks: Task[]) => {\r\n      for (const task of tasks) {\r\n        result.push(task);\r\n        if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n          traverse(task.subtasks);\r\n        }\r\n      }\r\n    };\r\n    traverse(tasks);\r\n    return result;\r\n  }, []);\r\n\r\n  // Get first selected task\r\n  const getFirstSelectedTask = useCallback(() => {\r\n    const flatTasks = flattenTasks(tasks);\r\n    for (const task of flatTasks) {\r\n      if (selectedTaskIds.has(task.id)) {\r\n        return task;\r\n      }\r\n    }\r\n    return null;\r\n  }, [tasks, selectedTaskIds, flattenTasks]);\r\n\r\n  // Navigate with arrow keys\r\n  const handleNavigation = useCallback(\r\n    (direction: 'up' | 'down', multiSelect: boolean) => {\r\n      const flatTasks = flattenTasks(tasks);\r\n      if (flatTasks.length === 0) return;\r\n\r\n      const selectedTask = getFirstSelectedTask();\r\n      if (!selectedTask) {\r\n        // No selection, select first task\r\n        onTaskSelect(flatTasks[0].id, false);\r\n        return;\r\n      }\r\n\r\n      const currentIndex = flatTasks.findIndex((t) => t.id === selectedTask.id);\r\n      if (currentIndex === -1) return;\r\n\r\n      const nextIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;\r\n      if (nextIndex < 0 || nextIndex >= flatTasks.length) return;\r\n\r\n      const nextTask = flatTasks[nextIndex];\r\n      onTaskSelect(nextTask.id, multiSelect);\r\n    },\r\n    [tasks, getFirstSelectedTask, flattenTasks, onTaskSelect]\r\n  );\r\n\r\n  // Handle keyboard shortcuts\r\n  const handleKeyDown = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      // Ignore if keyboard is disabled\r\n      if (!enableKeyboard) return;\r\n\r\n      // Ignore if user is typing in an input/textarea\r\n      const target = e.target as HTMLElement;\r\n      const isInputField =\r\n        target.tagName === 'INPUT' ||\r\n        target.tagName === 'TEXTAREA' ||\r\n        target.isContentEditable ||\r\n        isEditingRef.current;\r\n\r\n      if (isInputField) {\r\n        // Only allow Escape to cancel editing\r\n        if (e.key === 'Escape') {\r\n          target.blur();\r\n          isEditingRef.current = false;\r\n        }\r\n        return;\r\n      }\r\n\r\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n      const ctrlOrCmd = isMac ? e.metaKey : e.ctrlKey;\r\n      const selectedIds = Array.from(selectedTaskIds);\r\n      const selectedTask = getFirstSelectedTask();\r\n\r\n      // Navigation: Arrow Up/Down\r\n      if (e.key === 'ArrowUp') {\r\n        e.preventDefault();\r\n        handleNavigation('up', e.shiftKey);\r\n        return;\r\n      }\r\n      if (e.key === 'ArrowDown') {\r\n        e.preventDefault();\r\n        handleNavigation('down', e.shiftKey);\r\n        return;\r\n      }\r\n\r\n      // Expand/Collapse: Arrow Right/Left\r\n      if (selectedTask && (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) {\r\n        if (selectedTask.subtasks && selectedTask.subtasks.length > 0) {\r\n          e.preventDefault();\r\n          if (e.key === 'ArrowRight' && !selectedTask.isExpanded) {\r\n            onTaskToggleExpand(selectedTask.id);\r\n          } else if (e.key === 'ArrowLeft' && selectedTask.isExpanded) {\r\n            onTaskToggleExpand(selectedTask.id);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Move: Alt + Arrow Up/Down\r\n      if (e.altKey && (e.key === 'ArrowUp' || e.key === 'ArrowDown')) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskMove(selectedIds, e.key === 'ArrowUp' ? 'up' : 'down');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Indent: Tab\r\n      if (e.key === 'Tab' && !e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskIndent(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Outdent: Shift + Tab\r\n      if (e.key === 'Tab' && e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskOutdent(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Create below: Enter\r\n      if (e.key === 'Enter' && !e.shiftKey && !ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskCreate(selectedTask.id, 'below');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Create above: Shift + Enter\r\n      if (e.key === 'Enter' && e.shiftKey && !ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskCreate(selectedTask.id, 'above');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Open modal: Ctrl/Cmd + Enter\r\n      if (e.key === 'Enter' && ctrlOrCmd) {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onOpenTaskModal(selectedTask.id);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Rename: F2\r\n      if (e.key === 'F2') {\r\n        if (selectedTask) {\r\n          e.preventDefault();\r\n          onTaskRename(selectedTask.id);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Delete: Delete or Cmd/Ctrl + Backspace\r\n      if (e.key === 'Delete' || (e.key === 'Backspace' && ctrlOrCmd)) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskDelete(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Duplicate: Ctrl/Cmd + D\r\n      if (e.key === 'd' && ctrlOrCmd && !e.shiftKey) {\r\n        if (selectedIds.length > 0) {\r\n          e.preventDefault();\r\n          onTaskDuplicate(selectedIds);\r\n        }\r\n        return;\r\n      }\r\n    },\r\n    [\r\n      enableKeyboard,\r\n      selectedTaskIds,\r\n      getFirstSelectedTask,\r\n      handleNavigation,\r\n      onTaskCreate,\r\n      onTaskDelete,\r\n      onTaskDuplicate,\r\n      onTaskMove,\r\n      onTaskIndent,\r\n      onTaskOutdent,\r\n      onTaskRename,\r\n      onTaskToggleExpand,\r\n      onOpenTaskModal,\r\n    ]\r\n  );\r\n\r\n  // Register keyboard event listener\r\n  useEffect(() => {\r\n    if (!enableKeyboard) return;\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [enableKeyboard, handleKeyDown]);\r\n\r\n  return { setIsEditing };\r\n}\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport function useGanttSelection() {\r\n  const [selectedTaskIds, setSelectedTaskIds] = useState<Set<string>>(new Set());\r\n  const [lastSelectedId, setLastSelectedId] = useState<string | null>(null);\r\n\r\n  // Select a single task\r\n  const selectTask = useCallback((taskId: string) => {\r\n    setSelectedTaskIds(new Set([taskId]));\r\n    setLastSelectedId(taskId);\r\n  }, []);\r\n\r\n  // Toggle task selection (Ctrl/Cmd + Click)\r\n  const toggleTaskSelection = useCallback((taskId: string) => {\r\n    setSelectedTaskIds((prev) => {\r\n      const next = new Set(prev);\r\n      if (next.has(taskId)) {\r\n        next.delete(taskId);\r\n      } else {\r\n        next.add(taskId);\r\n      }\r\n      return next;\r\n    });\r\n    setLastSelectedId(taskId);\r\n  }, []);\r\n\r\n  // Select range (Shift + Click or Shift + Arrow)\r\n  const selectTaskRange = useCallback(\r\n    (taskId: string, flatTaskIds: string[]) => {\r\n      if (!lastSelectedId) {\r\n        selectTask(taskId);\r\n        return;\r\n      }\r\n\r\n      const lastIndex = flatTaskIds.indexOf(lastSelectedId);\r\n      const currentIndex = flatTaskIds.indexOf(taskId);\r\n\r\n      if (lastIndex === -1 || currentIndex === -1) {\r\n        selectTask(taskId);\r\n        return;\r\n      }\r\n\r\n      const start = Math.min(lastIndex, currentIndex);\r\n      const end = Math.max(lastIndex, currentIndex);\r\n      const rangeIds = flatTaskIds.slice(start, end + 1);\r\n\r\n      setSelectedTaskIds(new Set(rangeIds));\r\n      setLastSelectedId(taskId);\r\n    },\r\n    [lastSelectedId, selectTask]\r\n  );\r\n\r\n  // Handle task click with modifiers\r\n  const handleTaskClick = useCallback(\r\n    (taskId: string, flatTaskIds: string[], ctrlOrCmd: boolean, shift: boolean) => {\r\n      if (shift) {\r\n        selectTaskRange(taskId, flatTaskIds);\r\n      } else if (ctrlOrCmd) {\r\n        toggleTaskSelection(taskId);\r\n      } else {\r\n        selectTask(taskId);\r\n      }\r\n    },\r\n    [selectTask, toggleTaskSelection, selectTaskRange]\r\n  );\r\n\r\n  // Handle selection from keyboard\r\n  const handleKeyboardSelection = useCallback(\r\n    (taskId: string, multiSelect: boolean) => {\r\n      if (multiSelect) {\r\n        setSelectedTaskIds((prev) => {\r\n          const next = new Set(prev);\r\n          next.add(taskId);\r\n          return next;\r\n        });\r\n      } else {\r\n        selectTask(taskId);\r\n      }\r\n    },\r\n    [selectTask]\r\n  );\r\n\r\n  // Clear selection\r\n  const clearSelection = useCallback(() => {\r\n    setSelectedTaskIds(new Set());\r\n    setLastSelectedId(null);\r\n  }, []);\r\n\r\n  // Check if task is selected\r\n  const isTaskSelected = useCallback(\r\n    (taskId: string) => {\r\n      return selectedTaskIds.has(taskId);\r\n    },\r\n    [selectedTaskIds]\r\n  );\r\n\r\n  return {\r\n    selectedTaskIds,\r\n    selectTask,\r\n    toggleTaskSelection,\r\n    selectTaskRange,\r\n    handleTaskClick,\r\n    handleKeyboardSelection,\r\n    clearSelection,\r\n    isTaskSelected,\r\n  };\r\n}\r\n","import { Task } from './types';\r\n\r\n/**\r\n * Flatten tasks into a single array with level information\r\n */\r\nexport function flattenTasks(tasks: Task[]): Task[] {\r\n  const result: Task[] = [];\r\n  const traverse = (tasks: Task[], parentId?: string, level = 0) => {\r\n    for (let i = 0; i < tasks.length; i++) {\r\n      const task = { ...tasks[i], parentId, level, position: i };\r\n      result.push(task);\r\n      if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n        traverse(task.subtasks, task.id, level + 1);\r\n      }\r\n    }\r\n  };\r\n  traverse(tasks);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Find task by ID recursively\r\n */\r\nexport function findTask(tasks: Task[], taskId: string): Task | null {\r\n  for (const task of tasks) {\r\n    if (task.id === taskId) return task;\r\n    if (task.subtasks) {\r\n      const found = findTask(task.subtasks, taskId);\r\n      if (found) return found;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Find parent task by child ID\r\n */\r\nexport function findParentTask(tasks: Task[], childId: string): Task | null {\r\n  for (const task of tasks) {\r\n    if (task.subtasks) {\r\n      if (task.subtasks.some((t) => t.id === childId)) {\r\n        return task;\r\n      }\r\n      const found = findParentTask(task.subtasks, childId);\r\n      if (found) return found;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Indent tasks (make them children of the previous sibling)\r\n */\r\nexport function indentTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  // Get flat list to find positions\r\n  const flatTasks = flattenTasks(tasks);\r\n  const firstTaskId = taskIds[0];\r\n  const taskIndex = flatTasks.findIndex((t) => t.id === firstTaskId);\r\n\r\n  if (taskIndex <= 0) return tasks; // Can't indent first task\r\n\r\n  const targetParent = flatTasks[taskIndex - 1]; // Previous sibling becomes parent\r\n\r\n  // Helper to remove tasks from array\r\n  const removeTasks = (tasks: Task[], ids: Set<string>): { tasks: Task[]; removed: Task[] } => {\r\n    const removed: Task[] = [];\r\n    const filtered = tasks.filter((task) => {\r\n      if (ids.has(task.id)) {\r\n        removed.push(task);\r\n        return false;\r\n      }\r\n      if (task.subtasks) {\r\n        const result = removeTasks(task.subtasks, ids);\r\n        task.subtasks = result.tasks;\r\n        removed.push(...result.removed);\r\n      }\r\n      return true;\r\n    });\r\n    return { tasks: filtered, removed };\r\n  };\r\n\r\n  // Helper to add tasks as children\r\n  const addAsChildren = (tasks: Task[], parentId: string, children: Task[]): Task[] => {\r\n    return tasks.map((task) => {\r\n      if (task.id === parentId) {\r\n        return {\r\n          ...task,\r\n          subtasks: [...(task.subtasks || []), ...children],\r\n          isExpanded: true, // Auto-expand when adding children\r\n        };\r\n      }\r\n      if (task.subtasks) {\r\n        return { ...task, subtasks: addAsChildren(task.subtasks, parentId, children) };\r\n      }\r\n      return task;\r\n    });\r\n  };\r\n\r\n  const idsSet = new Set(taskIds);\r\n  const { tasks: filtered, removed } = removeTasks(tasks, idsSet);\r\n  return addAsChildren(filtered, targetParent.id, removed);\r\n}\r\n\r\n/**\r\n * Outdent tasks (move them up one level in hierarchy)\r\n */\r\nexport function outdentTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  const result = [...tasks];\r\n\r\n  for (const taskId of taskIds) {\r\n    const parent = findParentTask(result, taskId);\r\n    if (!parent) continue; // Already root level\r\n\r\n    const grandparent = findParentTask(result, parent.id);\r\n\r\n    // Helper to remove task from parent\r\n    const removeFromParent = (tasks: Task[], parentId: string, taskId: string): Task | null => {\r\n      for (let i = 0; i < tasks.length; i++) {\r\n        const task = tasks[i];\r\n        if (task.id === parentId && task.subtasks) {\r\n          const taskIndex = task.subtasks.findIndex((t) => t.id === taskId);\r\n          if (taskIndex !== -1) {\r\n            const [removed] = task.subtasks.splice(taskIndex, 1);\r\n            return removed;\r\n          }\r\n        }\r\n        if (task.subtasks) {\r\n          const removed = removeFromParent(task.subtasks, parentId, taskId);\r\n          if (removed) return removed;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Helper to insert task after parent\r\n    const insertAfterTask = (tasks: Task[], afterId: string, task: Task): Task[] => {\r\n      const index = tasks.findIndex((t) => t.id === afterId);\r\n      if (index !== -1) {\r\n        tasks.splice(index + 1, 0, task);\r\n        return tasks;\r\n      }\r\n      for (const t of tasks) {\r\n        if (t.subtasks) {\r\n          insertAfterTask(t.subtasks, afterId, task);\r\n        }\r\n      }\r\n      return tasks;\r\n    };\r\n\r\n    const removed = removeFromParent(result, parent.id, taskId);\r\n    if (removed) {\r\n      if (grandparent && grandparent.subtasks) {\r\n        // Move to grandparent's children after parent\r\n        insertAfterTask(grandparent.subtasks, parent.id, removed);\r\n      } else {\r\n        // Move to root level after parent\r\n        insertAfterTask(result, parent.id, removed);\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Move tasks up or down within their level\r\n */\r\nexport function moveTasks(tasks: Task[], taskIds: string[], direction: 'up' | 'down'): Task[] {\r\n  if (taskIds.length === 0) return tasks;\r\n\r\n  const result = [...tasks];\r\n  const firstTaskId = taskIds[0];\r\n\r\n  // Helper to move task within array\r\n  const moveInArray = (tasks: Task[], taskId: string, direction: 'up' | 'down'): boolean => {\r\n    const index = tasks.findIndex((t) => t.id === taskId);\r\n    if (index === -1) {\r\n      // Try in subtasks\r\n      for (const task of tasks) {\r\n        if (task.subtasks && moveInArray(task.subtasks, taskId, direction)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const newIndex = direction === 'up' ? index - 1 : index + 1;\r\n    if (newIndex < 0 || newIndex >= tasks.length) return false;\r\n\r\n    // Swap tasks\r\n    [tasks[index], tasks[newIndex]] = [tasks[newIndex], tasks[index]];\r\n    return true;\r\n  };\r\n\r\n  moveInArray(result, firstTaskId, direction);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Delete tasks by IDs\r\n */\r\nexport function deleteTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  const idsSet = new Set(taskIds);\r\n\r\n  const filterTasks = (tasks: Task[]): Task[] => {\r\n    return tasks\r\n      .filter((task) => !idsSet.has(task.id))\r\n      .map((task) => {\r\n        if (task.subtasks) {\r\n          return { ...task, subtasks: filterTasks(task.subtasks) };\r\n        }\r\n        return task;\r\n      });\r\n  };\r\n\r\n  return filterTasks(tasks);\r\n}\r\n\r\n/**\r\n * Duplicate tasks\r\n */\r\nexport function duplicateTasks(tasks: Task[], taskIds: string[]): Task[] {\r\n  const result = [...tasks];\r\n\r\n  for (const taskId of taskIds) {\r\n    const duplicateTask = (tasks: Task[]): boolean => {\r\n      const index = tasks.findIndex((t) => t.id === taskId);\r\n      if (index === -1) {\r\n        // Try in subtasks\r\n        for (const task of tasks) {\r\n          if (task.subtasks && duplicateTask(task.subtasks)) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n\r\n      const original = tasks[index];\r\n      const copy = {\r\n        ...original,\r\n        id: `${original.id}-copy-${Date.now()}`,\r\n        name: `${original.name} (Copy)`,\r\n        subtasks: original.subtasks ? duplicateSubtasks(original.subtasks) : undefined,\r\n      };\r\n\r\n      tasks.splice(index + 1, 0, copy);\r\n      return true;\r\n    };\r\n\r\n    const duplicateSubtasks = (subtasks: Task[]): Task[] => {\r\n      return subtasks.map((task) => ({\r\n        ...task,\r\n        id: `${task.id}-copy-${Date.now()}`,\r\n        subtasks: task.subtasks ? duplicateSubtasks(task.subtasks) : undefined,\r\n      }));\r\n    };\r\n\r\n    duplicateTask(result);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Create a new task\r\n * v0.11.0: New tasks start with default blue color\r\n */\r\nexport function createTask(\r\n  tasks: Task[],\r\n  afterTaskId: string,\r\n  direction: 'above' | 'below'\r\n): { tasks: Task[]; newTask: Task } {\r\n  const result = [...tasks];\r\n  const today = new Date();\r\n  const weekFromNow = new Date(today);\r\n  weekFromNow.setDate(weekFromNow.getDate() + 7);\r\n\r\n  const newTask: Task = {\r\n    id: `task-${Date.now()}`,\r\n    name: 'New Task',\r\n    progress: 0,\r\n    status: 'todo',\r\n    startDate: today,\r\n    endDate: weekFromNow,\r\n    color: '#6366F1', // v0.11.0: Default blue pastel color\r\n  };\r\n\r\n  const insertTask = (tasks: Task[]): boolean => {\r\n    const index = tasks.findIndex((t) => t.id === afterTaskId);\r\n    if (index === -1) {\r\n      // Try in subtasks\r\n      for (const task of tasks) {\r\n        if (task.subtasks && insertTask(task.subtasks)) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const insertIndex = direction === 'above' ? index : index + 1;\r\n    tasks.splice(insertIndex, 0, newTask);\r\n    return true;\r\n  };\r\n\r\n  insertTask(result);\r\n  return { tasks: result, newTask };\r\n}\r\n\r\n/**\r\n * Rename a task\r\n */\r\nexport function renameTask(tasks: Task[], taskId: string, newName: string): Task[] {\r\n  return tasks.map((task) => {\r\n    if (task.id === taskId) {\r\n      return { ...task, name: newName };\r\n    }\r\n    if (task.subtasks) {\r\n      return { ...task, subtasks: renameTask(task.subtasks, taskId, newName) };\r\n    }\r\n    return task;\r\n  });\r\n}\r\n\r\n/**\r\n * Toggle task expansion\r\n */\r\nexport function toggleTaskExpansion(tasks: Task[], taskId: string): Task[] {\r\n  return tasks.map((task) => {\r\n    if (task.id === taskId) {\r\n      return { ...task, isExpanded: !task.isExpanded };\r\n    }\r\n    if (task.subtasks) {\r\n      return { ...task, subtasks: toggleTaskExpansion(task.subtasks, taskId) };\r\n    }\r\n    return task;\r\n  });\r\n}\r\n\r\n/**\r\n * Create a subtask for a parent task\r\n * v0.11.0: Subtasks inherit parent color\r\n */\r\nexport function createSubtask(\r\n  tasks: Task[],\r\n  parentTaskId: string\r\n): { tasks: Task[]; newTask: Task } {\r\n  // Find parent task to inherit properties\r\n  const findParent = (tasks: Task[]): Task | null => {\r\n    for (const task of tasks) {\r\n      if (task.id === parentTaskId) return task;\r\n      if (task.subtasks) {\r\n        const found = findParent(task.subtasks);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const parentTask = findParent(tasks);\r\n\r\n  // v0.16.7: Inherit dates from parent task (subtask should fit within parent)\r\n  // If parent has dates, use them. Otherwise fall back to today + 7 days\r\n  const today = new Date();\r\n  const weekFromNow = new Date(today);\r\n  weekFromNow.setDate(weekFromNow.getDate() + 7);\r\n\r\n  const startDate = parentTask?.startDate || today;\r\n  const endDate = parentTask?.endDate || weekFromNow;\r\n\r\n  const newTask: Task = {\r\n    id: `task-${Date.now()}`,\r\n    name: 'New Subtask',\r\n    progress: 0,\r\n    status: 'todo',\r\n    startDate: new Date(startDate), // Clone to avoid reference issues\r\n    endDate: new Date(endDate),     // Clone to avoid reference issues\r\n    color: parentTask?.color || '#3B82F6', // v0.16.7: Inherit parent color (default: electric blue)\r\n  };\r\n\r\n  const addSubtask = (tasks: Task[]): Task[] => {\r\n    return tasks.map((task) => {\r\n      if (task.id === parentTaskId) {\r\n        // Add subtask to the end of existing subtasks\r\n        const subtasks = task.subtasks || [];\r\n        return {\r\n          ...task,\r\n          subtasks: [...subtasks, newTask],\r\n          isExpanded: true, // Auto-expand parent to show new subtask\r\n        };\r\n      }\r\n      if (task.subtasks) {\r\n        return { ...task, subtasks: addSubtask(task.subtasks) };\r\n      }\r\n      return task;\r\n    });\r\n  };\r\n\r\n  return { tasks: addSubtask(tasks), newTask };\r\n}\r\n\r\n/**\r\n * v0.17.68: Reparent a task - move it to become a child of another task\r\n * This allows dragging subtasks between different parent tasks\r\n *\r\n * @param tasks - The task tree\r\n * @param taskId - The ID of the task to move\r\n * @param newParentId - The ID of the new parent task (null to move to root level)\r\n * @param position - Optional position index within the new parent's subtasks\r\n * @returns Updated task tree\r\n */\r\nexport function reparentTask(\r\n  tasks: Task[],\r\n  taskId: string,\r\n  newParentId: string | null,\r\n  position?: number\r\n): Task[] {\r\n  // Prevent moving a task to itself\r\n  if (taskId === newParentId) return tasks;\r\n\r\n  // Find the task to move\r\n  const taskToMove = findTask(tasks, taskId);\r\n  if (!taskToMove) return tasks;\r\n\r\n  // Prevent moving a parent to its own descendant (would create circular reference)\r\n  if (newParentId) {\r\n    const isDescendant = (parentTask: Task, childId: string): boolean => {\r\n      if (!parentTask.subtasks) return false;\r\n      for (const subtask of parentTask.subtasks) {\r\n        if (subtask.id === childId) return true;\r\n        if (isDescendant(subtask, childId)) return true;\r\n      }\r\n      return false;\r\n    };\r\n    if (isDescendant(taskToMove, newParentId)) return tasks;\r\n  }\r\n\r\n  // Step 1: Remove the task from its current location\r\n  const removeTask = (taskList: Task[]): Task[] => {\r\n    return taskList\r\n      .filter((t) => t.id !== taskId)\r\n      .map((t) => {\r\n        if (t.subtasks && t.subtasks.length > 0) {\r\n          return { ...t, subtasks: removeTask(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n  };\r\n\r\n  let result = removeTask(tasks);\r\n\r\n  // Step 2: Add the task to its new location\r\n  if (newParentId === null) {\r\n    // Move to root level\r\n    const insertPos = position !== undefined ? position : result.length;\r\n    result.splice(insertPos, 0, { ...taskToMove, parentId: undefined });\r\n  } else {\r\n    // Move to be a child of newParentId\r\n    const addToParent = (taskList: Task[]): Task[] => {\r\n      return taskList.map((t) => {\r\n        if (t.id === newParentId) {\r\n          const subtasks = t.subtasks || [];\r\n          const insertPos = position !== undefined ? position : subtasks.length;\r\n          const newSubtasks = [...subtasks];\r\n          newSubtasks.splice(insertPos, 0, { ...taskToMove, parentId: newParentId });\r\n          return {\r\n            ...t,\r\n            subtasks: newSubtasks,\r\n            isExpanded: true, // Auto-expand to show the moved task\r\n          };\r\n        }\r\n        if (t.subtasks && t.subtasks.length > 0) {\r\n          return { ...t, subtasks: addToParent(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n    result = addToParent(result);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * v0.17.68: Check if a task can be reparented to a new parent\r\n * Returns false if the move would create a circular reference\r\n */\r\nexport function canReparent(\r\n  tasks: Task[],\r\n  taskId: string,\r\n  newParentId: string | null\r\n): boolean {\r\n  // Can always move to root\r\n  if (newParentId === null) return true;\r\n\r\n  // Can't be parent of itself\r\n  if (taskId === newParentId) return false;\r\n\r\n  // Find the task\r\n  const task = findTask(tasks, taskId);\r\n  if (!task) return false;\r\n\r\n  // Check if newParentId is a descendant of taskId (would create circular ref)\r\n  const isDescendant = (parentTask: Task, childId: string): boolean => {\r\n    if (!parentTask.subtasks) return false;\r\n    for (const subtask of parentTask.subtasks) {\r\n      if (subtask.id === childId) return true;\r\n      if (isDescendant(subtask, childId)) return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  return !isDescendant(task, newParentId);\r\n}\r\n","import { useState, useEffect, useRef, useContext } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { ChevronDown, ChevronRight, ChevronLeft, Plus, Edit3, GripVertical, Calendar, Keyboard } from 'lucide-react';\r\nimport { Task, GanttColumn, ColumnType, GanttTemplates } from './types';\r\nimport { motion } from 'framer-motion';\r\nimport { ColumnManager } from './ColumnManager'; // v0.17.215: Back with sticky positioning\r\nimport { ContextMenu, ContextMenuItem, MenuIcons } from './ContextMenu';\r\nimport { useGanttKeyboard } from './useGanttKeyboard';\r\nimport { useGanttSelection } from './useGanttSelection';\r\nimport { flattenTasks as flattenTasksUtil } from './hierarchyUtils';\r\nimport { UserAssignmentSelector } from '../Card/UserAssignmentSelector';\r\nimport { StatusSelector } from '../Card/StatusSelector';\r\nimport { PrioritySelector } from '../Card/PrioritySelector'; // v0.17.29\r\nimport { GanttI18nContext } from './GanttI18nContext';\r\nimport type { User } from '../Card/UserAssignmentSelector';\r\n\r\ninterface TaskGridProps {\r\n  tasks: Task[];\r\n  theme: any;\r\n  rowHeight: number;\r\n  availableUsers?: Array<{ id: string; name: string; initials: string; color: string }>;\r\n  templates: Required<GanttTemplates>; // v0.8.0\r\n  onTaskClick?: (task: Task) => void;\r\n  onTaskDblClick?: (task: Task) => void; // v0.8.0\r\n  onTaskContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\r\n  onTaskToggle?: (taskId: string) => void;\r\n  scrollTop: number;\r\n  columns: GanttColumn[];\r\n  onToggleColumn: (columnType: ColumnType) => void;\r\n  onColumnResize?: (columnId: ColumnType, newWidth: number) => void; // v0.13.8\r\n  onTaskUpdate?: (taskId: string, updates: Partial<Task>) => void;\r\n\r\n  // Hierarchy handlers\r\n  onTaskIndent?: (taskIds: string[]) => void;\r\n  onTaskOutdent?: (taskIds: string[]) => void;\r\n  onTaskMove?: (taskIds: string[], direction: 'up' | 'down') => void;\r\n  onMultiTaskDelete?: (taskIds: string[]) => void;\r\n  onTaskDuplicate?: (taskIds: string[]) => void;\r\n  onTaskCreate?: (afterTaskId: string, direction: 'above' | 'below') => void;\r\n  onTaskRename?: (taskId: string, newName: string) => void;\r\n  onCreateSubtask?: (parentTaskId: string) => void;\r\n  onOpenTaskModal?: (task: Task) => void;\r\n  // v0.17.34: Delete confirmation request (shows modal instead of deleting directly)\r\n  onDeleteRequest?: (taskId: string, taskName: string) => void;\r\n  // v0.17.68: Reparent task via drag & drop\r\n  onTaskReparent?: (taskId: string, newParentId: string | null, position?: number) => void;\r\n}\r\n\r\nexport function TaskGrid({\r\n  tasks,\r\n  theme,\r\n  rowHeight: ROW_HEIGHT,\r\n  availableUsers = [],\r\n  templates: _templates, // TODO: Use templates for custom rendering\r\n  onTaskClick,\r\n  onTaskDblClick, // v0.8.0\r\n  onTaskContextMenu, // v0.8.0\r\n  onTaskToggle,\r\n  scrollTop: _scrollTop,\r\n  columns,\r\n  onToggleColumn,\r\n  onColumnResize,\r\n  onTaskUpdate,\r\n  onTaskIndent,\r\n  onTaskOutdent,\r\n  onTaskMove,\r\n  onMultiTaskDelete,\r\n  onTaskDuplicate,\r\n  onTaskCreate,\r\n  onTaskRename,\r\n  onCreateSubtask,\r\n  onOpenTaskModal,\r\n  onDeleteRequest, // v0.17.34\r\n  onTaskReparent, // v0.17.68\r\n}: TaskGridProps) {\r\n  // v0.16.2: Get translations from context\r\n  const translations = useContext(GanttI18nContext);\r\n\r\n  const [hoveredTaskId, setHoveredTaskId] = useState<string | null>(null);\r\n  const [editingTaskId, setEditingTaskId] = useState<string | null>(null);\r\n  const [editingTaskName, setEditingTaskName] = useState('');\r\n  const editInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // v0.13.8: Column resize state\r\n  const [resizingColumn, setResizingColumn] = useState<ColumnType | null>(null);\r\n  const [resizeStartX, setResizeStartX] = useState(0);\r\n  const [resizeStartWidth, setResizeStartWidth] = useState(0);\r\n  const [contextMenu, setContextMenu] = useState<{\r\n    isOpen: boolean;\r\n    x: number;\r\n    y: number;\r\n    type: 'header' | 'task';\r\n    columnId?: ColumnType;\r\n    task?: Task;\r\n  }>({\r\n    isOpen: false,\r\n    x: 0,\r\n    y: 0,\r\n    type: 'header',\r\n  });\r\n\r\n  // v0.17.68: Drag & drop state for reparenting tasks\r\n  const [draggedTaskId, setDraggedTaskId] = useState<string | null>(null);\r\n  const [dropTargetTaskId, setDropTargetTaskId] = useState<string | null>(null);\r\n  const [dropPosition, setDropPosition] = useState<'above' | 'below' | 'child' | null>(null);\r\n  const dragStartY = useRef<number>(0);\r\n  const dragThreshold = 5; // Minimum pixels to move before drag starts\r\n  const isDraggingRef = useRef<boolean>(false);\r\n  // v0.17.146: Ghost position for drag preview + isDragging state for re-render\r\n  const [ghostPosition, setGhostPosition] = useState<{ x: number; y: number } | null>(null);\r\n  const [isDraggingState, setIsDraggingState] = useState(false);\r\n\r\n  // v0.17.132: Date picker state for column cells\r\n  const [datePickerState, setDatePickerState] = useState<{\r\n    taskId: string;\r\n    field: 'startDate' | 'endDate';\r\n    month: Date;\r\n    position: { top: number; left: number };\r\n  } | null>(null);\r\n\r\n  // v0.17.215: Keyboard shortcuts with sticky positioning - always visible\r\n  const [showKeyboardHelp, setShowKeyboardHelp] = useState(false);\r\n  const keyboardHelpRef = useRef<HTMLDivElement>(null);\r\n\r\n  // v0.17.215: Close keyboard help when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (keyboardHelpRef.current && !keyboardHelpRef.current.contains(event.target as Node)) {\r\n        setShowKeyboardHelp(false);\r\n      }\r\n    }\r\n    if (showKeyboardHelp) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return undefined;\r\n  }, [showKeyboardHelp]);\r\n\r\n  // Focus input when editing starts\r\n  useEffect(() => {\r\n    if (editingTaskId && editInputRef.current) {\r\n      editInputRef.current.focus();\r\n      editInputRef.current.select();\r\n    }\r\n  }, [editingTaskId]);\r\n\r\n  // v0.13.8: Handle column resize mouse events\r\n  useEffect(() => {\r\n    if (!resizingColumn) return;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const deltaX = e.clientX - resizeStartX;\r\n      const newWidth = resizeStartWidth + deltaX;\r\n      onColumnResize?.(resizingColumn, newWidth);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setResizingColumn(null);\r\n      document.body.style.cursor = '';\r\n      document.body.style.userSelect = '';\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n    document.body.style.cursor = 'col-resize';\r\n    document.body.style.userSelect = 'none';\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n      document.body.style.cursor = '';\r\n      document.body.style.userSelect = '';\r\n    };\r\n  }, [resizingColumn, resizeStartX, resizeStartWidth, onColumnResize]);\r\n\r\n  // Multi-selection hook\r\n  const {\r\n    selectedTaskIds,\r\n    handleTaskClick: handleSelectionClick,\r\n    isTaskSelected,\r\n  } = useGanttSelection();\r\n\r\n  // Keyboard shortcuts hook\r\n  const { setIsEditing } = useGanttKeyboard({\r\n    tasks,\r\n    selectedTaskIds,\r\n    onTaskSelect: (taskId: string, multiSelect?: boolean) => {\r\n      const flatTasks = flattenTasksUtil(tasks);\r\n      const flatTaskIds = flatTasks.map(t => t.id);\r\n      handleSelectionClick(taskId, flatTaskIds, multiSelect || false, false);\r\n    },\r\n    onTaskCreate: onTaskCreate || (() => {}),\r\n    onTaskDelete: onMultiTaskDelete || (() => {}),\r\n    onTaskDuplicate: onTaskDuplicate || (() => {}),\r\n    onTaskMove: onTaskMove || (() => {}),\r\n    onTaskIndent: onTaskIndent || (() => {}),\r\n    onTaskOutdent: onTaskOutdent || (() => {}),\r\n    onTaskRename: (taskId: string) => {\r\n      // Start inline rename when F2 is pressed\r\n      const task = flattenTasksUtil(tasks).find(t => t.id === taskId);\r\n      if (task) {\r\n        handleRenameStart(task);\r\n      }\r\n    },\r\n    onTaskToggleExpand: onTaskToggle || (() => {}),\r\n    onOpenTaskModal: (taskId: string) => {\r\n      const task = flattenTasksUtil(tasks).find(t => t.id === taskId);\r\n      if (task && onOpenTaskModal) {\r\n        onOpenTaskModal(task);\r\n      }\r\n    },\r\n    enableKeyboard: true,\r\n  });\r\n\r\n  const flattenTasks = (tasks: Task[], level = 0): Array<{ task: Task; level: number }> => {\r\n    const result: Array<{ task: Task; level: number }> = [];\r\n    \r\n    for (const task of tasks) {\r\n      result.push({ task, level });\r\n      if (task.subtasks && task.subtasks.length > 0 && task.isExpanded) {\r\n        result.push(...flattenTasks(task.subtasks, level + 1));\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  };\r\n\r\n  const flatTasks = flattenTasks(tasks);\r\n  const HEADER_HEIGHT = 48;\r\n\r\n  // v0.17.221: Calculate content height to match Timeline exactly\r\n  // This ensures proper scroll sync without content cutoff\r\n  const contentHeight = Math.max(flatTasks.length * ROW_HEIGHT, 600 - HEADER_HEIGHT);\r\n\r\n  // Calculate duration\r\n  const getDuration = (task: Task) => {\r\n    if (!task.startDate || !task.endDate) return '-';\r\n    const days = Math.ceil((task.endDate.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    return `${days}d`;\r\n  };\r\n\r\n  // Handle rename start\r\n  const handleRenameStart = (task: Task) => {\r\n    setEditingTaskId(task.id);\r\n    setEditingTaskName(task.name);\r\n    setIsEditing(true);\r\n  };\r\n\r\n  // Handle rename save\r\n  const handleRenameSave = (taskId: string) => {\r\n    if (editingTaskName.trim() && editingTaskName !== tasks.find(t => t.id === taskId)?.name) {\r\n      onTaskRename?.(taskId, editingTaskName.trim());\r\n    }\r\n    setEditingTaskId(null);\r\n    setEditingTaskName('');\r\n    setIsEditing(false);\r\n  };\r\n\r\n  // Handle rename cancel\r\n  const handleRenameCancel = () => {\r\n    setEditingTaskId(null);\r\n    setEditingTaskName('');\r\n    setIsEditing(false);\r\n  };\r\n\r\n  // Handle create subtask\r\n  const handleCreateSubtaskClick = (task: Task, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    // Create subtask at the end of parent's children\r\n    onCreateSubtask?.(task.id);\r\n  };\r\n\r\n  // v0.17.68: Drag handlers for reparenting\r\n  const handleDragStart = (taskId: string, e: React.MouseEvent) => {\r\n    // Only start drag from the drag handle area\r\n    e.preventDefault();\r\n    dragStartY.current = e.clientY;\r\n    setDraggedTaskId(taskId);\r\n    isDraggingRef.current = false;\r\n    setIsDraggingState(false);\r\n    // v0.17.146: Initialize ghost position\r\n    setGhostPosition({ x: e.clientX, y: e.clientY });\r\n  };\r\n\r\n  const handleDragMove = (e: MouseEvent) => {\r\n    if (!draggedTaskId) return;\r\n\r\n    const deltaY = Math.abs(e.clientY - dragStartY.current);\r\n    if (deltaY > dragThreshold && !isDraggingRef.current) {\r\n      isDraggingRef.current = true;\r\n      setIsDraggingState(true);\r\n    }\r\n\r\n    // v0.17.146: Update ghost position\r\n    setGhostPosition({ x: e.clientX, y: e.clientY });\r\n\r\n    if (!isDraggingRef.current) return;\r\n\r\n    // Find which task we're hovering over\r\n    const rows = document.querySelectorAll('[data-task-row]');\r\n    let foundTarget: string | null = null;\r\n    let position: 'above' | 'below' | 'child' | null = null;\r\n\r\n    rows.forEach((row) => {\r\n      const rect = row.getBoundingClientRect();\r\n      const taskId = row.getAttribute('data-task-row');\r\n\r\n      if (taskId && taskId !== draggedTaskId && e.clientY >= rect.top && e.clientY <= rect.bottom) {\r\n        foundTarget = taskId;\r\n\r\n        // Determine drop position based on Y position within the row\r\n        const relativeY = e.clientY - rect.top;\r\n        const rowHeight = rect.height;\r\n\r\n        if (relativeY < rowHeight * 0.25) {\r\n          position = 'above';\r\n        } else if (relativeY > rowHeight * 0.75) {\r\n          position = 'below';\r\n        } else {\r\n          // Middle zone = make it a child\r\n          position = 'child';\r\n        }\r\n      }\r\n    });\r\n\r\n    setDropTargetTaskId(foundTarget);\r\n    setDropPosition(position);\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    if (isDraggingRef.current && draggedTaskId && dropTargetTaskId && dropPosition) {\r\n      // Determine the new parent and position\r\n      if (dropPosition === 'child') {\r\n        // Make it a child of the target task\r\n        onTaskReparent?.(draggedTaskId, dropTargetTaskId);\r\n      } else if (dropPosition === 'above' || dropPosition === 'below') {\r\n        // Find the parent of the target task\r\n        const findParent = (tasks: Task[], targetId: string, parent: string | null = null): string | null => {\r\n          for (const t of tasks) {\r\n            if (t.id === targetId) return parent;\r\n            if (t.subtasks) {\r\n              const found = findParent(t.subtasks, targetId, t.id);\r\n              if (found !== undefined) return found;\r\n            }\r\n          }\r\n          return undefined as unknown as string | null;\r\n        };\r\n\r\n        const targetParent = findParent(tasks, dropTargetTaskId, null);\r\n\r\n        // Find position within siblings\r\n        const findPositionInSiblings = (taskList: Task[], targetId: string): number => {\r\n          const idx = taskList.findIndex(t => t.id === targetId);\r\n          return dropPosition === 'below' ? idx + 1 : idx;\r\n        };\r\n\r\n        if (targetParent === null) {\r\n          // Target is at root level\r\n          const pos = findPositionInSiblings(tasks, dropTargetTaskId);\r\n          onTaskReparent?.(draggedTaskId, null, pos);\r\n        } else {\r\n          // Target has a parent\r\n          const parentTask = flatTasks.find(ft => ft.task.id === targetParent)?.task;\r\n          if (parentTask?.subtasks) {\r\n            const pos = findPositionInSiblings(parentTask.subtasks, dropTargetTaskId);\r\n            onTaskReparent?.(draggedTaskId, targetParent, pos);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Reset drag state\r\n    setDraggedTaskId(null);\r\n    setDropTargetTaskId(null);\r\n    setDropPosition(null);\r\n    setGhostPosition(null); // v0.17.146: Clear ghost\r\n    isDraggingRef.current = false;\r\n    setIsDraggingState(false);\r\n  };\r\n\r\n  // v0.17.68: Set up global drag listeners\r\n  useEffect(() => {\r\n    if (draggedTaskId) {\r\n      document.addEventListener('mousemove', handleDragMove);\r\n      document.addEventListener('mouseup', handleDragEnd);\r\n      document.body.style.cursor = 'grabbing';\r\n      document.body.style.userSelect = 'none';\r\n\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleDragMove);\r\n        document.removeEventListener('mouseup', handleDragEnd);\r\n        document.body.style.cursor = '';\r\n        document.body.style.userSelect = '';\r\n      };\r\n    }\r\n    return undefined;\r\n  }, [draggedTaskId, dropTargetTaskId, dropPosition]);\r\n\r\n  // Render cell content based on column type\r\n  const renderCellContent = (column: GanttColumn, task: Task, level: number) => {\r\n    switch (column.id) {\r\n      case 'name':\r\n        const isEditing = editingTaskId === task.id;\r\n        const isHovered = hoveredTaskId === task.id;\r\n\r\n        return (\r\n          <div className=\"flex items-center gap-2 flex-1 min-w-0 relative\" style={{ paddingLeft: `${level * 20}px` }}>\r\n            {/* v0.17.68: Drag handle for reparenting - always visible, more prominent on hover */}\r\n            {onTaskReparent && (\r\n              <div\r\n                className=\"cursor-grab active:cursor-grabbing p-0.5 rounded hover:bg-white/10 transition-all flex-shrink-0\"\r\n                style={{\r\n                  color: theme.textTertiary,\r\n                  opacity: isHovered ? 1 : 0.3,\r\n                }}\r\n                onMouseDown={(e) => handleDragStart(task.id, e)}\r\n                title=\"Arrastrar para mover tarea\"\r\n              >\r\n                <GripVertical className=\"w-4 h-4\" />\r\n              </div>\r\n            )}\r\n\r\n            {/* Expand/Collapse Button OR Color Indicator - same position for alignment */}\r\n            {task.subtasks && task.subtasks.length > 0 ? (\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onTaskToggle?.(task.id);\r\n                }}\r\n                className=\"p-0.5 hover:bg-opacity-10 rounded transition-colors flex-shrink-0\"\r\n                style={{ color: theme.textSecondary }}\r\n              >\r\n                {task.isExpanded ? (\r\n                  <ChevronDown className=\"w-4 h-4\" />\r\n                ) : (\r\n                  <ChevronRight className=\"w-4 h-4\" />\r\n                )}\r\n              </button>\r\n            ) : (\r\n              /* v0.17.183: Color dot in same position as chevron for perfect alignment */\r\n              <div className=\"w-5 h-5 flex-shrink-0 flex items-center justify-center\">\r\n                <div\r\n                  className=\"w-3 h-3 rounded-full border\"\r\n                  style={{\r\n                    backgroundColor: task.color || '#3B82F6',\r\n                    opacity: task.parentId ? 0.6 : 1, // Subtasks more transparent\r\n                    borderColor: task.isMilestone ? theme.accent : 'transparent',\r\n                    borderWidth: task.isMilestone ? '2px' : '0px',\r\n                  }}\r\n                  title={task.isMilestone ? 'Milestone' : task.parentId ? 'Subtask' : 'Task'}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Task Name or Input */}\r\n            {isEditing ? (\r\n              <input\r\n                ref={editInputRef}\r\n                type=\"text\"\r\n                value={editingTaskName}\r\n                onChange={(e) => setEditingTaskName(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter') {\r\n                    handleRenameSave(task.id);\r\n                  } else if (e.key === 'Escape') {\r\n                    handleRenameCancel();\r\n                  }\r\n                }}\r\n                onBlur={() => handleRenameSave(task.id)}\r\n                className=\"flex-1 px-2 py-1 rounded border outline-none\"\r\n                style={{\r\n                  backgroundColor: theme.bgPrimary,\r\n                  borderColor: theme.accent,\r\n                  color: theme.textPrimary,\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  fontSize: '13px',\r\n                  fontWeight: 500,\r\n                }}\r\n                onClick={(e) => e.stopPropagation()}\r\n              />\r\n            ) : (\r\n              <>\r\n                <span\r\n                  className=\"flex-1\"\r\n                  style={{\r\n                    // v0.17.72: Enhanced visual hierarchy - Root tasks (level 0) are always \"phases\"\r\n                    // Root tasks (no parentId): Pure primary color, heavier weight - even without children\r\n                    // Subtasks (has parentId): Secondary color, lighter weight\r\n                    // This ensures master tasks look prominent even before adding children\r\n                    color: !task.parentId\r\n                      ? theme.textPrimary  // Root/Master: Brightest (#FFFFFF dark / #0F172A light)\r\n                      : theme.textSecondary,  // Subtasks: Muted (#CBD5E1 dark / #334155 light)\r\n                    fontFamily: 'Inter, sans-serif',\r\n                    fontSize: !task.parentId\r\n                      ? '14px'  // Root/Master: Slightly larger\r\n                      : '13px',  // Subtasks: Normal size\r\n                    // v0.17.72: Font weight based on hierarchy level, not children count\r\n                    fontWeight: task.isMilestone\r\n                      ? 600  // Milestones: Semibold (most important)\r\n                      : !task.parentId\r\n                        ? 600  // Root/Master: Semibold - always \"jump\" to view\r\n                        : 400,  // Subtasks: Normal weight\r\n                    letterSpacing: !task.parentId\r\n                      ? '-0.01em'  // Root/Master: Tighter tracking for headers\r\n                      : '0',\r\n                  }}\r\n                  title={task.name} // v0.13.8: Show full name on hover tooltip\r\n                >\r\n                  {task.name}\r\n                </span>\r\n\r\n                {/* Hover Action Buttons */}\r\n                {isHovered && !isEditing && (\r\n                  <div className=\"flex items-center gap-1 ml-2\" onClick={(e) => e.stopPropagation()}>\r\n                    {/* Create Subtask Button */}\r\n                    <button\r\n                      onClick={(e) => handleCreateSubtaskClick(task, e)}\r\n                      className=\"p-1 rounded hover:bg-opacity-20 transition-colors\"\r\n                      style={{\r\n                        color: theme.textTertiary,\r\n                        backgroundColor: 'transparent'\r\n                      }}\r\n                      title=\"Create subtask\"\r\n                    >\r\n                      <Plus className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n\r\n                    {/* Rename Button */}\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleRenameStart(task);\r\n                      }}\r\n                      className=\"p-1 rounded hover:bg-opacity-20 transition-colors\"\r\n                      style={{\r\n                        color: theme.textTertiary,\r\n                        backgroundColor: 'transparent'\r\n                      }}\r\n                      title=\"Rename (F2)\"\r\n                    >\r\n                      <Edit3 className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        );\r\n      \r\n      case 'startDate':\r\n      case 'endDate':\r\n        const isStartDate = column.id === 'startDate';\r\n        const dateField = isStartDate ? 'startDate' : 'endDate';\r\n        const dateValue = task[dateField];\r\n        const isDatePickerOpen = datePickerState?.taskId === task.id && datePickerState?.field === dateField;\r\n\r\n        const formatDisplayDate = (date: Date | string | undefined) => {\r\n          if (!date) return '-';\r\n          const d = typeof date === 'string' ? new Date(date) : date;\r\n          return d.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n        };\r\n\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full relative\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              className=\"flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-colors hover:bg-white/5\"\r\n              style={{ color: theme.textSecondary }}\r\n              onClick={(e) => {\r\n                if (isDatePickerOpen) {\r\n                  setDatePickerState(null);\r\n                } else {\r\n                  const rect = e.currentTarget.getBoundingClientRect();\r\n                  setDatePickerState({\r\n                    taskId: task.id,\r\n                    field: dateField,\r\n                    month: (dateValue ? (typeof dateValue === 'string' ? new Date(dateValue) : dateValue) : new Date()),\r\n                    position: { top: rect.bottom + 4, left: rect.left }\r\n                  });\r\n                }\r\n              }}\r\n            >\r\n              <Calendar className=\"w-3 h-3\" style={{ color: theme.textTertiary }} />\r\n              <span>{formatDisplayDate(dateValue)}</span>\r\n            </button>\r\n\r\n            {/* Date Picker Popover - Using Portal to render outside overflow:hidden containers */}\r\n            {isDatePickerOpen && typeof document !== 'undefined' && createPortal(\r\n              <>\r\n                <div className=\"fixed inset-0 z-[9998]\" onClick={() => setDatePickerState(null)} />\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: -10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: -10 }}\r\n                  className=\"fixed z-[9999] rounded-xl shadow-2xl overflow-visible flex\"\r\n                  style={{\r\n                    backgroundColor: theme.bgPrimary,\r\n                    border: `1px solid ${theme.border}`,\r\n                    top: datePickerState?.position.top,\r\n                    left: datePickerState?.position.left,\r\n                  }}\r\n                  onClick={(e) => e.stopPropagation()}\r\n                >\r\n                  {/* Quick Options */}\r\n                  <div className=\"w-36 py-2\" style={{ borderRight: `1px solid ${theme.border}` }}>\r\n                    {(() => {\r\n                      const today = new Date();\r\n                      const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1);\r\n                      const nextWeek = new Date(today); nextWeek.setDate(today.getDate() + 7);\r\n                      const twoWeeks = new Date(today); twoWeeks.setDate(today.getDate() + 14);\r\n\r\n                      const options = [\r\n                        { label: 'Hoy', date: today },\r\n                        { label: 'Maana', date: tomorrow },\r\n                        { label: 'Prxima semana', date: nextWeek },\r\n                        { label: '2 semanas', date: twoWeeks },\r\n                      ];\r\n\r\n                      return options.map((opt, i) => (\r\n                        <button\r\n                          key={i}\r\n                          type=\"button\"\r\n                          className=\"w-full px-3 py-1.5 text-xs text-left transition-colors\"\r\n                          style={{ color: theme.textPrimary }}\r\n                          onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = theme.hoverBg || 'rgba(255,255,255,0.05)')}\r\n                          onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                          onClick={() => {\r\n                            onTaskUpdate?.(task.id, { [dateField]: opt.date });\r\n                            setDatePickerState(null);\r\n                          }}\r\n                        >\r\n                          {opt.label}\r\n                        </button>\r\n                      ));\r\n                    })()}\r\n                    <div style={{ borderTop: `1px solid ${theme.border}`, margin: '0.25rem 0' }} />\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"w-full px-3 py-1.5 text-xs text-left transition-colors\"\r\n                      style={{ color: '#EF4444' }}\r\n                      onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = theme.hoverBg || 'rgba(255,255,255,0.05)')}\r\n                      onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                      onClick={() => {\r\n                        onTaskUpdate?.(task.id, { [dateField]: undefined });\r\n                        setDatePickerState(null);\r\n                      }}\r\n                    >\r\n                      Borrar\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Calendar */}\r\n                  <div className=\"p-2\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setDatePickerState(prev => prev ? { ...prev, month: new Date(prev.month.getFullYear(), prev.month.getMonth() - 1) } : null)}\r\n                        className=\"p-1 rounded hover:bg-white/10\"\r\n                      >\r\n                        <ChevronLeft className=\"w-3.5 h-3.5\" style={{ color: theme.textSecondary }} />\r\n                      </button>\r\n                      <span className=\"text-xs font-medium\" style={{ color: theme.textPrimary }}>\r\n                        {datePickerState?.month.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setDatePickerState(prev => prev ? { ...prev, month: new Date(prev.month.getFullYear(), prev.month.getMonth() + 1) } : null)}\r\n                        className=\"p-1 rounded hover:bg-white/10\"\r\n                      >\r\n                        <ChevronRight className=\"w-3.5 h-3.5\" style={{ color: theme.textSecondary }} />\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-7 gap-0.5 mb-1\">\r\n                      {['D', 'L', 'M', 'M', 'J', 'V', 'S'].map((d, i) => (\r\n                        <div key={i} className=\"w-6 h-6 flex items-center justify-center text-[10px]\" style={{ color: theme.textTertiary }}>{d}</div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"grid grid-cols-7 gap-0.5\">\r\n                      {(() => {\r\n                        const month = datePickerState?.month || new Date();\r\n                        const year = month.getFullYear(), m = month.getMonth();\r\n                        const firstDay = new Date(year, m, 1).getDay();\r\n                        const daysInMonth = new Date(year, m + 1, 0).getDate();\r\n                        const today = new Date();\r\n                        const days: { day: number; date: Date; isCurrentMonth: boolean }[] = [];\r\n\r\n                        for (let i = firstDay - 1; i >= 0; i--) days.push({ day: new Date(year, m, -i).getDate(), date: new Date(year, m - 1, new Date(year, m, -i).getDate()), isCurrentMonth: false });\r\n                        for (let i = 1; i <= daysInMonth; i++) days.push({ day: i, date: new Date(year, m, i), isCurrentMonth: true });\r\n                        const remaining = 42 - days.length;\r\n                        for (let i = 1; i <= remaining; i++) days.push({ day: i, date: new Date(year, m + 1, i), isCurrentMonth: false });\r\n\r\n                        return days.map((d, i) => {\r\n                          const isToday = d.date.toDateString() === today.toDateString();\r\n                          const currentDateValue = dateValue ? (typeof dateValue === 'string' ? new Date(dateValue) : dateValue) : null;\r\n                          const isSelected = currentDateValue?.toDateString() === d.date.toDateString();\r\n\r\n                          return (\r\n                            <button\r\n                              key={i}\r\n                              type=\"button\"\r\n                              className=\"w-6 h-6 rounded-full flex items-center justify-center text-[10px] transition-colors\"\r\n                              style={{\r\n                                color: !d.isCurrentMonth ? theme.textTertiary : isSelected ? '#FFF' : theme.textPrimary,\r\n                                backgroundColor: isSelected ? '#3B82F6' : 'transparent',\r\n                                boxShadow: isToday && !isSelected ? 'inset 0 0 0 1px #3B82F6' : 'none',\r\n                              }}\r\n                              onClick={() => {\r\n                                onTaskUpdate?.(task.id, { [dateField]: d.date });\r\n                                setDatePickerState(null);\r\n                              }}\r\n                            >\r\n                              {d.day}\r\n                            </button>\r\n                          );\r\n                        });\r\n                      })()}\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              </>,\r\n              document.body\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'duration':\r\n        return (\r\n          <div className=\"flex items-center justify-center w-full\">\r\n            <span\r\n              className=\"text-xs tabular-nums\"\r\n              style={{\r\n                color: theme.textSecondary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              {getDuration(task)}\r\n            </span>\r\n          </div>\r\n        );\r\n      \r\n      case 'assignees':\r\n        const taskAssignedUsers: User[] = availableUsers.filter(user =>\r\n          task.assignees?.some(a => a.name === user.name || a.initials === user.initials)\r\n        );\r\n\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <UserAssignmentSelector\r\n              assignedUsers={taskAssignedUsers}\r\n              availableUsers={availableUsers}\r\n              onChange={(users: User[]) => {\r\n                const newAssignees = users.map(u => ({\r\n                  id: u.id,\r\n                  name: u.name,\r\n                  initials: u.initials,\r\n                  color: u.color\r\n                }));\r\n                onTaskUpdate?.(task.id, {\r\n                  assignees: newAssignees.length > 0 ? newAssignees : undefined\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'status':\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <StatusSelector\r\n              status={task.status || 'todo'}\r\n              onChange={(status) => {\r\n                onTaskUpdate?.(task.id, {\r\n                  status,\r\n                  progress: status === 'completed' ? 100 : task.progress\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n      \r\n      case 'progress':\r\n        return (\r\n          <div className=\"flex items-center justify-center gap-2 w-full\">\r\n            <div className=\"flex-1 h-1.5 rounded-full overflow-hidden max-w-[60px]\" style={{ backgroundColor: theme.bgSecondary }}>\r\n              <div\r\n                className=\"h-full rounded-full transition-all\"\r\n                style={{\r\n                  width: `${task.progress}%`,\r\n                  backgroundColor: task.progress === 100 ? theme.statusCompleted : theme.accent,\r\n                }}\r\n              />\r\n            </div>\r\n            <span\r\n              className=\"text-xs tabular-nums min-w-[35px] text-right\"\r\n              style={{\r\n                color: theme.textTertiary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              {task.progress}%\r\n            </span>\r\n          </div>\r\n        );\r\n\r\n      // v0.17.29: Priority column\r\n      case 'priority':\r\n        // Map task priority to PrioritySelector format\r\n        const priorityMapForSelector: Record<string, 'LOW' | 'MEDIUM' | 'HIGH' | 'URGENT'> = {\r\n          low: 'LOW',\r\n          medium: 'MEDIUM',\r\n          high: 'HIGH',\r\n          urgent: 'URGENT',\r\n        };\r\n        const reversePriorityMapForTask: Record<string, 'low' | 'medium' | 'high' | 'urgent'> = {\r\n          LOW: 'low',\r\n          MEDIUM: 'medium',\r\n          HIGH: 'high',\r\n          URGENT: 'urgent',\r\n        };\r\n        const currentPriorityValue = priorityMapForSelector[task.priority || 'medium'] || 'MEDIUM';\r\n\r\n        return (\r\n          <div\r\n            className=\"flex items-center justify-center w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <PrioritySelector\r\n              priority={currentPriorityValue}\r\n              onChange={(newPriority) => {\r\n                if (newPriority) {\r\n                  onTaskUpdate?.(task.id, {\r\n                    priority: reversePriorityMapForTask[newPriority] || 'medium',\r\n                  });\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Context menu items for header\r\n  const getHeaderContextMenuItems = (columnId: ColumnType): ContextMenuItem[] => {\r\n    return [\r\n      {\r\n        id: 'hide',\r\n        label: 'Hide Column',\r\n        icon: MenuIcons.Hide,\r\n        onClick: () => onToggleColumn(columnId),\r\n        disabled: columnId === 'name',\r\n      },\r\n      { id: 'sep1', label: '', onClick: () => {}, separator: true },\r\n      {\r\n        id: 'sortAsc',\r\n        label: 'Sort Ascending',\r\n        icon: MenuIcons.SortAsc,\r\n        onClick: () => {\r\n          // Implement sorting in parent component if needed\r\n        },\r\n      },\r\n      {\r\n        id: 'sortDesc',\r\n        label: 'Sort Descending',\r\n        icon: MenuIcons.SortDesc,\r\n        onClick: () => {\r\n          // Implement sorting in parent component if needed\r\n        },\r\n      },\r\n    ];\r\n  };\r\n\r\n  // v0.16.2: Context menu items for task row - unified with GanttBoard context menu\r\n  // v0.17.46: Parent tasks (with subtasks) have limited menu - no edit, no status changes\r\n  const getTaskContextMenuItems = (task: Task): ContextMenuItem[] => {\r\n    const isParentTask = task.subtasks && task.subtasks.length > 0;\r\n\r\n    // v0.17.46: Parent tasks can only add subtasks and delete - status/progress is auto-calculated\r\n    if (isParentTask) {\r\n      return [\r\n        // Add Subtask - main action for parent tasks\r\n        {\r\n          id: 'addSubtask',\r\n          label: translations?.contextMenu?.addSubtask || 'Add Subtask',\r\n          icon: MenuIcons.Add,\r\n          onClick: () => {\r\n            onCreateSubtask?.(task.id);\r\n          },\r\n        },\r\n        // Separator before delete\r\n        { id: 'sep1', label: '', onClick: () => {}, separator: true },\r\n        // Delete Task\r\n        {\r\n          id: 'delete',\r\n          label: translations?.contextMenu?.deleteTask || 'Delete Task',\r\n          icon: MenuIcons.Delete,\r\n          onClick: () => {\r\n            if (onDeleteRequest) {\r\n              onDeleteRequest(task.id, task.name);\r\n            } else {\r\n              onMultiTaskDelete?.([task.id]);\r\n            }\r\n          },\r\n        },\r\n      ];\r\n    }\r\n\r\n    // Regular tasks (no subtasks) - full menu\r\n    return [\r\n      // Edit Task - opens edit modal via double-click handler\r\n      {\r\n        id: 'edit',\r\n        label: translations?.contextMenu?.editTask || 'Edit Task',\r\n        icon: MenuIcons.Pencil,\r\n        onClick: () => {\r\n          onTaskDblClick?.(task);\r\n        },\r\n      },\r\n      // Add Subtask\r\n      {\r\n        id: 'addSubtask',\r\n        label: translations?.contextMenu?.addSubtask || 'Add Subtask',\r\n        icon: MenuIcons.Add,\r\n        onClick: () => {\r\n          onCreateSubtask?.(task.id);\r\n        },\r\n      },\r\n      // Separator before status changes\r\n      { id: 'sep1', label: '', onClick: () => {}, separator: true },\r\n      // Mark Incomplete (status: 'todo', progress: 0)\r\n      {\r\n        id: 'markIncomplete',\r\n        label: translations?.contextMenu?.markIncomplete || 'Mark Incomplete',\r\n        icon: MenuIcons.MarkIncomplete,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'todo', progress: 0 });\r\n        },\r\n        disabled: task.status === 'todo',\r\n      },\r\n      // Set In Progress (status: 'in-progress')\r\n      {\r\n        id: 'setInProgress',\r\n        label: translations?.contextMenu?.setInProgress || 'Set In Progress',\r\n        icon: MenuIcons.SetInProgress,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'in-progress' });\r\n        },\r\n        disabled: task.status === 'in-progress',\r\n      },\r\n      // Mark Complete (status: 'completed', progress: 100)\r\n      {\r\n        id: 'markComplete',\r\n        label: translations?.contextMenu?.markComplete || 'Mark Complete',\r\n        icon: MenuIcons.MarkComplete,\r\n        onClick: () => {\r\n          onTaskUpdate?.(task.id, { status: 'completed', progress: 100 });\r\n        },\r\n        disabled: task.status === 'completed',\r\n      },\r\n      // Separator before advanced options\r\n      { id: 'sep2', label: '', onClick: () => {}, separator: true },\r\n      // Split Task\r\n      {\r\n        id: 'split',\r\n        label: translations?.contextMenu?.splitTask || 'Split Task',\r\n        icon: MenuIcons.Split,\r\n        onClick: () => {},\r\n        // Split task is only available via Timeline context menu (right-click on task bar)\r\n        disabled: true,\r\n      },\r\n      // Separator before delete\r\n      { id: 'sep3', label: '', onClick: () => {}, separator: true },\r\n      // Delete Task - v0.17.34: Use confirmation modal if available\r\n      {\r\n        id: 'delete',\r\n        label: translations?.contextMenu?.deleteTask || 'Delete Task',\r\n        icon: MenuIcons.Delete,\r\n        onClick: () => {\r\n          if (onDeleteRequest) {\r\n            // Show confirmation modal\r\n            onDeleteRequest(task.id, task.name);\r\n          } else {\r\n            // Fallback to direct delete\r\n            onMultiTaskDelete?.([task.id]);\r\n          }\r\n        },\r\n      },\r\n    ];\r\n  };\r\n\r\n  const visibleColumns = columns.filter(col => col.visible);\r\n\r\n  // v0.17.213: Buttons now in flex flow, no extra width needed\r\n  const totalColumnsWidth = visibleColumns.reduce((sum, col) => sum + col.width, 0);\r\n\r\n  // v0.13.10: TaskGrid no longer has its own scroll - it syncs with Timeline scroll\r\n  // v0.17.372: Removed h-full to allow sticky header to work correctly during scroll\r\n  return (\r\n    <div\r\n      className=\"gantt-taskgrid-content\"\r\n      style={{\r\n        backgroundColor: theme.bgPrimary,\r\n        minWidth: totalColumnsWidth, // v0.17.194: Enable horizontal scroll when needed\r\n      }}\r\n    >\r\n      {/* Header - v0.17.213: Buttons now in flex flow (not absolute) for proper space */}\r\n      <div\r\n        className=\"sticky top-0 z-10 flex items-center\"\r\n        style={{\r\n          backgroundColor: theme.bgGrid,\r\n          height: `${HEADER_HEIGHT}px`,\r\n          paddingLeft: '3px',\r\n          borderBottom: `1px solid ${theme.border}`,\r\n          boxSizing: 'border-box',\r\n        }}\r\n      >\r\n        {/* Columns container - takes remaining space */}\r\n        <div className=\"flex items-center flex-1 min-w-0\">\r\n        {visibleColumns.map((column, colIndex) => {\r\n          const isLastColumn = colIndex === visibleColumns.length - 1;\r\n          const isNameColumn = column.id === 'name';\r\n\r\n          return (\r\n          <div\r\n            key={column.id}\r\n            className={`flex items-center px-4 cursor-pointer hover:bg-opacity-50 transition-colors relative ${\r\n              isNameColumn ? '' : 'justify-center'\r\n            }`}\r\n            style={{\r\n              // v0.17.129: All columns use fixed width for consistent resize behavior\r\n              width: `${column.width}px`,\r\n              minWidth: `${column.minWidth ?? (isNameColumn ? 200 : 60)}px`,\r\n              maxWidth: `${column.maxWidth ?? 2000}px`,\r\n              flexShrink: 0,\r\n              flexGrow: 0,\r\n              // v0.17.129: Border between columns, none on last (GanttBoard has the main divider)\r\n              borderRight: !isLastColumn ? `1px solid ${theme.borderLight}` : 'none',\r\n              height: '100%',\r\n              boxSizing: 'border-box',\r\n              overflow: 'hidden',\r\n            }}\r\n            onContextMenu={(e) => {\r\n              e.preventDefault();\r\n              setContextMenu({\r\n                isOpen: true,\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                type: 'header',\r\n                columnId: column.id,\r\n              });\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.backgroundColor = 'transparent';\r\n            }}\r\n          >\r\n            <span\r\n              className=\"text-xs uppercase tracking-wider\"\r\n              style={{\r\n                color: theme.textTertiary,\r\n                fontFamily: 'Inter, sans-serif',\r\n                fontWeight: 600,\r\n                // v0.17.129: Truncate long labels elegantly\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis',\r\n                whiteSpace: 'nowrap',\r\n                minWidth: 0,\r\n                // v0.17.191: No extra padding needed - buttons are now at header level\r\n                paddingRight: '0',\r\n              }}\r\n              title={column.label}\r\n            >\r\n              {column.label}\r\n            </span>\r\n\r\n            {/* v0.17.191: Action buttons moved outside column flow - see header level */}\r\n\r\n            {/* v0.13.8: Resize handle for resizable columns */}\r\n            {/* v0.17.56: Improved resize handle - wider for easier grabbing */}\r\n            {column.resizable && (\r\n              <div\r\n                className=\"absolute right-0 top-0 bottom-0 cursor-col-resize transition-colors group\"\r\n                style={{\r\n                  width: '8px', // v0.17.56: Wider grab area\r\n                  marginRight: '-4px', // v0.17.56: Center on border\r\n                  backgroundColor: resizingColumn === column.id ? `${theme.accent}30` : 'transparent',\r\n                  zIndex: 5, // v0.17.56: Above column content\r\n                }}\r\n                onMouseDown={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  setResizingColumn(column.id);\r\n                  setResizeStartX(e.clientX);\r\n                  setResizeStartWidth(column.width);\r\n                }}\r\n                title=\"Drag to resize column\"\r\n              >\r\n                {/* Visual indicator line on hover */}\r\n                <div\r\n                  className=\"absolute top-2 bottom-2 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                  style={{\r\n                    left: '3px',\r\n                    width: '2px',\r\n                    backgroundColor: theme.accent,\r\n                    borderRadius: '1px',\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n        })}\r\n        </div>\r\n\r\n        {/* v0.17.215: Action buttons with sticky positioning - always visible at right edge */}\r\n        <div\r\n          className=\"flex items-center gap-1 px-2\"\r\n          style={{\r\n            position: 'sticky',\r\n            right: 0,\r\n            height: '100%',\r\n            backgroundColor: theme.bgGrid,\r\n            zIndex: 5,\r\n          }}\r\n        >\r\n          <ColumnManager\r\n            columns={columns}\r\n            onToggleColumn={onToggleColumn}\r\n            theme={theme}\r\n          />\r\n          <button\r\n            onClick={() => setShowKeyboardHelp(!showKeyboardHelp)}\r\n            className=\"p-1.5 rounded hover:bg-opacity-10 transition-colors\"\r\n            style={{ color: theme.textTertiary }}\r\n            title=\"Keyboard shortcuts\"\r\n          >\r\n            <Keyboard className=\"w-4 h-4\" />\r\n          </button>\r\n\r\n          {/* Keyboard help tooltip */}\r\n          {showKeyboardHelp && (\r\n            <div\r\n              ref={keyboardHelpRef}\r\n              className=\"absolute top-full right-0 mt-2 p-4 rounded-lg shadow-2xl z-50 min-w-[400px]\"\r\n              style={{\r\n                backgroundColor: theme.bgPrimary,\r\n                border: `1px solid ${theme.border}`,\r\n                color: theme.textPrimary,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-3 pb-2 border-b\" style={{ borderColor: theme.border }}>\r\n                <h3 className=\"font-semibold text-sm\" style={{ color: theme.textPrimary }}>Keyboard Shortcuts</h3>\r\n                <button onClick={() => setShowKeyboardHelp(false)} className=\"text-xs px-2 py-1 rounded hover:bg-opacity-10\" style={{ color: theme.textTertiary }}>Close</button>\r\n              </div>\r\n              <div className=\"space-y-3 text-xs\">\r\n                <div>\r\n                  <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Navigation</div>\r\n                  <div className=\"space-y-1\">\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Move focus up/down</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}> / </kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Select range</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift +  / </kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Toggle selection</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + Click</kbd></div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Hierarchy</div>\r\n                  <div className=\"space-y-1\">\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Indent task</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Tab</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Outdent task</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift + Tab</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Expand/Collapse</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}> / </kbd></div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Editing</div>\r\n                  <div className=\"space-y-1\">\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Create task below</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Enter</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Create task above</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Shift + Enter</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Open task modal</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + Enter</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Rename task</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>F2</kbd></div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-semibold mb-1.5\" style={{ color: theme.textSecondary }}>Actions</div>\r\n                  <div className=\"space-y-1\">\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Move task up/down</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Alt +  / </kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Delete task</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Delete</kbd></div>\r\n                    <div className=\"flex justify-between\"><span style={{ color: theme.textTertiary }}>Duplicate task</span><kbd className=\"px-2 py-0.5 rounded font-mono text-xs\" style={{ backgroundColor: theme.bgGrid, color: theme.textPrimary }}>Cmd/Ctrl + D</kbd></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Task Rows Container - v0.17.222: Now uses real scroll instead of CSS transform */}\r\n      {/* minHeight ensures scroll area matches Timeline for proper sync */}\r\n      <div className=\"gantt-taskgrid-content\" style={{ minHeight: contentHeight }}>\r\n      {flatTasks.map(({ task, level }, index) => {\r\n        const isSelected = isTaskSelected(task.id);\r\n\r\n        // v0.17.146: Calculate drop indicator styles - ClickUp style with prominent line\r\n        const isDropTarget = dropTargetTaskId === task.id;\r\n        const showDropAbove = isDropTarget && dropPosition === 'above';\r\n        const showDropBelow = isDropTarget && dropPosition === 'below';\r\n        const showDropChild = isDropTarget && dropPosition === 'child';\r\n        const dropStyles: React.CSSProperties = {};\r\n        if (showDropChild) {\r\n          dropStyles.backgroundColor = `${theme.accent}15`;\r\n          dropStyles.boxShadow = `inset 0 0 0 2px ${theme.accent}`;\r\n        }\r\n\r\n        return (\r\n          <motion.div\r\n            key={task.id}\r\n            data-task-row={task.id}\r\n            className={`flex items-center cursor-pointer group ${draggedTaskId === task.id ? 'opacity-50' : ''}`}\r\n            style={{\r\n              position: 'relative', // v0.17.146: For drop indicator positioning\r\n              height: `${ROW_HEIGHT}px`,\r\n              borderLeft: isSelected ? `3px solid ${theme.accent}` : `3px solid transparent`,\r\n              backgroundColor: isSelected\r\n                ? theme.accentLight\r\n                : showDropChild\r\n                  ? `${theme.accent}15`\r\n                  : (index % 2 === 0 ? theme.bgPrimary : theme.bgGrid),\r\n              ...dropStyles,\r\n            }}\r\n            onMouseEnter={() => setHoveredTaskId(task.id)}\r\n            onMouseLeave={() => setHoveredTaskId(null)}\r\n            onClick={(e) => {\r\n              const flatTasks = flattenTasksUtil(tasks);\r\n              const flatTaskIds = flatTasks.map(t => t.id);\r\n              const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n              const ctrlOrCmd = isMac ? e.metaKey : e.ctrlKey;\r\n\r\n              // Handle multi-selection\r\n              handleSelectionClick(task.id, flatTaskIds, ctrlOrCmd, e.shiftKey);\r\n\r\n              // Also trigger the regular click handler\r\n              onTaskClick?.(task);\r\n            }}\r\n            onDoubleClick={(e) => {\r\n              // v0.8.0: Double-click event\r\n              e.stopPropagation();\r\n              onTaskDblClick?.(task);\r\n            }}\r\n            onContextMenu={(e) => {\r\n              e.preventDefault();\r\n              setContextMenu({\r\n                isOpen: true,\r\n                x: e.clientX,\r\n                y: e.clientY,\r\n                type: 'task',\r\n                task,\r\n              });\r\n\r\n              // v0.8.0: Context menu event\r\n              onTaskContextMenu?.(task, e);\r\n            }}\r\n            whileHover={{\r\n              backgroundColor: isSelected ? theme.accentLight : theme.hoverBg,\r\n            }}\r\n          >\r\n            {/* v0.17.147: Drop indicator line ABOVE - clean horizontal line */}\r\n            {showDropAbove && (\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  right: 0,\r\n                  height: '2px',\r\n                  backgroundColor: theme.accent,\r\n                  zIndex: 10,\r\n                }}\r\n              />\r\n            )}\r\n\r\n            {/* v0.17.147: Drop indicator line BELOW - clean horizontal line */}\r\n            {showDropBelow && (\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  bottom: 0,\r\n                  left: 0,\r\n                  right: 0,\r\n                  height: '2px',\r\n                  backgroundColor: theme.accent,\r\n                  zIndex: 10,\r\n                }}\r\n              />\r\n            )}\r\n\r\n          {visibleColumns.map((column, colIndex) => {\r\n            const isLastColumn = colIndex === visibleColumns.length - 1;\r\n            const isNameColumn = column.id === 'name';\r\n\r\n            return (\r\n            <div\r\n              key={`${task.id}-${column.id}`}\r\n              className={`px-4 flex items-center ${\r\n                isNameColumn ? 'justify-start' : 'justify-center'\r\n              }`}\r\n              style={{\r\n                // v0.17.129: All columns use fixed width for consistent resize behavior\r\n                width: `${column.width}px`,\r\n                minWidth: `${column.minWidth ?? (isNameColumn ? 200 : 60)}px`,\r\n                maxWidth: `${column.maxWidth ?? 2000}px`,\r\n                flexShrink: 0,\r\n                flexGrow: 0,\r\n                // v0.17.129: Consistent border handling - inline style like header\r\n                borderRight: !isLastColumn ? `1px solid ${hoveredTaskId === task.id ? theme.border : theme.borderLight}` : 'none',\r\n                height: '100%',\r\n                boxSizing: 'border-box',\r\n                overflow: 'hidden',\r\n              }}\r\n            >\r\n              {renderCellContent(column, task, isNameColumn ? level : 0)}\r\n            </div>\r\n          );\r\n          })}\r\n          </motion.div>\r\n        );\r\n      })}\r\n      </div>\r\n\r\n      {/* Context Menu */}\r\n      <ContextMenu\r\n        isOpen={contextMenu.isOpen}\r\n        x={contextMenu.x}\r\n        y={contextMenu.y}\r\n        items={\r\n          contextMenu.type === 'header' && contextMenu.columnId\r\n            ? getHeaderContextMenuItems(contextMenu.columnId)\r\n            : contextMenu.type === 'task' && contextMenu.task\r\n            ? getTaskContextMenuItems(contextMenu.task)\r\n            : []\r\n        }\r\n        onClose={() => setContextMenu({ ...contextMenu, isOpen: false })}\r\n        theme={theme}\r\n      />\r\n\r\n      {/* v0.17.147: Ghost/Phantom drag preview - subtle horizontal line style */}\r\n      {isDraggingState && ghostPosition && draggedTaskId && typeof document !== 'undefined' && createPortal(\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            left: ghostPosition.x + 12,\r\n            top: ghostPosition.y - 10,\r\n            zIndex: 99999,\r\n            pointerEvents: 'none',\r\n          }}\r\n        >\r\n          {/* Subtle ghost - just text with slight background */}\r\n          {(() => {\r\n            const draggedTask = flatTasks.find(ft => ft.task.id === draggedTaskId)?.task;\r\n            return draggedTask ? (\r\n              <div\r\n                className=\"flex items-center gap-2 px-2 py-1 rounded\"\r\n                style={{\r\n                  backgroundColor: 'rgba(255, 255, 255, 0.08)',\r\n                  backdropFilter: 'blur(4px)',\r\n                }}\r\n              >\r\n                <span\r\n                  className=\"text-xs font-medium\"\r\n                  style={{\r\n                    color: theme.textSecondary,\r\n                    opacity: 0.9,\r\n                  }}\r\n                >\r\n                  {draggedTask.name}\r\n                </span>\r\n              </div>\r\n            ) : null;\r\n          })()}\r\n        </div>,\r\n        document.body\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * useDragState - Centralized drag state management\r\n * Manages all drag-related state in one place\r\n *\r\n * @version 0.8.1\r\n * @version 0.13.6 - Removed dragDaysDelta (direction-based colors removed)\r\n */\r\n\r\nimport { useState } from 'react';\r\n\r\nexport type DragMode = 'none' | 'move' | 'resize-start' | 'resize-end' | 'connect';\r\nexport type ActiveZone = 'move' | 'resize-start' | 'resize-end' | 'connect' | null;\r\n\r\nexport interface DragState {\r\n  // Drag mode\r\n  dragMode: DragMode;\r\n  setDragMode: (mode: DragMode) => void;\r\n\r\n  // Drag offset (distance from click to element origin)\r\n  dragOffset: number;\r\n  setDragOffset: (offset: number) => void;\r\n\r\n  // Ghost position (visual feedback during drag)\r\n  ghostX: number;\r\n  setGhostX: (x: number) => void;\r\n  ghostWidth: number;\r\n  setGhostWidth: (width: number) => void;\r\n\r\n  // Connection line\r\n  connectionLine: { x: number; y: number } | null;\r\n  setConnectionLine: (line: { x: number; y: number } | null) => void;\r\n\r\n  // Hovered task (for dependency creation)\r\n  hoveredTaskId: string | null;\r\n  setHoveredTaskId: (id: string | null) => void;\r\n\r\n  // Active zone (for visual feedback)\r\n  activeZone: ActiveZone;\r\n  setActiveZone: (zone: ActiveZone) => void;\r\n\r\n  // Split task specific state\r\n  draggedSegmentIndex: number | null;\r\n  setDraggedSegmentIndex: (index: number | null) => void;\r\n  draggedSegmentStartX: number;\r\n  setDraggedSegmentStartX: (x: number) => void;\r\n  segmentDragOffsetX: number;\r\n  setSegmentDragOffsetX: (offset: number) => void;\r\n\r\n  // Hover state\r\n  hoveredSegmentIndex: number | null;\r\n  setHoveredSegmentIndex: (index: number | null) => void;\r\n  isHovered: boolean;\r\n  setIsHovered: (hovered: boolean) => void;\r\n\r\n  // Computed state\r\n  isDragging: boolean;\r\n  isResizing: boolean;\r\n  isConnecting: boolean;\r\n\r\n  // Reset all drag state\r\n  resetDragState: (x: number, width: number) => void;\r\n}\r\n\r\nexport function useDragState(initialX: number, initialWidth: number): DragState {\r\n  const [dragMode, setDragMode] = useState<DragMode>('none');\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [ghostX, setGhostX] = useState(initialX);\r\n  const [ghostWidth, setGhostWidth] = useState(initialWidth);\r\n  const [connectionLine, setConnectionLine] = useState<{ x: number; y: number } | null>(null);\r\n  const [hoveredTaskId, setHoveredTaskId] = useState<string | null>(null);\r\n  const [activeZone, setActiveZone] = useState<ActiveZone>(null);\r\n\r\n  // Split task state\r\n  const [draggedSegmentIndex, setDraggedSegmentIndex] = useState<number | null>(null);\r\n  const [draggedSegmentStartX, setDraggedSegmentStartX] = useState(0);\r\n  const [segmentDragOffsetX, setSegmentDragOffsetX] = useState(0);\r\n  const [hoveredSegmentIndex, setHoveredSegmentIndex] = useState<number | null>(null);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  // Computed state\r\n  const isDragging = dragMode !== 'none';\r\n  const isResizing = dragMode === 'resize-start' || dragMode === 'resize-end';\r\n  const isConnecting = dragMode === 'connect';\r\n\r\n  // Reset all state to initial values\r\n  const resetDragState = (x: number, width: number) => {\r\n    setDragMode('none');\r\n    setConnectionLine(null);\r\n    setHoveredTaskId(null);\r\n    setGhostX(x);\r\n    setGhostWidth(width);\r\n    setSegmentDragOffsetX(0);\r\n    setDraggedSegmentIndex(null);\r\n    setDraggedSegmentStartX(0);\r\n  };\r\n\r\n  return {\r\n    dragMode,\r\n    setDragMode,\r\n    dragOffset,\r\n    setDragOffset,\r\n    ghostX,\r\n    setGhostX,\r\n    ghostWidth,\r\n    setGhostWidth,\r\n    connectionLine,\r\n    setConnectionLine,\r\n    hoveredTaskId,\r\n    setHoveredTaskId,\r\n    activeZone,\r\n    setActiveZone,\r\n    draggedSegmentIndex,\r\n    setDraggedSegmentIndex,\r\n    draggedSegmentStartX,\r\n    setDraggedSegmentStartX,\r\n    segmentDragOffsetX,\r\n    setSegmentDragOffsetX,\r\n    hoveredSegmentIndex,\r\n    setHoveredSegmentIndex,\r\n    isHovered,\r\n    setIsHovered,\r\n    isDragging,\r\n    isResizing,\r\n    isConnecting,\r\n    resetDragState,\r\n  };\r\n}\r\n","import { useRef, useCallback, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task, GanttTemplates } from './types';\r\nimport { TaskPosition } from './Timeline';\r\nimport { useDragState } from './hooks/useDragState';\r\n\r\n// v0.17.76: Tooltip data structure for external rendering\r\nexport interface TaskTooltipData {\r\n  task: Task;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  showBelow: boolean;\r\n}\r\n\r\ninterface TaskBarProps {\r\n  task: Task;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  theme: any;\r\n  dayWidth: number;\r\n  startDate: Date;\r\n  templates: Required<GanttTemplates>; // v0.8.0\r\n  onClick?: (task: Task) => void;\r\n  onDoubleClick?: (task: Task) => void; // v0.8.0\r\n  onContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\r\n  onDateChange?: (task: Task, newStart: Date, newEnd: Date) => void;\r\n  onDependencyCreate?: (fromTask: Task, toTaskId: string) => void;\r\n  allTaskPositions?: TaskPosition[];\r\n  // v0.13.0: Callback for dependency cascade preview during drag\r\n  onDragMove?: (taskId: string, daysDelta: number, isDragging: boolean) => void;\r\n  // v0.17.76: Callback for tooltip hover state - enables rendering tooltips in a top layer\r\n  onHoverChange?: (tooltipData: TaskTooltipData | null) => void;\r\n}\r\n\r\ntype DragMode = 'none' | 'move' | 'resize-start' | 'resize-end' | 'connect';\r\n\r\nexport function TaskBar({\r\n  task,\r\n  x,\r\n  y,\r\n  width,\r\n  theme,\r\n  dayWidth,\r\n  startDate,\r\n  templates,\r\n  onClick,\r\n  onDoubleClick, // v0.8.0\r\n  onContextMenu, // v0.8.0\r\n  onDateChange,\r\n  onDependencyCreate,\r\n  allTaskPositions = [],\r\n  onDragMove, // v0.13.0\r\n  onHoverChange, // v0.17.76\r\n}: TaskBarProps) {\r\n  // v0.8.1: Centralized drag state management for better modularity\r\n  const dragState = useDragState(x, width);\r\n  const svgRef = useRef<SVGGElement>(null);\r\n\r\n  // v0.17.379: Auto-scroll when dragging near edges\r\n  const autoScrollIntervalRef = useRef<number | null>(null);\r\n  const lastMouseEventRef = useRef<MouseEvent | null>(null);\r\n\r\n  // Destructure for easier access (keeps existing code readable)\r\n  const {\r\n    dragMode, setDragMode,\r\n    dragOffset, setDragOffset,\r\n    ghostX, setGhostX,\r\n    ghostWidth, setGhostWidth,\r\n    connectionLine, setConnectionLine,\r\n    hoveredTaskId, setHoveredTaskId,\r\n    activeZone, setActiveZone,\r\n    draggedSegmentIndex, setDraggedSegmentIndex,\r\n    draggedSegmentStartX, setDraggedSegmentStartX,\r\n    segmentDragOffsetX, setSegmentDragOffsetX,\r\n    hoveredSegmentIndex, setHoveredSegmentIndex,\r\n    isHovered, setIsHovered,\r\n    isDragging, isResizing, isConnecting,\r\n    resetDragState\r\n  } = dragState;\r\n\r\n  const height = 32;\r\n  const borderRadius = 8;\r\n\r\n  // Detect task states for neutral theme visualization\r\n  const isOverdue = task.endDate && task.endDate < new Date() && task.progress < 100;\r\n  const isAtRisk = task.isCriticalPath;  // Critical path tasks are \"at risk\"\r\n  const isNeutralTheme = theme.name === 'neutral' || theme.today === '#1C1917';  // Detect neutral theme\r\n  // v0.17.41: Detect completed tasks for strikethrough styling\r\n  const isCompleted = task.status === 'completed' || task.progress === 100;\r\n\r\n  // v0.17.38: Priority-based colors - aligned with PrioritySelector component\r\n  // Supports both lowercase (from DB) and uppercase (from component) priority values\r\n  const PRIORITY_COLORS: Record<string, string> = {\r\n    low: '#2ECC71',      // Verde (Green)\r\n    LOW: '#2ECC71',\r\n    medium: '#F1C40F',   // Amarillo (Yellow)\r\n    MEDIUM: '#F1C40F',\r\n    high: '#E67E22',     // Naranja (Orange)\r\n    HIGH: '#E67E22',\r\n    urgent: '#E74C3C',   // Rojo (Red)\r\n    URGENT: '#E74C3C',\r\n  };\r\n\r\n  // Get task color: priority color > custom color > theme default\r\n  const getTaskColor = () => {\r\n    if (task.isCriticalPath || isOverdue) return '#DC2626'; // Critical/overdue = red\r\n    if (task.color) return task.color; // Custom color takes precedence\r\n    if (task.priority && PRIORITY_COLORS[task.priority]) return PRIORITY_COLORS[task.priority];\r\n    return theme.taskBarPrimary; // Fallback to theme\r\n  };\r\n\r\n  const taskColor = getTaskColor();\r\n\r\n  // Dynamic resize zones based on bar width for better UX\r\n  const getResizeZone = (barWidth: number): number => {\r\n    if (barWidth >= 80) return 20;      // Large bars: 20px zones\r\n    if (barWidth >= 60) return 15;      // Medium bars: 15px zones\r\n    if (barWidth >= 50) return 12;      // Small bars: 12px zones\r\n    return 10;                          // Very small bars: 10px zones\r\n  };\r\n\r\n  const RESIZE_ZONE = getResizeZone(width);\r\n  const isSmallBar = width < 50;          // Flag for special handling\r\n  const isVerySmallBar = width < 40;      // Flag for ultra-small bars (simplified UX)\r\n\r\n  // v0.17.76: Notify parent of hover state changes for top-layer tooltip rendering\r\n  // This ensures tooltips always appear above all task bars (SVG z-order fix)\r\n  useEffect(() => {\r\n    if (onHoverChange) {\r\n      if (isHovered && !isDragging && !task.segments) {\r\n        const showBelow = y < 100; // Same threshold as internal tooltip logic\r\n        onHoverChange({\r\n          task,\r\n          x, // Use base x since tooltip hidden during drag anyway\r\n          y,\r\n          width, // Use base width since tooltip hidden during drag anyway\r\n          height,\r\n          showBelow,\r\n        });\r\n      } else {\r\n        onHoverChange(null);\r\n      }\r\n    }\r\n  }, [isHovered, isDragging, task, x, y, width, height, onHoverChange]);\r\n\r\n  // Format date for tooltip\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  // Calculate duration\r\n  const getDuration = () => {\r\n    const days = Math.ceil((task.endDate!.getTime() - task.startDate!.getTime()) / (1000 * 60 * 60 * 24));\r\n    return `${days} day${days !== 1 ? 's' : ''}`;\r\n  };\r\n\r\n  // Snap position to nearest day\r\n  const snapToDay = (pixelX: number): number => {\r\n    const dayOffset = Math.round(pixelX / dayWidth) * dayWidth;\r\n    return dayOffset;\r\n  };\r\n\r\n  // Convert pixel position to date\r\n  const pixelToDate = (pixelX: number): Date => {\r\n    const days = Math.round(pixelX / dayWidth);\r\n    const newDate = new Date(startDate);\r\n    newDate.setDate(newDate.getDate() + days);\r\n    return newDate;\r\n  };\r\n\r\n  // Check if point is inside a task's bounding box\r\n  const findTaskAtPoint = (pointX: number, pointY: number): string | null => {\r\n    for (const taskPos of allTaskPositions) {\r\n      // Skip current task\r\n      if (taskPos.id === task.id) continue;\r\n\r\n      // Check if point is within task bounds (with some padding for easier targeting)\r\n      const padding = 5;\r\n      if (\r\n        pointX >= taskPos.x - padding &&\r\n        pointX <= taskPos.x + taskPos.width + padding &&\r\n        pointY >= taskPos.y - padding &&\r\n        pointY <= taskPos.y + taskPos.height + padding\r\n      ) {\r\n        return taskPos.id;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // TODO: Implement dynamic cursor styling based on mouse position\r\n  // Determine cursor based on position\r\n  // const getCursorStyle = (mouseX: number): string => {\r\n  //   if (dragMode !== 'none') {\r\n  //     if (dragMode === 'connect') return 'crosshair';\r\n  //     if (dragMode === 'resize-start' || dragMode === 'resize-end') return 'ew-resize';\r\n  //     if (dragMode === 'move') return 'grabbing';\r\n  //   }\r\n  //   const relativeX = mouseX - x;\r\n  //   // Resize zones at edges\r\n  //   if (relativeX <= RESIZE_ZONE) return 'ew-resize';\r\n  //   if (relativeX >= width - RESIZE_ZONE) return 'ew-resize';\r\n  //   // Move zone in the middle\r\n  //   return 'grab';\r\n  // };\r\n\r\n  // Handle mouse down for dragging\r\n  // v0.8.1: Added segmentX parameter for split tasks - allows segments to calculate their own offset\r\n  const handleMouseDown = useCallback((e: React.MouseEvent, mode?: DragMode, segmentX?: number) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const svgElement = svgRef.current?.ownerSVGElement;\r\n    if (!svgElement) return;\r\n\r\n    const point = svgElement.createSVGPoint();\r\n    point.x = e.clientX;\r\n    point.y = e.clientY;\r\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\r\n\r\n    // v0.8.1: Use segment position if provided (for split tasks), otherwise use global x\r\n    const effectiveX = segmentX !== undefined ? segmentX : x;\r\n\r\n    // Determine mode based on click position if not specified\r\n    let actualMode = mode;\r\n    if (!actualMode) {\r\n      const relativeX = svgPoint.x - effectiveX;\r\n\r\n      // Keyboard modifiers for forced modes\r\n      if (e.shiftKey) {\r\n        // SHIFT: Connection mode\r\n        actualMode = 'connect';\r\n        setConnectionLine({ x: x + width, y: y + height / 2 });\r\n      } else if (e.ctrlKey || e.metaKey) {\r\n        // CTRL/CMD: Force MOVE (useful for small bars)\r\n        actualMode = 'move';\r\n      } else if (e.altKey) {\r\n        // ALT: Force RESIZE based on which half of bar is clicked\r\n        actualMode = relativeX < width / 2 ? 'resize-start' : 'resize-end';\r\n      }\r\n      // Auto-detection based on position (adaptive based on bar size)\r\n      else if (isVerySmallBar) {\r\n        // Very small bars (<40px): Simple split - left half = move, right half = resize\r\n        if (relativeX < width / 2) {\r\n          actualMode = 'move';\r\n        } else {\r\n          actualMode = 'resize-end';  // Always resize from end for consistency\r\n        }\r\n      } else if (isSmallBar) {\r\n        // Small bars (40-50px): Only resize if clicking very close to edges\r\n        if (relativeX <= RESIZE_ZONE / 2) {\r\n          actualMode = 'resize-start';\r\n        } else if (relativeX >= width - RESIZE_ZONE / 2) {\r\n          actualMode = 'resize-end';\r\n        } else {\r\n          actualMode = 'move';  // Default to move for small bars\r\n        }\r\n      } else {\r\n        // Normal bars: Standard zone detection\r\n        if (relativeX <= RESIZE_ZONE) {\r\n          actualMode = 'resize-start';\r\n        } else if (relativeX >= width - RESIZE_ZONE) {\r\n          actualMode = 'resize-end';\r\n        } else {\r\n          actualMode = 'move';\r\n        }\r\n      }\r\n    }\r\n\r\n    setDragMode(actualMode);\r\n    setIsHovered(false); // Hide all tooltips when dragging starts\r\n    setActiveZone(null); // Clear active zone\r\n\r\n    if (actualMode === 'move') {\r\n      // v0.8.1: Use effectiveX (segment position for split tasks, global x otherwise)\r\n      setDragOffset(svgPoint.x - effectiveX);\r\n    } else if (actualMode === 'connect') {\r\n      setConnectionLine({ x: x + width, y: y + height / 2 });\r\n    } else {\r\n      setDragOffset(0);\r\n    }\r\n\r\n    setGhostX(effectiveX);\r\n    setGhostWidth(width);\r\n  }, [x, width, y, height]);\r\n\r\n  // v0.17.379: Auto-scroll function when dragging near edges\r\n  const performAutoScroll = useCallback((e: MouseEvent) => {\r\n    const svgElement = svgRef.current?.ownerSVGElement;\r\n    if (!svgElement) return;\r\n\r\n    // Find the timeline scroll container\r\n    const timelineScroll = svgElement.closest('.gantt-timeline-scroll') as HTMLElement;\r\n    if (!timelineScroll) return;\r\n\r\n    const rect = timelineScroll.getBoundingClientRect();\r\n    const edgeThreshold = 60; // Distance from edge to start scrolling\r\n    const scrollSpeed = 15; // Pixels per frame\r\n\r\n    let scrollDelta = 0;\r\n\r\n    // Check if near left edge\r\n    if (e.clientX < rect.left + edgeThreshold) {\r\n      const distance = rect.left + edgeThreshold - e.clientX;\r\n      scrollDelta = -Math.min(scrollSpeed, distance / 2);\r\n    }\r\n    // Check if near right edge\r\n    else if (e.clientX > rect.right - edgeThreshold) {\r\n      const distance = e.clientX - (rect.right - edgeThreshold);\r\n      scrollDelta = Math.min(scrollSpeed, distance / 2);\r\n    }\r\n\r\n    if (scrollDelta !== 0) {\r\n      timelineScroll.scrollLeft += scrollDelta;\r\n    }\r\n\r\n    return scrollDelta !== 0;\r\n  }, []);\r\n\r\n  // Handle mouse move for dragging\r\n  const handleMouseMove = useCallback((e: MouseEvent) => {\r\n    if (dragMode === 'none') return;\r\n\r\n    // v0.17.379: Store last mouse event for auto-scroll interval\r\n    lastMouseEventRef.current = e;\r\n\r\n    const svgElement = svgRef.current?.ownerSVGElement;\r\n    if (!svgElement) return;\r\n\r\n    // v0.17.379: Perform auto-scroll when near edges\r\n    if (dragMode === 'move' || dragMode === 'resize-start' || dragMode === 'resize-end') {\r\n      const needsScroll = performAutoScroll(e);\r\n\r\n      // Start auto-scroll interval if near edge and not already scrolling\r\n      if (needsScroll && !autoScrollIntervalRef.current) {\r\n        autoScrollIntervalRef.current = window.setInterval(() => {\r\n          if (lastMouseEventRef.current) {\r\n            performAutoScroll(lastMouseEventRef.current);\r\n            // Re-trigger mouse move to update ghost position after scroll\r\n            handleMouseMove(lastMouseEventRef.current);\r\n          }\r\n        }, 16); // ~60fps\r\n      } else if (!needsScroll && autoScrollIntervalRef.current) {\r\n        // Stop auto-scroll when not near edge\r\n        window.clearInterval(autoScrollIntervalRef.current);\r\n        autoScrollIntervalRef.current = null;\r\n      }\r\n    }\r\n\r\n    const point = svgElement.createSVGPoint();\r\n    point.x = e.clientX;\r\n    point.y = e.clientY;\r\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\r\n\r\n    if (dragMode === 'connect') {\r\n      // Update connection line end point\r\n      setConnectionLine({ x: svgPoint.x, y: svgPoint.y });\r\n\r\n      // Check if hovering over another task\r\n      const targetTaskId = findTaskAtPoint(svgPoint.x, svgPoint.y);\r\n      setHoveredTaskId(targetTaskId);\r\n    } else if (dragMode === 'move') {\r\n      // Move entire bar (or all segments if split task)\r\n      const rawNewX = svgPoint.x - dragOffset;\r\n      const snappedX = snapToDay(rawNewX);\r\n      setGhostX(snappedX);\r\n      setGhostWidth(width);\r\n\r\n      // v0.13.0: Calculate days delta and notify for cascade preview\r\n      const daysDelta = Math.round((snappedX - x) / dayWidth);\r\n      onDragMove?.(task.id, daysDelta, true);\r\n\r\n      // v0.8.1: For split tasks, calculate offset relative to the DRAGGED SEGMENT position\r\n      if (task.segments && task.segments.length > 0 && draggedSegmentIndex !== null) {\r\n        const segmentOffset = snappedX - draggedSegmentStartX; // Use saved segment position\r\n        setSegmentDragOffsetX(segmentOffset);\r\n      }\r\n    } else if (dragMode === 'resize-start') {\r\n      // Resize from start\r\n      const rawNewStart = svgPoint.x;\r\n      const snappedStart = snapToDay(rawNewStart);\r\n      const newWidth = (x + width) - snappedStart;\r\n\r\n      // Prevent negative or too small width (minimum 1 day)\r\n      if (newWidth >= dayWidth) {\r\n        setGhostX(snappedStart);\r\n        setGhostWidth(newWidth);\r\n      }\r\n    } else if (dragMode === 'resize-end') {\r\n      // Resize from end\r\n      const rawNewEnd = svgPoint.x;\r\n      const snappedEnd = snapToDay(rawNewEnd);\r\n      const newWidth = snappedEnd - x;\r\n\r\n      // Prevent negative or too small width (minimum 1 day)\r\n      if (newWidth >= dayWidth) {\r\n        setGhostWidth(newWidth);\r\n      }\r\n    }\r\n  }, [dragMode, x, width, dayWidth, dragOffset, task, snapToDay, draggedSegmentIndex, draggedSegmentStartX, findTaskAtPoint, setHoveredTaskId, setConnectionLine, setGhostX, setGhostWidth, setSegmentDragOffsetX, onDragMove, performAutoScroll]);\r\n\r\n  // Handle mouse up to finish dragging\r\n  const handleMouseUp = useCallback(() => {\r\n    // v0.17.379: Clear auto-scroll interval\r\n    if (autoScrollIntervalRef.current) {\r\n      window.clearInterval(autoScrollIntervalRef.current);\r\n      autoScrollIntervalRef.current = null;\r\n    }\r\n    lastMouseEventRef.current = null;\r\n\r\n    if (dragMode === 'none') return;\r\n\r\n    if (dragMode === 'connect') {\r\n      // Create dependency if hovering over a valid task\r\n      if (hoveredTaskId && onDependencyCreate) {\r\n        onDependencyCreate(task, hoveredTaskId);\r\n      }\r\n      setConnectionLine(null);\r\n      setHoveredTaskId(null);\r\n    } else {\r\n      const taskDuration = task.endDate!.getTime() - task.startDate!.getTime();\r\n      let newStartDate: Date;\r\n      let newEndDate: Date;\r\n      let isValid = true;\r\n\r\n      if (dragMode === 'move') {\r\n        // Calculate new dates maintaining duration\r\n        newStartDate = pixelToDate(ghostX);\r\n        newEndDate = new Date(newStartDate.getTime() + taskDuration);\r\n\r\n        // v0.8.1: Bryntum-style - Update ONLY the dragged segment (independent movement)\r\n        if (task.segments && task.segments.length > 0 && draggedSegmentIndex !== null) {\r\n          const dayOffset = Math.round(segmentDragOffsetX / dayWidth);\r\n          const updatedSegments = task.segments.map((seg, idx) => {\r\n            // Only update the segment that was dragged\r\n            if (idx === draggedSegmentIndex) {\r\n              const newSegStart = new Date(seg.startDate);\r\n              const newSegEnd = new Date(seg.endDate);\r\n              newSegStart.setDate(newSegStart.getDate() + dayOffset);\r\n              newSegEnd.setDate(newSegEnd.getDate() + dayOffset);\r\n              return { startDate: newSegStart, endDate: newSegEnd };\r\n            }\r\n            // Keep other segments unchanged\r\n            return seg;\r\n          });\r\n\r\n          // Calculate new overall task dates (from all segments)\r\n          const allDates = updatedSegments.flatMap(s => [s.startDate, s.endDate]);\r\n          const newTaskStart = new Date(Math.min(...allDates.map(d => d.getTime())));\r\n          const newTaskEnd = new Date(Math.max(...allDates.map(d => d.getTime())));\r\n\r\n          // Update task with new segments\r\n          onDateChange?.({ ...task, segments: updatedSegments }, newTaskStart, newTaskEnd);\r\n          // v0.8.1: Use centralized reset function from useDragState hook\r\n          resetDragState(x, width);\r\n          return; // Exit early since we handled the update\r\n        }\r\n      } else if (dragMode === 'resize-start') {\r\n        // Change start date, keep end date\r\n        newStartDate = pixelToDate(ghostX);\r\n        newEndDate = task.endDate!;\r\n\r\n        // Validate: start date must be before or equal to end date (allow same-day tasks)\r\n        if (newStartDate > newEndDate) {\r\n          console.warn('Invalid date range: start date must be before or equal to end date');\r\n          isValid = false;\r\n        }\r\n      } else if (dragMode === 'resize-end') {\r\n        // Change end date, keep start date\r\n        newStartDate = task.startDate!;\r\n        newEndDate = pixelToDate(ghostX + ghostWidth);\r\n\r\n        // Validate: end date must be after or equal to start date (allow same-day tasks)\r\n        if (newEndDate < newStartDate) {\r\n          console.warn('Invalid date range: end date must be after or equal to start date');\r\n          isValid = false;\r\n        }\r\n      } else {\r\n        // Shouldn't reach here, but handle gracefully\r\n        isValid = false;\r\n      }\r\n\r\n      // Only update if valid\r\n      if (isValid && newStartDate! && newEndDate!) {\r\n        // v0.17.184: Allow same-day tasks (duration = 0), only reject negative durations\r\n        if (newEndDate.getTime() < newStartDate.getTime()) {\r\n          console.warn('Invalid date range: end date cannot be before start date');\r\n          // Reset to original dates by not calling onDateChange\r\n        } else {\r\n          onDateChange?.(task, newStartDate, newEndDate);\r\n        }\r\n      }\r\n    }\r\n\r\n    // v0.13.0: Notify drag ended to clear cascade previews\r\n    onDragMove?.(task.id, 0, false);\r\n\r\n    // v0.8.1: Use centralized reset function from useDragState hook\r\n    resetDragState(x, width);\r\n  }, [dragMode, ghostX, ghostWidth, task, onDateChange, hoveredTaskId, onDependencyCreate, x, width, dayWidth, pixelToDate, segmentDragOffsetX, draggedSegmentIndex, resetDragState, onDragMove]);\r\n\r\n  // Setup global mouse listeners for smooth dragging\r\n  useEffect(() => {\r\n    if (dragMode === 'none') return;\r\n\r\n    const handleGlobalMouseMove = (e: MouseEvent) => {\r\n      handleMouseMove(e);\r\n    };\r\n\r\n    const handleGlobalMouseUp = () => {\r\n      handleMouseUp();\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleGlobalMouseMove);\r\n    window.addEventListener('mouseup', handleGlobalMouseUp);\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleGlobalMouseMove);\r\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\r\n      // v0.17.379: Clean up auto-scroll interval on unmount\r\n      if (autoScrollIntervalRef.current) {\r\n        window.clearInterval(autoScrollIntervalRef.current);\r\n        autoScrollIntervalRef.current = null;\r\n      }\r\n    };\r\n  }, [dragMode, handleMouseMove, handleMouseUp]);\r\n\r\n  // v0.8.1: isDragging, isResizing, isConnecting now provided by useDragState hook\r\n  const displayX = isDragging && !isConnecting ? ghostX : x;\r\n  const displayWidth = isDragging && !isConnecting ? ghostWidth : width;\r\n\r\n  // v0.8.0: Generate custom class using templates\r\n  // v0.17.30: Removed tooltipText - native SVG <title> replaced by custom tooltip\r\n  const customClass = templates.taskClass(task);\r\n\r\n  // v0.17.334: Definitive solution - proper hover zone with visible fill for bounding box\r\n  // Key insight: transparent fill doesn't contribute to SVG group bounding box\r\n  // Using near-invisible fill (opacity 0.001) ensures the rect is part of the hover area\r\n\r\n  // v0.17.371: Extended hover area to include Link button position\r\n  // Link button is at x + width + 10 with radius 10, so we need to extend hover area\r\n  const linkButtonExtension = 24; // Extra width to include Link button area\r\n\r\n  return (\r\n    <g\r\n      ref={svgRef}\r\n      data-task-bar=\"true\"\r\n      onClick={() => !isDragging && onClick?.(task)}\r\n      onDoubleClick={(e) => {\r\n        if (!isDragging) {\r\n          e.stopPropagation();\r\n          onDoubleClick?.(task);\r\n        }\r\n      }}\r\n      onContextMenu={(e) => {\r\n        e.preventDefault();\r\n        onContextMenu?.(task, e as any);\r\n      }}\r\n      onMouseEnter={() => !isDragging && setIsHovered(true)}\r\n      onMouseLeave={() => {\r\n        if (!isDragging) {\r\n          setIsHovered(false);\r\n          setActiveZone(null);\r\n        }\r\n      }}\r\n    >\r\n      {/* v0.17.367: Extended hover detection area - includes Link button position */}\r\n      {/* This invisible rect ensures hover state is maintained while cursor moves to Link button */}\r\n      <rect\r\n        x={x}\r\n        y={y}\r\n        width={width + linkButtonExtension}\r\n        height={height}\r\n        fill=\"transparent\"\r\n        style={{ pointerEvents: 'all' }}\r\n      />\r\n      {/* v0.17.30: Removed native SVG <title> tooltip - using custom tooltip instead (lines ~1025-1162) */}\r\n      {/* Zone Indicators with hover feedback - v0.8.1: Disabled for split tasks (segments are independent) */}\r\n      {isHovered && !isDragging && !isSmallBar && !task.segments && (\r\n        <>\r\n          {/* Left resize zone with subtle highlight on hover */}\r\n          <rect\r\n            x={x}\r\n            y={y}\r\n            width={RESIZE_ZONE}\r\n            height={height}\r\n            fill={activeZone === 'resize-start' ? theme.accent : 'transparent'}\r\n            opacity={activeZone === 'resize-start' ? 0.15 : 0}\r\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\r\n            onMouseEnter={() => setActiveZone('resize-start')}\r\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-start')}\r\n          />\r\n          {/* Center move zone */}\r\n          <rect\r\n            x={x + RESIZE_ZONE}\r\n            y={y}\r\n            width={width - RESIZE_ZONE * 2}\r\n            height={height}\r\n            fill={activeZone === 'move' ? theme.accent : 'transparent'}\r\n            opacity={activeZone === 'move' ? 0.1 : 0}\r\n            style={{ cursor: 'grab', pointerEvents: 'all' }}\r\n            onMouseEnter={() => setActiveZone('move')}\r\n            onMouseDown={(e) => handleMouseDown(e as any, 'move')}\r\n          />\r\n          {/* Right resize zone with subtle highlight on hover */}\r\n          <rect\r\n            x={x + width - RESIZE_ZONE}\r\n            y={y}\r\n            width={RESIZE_ZONE}\r\n            height={height}\r\n            fill={activeZone === 'resize-end' ? theme.accent : 'transparent'}\r\n            opacity={activeZone === 'resize-end' ? 0.15 : 0}\r\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\r\n            onMouseEnter={() => setActiveZone('resize-end')}\r\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-end')}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* Simplified zones for very small bars (split in half) */}\r\n      {isHovered && !isDragging && isVerySmallBar && (\r\n        <>\r\n          {/* Left half - MOVE zone */}\r\n          <rect\r\n            x={x}\r\n            y={y}\r\n            width={width / 2}\r\n            height={height}\r\n            fill={activeZone === 'move' ? theme.accent : 'transparent'}\r\n            opacity={activeZone === 'move' ? 0.2 : 0}\r\n            style={{ cursor: 'grab', pointerEvents: 'all' }}\r\n            onMouseEnter={() => setActiveZone('move')}\r\n            onMouseDown={(e) => handleMouseDown(e as any, 'move')}\r\n          />\r\n          {/* Right half - RESIZE zone */}\r\n          <rect\r\n            x={x + width / 2}\r\n            y={y}\r\n            width={width / 2}\r\n            height={height}\r\n            fill={activeZone === 'resize-end' ? theme.accent : 'transparent'}\r\n            opacity={activeZone === 'resize-end' ? 0.2 : 0}\r\n            style={{ cursor: 'ew-resize', pointerEvents: 'all' }}\r\n            onMouseEnter={() => setActiveZone('resize-end')}\r\n            onMouseDown={(e) => handleMouseDown(e as any, 'resize-end')}\r\n          />\r\n          {/* Visual divider line at center */}\r\n          {isHovered && (\r\n            <motion.line\r\n              x1={x + width / 2}\r\n              y1={y + 4}\r\n              x2={x + width / 2}\r\n              y2={y + height - 4}\r\n              stroke={theme.textTertiary}\r\n              strokeWidth={1}\r\n              strokeDasharray=\"2 2\"\r\n              opacity={0.3}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 0.3 }}\r\n              transition={{ duration: 0.2 }}\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Ghost/Preview Bar (shown while dragging) */}\r\n      {/* v0.8.1: Hide ghost bar for split tasks - segments handle their own visualization */}\r\n      {/* v0.13.6: Simplified ghost bar - uses theme accent color */}\r\n      {isDragging && !isConnecting && !task.segments && (\r\n        <motion.rect\r\n          x={ghostX}\r\n          y={y}\r\n          width={ghostWidth}\r\n          height={height}\r\n          rx={borderRadius}\r\n          fill={theme.accent}\r\n          opacity={0.5}\r\n          stroke={theme.accent}\r\n          strokeWidth={2}\r\n          strokeDasharray=\"4 4\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 0.6 }}\r\n          transition={{ duration: 0.15 }}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n      )}\r\n\r\n      {/* Main Task Bar - Background (light for contrast with progress) - v0.8.0: With custom class */}\r\n      {/* v0.8.1: Hide main bar when task has segments (split task) */}\r\n      {/* v0.11.0: Custom task colors with parent/subtask opacity */}\r\n      {/* v0.13.6: Overdue tasks (past due + not completed) also shown in red */}\r\n      {!task.segments && (\r\n        <motion.rect\r\n          x={displayX}\r\n          y={y}\r\n          width={displayWidth}\r\n          height={height}\r\n          rx={borderRadius}\r\n          fill={taskColor}\r\n          data-task-class={customClass}\r\n          initial={{ opacity: 0, scale: 0.95 }}\r\n          animate={{\r\n            opacity: isDragging && !isConnecting\r\n              ? 0.15\r\n              : task.parentId\r\n              ? 0.6 // v0.11.0: Subtasks more transparent (60%)\r\n              : isHovered\r\n              ? 0.9 // Parent tasks more opaque on hover\r\n              : 0.8, // Parent tasks base opacity (80%)\r\n            scale: isHovered && !isDragging ? 1.02 : 1,\r\n          }}\r\n          transition={{\r\n            duration: 0.2,\r\n            ease: [0.4, 0, 0.2, 1],\r\n          }}\r\n          onMouseDown={(e) => handleMouseDown(e as any)}\r\n          style={{\r\n            cursor: isDragging ? (isConnecting ? 'crosshair' : isResizing ? 'ew-resize' : 'grabbing') : 'grab',\r\n            pointerEvents: 'all'\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Progress Fill - Solid color for instant visual scanning */}\r\n      {/* Eye processes shape/color faster than text */}\r\n      {/* v0.11.0: Use custom task color for progress fill */}\r\n      {/* v0.13.6: Overdue tasks also shown in red */}\r\n      {!task.segments && (\r\n        <rect\r\n          x={displayX}\r\n          y={y}\r\n          width={displayWidth * (task.progress / 100)}\r\n          height={height}\r\n          rx={borderRadius}\r\n          fill={taskColor}\r\n          opacity={1}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n      )}\r\n\r\n      {/* v0.8.1: Render segments if task is split (has gaps) - Bryntum-style independent segments */}\r\n      {task.segments && task.segments.map((segment, idx) => {\r\n        const segmentStartX = ((segment.startDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)) * dayWidth;\r\n        const segmentEndX = ((segment.endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24)) * dayWidth;\r\n        const segmentWidth = segmentEndX - segmentStartX + dayWidth;\r\n\r\n        // v0.8.1: Only apply drag offset to the specific segment being dragged\r\n        const isThisSegmentDragging = isDragging && dragMode === 'move' && draggedSegmentIndex === idx;\r\n        const isThisSegmentHovered = hoveredSegmentIndex === idx;\r\n        const displaySegmentX = isThisSegmentDragging ? segmentStartX + segmentDragOffsetX : segmentStartX;\r\n\r\n        return (\r\n          <g\r\n            key={`segment-${idx}`}\r\n            onMouseEnter={() => !isDragging && setHoveredSegmentIndex(idx)}\r\n            onMouseLeave={() => !isDragging && setHoveredSegmentIndex(null)}\r\n          >\r\n            {/* Segment background - interactive */}\r\n            {/* v0.11.0: Custom task colors for segments */}\r\n            {/* v0.13.6: Overdue tasks also shown in red */}\r\n            {/* v0.17.37: Now uses priority-based colors via taskColor */}\r\n            <motion.rect\r\n              x={displaySegmentX}\r\n              y={y}\r\n              width={segmentWidth}\r\n              height={height}\r\n              rx={borderRadius}\r\n              fill={taskColor}\r\n              initial={{ opacity: 0, scale: 0.95 }}\r\n              animate={{\r\n                opacity: isThisSegmentDragging\r\n                  ? 0.6\r\n                  : task.parentId\r\n                  ? 0.6 // v0.11.0: Subtask segments more transparent\r\n                  : isThisSegmentHovered\r\n                  ? 0.9\r\n                  : 0.8,\r\n                scale: isThisSegmentHovered && !isDragging ? 1.02 : 1,\r\n              }}\r\n              transition={{\r\n                duration: 0.2,\r\n                ease: [0.4, 0, 0.2, 1],\r\n              }}\r\n              onMouseDown={(e) => {\r\n                // v0.8.1: Capture which segment is being dragged and pass its position\r\n                e.stopPropagation();\r\n                setDraggedSegmentIndex(idx);\r\n                setDraggedSegmentStartX(segmentStartX); // Save original position for offset calculation\r\n                handleMouseDown(e as any, undefined, segmentStartX);\r\n              }}\r\n              style={{\r\n                cursor: isDragging ? (isConnecting ? 'crosshair' : isResizing ? 'ew-resize' : 'grabbing') : 'grab',\r\n                pointerEvents: 'all'\r\n              }}\r\n            />\r\n            {/* Segment progress - v0.11.0: Use custom task color */}\r\n            {/* v0.13.6: Overdue tasks also shown in red */}\r\n            {/* v0.17.37: Now uses priority-based colors via taskColor */}\r\n            <rect\r\n              x={displaySegmentX}\r\n              y={y}\r\n              width={segmentWidth * (task.progress / 100)}\r\n              height={height}\r\n              rx={borderRadius}\r\n              fill={taskColor}\r\n              opacity={1}\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          </g>\r\n        );\r\n      })}\r\n\r\n      {/* Neutral Theme: State visualization without color */}\r\n      {/* v0.8.1: Hide state visualization for split tasks (shown on segments instead) */}\r\n      {isNeutralTheme && (isOverdue || isAtRisk) && !task.segments && (\r\n        <>\r\n          {/* At Risk: Dotted border */}\r\n          {isAtRisk && !isOverdue && (\r\n            <rect\r\n              x={displayX}\r\n              y={y}\r\n              width={displayWidth}\r\n              height={height}\r\n              rx={borderRadius}\r\n              fill=\"none\"\r\n              stroke={theme.border}\r\n              strokeWidth={2}\r\n              strokeDasharray=\"4 4\"\r\n              opacity={0.8}\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          )}\r\n\r\n          {/* Overdue: Diagonal stripes pattern */}\r\n          {isOverdue && (\r\n            <rect\r\n              x={displayX}\r\n              y={y}\r\n              width={displayWidth}\r\n              height={height}\r\n              rx={borderRadius}\r\n              fill=\"url(#diagonal-stripes)\"\r\n              opacity={0.3}\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Task Name Text - v0.8.0: Using taskLabel template */}\r\n      {/* v0.8.1: Hide text for split tasks to avoid blocking segment clicks */}\r\n      {displayWidth > 60 && !task.segments && (() => {\r\n        const label = templates.taskLabel(task);\r\n        const labelText = typeof label === 'string' ? label : task.name;\r\n        const truncated = labelText.length > Math.floor(displayWidth / 8)\r\n          ? `${labelText.substring(0, Math.floor(displayWidth / 8))}...`\r\n          : labelText;\r\n\r\n        return (\r\n          <text\r\n            x={displayX + 12}\r\n            y={y + height / 2}\r\n            dominantBaseline=\"middle\"\r\n            fill={isCompleted ? 'rgba(255, 255, 255, 0.6)' : '#FFFFFF'}\r\n            fontSize=\"13\"\r\n            fontWeight=\"500\"\r\n            fontFamily=\"Inter, sans-serif\"\r\n            style={{\r\n              pointerEvents: 'none',\r\n              userSelect: 'none',\r\n              // v0.17.41: Strikethrough for completed tasks\r\n              textDecoration: isCompleted ? 'line-through' : 'none',\r\n            }}\r\n          >\r\n            {truncated}\r\n          </text>\r\n        );\r\n      })()}\r\n\r\n      {/* Progress Percentage */}\r\n      {/* v0.8.1: Hide progress text for split tasks to avoid blocking segment clicks */}\r\n      {displayWidth > 100 && task.progress > 0 && task.progress < 100 && !isDragging && !task.segments && (\r\n        <text\r\n          x={displayX + displayWidth - 12}\r\n          y={y + height / 2}\r\n          dominantBaseline=\"middle\"\r\n          textAnchor=\"end\"\r\n          fill=\"rgba(255, 255, 255, 0.9)\"\r\n          fontSize=\"11\"\r\n          fontWeight=\"600\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n          style={{ pointerEvents: 'none', userSelect: 'none' }}\r\n        >\r\n          {task.progress}%\r\n        </text>\r\n      )}\r\n\r\n      {/* Status Indicator Badge */}\r\n      {/* v0.8.1: Hide status badge for split tasks to avoid blocking segment clicks */}\r\n      {task.status && displayWidth > 80 && !isDragging && !task.segments && (\r\n        <g style={{ pointerEvents: 'none' }}>\r\n          {task.status === 'completed' && (\r\n            <circle\r\n              cx={displayX + displayWidth - 8}\r\n              cy={y + 8}\r\n              r={4}\r\n              fill={theme.statusCompleted}\r\n              stroke=\"#FFFFFF\"\r\n              strokeWidth={1.5}\r\n            />\r\n          )}\r\n          {task.status === 'in-progress' && (\r\n            <circle\r\n              cx={displayX + displayWidth - 8}\r\n              cy={y + 8}\r\n              r={4}\r\n              fill={theme.statusInProgress}\r\n              stroke=\"#FFFFFF\"\r\n              strokeWidth={1.5}\r\n              opacity={0.8}\r\n            />\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* v0.17.340: ClickUp-style resize handles - invisible hit area + visible indicator */}\r\n      {(isHovered || isResizing) && !isConnecting && !task.segments && (\r\n        <>\r\n          {/* LEFT RESIZE HANDLE */}\r\n          <g>\r\n            {/* Hit area - invisible, large, easy to click (16px wide) */}\r\n            <rect\r\n              x={displayX - 2}\r\n              y={y}\r\n              width={16}\r\n              height={height}\r\n              fill=\"transparent\"\r\n              style={{ cursor: 'ew-resize' }}\r\n              onMouseEnter={() => setActiveZone('resize-start')}\r\n              onMouseLeave={() => setActiveZone(null)}\r\n              onMouseDown={(e) => {\r\n                e.stopPropagation();\r\n                handleMouseDown(e as any, 'resize-start');\r\n              }}\r\n            />\r\n            {/* Visual indicator - small, subtle line (ClickUp style) */}\r\n            <motion.rect\r\n              x={displayX + 4}\r\n              y={y + 8}\r\n              width={3}\r\n              height={height - 16}\r\n              rx={1.5}\r\n              fill={activeZone === 'resize-start' || dragMode === 'resize-start' ? '#ffffff' : 'rgba(255,255,255,0.5)'}\r\n              style={{ pointerEvents: 'none' }}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              transition={{ duration: 0.15 }}\r\n            />\r\n          </g>\r\n\r\n          {/* RIGHT RESIZE HANDLE */}\r\n          <g>\r\n            {/* Hit area - invisible, large, easy to click (16px wide) */}\r\n            <rect\r\n              x={displayX + displayWidth - 14}\r\n              y={y}\r\n              width={16}\r\n              height={height}\r\n              fill=\"transparent\"\r\n              style={{ cursor: 'ew-resize' }}\r\n              onMouseEnter={() => setActiveZone('resize-end')}\r\n              onMouseLeave={() => setActiveZone(null)}\r\n              onMouseDown={(e) => {\r\n                e.stopPropagation();\r\n                handleMouseDown(e as any, 'resize-end');\r\n              }}\r\n            />\r\n            {/* Visual indicator - small, subtle line (ClickUp style) */}\r\n            <motion.rect\r\n              x={displayX + displayWidth - 7}\r\n              y={y + 8}\r\n              width={3}\r\n              height={height - 16}\r\n              rx={1.5}\r\n              fill={activeZone === 'resize-end' || dragMode === 'resize-end' ? '#ffffff' : 'rgba(255,255,255,0.5)'}\r\n              style={{ pointerEvents: 'none' }}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              transition={{ duration: 0.15 }}\r\n            />\r\n          </g>\r\n        </>\r\n      )}\r\n\r\n      {/* v0.17.371: ClickUp-style Link button - smaller, more subtle like ClickUp */}\r\n      <AnimatePresence>\r\n        {isHovered && !isDragging && !task.segments && (\r\n          <motion.g\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.15 }}\r\n          >\r\n            {/* Hit area - invisible circle for easy clicking */}\r\n            <circle\r\n              cx={x + width + 10}\r\n              cy={y + height / 2}\r\n              r={10}\r\n              fill=\"transparent\"\r\n              style={{ cursor: 'crosshair' }}\r\n              onMouseEnter={() => setActiveZone('connect')}\r\n              onMouseLeave={() => setActiveZone(null)}\r\n              onMouseDown={(e) => {\r\n                e.stopPropagation();\r\n                handleMouseDown(e as any, 'connect');\r\n              }}\r\n            />\r\n            {/* Visual circle - small dot like ClickUp */}\r\n            <motion.circle\r\n              cx={x + width + 10}\r\n              cy={y + height / 2}\r\n              r={4}\r\n              fill={theme.accent}\r\n              stroke=\"#FFFFFF\"\r\n              strokeWidth={1.5}\r\n              style={{ pointerEvents: 'none' }}\r\n              initial={{ scale: 0 }}\r\n              animate={{\r\n                scale: activeZone === 'connect' ? 1.4 : 1,\r\n              }}\r\n              exit={{ scale: 0 }}\r\n              transition={{\r\n                duration: 0.15,\r\n                type: 'spring',\r\n                stiffness: 500,\r\n                damping: 30,\r\n              }}\r\n            />\r\n          </motion.g>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Connection Line (while connecting) */}\r\n      {isConnecting && connectionLine && (\r\n        <g style={{ pointerEvents: 'none' }}>\r\n          <motion.line\r\n            x1={x + width}\r\n            y1={y + height / 2}\r\n            x2={connectionLine.x}\r\n            y2={connectionLine.y}\r\n            stroke={hoveredTaskId ? theme.statusCompleted : theme.accent}\r\n            strokeWidth={hoveredTaskId ? 3 : 2}\r\n            strokeDasharray=\"6 4\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: hoveredTaskId ? 1 : 0.8 }}\r\n            transition={{ duration: 0.15 }}\r\n          />\r\n          <motion.circle\r\n            cx={connectionLine.x}\r\n            cy={connectionLine.y}\r\n            r={hoveredTaskId ? 8 : 6}\r\n            fill={hoveredTaskId ? theme.statusCompleted : theme.accent}\r\n            stroke=\"#FFFFFF\"\r\n            strokeWidth={2}\r\n            initial={{ scale: 0 }}\r\n            animate={{ scale: 1 }}\r\n            transition={{ duration: 0.15 }}\r\n          />\r\n          {/* Hover indicator text */}\r\n          {hoveredTaskId && (\r\n            <motion.text\r\n              x={connectionLine.x + 15}\r\n              y={connectionLine.y}\r\n              dominantBaseline=\"middle\"\r\n              fill={theme.statusCompleted}\r\n              fontSize=\"11\"\r\n              fontWeight=\"600\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n              initial={{ opacity: 0, x: connectionLine.x + 10 }}\r\n              animate={{ opacity: 1, x: connectionLine.x + 15 }}\r\n              transition={{ duration: 0.2 }}\r\n            >\r\n              Connect\r\n            </motion.text>\r\n          )}\r\n        </g>\r\n      )}\r\n\r\n      {/* Hover Glow Effect - v0.8.1: Disabled for split tasks (segments are independent) */}\r\n      {(isHovered || isDragging) && !isConnecting && !task.segments && (\r\n        <motion.rect\r\n          x={displayX - 2}\r\n          y={y - 2}\r\n          width={displayWidth + 4}\r\n          height={height + 4}\r\n          rx={borderRadius + 2}\r\n          fill=\"none\"\r\n          stroke={isDragging ? theme.accent : theme.taskBarPrimary}\r\n          strokeWidth={2}\r\n          opacity={isDragging ? 0.6 : 0.4}\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: isDragging ? 0.6 : 0.4 }}\r\n          transition={{ duration: 0.2 }}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n      )}\r\n\r\n      {/* Vertical Snap Guides (shown while resizing) */}\r\n      {isResizing && (\r\n        <>\r\n          <line\r\n            x1={ghostX}\r\n            y1={0}\r\n            x2={ghostX}\r\n            y2={1000}\r\n            stroke={theme.accent}\r\n            strokeWidth={1}\r\n            strokeDasharray=\"4 4\"\r\n            opacity={0.3}\r\n            style={{ pointerEvents: 'none' }}\r\n          />\r\n          <line\r\n            x1={ghostX + ghostWidth}\r\n            y1={0}\r\n            x2={ghostX + ghostWidth}\r\n            y2={1000}\r\n            stroke={theme.accent}\r\n            strokeWidth={1}\r\n            strokeDasharray=\"4 4\"\r\n            opacity={0.3}\r\n            style={{ pointerEvents: 'none' }}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* Enhanced Detailed Tooltip (shown on hover, hidden while dragging) - v0.8.1: Disabled for split tasks (segments are independent) */}\r\n      {/* v0.17.31: Adaptive positioning - shows below task when not enough space above */}\r\n      {/* v0.17.76: Only render internal tooltip if external handler not provided (backwards compatibility) */}\r\n      <AnimatePresence>\r\n        {isHovered && !isDragging && !task.segments && !onHoverChange && (() => {\r\n          // v0.17.31: Calculate if tooltip should appear below the task bar\r\n          // Tooltip height is 82px + 13px for arrow = ~95px needed above\r\n          // If task is within 100px of top, show tooltip below instead\r\n          const tooltipHeight = 82;\r\n          const tooltipGap = 13; // Gap between tooltip and task bar\r\n          const showBelow = y < 100; // Threshold for flipping\r\n\r\n          // Calculate Y positions based on direction\r\n          const tooltipY = showBelow\r\n            ? y + height + tooltipGap // Below: start after task bar + gap\r\n            : y - tooltipHeight - tooltipGap; // Above: tooltip bottom at gap above task\r\n\r\n          // Arrow path changes based on direction\r\n          const arrowPath = showBelow\r\n            ? `M ${displayX + displayWidth / 2 - 6} ${y + height + 3} L ${displayX + displayWidth / 2} ${y + height + 13} L ${displayX + displayWidth / 2 + 6} ${y + height + 3}` // Arrow pointing up\r\n            : `M ${displayX + displayWidth / 2 - 6} ${y - 13} L ${displayX + displayWidth / 2} ${y - 3} L ${displayX + displayWidth / 2 + 6} ${y - 13}`; // Arrow pointing down\r\n\r\n          // Text Y offsets from tooltip top\r\n          const nameY = tooltipY + 22;\r\n          const row1Y = tooltipY + 40;\r\n          const row2Y = tooltipY + 55;\r\n          const assigneesY = tooltipY + 70;\r\n          const hintsY = showBelow ? tooltipY + tooltipHeight - 5 : y - 18;\r\n\r\n          return (\r\n            <motion.g\r\n              initial={{ opacity: 0, y: showBelow ? -10 : 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: showBelow ? -10 : 10 }}\r\n              transition={{ duration: 0.2 }}\r\n              style={{ pointerEvents: 'none' }}\r\n            >\r\n              {/* Tooltip Arrow - render first so it's behind the rect */}\r\n              <path\r\n                d={arrowPath}\r\n                fill={theme.bgSecondary}\r\n                stroke={theme.border}\r\n                strokeWidth={1}\r\n              />\r\n\r\n              {/* Tooltip Background */}\r\n              <rect\r\n                x={displayX + displayWidth / 2 - 120}\r\n                y={tooltipY}\r\n                width={240}\r\n                height={tooltipHeight}\r\n                rx={8}\r\n                fill={theme.bgSecondary}\r\n                stroke={theme.border}\r\n                strokeWidth={1}\r\n                filter=\"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15))\"\r\n              />\r\n\r\n              {/* Task Name */}\r\n              <text\r\n                x={displayX + displayWidth / 2}\r\n                y={nameY}\r\n                textAnchor=\"middle\"\r\n                fill={theme.textPrimary}\r\n                fontSize=\"13\"\r\n                fontWeight=\"600\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                {task.name.length > 28 ? `${task.name.substring(0, 28)}...` : task.name}\r\n              </text>\r\n\r\n              {/* Dates */}\r\n              <text\r\n                x={displayX + displayWidth / 2 - 110}\r\n                y={row1Y}\r\n                fill={theme.textTertiary}\r\n                fontSize=\"11\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                Start:\r\n              </text>\r\n              <text\r\n                x={displayX + displayWidth / 2 - 70}\r\n                y={row1Y}\r\n                fill={theme.textSecondary}\r\n                fontSize=\"11\"\r\n                fontWeight=\"500\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                {formatDate(task.startDate!)}\r\n              </text>\r\n\r\n              <text\r\n                x={displayX + displayWidth / 2 - 110}\r\n                y={row2Y}\r\n                fill={theme.textTertiary}\r\n                fontSize=\"11\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                End:\r\n              </text>\r\n              <text\r\n                x={displayX + displayWidth / 2 - 70}\r\n                y={row2Y}\r\n                fill={theme.textSecondary}\r\n                fontSize=\"11\"\r\n                fontWeight=\"500\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                {formatDate(task.endDate!)}\r\n              </text>\r\n\r\n              {/* Duration */}\r\n              <text\r\n                x={displayX + displayWidth / 2 + 10}\r\n                y={row1Y}\r\n                fill={theme.textTertiary}\r\n                fontSize=\"11\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                Duration:\r\n              </text>\r\n              <text\r\n                x={displayX + displayWidth / 2 + 65}\r\n                y={row1Y}\r\n                fill={theme.textSecondary}\r\n                fontSize=\"11\"\r\n                fontWeight=\"500\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                {getDuration()}\r\n              </text>\r\n\r\n              {/* Progress */}\r\n              <text\r\n                x={displayX + displayWidth / 2 + 10}\r\n                y={row2Y}\r\n                fill={theme.textTertiary}\r\n                fontSize=\"11\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                Progress:\r\n              </text>\r\n              <text\r\n                x={displayX + displayWidth / 2 + 65}\r\n                y={row2Y}\r\n                fill={theme.textSecondary}\r\n                fontSize=\"11\"\r\n                fontWeight=\"500\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n              >\r\n                {task.progress}%\r\n              </text>\r\n\r\n              {/* Assignees */}\r\n              {task.assignees && task.assignees.length > 0 && (\r\n                <>\r\n                  <text\r\n                    x={displayX + displayWidth / 2 - 110}\r\n                    y={assigneesY}\r\n                    fill={theme.textTertiary}\r\n                    fontSize=\"11\"\r\n                    fontFamily=\"Inter, sans-serif\"\r\n                  >\r\n                    Assignees:\r\n                  </text>\r\n                  <text\r\n                    x={displayX + displayWidth / 2 - 50}\r\n                    y={assigneesY}\r\n                    fill={theme.textSecondary}\r\n                    fontSize=\"11\"\r\n                    fontWeight=\"500\"\r\n                    fontFamily=\"Inter, sans-serif\"\r\n                  >\r\n                    {task.assignees.map(a => a.name).join(', ').substring(0, 30)}\r\n                    {task.assignees.map(a => a.name).join(', ').length > 30 ? '...' : ''}\r\n                  </text>\r\n                </>\r\n              )}\r\n\r\n              {/* Interaction Hints - Adaptive for bar size */}\r\n              {!showBelow && (\r\n                <text\r\n                  x={displayX + displayWidth / 2}\r\n                  y={hintsY}\r\n                  textAnchor=\"middle\"\r\n                  fill={theme.textTertiary}\r\n                  fontSize=\"9\"\r\n                  fontFamily=\"Inter, sans-serif\"\r\n                  style={{ opacity: 0.7 }}\r\n                >\r\n                  {isVerySmallBar\r\n                    ? 'Left: move  Right: resize'\r\n                    : isSmallBar\r\n                    ? 'Drag to move  Hold ALT + drag edge to resize'\r\n                    : 'Drag edges to resize  Drag center to move  Click  to link'\r\n                  }\r\n                </text>\r\n              )}\r\n            </motion.g>\r\n          );\r\n        })()}\r\n      </AnimatePresence>\r\n    </g>\r\n  );\r\n}\r\n","/**\r\n * TaskTooltip - v0.17.76\r\n *\r\n * Renders task tooltips in a separate SVG layer to ensure they always appear\r\n * above all task bars regardless of their vertical position.\r\n *\r\n * This solves the SVG z-order issue where tooltips appearing below a task bar\r\n * would be hidden behind tasks rendered later in the DOM.\r\n */\r\n\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task } from './types';\r\n\r\nexport interface TaskTooltipData {\r\n  task: Task;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  showBelow: boolean;\r\n}\r\n\r\ninterface TaskTooltipProps {\r\n  tooltipData: TaskTooltipData | null;\r\n  theme: any;\r\n}\r\n\r\nexport function TaskTooltip({ tooltipData, theme }: TaskTooltipProps) {\r\n  if (!tooltipData) return null;\r\n\r\n  const { task, x, y, width, height, showBelow } = tooltipData;\r\n\r\n  const tooltipHeight = 82;\r\n  const tooltipGap = 13;\r\n\r\n  // Calculate tooltip Y position\r\n  const tooltipY = showBelow\r\n    ? y + height + tooltipGap\r\n    : y - tooltipHeight - tooltipGap;\r\n\r\n  // Arrow path\r\n  const arrowPath = showBelow\r\n    ? `M ${x + width / 2 - 6} ${y + height + 3} L ${x + width / 2} ${y + height + 13} L ${x + width / 2 + 6} ${y + height + 3}`\r\n    : `M ${x + width / 2 - 6} ${y - 13} L ${x + width / 2} ${y - 3} L ${x + width / 2 + 6} ${y - 13}`;\r\n\r\n  // Text Y positions\r\n  const nameY = tooltipY + 22;\r\n  const row1Y = tooltipY + 40;\r\n  const row2Y = tooltipY + 55;\r\n  const assigneesY = tooltipY + 70;\r\n\r\n  // Format date\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  // Calculate duration\r\n  const getDuration = () => {\r\n    if (!task.startDate || !task.endDate) return 'N/A';\r\n    const days = Math.ceil((task.endDate.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    return `${days} day${days !== 1 ? 's' : ''}`;\r\n  };\r\n\r\n  // Bar size flags for hint text\r\n  const isSmallBar = width < 50;\r\n  const isVerySmallBar = width < 40;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.g\r\n        initial={{ opacity: 0, y: showBelow ? -10 : 10 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        exit={{ opacity: 0, y: showBelow ? -10 : 10 }}\r\n        transition={{ duration: 0.2 }}\r\n        style={{ pointerEvents: 'none' }}\r\n      >\r\n        {/* Tooltip Arrow */}\r\n        <path\r\n          d={arrowPath}\r\n          fill={theme.bgSecondary}\r\n          stroke={theme.border}\r\n          strokeWidth={1}\r\n        />\r\n\r\n        {/* Tooltip Background */}\r\n        <rect\r\n          x={x + width / 2 - 120}\r\n          y={tooltipY}\r\n          width={240}\r\n          height={tooltipHeight}\r\n          rx={8}\r\n          fill={theme.bgSecondary}\r\n          stroke={theme.border}\r\n          strokeWidth={1}\r\n          filter=\"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15))\"\r\n        />\r\n\r\n        {/* Task Name */}\r\n        <text\r\n          x={x + width / 2}\r\n          y={nameY}\r\n          textAnchor=\"middle\"\r\n          fill={theme.textPrimary}\r\n          fontSize=\"13\"\r\n          fontWeight=\"600\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          {task.name.length > 28 ? `${task.name.substring(0, 28)}...` : task.name}\r\n        </text>\r\n\r\n        {/* Start Date */}\r\n        <text\r\n          x={x + width / 2 - 110}\r\n          y={row1Y}\r\n          fill={theme.textTertiary}\r\n          fontSize=\"11\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          Start:\r\n        </text>\r\n        <text\r\n          x={x + width / 2 - 70}\r\n          y={row1Y}\r\n          fill={theme.textSecondary}\r\n          fontSize=\"11\"\r\n          fontWeight=\"500\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          {task.startDate ? formatDate(task.startDate) : 'N/A'}\r\n        </text>\r\n\r\n        {/* End Date */}\r\n        <text\r\n          x={x + width / 2 - 110}\r\n          y={row2Y}\r\n          fill={theme.textTertiary}\r\n          fontSize=\"11\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          End:\r\n        </text>\r\n        <text\r\n          x={x + width / 2 - 70}\r\n          y={row2Y}\r\n          fill={theme.textSecondary}\r\n          fontSize=\"11\"\r\n          fontWeight=\"500\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          {task.endDate ? formatDate(task.endDate) : 'N/A'}\r\n        </text>\r\n\r\n        {/* Duration */}\r\n        <text\r\n          x={x + width / 2 + 10}\r\n          y={row1Y}\r\n          fill={theme.textTertiary}\r\n          fontSize=\"11\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          Duration:\r\n        </text>\r\n        <text\r\n          x={x + width / 2 + 65}\r\n          y={row1Y}\r\n          fill={theme.textSecondary}\r\n          fontSize=\"11\"\r\n          fontWeight=\"500\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          {getDuration()}\r\n        </text>\r\n\r\n        {/* Progress */}\r\n        <text\r\n          x={x + width / 2 + 10}\r\n          y={row2Y}\r\n          fill={theme.textTertiary}\r\n          fontSize=\"11\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          Progress:\r\n        </text>\r\n        <text\r\n          x={x + width / 2 + 65}\r\n          y={row2Y}\r\n          fill={theme.textSecondary}\r\n          fontSize=\"11\"\r\n          fontWeight=\"500\"\r\n          fontFamily=\"Inter, sans-serif\"\r\n        >\r\n          {task.progress}%\r\n        </text>\r\n\r\n        {/* Assignees */}\r\n        {task.assignees && task.assignees.length > 0 && (\r\n          <>\r\n            <text\r\n              x={x + width / 2 - 110}\r\n              y={assigneesY}\r\n              fill={theme.textTertiary}\r\n              fontSize=\"11\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              Assignees:\r\n            </text>\r\n            <text\r\n              x={x + width / 2 - 50}\r\n              y={assigneesY}\r\n              fill={theme.textSecondary}\r\n              fontSize=\"11\"\r\n              fontWeight=\"500\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              {task.assignees.map(a => a.name).join(', ').substring(0, 30)}\r\n              {task.assignees.map(a => a.name).join(', ').length > 30 ? '...' : ''}\r\n            </text>\r\n          </>\r\n        )}\r\n\r\n        {/* v0.17.137: Removed interaction hints text for cleaner tooltip */}\r\n      </motion.g>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport type { DependencyLineStyle } from './types';\r\n\r\n// v0.17.363: Simplified to single-layer rendering with correct ClickUp-style routing\r\n// Data for hover state (delete button position tracking)\r\nexport interface DependencyHoverData {\r\n  x1: number;\r\n  y1: number;\r\n  x2: number;\r\n  y2: number;\r\n  onDelete: () => void;\r\n  lineStyle?: DependencyLineStyle;\r\n  mouseX?: number;\r\n  mouseY?: number;\r\n}\r\n\r\n// Keep old interface name for backwards compatibility\r\nexport type DependencyDeleteButtonData = DependencyHoverData;\r\n\r\ninterface DependencyLineProps {\r\n  x1: number; // Exit X (right side of source bar)\r\n  y1: number; // Exit Y (center of source bar)\r\n  x2: number; // Enter X (left side of destination bar)\r\n  y2: number; // Enter Y (center of destination bar)\r\n  theme: any;\r\n  onDelete?: () => void;\r\n  // v0.17.310: Dependency line style (curved or squared)\r\n  lineStyle?: DependencyLineStyle;\r\n  // v0.17.363: Is this line being rendered in the hover layer?\r\n  isHoverLayer?: boolean;\r\n}\r\n\r\n/**\r\n * v0.17.364: TRUE ClickUp-style dependency line routing\r\n *\r\n * RULES:\r\n * 1. Lines ALWAYS exit from the RIGHT side of the source bar\r\n * 2. Lines ALWAYS enter from the LEFT side of the destination bar\r\n * 3. The vertical segment is ALWAYS placed to the LEFT of the destination bar\r\n *\r\n * Pattern: source(right)  horizontal  vertical  horizontal  destination(left)\r\n *\r\n * For FORWARD dependencies (x2 > x1, destination RIGHT of source):\r\n *   The vertical segment is just before destination: turnX = x2 - OFFSET\r\n *   Path: right  horizontal  down/up  right into destination\r\n *\r\n * For BACKWARD dependencies (x2 <= x1, destination LEFT of or at same X as source):\r\n *   The vertical segment must still be LEFT of destination: turnX = x2 - OFFSET\r\n *   Path: right  horizontal past source  down/up  LEFT back to destination\r\n */\r\nexport function DependencyLine({\r\n  x1, y1, x2, y2,\r\n  theme,\r\n  onDelete,\r\n  lineStyle = 'curved',\r\n  isHoverLayer = false,\r\n}: DependencyLineProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const [mousePos, setMousePos] = useState<{ x: number; y: number } | null>(null);\r\n\r\n  const dy = y2 - y1;\r\n  const goingDown = dy > 0;\r\n  const isSameRow = Math.abs(dy) < 5;\r\n\r\n  // Corner radius for smooth turns\r\n  const cornerRadius = 5;\r\n  const r = cornerRadius;\r\n\r\n  // OFFSET from bars for the vertical segment\r\n  const OFFSET = 20;\r\n\r\n  // v0.17.366: isBackward needs to be defined outside the else block for delete button positioning\r\n  const isBackward = !isSameRow && x2 <= x1;\r\n\r\n  let path: string;\r\n  let turnX: number;\r\n\r\n  if (isSameRow) {\r\n    // Same row - direct horizontal line (or gentle curve)\r\n    turnX = (x1 + x2) / 2;\r\n    if (lineStyle === 'squared') {\r\n      path = `M ${x1} ${y1} L ${x2} ${y2}`;\r\n    } else {\r\n      const ctrlOffset = Math.min(Math.abs(x2 - x1) / 3, 30);\r\n      path = `M ${x1} ${y1} C ${x1 + ctrlOffset} ${y1}, ${x2 - ctrlOffset} ${y2}, ${x2} ${y2}`;\r\n    }\r\n  } else {\r\n    // Different rows - need routing\r\n    // The vertical segment MUST be to the LEFT of the destination (x2)\r\n    // This is the KEY insight: turnX = x2 - OFFSET, ALWAYS\r\n    turnX = x2 - OFFSET;\r\n\r\n    if (isBackward) {\r\n      // BACKWARD dependency: destination is to the LEFT of source\r\n      // The MAIN vertical segment MUST be to the LEFT of the destination bar\r\n      //\r\n      // We need a 5-segment path:\r\n      // 1. Exit right from source (short horizontal)\r\n      // 2. Go down/up partway (short vertical)\r\n      // 3. Go LEFT past the destination (long horizontal)\r\n      // 4. Go down/up to destination row (MAIN vertical - LEFT of destination)\r\n      // 5. Go RIGHT into destination (short horizontal)\r\n\r\n      const exitPadding = 15;\r\n      const firstTurnX = x1 + exitPadding;   // Just after source\r\n      const secondTurnX = x2 - OFFSET;        // Just LEFT of destination (this is the main vertical)\r\n\r\n      // Y position for the horizontal bridge between the two verticals\r\n      // Go halfway between source and destination rows\r\n      const bridgeY = goingDown ? y1 + 20 : y1 - 20;\r\n\r\n      turnX = secondTurnX; // For delete button positioning\r\n\r\n      if (lineStyle === 'squared') {\r\n        path = `M ${x1} ${y1} ` +\r\n               `L ${firstTurnX} ${y1} ` +          // 1. Exit right\r\n               `L ${firstTurnX} ${bridgeY} ` +     // 2. Short vertical\r\n               `L ${secondTurnX} ${bridgeY} ` +    // 3. Horizontal left (bridge)\r\n               `L ${secondTurnX} ${y2} ` +         // 4. Main vertical (LEFT of dest)\r\n               `L ${x2} ${y2}`;                    // 5. Enter destination from left\r\n      } else {\r\n        // Curved version with 4 turns\r\n        if (goingDown) {\r\n          path = `M ${x1} ${y1} ` +\r\n                 `L ${firstTurnX - r} ${y1} ` +\r\n                 `Q ${firstTurnX} ${y1} ${firstTurnX} ${y1 + r} ` +         // Turn 1: down\r\n                 `L ${firstTurnX} ${bridgeY - r} ` +\r\n                 `Q ${firstTurnX} ${bridgeY} ${firstTurnX - r} ${bridgeY} ` + // Turn 2: left\r\n                 `L ${secondTurnX + r} ${bridgeY} ` +\r\n                 `Q ${secondTurnX} ${bridgeY} ${secondTurnX} ${bridgeY + r} ` + // Turn 3: down\r\n                 `L ${secondTurnX} ${y2 - r} ` +\r\n                 `Q ${secondTurnX} ${y2} ${secondTurnX + r} ${y2} ` +       // Turn 4: right\r\n                 `L ${x2} ${y2}`;\r\n        } else {\r\n          path = `M ${x1} ${y1} ` +\r\n                 `L ${firstTurnX - r} ${y1} ` +\r\n                 `Q ${firstTurnX} ${y1} ${firstTurnX} ${y1 - r} ` +         // Turn 1: up\r\n                 `L ${firstTurnX} ${bridgeY + r} ` +\r\n                 `Q ${firstTurnX} ${bridgeY} ${firstTurnX - r} ${bridgeY} ` + // Turn 2: left\r\n                 `L ${secondTurnX + r} ${bridgeY} ` +\r\n                 `Q ${secondTurnX} ${bridgeY} ${secondTurnX} ${bridgeY - r} ` + // Turn 3: up\r\n                 `L ${secondTurnX} ${y2 + r} ` +\r\n                 `Q ${secondTurnX} ${y2} ${secondTurnX + r} ${y2} ` +       // Turn 4: right\r\n                 `L ${x2} ${y2}`;\r\n        }\r\n      }\r\n    } else {\r\n      // FORWARD dependency: destination is to the RIGHT of source\r\n      // turnX is just before destination (to the left of it)\r\n      if (lineStyle === 'squared') {\r\n        path = `M ${x1} ${y1} ` +\r\n               `L ${turnX} ${y1} ` +\r\n               `L ${turnX} ${y2} ` +\r\n               `L ${x2} ${y2}`;\r\n      } else {\r\n        // Curved version\r\n        if (goingDown) {\r\n          path = `M ${x1} ${y1} ` +\r\n                 `L ${turnX - r} ${y1} ` +\r\n                 `Q ${turnX} ${y1} ${turnX} ${y1 + r} ` +\r\n                 `L ${turnX} ${y2 - r} ` +\r\n                 `Q ${turnX} ${y2} ${turnX + r} ${y2} ` +\r\n                 `L ${x2} ${y2}`;\r\n        } else {\r\n          path = `M ${x1} ${y1} ` +\r\n                 `L ${turnX - r} ${y1} ` +\r\n                 `Q ${turnX} ${y1} ${turnX} ${y1 - r} ` +\r\n                 `L ${turnX} ${y2 + r} ` +\r\n                 `Q ${turnX} ${y2} ${turnX + r} ${y2} ` +\r\n                 `L ${x2} ${y2}`;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Arrow marker at the end - ALWAYS points RIGHT (entering from left)\r\n  const arrowSize = 5;\r\n  const arrowPath = `M ${x2} ${y2} L ${x2 - arrowSize} ${y2 - arrowSize * 0.5} M ${x2} ${y2} L ${x2 - arrowSize} ${y2 + arrowSize * 0.5}`;\r\n\r\n  // Dependencies are always gray - critical path only affects TASK BARS, not dependency lines\r\n  const lineColor = theme.dependency;\r\n  const hoverColor = theme.dependencyHover || lineColor;\r\n\r\n  // Delete button colors\r\n  const deleteColor = '#f87171';\r\n  const deleteColorSoft = 'rgba(248, 113, 113, 0.15)';\r\n\r\n  // v0.17.366: Calculate delete button position - follows cursor along the ENTIRE line path\r\n  // Project mouse position onto the closest point on the line segments\r\n  let deleteX = turnX;\r\n  let deleteY = (y1 + y2) / 2;\r\n\r\n  if (mousePos) {\r\n    // For same row - simple horizontal line\r\n    if (isSameRow) {\r\n      deleteX = Math.max(x1 + 10, Math.min(x2 - 10, mousePos.x));\r\n      deleteY = y1;\r\n    } else if (isBackward) {\r\n      // Backward dependency has 5 segments, find closest point\r\n      const firstTurnX = x1 + 15;\r\n      const secondTurnX = x2 - OFFSET;\r\n      const bridgeY = goingDown ? y1 + 20 : y1 - 20;\r\n\r\n      // Define segments: [startX, startY, endX, endY]\r\n      const segments: [number, number, number, number][] = [\r\n        [x1, y1, firstTurnX, y1],           // 1. Horizontal right\r\n        [firstTurnX, y1, firstTurnX, bridgeY], // 2. Short vertical\r\n        [firstTurnX, bridgeY, secondTurnX, bridgeY], // 3. Horizontal left (bridge)\r\n        [secondTurnX, bridgeY, secondTurnX, y2], // 4. Main vertical\r\n        [secondTurnX, y2, x2, y2],           // 5. Enter destination\r\n      ];\r\n\r\n      let minDist = Infinity;\r\n      let closestPoint = { x: deleteX, y: deleteY };\r\n\r\n      for (const seg of segments) {\r\n        const point = projectPointOnSegment(mousePos.x, mousePos.y, seg[0], seg[1], seg[2], seg[3]);\r\n        const dist = Math.hypot(mousePos.x - point.x, mousePos.y - point.y);\r\n        if (dist < minDist) {\r\n          minDist = dist;\r\n          closestPoint = point;\r\n        }\r\n      }\r\n\r\n      deleteX = closestPoint.x;\r\n      deleteY = closestPoint.y;\r\n    } else {\r\n      // Forward dependency has 3 segments\r\n      const segments: [number, number, number, number][] = [\r\n        [x1, y1, turnX, y1],     // Horizontal from source\r\n        [turnX, y1, turnX, y2],  // Vertical\r\n        [turnX, y2, x2, y2],     // Horizontal to destination\r\n      ];\r\n\r\n      let minDist = Infinity;\r\n      let closestPoint = { x: deleteX, y: deleteY };\r\n\r\n      for (const seg of segments) {\r\n        const point = projectPointOnSegment(mousePos.x, mousePos.y, seg[0], seg[1], seg[2], seg[3]);\r\n        const dist = Math.hypot(mousePos.x - point.x, mousePos.y - point.y);\r\n        if (dist < minDist) {\r\n          minDist = dist;\r\n          closestPoint = point;\r\n        }\r\n      }\r\n\r\n      deleteX = closestPoint.x;\r\n      deleteY = closestPoint.y;\r\n    }\r\n  }\r\n\r\n  // Helper function to project a point onto a line segment\r\n  function projectPointOnSegment(px: number, py: number, x1: number, y1: number, x2: number, y2: number) {\r\n    const dx = x2 - x1;\r\n    const dy = y2 - y1;\r\n    const lenSq = dx * dx + dy * dy;\r\n\r\n    if (lenSq === 0) return { x: x1, y: y1 }; // Segment is a point\r\n\r\n    // Project point onto line, clamped to segment\r\n    let t = ((px - x1) * dx + (py - y1) * dy) / lenSq;\r\n    t = Math.max(0, Math.min(1, t));\r\n\r\n    return {\r\n      x: x1 + t * dx,\r\n      y: y1 + t * dy,\r\n    };\r\n  }\r\n\r\n  // Mouse event handler\r\n  const handleMouseMove = (e: React.MouseEvent<SVGElement>) => {\r\n    const svg = e.currentTarget.ownerSVGElement;\r\n    if (!svg) return;\r\n    const rect = svg.getBoundingClientRect();\r\n    setMousePos({\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top,\r\n    });\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHovered(false);\r\n    setMousePos(null);\r\n  };\r\n\r\n  // For hover layer, we render with glow effect\r\n  if (isHoverLayer) {\r\n    return (\r\n      <g\r\n        data-dependency-line=\"true\"\r\n        onMouseLeave={handleMouseLeave}\r\n        onMouseMove={handleMouseMove}\r\n      >\r\n        {/* Wider hover detection area */}\r\n        <path\r\n          d={path}\r\n          fill=\"none\"\r\n          stroke=\"transparent\"\r\n          strokeWidth={20}\r\n          strokeLinecap=\"round\"\r\n          style={{ cursor: 'pointer' }}\r\n        />\r\n\r\n        {/* Glow effect layer */}\r\n        <path\r\n          d={path}\r\n          fill=\"none\"\r\n          stroke={hoverColor}\r\n          strokeWidth={8}\r\n          strokeLinecap=\"round\"\r\n          opacity={0.15}\r\n          style={{ pointerEvents: 'none', filter: 'blur(4px)' }}\r\n        />\r\n\r\n        {/* Highlighted dependency line */}\r\n        <path\r\n          d={path}\r\n          fill=\"none\"\r\n          stroke={hoverColor}\r\n          strokeWidth={2.5}\r\n          strokeLinecap=\"round\"\r\n          opacity={0.9}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n\r\n        {/* Arrow head */}\r\n        <path\r\n          d={arrowPath}\r\n          fill=\"none\"\r\n          stroke={hoverColor}\r\n          strokeWidth={2.5}\r\n          strokeLinecap=\"round\"\r\n          opacity={0.9}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n\r\n        {/* Endpoint dot */}\r\n        <circle\r\n          cx={x2}\r\n          cy={y2}\r\n          r={4}\r\n          fill={hoverColor}\r\n          opacity={0.9}\r\n          style={{ pointerEvents: 'none' }}\r\n        />\r\n\r\n        {/* Delete button - v0.17.366: Follows cursor along entire line */}\r\n        {onDelete && (\r\n          <motion.g\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ duration: 0.15, ease: 'easeOut' }}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onDelete();\r\n            }}\r\n            style={{ cursor: 'pointer' }}\r\n          >\r\n            <circle\r\n              cx={deleteX}\r\n              cy={deleteY}\r\n              r={9}\r\n              fill={deleteColorSoft}\r\n              stroke={deleteColor}\r\n              strokeWidth={1.5}\r\n            />\r\n            <line\r\n              x1={deleteX - 3}\r\n              y1={deleteY - 3}\r\n              x2={deleteX + 3}\r\n              y2={deleteY + 3}\r\n              stroke={deleteColor}\r\n              strokeWidth={1.5}\r\n              strokeLinecap=\"round\"\r\n            />\r\n            <line\r\n              x1={deleteX + 3}\r\n              y1={deleteY - 3}\r\n              x2={deleteX - 3}\r\n              y2={deleteY + 3}\r\n              stroke={deleteColor}\r\n              strokeWidth={1.5}\r\n              strokeLinecap=\"round\"\r\n            />\r\n          </motion.g>\r\n        )}\r\n      </g>\r\n    );\r\n  }\r\n\r\n  // Base layer rendering (non-hover)\r\n  return (\r\n    <g\r\n      data-dependency-line=\"true\"\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={handleMouseLeave}\r\n      onMouseMove={handleMouseMove}\r\n      style={{ cursor: onDelete ? 'pointer' : 'default' }}\r\n    >\r\n      {/* Invisible wider path for easier hover detection */}\r\n      <path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke=\"transparent\"\r\n        strokeWidth={16}\r\n        strokeLinecap=\"round\"\r\n        style={{ cursor: onDelete ? 'pointer' : 'default' }}\r\n      />\r\n\r\n      {/* Main dependency line */}\r\n      <motion.path\r\n        d={path}\r\n        fill=\"none\"\r\n        stroke={isHovered ? hoverColor : lineColor}\r\n        strokeWidth={isHovered ? 2.5 : 2}\r\n        strokeLinecap=\"round\"\r\n        initial={{ pathLength: 0, opacity: 0 }}\r\n        animate={{ pathLength: 1, opacity: 1 }}\r\n        transition={{\r\n          pathLength: { duration: 0.5, ease: 'easeInOut' },\r\n          opacity: { duration: 0.2 },\r\n        }}\r\n      />\r\n\r\n      {/* Arrow head */}\r\n      <motion.path\r\n        d={arrowPath}\r\n        fill=\"none\"\r\n        stroke={isHovered ? hoverColor : lineColor}\r\n        strokeWidth={isHovered ? 2.5 : 2}\r\n        strokeLinecap=\"round\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 0.2, delay: 0.3 }}\r\n      />\r\n\r\n      {/* Endpoint dot */}\r\n      <motion.circle\r\n        cx={x2}\r\n        cy={y2}\r\n        r={isHovered ? 4 : 3}\r\n        fill={isHovered ? hoverColor : lineColor}\r\n        initial={{ scale: 0 }}\r\n        animate={{ scale: 1 }}\r\n        transition={{ delay: 0.3, duration: 0.15 }}\r\n      />\r\n\r\n      {/* Delete button (appears on hover) - v0.17.366: Follows cursor along entire line */}\r\n      {isHovered && onDelete && (\r\n        <motion.g\r\n          initial={{ opacity: 0, scale: 0 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ duration: 0.15 }}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onDelete();\r\n          }}\r\n          style={{ cursor: 'pointer' }}\r\n        >\r\n          <circle\r\n            cx={deleteX}\r\n            cy={deleteY}\r\n            r={9}\r\n            fill={deleteColorSoft}\r\n            stroke={deleteColor}\r\n            strokeWidth={1.5}\r\n          />\r\n          <line\r\n            x1={deleteX - 3}\r\n            y1={deleteY - 3}\r\n            x2={deleteX + 3}\r\n            y2={deleteY + 3}\r\n            stroke={deleteColor}\r\n            strokeWidth={1.5}\r\n            strokeLinecap=\"round\"\r\n          />\r\n          <line\r\n            x1={deleteX + 3}\r\n            y1={deleteY - 3}\r\n            x2={deleteX - 3}\r\n            y2={deleteY + 3}\r\n            stroke={deleteColor}\r\n            strokeWidth={1.5}\r\n            strokeLinecap=\"round\"\r\n          />\r\n        </motion.g>\r\n      )}\r\n    </g>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Task } from './types';\r\n\r\ninterface MilestoneProps {\r\n  task: Task;\r\n  x: number;\r\n  y: number;\r\n  theme: any;\r\n  onClick?: (task: Task) => void;\r\n}\r\n\r\nexport function Milestone({ task, x, y, theme, onClick }: MilestoneProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const size = 16;\r\n\r\n  // Format date for tooltip\r\n  const formatDate = (date: Date) => {\r\n    return date.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <g\r\n      data-task-bar=\"true\"\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      onClick={() => onClick?.(task)}\r\n      style={{ cursor: 'pointer' }}\r\n    >\r\n      {/* Critical Path Glow (if applicable) */}\r\n      {task.isCriticalPath && (\r\n        <motion.circle\r\n          cx={x}\r\n          cy={y + 16}\r\n          r={size + 4}\r\n          fill={theme.criticalPathLight}\r\n          initial={{ scale: 0 }}\r\n          animate={{ scale: isHovered ? 1.2 : 1 }}\r\n          transition={{ duration: 0.3 }}\r\n        />\r\n      )}\r\n\r\n      {/* Diamond Shape (rotated square) */}\r\n      <motion.rect\r\n        x={x - size / 2}\r\n        y={y + 16 - size / 2}\r\n        width={size}\r\n        height={size}\r\n        fill={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n        stroke={theme.bgGrid}\r\n        strokeWidth={2}\r\n        transform={`rotate(45 ${x} ${y + 16})`}\r\n        initial={{ scale: 0, rotate: 0 }}\r\n        animate={{\r\n          scale: isHovered ? 1.15 : 1,\r\n          rotate: 45,\r\n        }}\r\n        transition={{\r\n          duration: 0.3,\r\n          type: 'spring',\r\n          stiffness: 300,\r\n          damping: 20,\r\n        }}\r\n      />\r\n\r\n      {/* Hover Effect - Outer Ring */}\r\n      {isHovered && (\r\n        <motion.rect\r\n          x={x - (size + 4) / 2}\r\n          y={y + 16 - (size + 4) / 2}\r\n          width={size + 4}\r\n          height={size + 4}\r\n          fill=\"none\"\r\n          stroke={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n          strokeWidth={2}\r\n          opacity={0.5}\r\n          transform={`rotate(45 ${x} ${y + 16})`}\r\n          initial={{ scale: 0.8, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 0.5 }}\r\n          transition={{ duration: 0.2 }}\r\n        />\r\n      )}\r\n\r\n      {/* Enhanced Tooltip */}\r\n      <AnimatePresence>\r\n        {isHovered && (\r\n          <motion.g\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: 10 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {/* Tooltip Background */}\r\n            <rect\r\n              x={x - 80}\r\n              y={y - 50}\r\n              width={160}\r\n              height={44}\r\n              rx={8}\r\n              fill={theme.bgSecondary}\r\n              stroke={theme.border}\r\n              strokeWidth={1}\r\n              filter=\"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15))\"\r\n            />\r\n\r\n            {/* Tooltip Arrow */}\r\n            <path\r\n              d={`M ${x - 6} ${y - 6} L ${x} ${y + 4} L ${x + 6} ${y - 6}`}\r\n              fill={theme.bgSecondary}\r\n              stroke={theme.border}\r\n              strokeWidth={1}\r\n            />\r\n\r\n            {/* Milestone Icon in Tooltip */}\r\n            <rect\r\n              x={x - 70}\r\n              y={y - 38}\r\n              width={8}\r\n              height={8}\r\n              fill={task.isCriticalPath ? theme.criticalPath : theme.milestone}\r\n              transform={`rotate(45 ${x - 66} ${y - 34})`}\r\n            />\r\n\r\n            {/* Task Name */}\r\n            <text\r\n              x={x - 55}\r\n              y={y - 32}\r\n              fill={theme.textPrimary}\r\n              fontSize=\"12\"\r\n              fontWeight=\"600\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              {task.name.length > 18 ? `${task.name.substring(0, 18)}...` : task.name}\r\n            </text>\r\n\r\n            {/* Date */}\r\n            <text\r\n              x={x - 55}\r\n              y={y - 18}\r\n              fill={theme.textTertiary}\r\n              fontSize=\"10\"\r\n              fontFamily=\"Inter, sans-serif\"\r\n            >\r\n              {formatDate(task.startDate!)}\r\n            </text>\r\n\r\n            {/* Critical Path Badge */}\r\n            {task.isCriticalPath && (\r\n              <g>\r\n                <rect\r\n                  x={x + 10}\r\n                  y={y - 40}\r\n                  width={60}\r\n                  height={16}\r\n                  rx={4}\r\n                  fill={theme.criticalPathLight}\r\n                />\r\n                <text\r\n                  x={x + 40}\r\n                  y={y - 30}\r\n                  textAnchor=\"middle\"\r\n                  fill={theme.criticalPath}\r\n                  fontSize=\"9\"\r\n                  fontWeight=\"700\"\r\n                  fontFamily=\"Inter, sans-serif\"\r\n                  letterSpacing=\"0.5\"\r\n                >\r\n                  CRITICAL\r\n                </text>\r\n              </g>\r\n            )}\r\n          </motion.g>\r\n        )}\r\n      </AnimatePresence>\r\n    </g>\r\n  );\r\n}","import { Task, TaskSegment } from './types';\r\n\r\n/**\r\n * Public utility functions for Gantt operations\r\n * Similar to DHTMLX gantt.* utility methods\r\n */\r\nexport const ganttUtils = {\r\n  /**\r\n   * Calculate end date based on start date and duration in days\r\n   * @param start - Start date\r\n   * @param durationDays - Duration in days\r\n   * @returns End date\r\n   */\r\n  calculateEndDate: (start: Date, durationDays: number): Date => {\r\n    const end = new Date(start);\r\n    end.setDate(end.getDate() + durationDays);\r\n    return end;\r\n  },\r\n\r\n  /**\r\n   * Calculate duration in days between two dates\r\n   * @param start - Start date\r\n   * @param end - End date\r\n   * @returns Duration in days (rounded up)\r\n   */\r\n  calculateDuration: (start: Date, end: Date): number => {\r\n    const diffMs = end.getTime() - start.getTime();\r\n    return Math.ceil(diffMs / (1000 * 60 * 60 * 24));\r\n  },\r\n\r\n  /**\r\n   * Calculate working days between two dates (excluding weekends)\r\n   * @param start - Start date\r\n   * @param end - End date\r\n   * @returns Number of working days\r\n   */\r\n  calculateWorkingDays: (start: Date, end: Date): number => {\r\n    let count = 0;\r\n    const current = new Date(start);\r\n\r\n    while (current <= end) {\r\n      const dayOfWeek = current.getDay();\r\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) { // Not Sunday (0) or Saturday (6)\r\n        count++;\r\n      }\r\n      current.setDate(current.getDate() + 1);\r\n    }\r\n\r\n    return count;\r\n  },\r\n\r\n  /**\r\n   * Add working days to a date (excluding weekends)\r\n   * @param start - Start date\r\n   * @param workingDays - Number of working days to add\r\n   * @returns End date\r\n   */\r\n  addWorkingDays: (start: Date, workingDays: number): Date => {\r\n    const result = new Date(start);\r\n    let daysAdded = 0;\r\n\r\n    while (daysAdded < workingDays) {\r\n      result.setDate(result.getDate() + 1);\r\n      const dayOfWeek = result.getDay();\r\n      if (dayOfWeek !== 0 && dayOfWeek !== 6) {\r\n        daysAdded++;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n  /**\r\n   * Check if a date is a weekend\r\n   * @param date - Date to check\r\n   * @returns True if weekend\r\n   */\r\n  isWeekend: (date: Date): boolean => {\r\n    const dayOfWeek = date.getDay();\r\n    return dayOfWeek === 0 || dayOfWeek === 6;\r\n  },\r\n\r\n  /**\r\n   * Validate if creating a dependency would create a circular reference\r\n   * Uses Depth-First Search (DFS) algorithm\r\n   * @param tasks - All tasks\r\n   * @param fromTaskId - Source task ID\r\n   * @param toTaskId - Target task ID\r\n   * @returns True if would create circular dependency\r\n   */\r\n  validateDependencies: (tasks: Task[], fromTaskId: string, toTaskId: string): boolean => {\r\n    // Build dependency map\r\n    const dependencyMap = new Map<string, string[]>();\r\n\r\n    const buildMap = (taskList: Task[]) => {\r\n      taskList.forEach(task => {\r\n        if (task.dependencies) {\r\n          dependencyMap.set(task.id, task.dependencies);\r\n        }\r\n        if (task.subtasks) {\r\n          buildMap(task.subtasks);\r\n        }\r\n      });\r\n    };\r\n\r\n    buildMap(tasks);\r\n\r\n    // Simulate adding the new dependency\r\n    const existingDeps = dependencyMap.get(toTaskId) || [];\r\n    dependencyMap.set(toTaskId, [...existingDeps, fromTaskId]);\r\n\r\n    // DFS to detect cycle\r\n    const visited = new Set<string>();\r\n    const recStack = new Set<string>();\r\n\r\n    const hasCycle = (taskId: string): boolean => {\r\n      if (!visited.has(taskId)) {\r\n        visited.add(taskId);\r\n        recStack.add(taskId);\r\n\r\n        const deps = dependencyMap.get(taskId) || [];\r\n        for (const depId of deps) {\r\n          if (!visited.has(depId) && hasCycle(depId)) {\r\n            return true;\r\n          } else if (recStack.has(depId)) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      recStack.delete(taskId);\r\n      return false;\r\n    };\r\n\r\n    return hasCycle(toTaskId);\r\n  },\r\n\r\n  /**\r\n   * Flatten nested tasks into a single array\r\n   * @param tasks - Tasks with potential subtasks\r\n   * @returns Flat array of all tasks\r\n   */\r\n  flattenTasks: (tasks: Task[]): Task[] => {\r\n    const result: Task[] = [];\r\n\r\n    const flatten = (taskList: Task[]) => {\r\n      taskList.forEach(task => {\r\n        result.push(task);\r\n        if (task.subtasks && task.subtasks.length > 0) {\r\n          flatten(task.subtasks);\r\n        }\r\n      });\r\n    };\r\n\r\n    flatten(tasks);\r\n    return result;\r\n  },\r\n\r\n  /**\r\n   * Find a task by ID in nested structure\r\n   * @param tasks - Tasks to search\r\n   * @param taskId - ID to find\r\n   * @returns Task if found, undefined otherwise\r\n   */\r\n  findTaskById: (tasks: Task[], taskId: string): Task | undefined => {\r\n    for (const task of tasks) {\r\n      if (task.id === taskId) {\r\n        return task;\r\n      }\r\n      if (task.subtasks) {\r\n        const found = ganttUtils.findTaskById(task.subtasks, taskId);\r\n        if (found) return found;\r\n      }\r\n    }\r\n    return undefined;\r\n  },\r\n\r\n  /**\r\n   * Get all parent tasks recursively\r\n   * @param tasks - All tasks\r\n   * @param taskId - Child task ID\r\n   * @returns Array of parent tasks\r\n   */\r\n  getParentTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const parents: Task[] = [];\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n\r\n    if (!task || !task.parentId) return parents;\r\n\r\n    let currentId: string | undefined = task.parentId;\r\n    while (currentId) {\r\n      const parent = ganttUtils.findTaskById(tasks, currentId);\r\n      if (parent) {\r\n        parents.unshift(parent);\r\n        currentId = parent.parentId;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return parents;\r\n  },\r\n\r\n  /**\r\n   * Export tasks to JSON string\r\n   * @param tasks - Tasks to export\r\n   * @returns JSON string\r\n   */\r\n  exportToJSON: (tasks: Task[]): string => {\r\n    return JSON.stringify(tasks, null, 2);\r\n  },\r\n\r\n  /**\r\n   * Import tasks from JSON string\r\n   * @param json - JSON string\r\n   * @returns Parsed tasks\r\n   */\r\n  importFromJSON: (json: string): Task[] => {\r\n    try {\r\n      const parsed = JSON.parse(json);\r\n\r\n      // Validate it's an array\r\n      if (!Array.isArray(parsed)) {\r\n        throw new Error('Invalid JSON: expected an array of tasks');\r\n      }\r\n\r\n      // Basic validation of task structure\r\n      parsed.forEach((task, index) => {\r\n        if (!task.id || !task.name) {\r\n          throw new Error(`Invalid task at index ${index}: missing required fields (id, name)`);\r\n        }\r\n      });\r\n\r\n      return parsed;\r\n    } catch (error) {\r\n      throw new Error(`Failed to import tasks: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Export tasks to CSV format\r\n   * @param tasks - Tasks to export\r\n   * @returns CSV string\r\n   */\r\n  exportToCSV: (tasks: Task[]): string => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // CSV Headers\r\n    const headers = ['ID', 'Name', 'Start Date', 'End Date', 'Progress', 'Status', 'Dependencies'];\r\n    const rows: string[] = [headers.join(',')];\r\n\r\n    // CSV Data\r\n    flat.forEach(task => {\r\n      const row = [\r\n        task.id,\r\n        `\"${task.name.replace(/\"/g, '\"\"')}\"`, // Escape quotes in name\r\n        task.startDate ? task.startDate.toISOString().split('T')[0] : '',\r\n        task.endDate ? task.endDate.toISOString().split('T')[0] : '',\r\n        task.progress.toString(),\r\n        task.status || '',\r\n        task.dependencies?.join(';') || '',\r\n      ];\r\n      rows.push(row.join(','));\r\n    });\r\n\r\n    return rows.join('\\n');\r\n  },\r\n\r\n  /**\r\n   * Format date to string (YYYY-MM-DD)\r\n   * @param date - Date to format\r\n   * @returns Formatted string\r\n   */\r\n  formatDate: (date: Date): string => {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  },\r\n\r\n  /**\r\n   * Parse date from string (YYYY-MM-DD)\r\n   * @param dateString - Date string\r\n   * @returns Parsed Date\r\n   */\r\n  parseDate: (dateString: string): Date => {\r\n    return new Date(dateString);\r\n  },\r\n\r\n  /**\r\n   * Get date range for a task\r\n   * @param task - Task to get range for\r\n   * @returns Object with start and end dates, or null if no dates\r\n   */\r\n  getTaskDateRange: (task: Task): { start: Date; end: Date } | null => {\r\n    if (!task.startDate || !task.endDate) return null;\r\n    return {\r\n      start: task.startDate,\r\n      end: task.endDate,\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Get the earliest start date from tasks\r\n   * @param tasks - Tasks to search\r\n   * @returns Earliest date or null\r\n   */\r\n  getEarliestStartDate: (tasks: Task[]): Date | null => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.startDate);\r\n\r\n    if (tasksWithDates.length === 0) return null;\r\n\r\n    return new Date(Math.min(...tasksWithDates.map(t => t.startDate!.getTime())));\r\n  },\r\n\r\n  /**\r\n   * Get the latest end date from tasks\r\n   * @param tasks - Tasks to search\r\n   * @returns Latest date or null\r\n   */\r\n  getLatestEndDate: (tasks: Task[]): Date | null => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.endDate);\r\n\r\n    if (tasksWithDates.length === 0) return null;\r\n\r\n    return new Date(Math.max(...tasksWithDates.map(t => t.endDate!.getTime())));\r\n  },\r\n\r\n  /**\r\n   * Check if two tasks overlap in time\r\n   * @param task1 - First task\r\n   * @param task2 - Second task\r\n   * @returns True if tasks overlap\r\n   */\r\n  tasksOverlap: (task1: Task, task2: Task): boolean => {\r\n    if (!task1.startDate || !task1.endDate || !task2.startDate || !task2.endDate) {\r\n      return false;\r\n    }\r\n\r\n    return task1.startDate <= task2.endDate && task2.startDate <= task1.endDate;\r\n  },\r\n\r\n  /**\r\n   * Get all tasks that depend on a given task (children in dependency tree)\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to find dependents for\r\n   * @returns Array of tasks that depend on this task\r\n   */\r\n  getDependentTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    return flat.filter(task =>\r\n      task.dependencies && task.dependencies.includes(taskId)\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Get all tasks that a given task depends on (parents in dependency tree)\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to find dependencies for\r\n   * @returns Array of tasks this task depends on\r\n   */\r\n  getDependencyTasks: (tasks: Task[], taskId: string): Task[] => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.dependencies) return [];\r\n\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    return flat.filter(t => task.dependencies!.includes(t.id));\r\n  },\r\n\r\n  /**\r\n   * Filter tasks by status\r\n   * @param tasks - Tasks to filter\r\n   * @param status - Status to filter by\r\n   * @returns Filtered tasks\r\n   */\r\n  filterByStatus: (tasks: Task[], status: 'todo' | 'in-progress' | 'completed'): Task[] => {\r\n    return ganttUtils.flattenTasks(tasks).filter(t => t.status === status);\r\n  },\r\n\r\n  /**\r\n   * Filter tasks by date range\r\n   * @param tasks - Tasks to filter\r\n   * @param startDate - Range start\r\n   * @param endDate - Range end\r\n   * @returns Tasks that fall within the date range\r\n   */\r\n  filterByDateRange: (tasks: Task[], startDate: Date, endDate: Date): Task[] => {\r\n    return ganttUtils.flattenTasks(tasks).filter(task => {\r\n      if (!task.startDate || !task.endDate) return false;\r\n      return task.startDate <= endDate && task.endDate >= startDate;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by start date\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByStartDate: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      if (!a.startDate || !b.startDate) return 0;\r\n      const diff = a.startDate.getTime() - b.startDate.getTime();\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by end date\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByEndDate: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      if (!a.endDate || !b.endDate) return 0;\r\n      const diff = a.endDate.getTime() - b.endDate.getTime();\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Sort tasks by progress\r\n   * @param tasks - Tasks to sort\r\n   * @param ascending - Sort ascending (default) or descending\r\n   * @returns Sorted tasks\r\n   */\r\n  sortByProgress: (tasks: Task[], ascending = true): Task[] => {\r\n    return [...tasks].sort((a, b) => {\r\n      const diff = a.progress - b.progress;\r\n      return ascending ? diff : -diff;\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Calculate total progress across all tasks\r\n   * @param tasks - Tasks to calculate\r\n   * @returns Average progress percentage\r\n   */\r\n  calculateTotalProgress: (tasks: Task[]): number => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    if (flat.length === 0) return 0;\r\n\r\n    const total = flat.reduce((sum, task) => sum + task.progress, 0);\r\n    return Math.round(total / flat.length);\r\n  },\r\n\r\n  /**\r\n   * Get task by path (array of indices in nested structure)\r\n   * @param tasks - Root tasks\r\n   * @param path - Array of indices [0, 2, 1] means tasks[0].subtasks[2].subtasks[1]\r\n   * @returns Task at path or undefined\r\n   */\r\n  getTaskByPath: (tasks: Task[], path: number[]): Task | undefined => {\r\n    let current: Task[] = tasks;\r\n    let task: Task | undefined;\r\n\r\n    for (let i = 0; i < path.length; i++) {\r\n      const index = path[i];\r\n      if (!current || index === undefined || index >= current.length) return undefined;\r\n\r\n      task = current[index];\r\n      if (!task) return undefined;\r\n\r\n      if (i < path.length - 1) {\r\n        current = task.subtasks || [];\r\n      }\r\n    }\r\n\r\n    return task;\r\n  },\r\n\r\n  /**\r\n   * Clone a task deeply (including subtasks)\r\n   * @param task - Task to clone\r\n   * @param newId - Optional new ID for the clone\r\n   * @returns Cloned task\r\n   */\r\n  cloneTask: (task: Task, newId?: string): Task => {\r\n    return {\r\n      ...task,\r\n      id: newId || `${task.id}-copy`,\r\n      subtasks: task.subtasks?.map(st => ganttUtils.cloneTask(st)),\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Export tasks to PDF format\r\n   * @param tasks - Tasks to export\r\n   * @param filename - Optional filename (default: 'gantt-chart.pdf')\r\n   * @returns Promise<void>\r\n   */\r\n  exportToPDF: async (tasks: Task[], filename = 'gantt-chart.pdf'): Promise<void> => {\r\n    try {\r\n      if (!tasks || tasks.length === 0) {\r\n        alert('No tasks available to export to PDF');\r\n        return;\r\n      }\r\n\r\n      // v0.8.1: FIXED - Use correct jspdf-autotable v5.0 API\r\n      const { jsPDF } = await import('jspdf');\r\n      const { default: autoTable } = await import('jspdf-autotable');\r\n\r\n      const doc = new jsPDF();\r\n      const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n      if (flat.length === 0) {\r\n        alert('No tasks found to export');\r\n        return;\r\n      }\r\n\r\n      // Title\r\n      doc.setFontSize(16);\r\n      doc.text('Gantt Chart - Task List', 14, 20);\r\n\r\n      // Table data\r\n      const headers = [['Task Name', 'Start Date', 'End Date', 'Duration', 'Progress', 'Status']];\r\n      const data = flat.map(task => {\r\n        const duration = task.startDate && task.endDate\r\n          ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n          : 0;\r\n\r\n        return [\r\n          task.name,\r\n          task.startDate ? ganttUtils.formatDate(task.startDate) : 'N/A',\r\n          task.endDate ? ganttUtils.formatDate(task.endDate) : 'N/A',\r\n          duration > 0 ? `${duration} days` : 'N/A',\r\n          `${task.progress}%`,\r\n          task.status || 'N/A',\r\n        ];\r\n      });\r\n\r\n      // v0.8.1: Use autoTable function (v5.0 API) instead of doc.autoTable() (old API)\r\n      autoTable(doc, {\r\n        head: headers,\r\n        body: data,\r\n        startY: 30,\r\n        styles: {\r\n          fontSize: 9,\r\n          cellPadding: 3,\r\n        },\r\n        headStyles: {\r\n          fillColor: [66, 139, 202],\r\n          textColor: 255,\r\n          fontStyle: 'bold',\r\n        },\r\n        alternateRowStyles: {\r\n          fillColor: [245, 245, 245],\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 60 }, // Task Name\r\n          1: { cellWidth: 30 }, // Start Date\r\n          2: { cellWidth: 30 }, // End Date\r\n          3: { cellWidth: 25 }, // Duration\r\n          4: { cellWidth: 20 }, // Progress\r\n          5: { cellWidth: 25 }, // Status\r\n        },\r\n      });\r\n\r\n      // Save the PDF\r\n      doc.save(filename);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Export tasks to Excel format\r\n   * @param tasks - Tasks to export\r\n   * @param filename - Optional filename (default: 'gantt-chart.xlsx')\r\n   * @returns Promise<void>\r\n   */\r\n  exportToExcel: async (tasks: Task[], filename = 'gantt-chart.xlsx'): Promise<void> => {\r\n    const XLSX = await import('xlsx');\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // Prepare data\r\n    const data = flat.map(task => {\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      return {\r\n        'Task ID': task.id,\r\n        'Task Name': task.name,\r\n        'Start Date': task.startDate ? ganttUtils.formatDate(task.startDate) : '',\r\n        'End Date': task.endDate ? ganttUtils.formatDate(task.endDate) : '',\r\n        'Duration (days)': duration > 0 ? duration : '',\r\n        'Progress (%)': task.progress,\r\n        'Status': task.status || '',\r\n        'Assignees': task.assignees?.map(a => a.name).join(', ') || '',\r\n        'Dependencies': task.dependencies?.join(', ') || '',\r\n        'Is Milestone': task.isMilestone ? 'Yes' : 'No',\r\n        'Parent ID': task.parentId || '',\r\n        'Level': task.level || 0,\r\n      };\r\n    });\r\n\r\n    // Create worksheet\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n\r\n    // Set column widths\r\n    const columnWidths = [\r\n      { wch: 15 }, // Task ID\r\n      { wch: 40 }, // Task Name\r\n      { wch: 12 }, // Start Date\r\n      { wch: 12 }, // End Date\r\n      { wch: 15 }, // Duration\r\n      { wch: 12 }, // Progress\r\n      { wch: 15 }, // Status\r\n      { wch: 30 }, // Assignees\r\n      { wch: 20 }, // Dependencies\r\n      { wch: 12 }, // Is Milestone\r\n      { wch: 15 }, // Parent ID\r\n      { wch: 8 },  // Level\r\n    ];\r\n    worksheet['!cols'] = columnWidths;\r\n\r\n    // Create workbook\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, 'Gantt Tasks');\r\n\r\n    // Save the file\r\n    XLSX.writeFile(workbook, filename);\r\n  },\r\n\r\n  /**\r\n   * Export tasks to Microsoft Project XML format\r\n   * Compatible with MS Project 2010+ and other project management tools\r\n   * @param tasks - Tasks to export\r\n   * @param projectName - Project name (default: 'Gantt Project')\r\n   * @param filename - Optional filename (default: 'project.xml')\r\n   * @returns void - Downloads the XML file\r\n   */\r\n  exportToMSProject: (tasks: Task[], projectName = 'Gantt Project', filename = 'project.xml'): void => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n\r\n    // Generate unique UIDs for tasks (MS Project requires numeric UIDs)\r\n    const taskUIDMap = new Map<string, number>();\r\n    flat.forEach((task, index) => {\r\n      taskUIDMap.set(task.id, index + 1); // UID starts at 1\r\n    });\r\n\r\n    // Format date for MS Project XML (ISO 8601)\r\n    const formatMSDate = (date: Date): string => {\r\n      return date.toISOString().replace('Z', '');\r\n    };\r\n\r\n    // Calculate project start and end dates\r\n    const projectStart = ganttUtils.getEarliestStartDate(tasks) || new Date();\r\n    const projectEnd = ganttUtils.getLatestEndDate(tasks) || new Date();\r\n\r\n    // Build XML structure\r\n    const xmlTasks = flat.map((task, index) => {\r\n      const uid = taskUIDMap.get(task.id)!;\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      // Build predecessor links (dependencies)\r\n      const predecessorLinks = (task.dependencies || [])\r\n        .filter(depId => taskUIDMap.has(depId))\r\n        .map(depId => `\r\n        <PredecessorLink>\r\n          <PredecessorUID>${taskUIDMap.get(depId)}</PredecessorUID>\r\n          <Type>1</Type>\r\n          <CrossProject>0</CrossProject>\r\n          <LinkLag>0</LinkLag>\r\n          <LagFormat>7</LagFormat>\r\n        </PredecessorLink>`).join('');\r\n\r\n      return `\r\n    <Task>\r\n      <UID>${uid}</UID>\r\n      <ID>${index + 1}</ID>\r\n      <Name>${task.name.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Name>\r\n      <Type>0</Type>\r\n      <IsNull>0</IsNull>\r\n      <CreateDate>${formatMSDate(new Date())}</CreateDate>\r\n      <WBS>${index + 1}</WBS>\r\n      <OutlineNumber>${index + 1}</OutlineNumber>\r\n      <OutlineLevel>${task.level || 0}</OutlineLevel>\r\n      <Priority>500</Priority>\r\n      <Start>${task.startDate ? formatMSDate(task.startDate) : ''}</Start>\r\n      <Finish>${task.endDate ? formatMSDate(task.endDate) : ''}</Finish>\r\n      <Duration>PT${duration * 8}H0M0S</Duration>\r\n      <DurationFormat>7</DurationFormat>\r\n      <Work>PT${duration * 8}H0M0S</Work>\r\n      <Stop>${task.endDate ? formatMSDate(task.endDate) : ''}</Stop>\r\n      <Resume>${task.startDate ? formatMSDate(task.startDate) : ''}</Resume>\r\n      <ResumeValid>0</ResumeValid>\r\n      <EffortDriven>1</EffortDriven>\r\n      <Recurring>0</Recurring>\r\n      <OverAllocated>0</OverAllocated>\r\n      <Estimated>0</Estimated>\r\n      <Milestone>${task.isMilestone ? '1' : '0'}</Milestone>\r\n      <Summary>${(task.subtasks && task.subtasks.length > 0) ? '1' : '0'}</Summary>\r\n      <Critical>${task.isCriticalPath ? '1' : '0'}</Critical>\r\n      <IsSubproject>0</IsSubproject>\r\n      <IsSubprojectReadOnly>0</IsSubprojectReadOnly>\r\n      <ExternalTask>0</ExternalTask>\r\n      <EarlyStart>${task.startDate ? formatMSDate(task.startDate) : ''}</EarlyStart>\r\n      <EarlyFinish>${task.endDate ? formatMSDate(task.endDate) : ''}</EarlyFinish>\r\n      <LateStart>${task.startDate ? formatMSDate(task.startDate) : ''}</LateStart>\r\n      <LateFinish>${task.endDate ? formatMSDate(task.endDate) : ''}</LateFinish>\r\n      <StartVariance>0</StartVariance>\r\n      <FinishVariance>0</FinishVariance>\r\n      <WorkVariance>0</WorkVariance>\r\n      <FreeSlack>0</FreeSlack>\r\n      <TotalSlack>0</TotalSlack>\r\n      <FixedCost>0</FixedCost>\r\n      <FixedCostAccrual>3</FixedCostAccrual>\r\n      <PercentComplete>${task.progress}</PercentComplete>\r\n      <PercentWorkComplete>${task.progress}</PercentWorkComplete>\r\n      <Cost>0</Cost>\r\n      <OvertimeCost>0</OvertimeCost>\r\n      <OvertimeWork>PT0H0M0S</OvertimeWork>\r\n      <ActualStart>${task.progress > 0 && task.startDate ? formatMSDate(task.startDate) : ''}</ActualStart>\r\n      <ActualFinish>${task.progress === 100 && task.endDate ? formatMSDate(task.endDate) : ''}</ActualFinish>\r\n      <ActualDuration>PT${Math.round(duration * task.progress / 100) * 8}H0M0S</ActualDuration>\r\n      <ActualCost>0</ActualCost>\r\n      <ActualOvertimeCost>0</ActualOvertimeCost>\r\n      <ActualWork>PT${Math.round(duration * task.progress / 100) * 8}H0M0S</ActualWork>\r\n      <ActualOvertimeWork>PT0H0M0S</ActualOvertimeWork>\r\n      <RegularWork>PT${duration * 8}H0M0S</RegularWork>\r\n      <RemainingDuration>PT${Math.round(duration * (100 - task.progress) / 100) * 8}H0M0S</RemainingDuration>\r\n      <RemainingCost>0</RemainingCost>\r\n      <RemainingWork>PT${Math.round(duration * (100 - task.progress) / 100) * 8}H0M0S</RemainingWork>\r\n      <RemainingOvertimeCost>0</RemainingOvertimeCost>\r\n      <RemainingOvertimeWork>PT0H0M0S</RemainingOvertimeWork>\r\n      <ACWP>0</ACWP>\r\n      <CV>0</CV>\r\n      <ConstraintType>0</ConstraintType>\r\n      <CalendarUID>-1</CalendarUID>\r\n      <LevelAssignments>1</LevelAssignments>\r\n      <LevelingCanSplit>1</LevelingCanSplit>\r\n      <LevelingDelay>0</LevelingDelay>\r\n      <LevelingDelayFormat>8</LevelingDelayFormat>\r\n      <IgnoreResourceCalendar>0</IgnoreResourceCalendar>\r\n      <HideBar>0</HideBar>\r\n      <Rollup>0</Rollup>\r\n      <BCWS>0</BCWS>\r\n      <BCWP>0</BCWP>\r\n      <PhysicalPercentComplete>0</PhysicalPercentComplete>\r\n      <EarnedValueMethod>0</EarnedValueMethod>\r\n      <IsPublished>1</IsPublished>\r\n      <CommitmentType>0</CommitmentType>${predecessorLinks}\r\n    </Task>`;\r\n    }).join('');\r\n\r\n    // Complete MS Project XML structure\r\n    const xml = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\r\n<Project xmlns=\"http://schemas.microsoft.com/project\">\r\n  <SaveVersion>14</SaveVersion>\r\n  <Name>${projectName.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Name>\r\n  <Title>${projectName.replace(/[<>&'\"]/g, c => ({ '<': '&lt;', '>': '&gt;', '&': '&amp;', \"'\": '&apos;', '\"': '&quot;' })[c] || c)}</Title>\r\n  <CreationDate>${formatMSDate(new Date())}</CreationDate>\r\n  <LastSaved>${formatMSDate(new Date())}</LastSaved>\r\n  <ScheduleFromStart>1</ScheduleFromStart>\r\n  <StartDate>${formatMSDate(projectStart)}</StartDate>\r\n  <FinishDate>${formatMSDate(projectEnd)}</FinishDate>\r\n  <FYStartDate>1</FYStartDate>\r\n  <CriticalSlackLimit>0</CriticalSlackLimit>\r\n  <CurrencyDigits>2</CurrencyDigits>\r\n  <CurrencySymbol>$</CurrencySymbol>\r\n  <CurrencyCode>USD</CurrencyCode>\r\n  <CurrencySymbolPosition>0</CurrencySymbolPosition>\r\n  <CalendarUID>1</CalendarUID>\r\n  <DefaultStartTime>08:00:00</DefaultStartTime>\r\n  <DefaultFinishTime>17:00:00</DefaultFinishTime>\r\n  <MinutesPerDay>480</MinutesPerDay>\r\n  <MinutesPerWeek>2400</MinutesPerWeek>\r\n  <DaysPerMonth>20</DaysPerMonth>\r\n  <DefaultTaskType>1</DefaultTaskType>\r\n  <DefaultFixedCostAccrual>3</DefaultFixedCostAccrual>\r\n  <DefaultStandardRate>0</DefaultStandardRate>\r\n  <DefaultOvertimeRate>0</DefaultOvertimeRate>\r\n  <DurationFormat>7</DurationFormat>\r\n  <WorkFormat>2</WorkFormat>\r\n  <EditableActualCosts>0</EditableActualCosts>\r\n  <HonorConstraints>1</HonorConstraints>\r\n  <InsertedProjectsLikeSummary>1</InsertedProjectsLikeSummary>\r\n  <MultipleCriticalPaths>0</MultipleCriticalPaths>\r\n  <NewTasksEffortDriven>1</NewTasksEffortDriven>\r\n  <NewTasksEstimated>1</NewTasksEstimated>\r\n  <SplitsInProgressTasks>1</SplitsInProgressTasks>\r\n  <SpreadActualCost>0</SpreadActualCost>\r\n  <SpreadPercentComplete>0</SpreadPercentComplete>\r\n  <TaskUpdatesResource>1</TaskUpdatesResource>\r\n  <FiscalYearStart>0</FiscalYearStart>\r\n  <WeekStartDay>1</WeekStartDay>\r\n  <MoveCompletedEndsBack>0</MoveCompletedEndsBack>\r\n  <MoveRemainingStartsBack>0</MoveRemainingStartsBack>\r\n  <MoveRemainingStartsForward>0</MoveRemainingStartsForward>\r\n  <MoveCompletedEndsForward>0</MoveCompletedEndsForward>\r\n  <BaselineForEarnedValue>0</BaselineForEarnedValue>\r\n  <AutoAddNewResourcesAndTasks>1</AutoAddNewResourcesAndTasks>\r\n  <CurrentDate>${formatMSDate(new Date())}</CurrentDate>\r\n  <MicrosoftProjectServerURL>1</MicrosoftProjectServerURL>\r\n  <Autolink>1</Autolink>\r\n  <NewTaskStartDate>0</NewTaskStartDate>\r\n  <DefaultTaskEVMethod>0</DefaultTaskEVMethod>\r\n  <ProjectExternallyEdited>0</ProjectExternallyEdited>\r\n  <ExtendedCreationDate>${formatMSDate(new Date())}</ExtendedCreationDate>\r\n  <ActualsInSync>0</ActualsInSync>\r\n  <RemoveFileProperties>0</RemoveFileProperties>\r\n  <AdminProject>0</AdminProject>\r\n  <Calendars>\r\n    <Calendar>\r\n      <UID>1</UID>\r\n      <Name>Standard</Name>\r\n      <IsBaseCalendar>1</IsBaseCalendar>\r\n      <IsBaselineCalendar>0</IsBaselineCalendar>\r\n      <BaseCalendarUID>-1</BaseCalendarUID>\r\n      <WeekDays>\r\n        <WeekDay>\r\n          <DayType>1</DayType>\r\n          <DayWorking>0</DayWorking>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>2</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>3</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>4</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>5</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>6</DayType>\r\n          <DayWorking>1</DayWorking>\r\n          <WorkingTimes>\r\n            <WorkingTime>\r\n              <FromTime>08:00:00</FromTime>\r\n              <ToTime>12:00:00</ToTime>\r\n            </WorkingTime>\r\n            <WorkingTime>\r\n              <FromTime>13:00:00</FromTime>\r\n              <ToTime>17:00:00</ToTime>\r\n            </WorkingTime>\r\n          </WorkingTimes>\r\n        </WeekDay>\r\n        <WeekDay>\r\n          <DayType>7</DayType>\r\n          <DayWorking>0</DayWorking>\r\n        </WeekDay>\r\n      </WeekDays>\r\n    </Calendar>\r\n  </Calendars>\r\n  <Tasks>${xmlTasks}\r\n  </Tasks>\r\n</Project>`;\r\n\r\n    // Download the file\r\n    const blob = new Blob([xml], { type: 'application/xml;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = filename;\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n  },\r\n\r\n  /**\r\n   * Calculate Critical Path Method (CPM) - identifies tasks with zero slack\r\n   * @param tasks - All tasks\r\n   * @returns Array of task IDs on the critical path\r\n   */\r\n  calculateCriticalPath: (tasks: Task[]): string[] => {\r\n    const flat = ganttUtils.flattenTasks(tasks);\r\n    const tasksWithDates = flat.filter(t => t.startDate && t.endDate);\r\n\r\n    if (tasksWithDates.length === 0) return [];\r\n\r\n    // Step 1: Calculate Early Start (ES) and Early Finish (EF) - Forward Pass\r\n    const earlyDates = new Map<string, { es: number; ef: number }>();\r\n\r\n    const calculateEarlyDates = (task: Task): void => {\r\n      if (earlyDates.has(task.id)) return;\r\n\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      let es = 0;\r\n\r\n      // If task has dependencies, ES = max(EF of all predecessors)\r\n      if (task.dependencies && task.dependencies.length > 0) {\r\n        for (const depId of task.dependencies) {\r\n          const depTask = flat.find(t => t.id === depId);\r\n          if (depTask) {\r\n            calculateEarlyDates(depTask);\r\n            const depEF = earlyDates.get(depId)?.ef || 0;\r\n            es = Math.max(es, depEF);\r\n          }\r\n        }\r\n      }\r\n\r\n      const ef = es + duration;\r\n      earlyDates.set(task.id, { es, ef });\r\n    };\r\n\r\n    tasksWithDates.forEach(calculateEarlyDates);\r\n\r\n    // Step 2: Find project end date (max EF)\r\n    const projectEnd = Math.max(...Array.from(earlyDates.values()).map(d => d.ef));\r\n\r\n    // Step 3: Calculate Late Start (LS) and Late Finish (LF) - Backward Pass\r\n    const lateDates = new Map<string, { ls: number; lf: number }>();\r\n\r\n    const calculateLateDates = (task: Task): void => {\r\n      if (lateDates.has(task.id)) return;\r\n\r\n      const duration = task.startDate && task.endDate\r\n        ? ganttUtils.calculateDuration(task.startDate, task.endDate)\r\n        : 0;\r\n\r\n      // Find all tasks that depend on this task\r\n      const successors = flat.filter(t =>\r\n        t.dependencies && t.dependencies.includes(task.id)\r\n      );\r\n\r\n      let lf = projectEnd;\r\n\r\n      // If task has successors, LF = min(LS of all successors)\r\n      if (successors.length > 0) {\r\n        for (const successor of successors) {\r\n          calculateLateDates(successor);\r\n          const succLS = lateDates.get(successor.id)?.ls || 0;\r\n          lf = Math.min(lf, succLS);\r\n        }\r\n      }\r\n\r\n      const ls = lf - duration;\r\n      lateDates.set(task.id, { ls, lf });\r\n    };\r\n\r\n    tasksWithDates.forEach(calculateLateDates);\r\n\r\n    // Step 4: Calculate Slack (Float) = LS - ES = LF - EF\r\n    // Tasks with slack = 0 are on the critical path\r\n    const criticalPath: string[] = [];\r\n\r\n    for (const task of tasksWithDates) {\r\n      const early = earlyDates.get(task.id);\r\n      const late = lateDates.get(task.id);\r\n\r\n      if (early && late) {\r\n        const slack = late.ls - early.es;\r\n        if (Math.abs(slack) < 0.01) { // Float point comparison\r\n          criticalPath.push(task.id);\r\n        }\r\n      }\r\n    }\r\n\r\n    return criticalPath;\r\n  },\r\n\r\n  /**\r\n   * Calculate slack (float) time for a task\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to calculate slack for\r\n   * @returns Slack in days, or null if cannot be calculated\r\n   */\r\n  calculateSlack: (tasks: Task[], taskId: string): number | null => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.startDate || !task.endDate) return null;\r\n\r\n    const criticalPath = ganttUtils.calculateCriticalPath(tasks);\r\n\r\n    // If on critical path, slack is 0\r\n    if (criticalPath.includes(taskId)) return 0;\r\n\r\n    // Otherwise calculate slack using CPM algorithm\r\n    // This is simplified - in production would use full CPM\r\n    // For now, we approximate: slack = time until next dependent task\r\n    const dependents = ganttUtils.getDependentTasks(tasks, taskId);\r\n\r\n    if (dependents.length === 0) {\r\n      // No dependents = float until project end\r\n      const projectEnd = ganttUtils.getLatestEndDate(tasks);\r\n      if (!projectEnd) return null;\r\n\r\n      const daysToEnd = ganttUtils.calculateDuration(task.endDate, projectEnd);\r\n      return Math.max(0, daysToEnd);\r\n    }\r\n\r\n    // Find earliest dependent\r\n    const earliestDepStart = dependents\r\n      .filter(d => d.startDate)\r\n      .map(d => d.startDate!.getTime())\r\n      .sort((a, b) => a - b)[0];\r\n\r\n    if (!earliestDepStart) return null;\r\n\r\n    const slack = ganttUtils.calculateDuration(\r\n      task.endDate,\r\n      new Date(earliestDepStart)\r\n    );\r\n\r\n    return Math.max(0, slack);\r\n  },\r\n\r\n  /**\r\n   * Check if a task is on the critical path\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task ID to check\r\n   * @returns True if task is on critical path\r\n   */\r\n  isOnCriticalPath: (tasks: Task[], taskId: string): boolean => {\r\n    const criticalPath = ganttUtils.calculateCriticalPath(tasks);\r\n    return criticalPath.includes(taskId);\r\n  },\r\n\r\n  /**\r\n   * Auto-schedule dependent tasks when a task changes\r\n   * v0.13.3: Now takes optional daysDelta to shift dependents by same amount (preserves gap)\r\n   * @param tasks - All tasks\r\n   * @param changedTaskId - Task that was changed\r\n   * @param daysDelta - Optional: days the parent moved (for preserving relative gaps)\r\n   * @returns Updated tasks with rescheduled dependencies\r\n   */\r\n  autoScheduleDependents: (tasks: Task[], changedTaskId: string, daysDelta?: number): Task[] => {\r\n    const changedTask = ganttUtils.findTaskById(tasks, changedTaskId);\r\n    if (!changedTask || !changedTask.endDate) return tasks;\r\n\r\n    const dependents = ganttUtils.getDependentTasks(tasks, changedTaskId);\r\n    if (dependents.length === 0) return tasks;\r\n\r\n    let updatedTasks = [...tasks];\r\n\r\n    // For each dependent, shift by the same daysDelta (preserves relative gap)\r\n    for (const dependent of dependents) {\r\n      if (!dependent.startDate || !dependent.endDate) continue;\r\n\r\n      // Calculate duration of dependent task\r\n      const duration = ganttUtils.calculateDuration(dependent.startDate, dependent.endDate);\r\n\r\n      let newStartDate: Date;\r\n\r\n      if (daysDelta !== undefined) {\r\n        // v0.13.3: Shift by same delta as parent (preserves relative gap)\r\n        newStartDate = new Date(dependent.startDate);\r\n        newStartDate.setDate(newStartDate.getDate() + daysDelta);\r\n      } else {\r\n        // Legacy behavior: New start date = changed task end date + 1 day\r\n        newStartDate = new Date(changedTask.endDate);\r\n        newStartDate.setDate(newStartDate.getDate() + 1);\r\n      }\r\n\r\n      // Calculate new end date based on duration\r\n      const newEndDate = ganttUtils.calculateEndDate(newStartDate, duration);\r\n\r\n      // Update the task recursively in nested structure\r\n      const updateTaskRec = (tasks: Task[]): Task[] => {\r\n        return tasks.map(t => {\r\n          if (t.id === dependent.id) {\r\n            return { ...t, startDate: newStartDate, endDate: newEndDate };\r\n          }\r\n          if (t.subtasks) {\r\n            return { ...t, subtasks: updateTaskRec(t.subtasks) };\r\n          }\r\n          return t;\r\n        });\r\n      };\r\n\r\n      updatedTasks = updateTaskRec(updatedTasks);\r\n\r\n      // Recursively update dependents of this task (pass same delta)\r\n      updatedTasks = ganttUtils.autoScheduleDependents(updatedTasks, dependent.id, daysDelta);\r\n    }\r\n\r\n    return updatedTasks;\r\n  },\r\n\r\n  /**\r\n   * v0.13.0: Calculate cascade preview positions for dependent tasks during drag\r\n   * v0.13.3: FIXED - Preview shows ONLY actual movement needed (keeps same relative gap)\r\n   * Dependents shift by the same daysDelta as their parent, preserving the original gap\r\n   * @param tasks - All tasks (nested structure)\r\n   * @param draggedTaskId - Task being dragged\r\n   * @param daysDelta - How many days the dragged task is being moved\r\n   * @param flatTasks - Flattened task list with row indices\r\n   * @param timelineStartDate - Start date of the timeline\r\n   * @param scaledDayWidth - Width of one day in pixels (already includes zoom: dayWidth * zoom)\r\n   * @param rowHeight - Height of each row\r\n   * @param headerHeight - Height of the header\r\n   * @returns Array of DependentTaskPreview objects\r\n   */\r\n  calculateCascadePreview: (\r\n    tasks: Task[],\r\n    draggedTaskId: string,\r\n    daysDelta: number,\r\n    flatTasks: Task[],\r\n    timelineStartDate: Date,\r\n    scaledDayWidth: number, // Note: This already includes zoom (dayWidth * zoom)\r\n    rowHeight: number,\r\n    headerHeight: number\r\n  ): Array<{\r\n    taskId: string;\r\n    taskName: string;\r\n    originalX: number;\r\n    previewX: number;\r\n    width: number;\r\n    y: number;\r\n    rowIndex: number;\r\n    daysDelta: number;\r\n    color?: string;\r\n  }> => {\r\n    if (daysDelta === 0) return [];\r\n\r\n    const previews: Array<{\r\n      taskId: string;\r\n      taskName: string;\r\n      originalX: number;\r\n      previewX: number;\r\n      width: number;\r\n      y: number;\r\n      rowIndex: number;\r\n      daysDelta: number;\r\n      color?: string;\r\n    }> = [];\r\n\r\n    const rangeStart = timelineStartDate.getTime();\r\n    const msPerDay = 1000 * 60 * 60 * 24;\r\n\r\n    // Get dragged task info\r\n    const draggedTask = ganttUtils.findTaskById(tasks, draggedTaskId);\r\n    if (!draggedTask || !draggedTask.endDate) return [];\r\n\r\n    // v0.13.3: Dependents move by the SAME daysDelta as their parent\r\n    // This preserves the relative gap between tasks, making preview accurate\r\n    const getAffectedTasks = (parentTaskId: string, parentDelta: number, visited = new Set<string>()): void => {\r\n      if (visited.has(parentTaskId)) return; // Prevent infinite loops\r\n      visited.add(parentTaskId);\r\n\r\n      const dependents = ganttUtils.getDependentTasks(tasks, parentTaskId);\r\n\r\n      for (const dependent of dependents) {\r\n        if (!dependent.startDate || !dependent.endDate) continue;\r\n\r\n        // Find row index in flattened list\r\n        const rowIndex = flatTasks.findIndex(t => t.id === dependent.id);\r\n        if (rowIndex === -1) continue;\r\n\r\n        // Calculate task duration and current position\r\n        const taskStart = dependent.startDate.getTime();\r\n        const taskEnd = dependent.endDate.getTime();\r\n        const durationDays = (taskEnd - taskStart) / msPerDay;\r\n\r\n        // Original X position\r\n        const daysFromStart = (taskStart - rangeStart) / msPerDay;\r\n        const originalX = daysFromStart * scaledDayWidth;\r\n\r\n        // v0.13.3: Preview X = Original X + daysDelta (same shift as parent)\r\n        // This shows the task moving exactly with its parent, preserving the gap\r\n        const previewX = originalX + (parentDelta * scaledDayWidth);\r\n\r\n        // Width calculation - minimum 1 day width for visibility\r\n        const width = Math.max(durationDays * scaledDayWidth, scaledDayWidth);\r\n\r\n        // Y position - same formula as Timeline.tsx: HEADER_HEIGHT + index * ROW_HEIGHT + 12\r\n        const y = headerHeight + rowIndex * rowHeight + 12;\r\n\r\n        previews.push({\r\n          taskId: dependent.id,\r\n          taskName: dependent.name,\r\n          originalX,\r\n          previewX,\r\n          width,\r\n          y,\r\n          rowIndex,\r\n          daysDelta: parentDelta,\r\n          color: dependent.color,\r\n        });\r\n\r\n        // Recursively get dependents of this task (same delta propagates)\r\n        getAffectedTasks(dependent.id, parentDelta, visited);\r\n      }\r\n    };\r\n\r\n    getAffectedTasks(draggedTaskId, daysDelta);\r\n\r\n    return previews;\r\n  },\r\n\r\n  /**\r\n   *  KILLER FEATURE #3: Split a task (create GAP in the middle, like Bryntum/DHTMLX)\r\n   * Same task, but work is paused for some days then continues\r\n   * Example: Jan 1-10  Split at Jan 5 with 3 day gap  Jan 1-4 [GAP] Jan 8-13\r\n   * @param tasks - All tasks\r\n   * @param taskId - Task to split\r\n   * @param splitDate - Date where gap starts\r\n   * @param gapDays - Number of days to pause (default: 3)\r\n   * @returns Updated tasks with split segments\r\n   */\r\n  splitTask: (tasks: Task[], taskId: string, splitDate: Date, gapDays = 3): Task[] => {\r\n    const task = ganttUtils.findTaskById(tasks, taskId);\r\n    if (!task || !task.startDate || !task.endDate) return tasks;\r\n\r\n    // Validate split date is within task range\r\n    if (splitDate <= task.startDate || splitDate >= task.endDate) {\r\n      console.warn('Split date must be between task start and end dates');\r\n      return tasks;\r\n    }\r\n\r\n    // Calculate the split point (end of first segment)\r\n    const firstSegmentEnd = new Date(splitDate);\r\n    firstSegmentEnd.setDate(firstSegmentEnd.getDate() - 1); // Day before split\r\n\r\n    // Calculate second segment start (after gap)\r\n    const secondSegmentStart = new Date(splitDate);\r\n    secondSegmentStart.setDate(secondSegmentStart.getDate() + gapDays);\r\n\r\n    // Calculate new end date (original end + gap days to preserve work duration)\r\n    const newEndDate = new Date(task.endDate);\r\n    newEndDate.setDate(newEndDate.getDate() + gapDays);\r\n\r\n    // Create segments array\r\n    const segments: TaskSegment[] = [\r\n      {\r\n        startDate: new Date(task.startDate),\r\n        endDate: firstSegmentEnd,\r\n      },\r\n      {\r\n        startDate: secondSegmentStart,\r\n        endDate: newEndDate,\r\n      },\r\n    ];\r\n\r\n    // Update task with segments\r\n    const updateTaskRec = (tasksList: Task[]): Task[] => {\r\n      return tasksList.map(t => {\r\n        if (t.id === task.id) {\r\n          return {\r\n            ...t,\r\n            endDate: newEndDate, // Overall end date extends\r\n            segments, // Add segments to show gaps\r\n          };\r\n        }\r\n        if (t.subtasks) {\r\n          return { ...t, subtasks: updateTaskRec(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n\r\n    return updateTaskRec(tasks);\r\n  },\r\n};\r\n","import { useMemo, useCallback, useState } from 'react';\r\nimport { TimeScale, Task, GanttTemplates, DependentTaskPreview, DependencyLineStyle } from './types';\r\nimport { TaskBar, TaskTooltipData } from './TaskBar';\r\nimport { TaskTooltip } from './TaskTooltip';\r\nimport { DependencyLine } from './DependencyLine';\r\nimport { Milestone } from './Milestone';\r\nimport { ganttUtils } from './ganttUtils';\r\nimport { useGanttI18n } from './GanttI18nContext';\r\n\r\ninterface TimelineProps {\r\n  tasks: Task[];\r\n  theme: any;\r\n  rowHeight: number;\r\n  timeScale: TimeScale;\r\n  startDate: Date;\r\n  endDate: Date;\r\n  zoom: number;\r\n  locale?: string; // v0.17.400: Locale for date formatting (e.g., 'en', 'es')\r\n  templates: Required<GanttTemplates>; // v0.8.0\r\n  dependencyLineStyle?: DependencyLineStyle; // v0.17.310: Dependency line style\r\n  onTaskClick?: (task: Task) => void;\r\n  onTaskDblClick?: (task: Task) => void; // v0.8.0\r\n  onTaskContextMenu?: (task: Task, event: React.MouseEvent) => void; // v0.8.0\r\n  onTaskDateChange?: (task: Task, newStart: Date, newEnd: Date) => void;\r\n  onDependencyCreate?: (fromTask: Task, toTaskId: string) => void;\r\n  onDependencyDelete?: (taskId: string, dependencyId: string) => void;\r\n}\r\n\r\nexport interface TaskPosition {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport function Timeline({\r\n  tasks,\r\n  theme,\r\n  rowHeight: ROW_HEIGHT,\r\n  timeScale,\r\n  startDate,\r\n  endDate,\r\n  zoom,\r\n  locale = 'en', // v0.17.400: Default to English\r\n  templates,\r\n  dependencyLineStyle = 'curved', // v0.17.310\r\n  onTaskClick,\r\n  onTaskDblClick, // v0.8.0\r\n  onTaskContextMenu, // v0.8.0\r\n  onTaskDateChange,\r\n  onDependencyCreate,\r\n  onDependencyDelete,\r\n}: TimelineProps) {\r\n  const HEADER_HEIGHT = 48; // Must match TaskGrid's HEADER_HEIGHT for alignment\r\n\r\n  // v0.17.400: Get i18n translations\r\n  const t = useGanttI18n();\r\n\r\n  // v0.13.0: State for dependency cascade preview\r\n  const [cascadePreviews, setCascadePreviews] = useState<DependentTaskPreview[]>([]);\r\n\r\n  // v0.17.76: State for active tooltip - rendered in top layer for proper z-order\r\n  const [activeTooltip, setActiveTooltip] = useState<TaskTooltipData | null>(null);\r\n\r\n  // v0.17.363: Simplified - removed hoveredDependency state (DependencyLine handles its own hover)\r\n\r\n  // v0.17.76: Callback for TaskBar hover changes\r\n  const handleTooltipChange = useCallback((tooltipData: TaskTooltipData | null) => {\r\n    setActiveTooltip(tooltipData);\r\n  }, []);\r\n\r\n  // v0.17.363: calculateVerticalX removed - DependencyLine now handles its own routing\r\n\r\n  // Calculate dimensions\r\n  const totalDays = Math.ceil((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n  const dayWidth = timeScale === 'day' ? 60 : timeScale === 'week' ? 20 : 8;\r\n  const timelineWidth = totalDays * dayWidth * zoom;\r\n\r\n  // Get week number - moved before useMemo\r\n  const getWeekNumber = (date: Date): number => {\r\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    const dayNum = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\r\n    const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil(((d.getTime() - yearStart.getTime()) / 86400000 + 1) / 7);\r\n  };\r\n\r\n  // Check if date is weekend\r\n  const isWeekend = (date: Date): boolean => {\r\n    const day = date.getDay();\r\n    return day === 0 || day === 6;\r\n  };\r\n\r\n  // Convert pixel position to date\r\n  const pixelToDate = useCallback((pixelX: number): Date => {\r\n    const days = Math.round(pixelX / (dayWidth * zoom));\r\n    const newDate = new Date(startDate);\r\n    newDate.setDate(newDate.getDate() + days);\r\n    return newDate;\r\n  }, [startDate, dayWidth, zoom]);\r\n\r\n  // Handle click on timeline to create task bar for tasks without dates\r\n  const handleTimelineClick = useCallback((e: React.MouseEvent<SVGRectElement>, task: Task) => {\r\n    // Only create bar if task doesn't have dates (no existing bar)\r\n    if (task.startDate && task.endDate) {\r\n      return; // Task already has dates, do nothing\r\n    }\r\n\r\n    const svgElement = e.currentTarget.ownerSVGElement;\r\n    if (!svgElement) return;\r\n\r\n    const point = svgElement.createSVGPoint();\r\n    point.x = e.clientX;\r\n    point.y = e.clientY;\r\n    const svgPoint = point.matrixTransform(svgElement.getScreenCTM()?.inverse());\r\n\r\n    // Calculate the clicked date\r\n    const clickedDate = pixelToDate(svgPoint.x);\r\n\r\n    // Create a 1-day task bar\r\n    const endDate = new Date(clickedDate);\r\n    endDate.setDate(endDate.getDate() + 1);\r\n\r\n    // Call the date change handler to create the task bar\r\n    onTaskDateChange?.(task, clickedDate, endDate);\r\n  }, [pixelToDate, onTaskDateChange]);\r\n\r\n  // Calculate parent task dates from subtasks and flatten for rendering\r\n  const flatTasks = useMemo(() => {\r\n    // Helper function to calculate parent dates from subtasks (MS Project style)\r\n    // v0.17.47: Parent tasks ALWAYS derive dates from subtasks (summary task behavior)\r\n    // This is the standard behavior in professional project management tools\r\n    const calculateParentDates = (tasks: Task[]): Task[] => {\r\n      return tasks.map(task => {\r\n        // If task has subtasks, calculate dates from them\r\n        if (task.subtasks && task.subtasks.length > 0) {\r\n          // First, recursively calculate dates for nested subtasks\r\n          const updatedSubtasks = calculateParentDates(task.subtasks);\r\n\r\n          // Filter subtasks that have dates\r\n          const subtasksWithDates = updatedSubtasks.filter(st => st.startDate && st.endDate);\r\n\r\n          if (subtasksWithDates.length > 0) {\r\n            // Calculate earliest start and latest end from subtasks\r\n            const startDates = subtasksWithDates.map(st => st.startDate!.getTime());\r\n            const endDates = subtasksWithDates.map(st => st.endDate!.getTime());\r\n\r\n            const earliestStart = new Date(Math.min(...startDates));\r\n            const latestEnd = new Date(Math.max(...endDates));\r\n\r\n            // v0.17.47: ALWAYS update parent dates from subtasks (MS Project summary task behavior)\r\n            // Parent tasks are read-only containers - their dates are derived from children\r\n            return {\r\n              ...task,\r\n              subtasks: updatedSubtasks,\r\n              startDate: earliestStart,\r\n              endDate: latestEnd,\r\n            };\r\n          }\r\n\r\n          return { ...task, subtasks: updatedSubtasks };\r\n        }\r\n\r\n        return task;\r\n      });\r\n    };\r\n\r\n    // Helper function to flatten tasks for rendering\r\n    const flattenTasks = (tasks: Task[], result: Task[] = []): Task[] => {\r\n      for (const task of tasks) {\r\n        result.push(task);\r\n        // Only include subtasks if parent is expanded (or if isExpanded is undefined, default to true)\r\n        if (task.subtasks && task.subtasks.length > 0 && (task.isExpanded === undefined || task.isExpanded)) {\r\n          flattenTasks(task.subtasks, result);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    // Apply parent date calculation before flattening\r\n    const tasksWithCalculatedDates = calculateParentDates(tasks);\r\n    const flattened = flattenTasks(tasksWithCalculatedDates);\r\n\r\n    return flattened;\r\n  }, [tasks]);\r\n\r\n  // Calculate task position\r\n  const getTaskPosition = useCallback((task: Task) => {\r\n    // Return null position for tasks without dates\r\n    if (!task.startDate || !task.endDate) {\r\n      return { x: 0, width: 0 };\r\n    }\r\n\r\n    const taskStart = task.startDate.getTime();\r\n    const taskEnd = task.endDate.getTime();\r\n    const rangeStart = startDate.getTime();\r\n\r\n    const daysFromStart = (taskStart - rangeStart) / (1000 * 60 * 60 * 24);\r\n    const duration = (taskEnd - taskStart) / (1000 * 60 * 60 * 24);\r\n\r\n    const x = daysFromStart * dayWidth * zoom;\r\n    // Minimum width: allow 1 day minimum, but ensure at least 40px for visibility\r\n    const minWidth = Math.max(dayWidth * zoom, 40);\r\n    const width = Math.max(duration * dayWidth * zoom, minWidth);\r\n\r\n    return { x, width };\r\n  }, [startDate, dayWidth, zoom]);\r\n\r\n  // Build task positions map for collision detection\r\n  // v0.13.7: Y positions no longer include HEADER_HEIGHT (header is now separate sticky element)\r\n  const taskPositions = useMemo((): TaskPosition[] => {\r\n    return flatTasks\r\n      .filter(task => task.startDate && task.endDate) // Only include tasks with dates\r\n      .map((task) => {\r\n        const { x, width } = getTaskPosition(task);\r\n        const actualIndex = flatTasks.findIndex(t => t.id === task.id);\r\n        const y = actualIndex * ROW_HEIGHT + 12;\r\n        return {\r\n          id: task.id,\r\n          x,\r\n          y,\r\n          width,\r\n          height: 32, // TaskBar height\r\n        };\r\n      });\r\n  }, [flatTasks, getTaskPosition]);\r\n\r\n  // v0.13.0: Handle drag move for dependency cascade preview\r\n  const handleTaskDragMove = useCallback((taskId: string, daysDelta: number, isDragging: boolean) => {\r\n    if (!isDragging || daysDelta === 0) {\r\n      setCascadePreviews([]);\r\n      return;\r\n    }\r\n\r\n    // Calculate cascade preview positions for all dependent tasks\r\n    const previews = ganttUtils.calculateCascadePreview(\r\n      tasks,\r\n      taskId,\r\n      daysDelta,\r\n      flatTasks,\r\n      startDate,\r\n      dayWidth * zoom,\r\n      ROW_HEIGHT,\r\n      HEADER_HEIGHT\r\n    );\r\n\r\n    setCascadePreviews(previews);\r\n  }, [tasks, flatTasks, startDate, dayWidth, zoom, ROW_HEIGHT, HEADER_HEIGHT]);\r\n\r\n  // Generate timeline headers\r\n  // v0.17.400: Use locale for date formatting (e.g., 'es' -> 'Dic 22', 'en' -> 'Dec 22')\r\n  const headers = useMemo(() => {\r\n    const result: Array<{ date: Date; label: string; x: number }> = [];\r\n    const current = new Date(startDate);\r\n    let index = 0;\r\n\r\n    while (current <= endDate) {\r\n      const daysFromStart =\r\n        (current.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\r\n      const x = daysFromStart * dayWidth * zoom;\r\n\r\n      if (timeScale === 'day') {\r\n        result.push({\r\n          date: new Date(current),\r\n          label: current.toLocaleDateString(locale, { day: 'numeric', month: 'short' }),\r\n          x,\r\n        });\r\n        current.setDate(current.getDate() + 1);\r\n      } else if (timeScale === 'week') {\r\n        const weekNum = getWeekNumber(current);\r\n        result.push({\r\n          date: new Date(current),\r\n          label: `${t.labels.week} ${weekNum}`,\r\n          x,\r\n        });\r\n        current.setDate(current.getDate() + 7);\r\n      } else {\r\n        result.push({\r\n          date: new Date(current),\r\n          label: current.toLocaleDateString(locale, { month: 'short', year: 'numeric' }),\r\n          x,\r\n        });\r\n        current.setMonth(current.getMonth() + 1);\r\n      }\r\n      index++;\r\n    }\r\n\r\n    return result;\r\n  }, [startDate, endDate, timeScale, dayWidth, zoom, locale, t.labels.week]);\r\n\r\n  // Today position\r\n  const todayX = useMemo(() => {\r\n    const today = new Date();\r\n    const daysFromStart = (today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\r\n    return daysFromStart * dayWidth * zoom;\r\n  }, [startDate, dayWidth, zoom]);\r\n\r\n  // v0.13.7: Content height calculation (without header - header is now separate)\r\n  const contentHeight = Math.max(flatTasks.length * ROW_HEIGHT, 600 - HEADER_HEIGHT);\r\n\r\n  return (\r\n    <div\r\n      className=\"w-full flex flex-col\"\r\n      data-gantt-chart\r\n      style={{ backgroundColor: theme.bgPrimary }}\r\n    >\r\n      {/* v0.13.7: Sticky Header - stays visible during vertical scroll */}\r\n      <div\r\n        style={{\r\n          position: 'sticky',\r\n          top: 0,\r\n          zIndex: 10,\r\n          backgroundColor: theme.bgGrid,\r\n          flexShrink: 0,\r\n          height: `${HEADER_HEIGHT}px`,\r\n          borderBottom: `1px solid ${theme.border}`,\r\n          boxSizing: 'border-box', // Border included in height\r\n        }}\r\n      >\r\n        <svg\r\n          width={Math.max(timelineWidth, 1000)}\r\n          height={HEADER_HEIGHT - 1} // -1 for border\r\n          style={{ display: 'block' }}\r\n        >\r\n          {/* Header Background */}\r\n          <rect\r\n            x={0}\r\n            y={0}\r\n            width={Math.max(timelineWidth, 1000)}\r\n            height={HEADER_HEIGHT}\r\n            fill={theme.bgGrid}\r\n          />\r\n\r\n          {/* Header Grid Lines and Text */}\r\n          {headers.map((header, index) => (\r\n            <g key={`header-${index}`}>\r\n              {/* Grid line in header - skip first line since TaskGrid border serves as divider */}\r\n              {index > 0 && (\r\n                <line\r\n                  x1={header.x}\r\n                  y1={0}\r\n                  x2={header.x}\r\n                  y2={HEADER_HEIGHT}\r\n                  stroke={theme.border}\r\n                  strokeWidth={1}\r\n                  opacity={0.1}\r\n                />\r\n              )}\r\n\r\n              {/* Header text - JetBrains Mono for technical/date display */}\r\n              <text\r\n                x={header.x + 8}\r\n                y={HEADER_HEIGHT / 2}\r\n                fill={theme.textTertiary}\r\n                fontSize=\"11\"\r\n                fontFamily=\"'JetBrains Mono', ui-monospace, monospace\"\r\n                fontWeight=\"500\"\r\n                dominantBaseline=\"middle\"\r\n              >\r\n                {header.label}\r\n              </text>\r\n            </g>\r\n          ))}\r\n\r\n          {/* Today marker in header */}\r\n          {todayX >= 0 && todayX <= timelineWidth && (\r\n            <circle cx={todayX} cy={HEADER_HEIGHT - 10} r={6} fill={theme.today} opacity={1} />\r\n          )}\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Scrollable Content Area */}\r\n      {/* v0.17.31: Added overflow:visible to allow tooltips to render above the header */}\r\n      <svg\r\n        width={Math.max(timelineWidth, 1000)}\r\n        height={contentHeight}\r\n        style={{ display: 'block', flexShrink: 0, overflow: 'visible' }}\r\n      >\r\n        <defs>\r\n          <filter id=\"shadow\">\r\n            <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" floodOpacity=\"0.1\" />\r\n          </filter>\r\n\r\n          {/* Neutral theme: Diagonal stripes pattern for critical/overdue tasks */}\r\n          <pattern id=\"diagonal-stripes\" width=\"8\" height=\"8\" patternUnits=\"userSpaceOnUse\" patternTransform=\"rotate(45)\">\r\n            <line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"8\" stroke={theme.border} strokeWidth=\"2\" />\r\n          </pattern>\r\n        </defs>\r\n\r\n        {/* Full SVG Background - v0.17.220: Matches TaskGrid bgPrimary for alignment */}\r\n        <rect\r\n          x={0}\r\n          y={0}\r\n          width={Math.max(timelineWidth, 1000)}\r\n          height={contentHeight}\r\n          fill={theme.bgPrimary}\r\n        />\r\n\r\n        {/* Grid Lines and Weekend Backgrounds - v0.13.7: Adjusted Y positions (no header offset) */}\r\n        {headers.map((header, index) => {\r\n          const nextX = headers[index + 1]?.x || timelineWidth;\r\n          const isWeekendDay = isWeekend(header.date);\r\n\r\n          return (\r\n            <g key={index}>\r\n              {/* Weekend background - subtle highlight */}\r\n              {isWeekendDay && (\r\n                <rect\r\n                  x={header.x}\r\n                  y={0}\r\n                  width={nextX - header.x}\r\n                  height={flatTasks.length * ROW_HEIGHT}\r\n                  fill={theme.bgWeekend}\r\n                  opacity={1}\r\n                />\r\n              )}\r\n\r\n              {/* Grid line - skip first line since TaskGrid border serves as divider */}\r\n              {index > 0 && (\r\n                <line\r\n                  x1={header.x}\r\n                  y1={0}\r\n                  x2={header.x}\r\n                  y2={flatTasks.length * ROW_HEIGHT}\r\n                  stroke={theme.border}\r\n                  strokeWidth={1}\r\n                  opacity={0.1}\r\n                />\r\n              )}\r\n            </g>\r\n          );\r\n        })}\r\n\r\n        {/* Row Backgrounds with Click-to-Create functionality - v0.13.7: Adjusted Y positions */}\r\n        {/* v0.17.220: Aligned row colors with TaskGrid - same alternating pattern for visual consistency */}\r\n        {flatTasks.map((task, index) => {\r\n          const hasTaskBar = task.startDate && task.endDate;\r\n\r\n          return (\r\n            <g key={`row-group-${task.id}`}>\r\n              {/* Background stripe - alternating rows matching TaskGrid colors for perfect alignment */}\r\n              <rect\r\n                key={`row-${task.id}`}\r\n                x={0}\r\n                y={index * ROW_HEIGHT}\r\n                width={timelineWidth}\r\n                height={ROW_HEIGHT}\r\n                fill={index % 2 === 0 ? theme.bgPrimary : theme.bgGrid}\r\n                opacity={1}\r\n                style={{ pointerEvents: 'none' }}\r\n              />\r\n\r\n              {/* Clickable area for tasks without dates */}\r\n              {!hasTaskBar && (\r\n                <>\r\n                  <rect\r\n                    key={`clickable-${task.id}`}\r\n                    x={0}\r\n                    y={index * ROW_HEIGHT}\r\n                    width={timelineWidth}\r\n                    height={ROW_HEIGHT}\r\n                    fill=\"transparent\"\r\n                    style={{\r\n                      cursor: 'pointer',\r\n                      pointerEvents: 'all'\r\n                    }}\r\n                    onClick={(e) => handleTimelineClick(e, task)}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.setAttribute('fill', theme.accentLight);\r\n                      e.currentTarget.setAttribute('opacity', '0.5');\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.setAttribute('fill', 'transparent');\r\n                      e.currentTarget.setAttribute('opacity', '1');\r\n                    }}\r\n                  />\r\n                  {/* Placeholder text for empty tasks */}\r\n                  <text\r\n                    key={`placeholder-${task.id}`}\r\n                    x={todayX > 0 ? todayX : 100}\r\n                    y={index * ROW_HEIGHT + ROW_HEIGHT / 2}\r\n                    fill={theme.textTertiary}\r\n                    fontSize=\"12\"\r\n                    fontFamily=\"Inter, sans-serif\"\r\n                    fontStyle=\"italic\"\r\n                    dominantBaseline=\"middle\"\r\n                    opacity={0.4}\r\n                    style={{ pointerEvents: 'none', userSelect: 'none' }}\r\n                  >\r\n                    {t.labels.clickToSetDates}\r\n                  </text>\r\n                </>\r\n              )}\r\n            </g>\r\n          );\r\n        })}\r\n\r\n        {/* v0.17.363: Dependencies moved to AFTER tasks for proper layering */}\r\n\r\n        {/* Tasks - v0.13.7: Adjusted Y positions */}\r\n        {flatTasks.map((task, index) => {\r\n          // Don't render task bar if task doesn't have dates\r\n          if (!task.startDate || !task.endDate) {\r\n            return null;\r\n          }\r\n\r\n          const { x, width } = getTaskPosition(task);\r\n          const y = index * ROW_HEIGHT + 12;\r\n\r\n          // Container phase (has subtasks): render as bracket bar\r\n          const isContainer = task.subtasks && task.subtasks.length > 0 && !task.isMilestone;\r\n\r\n          if (task.isMilestone) {\r\n            return (\r\n              <Milestone\r\n                key={task.id}\r\n                task={task}\r\n                x={x + width / 2}\r\n                y={y + 16}\r\n                theme={theme}\r\n                onClick={onTaskClick}\r\n              />\r\n            );\r\n          }\r\n\r\n          if (isContainer) {\r\n            // Render container as elegant bracket bar with task name\r\n            // v0.17.45: Added onContextMenu handler for adding subtasks\r\n            // v0.17.46: Removed onDoubleClick - parent tasks are not directly editable (MS Project style)\r\n            return (\r\n              <g\r\n                key={task.id}\r\n                onClick={() => onTaskClick?.(task)}\r\n                onContextMenu={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  onTaskContextMenu?.(task, e as unknown as React.MouseEvent);\r\n                }}\r\n                style={{ cursor: 'default' }}\r\n              >\r\n                {/* Background fill - elegant and visible */}\r\n                <rect\r\n                  x={x}\r\n                  y={y}\r\n                  width={width}\r\n                  height={32}\r\n                  fill={theme.primary}\r\n                  opacity={0.25}\r\n                  rx={6}\r\n                />\r\n                {/* Top bracket line */}\r\n                <line\r\n                  x1={x}\r\n                  y1={y}\r\n                  x2={x + width}\r\n                  y2={y}\r\n                  stroke={theme.primary}\r\n                  strokeWidth={3}\r\n                  opacity={0.9}\r\n                  strokeLinecap=\"round\"\r\n                />\r\n                {/* Left vertical */}\r\n                <line\r\n                  x1={x}\r\n                  y1={y}\r\n                  x2={x}\r\n                  y2={y + 32}\r\n                  stroke={theme.primary}\r\n                  strokeWidth={3}\r\n                  opacity={0.9}\r\n                  strokeLinecap=\"round\"\r\n                />\r\n                {/* Right vertical */}\r\n                <line\r\n                  x1={x + width}\r\n                  y1={y}\r\n                  x2={x + width}\r\n                  y2={y + 32}\r\n                  stroke={theme.primary}\r\n                  strokeWidth={3}\r\n                  opacity={0.9}\r\n                  strokeLinecap=\"round\"\r\n                />\r\n                {/* Bottom bracket line */}\r\n                <line\r\n                  x1={x}\r\n                  y1={y + 32}\r\n                  x2={x + width}\r\n                  y2={y + 32}\r\n                  stroke={theme.primary}\r\n                  strokeWidth={3}\r\n                  opacity={0.9}\r\n                  strokeLinecap=\"round\"\r\n                />\r\n                {/* Task name text - Matching TaskBar pattern */}\r\n                {width > 60 && (\r\n                  <text\r\n                    x={x + 12}\r\n                    y={y + 16}\r\n                    dominantBaseline=\"middle\"\r\n                    fill=\"#FFFFFF\"\r\n                    fontSize=\"13\"\r\n                    fontWeight=\"500\"\r\n                    fontFamily=\"Inter, sans-serif\"\r\n                    style={{ pointerEvents: 'none', userSelect: 'none' }}\r\n                  >\r\n                    {task.name}\r\n                  </text>\r\n                )}\r\n              </g>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <TaskBar\r\n              key={task.id}\r\n              task={task}\r\n              x={x}\r\n              y={y}\r\n              width={width}\r\n              theme={theme}\r\n              dayWidth={dayWidth * zoom}\r\n              startDate={startDate}\r\n              templates={templates}\r\n              onClick={onTaskClick}\r\n              onDoubleClick={onTaskDblClick} // v0.8.0\r\n              onContextMenu={onTaskContextMenu} // v0.8.0\r\n              onDateChange={onTaskDateChange}\r\n              onDependencyCreate={onDependencyCreate}\r\n              allTaskPositions={taskPositions}\r\n              onDragMove={handleTaskDragMove} // v0.13.0\r\n              onHoverChange={handleTooltipChange} // v0.17.76: Top-layer tooltip\r\n            />\r\n          );\r\n        })}\r\n\r\n        {/* v0.17.363: SINGLE dependency layer - rendered AFTER tasks for proper z-order */}\r\n        {/* DependencyLine component handles its own hover state and delete button */}\r\n        {flatTasks.map((task, toIndex) => {\r\n          if (!task.dependencies || task.dependencies.length === 0) return null;\r\n          if (!task.startDate || !task.endDate) return null;\r\n\r\n          return task.dependencies.map((depId) => {\r\n            const depTask = flatTasks.find((t) => t.id === depId);\r\n            if (!depTask) return null;\r\n            if (!depTask.startDate || !depTask.endDate) return null;\r\n\r\n            const fromIndex = flatTasks.findIndex((t) => t.id === depId);\r\n            const fromPos = getTaskPosition(depTask);\r\n            const toPos = getTaskPosition(task);\r\n\r\n            // v0.17.363: TRUE ClickUp-style dependency lines\r\n            // Line exits from RIGHT-CENTER of origin bar\r\n            const exitX = fromPos.x + fromPos.width;\r\n            const exitY = fromIndex * ROW_HEIGHT + 28;\r\n\r\n            // Line enters at LEFT-CENTER of destination bar\r\n            const enterX = toPos.x;\r\n            const enterY = toIndex * ROW_HEIGHT + 28;\r\n\r\n            return (\r\n              <DependencyLine\r\n                key={`dep-${depId}-${task.id}`}\r\n                x1={exitX}\r\n                y1={exitY}\r\n                x2={enterX}\r\n                y2={enterY}\r\n                theme={theme}\r\n                lineStyle={dependencyLineStyle}\r\n                onDelete={() => onDependencyDelete?.(task.id, depId)}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n\r\n        {/* v0.13.0: Dependency Cascade Preview - Ghost bars showing where dependent tasks will move */}\r\n        {/* v0.13.4: Simplified - no conflicting animation, direct position */}\r\n        {/* v0.13.7: Adjusted Y positions for cascade previews */}\r\n        {cascadePreviews.map((preview) => (\r\n          <g\r\n            key={`cascade-preview-${preview.taskId}`}\r\n            style={{ pointerEvents: 'none' }}\r\n          >\r\n            {/* Ghost bar at exact preview position - v0.13.7: Y adjusted (subtract HEADER_HEIGHT) */}\r\n            <rect\r\n              x={preview.previewX}\r\n              y={preview.y - HEADER_HEIGHT}\r\n              width={preview.width}\r\n              height={32}\r\n              rx={8}\r\n              fill={preview.color || theme.accent}\r\n              opacity={0.3}\r\n              stroke={theme.accent}\r\n              strokeWidth={2}\r\n              strokeDasharray=\"4 2\"\r\n            />\r\n            {/* Days delta label */}\r\n            {Math.abs(preview.daysDelta) > 0 && (\r\n              <text\r\n                x={preview.previewX + preview.width / 2}\r\n                y={preview.y - HEADER_HEIGHT + 16}\r\n                textAnchor=\"middle\"\r\n                dominantBaseline=\"middle\"\r\n                fill={theme.accent}\r\n                fontSize=\"10\"\r\n                fontWeight=\"600\"\r\n                fontFamily=\"Inter, sans-serif\"\r\n                style={{ userSelect: 'none' }}\r\n              >\r\n                {preview.daysDelta > 0 ? `+${preview.daysDelta}d` : `${preview.daysDelta}d`}\r\n              </text>\r\n            )}\r\n          </g>\r\n        ))}\r\n\r\n        {/* v0.17.363: Removed separate hover layer - DependencyLine handles its own hover */}\r\n\r\n        {/* v0.17.179: Today Line - Thinner like ClickUp (1px) */}\r\n        {todayX >= 0 && todayX <= timelineWidth && (\r\n          <line\r\n            x1={todayX}\r\n            y1={0}\r\n            x2={todayX}\r\n            y2={contentHeight}\r\n            stroke={theme.today}\r\n            strokeWidth={1}\r\n            opacity={1}\r\n            style={{ pointerEvents: 'none' }}\r\n          />\r\n        )}\r\n\r\n        {/* v0.17.76: Tooltip layer - rendered last to ensure it's always on top */}\r\n        {activeTooltip && (\r\n          <TaskTooltip tooltipData={activeTooltip} theme={theme} />\r\n        )}\r\n      </svg>\r\n    </div>\r\n  );\r\n}","/**\r\n * GanttAIAssistant - AI-powered natural language task editor\r\n * Allows users to edit Gantt tasks using natural language commands\r\n *\r\n * @version 0.14.0\r\n *\r\n * @example\r\n * // In GanttBoard with AI assistant\r\n * <GanttBoard\r\n *   tasks={tasks}\r\n *   config={{\r\n *     aiAssistant: {\r\n *       enabled: true,\r\n *       onCommand: async (command, tasks) => {\r\n *         // Call your AI API and return task updates\r\n *         const response = await fetch('/api/gantt-ai', {\r\n *           method: 'POST',\r\n *           body: JSON.stringify({ command, tasks })\r\n *         });\r\n *         return response.json();\r\n *       }\r\n *     }\r\n *   }}\r\n * />\r\n */\r\n\r\nimport { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Portal } from '../Portal';\r\nimport {\r\n  Task,\r\n  GanttTheme,\r\n  AICommandResult,\r\n  AIMessage,\r\n  GanttAIAssistantConfig,\r\n} from './types';\r\n\r\n// Re-export types for backwards compatibility\r\nexport type { AICommandResult, AIMessage, GanttAIAssistantConfig } from './types';\r\nexport type { PersistHistoryConfig } from './types';\r\n\r\nexport interface GanttAIAssistantProps {\r\n  /** All current tasks in the Gantt */\r\n  tasks: Task[];\r\n  /** Theme configuration */\r\n  theme: GanttTheme;\r\n  /** AI assistant configuration */\r\n  config: GanttAIAssistantConfig;\r\n  /** Callback when tasks should be updated */\r\n  onTasksUpdate: (updatedTasks: Task[]) => void;\r\n  /** Callback for single task update */\r\n  onTaskUpdate?: (taskId: string, updates: Partial<Task>) => void;\r\n  /** Callback for task creation */\r\n  onTaskCreate?: (task: Task) => void;\r\n  /** Callback for task deletion */\r\n  onTaskDelete?: (taskId: string) => void;\r\n  /** Callback for dependency creation */\r\n  onDependencyCreate?: (fromTaskId: string, toTaskId: string) => void;\r\n  /** Callback for dependency deletion */\r\n  onDependencyDelete?: (taskId: string, dependencyId: string) => void;\r\n}\r\n\r\n// Default suggestions for the command palette\r\nconst DEFAULT_SUGGESTIONS = [\r\n  'Move \"Task Name\" to next Monday',\r\n  'Extend \"Task Name\" by 3 days',\r\n  'Rename \"Old Name\" to \"New Name\"',\r\n  'Set \"Task Name\" progress to 50%',\r\n  'Link \"Task A\" to \"Task B\"',\r\n  'Create a new task called \"New Task\"',\r\n  'Delete \"Task Name\"',\r\n  'Assign John to \"Task Name\"',\r\n];\r\n\r\n// Sparkle/AI icon component\r\nconst AIIcon = () => (\r\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707\" />\r\n    <circle cx=\"12\" cy=\"12\" r=\"4\" />\r\n  </svg>\r\n);\r\n\r\n// Send icon\r\nconst SendIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\" />\r\n  </svg>\r\n);\r\n\r\n// Close icon\r\nconst CloseIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M18 6L6 18M6 6L18 18\" />\r\n  </svg>\r\n);\r\n\r\n// Minimize icon\r\nconst MinimizeIcon = () => (\r\n  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n    <path d=\"M5 12h14\" />\r\n  </svg>\r\n);\r\n\r\n// Loading dots animation\r\nconst LoadingDots = () => (\r\n  <div className=\"flex gap-1 items-center\">\r\n    {[0, 1, 2].map((i) => (\r\n      <motion.div\r\n        key={i}\r\n        className=\"w-2 h-2 rounded-full bg-current\"\r\n        animate={{\r\n          scale: [1, 1.2, 1],\r\n          opacity: [0.5, 1, 0.5],\r\n        }}\r\n        transition={{\r\n          duration: 0.8,\r\n          repeat: Infinity,\r\n          delay: i * 0.15,\r\n        }}\r\n      />\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport function GanttAIAssistant({\r\n  tasks,\r\n  theme,\r\n  config,\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  onTasksUpdate: _onTasksUpdate, // Reserved for batch updates\r\n  onTaskUpdate,\r\n  onTaskCreate,\r\n  onTaskDelete,\r\n  onDependencyCreate,\r\n  onDependencyDelete,\r\n}: GanttAIAssistantProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isMinimized, setIsMinimized] = useState(false);\r\n  const [messages, setMessages] = useState<AIMessage[]>([]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showSuggestions, setShowSuggestions] = useState(true);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const chatContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const {\r\n    enabled = true,\r\n    placeholder = 'Ask AI to edit tasks... (e.g., \"Move Design to next week\")',\r\n    position = 'bottom-right',\r\n    onCommand,\r\n    suggestions = DEFAULT_SUGGESTIONS,\r\n    maxHistory = 50,\r\n    persistHistory,\r\n  } = config;\r\n\r\n  // Get storage key for localStorage\r\n  const storageKey = persistHistory?.storageKey || 'gantt-ai-history';\r\n  const persistMaxMessages = persistHistory?.maxMessages ?? 5;\r\n\r\n  // Load persisted history on mount\r\n  useEffect(() => {\r\n    if (persistHistory?.enabled) {\r\n      try {\r\n        const saved = localStorage.getItem(storageKey);\r\n        if (saved) {\r\n          const parsed = JSON.parse(saved) as AIMessage[];\r\n          // Convert timestamp strings back to Date objects\r\n          const messagesWithDates = parsed.map(msg => ({\r\n            ...msg,\r\n            timestamp: new Date(msg.timestamp),\r\n          }));\r\n          setMessages(messagesWithDates.slice(-persistMaxMessages));\r\n        }\r\n      } catch (error) {\r\n        console.warn('[GanttAIAssistant] Failed to load persisted history:', error);\r\n      }\r\n    }\r\n  }, [persistHistory?.enabled, storageKey, persistMaxMessages]);\r\n\r\n  // Persist history when messages change\r\n  useEffect(() => {\r\n    if (persistHistory?.enabled && messages.length > 0) {\r\n      try {\r\n        // Only persist non-loading messages\r\n        const messagesToPersist = messages\r\n          .filter(m => !m.isLoading)\r\n          .slice(-persistMaxMessages);\r\n        localStorage.setItem(storageKey, JSON.stringify(messagesToPersist));\r\n      } catch (error) {\r\n        console.warn('[GanttAIAssistant] Failed to persist history:', error);\r\n      }\r\n    }\r\n  }, [messages, persistHistory?.enabled, storageKey, persistMaxMessages]);\r\n\r\n  // Auto-scroll to bottom on new messages\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]);\r\n\r\n  // Focus input when chat opens\r\n  useEffect(() => {\r\n    if (isOpen && !isMinimized && inputRef.current) {\r\n      setTimeout(() => inputRef.current?.focus(), 100);\r\n    }\r\n  }, [isOpen, isMinimized]);\r\n\r\n  // Apply task updates based on AI command result\r\n  const applyCommandResult = useCallback((result: AICommandResult) => {\r\n    if (!result.success) return;\r\n\r\n    switch (result.type) {\r\n      case 'move_task':\r\n      case 'resize_task':\r\n      case 'rename_task':\r\n      case 'set_progress':\r\n      case 'set_status':\r\n      case 'assign_task':\r\n        if (result.taskId && result.updates) {\r\n          onTaskUpdate?.(result.taskId, result.updates);\r\n        }\r\n        break;\r\n\r\n      case 'create_task':\r\n        if (result.newTask) {\r\n          onTaskCreate?.(result.newTask);\r\n        }\r\n        break;\r\n\r\n      case 'delete_task':\r\n        if (result.taskId) {\r\n          onTaskDelete?.(result.taskId);\r\n        }\r\n        break;\r\n\r\n      case 'link_tasks':\r\n        if (result.dependencyFrom && result.dependencyTo) {\r\n          onDependencyCreate?.(result.dependencyFrom, result.dependencyTo);\r\n        }\r\n        break;\r\n\r\n      case 'unlink_tasks':\r\n        if (result.taskId && result.dependencyFrom) {\r\n          onDependencyDelete?.(result.taskId, result.dependencyFrom);\r\n        }\r\n        break;\r\n    }\r\n  }, [onTaskUpdate, onTaskCreate, onTaskDelete, onDependencyCreate, onDependencyDelete]);\r\n\r\n  // Handle sending a command\r\n  const handleSendCommand = useCallback(async (command: string) => {\r\n    if (!command.trim() || isLoading) return;\r\n\r\n    // Add user message\r\n    const userMessage: AIMessage = {\r\n      id: `user-${Date.now()}`,\r\n      role: 'user',\r\n      content: command,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev.slice(-(maxHistory - 1)), userMessage]);\r\n    setInputValue('');\r\n    setShowSuggestions(false);\r\n    setIsLoading(true);\r\n\r\n    // Add loading message\r\n    const loadingMessage: AIMessage = {\r\n      id: `loading-${Date.now()}`,\r\n      role: 'assistant',\r\n      content: '',\r\n      timestamp: new Date(),\r\n      isLoading: true,\r\n    };\r\n    setMessages((prev) => [...prev, loadingMessage]);\r\n\r\n    try {\r\n      if (onCommand) {\r\n        const result = await onCommand(command, tasks);\r\n\r\n        // Remove loading message and add response\r\n        setMessages((prev) => {\r\n          const withoutLoading = prev.filter((m) => !m.isLoading);\r\n          const assistantMessage: AIMessage = {\r\n            id: `assistant-${Date.now()}`,\r\n            role: 'assistant',\r\n            content: result.message,\r\n            timestamp: new Date(),\r\n            command: result,\r\n          };\r\n          return [...withoutLoading, assistantMessage];\r\n        });\r\n\r\n        // Apply the command result\r\n        applyCommandResult(result);\r\n      } else {\r\n        // No handler provided - show helpful message\r\n        setMessages((prev) => {\r\n          const withoutLoading = prev.filter((m) => !m.isLoading);\r\n          return [\r\n            ...withoutLoading,\r\n            {\r\n              id: `assistant-${Date.now()}`,\r\n              role: 'assistant',\r\n              content: 'AI handler not configured. Please provide an onCommand handler in the aiAssistant config.',\r\n              timestamp: new Date(),\r\n            },\r\n          ];\r\n        });\r\n      }\r\n    } catch (error) {\r\n      // Handle error\r\n      setMessages((prev) => {\r\n        const withoutLoading = prev.filter((m) => !m.isLoading);\r\n        return [\r\n          ...withoutLoading,\r\n          {\r\n            id: `error-${Date.now()}`,\r\n            role: 'assistant',\r\n            content: `Sorry, I encountered an error: ${error instanceof Error ? error.message : 'Unknown error'}`,\r\n            timestamp: new Date(),\r\n          },\r\n        ];\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [isLoading, maxHistory, onCommand, tasks, applyCommandResult]);\r\n\r\n  // Handle input submit\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    handleSendCommand(inputValue);\r\n  };\r\n\r\n  // Handle suggestion click\r\n  const handleSuggestionClick = (suggestion: string) => {\r\n    setInputValue(suggestion);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  // Handle keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Toggle chat with Cmd/Ctrl + K\r\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\r\n        e.preventDefault();\r\n        setIsOpen((prev) => !prev);\r\n        if (!isOpen) {\r\n          setIsMinimized(false);\r\n        }\r\n      }\r\n      // Close on Escape\r\n      if (e.key === 'Escape' && isOpen) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [isOpen]);\r\n\r\n  // Close when clicking outside the chat panel\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const target = e.target as HTMLElement;\r\n      // Check if click is outside the chat container\r\n      if (chatContainerRef.current && !chatContainerRef.current.contains(target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    // Add listener with a small delay to avoid closing immediately on open\r\n    const timeoutId = setTimeout(() => {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!enabled) return null;\r\n\r\n  // Position classes\r\n  const positionClasses = {\r\n    'bottom-right': 'bottom-4 right-4',\r\n    'bottom-left': 'bottom-4 left-4',\r\n    'top-right': 'top-4 right-4',\r\n    'top-left': 'top-4 left-4',\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Floating AI Assistant Button */}\r\n      <AnimatePresence>\r\n        {!isOpen && (\r\n          <motion.button\r\n            initial={{ scale: 0, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0, opacity: 0 }}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            className={`fixed ${positionClasses[position]} z-[99999] flex items-center gap-2 px-4 py-3 rounded-full shadow-lg transition-colors`}\r\n            style={{\r\n              background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n              color: 'white',\r\n              boxShadow: '0 4px 20px rgba(59, 130, 246, 0.4)',\r\n            }}\r\n            onClick={() => setIsOpen(true)}\r\n          >\r\n            <AIIcon />\r\n            <span className=\"text-sm font-medium\">AI Assistant</span>\r\n            <kbd className=\"hidden sm:inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-mono rounded bg-white/20\">\r\n              K\r\n            </kbd>\r\n          </motion.button>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Chat Panel */}\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <motion.div\r\n            ref={chatContainerRef}\r\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            animate={{\r\n              opacity: 1,\r\n              y: 0,\r\n              scale: 1,\r\n              height: isMinimized ? 'auto' : 500,\r\n            }}\r\n            exit={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\r\n            className={`fixed ${positionClasses[position]} z-[99999] w-96 rounded-2xl overflow-hidden shadow-2xl flex flex-col`}\r\n            style={{\r\n              background: theme.bgPrimary,\r\n              border: `1px solid ${theme.border}`,\r\n              boxShadow: `0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px ${theme.border}`,\r\n            }}\r\n          >\r\n            {/* Header */}\r\n            <div\r\n              className=\"flex items-center justify-between px-4 py-3\"\r\n              style={{\r\n                background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n              }}\r\n            >\r\n              <div className=\"flex items-center gap-2 text-white\">\r\n                <AIIcon />\r\n                <span className=\"font-semibold\">Gantt AI Assistant</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1\">\r\n                <button\r\n                  onClick={() => setIsMinimized((prev) => !prev)}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/20 text-white/80 hover:text-white transition-colors\"\r\n                >\r\n                  <MinimizeIcon />\r\n                </button>\r\n                <button\r\n                  onClick={() => setIsOpen(false)}\r\n                  className=\"p-1.5 rounded-lg hover:bg-white/20 text-white/80 hover:text-white transition-colors\"\r\n                >\r\n                  <CloseIcon />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Chat Content */}\r\n            <AnimatePresence>\r\n              {!isMinimized && (\r\n                <motion.div\r\n                  initial={{ height: 0, opacity: 0 }}\r\n                  animate={{ height: 'auto', opacity: 1 }}\r\n                  exit={{ height: 0, opacity: 0 }}\r\n                  className=\"flex flex-col flex-1 min-h-0\"\r\n                >\r\n                  {/* Messages */}\r\n                  <div\r\n                    className=\"flex-1 overflow-y-auto p-4 space-y-4\"\r\n                    style={{ maxHeight: 350 }}\r\n                  >\r\n                    {messages.length === 0 && showSuggestions && (\r\n                      <div className=\"space-y-3\">\r\n                        <p\r\n                          className=\"text-sm text-center\"\r\n                          style={{ color: theme.textSecondary }}\r\n                        >\r\n                          Try asking me to edit your Gantt chart:\r\n                        </p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {suggestions.slice(0, 4).map((suggestion, index) => (\r\n                            <button\r\n                              key={index}\r\n                              onClick={() => handleSuggestionClick(suggestion)}\r\n                              className=\"text-xs px-3 py-1.5 rounded-full transition-colors\"\r\n                              style={{\r\n                                background: theme.bgSecondary,\r\n                                color: theme.textSecondary,\r\n                                border: `1px solid ${theme.border}`,\r\n                              }}\r\n                            >\r\n                              {suggestion.length > 30\r\n                                ? suggestion.slice(0, 30) + '...'\r\n                                : suggestion}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {messages.map((message) => (\r\n                      <motion.div\r\n                        key={message.id}\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className={`flex ${\r\n                          message.role === 'user' ? 'justify-end' : 'justify-start'\r\n                        }`}\r\n                      >\r\n                        <div\r\n                          className={`max-w-[85%] rounded-2xl px-4 py-2.5 ${\r\n                            message.role === 'user'\r\n                              ? 'rounded-br-md'\r\n                              : 'rounded-bl-md'\r\n                          }`}\r\n                          style={{\r\n                            background:\r\n                              message.role === 'user'\r\n                                ? 'linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)'\r\n                                : theme.bgSecondary,\r\n                            color:\r\n                              message.role === 'user'\r\n                                ? 'white'\r\n                                : theme.textPrimary,\r\n                          }}\r\n                        >\r\n                          {message.isLoading ? (\r\n                            <LoadingDots />\r\n                          ) : (\r\n                            <p className=\"text-sm whitespace-pre-wrap\">\r\n                              {message.content}\r\n                            </p>\r\n                          )}\r\n\r\n                          {/* Command result badge */}\r\n                          {message.command && (\r\n                            <div\r\n                              className=\"mt-2 text-xs px-2 py-1 rounded-md inline-flex items-center gap-1\"\r\n                              style={{\r\n                                background: message.command.success\r\n                                  ? 'rgba(16, 185, 129, 0.2)'\r\n                                  : 'rgba(239, 68, 68, 0.2)',\r\n                                color: message.command.success\r\n                                  ? '#10B981'\r\n                                  : '#EF4444',\r\n                              }}\r\n                            >\r\n                              {message.command.success ? '' : ''}\r\n                              <span className=\"capitalize\">\r\n                                {message.command.type.replace(/_/g, ' ')}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </motion.div>\r\n                    ))}\r\n                    <div ref={messagesEndRef} />\r\n                  </div>\r\n\r\n                  {/* Input */}\r\n                  <form\r\n                    onSubmit={handleSubmit}\r\n                    className=\"p-3 border-t\"\r\n                    style={{ borderColor: theme.border }}\r\n                  >\r\n                    <div\r\n                      className=\"flex items-center gap-2 rounded-xl px-4 py-2\"\r\n                      style={{\r\n                        background: theme.bgSecondary,\r\n                        border: `1px solid ${theme.border}`,\r\n                      }}\r\n                    >\r\n                      <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={inputValue}\r\n                        onChange={(e) => setInputValue(e.target.value)}\r\n                        placeholder={placeholder}\r\n                        disabled={isLoading}\r\n                        className=\"flex-1 bg-transparent text-sm outline-none\"\r\n                        style={{ color: theme.textPrimary }}\r\n                      />\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={!inputValue.trim() || isLoading}\r\n                        className=\"p-2 rounded-lg transition-all disabled:opacity-50\"\r\n                        style={{\r\n                          background: inputValue.trim()\r\n                            ? 'linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%)'\r\n                            : 'transparent',\r\n                          color: inputValue.trim() ? 'white' : theme.textSecondary,\r\n                        }}\r\n                      >\r\n                        <SendIcon />\r\n                      </button>\r\n                    </div>\r\n                    <p\r\n                      className=\"text-[10px] text-center mt-2\"\r\n                      style={{ color: theme.textTertiary }}\r\n                    >\r\n                      Press Enter to send  Esc to close\r\n                    </p>\r\n                  </form>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </Portal>\r\n  );\r\n}\r\n\r\nexport default GanttAIAssistant;\r\n","import { useState, useCallback, useRef } from 'react';\r\n\r\ninterface HistoryState<T> {\r\n  past: T[];\r\n  present: T;\r\n  future: T[];\r\n}\r\n\r\ninterface UseUndoRedoResult<T> {\r\n  state: T;\r\n  setState: (newStateOrUpdater: T | ((prev: T) => T), addToHistory?: boolean) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  clearHistory: () => void;\r\n}\r\n\r\n/**\r\n * Custom hook for undo/redo functionality\r\n * @param initialState - Initial state value\r\n * @param maxHistorySize - Maximum number of history entries (default: 50)\r\n */\r\nexport function useUndoRedo<T>(\r\n  initialState: T,\r\n  maxHistorySize: number = 50\r\n): UseUndoRedoResult<T> {\r\n  const [history, setHistory] = useState<HistoryState<T>>({\r\n    past: [],\r\n    present: initialState,\r\n    future: [],\r\n  });\r\n\r\n  // Track if we're currently applying undo/redo to avoid infinite loops\r\n  const isApplyingHistory = useRef(false);\r\n\r\n  const setState = useCallback(\r\n    (newStateOrUpdater: T | ((prev: T) => T), addToHistory: boolean = true) => {\r\n      setHistory((currentHistory) => {\r\n        // Resolve the new state (handle both direct values and updater functions)\r\n        const resolvedNewState =\r\n          typeof newStateOrUpdater === 'function'\r\n            ? (newStateOrUpdater as (prev: T) => T)(currentHistory.present)\r\n            : newStateOrUpdater;\r\n\r\n        if (isApplyingHistory.current) {\r\n          // If we're applying history, just update present without adding to history\r\n          return {\r\n            ...currentHistory,\r\n            present: resolvedNewState,\r\n          };\r\n        }\r\n\r\n        if (!addToHistory) {\r\n          // Direct state update without history\r\n          return {\r\n            ...currentHistory,\r\n            present: resolvedNewState,\r\n          };\r\n        }\r\n\r\n        const newPast = [...currentHistory.past, currentHistory.present];\r\n\r\n        // Limit history size\r\n        if (newPast.length > maxHistorySize) {\r\n          newPast.shift();\r\n        }\r\n\r\n        return {\r\n          past: newPast,\r\n          present: resolvedNewState,\r\n          future: [], // Clear future when making a new change\r\n        };\r\n      });\r\n    },\r\n    [maxHistorySize]\r\n  );\r\n\r\n  const undo = useCallback(() => {\r\n    setHistory((currentHistory) => {\r\n      if (currentHistory.past.length === 0) {\r\n        return currentHistory;\r\n      }\r\n\r\n      const previous = currentHistory.past[currentHistory.past.length - 1];\r\n      const newPast = currentHistory.past.slice(0, currentHistory.past.length - 1);\r\n\r\n      isApplyingHistory.current = true;\r\n      setTimeout(() => {\r\n        isApplyingHistory.current = false;\r\n      }, 0);\r\n\r\n      return {\r\n        past: newPast,\r\n        present: previous,\r\n        future: [currentHistory.present, ...currentHistory.future],\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const redo = useCallback(() => {\r\n    setHistory((currentHistory) => {\r\n      if (currentHistory.future.length === 0) {\r\n        return currentHistory;\r\n      }\r\n\r\n      const next = currentHistory.future[0];\r\n      const newFuture = currentHistory.future.slice(1);\r\n\r\n      isApplyingHistory.current = true;\r\n      setTimeout(() => {\r\n        isApplyingHistory.current = false;\r\n      }, 0);\r\n\r\n      return {\r\n        past: [...currentHistory.past, currentHistory.present],\r\n        present: next,\r\n        future: newFuture,\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const clearHistory = useCallback(() => {\r\n    setHistory((currentHistory) => ({\r\n      past: [],\r\n      present: currentHistory.present,\r\n      future: [],\r\n    }));\r\n  }, []);\r\n\r\n  return {\r\n    state: history.present,\r\n    setState,\r\n    undo,\r\n    redo,\r\n    canUndo: history.past.length > 0,\r\n    canRedo: history.future.length > 0,\r\n    clearHistory,\r\n  };\r\n}\r\n","import { useEffect } from 'react';\r\n\r\ninterface UseGanttUndoRedoKeysOptions {\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n  enabled?: boolean;\r\n}\r\n\r\n/**\r\n * Hook to handle keyboard shortcuts for undo/redo\r\n * Ctrl+Z / Cmd+Z for undo\r\n * Ctrl+Y / Cmd+Shift+Z for redo\r\n */\r\nexport function useGanttUndoRedoKeys({\r\n  undo,\r\n  redo,\r\n  canUndo,\r\n  canRedo,\r\n  enabled = true,\r\n}: UseGanttUndoRedoKeysOptions) {\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n      const ctrlKey = isMac ? e.metaKey : e.ctrlKey;\r\n\r\n      // Undo: Ctrl+Z (Windows/Linux) or Cmd+Z (Mac)\r\n      if (ctrlKey && e.key === 'z' && !e.shiftKey && canUndo) {\r\n        e.preventDefault();\r\n        undo();\r\n        return;\r\n      }\r\n\r\n      // Redo: Ctrl+Y (Windows/Linux) or Cmd+Shift+Z (Mac)\r\n      if (canRedo) {\r\n        if (!isMac && ctrlKey && e.key === 'y') {\r\n          e.preventDefault();\r\n          redo();\r\n          return;\r\n        }\r\n        if (isMac && ctrlKey && e.shiftKey && e.key === 'z') {\r\n          e.preventDefault();\r\n          redo();\r\n          return;\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [undo, redo, canUndo, canRedo, enabled]);\r\n}\r\n","import { Task, GanttTemplates } from './types';\r\nimport { ganttUtils } from './ganttUtils';\r\n\r\n/**\r\n * Default templates for Gantt rendering\r\n * Users can override these with custom templates\r\n */\r\nexport const defaultTemplates: Required<GanttTemplates> = {\r\n  taskTooltip: (task: Task) => {\r\n    const lines: string[] = [\r\n      `<strong>${task.name}</strong>`,\r\n    ];\r\n\r\n    if (task.startDate && task.endDate) {\r\n      lines.push(\r\n        `${ganttUtils.formatDate(task.startDate)} - ${ganttUtils.formatDate(task.endDate)}`\r\n      );\r\n      const duration = ganttUtils.calculateDuration(task.startDate, task.endDate);\r\n      lines.push(`Duration: ${duration} days`);\r\n    }\r\n\r\n    if (task.progress !== undefined) {\r\n      lines.push(`Progress: ${task.progress}%`);\r\n    }\r\n\r\n    if (task.status) {\r\n      lines.push(`Status: ${task.status}`);\r\n    }\r\n\r\n    if (task.assignees && task.assignees.length > 0) {\r\n      const assigneeNames = task.assignees.map(a => a.name).join(', ');\r\n      lines.push(`Assigned: ${assigneeNames}`);\r\n    }\r\n\r\n    if (task.dependencies && task.dependencies.length > 0) {\r\n      lines.push(`Dependencies: ${task.dependencies.length}`);\r\n    }\r\n\r\n    return lines.join('<br/>');\r\n  },\r\n\r\n  taskLabel: (task: Task) => {\r\n    return task.name;\r\n  },\r\n\r\n  gridCell: (task: Task, column, value) => {\r\n    // Return default value as-is\r\n    return value;\r\n  },\r\n\r\n  taskClass: (task: Task) => {\r\n    const classes: string[] = [];\r\n\r\n    if (task.isCriticalPath) {\r\n      classes.push('critical-path');\r\n    }\r\n\r\n    if (task.status === 'completed') {\r\n      classes.push('completed');\r\n    } else if (task.status === 'in-progress') {\r\n      classes.push('in-progress');\r\n    } else if (task.status === 'todo') {\r\n      classes.push('todo');\r\n    }\r\n\r\n    if (task.isMilestone) {\r\n      classes.push('milestone');\r\n    }\r\n\r\n    return classes.join(' ');\r\n  },\r\n\r\n  milestoneContent: (task: Task) => {\r\n    return ` ${task.name}`;\r\n  },\r\n\r\n  dateFormat: (date: Date) => {\r\n    return ganttUtils.formatDate(date);\r\n  },\r\n\r\n  durationFormat: (days: number) => {\r\n    if (days === 1) return '1 day';\r\n    return `${days} days`;\r\n  },\r\n\r\n  progressFormat: (progress: number) => {\r\n    return `${progress}%`;\r\n  },\r\n};\r\n\r\n/**\r\n * Merge user templates with defaults\r\n */\r\nexport function mergeTemplates(\r\n  userTemplates?: Partial<GanttTemplates>\r\n): Required<GanttTemplates> {\r\n  return {\r\n    ...defaultTemplates,\r\n    ...userTemplates,\r\n  };\r\n}\r\n","import { useState, useRef, useEffect, useLayoutEffect, useCallback, useMemo, useContext, forwardRef, useImperativeHandle } from 'react';\r\nimport { Task, TimeScale, Theme, GanttConfig, GanttColumn, ColumnType, RowDensity, TaskFilterType } from './types';\r\nimport { deriveThemeFromCSS } from './deriveThemeFromCSS';\r\nimport { GanttToolbar } from './GanttToolbar';\r\nimport { TaskGrid } from './TaskGrid';\r\nimport { Timeline } from './Timeline';\r\nimport { ContextMenu, MenuIcons } from './ContextMenu'; // v0.8.0: Split task context menu\r\nimport { TaskDetailModal } from '../TaskDetailModal'; // v0.17.244: Unified task detail modal (replaces TaskFormModal)\r\nimport { GanttAIAssistant } from './GanttAIAssistant'; // v0.14.0: AI Assistant\r\nimport { motion, AnimatePresence } from 'framer-motion'; // v0.17.33: For delete confirmation modal\r\nimport { AlertTriangle, Trash2 } from 'lucide-react'; // v0.17.33: Icons for delete confirmation\r\n// v0.17.215: ColumnManager and Keyboard back in TaskGrid with sticky positioning\r\nimport { useUndoRedo } from './useUndoRedo';\r\nimport { useGanttUndoRedoKeys } from './useGanttUndoRedoKeys';\r\nimport { ThemeContext } from '../../theme/ThemeProvider';\r\nimport { GanttThemeContext } from './GanttThemeContext';\r\nimport { GanttI18nContext } from './GanttI18nContext'; // v0.15.0: i18n context\r\nimport { mergeTranslations, GanttTranslations } from './i18n'; // v0.15.0: i18n\r\nimport { GanttBoardRef } from './GanttBoardRef';\r\nimport { ganttUtils } from './ganttUtils';\r\nimport { mergeTemplates } from './defaultTemplates';\r\nimport html2canvas from 'html2canvas';\r\nimport {\r\n  indentTasks,\r\n  outdentTasks,\r\n  moveTasks,\r\n  deleteTasks,\r\n  duplicateTasks,\r\n  createTask,\r\n  renameTask,\r\n  toggleTaskExpansion,\r\n  createSubtask,\r\n  reparentTask,\r\n} from './hierarchyUtils';\r\n\r\ninterface GanttBoardProps {\r\n  tasks: Task[];\r\n  config?: GanttConfig;\r\n  onTasksChange?: (tasks: Task[]) => void;\r\n}\r\n\r\n// v0.17.71: Increased row heights for better \"breathing\" - less Excel, more SaaS\r\nconst getRowHeight = (density: RowDensity): number => {\r\n  switch (density) {\r\n    case 'compact':\r\n      return 44;  // Was 40 - still compact but not cramped\r\n    case 'comfortable':\r\n      return 52;  // Was 48 - default: luxurious spacing like Linear\r\n    case 'spacious':\r\n      return 60;  // Was 56 - generous for touch/accessibility\r\n    default:\r\n      return 52;\r\n  }\r\n};\r\n\r\nexport const GanttBoard = forwardRef<GanttBoardRef, GanttBoardProps>(function GanttBoard(\r\n  { tasks, config = {}, onTasksChange },\r\n  ref\r\n) {\r\n  const {\r\n    theme: initialTheme,\r\n    timeScale: initialTimeScale = 'week',\r\n    rowDensity: initialRowDensity = 'comfortable',\r\n    showThemeSelector = true,\r\n    showExportButton = true, // v0.12.0: Show export dropdown in toolbar\r\n    availableUsers = [],\r\n    templates,\r\n    enableAutoCriticalPath = true, // v0.11.1: Allow disabling automatic CPM calculation\r\n    persistExpandedState, // v0.17.181: Persist expanded state in localStorage\r\n    aiAssistant, // v0.14.0: AI Assistant configuration\r\n    // v0.15.0: Internationalization\r\n    locale = 'en',\r\n    customTranslations,\r\n    // v0.14.3: Create Task button in toolbar\r\n    showCreateTaskButton = false,\r\n    createTaskLabel,\r\n    onCreateTask,\r\n    // v0.17.300: Task filter\r\n    taskFilter: externalTaskFilter,\r\n    onTaskFilterChange: externalOnTaskFilterChange,\r\n    // UI events\r\n    onThemeChange, // v0.9.0\r\n    // Basic events\r\n    onTaskClick,\r\n    onTaskDblClick, // v0.8.0\r\n    onTaskContextMenu, // v0.8.0\r\n    onTaskUpdate,\r\n    onProgressChange, // v0.8.0\r\n    // v0.16.0: Context menu action callbacks\r\n    onTaskEdit,\r\n    onTaskAddSubtask,\r\n    onTaskMarkIncomplete,\r\n    onTaskSetInProgress,\r\n    // Dependency events\r\n    onDependencyCreate,\r\n    onDependencyDelete,\r\n    // Lifecycle events (v0.8.0)\r\n    onBeforeTaskAdd,\r\n    onAfterTaskAdd,\r\n    onBeforeTaskUpdate,\r\n    onAfterTaskUpdate,\r\n    onBeforeTaskDelete,\r\n    onAfterTaskDelete,\r\n  } = config;\r\n\r\n  // Try to get global theme from ThemeProvider (will return undefined if not in ThemeProvider)\r\n  const themeContext = useContext(ThemeContext);\r\n  const globalTheme = themeContext?.theme as Theme | undefined;\r\n\r\n  // Use global theme if available, otherwise fall back to initialTheme or 'dark'\r\n  const [currentTheme, setCurrentTheme] = useState<Theme>(globalTheme || initialTheme || 'dark');\r\n\r\n  const [timeScale, setTimeScale] = useState<TimeScale>(initialTimeScale);\r\n  const [rowDensity, setRowDensity] = useState<RowDensity>(initialRowDensity);\r\n  const [zoom, setZoom] = useState(1);\r\n\r\n  // v0.17.300: Task filter state (internal or controlled)\r\n  const [internalTaskFilter, setInternalTaskFilter] = useState<TaskFilterType>('all');\r\n  const taskFilter = externalTaskFilter ?? internalTaskFilter;\r\n  const setTaskFilter = externalOnTaskFilterChange ?? setInternalTaskFilter;\r\n  const [scrollTop, setScrollTop] = useState(0);\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [gridWidthOverride, setGridWidthOverride] = useState<number | null>(null);\r\n\r\n  // v0.8.0: Context menu state for Split task feature\r\n  const [contextMenu, setContextMenu] = useState<{ isOpen: boolean; x: number; y: number; task: Task | null }>({\r\n    isOpen: false,\r\n    x: 0,\r\n    y: 0,\r\n    task: null,\r\n  });\r\n\r\n  // v0.10.0: Task form modal state for editing\r\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\r\n\r\n  // v0.17.33: Delete confirmation modal state\r\n  const [deleteConfirmation, setDeleteConfirmation] = useState<{ taskId: string; taskName: string } | null>(null);\r\n\r\n  // v0.17.215: Keyboard shortcuts state moved back to TaskGrid (with sticky positioning)\r\n\r\n  // Sync with global theme changes (from ThemeContext)\r\n  useEffect(() => {\r\n    if (globalTheme && globalTheme !== currentTheme) {\r\n      setCurrentTheme(globalTheme);\r\n    }\r\n  }, [globalTheme]);\r\n\r\n  // v0.11.6: Sync with initialTheme prop changes (for external theme control)\r\n  useEffect(() => {\r\n    if (initialTheme && initialTheme !== currentTheme) {\r\n      setCurrentTheme(initialTheme);\r\n    }\r\n  }, [initialTheme]);\r\n\r\n  // v0.9.0: Handle theme change with callback\r\n  const handleThemeChange = useCallback(\r\n    (newTheme: Theme) => {\r\n      setCurrentTheme(newTheme);\r\n      onThemeChange?.(newTheme);\r\n    },\r\n    [onThemeChange]\r\n  );\r\n\r\n  // Use undo/redo hook for task management\r\n  const {\r\n    state: localTasks,\r\n    setState: setLocalTasks,\r\n    undo,\r\n    redo,\r\n    canUndo,\r\n    canRedo,\r\n    clearHistory,\r\n  } = useUndoRedo<Task[]>(tasks, 50);\r\n\r\n  // v0.17.163: Track expanded states separately to preserve them across task reloads\r\n  // This ref stores the isExpanded state for each task ID, updated whenever tasks are toggled\r\n  // v0.17.181: Initialize from localStorage if persistExpandedState is enabled\r\n  const getStorageKey = useCallback(() => {\r\n    if (!persistExpandedState) return null;\r\n    return typeof persistExpandedState === 'string'\r\n      ? persistExpandedState\r\n      : 'gantt-expanded-tasks';\r\n  }, [persistExpandedState]);\r\n\r\n  // Initialize expandedStatesRef from localStorage if persistExpandedState is enabled\r\n  const expandedStatesRef = useRef<Map<string, boolean>>(new Map());\r\n  const hasInitializedFromStorage = useRef(false);\r\n\r\n  // Load from localStorage on first render if persistExpandedState is enabled\r\n  if (!hasInitializedFromStorage.current && persistExpandedState) {\r\n    hasInitializedFromStorage.current = true;\r\n    const storageKey = typeof persistExpandedState === 'string'\r\n      ? persistExpandedState\r\n      : 'gantt-expanded-tasks';\r\n\r\n    try {\r\n      const stored = localStorage.getItem(storageKey);\r\n      if (stored) {\r\n        const parsed = JSON.parse(stored);\r\n        if (Array.isArray(parsed)) {\r\n          // stored as array of [taskId, isExpanded] tuples\r\n          expandedStatesRef.current = new Map(parsed);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[GanttBoard] Error loading expanded state from localStorage:', e);\r\n    }\r\n  }\r\n\r\n  // v0.17.181: Save expanded states to localStorage when they change\r\n  const saveExpandedStatesToStorage = useCallback(() => {\r\n    const storageKey = getStorageKey();\r\n    if (!storageKey) return;\r\n\r\n    try {\r\n      const entries = Array.from(expandedStatesRef.current.entries());\r\n      localStorage.setItem(storageKey, JSON.stringify(entries));\r\n    } catch (e) {\r\n      console.warn('[GanttBoard] Error saving expanded state to localStorage:', e);\r\n    }\r\n  }, [getStorageKey]);\r\n\r\n  // Sync parent tasks prop changes to local state (e.g., after external DB operations)\r\n  // v0.17.163: Preserve isExpanded state using ref to prevent subtasks from auto-expanding\r\n  useEffect(() => {\r\n    // Apply preserved expanded states to incoming tasks\r\n    const applyExpandedState = (taskList: Task[]): Task[] => {\r\n      return taskList.map(task => {\r\n        const preservedState = expandedStatesRef.current.get(task.id);\r\n        const newTask = preservedState !== undefined\r\n          ? { ...task, isExpanded: preservedState }\r\n          : task;\r\n\r\n        if (newTask.subtasks?.length) {\r\n          return { ...newTask, subtasks: applyExpandedState(newTask.subtasks) };\r\n        }\r\n        return newTask;\r\n      });\r\n    };\r\n\r\n    // If we have preserved states, apply them; otherwise just use tasks as-is\r\n    if (expandedStatesRef.current.size > 0) {\r\n      setLocalTasks(applyExpandedState(tasks));\r\n    } else {\r\n      setLocalTasks(tasks);\r\n    }\r\n  }, [tasks, setLocalTasks]);\r\n\r\n  // v0.17.19: Track previous tasks for comparison to avoid unnecessary onTasksChange calls\r\n  const prevTasksRef = useRef<Task[]>(tasks);\r\n  const isInitialMount = useRef(true);\r\n\r\n  // Sync local tasks with parent when they change (optimized to avoid unnecessary calls)\r\n  useEffect(() => {\r\n    // Skip on initial mount - parent already has the tasks\r\n    if (isInitialMount.current) {\r\n      isInitialMount.current = false;\r\n      prevTasksRef.current = localTasks;\r\n      return;\r\n    }\r\n\r\n    if (!onTasksChange) return;\r\n\r\n    // Compare tasks to detect meaningful changes (not just reference changes)\r\n    // We use JSON stringify for deep comparison - this catches:\r\n    // - Added/removed tasks\r\n    // - Changed task properties (name, dates, progress, etc.)\r\n    // - But NOT just reordering of the same data in memory\r\n    const prevJson = JSON.stringify(prevTasksRef.current);\r\n    const currentJson = JSON.stringify(localTasks);\r\n\r\n    if (prevJson !== currentJson) {\r\n      prevTasksRef.current = localTasks;\r\n      onTasksChange(localTasks);\r\n    }\r\n  }, [localTasks, onTasksChange]);\r\n\r\n  // v0.15.0: Compute translations based on locale (must be before columns)\r\n  const translations: GanttTranslations = useMemo(() => {\r\n    return mergeTranslations(locale, customTranslations);\r\n  }, [locale, customTranslations]);\r\n\r\n  // Column configuration - Default: Only show task name\r\n  // v0.13.8: Name column is resizable with min/max width constraints\r\n  // v0.13.9: Increased default width to 320px for better readability of long task names\r\n  // v0.15.0: Column labels now use translations\r\n  // v0.17.56: All columns are now resizable with proper min/max constraints\r\n  const getDefaultColumns = useCallback((t: GanttTranslations): GanttColumn[] => [\r\n    { id: 'name', label: t.columns.taskName, width: 400, minWidth: 200, maxWidth: 2000, visible: true, sortable: true, resizable: true },\r\n    { id: 'startDate', label: t.columns.startDate, width: 110, minWidth: 80, maxWidth: 200, visible: false, sortable: true, resizable: true },\r\n    { id: 'endDate', label: t.columns.endDate, width: 110, minWidth: 80, maxWidth: 200, visible: false, sortable: true, resizable: true },\r\n    { id: 'duration', label: t.columns.duration, width: 80, minWidth: 60, maxWidth: 150, visible: false, sortable: true, resizable: true },\r\n    { id: 'assignees', label: t.columns.assignees, width: 120, minWidth: 80, maxWidth: 300, visible: false, sortable: false, resizable: true },\r\n    { id: 'status', label: t.columns.status, width: 100, minWidth: 70, maxWidth: 180, visible: false, sortable: true, resizable: true },\r\n    { id: 'progress', label: t.columns.progress, width: 120, minWidth: 80, maxWidth: 200, visible: false, sortable: true, resizable: true },\r\n    { id: 'priority', label: t.columns.priority, width: 90, minWidth: 70, maxWidth: 150, visible: false, sortable: true, resizable: true }, // v0.17.29\r\n  ], []);\r\n\r\n  const [columns, setColumns] = useState<GanttColumn[]>(() => getDefaultColumns(translations));\r\n\r\n  // Update column labels when locale changes\r\n  useEffect(() => {\r\n    setColumns(prev => prev.map(col => ({\r\n      ...col,\r\n      label: translations.columns[col.id === 'name' ? 'taskName' : col.id as keyof typeof translations.columns] || col.label,\r\n    })));\r\n  }, [translations]);\r\n\r\n  // Calculate grid width based on visible columns (memoized)\r\n  // v0.17.213: Buttons now in flex flow, no extra space needed\r\n  const calculatedGridWidth = useMemo(() => {\r\n    const visibleCols = columns.filter(col => col.visible);\r\n    return visibleCols.reduce((sum, col) => sum + col.width, 0);\r\n  }, [columns]);\r\n\r\n  // v0.17.193: Track previous column state for change detection\r\n  const prevVisibleColumnsRef = useRef<string>(\r\n    columns.filter(col => col.visible).map(c => c.id).join(',')\r\n  );\r\n\r\n  // v0.17.193: Handle column visibility changes ONLY\r\n  // This effect ONLY runs when columns are toggled, NOT when user drags\r\n  useEffect(() => {\r\n    const visibleCols = columns.filter(col => col.visible);\r\n    const currentKey = visibleCols.map(c => c.id).join(',');\r\n    const prevKey = prevVisibleColumnsRef.current;\r\n\r\n    // Only act if columns actually changed (not just a re-render)\r\n    if (currentKey !== prevKey) {\r\n      const hasAdditionalColumns = visibleCols.some(col => col.id !== 'name');\r\n      const prevHadAdditional = prevKey.includes(','); // Had more than just 'name'\r\n\r\n      if (!hasAdditionalColumns) {\r\n        // All extra columns removed - reset to auto width\r\n        setGridWidthOverride(null);\r\n      } else if (!prevHadAdditional && hasAdditionalColumns) {\r\n        // First additional column added - start with full width\r\n        setGridWidthOverride(null); // Let it auto-calculate\r\n      }\r\n      // Note: When adding more columns to existing ones, we don't change gridWidthOverride\r\n      // This allows the curtain behavior to work - user controls the width\r\n\r\n      prevVisibleColumnsRef.current = currentKey;\r\n    }\r\n  }, [columns]);\r\n\r\n  // v0.17.192: Grid width calculation - ClickUp style \"curtain\" behavior\r\n  // User can drag to cover/uncover columns like pulling a curtain\r\n  // v0.17.218: Allow expansion up to 60% of viewport width (ClickUp style)\r\n  const BUTTONS_WIDTH = 60; // Space for ColumnManager + Keyboard buttons\r\n  const MAX_VIEWPORT_PERCENT = 0.6; // 60% of viewport width max\r\n  const gridWidth = useMemo(() => {\r\n    const minRequired = 200; // Minimum: just name column\r\n    const contentWidth = calculatedGridWidth + BUTTONS_WIDTH;\r\n    // Max: 60% of viewport OR content width, whichever is larger\r\n    const viewportMax = typeof window !== 'undefined' ? window.innerWidth * MAX_VIEWPORT_PERCENT : 800;\r\n    const maxAllowed = Math.max(contentWidth, viewportMax);\r\n\r\n    // If user has manually resized, respect their choice within bounds\r\n    if (gridWidthOverride !== null) {\r\n      return Math.max(minRequired, Math.min(gridWidthOverride, maxAllowed));\r\n    }\r\n    // Default: show all visible columns + buttons (exact fit)\r\n    return Math.max(minRequired, contentWidth);\r\n  }, [gridWidthOverride, calculatedGridWidth]);\r\n\r\n  const gridScrollRef = useRef<HTMLDivElement>(null);\r\n  const timelineScrollRef = useRef<HTMLDivElement>(null);\r\n  const ganttContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Derivar theme desde CSS variables si hay ThemeProvider, sino usar theme esttico\r\n  const theme = useMemo(() => {\r\n    return deriveThemeFromCSS(currentTheme);\r\n  }, [currentTheme]);\r\n\r\n  // Crear valor del contexto del tema para componentes hijos (Portal, etc.)\r\n  const ganttThemeContextValue = useMemo(() => ({\r\n    theme,\r\n    themeName: currentTheme,\r\n  }), [theme, currentTheme]);\r\n\r\n  // Merge user templates with defaults\r\n  const mergedTemplates = useMemo(() => {\r\n    return mergeTemplates(templates);\r\n  }, [templates]);\r\n\r\n  //  KILLER FEATURE #1: Calculate Critical Path (auto-updates when tasks change)\r\n  // This is BETTER than DHTMLX - we recalculate CPM automatically on every change\r\n  // v0.11.1: Can be disabled via enableAutoCriticalPath prop to preserve custom colors\r\n  const tasksWithCriticalPath = useMemo(() => {\r\n    // If auto critical path is disabled, return tasks as-is (preserve custom colors)\r\n    if (!enableAutoCriticalPath) {\r\n      return localTasks;\r\n    }\r\n\r\n    const criticalPathIds = ganttUtils.calculateCriticalPath(localTasks);\r\n\r\n    const markCritical = (tasks: Task[]): Task[] => {\r\n      return tasks.map(task => ({\r\n        ...task,\r\n        isCriticalPath: criticalPathIds.includes(task.id),\r\n        subtasks: task.subtasks ? markCritical(task.subtasks) : undefined,\r\n      }));\r\n    };\r\n\r\n    return markCritical(localTasks);\r\n  }, [localTasks, enableAutoCriticalPath]);\r\n\r\n  // v0.17.300: Filter tasks based on taskFilter state\r\n  const filteredTasks = useMemo((): Task[] => {\r\n    if (taskFilter === 'all') return tasksWithCriticalPath;\r\n\r\n    const filterTasksRecursively = (taskList: Task[]): Task[] => {\r\n      const result: Task[] = [];\r\n\r\n      for (const task of taskList) {\r\n        // Filter subtasks recursively\r\n        const filteredSubtasks = task.subtasks?.length\r\n          ? filterTasksRecursively(task.subtasks)\r\n          : undefined;\r\n\r\n        // Check if task matches filter\r\n        let matches = false;\r\n        switch (taskFilter) {\r\n          case 'incomplete':\r\n            matches = task.progress < 100;\r\n            break;\r\n          case 'in_progress':\r\n            matches = task.progress > 0 && task.progress < 100;\r\n            break;\r\n          case 'completed':\r\n            matches = task.progress === 100;\r\n            break;\r\n        }\r\n\r\n        // Include task if it matches OR has matching subtasks\r\n        if (matches || (filteredSubtasks && filteredSubtasks.length > 0)) {\r\n          result.push({\r\n            ...task,\r\n            subtasks: filteredSubtasks,\r\n          });\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    return filterTasksRecursively(tasksWithCriticalPath);\r\n  }, [tasksWithCriticalPath, taskFilter]);\r\n\r\n  // Calculate row height based on density\r\n  const rowHeight = getRowHeight(rowDensity);\r\n\r\n  // Enable undo/redo keyboard shortcuts\r\n  useGanttUndoRedoKeys({\r\n    undo,\r\n    redo,\r\n    canUndo,\r\n    canRedo,\r\n    enabled: true,\r\n  });\r\n\r\n  // Expose imperative API via ref (similar to DHTMLX gantt.* methods)\r\n  useImperativeHandle(ref, () => ({\r\n    // ==================== CRUD Methods ====================\r\n    getTask: (id: string) => ganttUtils.findTaskById(localTasks, id),\r\n\r\n    addTask: (task: Task, parentId?: string) => {\r\n      setLocalTasks((prev) => {\r\n        if (!parentId) {\r\n          // Add as root-level task\r\n          return [...prev, { ...task, level: 0 }];\r\n        }\r\n\r\n        // Add as subtask\r\n        const addToParent = (tasks: Task[]): Task[] => {\r\n          return tasks.map((t) => {\r\n            if (t.id === parentId) {\r\n              return {\r\n                ...t,\r\n                subtasks: [...(t.subtasks || []), { ...task, parentId, level: (t.level || 0) + 1 }],\r\n                isExpanded: true,\r\n              };\r\n            }\r\n            if (t.subtasks) {\r\n              return { ...t, subtasks: addToParent(t.subtasks) };\r\n            }\r\n            return t;\r\n          });\r\n        };\r\n        return addToParent(prev);\r\n      });\r\n    },\r\n\r\n    updateTask: (id: string, updates: Partial<Task>) => {\r\n      setLocalTasks((prev) => {\r\n        const update = (tasks: Task[]): Task[] => {\r\n          return tasks.map((task) => {\r\n            if (task.id === id) {\r\n              return { ...task, ...updates };\r\n            }\r\n            if (task.subtasks) {\r\n              return { ...task, subtasks: update(task.subtasks) };\r\n            }\r\n            return task;\r\n          });\r\n        };\r\n        return update(prev);\r\n      });\r\n    },\r\n\r\n    deleteTask: (id: string) => {\r\n      setLocalTasks((prev) => {\r\n        const remove = (tasks: Task[]): Task[] => {\r\n          return tasks.filter((task) => {\r\n            if (task.id === id) return false;\r\n            if (task.subtasks) {\r\n              task.subtasks = remove(task.subtasks);\r\n            }\r\n            return true;\r\n          });\r\n        };\r\n        return remove(prev);\r\n      });\r\n    },\r\n\r\n    deleteTasks: (ids: string[]) => {\r\n      setLocalTasks((prev) => deleteTasks(prev, ids));\r\n    },\r\n\r\n    duplicateTask: (id: string) => {\r\n      setLocalTasks((prev) => duplicateTasks(prev, [id]));\r\n    },\r\n\r\n    // v0.8.1: Split task feature (creates GAP like Bryntum)\r\n    splitTask: (id: string, splitDate: Date, gapDays = 3) => {\r\n      setLocalTasks((prev) => ganttUtils.splitTask(prev, id, splitDate, gapDays));\r\n    },\r\n\r\n    // ==================== Utility Methods ====================\r\n    calculateEndDate: ganttUtils.calculateEndDate,\r\n    calculateDuration: ganttUtils.calculateDuration,\r\n    validateDependency: (fromTaskId: string, toTaskId: string) => {\r\n      return !ganttUtils.validateDependencies(localTasks, fromTaskId, toTaskId);\r\n    },\r\n\r\n    // ==================== Data Methods ====================\r\n    getAllTasks: () => ganttUtils.flattenTasks(localTasks),\r\n\r\n    getTasksByStatus: (status: 'todo' | 'in-progress' | 'completed') => {\r\n      return ganttUtils.flattenTasks(localTasks).filter((t) => t.status === status);\r\n    },\r\n\r\n    getTasksByParent: (parentId?: string) => {\r\n      if (!parentId) {\r\n        // Return root-level tasks\r\n        return localTasks.filter((t) => !t.parentId);\r\n      }\r\n      const parent = ganttUtils.findTaskById(localTasks, parentId);\r\n      return parent?.subtasks || [];\r\n    },\r\n\r\n    getCriticalPath: () => {\r\n      return ganttUtils.flattenTasks(localTasks).filter((t) => t.isCriticalPath);\r\n    },\r\n\r\n    // ==================== Hierarchy Methods ====================\r\n    indentTask: (taskId: string) => {\r\n      setLocalTasks((prev) => indentTasks(prev, [taskId]));\r\n    },\r\n\r\n    outdentTask: (taskId: string) => {\r\n      setLocalTasks((prev) => outdentTasks(prev, [taskId]));\r\n    },\r\n\r\n    moveTask: (taskId: string, direction: 'up' | 'down') => {\r\n      setLocalTasks((prev) => moveTasks(prev, [taskId], direction));\r\n    },\r\n\r\n    createSubtask: async (parentId: string) => {\r\n      // Create subtask first\r\n      const { tasks: newTasks, newTask } = createSubtask(localTasks, parentId);\r\n\r\n      // v0.8.0: Before event (cancelable, supports async)\r\n      if (onBeforeTaskAdd) {\r\n        const result = onBeforeTaskAdd({ ...newTask, parentId });\r\n        // Handle both sync and async callbacks\r\n        const shouldContinue = result instanceof Promise ? await result : result;\r\n        if (shouldContinue === false) {\r\n          return; // Cancel creation\r\n        }\r\n      }\r\n\r\n      // Only update state if not cancelled\r\n      setLocalTasks(newTasks);\r\n\r\n      // v0.8.0: After event (non-cancelable)\r\n      if (onAfterTaskAdd) {\r\n        onAfterTaskAdd({ ...newTask, parentId });\r\n      }\r\n    },\r\n\r\n    // ==================== UI Methods ====================\r\n    scrollToTask: (id: string) => {\r\n      // Find task index in flattened list\r\n      const flatTasks = ganttUtils.flattenTasks(localTasks);\r\n      const index = flatTasks.findIndex((t) => t.id === id);\r\n\r\n      if (index !== -1 && gridScrollRef.current) {\r\n        const scrollTop = index * rowHeight;\r\n        gridScrollRef.current.scrollTo({ top: scrollTop, behavior: 'smooth' });\r\n        if (timelineScrollRef.current) {\r\n          timelineScrollRef.current.scrollTo({ top: scrollTop, behavior: 'smooth' });\r\n        }\r\n      }\r\n    },\r\n\r\n    highlightTask: (id: string, duration = 2000) => {\r\n      // TODO: Implement visual highlighting - currently a no-op\r\n      void id;\r\n      void duration;\r\n    },\r\n\r\n    expandTask: (id: string) => {\r\n      setLocalTasks((prev) => {\r\n        const expand = (tasks: Task[]): Task[] => {\r\n          return tasks.map((task) => {\r\n            if (task.id === id) {\r\n              return { ...task, isExpanded: true };\r\n            }\r\n            if (task.subtasks) {\r\n              return { ...task, subtasks: expand(task.subtasks) };\r\n            }\r\n            return task;\r\n          });\r\n        };\r\n        return expand(prev);\r\n      });\r\n    },\r\n\r\n    collapseTask: (id: string) => {\r\n      setLocalTasks((prev) => {\r\n        const collapse = (tasks: Task[]): Task[] => {\r\n          return tasks.map((task) => {\r\n            if (task.id === id) {\r\n              return { ...task, isExpanded: false };\r\n            }\r\n            if (task.subtasks) {\r\n              return { ...task, subtasks: collapse(task.subtasks) };\r\n            }\r\n            return task;\r\n          });\r\n        };\r\n        return collapse(prev);\r\n      });\r\n    },\r\n\r\n    expandAll: () => {\r\n      setLocalTasks((prev) => {\r\n        const expandAll = (tasks: Task[]): Task[] => {\r\n          return tasks.map((task) => ({\r\n            ...task,\r\n            isExpanded: true,\r\n            subtasks: task.subtasks ? expandAll(task.subtasks) : undefined,\r\n          }));\r\n        };\r\n        return expandAll(prev);\r\n      });\r\n    },\r\n\r\n    collapseAll: () => {\r\n      setLocalTasks((prev) => {\r\n        const collapseAll = (tasks: Task[]): Task[] => {\r\n          return tasks.map((task) => ({\r\n            ...task,\r\n            isExpanded: false,\r\n            subtasks: task.subtasks ? collapseAll(task.subtasks) : undefined,\r\n          }));\r\n        };\r\n        return collapseAll(prev);\r\n      });\r\n    },\r\n\r\n    // ==================== Undo/Redo ====================\r\n    undo,\r\n    redo,\r\n    canUndo: () => canUndo,\r\n    canRedo: () => canRedo,\r\n    clearHistory,\r\n\r\n    // ==================== Export/Import ====================\r\n    // v0.17.224: Enhanced PNG export - captures full diagram\r\n    exportToPNG: async () => {\r\n      if (!ganttContainerRef.current || !gridScrollRef.current || !timelineScrollRef.current) {\r\n        throw new Error('Gantt container not found');\r\n      }\r\n\r\n      const ganttContainer = ganttContainerRef.current;\r\n      const gridScroll = gridScrollRef.current.querySelector('.gantt-grid-scroll') as HTMLElement;\r\n      const timelineScroll = timelineScrollRef.current;\r\n\r\n      // Store original state\r\n      const originalGridScrollTop = gridScroll?.scrollTop || 0;\r\n      const originalTimelineScrollTop = timelineScroll.scrollTop;\r\n      const originalOverflow = ganttContainer.style.overflow;\r\n      const originalHeight = ganttContainer.style.height;\r\n\r\n      try {\r\n        // Calculate full content dimensions\r\n        const taskGridContent = gridScroll?.querySelector('.gantt-taskgrid-content') as HTMLElement;\r\n        const timelineSvg = timelineScroll.querySelector('svg') as SVGElement;\r\n        const gridContentHeight = taskGridContent?.scrollHeight || gridScroll?.scrollHeight || 600;\r\n        const timelineContentHeight = timelineSvg?.getBoundingClientRect().height || timelineScroll.scrollHeight;\r\n        const toolbar = ganttContainer.querySelector('[class*=\"h-12\"]') as HTMLElement;\r\n        const toolbarHeight = toolbar?.offsetHeight || 48;\r\n        const totalHeight = toolbarHeight + Math.max(gridContentHeight, timelineContentHeight) + 20;\r\n\r\n        // Reset scroll and expand\r\n        if (gridScroll) gridScroll.scrollTop = 0;\r\n        timelineScroll.scrollTop = 0;\r\n        ganttContainer.style.overflow = 'visible';\r\n        ganttContainer.style.height = `${totalHeight}px`;\r\n\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n\r\n        const canvas = await html2canvas(ganttContainer, {\r\n          backgroundColor: theme.bgPrimary,\r\n          scale: 2,\r\n          logging: false,\r\n          useCORS: true,\r\n          ignoreElements: (element) => {\r\n            const style = window.getComputedStyle(element);\r\n            const zIndex = parseInt(style.zIndex, 10);\r\n            return (!isNaN(zIndex) && zIndex >= 50) || style.position === 'fixed';\r\n          },\r\n        });\r\n\r\n        return new Promise<Blob>((resolve, reject) => {\r\n          canvas.toBlob((blob) => {\r\n            if (blob) resolve(blob);\r\n            else reject(new Error('Failed to create blob from canvas'));\r\n          }, 'image/png');\r\n        });\r\n      } finally {\r\n        // Restore original state\r\n        ganttContainer.style.overflow = originalOverflow;\r\n        ganttContainer.style.height = originalHeight;\r\n        if (gridScroll) gridScroll.scrollTop = originalGridScrollTop;\r\n        timelineScroll.scrollTop = originalTimelineScrollTop;\r\n      }\r\n    },\r\n\r\n    exportToPDF: async (filename?: string) => {\r\n      await ganttUtils.exportToPDF(localTasks, filename);\r\n    },\r\n\r\n    exportToExcel: async (filename?: string) => {\r\n      await ganttUtils.exportToExcel(localTasks, filename);\r\n    },\r\n\r\n    exportToJSON: () => ganttUtils.exportToJSON(localTasks),\r\n    exportToCSV: () => ganttUtils.exportToCSV(localTasks),\r\n\r\n    importFromJSON: (json: string) => {\r\n      const imported = ganttUtils.importFromJSON(json);\r\n      setLocalTasks(imported);\r\n    },\r\n\r\n    // ==================== State Methods ====================\r\n    getTasks: () => localTasks,\r\n\r\n    refresh: () => {\r\n      // Force re-render by creating a new reference\r\n      setLocalTasks((prev) => [...prev]);\r\n    },\r\n\r\n    clearAll: () => {\r\n      setLocalTasks([]);\r\n    },\r\n  }), [localTasks, undo, redo, canUndo, canRedo, clearHistory, theme, rowHeight]);\r\n\r\n  // Handle column toggle (memoized)\r\n  const handleToggleColumn = useCallback((columnId: ColumnType) => {\r\n    setColumns(prev =>\r\n      prev.map(col =>\r\n        col.id === columnId ? { ...col, visible: !col.visible } : col\r\n      )\r\n    );\r\n  }, []);\r\n\r\n  // v0.13.8: Handle column resize (memoized)\r\n  const handleColumnResize = useCallback((columnId: ColumnType, newWidth: number) => {\r\n    setColumns(prev =>\r\n      prev.map(col => {\r\n        if (col.id !== columnId) return col;\r\n        // Clamp width to min/max constraints\r\n        const minW = col.minWidth ?? 100;\r\n        const maxW = col.maxWidth ?? 800;\r\n        const clampedWidth = Math.max(minW, Math.min(maxW, newWidth));\r\n        return { ...col, width: clampedWidth };\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  // Handle task toggle (memoized)\r\n  // v0.17.163: Also update expandedStatesRef to persist state across task reloads\r\n  // v0.17.181: Save to localStorage if persistExpandedState is enabled\r\n  const handleTaskToggle = useCallback((taskId: string) => {\r\n    setLocalTasks((prev) => {\r\n      const newTasks = toggleTaskExpansion(prev, taskId);\r\n\r\n      // Find the toggled task and update the ref with its new expanded state\r\n      const findAndUpdateExpandedState = (taskList: Task[]) => {\r\n        for (const task of taskList) {\r\n          if (task.id === taskId) {\r\n            expandedStatesRef.current.set(taskId, task.isExpanded ?? true);\r\n            return;\r\n          }\r\n          if (task.subtasks?.length) {\r\n            findAndUpdateExpandedState(task.subtasks);\r\n          }\r\n        }\r\n      };\r\n      findAndUpdateExpandedState(newTasks);\r\n\r\n      // v0.17.181: Persist to localStorage\r\n      saveExpandedStatesToStorage();\r\n\r\n      return newTasks;\r\n    });\r\n    config.onTaskToggleExpand?.(taskId);\r\n  }, [config, saveExpandedStatesToStorage]);\r\n\r\n  // Handle task updates from context menu (memoized)\r\n  const handleTaskUpdate = useCallback((taskId: string, updates: Partial<Task>) => {\r\n    // v0.8.0: Before event (cancelable)\r\n    if (onBeforeTaskUpdate) {\r\n      const shouldContinue = onBeforeTaskUpdate(taskId, updates);\r\n      if (shouldContinue === false) {\r\n        return; // Cancel the update\r\n      }\r\n    }\r\n\r\n    // Find current task to detect progress change\r\n    const currentTask = ganttUtils.findTaskById(localTasks, taskId);\r\n    const oldProgress = currentTask?.progress;\r\n\r\n    const updateTask = (tasks: Task[]): Task[] => {\r\n      return tasks.map((task) => {\r\n        if (task.id === taskId) {\r\n          return { ...task, ...updates };\r\n        }\r\n        if (task.subtasks) {\r\n          return { ...task, subtasks: updateTask(task.subtasks) };\r\n        }\r\n        return task;\r\n      });\r\n    };\r\n    setLocalTasks(updateTask(localTasks));\r\n\r\n    // Call callback events\r\n    const updatedTask = ganttUtils.findTaskById(updateTask(localTasks), taskId);\r\n    if (updatedTask) {\r\n      onTaskUpdate?.(updatedTask);\r\n\r\n      // v0.8.0: After event\r\n      onAfterTaskUpdate?.(updatedTask);\r\n\r\n      // v0.8.0: Progress change event\r\n      if (updates.progress !== undefined && oldProgress !== undefined && updates.progress !== oldProgress) {\r\n        onProgressChange?.(taskId, oldProgress, updates.progress);\r\n      }\r\n    }\r\n  }, [localTasks, onTaskUpdate, onBeforeTaskUpdate, onAfterTaskUpdate, onProgressChange]);\r\n\r\n  // Hierarchy handlers\r\n  const handleTaskIndent = useCallback((taskIds: string[]) => {\r\n    if (taskIds.length === 0) return;\r\n    setLocalTasks((prev) => indentTasks(prev, taskIds));\r\n    config.onTaskIndent?.(taskIds[0]!);\r\n  }, [config]);\r\n\r\n  const handleTaskOutdent = useCallback((taskIds: string[]) => {\r\n    if (taskIds.length === 0) return;\r\n    setLocalTasks((prev) => outdentTasks(prev, taskIds));\r\n    config.onTaskOutdent?.(taskIds[0]!);\r\n  }, [config]);\r\n\r\n  // v0.17.68: Handle task reparenting via drag & drop\r\n  const handleTaskReparent = useCallback((taskId: string, newParentId: string | null, position?: number) => {\r\n    setLocalTasks((prev) => reparentTask(prev, taskId, newParentId, position));\r\n    config.onTaskReparent?.(taskId, newParentId, position);\r\n  }, [config]);\r\n\r\n  const handleTaskMove = useCallback((taskIds: string[], direction: 'up' | 'down') => {\r\n    if (taskIds.length === 0) return;\r\n    setLocalTasks((prev) => moveTasks(prev, taskIds, direction));\r\n    config.onTaskMove?.(taskIds[0]!, direction);\r\n  }, [config]);\r\n\r\n  const handleMultiTaskDelete = useCallback(async (taskIds: string[]) => {\r\n    // v0.17.19: Support lifecycle callbacks for delete operations\r\n    // Filter out tasks that are blocked by onBeforeTaskDelete\r\n    const allowedTaskIds: string[] = [];\r\n\r\n    for (const taskId of taskIds) {\r\n      if (onBeforeTaskDelete) {\r\n        const result = await Promise.resolve(onBeforeTaskDelete(taskId));\r\n        if (result === false) {\r\n          // Skip this task - deletion was cancelled\r\n          continue;\r\n        }\r\n      }\r\n      allowedTaskIds.push(taskId);\r\n    }\r\n\r\n    // If no tasks are allowed to be deleted, return early\r\n    if (allowedTaskIds.length === 0) {\r\n      return;\r\n    }\r\n\r\n    // Call the consumer's onMultiTaskDelete handler if provided\r\n    if (config.onMultiTaskDelete) {\r\n      config.onMultiTaskDelete(allowedTaskIds);\r\n    } else {\r\n      // Fallback: update local state and call individual delete handlers\r\n      setLocalTasks((prev) => deleteTasks(prev, allowedTaskIds));\r\n      allowedTaskIds.forEach(id => config.onTaskDelete?.(id));\r\n    }\r\n\r\n    // v0.17.19: Call onAfterTaskDelete for each successfully deleted task\r\n    if (onAfterTaskDelete) {\r\n      allowedTaskIds.forEach(id => onAfterTaskDelete(id));\r\n    }\r\n  }, [config, onBeforeTaskDelete, onAfterTaskDelete]);\r\n\r\n  const handleTaskDuplicate = useCallback((taskIds: string[]) => {\r\n    setLocalTasks((prev) => duplicateTasks(prev, taskIds));\r\n    taskIds.forEach(id => config.onTaskDuplicate?.(id));\r\n  }, [config]);\r\n\r\n  const handleTaskCreate = useCallback((afterTaskId: string, direction: 'above' | 'below') => {\r\n    setLocalTasks((prev) => {\r\n      const { tasks, newTask } = createTask(prev, afterTaskId, direction);\r\n\r\n      // v0.8.0: Before event (cancelable)\r\n      if (onBeforeTaskAdd) {\r\n        const shouldContinue = onBeforeTaskAdd(newTask);\r\n        if (shouldContinue === false) {\r\n          return prev; // Cancel the addition, return unchanged tasks\r\n        }\r\n      }\r\n\r\n      config.onTaskCreate?.(newTask.parentId, newTask.position || 0);\r\n\r\n      // v0.8.0: After event\r\n      onAfterTaskAdd?.(newTask);\r\n\r\n      return tasks;\r\n    });\r\n  }, [config, onBeforeTaskAdd, onAfterTaskAdd]);\r\n\r\n  const handleTaskRename = useCallback((taskId: string, newName: string) => {\r\n    setLocalTasks((prev) => renameTask(prev, taskId, newName));\r\n    config.onTaskRename?.(taskId, newName);\r\n  }, [config]);\r\n\r\n  const handleCreateSubtask = useCallback((parentTaskId: string) => {\r\n    setLocalTasks((prev) => {\r\n      const { tasks } = createSubtask(prev, parentTaskId);\r\n      config.onTaskCreate?.(parentTaskId, 0);\r\n      return tasks;\r\n    });\r\n  }, [config]);\r\n\r\n  //  KILLER FEATURE #2: Handle task date changes WITH auto-scheduling\r\n  // When you move a task, all dependent tasks are automatically rescheduled\r\n  // This is BETTER than DHTMLX - they require manual configuration\r\n  const handleTaskDateChange = useCallback((task: Task, newStart: Date, newEnd: Date) => {\r\n    // v0.13.3: Calculate daysDelta to preserve relative gaps in cascade\r\n    const daysDelta = task.startDate\r\n      ? Math.round((newStart.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24))\r\n      : 0;\r\n\r\n    const updateTaskDates = (tasks: Task[]): Task[] => {\r\n      return tasks.map((t) => {\r\n        if (t.id === task.id) {\r\n          // v0.8.1: Preserve segments array when updating task dates\r\n          // This is critical for split tasks - we must keep the updated segments\r\n          return {\r\n            ...t,\r\n            startDate: newStart,\r\n            endDate: newEnd,\r\n            ...(task.segments && { segments: task.segments }) // Preserve segments if they exist\r\n          };\r\n        }\r\n        if (t.subtasks) {\r\n          return { ...t, subtasks: updateTaskDates(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n\r\n    // First, update the dragged task's dates\r\n    let updatedTasks = updateTaskDates(localTasks);\r\n\r\n    // Then, auto-schedule all dependent tasks (cascade effect)\r\n    // v0.13.3: Pass daysDelta to preserve relative gaps between tasks\r\n    updatedTasks = ganttUtils.autoScheduleDependents(updatedTasks, task.id, daysDelta);\r\n\r\n    setLocalTasks(updatedTasks);\r\n\r\n    // v0.8.1: Pass full updated task object including segments\r\n    const updatedTask = { ...task, startDate: newStart, endDate: newEnd };\r\n    onTaskUpdate?.(updatedTask);\r\n  }, [localTasks, onTaskUpdate]);\r\n\r\n  //  KILLER FEATURE #3: Handle context menu for Split task\r\n  // This is BETTER than DHTMLX - they don't have a built-in split task feature\r\n  const handleTaskContextMenu = useCallback((task: Task, event: React.MouseEvent) => {\r\n    // Call user's custom handler if provided\r\n    onTaskContextMenu?.(task, event);\r\n\r\n    // Show our built-in context menu with Split option\r\n    setContextMenu({\r\n      isOpen: true,\r\n      x: event.clientX,\r\n      y: event.clientY,\r\n      task,\r\n    });\r\n  }, [onTaskContextMenu]);\r\n\r\n  // Handle split task action\r\n  const handleSplitTask = useCallback((task: Task, splitDate: Date) => {\r\n    // Call ganttUtils.splitTask to split the task\r\n    const updatedTasks = ganttUtils.splitTask(localTasks, task.id, splitDate);\r\n    setLocalTasks(updatedTasks);\r\n\r\n    // Close context menu\r\n    setContextMenu({ isOpen: false, x: 0, y: 0, task: null });\r\n  }, [localTasks]);\r\n\r\n  // v0.10.0: Handle task double click - open edit modal\r\n  // v0.16.1: If onTaskEdit is provided, let the user handle editing (don't open built-in modal)\r\n  // v0.17.162: Fix bug where inline rename changes weren't reflected in edit modal\r\n  // We now look up the current task from localTasks to get the latest state\r\n  const handleTaskDblClickInternal = useCallback((task: Task) => {\r\n    // Look up the current version of the task from localTasks\r\n    // This ensures we get the latest data (e.g., after inline rename)\r\n    const currentTask = ganttUtils.findTaskById(localTasks, task.id) || task;\r\n\r\n    // Call user's custom handler if provided\r\n    onTaskDblClick?.(currentTask);\r\n\r\n    // Only open built-in edit modal if user hasn't provided a custom edit handler\r\n    // This prevents double modals when user handles editing themselves\r\n    if (!onTaskEdit) {\r\n      setEditingTask(currentTask);\r\n    }\r\n  }, [localTasks, onTaskDblClick, onTaskEdit]);\r\n\r\n  // Helper function to detect circular dependencies using DFS\r\n  const wouldCreateCircularDependency = useCallback((fromTaskId: string, toTaskId: string, tasks: Task[]): boolean => {\r\n    // Build dependency map\r\n    const dependencyMap = new Map<string, string[]>();\r\n\r\n    const buildMap = (taskList: Task[]) => {\r\n      taskList.forEach(task => {\r\n        if (task.dependencies) {\r\n          dependencyMap.set(task.id, task.dependencies);\r\n        }\r\n        if (task.subtasks) {\r\n          buildMap(task.subtasks);\r\n        }\r\n      });\r\n    };\r\n\r\n    buildMap(tasks);\r\n\r\n    // Simulate adding the new dependency\r\n    const existingDeps = dependencyMap.get(toTaskId) || [];\r\n    dependencyMap.set(toTaskId, [...existingDeps, fromTaskId]);\r\n\r\n    // DFS to detect cycle\r\n    const visited = new Set<string>();\r\n    const recStack = new Set<string>();\r\n\r\n    const hasCycle = (taskId: string): boolean => {\r\n      if (!visited.has(taskId)) {\r\n        visited.add(taskId);\r\n        recStack.add(taskId);\r\n\r\n        const deps = dependencyMap.get(taskId) || [];\r\n        for (const depId of deps) {\r\n          if (!visited.has(depId) && hasCycle(depId)) {\r\n            return true;\r\n          } else if (recStack.has(depId)) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      recStack.delete(taskId);\r\n      return false;\r\n    };\r\n\r\n    return hasCycle(toTaskId);\r\n  }, []);\r\n\r\n  // Handle dependency creation (memoized)\r\n  const handleDependencyCreate = useCallback((fromTask: Task, toTaskId: string) => {\r\n    // Check for circular dependency\r\n    if (wouldCreateCircularDependency(fromTask.id, toTaskId, localTasks)) {\r\n      // Show error feedback - you could integrate a toast notification here\r\n      console.warn('Cannot create dependency: would create a circular dependency');\r\n      alert('Cannot create this dependency: it would create a circular dependency chain.\\n\\nTask dependencies must flow in one direction only.');\r\n      return;\r\n    }\r\n\r\n    const updateTaskDependencies = (tasks: Task[]): Task[] => {\r\n      return tasks.map((t) => {\r\n        if (t.id === toTaskId) {\r\n          const dependencies = t.dependencies || [];\r\n          // Avoid duplicate dependencies\r\n          if (!dependencies.includes(fromTask.id)) {\r\n            return { ...t, dependencies: [...dependencies, fromTask.id] };\r\n          }\r\n        }\r\n        if (t.subtasks) {\r\n          return { ...t, subtasks: updateTaskDependencies(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n    setLocalTasks(updateTaskDependencies(localTasks));\r\n    onDependencyCreate?.(fromTask.id, toTaskId);\r\n  }, [localTasks, onDependencyCreate, wouldCreateCircularDependency]);\r\n\r\n  // Handle dependency deletion (memoized)\r\n  const handleDependencyDelete = useCallback((taskId: string, dependencyId: string) => {\r\n    const removeTaskDependency = (tasks: Task[]): Task[] => {\r\n      return tasks.map((t) => {\r\n        if (t.id === taskId && t.dependencies) {\r\n          const dependencies = t.dependencies.filter((depId) => depId !== dependencyId);\r\n          return { ...t, dependencies };\r\n        }\r\n        if (t.subtasks) {\r\n          return { ...t, subtasks: removeTaskDependency(t.subtasks) };\r\n        }\r\n        return t;\r\n      });\r\n    };\r\n    setLocalTasks(removeTaskDependency(localTasks));\r\n    onDependencyDelete?.(taskId, dependencyId);\r\n  }, [localTasks, onDependencyDelete]);\r\n\r\n  // Calculate date range (memoized)\r\n  const { startDate, endDate } = useMemo(() => {\r\n    // Filter tasks that have dates\r\n    const tasksWithDates = localTasks.filter(t => t.startDate && t.endDate);\r\n\r\n    if (tasksWithDates.length === 0) {\r\n      // Default range if no tasks have dates\r\n      const today = new Date();\r\n      const start = new Date(today);\r\n      start.setDate(start.getDate() - 30);\r\n      const end = new Date(today);\r\n      end.setDate(end.getDate() + 60);\r\n      return { startDate: start, endDate: end };\r\n    }\r\n\r\n    const allDates = tasksWithDates.flatMap((t) => [t.startDate, t.endDate]).filter((d): d is Date => d !== undefined);\r\n    const minDate = new Date(Math.min(...allDates.map((d) => d.getTime())));\r\n    const maxDate = new Date(Math.max(...allDates.map((d) => d.getTime())));\r\n\r\n    const padding = timeScale === 'day' ? 7 : timeScale === 'week' ? 14 : 30;\r\n    minDate.setDate(minDate.getDate() - padding);\r\n    maxDate.setDate(maxDate.getDate() + padding);\r\n\r\n    return { startDate: minDate, endDate: maxDate };\r\n  }, [localTasks, timeScale]);\r\n\r\n  // Handlers (future implementation - currently unused but kept for future features)\r\n  // TODO: Implement zoom controls in toolbar\r\n  // const handleZoomIn = () => setZoom((z) => Math.min(z + 0.2, 2));\r\n  // const handleZoomOut = () => setZoom((z) => Math.max(z - 0.2, 0.5));\r\n\r\n  // TODO: Implement \"Today\" button in toolbar\r\n  // const handleTodayClick = () => {\r\n  //   if (timelineScrollRef.current) {\r\n  //     const today = new Date();\r\n  //     const dayWidth = timeScale === 'day' ? 60 : timeScale === 'week' ? 20 : 8;\r\n  //     const daysFromStart = (today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\r\n  //     const scrollX = daysFromStart * dayWidth * zoom - 300;\r\n  //     timelineScrollRef.current.scrollTo({ left: Math.max(0, scrollX), behavior: 'smooth' });\r\n  //   }\r\n  // };\r\n\r\n  // TODO: Implement add task functionality\r\n  // const handleAddTask = () => {\r\n  //   // Placeholder - implement in parent component if needed\r\n  // };\r\n\r\n  // v0.12.0: Export handlers for toolbar\r\n  // v0.17.224: Enhanced PNG export - captures full diagram without dropdown\r\n  const handleExportPNG = useCallback(async () => {\r\n    if (!ganttContainerRef.current || !gridScrollRef.current || !timelineScrollRef.current) return;\r\n\r\n    // Wait for dropdown to close (animation takes ~150ms)\r\n    await new Promise(resolve => setTimeout(resolve, 200));\r\n\r\n    const ganttContainer = ganttContainerRef.current;\r\n    const gridScroll = gridScrollRef.current.querySelector('.gantt-grid-scroll') as HTMLElement;\r\n    const timelineScroll = timelineScrollRef.current;\r\n\r\n    // Store original scroll positions and dimensions\r\n    const originalGridScrollTop = gridScroll?.scrollTop || 0;\r\n    const originalGridScrollLeft = gridScroll?.scrollLeft || 0;\r\n    const originalTimelineScrollTop = timelineScroll.scrollTop;\r\n    const originalTimelineScrollLeft = timelineScroll.scrollLeft;\r\n    const originalOverflow = ganttContainer.style.overflow;\r\n    const originalHeight = ganttContainer.style.height;\r\n    const originalGridOverflow = gridScroll?.style.overflow || '';\r\n    const originalTimelineOverflow = timelineScroll.style.overflow;\r\n\r\n    // Store original dimensions for restoration\r\n    const originalContainerWidth = ganttContainer.style.width;\r\n    const originalTimelineWidth = timelineScroll.style.width;\r\n\r\n    try {\r\n      // Calculate full content dimensions\r\n      const taskGridContent = gridScroll?.querySelector('.gantt-taskgrid-content') as HTMLElement;\r\n      const timelineSvg = timelineScroll.querySelector('svg') as SVGElement;\r\n\r\n      // v0.17.226: Get height from SVG attribute for accurate full height\r\n      const svgHeight = timelineSvg?.getAttribute('height')\r\n        ? parseInt(timelineSvg.getAttribute('height')!, 10)\r\n        : timelineSvg?.getBoundingClientRect().height || 0;\r\n\r\n      const gridContentHeight = taskGridContent?.scrollHeight || gridScroll?.scrollHeight || 600;\r\n      const timelineContentHeight = Math.max(svgHeight, timelineScroll.scrollHeight);\r\n\r\n      // v0.17.225: Get actual SVG width for full timeline capture\r\n      const timelineSvgWidth = timelineSvg?.getAttribute('width')\r\n        ? parseInt(timelineSvg.getAttribute('width')!, 10)\r\n        : timelineSvg?.getBoundingClientRect().width || timelineScroll.scrollWidth;\r\n\r\n      // Get toolbar height (to include it)\r\n      const toolbar = ganttContainer.querySelector('[class*=\"h-12\"]') as HTMLElement;\r\n      const toolbarHeight = toolbar?.offsetHeight || 48;\r\n\r\n      // v0.17.226: Calculate total height with extra padding to ensure all content is captured\r\n      const contentHeight = Math.max(gridContentHeight, timelineContentHeight, svgHeight);\r\n      const totalHeight = toolbarHeight + contentHeight + 50; // +50 extra padding for safety\r\n\r\n      // v0.17.225: Calculate total width = grid width + timeline SVG full width + separator\r\n      const gridWidth = gridScroll?.offsetWidth || 300;\r\n      const totalWidth = gridWidth + timelineSvgWidth + 10; // +10 for separator and padding\r\n\r\n      // Reset scroll positions to capture from the beginning\r\n      if (gridScroll) {\r\n        gridScroll.scrollTop = 0;\r\n        gridScroll.scrollLeft = 0;\r\n      }\r\n      timelineScroll.scrollTop = 0;\r\n      timelineScroll.scrollLeft = 0;\r\n\r\n      // Temporarily expand container to show all content\r\n      ganttContainer.style.overflow = 'visible';\r\n      ganttContainer.style.height = `${totalHeight}px`;\r\n      ganttContainer.style.width = `${totalWidth}px`;\r\n      if (gridScroll) {\r\n        gridScroll.style.overflow = 'visible';\r\n        gridScroll.style.height = `${contentHeight + 50}px`;\r\n      }\r\n      timelineScroll.style.overflow = 'visible';\r\n      timelineScroll.style.height = `${contentHeight + 50}px`;\r\n      timelineScroll.style.width = `${timelineSvgWidth + 10}px`;\r\n\r\n      // Wait for DOM to update\r\n      await new Promise(resolve => setTimeout(resolve, 150));\r\n\r\n      // Capture with html2canvas\r\n      const canvas = await html2canvas(ganttContainer, {\r\n        backgroundColor: theme.bgPrimary,\r\n        scale: 2,\r\n        logging: false,\r\n        useCORS: true,\r\n        allowTaint: true,\r\n        width: totalWidth,\r\n        height: totalHeight,\r\n        windowWidth: totalWidth + 100,\r\n        windowHeight: totalHeight + 100,\r\n        scrollX: 0,\r\n        scrollY: 0,\r\n        // Ignore dropdown menus and modals\r\n        ignoreElements: (element) => {\r\n          // Ignore elements with z-index >= 50 (dropdowns, modals)\r\n          const style = window.getComputedStyle(element);\r\n          const zIndex = parseInt(style.zIndex, 10);\r\n          if (!isNaN(zIndex) && zIndex >= 50) {\r\n            return true;\r\n          }\r\n          // Ignore elements with position fixed (modals, overlays)\r\n          if (style.position === 'fixed') {\r\n            return true;\r\n          }\r\n          return false;\r\n        },\r\n      });\r\n\r\n      // Create download link\r\n      const link = document.createElement('a');\r\n      link.download = `gantt-chart-${new Date().toISOString().slice(0, 10)}.png`;\r\n      link.href = canvas.toDataURL('image/png');\r\n      link.click();\r\n\r\n    } finally {\r\n      // Restore original state\r\n      ganttContainer.style.overflow = originalOverflow;\r\n      ganttContainer.style.height = originalHeight;\r\n      ganttContainer.style.width = originalContainerWidth;\r\n      if (gridScroll) {\r\n        gridScroll.style.overflow = originalGridOverflow;\r\n        gridScroll.style.height = '';\r\n        gridScroll.scrollTop = originalGridScrollTop;\r\n        gridScroll.scrollLeft = originalGridScrollLeft;\r\n      }\r\n      timelineScroll.style.overflow = originalTimelineOverflow;\r\n      timelineScroll.style.height = '';\r\n      timelineScroll.style.width = originalTimelineWidth;\r\n      timelineScroll.scrollTop = originalTimelineScrollTop;\r\n      timelineScroll.scrollLeft = originalTimelineScrollLeft;\r\n    }\r\n  }, [theme]);\r\n\r\n  const handleExportPDF = useCallback(async () => {\r\n    await ganttUtils.exportToPDF(localTasks);\r\n  }, [localTasks]);\r\n\r\n  const handleExportExcel = useCallback(async () => {\r\n    await ganttUtils.exportToExcel(localTasks);\r\n  }, [localTasks]);\r\n\r\n  const handleExportCSV = useCallback(() => {\r\n    const csv = ganttUtils.exportToCSV(localTasks);\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = 'gantt-chart.csv';\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n  }, [localTasks]);\r\n\r\n  const handleExportJSON = useCallback(() => {\r\n    const json = ganttUtils.exportToJSON(localTasks);\r\n    const blob = new Blob([json], { type: 'application/json;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = 'gantt-chart.json';\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n  }, [localTasks]);\r\n\r\n  const handleExportMSProject = useCallback(() => {\r\n    ganttUtils.exportToMSProject(localTasks, 'Gantt Project', 'project.xml');\r\n  }, [localTasks]);\r\n\r\n  // Handle separator resize\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setIsResizing(true);\r\n  };\r\n\r\n  // v0.17.222: Both panels have real scroll, synchronized bidirectionally\r\n  // This fixes the bug where TaskGrid content was cut off when using translateY\r\n  const isSyncingScroll = useRef(false);\r\n\r\n  // v0.17.378: Pan/drag state for grabbing and dragging the timeline (ClickUp style)\r\n  const [isPanning, setIsPanning] = useState(false);\r\n  const panStartRef = useRef({ x: 0, y: 0, scrollLeft: 0, scrollTop: 0 });\r\n\r\n  useEffect(() => {\r\n    const timelineScroll = timelineScrollRef.current;\r\n    const gridScroll = gridScrollRef.current?.querySelector('.gantt-grid-scroll') as HTMLElement;\r\n\r\n    if (!timelineScroll || !gridScroll) return;\r\n\r\n    // v0.17.222: Bidirectional scroll sync - both panels scroll together\r\n    const handleTimelineScroll = () => {\r\n      if (isSyncingScroll.current) return;\r\n      isSyncingScroll.current = true;\r\n      const scrollY = timelineScroll.scrollTop;\r\n      setScrollTop(scrollY);\r\n      gridScroll.scrollTop = scrollY;\r\n      requestAnimationFrame(() => {\r\n        isSyncingScroll.current = false;\r\n      });\r\n    };\r\n\r\n    const handleGridScroll = () => {\r\n      if (isSyncingScroll.current) return;\r\n      isSyncingScroll.current = true;\r\n      const scrollY = gridScroll.scrollTop;\r\n      setScrollTop(scrollY);\r\n      timelineScroll.scrollTop = scrollY;\r\n      requestAnimationFrame(() => {\r\n        isSyncingScroll.current = false;\r\n      });\r\n    };\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      // Handle column resize\r\n      if (isResizing && gridScroll) {\r\n        // Calculate width relative to the container's left edge for accuracy\r\n        const containerRect = gridScroll.parentElement?.getBoundingClientRect();\r\n        const containerLeft = containerRect?.left || 0;\r\n        const newWidth = e.clientX - containerLeft;\r\n\r\n        // v0.17.218: Limit max width to 60% of viewport (ClickUp style)\r\n        const minWidth = 200;\r\n        const contentWidth = calculatedGridWidth + BUTTONS_WIDTH;\r\n        const viewportMax = window.innerWidth * MAX_VIEWPORT_PERCENT;\r\n        const maxWidth = Math.max(contentWidth, viewportMax);\r\n\r\n        if (newWidth >= minWidth && newWidth <= maxWidth) {\r\n          setGridWidthOverride(newWidth);\r\n        }\r\n      }\r\n\r\n      // v0.17.378: Handle pan/drag\r\n      if (isPanning && timelineScroll) {\r\n        const deltaX = e.clientX - panStartRef.current.x;\r\n        const deltaY = e.clientY - panStartRef.current.y;\r\n\r\n        timelineScroll.scrollLeft = panStartRef.current.scrollLeft - deltaX;\r\n        timelineScroll.scrollTop = panStartRef.current.scrollTop - deltaY;\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsResizing(false);\r\n      setIsPanning(false);\r\n    };\r\n\r\n    // v0.17.378: Pan/drag - mousedown on timeline background starts panning\r\n    const handleTimelineMouseDown = (e: MouseEvent) => {\r\n      // Only pan with left mouse button and when clicking on background (not on task bars)\r\n      if (e.button !== 0) return;\r\n\r\n      // Don't start panning if clicking on interactive elements\r\n      const target = e.target as HTMLElement;\r\n      const isInteractive = target.closest('[data-task-bar]') ||\r\n                           target.closest('[data-dependency-line]') ||\r\n                           target.closest('button') ||\r\n                           target.closest('[role=\"button\"]') ||\r\n                           target.tagName === 'rect' && target.getAttribute('data-clickable') === 'true';\r\n\r\n      if (isInteractive) return;\r\n\r\n      // Start panning\r\n      setIsPanning(true);\r\n      panStartRef.current = {\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n        scrollLeft: timelineScroll.scrollLeft,\r\n        scrollTop: timelineScroll.scrollTop,\r\n      };\r\n\r\n      // Prevent text selection while dragging\r\n      e.preventDefault();\r\n    };\r\n\r\n    timelineScroll.addEventListener('scroll', handleTimelineScroll);\r\n    gridScroll.addEventListener('scroll', handleGridScroll);\r\n    timelineScroll.addEventListener('mousedown', handleTimelineMouseDown);\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n\r\n    return () => {\r\n      timelineScroll.removeEventListener('scroll', handleTimelineScroll);\r\n      gridScroll.removeEventListener('scroll', handleGridScroll);\r\n      timelineScroll.removeEventListener('mousedown', handleTimelineMouseDown);\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [isResizing, isPanning, calculatedGridWidth]);\r\n\r\n  // v0.17.377: Scroll to today on initial mount (like ClickUp)\r\n  // Uses useLayoutEffect to scroll BEFORE the browser paints, avoiding visible jump\r\n  const hasScrolledToToday = useRef(false);\r\n  const initialStartDateRef = useRef<Date | null>(null);\r\n\r\n  // Capture the first valid startDate (when tasks are loaded)\r\n  useLayoutEffect(() => {\r\n    // Only scroll once, when we have tasks and a valid startDate\r\n    if (hasScrolledToToday.current) return;\r\n    if (localTasks.length === 0) return;\r\n    if (!timelineScrollRef.current) return;\r\n\r\n    // Mark as scrolled immediately to prevent re-runs\r\n    hasScrolledToToday.current = true;\r\n    initialStartDateRef.current = startDate;\r\n\r\n    const timelineScroll = timelineScrollRef.current;\r\n    const today = new Date();\r\n    const dayWidth = timeScale === 'day' ? 60 : timeScale === 'week' ? 20 : 8;\r\n    const daysFromStart = (today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24);\r\n\r\n    // Calculate scroll position to center today in the viewport\r\n    const viewportWidth = timelineScroll.clientWidth;\r\n    const todayPosition = daysFromStart * dayWidth * zoom;\r\n    const scrollX = todayPosition - (viewportWidth / 2);\r\n\r\n    // Only scroll if today is within the timeline range\r\n    if (daysFromStart >= 0 && viewportWidth > 0) {\r\n      timelineScroll.scrollLeft = Math.max(0, scrollX);\r\n    }\r\n  }, [localTasks.length, startDate, timeScale, zoom]); // Re-run when tasks load\r\n\r\n  return (\r\n    <GanttI18nContext.Provider value={translations}>\r\n    <GanttThemeContext.Provider value={ganttThemeContextValue}>\r\n    <div\r\n      ref={ganttContainerRef}\r\n      className=\"flex flex-col h-full w-full\"\r\n      style={{\r\n        backgroundColor: theme.bgPrimary,\r\n        fontFamily: 'Inter, sans-serif',\r\n        minHeight: 0, // Critical for flex children to shrink\r\n        // v0.9.1: Prevent browser auto-scroll when disableScrollSync is enabled\r\n        ...(config.disableScrollSync && {\r\n          scrollBehavior: 'auto',\r\n          overflowAnchor: 'none',\r\n        }),\r\n      }}\r\n    >\r\n      {/* Toolbar */}\r\n      <GanttToolbar\r\n        theme={theme}\r\n        timeScale={timeScale}\r\n        onTimeScaleChange={setTimeScale}\r\n        zoom={zoom}\r\n        onZoomChange={setZoom}\r\n        currentTheme={currentTheme}\r\n        onThemeChange={handleThemeChange}\r\n        rowDensity={rowDensity}\r\n        onRowDensityChange={setRowDensity}\r\n        showThemeSelector={showThemeSelector}\r\n        // v0.14.3: Create Task button\r\n        showCreateTaskButton={showCreateTaskButton}\r\n        createTaskLabel={createTaskLabel}\r\n        onCreateTask={onCreateTask}\r\n        // v0.17.300: Task filter\r\n        taskFilter={taskFilter}\r\n        onTaskFilterChange={setTaskFilter}\r\n        // v0.12.0: Export handlers\r\n        onExportPNG={showExportButton ? handleExportPNG : undefined}\r\n        onExportPDF={showExportButton ? handleExportPDF : undefined}\r\n        onExportExcel={showExportButton ? handleExportExcel : undefined}\r\n        onExportCSV={showExportButton ? handleExportCSV : undefined}\r\n        onExportJSON={showExportButton ? handleExportJSON : undefined}\r\n        onExportMSProject={showExportButton ? handleExportMSProject : undefined}\r\n      />\r\n\r\n      {/* Main Content - v0.13.9: TaskGrid has no scroll, Timeline has the unified vertical scroll */}\r\n      {/* v0.17.31: Changed to clip to allow tooltips to render above header */}\r\n      <div\r\n        ref={gridScrollRef}\r\n        className=\"flex-1 flex min-h-0\"\r\n        style={{\r\n          overflow: 'clip',\r\n          overflowClipMargin: '100px', // Allow tooltip to overflow above\r\n        }}\r\n      >\r\n        {/* Task Grid - v0.17.194: Horizontal scroll when columns exceed width (ClickUp style) */}\r\n        {/* v0.17.222: Real scroll instead of transform - synced bidirectionally with Timeline */}\r\n        {/* v0.17.223: Hide scrollbar visually but keep scroll functional */}\r\n        <div\r\n          className=\"gantt-grid-scroll flex-shrink-0\"\r\n          style={{\r\n            width: gridWidth,\r\n            overflowX: 'auto', // v0.17.194: Allow horizontal scroll for many columns\r\n            overflowY: 'scroll', // v0.17.222: Real scroll synced with Timeline\r\n            scrollbarWidth: 'none', // v0.17.223: Hide scrollbar (Firefox)\r\n            msOverflowStyle: 'none', // v0.17.223: Hide scrollbar (IE/Edge)\r\n          }}\r\n        >\r\n          <TaskGrid\r\n            tasks={filteredTasks}\r\n            theme={theme}\r\n            rowHeight={rowHeight}\r\n            availableUsers={availableUsers}\r\n            templates={mergedTemplates}\r\n            onTaskClick={onTaskClick}\r\n            onTaskDblClick={handleTaskDblClickInternal} // v0.10.0: Use internal handler that opens modal\r\n            onTaskContextMenu={onTaskContextMenu} // v0.8.0\r\n            onTaskToggle={handleTaskToggle}\r\n            scrollTop={scrollTop}\r\n            columns={columns}\r\n            onToggleColumn={handleToggleColumn}\r\n            onColumnResize={handleColumnResize}\r\n            onTaskUpdate={handleTaskUpdate}\r\n            onTaskIndent={handleTaskIndent}\r\n            onTaskOutdent={handleTaskOutdent}\r\n            onTaskMove={handleTaskMove}\r\n            onMultiTaskDelete={handleMultiTaskDelete}\r\n            onTaskDuplicate={handleTaskDuplicate}\r\n            onTaskCreate={handleTaskCreate}\r\n            onTaskRename={handleTaskRename}\r\n            onCreateSubtask={handleCreateSubtask}\r\n            onOpenTaskModal={onTaskClick ? (task: Task) => onTaskClick(task) : undefined}\r\n            onDeleteRequest={(taskId: string, taskName: string) => setDeleteConfirmation({ taskId, taskName })} // v0.17.34\r\n            onTaskReparent={handleTaskReparent} // v0.17.68\r\n          />\r\n        </div>\r\n\r\n        {/* v0.17.220: Resize handle - 1px width */}\r\n        <div\r\n          className=\"flex-shrink-0 cursor-col-resize hover:bg-blue-500/50 transition-colors h-full\"\r\n          style={{\r\n            width: 1,\r\n            backgroundColor: theme.border,\r\n            zIndex: 15,\r\n          }}\r\n          onMouseDown={handleMouseDown}\r\n        />\r\n\r\n        {/* Timeline - v0.13.9: Has both scrolls, TaskGrid syncs to this scroll */}\r\n        {/* v0.17.31: Added overflow-y:clip to allow tooltips to render above while maintaining scroll */}\r\n        {/* v0.17.378: Added grab cursor for pan/drag functionality (ClickUp style) */}\r\n        <div\r\n          ref={timelineScrollRef}\r\n          className=\"gantt-timeline-scroll flex-1\"\r\n          style={{\r\n            minHeight: 0,\r\n            overflowX: 'auto',\r\n            overflowY: 'auto',\r\n            cursor: isPanning ? 'grabbing' : 'grab',\r\n            // v0.9.1: Prevent browser auto-scroll when disableScrollSync is enabled\r\n            ...(config.disableScrollSync && {\r\n              scrollBehavior: 'auto',\r\n              overflowAnchor: 'none',\r\n            }),\r\n          }}\r\n        >\r\n          <Timeline\r\n            tasks={filteredTasks}\r\n            theme={theme}\r\n            rowHeight={rowHeight}\r\n            timeScale={timeScale}\r\n            startDate={startDate}\r\n            endDate={endDate}\r\n            zoom={zoom}\r\n            locale={locale} // v0.17.400: Pass locale for date formatting\r\n            templates={mergedTemplates}\r\n            dependencyLineStyle={config?.dependencyLineStyle} // v0.17.310\r\n            onTaskClick={onTaskClick}\r\n            onTaskDblClick={handleTaskDblClickInternal} // v0.10.0: Use internal handler that opens modal\r\n            onTaskContextMenu={handleTaskContextMenu} // v0.8.0: Now uses our handler for Split feature\r\n            onTaskDateChange={handleTaskDateChange}\r\n            onDependencyCreate={handleDependencyCreate}\r\n            onDependencyDelete={handleDependencyDelete}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* v0.8.0: Context Menu for task operations (v0.16.0: Enhanced with Edit, Add Subtask, Status changes) */}\r\n      {/* v0.17.46: Parent tasks (with subtasks) have limited menu - no edit, no status changes */}\r\n      {contextMenu.task && (\r\n        <ContextMenu\r\n          isOpen={contextMenu.isOpen}\r\n          x={contextMenu.x}\r\n          y={contextMenu.y}\r\n          theme={theme}\r\n          onClose={() => setContextMenu({ isOpen: false, x: 0, y: 0, task: null })}\r\n          items={(() => {\r\n            const staleTask = contextMenu.task;\r\n            if (!staleTask) return [];\r\n\r\n            // v0.17.162: Look up current task from localTasks to get latest data (e.g., after inline rename)\r\n            const task = ganttUtils.findTaskById(localTasks, staleTask.id) || staleTask;\r\n            const isParentTask = task.subtasks && task.subtasks.length > 0;\r\n\r\n            // v0.17.46: Parent tasks can only add subtasks and delete - status/progress is auto-calculated\r\n            if (isParentTask) {\r\n              return [\r\n                // Add Subtask - main action for parent tasks\r\n                {\r\n                  id: 'addSubtask',\r\n                  label: translations.contextMenu?.addSubtask || 'Add Subtask',\r\n                  icon: MenuIcons.Add,\r\n                  onClick: () => {\r\n                    if (onTaskAddSubtask) {\r\n                      onTaskAddSubtask(task);\r\n                    } else {\r\n                      handleCreateSubtask(task.id);\r\n                    }\r\n                  },\r\n                },\r\n                // Separator before delete\r\n                {\r\n                  id: 'separator-delete',\r\n                  label: '',\r\n                  separator: true,\r\n                  onClick: () => {},\r\n                },\r\n                // Delete Task\r\n                {\r\n                  id: 'delete',\r\n                  label: translations.contextMenu?.deleteTask || 'Delete Task',\r\n                  icon: MenuIcons.Delete,\r\n                  onClick: () => {\r\n                    setDeleteConfirmation({\r\n                      taskId: task.id,\r\n                      taskName: task.name,\r\n                    });\r\n                  },\r\n                },\r\n              ];\r\n            }\r\n\r\n            // Regular tasks (no subtasks) - full menu\r\n            return [\r\n              // v0.16.0: Edit Task - opens edit modal or calls custom handler\r\n              {\r\n                id: 'edit',\r\n                label: translations.contextMenu?.editTask || 'Edit Task',\r\n                icon: MenuIcons.Pencil,\r\n                onClick: () => {\r\n                  if (onTaskEdit) {\r\n                    onTaskEdit(task);\r\n                  } else {\r\n                    setEditingTask(task);\r\n                  }\r\n                },\r\n              },\r\n              // v0.16.0: Add Subtask\r\n              {\r\n                id: 'addSubtask',\r\n                label: translations.contextMenu?.addSubtask || 'Add Subtask',\r\n                icon: MenuIcons.Add,\r\n                onClick: () => {\r\n                  if (onTaskAddSubtask) {\r\n                    onTaskAddSubtask(task);\r\n                  } else {\r\n                    handleCreateSubtask(task.id);\r\n                  }\r\n                },\r\n              },\r\n              // Separator before status changes\r\n              {\r\n                id: 'separator-status',\r\n                label: '',\r\n                separator: true,\r\n                onClick: () => {},\r\n              },\r\n              // v0.16.0: Mark Incomplete (status: 'todo', progress: 0)\r\n              {\r\n                id: 'markIncomplete',\r\n                label: translations.contextMenu?.markIncomplete || 'Mark Incomplete',\r\n                icon: MenuIcons.MarkIncomplete,\r\n                onClick: () => {\r\n                  if (onTaskMarkIncomplete) {\r\n                    onTaskMarkIncomplete(task);\r\n                  } else {\r\n                    handleTaskUpdate(task.id, { status: 'todo', progress: 0 });\r\n                  }\r\n                },\r\n                disabled: task.status === 'todo',\r\n              },\r\n              // v0.16.0: Set In Progress (status: 'in-progress')\r\n              {\r\n                id: 'setInProgress',\r\n                label: translations.contextMenu?.setInProgress || 'Set In Progress',\r\n                icon: MenuIcons.SetInProgress,\r\n                onClick: () => {\r\n                  if (onTaskSetInProgress) {\r\n                    onTaskSetInProgress(task);\r\n                  } else {\r\n                    handleTaskUpdate(task.id, { status: 'in-progress' });\r\n                  }\r\n                },\r\n                disabled: task.status === 'in-progress',\r\n              },\r\n              // v0.16.0: Mark Complete (status: 'completed', progress: 100)\r\n              {\r\n                id: 'markComplete',\r\n                label: translations.contextMenu?.markComplete || 'Mark Complete',\r\n                icon: MenuIcons.MarkComplete,\r\n                onClick: () => {\r\n                  handleTaskUpdate(task.id, { status: 'completed', progress: 100 });\r\n                },\r\n                disabled: task.status === 'completed',\r\n              },\r\n              // Separator before advanced options\r\n              {\r\n                id: 'separator-advanced',\r\n                label: '',\r\n                separator: true,\r\n                onClick: () => {},\r\n              },\r\n              // Split Task (existing feature from v0.8.0)\r\n              {\r\n                id: 'split',\r\n                label: translations.contextMenu?.splitTask || 'Split Task',\r\n                icon: MenuIcons.Split,\r\n                onClick: () => {\r\n                  if (!task.startDate || !task.endDate) {\r\n                    console.warn('Cannot split task without dates');\r\n                    return;\r\n                  }\r\n\r\n                  // Calculate midpoint date for split\r\n                  const startTime = task.startDate.getTime();\r\n                  const endTime = task.endDate.getTime();\r\n                  const midTime = startTime + (endTime - startTime) / 2;\r\n                  const splitDate = new Date(midTime);\r\n\r\n                  // Call split handler\r\n                  handleSplitTask(task, splitDate);\r\n                },\r\n                disabled: !task.startDate || !task.endDate,\r\n              },\r\n              // Separator before delete\r\n              {\r\n                id: 'separator-delete',\r\n                label: '',\r\n                separator: true,\r\n                onClick: () => {},\r\n              },\r\n              // Delete Task - v0.17.33: Now shows confirmation modal\r\n              {\r\n                id: 'delete',\r\n                label: translations.contextMenu?.deleteTask || 'Delete Task',\r\n                icon: MenuIcons.Delete,\r\n                onClick: () => {\r\n                  setDeleteConfirmation({\r\n                    taskId: task.id,\r\n                    taskName: task.name,\r\n                  });\r\n                },\r\n              },\r\n            ];\r\n          })()}\r\n        />\r\n      )}\r\n\r\n      {/* v0.17.244: Unified Task Detail Modal (replaces TaskFormModal) */}\r\n      <TaskDetailModal\r\n        task={editingTask}\r\n        isOpen={!!editingTask}\r\n        onClose={() => setEditingTask(null)}\r\n        onTaskUpdate={(updatedTask) => {\r\n          if (editingTask) {\r\n            handleTaskUpdate(editingTask.id, updatedTask);\r\n            setEditingTask(null);\r\n          }\r\n        }}\r\n        theme={currentTheme === 'light' ? 'light' : 'dark'}\r\n        locale={locale === 'es' ? 'es' : 'en'}\r\n        availableUsers={availableUsers}\r\n        availableTasks={tasks}\r\n      />\r\n\r\n      {/* v0.17.33: Delete Confirmation Modal */}\r\n      <AnimatePresence>\r\n        {deleteConfirmation && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-[10000] flex items-center justify-center p-4\"\r\n            style={{ backgroundColor: 'rgba(0, 0, 0, 0.6)' }}\r\n            onClick={() => setDeleteConfirmation(null)}\r\n          >\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.9 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.9 }}\r\n              transition={{ duration: 0.2, ease: 'easeOut' }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"w-full max-w-md rounded-xl shadow-2xl overflow-hidden\"\r\n              style={{\r\n                backgroundColor: theme.bgSecondary,\r\n                border: `1px solid ${theme.border}`,\r\n              }}\r\n            >\r\n              {/* Header */}\r\n              <div\r\n                className=\"px-6 py-4\"\r\n                style={{ borderBottom: `1px solid ${theme.border}` }}\r\n              >\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div\r\n                    className=\"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\"\r\n                    style={{ backgroundColor: 'rgba(239, 68, 68, 0.2)' }}\r\n                  >\r\n                    <AlertTriangle className=\"w-5 h-5\" style={{ color: '#EF4444' }} />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3\r\n                      className=\"text-lg font-semibold\"\r\n                      style={{ color: theme.textPrimary, fontFamily: 'Inter, sans-serif' }}\r\n                    >\r\n                      {translations.contextMenu?.deleteTask || 'Delete Task'}?\r\n                    </h3>\r\n                    <p\r\n                      className=\"text-sm mt-1\"\r\n                      style={{ color: theme.textSecondary, fontFamily: 'Inter, sans-serif' }}\r\n                    >\r\n                      {locale === 'es' ? 'Esta accin no se puede deshacer' : 'This action cannot be undone'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Body */}\r\n              <div className=\"px-6 py-4\">\r\n                <p\r\n                  className=\"text-sm leading-relaxed\"\r\n                  style={{ color: theme.textSecondary, fontFamily: 'Inter, sans-serif' }}\r\n                >\r\n                  {locale === 'es' ? 'Ests a punto de eliminar la tarea' : 'You are about to delete the task'}{' '}\r\n                  <span className=\"font-semibold\" style={{ color: theme.textPrimary }}>\r\n                    \"{deleteConfirmation.taskName}\"\r\n                  </span>\r\n                  .\r\n                </p>\r\n              </div>\r\n\r\n              {/* Footer */}\r\n              <div\r\n                className=\"px-6 py-4 flex items-center justify-end gap-3\"\r\n                style={{\r\n                  backgroundColor: theme.bgPrimary,\r\n                  borderTop: `1px solid ${theme.border}`,\r\n                }}\r\n              >\r\n                <button\r\n                  onClick={() => setDeleteConfirmation(null)}\r\n                  className=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors\"\r\n                  style={{\r\n                    color: theme.textSecondary,\r\n                    fontFamily: 'Inter, sans-serif',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.backgroundColor = theme.hoverBg;\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.backgroundColor = 'transparent';\r\n                  }}\r\n                >\r\n                  {locale === 'es' ? 'Cancelar' : 'Cancel'}\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    handleMultiTaskDelete([deleteConfirmation.taskId]);\r\n                    setDeleteConfirmation(null);\r\n                  }}\r\n                  className=\"px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors flex items-center gap-2\"\r\n                  style={{\r\n                    backgroundColor: '#EF4444',\r\n                    fontFamily: 'Inter, sans-serif',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.backgroundColor = '#DC2626';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.backgroundColor = '#EF4444';\r\n                  }}\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                  {locale === 'es' ? 'Eliminar' : 'Delete'}\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* v0.14.0: AI Assistant for natural language task editing */}\r\n      {aiAssistant?.enabled && (\r\n        <GanttAIAssistant\r\n          tasks={localTasks}\r\n          theme={theme}\r\n          config={aiAssistant}\r\n          onTasksUpdate={setLocalTasks}\r\n          onTaskUpdate={handleTaskUpdate}\r\n          onTaskCreate={(task) => {\r\n            setLocalTasks((prev) => [...prev, task]);\r\n          }}\r\n          onTaskDelete={(taskId) => {\r\n            // v0.17.19: Use handleMultiTaskDelete to respect lifecycle hooks\r\n            handleMultiTaskDelete([taskId]);\r\n          }}\r\n          onDependencyCreate={(fromTaskId, toTaskId) => {\r\n            const fromTask = ganttUtils.findTaskById(localTasks, fromTaskId);\r\n            if (fromTask) {\r\n              handleDependencyCreate(fromTask, toTaskId);\r\n            }\r\n          }}\r\n          onDependencyDelete={handleDependencyDelete}\r\n        />\r\n      )}\r\n    </div>\r\n    </GanttThemeContext.Provider>\r\n    </GanttI18nContext.Provider>\r\n  );\r\n})","/**\r\n * Task Form Modal - Complete CRUD for Gantt Tasks\r\n * v0.17.98: Complete ClickUp-style redesign\r\n * - Cleaner, more minimal design\r\n * - Color picker in popover instead of inline grid\r\n * - Pill-button style for Status/Priority/Assignees\r\n * - Larger, more prominent task name input\r\n * - Horizontal field row like ClickUp\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport {\r\n  X,\r\n  Calendar,\r\n  Users,\r\n  Link2,\r\n  Clock,\r\n  AlertCircle,\r\n  Milestone as MilestoneIcon,\r\n  Flag,\r\n  ChevronDown,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Check,\r\n  CircleDot,\r\n} from 'lucide-react'\r\nimport { Task, Theme, TaskTag } from './types'\r\nimport { themes } from './themes'\r\nimport { TASK_COLORS } from './ColorPicker'\r\nimport { Portal } from '../Portal'\r\nimport { TagPicker } from './TagPicker'\r\nimport { AttachmentUploader } from '../Attachments'\r\nimport type { Attachment } from '../../types'\r\n\r\n// v0.17.28: Priority type for Kanban sync\r\nexport type TaskPriority = 'low' | 'medium' | 'high' | 'urgent'\r\n\r\n// v0.17.54: Custom status type for dynamic Kanban columns\r\nexport interface CustomStatus {\r\n  id: string\r\n  title: string\r\n  color?: string\r\n}\r\n\r\n// v0.17.54: Default statuses that are always available\r\nexport const DEFAULT_STATUSES: CustomStatus[] = [\r\n  { id: 'todo', title: 'Por Hacer', color: '#6B7280' },\r\n  { id: 'in-progress', title: 'En Progreso', color: '#F59E0B' },\r\n  { id: 'completed', title: 'Completada', color: '#10B981' },\r\n]\r\n\r\nexport interface TaskFormData {\r\n  name: string\r\n  description?: string\r\n  startDate?: Date\r\n  endDate?: Date\r\n  progress: number\r\n  status: string\r\n  priority?: TaskPriority\r\n  isMilestone: boolean\r\n  color?: string\r\n  assignees?: Array<{ name: string; avatar?: string; initials: string; color: string }>\r\n  dependencies?: string[]\r\n  tags?: TaskTag[] // v0.17.158: Tags/Labels support\r\n  pendingFiles?: File[] // v0.17.166: Files to upload after task creation\r\n}\r\n\r\nexport interface TaskFormModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  task?: Task\r\n  availableTasks?: Task[]\r\n  availableUsers?: Array<{ id: string; name: string; avatar?: string }>\r\n  onSubmit: (data: TaskFormData) => void | Promise<void>\r\n  isLoading?: boolean\r\n  mode?: 'create' | 'edit'\r\n  theme?: Theme\r\n  customStatuses?: CustomStatus[]\r\n  // v0.17.158: Tags support\r\n  availableTags?: TaskTag[]\r\n  onCreateTag?: (name: string, color: string) => Promise<TaskTag | null>\r\n  // v0.17.165: Attachments support\r\n  attachments?: Attachment[]\r\n  onUploadAttachments?: (taskId: string, files: File[]) => Promise<void> | void\r\n  onDeleteAttachment?: (attachmentId: string) => void\r\n}\r\n\r\n// Priority configuration\r\nconst PRIORITIES = [\r\n  { id: 'low', label: 'Baja', color: '#10B981', icon: '' },\r\n  { id: 'medium', label: 'Media', color: '#F59E0B', icon: '' },\r\n  { id: 'high', label: 'Alta', color: '#F97316', icon: '' },\r\n  { id: 'urgent', label: 'Urgente', color: '#EF4444', icon: '' },\r\n]\r\n\r\nexport function TaskFormModal({\r\n  isOpen,\r\n  onClose,\r\n  task,\r\n  availableTasks = [],\r\n  availableUsers = [],\r\n  onSubmit,\r\n  isLoading = false,\r\n  mode = task ? 'edit' : 'create',\r\n  theme = 'dark',\r\n  customStatuses = [],\r\n  availableTags = [],\r\n  onCreateTag,\r\n  attachments = [],\r\n  onUploadAttachments,\r\n  onDeleteAttachment,\r\n}: TaskFormModalProps) {\r\n  const allStatuses: CustomStatus[] = [\r\n    ...DEFAULT_STATUSES,\r\n    ...customStatuses.filter(cs => !DEFAULT_STATUSES.some(ds => ds.id === cs.id)),\r\n  ]\r\n\r\n  const themeColors = (themes[theme] || themes.dark)!\r\n\r\n  // Dropdown states\r\n  const [showStatusDropdown, setShowStatusDropdown] = useState(false)\r\n  const [showPriorityDropdown, setShowPriorityDropdown] = useState(false)\r\n  const [showAssigneesDropdown, setShowAssigneesDropdown] = useState(false)\r\n  const [showColorPicker, setShowColorPicker] = useState(false)\r\n  const [colorPickerPosition, setColorPickerPosition] = useState({ top: 0, left: 0 }) // v0.17.155\r\n  const [showDatePicker, setShowDatePicker] = useState<'start' | 'end' | null>(null)\r\n  const [datePickerMonth, setDatePickerMonth] = useState(new Date())\r\n  const [datePickerPosition, setDatePickerPosition] = useState({ top: 0, left: 0 })\r\n  const [showAdvanced, setShowAdvanced] = useState(false)\r\n  // v0.17.166: Pending files for create mode (files selected before task is created)\r\n  const [pendingFiles, setPendingFiles] = useState<File[]>([])\r\n\r\n  // Refs for click outside\r\n  const statusRef = useRef<HTMLDivElement>(null)\r\n  const priorityRef = useRef<HTMLDivElement>(null)\r\n  const assigneesRef = useRef<HTMLDivElement>(null)\r\n  const colorRef = useRef<HTMLDivElement>(null)\r\n  const dateRowRef = useRef<HTMLDivElement>(null)\r\n\r\n  const [formData, setFormData] = useState<TaskFormData>({\r\n    name: '',\r\n    description: '',\r\n    progress: 0,\r\n    status: 'todo',\r\n    priority: 'medium',\r\n    isMilestone: false,\r\n    color: '#6366F1',\r\n    assignees: [],\r\n    dependencies: [],\r\n    tags: [], // v0.17.158\r\n  })\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  // Initialize form with task data\r\n  useEffect(() => {\r\n    if (task) {\r\n      setFormData({\r\n        name: task.name,\r\n        description: (task as any).description || '',\r\n        startDate: task.startDate,\r\n        endDate: task.endDate,\r\n        progress: task.progress,\r\n        status: task.status || 'todo',\r\n        priority: (task as any).priority || 'medium',\r\n        isMilestone: task.isMilestone || false,\r\n        color: task.color || '#6366F1',\r\n        assignees: task.assignees || [],\r\n        dependencies: task.dependencies || [],\r\n        tags: task.tags || [], // v0.17.158\r\n      })\r\n      if ((task.dependencies && task.dependencies.length > 0) || task.isMilestone) {\r\n        setShowAdvanced(true)\r\n      }\r\n    } else {\r\n      setFormData({\r\n        name: '',\r\n        description: '',\r\n        progress: 0,\r\n        status: 'todo',\r\n        priority: 'medium',\r\n        isMilestone: false,\r\n        color: '#6366F1',\r\n        assignees: [],\r\n        dependencies: [],\r\n        pendingFiles: [], // v0.17.166\r\n        tags: [], // v0.17.158\r\n      })\r\n      setShowAdvanced(false)\r\n      setPendingFiles([]) // v0.17.166: Clear pending files on reset\r\n    }\r\n  }, [task, isOpen])\r\n\r\n  // Close dropdowns on click outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (statusRef.current && !statusRef.current.contains(e.target as Node)) setShowStatusDropdown(false)\r\n      if (priorityRef.current && !priorityRef.current.contains(e.target as Node)) setShowPriorityDropdown(false)\r\n      if (assigneesRef.current && !assigneesRef.current.contains(e.target as Node)) setShowAssigneesDropdown(false)\r\n      if (colorRef.current && !colorRef.current.contains(e.target as Node)) setShowColorPicker(false)\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => document.removeEventListener('mousedown', handleClickOutside)\r\n  }, [])\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Record<string, string> = {}\r\n    if (!formData.name.trim()) newErrors.name = 'El nombre es requerido'\r\n    if (formData.startDate && formData.endDate && formData.startDate > formData.endDate) {\r\n      newErrors.endDate = 'La fecha de fin debe ser posterior a la de inicio'\r\n    }\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!validate()) return\r\n    try {\r\n      // v0.17.166: Include pending files in form data for create mode\r\n      const submitData = mode === 'create' && pendingFiles.length > 0\r\n        ? { ...formData, pendingFiles }\r\n        : formData\r\n      await onSubmit(submitData)\r\n      setPendingFiles([]) // Clear pending files after submit\r\n      onClose()\r\n    } catch (error) {\r\n      console.error('Error submitting task:', error)\r\n    }\r\n  }\r\n\r\n  const handleChange = (field: keyof TaskFormData, value: any) => {\r\n    setFormData((prev) => {\r\n      const updated = { ...prev, [field]: value }\r\n      // v0.17.110: Sync progress when status changes\r\n      if (field === 'status') {\r\n        const statusValue = value as string\r\n        if (statusValue === 'todo') updated.progress = 0\r\n        else if (statusValue === 'in-progress') {\r\n          // If coming from completed/todo, set to 50%, otherwise keep current\r\n          if (prev.progress === 0 || prev.progress === 100) updated.progress = 50\r\n        }\r\n        else if (statusValue === 'completed' || statusValue === 'closed') updated.progress = 100\r\n        else if (statusValue === 'in-review' || statusValue === 'review') updated.progress = 75\r\n      }\r\n      // Sync status when progress changes\r\n      if (field === 'progress') {\r\n        const progressValue = typeof value === 'number' ? value : parseInt(value, 10)\r\n        if (progressValue === 100 && prev.status !== 'completed') updated.status = 'completed'\r\n        else if (progressValue > 0 && progressValue < 100 && prev.status === 'todo') updated.status = 'in-progress'\r\n        else if (progressValue === 0 && prev.status !== 'todo') updated.status = 'todo'\r\n      }\r\n      return updated\r\n    })\r\n    if (errors[field]) {\r\n      setErrors((prev) => { const e = { ...prev }; delete e[field]; return e })\r\n    }\r\n  }\r\n\r\n  // Get current status/priority info\r\n  const currentStatus = allStatuses.find(s => s.id === formData.status) ?? DEFAULT_STATUSES[0]!\r\n  const currentPriority = PRIORITIES.find(p => p.id === formData.priority) ?? PRIORITIES[1]!\r\n  const currentColor = TASK_COLORS.find(c => c.value === formData.color) ?? TASK_COLORS[0]!\r\n\r\n  // Pill button base style\r\n  const pillStyle = {\r\n    backgroundColor: themeColors.bgSecondary,\r\n    border: `1px solid ${themeColors.borderLight}`,\r\n    color: themeColors.textPrimary,\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/60 z-50\"\r\n            onClick={onClose}\r\n          />\r\n\r\n          {/* Modal */}\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            transition={{ duration: 0.15, ease: [0.4, 0, 0.2, 1] }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\"\r\n          >\r\n            <div\r\n              className=\"w-full max-w-xl rounded-xl shadow-2xl pointer-events-auto overflow-hidden\"\r\n              data-theme={theme}\r\n              style={{\r\n                backgroundColor: themeColors.bgPrimary,\r\n                border: `1px solid ${themeColors.border}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              {/* Header - Minimal */}\r\n              <div className=\"flex items-center justify-between px-5 py-3\" style={{ borderBottom: `1px solid ${themeColors.border}` }}>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div\r\n                    className=\"w-3 h-3 rounded-full\"\r\n                    style={{ backgroundColor: currentStatus.color || themeColors.accent }}\r\n                  />\r\n                  <span className=\"text-sm font-medium\" style={{ color: themeColors.textSecondary }}>\r\n                    {mode === 'create' ? 'Nueva tarea' : 'Editar tarea'}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-1.5 rounded-lg transition-colors\"\r\n                  style={{ color: themeColors.textTertiary }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.backgroundColor = themeColors.hoverBg\r\n                    e.currentTarget.style.color = themeColors.textPrimary\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.backgroundColor = 'transparent'\r\n                    e.currentTarget.style.color = themeColors.textTertiary\r\n                  }}\r\n                  disabled={isLoading}\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Form Content */}\r\n              <form onSubmit={handleSubmit} className=\"max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n                <div className=\"p-5 space-y-4\">\r\n                  {/* Task Name - Large & Prominent */}\r\n                  <div>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.name}\r\n                      onChange={(e) => handleChange('name', e.target.value)}\r\n                      className=\"w-full text-lg font-medium bg-transparent border-none focus:outline-none focus:ring-0 placeholder:opacity-50\"\r\n                      style={{ color: themeColors.textPrimary }}\r\n                      placeholder=\"Nombre de la tarea\"\r\n                      disabled={isLoading}\r\n                      autoFocus\r\n                    />\r\n                    {errors.name && (\r\n                      <p className=\"mt-1 text-xs text-red-400 flex items-center gap-1\">\r\n                        <AlertCircle className=\"w-3 h-3\" />\r\n                        {errors.name}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Description - Subtle */}\r\n                  <div>\r\n                    <textarea\r\n                      value={formData.description || ''}\r\n                      onChange={(e) => handleChange('description', e.target.value)}\r\n                      className=\"w-full text-sm bg-transparent border-none focus:outline-none focus:ring-0 resize-none placeholder:opacity-40\"\r\n                      style={{ color: themeColors.textSecondary }}\r\n                      placeholder=\"Agregar descripcin...\"\r\n                      rows={2}\r\n                      disabled={isLoading}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Divider */}\r\n                  <div style={{ borderTop: `1px solid ${themeColors.borderLight}` }} />\r\n\r\n                  {/* v0.17.98: Pill Button Row - ClickUp Style */}\r\n                  <div className=\"flex flex-wrap items-center gap-2\">\r\n                    {/* Status Pill */}\r\n                    <div ref={statusRef} className=\"relative\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => !isLoading && setShowStatusDropdown(!showStatusDropdown)}\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all hover:opacity-80\"\r\n                        style={{\r\n                          ...pillStyle,\r\n                          borderColor: currentStatus.color,\r\n                          backgroundColor: `${currentStatus.color}15`,\r\n                        }}\r\n                        disabled={isLoading}\r\n                      >\r\n                        <CircleDot className=\"w-3.5 h-3.5\" style={{ color: currentStatus.color }} />\r\n                        <span style={{ color: currentStatus.color }}>{currentStatus.title}</span>\r\n                        <ChevronDown className=\"w-3 h-3\" style={{ color: currentStatus.color }} />\r\n                      </button>\r\n\r\n                      <AnimatePresence>\r\n                        {showStatusDropdown && (\r\n                          <motion.div\r\n                            initial={{ opacity: 0, y: -5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            className=\"absolute left-0 top-full mt-1 z-50 min-w-[140px] rounded-lg shadow-xl overflow-hidden\"\r\n                            style={{ backgroundColor: themeColors.bgPrimary, border: `1px solid ${themeColors.border}` }}\r\n                          >\r\n                            {allStatuses.map((status) => (\r\n                              <button\r\n                                key={status.id}\r\n                                type=\"button\"\r\n                                className=\"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors\"\r\n                                style={{ color: themeColors.textPrimary }}\r\n                                onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                                onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                                onClick={() => { handleChange('status', status.id); setShowStatusDropdown(false) }}\r\n                              >\r\n                                <CircleDot className=\"w-3.5 h-3.5\" style={{ color: status.color }} />\r\n                                {status.title}\r\n                                {formData.status === status.id && <Check className=\"w-3.5 h-3.5 ml-auto\" style={{ color: themeColors.accent }} />}\r\n                              </button>\r\n                            ))}\r\n                          </motion.div>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Priority Pill */}\r\n                    <div ref={priorityRef} className=\"relative\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => !isLoading && setShowPriorityDropdown(!showPriorityDropdown)}\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all hover:opacity-80\"\r\n                        style={pillStyle}\r\n                        disabled={isLoading}\r\n                      >\r\n                        <Flag className=\"w-3.5 h-3.5\" style={{ color: currentPriority.color }} />\r\n                        <span>{currentPriority.label}</span>\r\n                        <ChevronDown className=\"w-3 h-3\" style={{ color: themeColors.textTertiary }} />\r\n                      </button>\r\n\r\n                      <AnimatePresence>\r\n                        {showPriorityDropdown && (\r\n                          <motion.div\r\n                            initial={{ opacity: 0, y: -5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            className=\"absolute left-0 top-full mt-1 z-50 min-w-[130px] rounded-lg shadow-xl overflow-hidden\"\r\n                            style={{ backgroundColor: themeColors.bgPrimary, border: `1px solid ${themeColors.border}` }}\r\n                          >\r\n                            {PRIORITIES.map((priority) => (\r\n                              <button\r\n                                key={priority.id}\r\n                                type=\"button\"\r\n                                className=\"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors\"\r\n                                style={{ color: themeColors.textPrimary }}\r\n                                onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                                onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                                onClick={() => { handleChange('priority', priority.id as TaskPriority); setShowPriorityDropdown(false) }}\r\n                              >\r\n                                <span>{priority.icon}</span>\r\n                                {priority.label}\r\n                                {formData.priority === priority.id && <Check className=\"w-3.5 h-3.5 ml-auto\" style={{ color: themeColors.accent }} />}\r\n                              </button>\r\n                            ))}\r\n                          </motion.div>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* Assignees Pill */}\r\n                    {availableUsers.length > 0 && (\r\n                      <div ref={assigneesRef} className=\"relative\">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => !isLoading && setShowAssigneesDropdown(!showAssigneesDropdown)}\r\n                          className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all hover:opacity-80\"\r\n                          style={pillStyle}\r\n                          disabled={isLoading}\r\n                        >\r\n                          {formData.assignees && formData.assignees.length > 0 ? (\r\n                            <>\r\n                              <div className=\"flex -space-x-1\">\r\n                                {formData.assignees.slice(0, 3).map((a, i) => (\r\n                                  <div\r\n                                    key={i}\r\n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center text-[10px] text-white font-medium border-2\"\r\n                                    style={{ backgroundColor: a.color || themeColors.accent, borderColor: themeColors.bgSecondary }}\r\n                                  >\r\n                                    {a.initials}\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                              {formData.assignees.length > 3 && (\r\n                                <span style={{ color: themeColors.textTertiary }}>+{formData.assignees.length - 3}</span>\r\n                              )}\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <Users className=\"w-3.5 h-3.5\" style={{ color: themeColors.textTertiary }} />\r\n                              <span style={{ color: themeColors.textTertiary }}>Asignar</span>\r\n                            </>\r\n                          )}\r\n                          <ChevronDown className=\"w-3 h-3\" style={{ color: themeColors.textTertiary }} />\r\n                        </button>\r\n\r\n                        <AnimatePresence>\r\n                          {showAssigneesDropdown && (\r\n                            <motion.div\r\n                              initial={{ opacity: 0, y: -5 }}\r\n                              animate={{ opacity: 1, y: 0 }}\r\n                              exit={{ opacity: 0, y: -5 }}\r\n                              className=\"absolute left-0 top-full mt-1 z-50 min-w-[180px] max-h-[200px] overflow-y-auto rounded-lg shadow-xl\"\r\n                              style={{ backgroundColor: themeColors.bgPrimary, border: `1px solid ${themeColors.border}` }}\r\n                            >\r\n                              {availableUsers.map((user) => {\r\n                                const isSelected = formData.assignees?.some(a => a.name === user.name)\r\n                                return (\r\n                                  <button\r\n                                    key={user.id}\r\n                                    type=\"button\"\r\n                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors\"\r\n                                    style={{ color: themeColors.textPrimary }}\r\n                                    onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                                    onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                                    onClick={() => {\r\n                                      const newAssignees = isSelected\r\n                                        ? (formData.assignees || []).filter(a => a.name !== user.name)\r\n                                        : [...(formData.assignees || []), {\r\n                                            name: user.name,\r\n                                            avatar: user.avatar,\r\n                                            initials: user.name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2),\r\n                                            color: themeColors.accent,\r\n                                          }]\r\n                                      handleChange('assignees', newAssignees)\r\n                                    }}\r\n                                  >\r\n                                    <div\r\n                                      className=\"w-6 h-6 rounded-full flex items-center justify-center text-xs text-white font-medium flex-shrink-0\"\r\n                                      style={{ backgroundColor: themeColors.accent }}\r\n                                    >\r\n                                      {user.name.charAt(0).toUpperCase()}\r\n                                    </div>\r\n                                    <span className=\"truncate flex-1 text-left\">{user.name}</span>\r\n                                    {/* Fixed width checkmark area for consistent alignment */}\r\n                                    <div className=\"w-4 flex-shrink-0 flex justify-end\">\r\n                                      {isSelected && <Check className=\"w-3.5 h-3.5\" style={{ color: themeColors.accent }} />}\r\n                                    </div>\r\n                                  </button>\r\n                                )\r\n                              })}\r\n                            </motion.div>\r\n                          )}\r\n                        </AnimatePresence>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Color Pill */}\r\n                    <div ref={colorRef} className=\"relative\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          if (!isLoading) {\r\n                            if (showColorPicker) {\r\n                              setShowColorPicker(false)\r\n                            } else {\r\n                              // v0.17.155: Calculate position for Portal\r\n                              if (colorRef.current) {\r\n                                const rect = colorRef.current.getBoundingClientRect()\r\n                                const viewportHeight = window.innerHeight\r\n                                const pickerHeight = 120 // Approximate height of color picker\r\n                                const spaceBelow = viewportHeight - rect.bottom\r\n                                const top = spaceBelow < pickerHeight ? rect.top - pickerHeight - 8 : rect.bottom + 8\r\n                                setColorPickerPosition({ top, left: rect.left })\r\n                              }\r\n                              setShowColorPicker(true)\r\n                            }\r\n                          }\r\n                        }}\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all hover:opacity-80\"\r\n                        style={pillStyle}\r\n                        disabled={isLoading}\r\n                      >\r\n                        <div className=\"w-3.5 h-3.5 rounded-full\" style={{ backgroundColor: formData.color }} />\r\n                        <span>{currentColor.name}</span>\r\n                        <ChevronDown className=\"w-3 h-3\" style={{ color: themeColors.textTertiary }} />\r\n                      </button>\r\n\r\n                      {/* v0.17.155: Color Picker using Portal to escape overflow:hidden */}\r\n                      <AnimatePresence>\r\n                        {showColorPicker && (\r\n                          <Portal>\r\n                            <div className=\"fixed inset-0\" style={{ zIndex: 99998 }} onClick={() => setShowColorPicker(false)} />\r\n                            <motion.div\r\n                              initial={{ opacity: 0, y: -5 }}\r\n                              animate={{ opacity: 1, y: 0 }}\r\n                              exit={{ opacity: 0, y: -5 }}\r\n                              transition={{ duration: 0.12 }}\r\n                              className=\"rounded-lg\"\r\n                              style={{\r\n                                position: 'fixed',\r\n                                top: `${colorPickerPosition.top}px`,\r\n                                left: `${colorPickerPosition.left}px`,\r\n                                zIndex: 99999,\r\n                                backgroundColor: themeColors.bgPrimary,\r\n                                border: `1px solid ${themeColors.border}`,\r\n                                boxShadow: '0 4px 20px rgba(0, 0, 0, 0.25)'\r\n                              }}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                            >\r\n                              {/* v0.17.186: Fixed click area with pointerEvents none on inner circle */}\r\n                              <div style={{ padding: '6px 8px' }}>\r\n                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(6, 28px)', gap: '2px' }}>\r\n                                  {TASK_COLORS.slice(0, 18).map((color) => {\r\n                                    const isSelected = formData.color === color.value;\r\n                                    return (\r\n                                      <button\r\n                                        key={color.value}\r\n                                        type=\"button\"\r\n                                        onClick={(e) => {\r\n                                          e.preventDefault();\r\n                                          e.stopPropagation();\r\n                                          handleChange('color', color.value);\r\n                                          setShowColorPicker(false);\r\n                                        }}\r\n                                        style={{\r\n                                          width: '28px',\r\n                                          height: '28px',\r\n                                          borderRadius: '6px',\r\n                                          backgroundColor: 'transparent',\r\n                                          cursor: 'pointer',\r\n                                          border: 'none',\r\n                                          display: 'flex',\r\n                                          alignItems: 'center',\r\n                                          justifyContent: 'center',\r\n                                          padding: 0,\r\n                                        }}\r\n                                        title={color.name}\r\n                                      >\r\n                                        <span\r\n                                          style={{\r\n                                            width: '16px',\r\n                                            height: '16px',\r\n                                            borderRadius: '50%',\r\n                                            backgroundColor: color.value,\r\n                                            outline: isSelected ? `2px solid ${color.value}` : 'none',\r\n                                            outlineOffset: '2px',\r\n                                            pointerEvents: 'none',\r\n                                            display: 'block',\r\n                                          }}\r\n                                        />\r\n                                      </button>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                              </div>\r\n                            </motion.div>\r\n                          </Portal>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n\r\n                    {/* v0.17.158: Tags Picker */}\r\n                    {availableTags.length > 0 || onCreateTag ? (\r\n                      <TagPicker\r\n                        selectedTags={formData.tags || []}\r\n                        availableTags={availableTags}\r\n                        onChange={(tags) => handleChange('tags', tags)}\r\n                        onCreateTag={onCreateTag}\r\n                        theme={themeColors}\r\n                        disabled={isLoading}\r\n                      />\r\n                    ) : null}\r\n                  </div>\r\n\r\n                  {/* Dates Row */}\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Calendar className=\"w-4 h-4\" style={{ color: themeColors.textTertiary }} />\r\n                    <div ref={dateRowRef} className=\"flex items-center gap-2 flex-1 relative\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          if (!isLoading && !formData.isMilestone) {\r\n                            if (showDatePicker === 'start') {\r\n                              setShowDatePicker(null)\r\n                            } else {\r\n                              // Calculate position for Portal\r\n                              if (dateRowRef.current) {\r\n                                const rect = dateRowRef.current.getBoundingClientRect()\r\n                                const viewportHeight = window.innerHeight\r\n                                const pickerHeight = 320 // Approximate height\r\n                                // Open upward if not enough space below\r\n                                const spaceBelow = viewportHeight - rect.bottom\r\n                                const top = spaceBelow < pickerHeight ? rect.top - pickerHeight - 8 : rect.bottom + 8\r\n                                setDatePickerPosition({ top, left: rect.left })\r\n                              }\r\n                              setShowDatePicker('start')\r\n                              setDatePickerMonth(formData.startDate || new Date())\r\n                            }\r\n                          }\r\n                        }}\r\n                        className=\"px-3 py-1.5 rounded-lg text-sm transition-colors\"\r\n                        style={{\r\n                          ...pillStyle,\r\n                          opacity: formData.isMilestone ? 0.5 : 1,\r\n                          cursor: formData.isMilestone ? 'not-allowed' : 'pointer',\r\n                        }}\r\n                        disabled={isLoading || formData.isMilestone}\r\n                      >\r\n                        {formData.startDate ? formData.startDate.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' }) : 'Inicio'}\r\n                      </button>\r\n                      <span style={{ color: themeColors.textTertiary }}></span>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          if (!isLoading && !formData.isMilestone) {\r\n                            if (showDatePicker === 'end') {\r\n                              setShowDatePicker(null)\r\n                            } else {\r\n                              // Calculate position for Portal\r\n                              if (dateRowRef.current) {\r\n                                const rect = dateRowRef.current.getBoundingClientRect()\r\n                                const viewportHeight = window.innerHeight\r\n                                const pickerHeight = 320\r\n                                const spaceBelow = viewportHeight - rect.bottom\r\n                                const top = spaceBelow < pickerHeight ? rect.top - pickerHeight - 8 : rect.bottom + 8\r\n                                setDatePickerPosition({ top, left: rect.left })\r\n                              }\r\n                              setShowDatePicker('end')\r\n                              setDatePickerMonth(formData.endDate || formData.startDate || new Date())\r\n                            }\r\n                          }\r\n                        }}\r\n                        className=\"px-3 py-1.5 rounded-lg text-sm transition-colors\"\r\n                        style={{\r\n                          ...pillStyle,\r\n                          opacity: formData.isMilestone ? 0.5 : 1,\r\n                          cursor: formData.isMilestone ? 'not-allowed' : 'pointer',\r\n                        }}\r\n                        disabled={isLoading || formData.isMilestone}\r\n                      >\r\n                        {formData.endDate ? formData.endDate.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' }) : 'Fin'}\r\n                      </button>\r\n\r\n                      {/* Date Picker Popover - Using Portal to escape overflow:hidden */}\r\n                      <AnimatePresence>\r\n                        {showDatePicker && (\r\n                          <Portal>\r\n                            <div className=\"fixed inset-0\" style={{ zIndex: 99998 }} onClick={() => setShowDatePicker(null)} />\r\n                            <motion.div\r\n                              initial={{ opacity: 0, y: -10 }}\r\n                              animate={{ opacity: 1, y: 0 }}\r\n                              exit={{ opacity: 0, y: -10 }}\r\n                              className=\"rounded-xl shadow-2xl overflow-hidden flex\"\r\n                              style={{\r\n                                position: 'fixed',\r\n                                top: `${datePickerPosition.top}px`,\r\n                                left: `${datePickerPosition.left}px`,\r\n                                zIndex: 99999,\r\n                                backgroundColor: themeColors.bgPrimary,\r\n                                border: `1px solid ${themeColors.border}`,\r\n                              }}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                            >\r\n                              {/* Quick Options */}\r\n                              <div className=\"w-40 py-2\" style={{ borderRight: `1px solid ${themeColors.border}` }}>\r\n                                {(() => {\r\n                                  const today = new Date()\r\n                                  const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1)\r\n                                  const nextWeek = new Date(today); nextWeek.setDate(today.getDate() + 7)\r\n                                  const twoWeeks = new Date(today); twoWeeks.setDate(today.getDate() + 14)\r\n\r\n                                  const options = [\r\n                                    { label: 'Hoy', date: today },\r\n                                    { label: 'Maana', date: tomorrow },\r\n                                    { label: 'Prxima semana', date: nextWeek },\r\n                                    { label: '2 semanas', date: twoWeeks },\r\n                                  ]\r\n\r\n                                  return options.map((opt, i) => (\r\n                                    <button\r\n                                      key={i}\r\n                                      type=\"button\"\r\n                                      className=\"w-full px-3 py-2 text-sm text-left transition-colors\"\r\n                                      style={{ color: themeColors.textPrimary }}\r\n                                      onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                                      onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                                      onClick={() => {\r\n                                        if (showDatePicker === 'start') {\r\n                                          handleChange('startDate', opt.date)\r\n                                          if (!formData.endDate || opt.date > formData.endDate) handleChange('endDate', opt.date)\r\n                                          setShowDatePicker('end')\r\n                                        } else {\r\n                                          handleChange('endDate', opt.date)\r\n                                          if (!formData.startDate || opt.date < formData.startDate) handleChange('startDate', opt.date)\r\n                                          setShowDatePicker(null)\r\n                                        }\r\n                                      }}\r\n                                    >\r\n                                      {opt.label}\r\n                                    </button>\r\n                                  ))\r\n                                })()}\r\n                                <div style={{ borderTop: `1px solid ${themeColors.border}`, margin: '0.5rem 0' }} />\r\n                                <button\r\n                                  type=\"button\"\r\n                                  className=\"w-full px-3 py-2 text-sm text-left transition-colors\"\r\n                                  style={{ color: '#EF4444' }}\r\n                                  onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                                  onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                                  onClick={() => { handleChange('startDate', undefined); handleChange('endDate', undefined); setShowDatePicker(null) }}\r\n                                >\r\n                                  Borrar fechas\r\n                                </button>\r\n                              </div>\r\n\r\n                              {/* Calendar */}\r\n                              <div className=\"p-3\">\r\n                                <div className=\"flex items-center justify-between mb-3\">\r\n                                  <button type=\"button\" onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() - 1))} className=\"p-1 rounded hover:bg-white/10\"><ChevronLeft className=\"w-4 h-4\" style={{ color: themeColors.textSecondary }} /></button>\r\n                                  <span className=\"text-sm font-medium\" style={{ color: themeColors.textPrimary }}>{datePickerMonth.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}</span>\r\n                                  <button type=\"button\" onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() + 1))} className=\"p-1 rounded hover:bg-white/10\"><ChevronRight className=\"w-4 h-4\" style={{ color: themeColors.textSecondary }} /></button>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-7 gap-1 mb-1\">\r\n                                  {['D', 'L', 'M', 'M', 'J', 'V', 'S'].map((d, i) => (\r\n                                    <div key={i} className=\"w-7 h-7 flex items-center justify-center text-xs\" style={{ color: themeColors.textTertiary }}>{d}</div>\r\n                                  ))}\r\n                                </div>\r\n                                <div className=\"grid grid-cols-7 gap-1\">\r\n                                  {(() => {\r\n                                    const year = datePickerMonth.getFullYear(), month = datePickerMonth.getMonth()\r\n                                    const firstDay = new Date(year, month, 1).getDay()\r\n                                    const daysInMonth = new Date(year, month + 1, 0).getDate()\r\n                                    const today = new Date()\r\n                                    const days: { day: number; date: Date; isCurrentMonth: boolean }[] = []\r\n\r\n                                    for (let i = firstDay - 1; i >= 0; i--) days.push({ day: new Date(year, month, -i).getDate(), date: new Date(year, month - 1, new Date(year, month, -i).getDate()), isCurrentMonth: false })\r\n                                    for (let i = 1; i <= daysInMonth; i++) days.push({ day: i, date: new Date(year, month, i), isCurrentMonth: true })\r\n                                    const remaining = 42 - days.length\r\n                                    for (let i = 1; i <= remaining; i++) days.push({ day: i, date: new Date(year, month + 1, i), isCurrentMonth: false })\r\n\r\n                                    return days.map((d, i) => {\r\n                                      const isToday = d.date.toDateString() === today.toDateString()\r\n                                      const isStart = formData.startDate?.toDateString() === d.date.toDateString()\r\n                                      const isEnd = formData.endDate?.toDateString() === d.date.toDateString()\r\n                                      const isInRange = formData.startDate && formData.endDate && d.date >= formData.startDate && d.date <= formData.endDate\r\n\r\n                                      return (\r\n                                        <button\r\n                                          key={i}\r\n                                          type=\"button\"\r\n                                          className=\"w-7 h-7 rounded-full flex items-center justify-center text-xs transition-colors\"\r\n                                          style={{\r\n                                            color: !d.isCurrentMonth ? themeColors.textTertiary : isStart || isEnd ? '#FFF' : themeColors.textPrimary,\r\n                                            backgroundColor: isStart ? '#3B82F6' : isEnd ? '#7C3AED' : isInRange ? 'rgba(124, 58, 237, 0.2)' : 'transparent',\r\n                                            boxShadow: isToday && !isStart && !isEnd ? 'inset 0 0 0 1px #3B82F6' : 'none',\r\n                                          }}\r\n                                          onClick={() => {\r\n                                            if (showDatePicker === 'start') {\r\n                                              handleChange('startDate', d.date)\r\n                                              if (formData.endDate && d.date > formData.endDate) handleChange('endDate', d.date)\r\n                                              setShowDatePicker('end')\r\n                                            } else {\r\n                                              handleChange('endDate', d.date)\r\n                                              if (formData.startDate && d.date < formData.startDate) handleChange('startDate', d.date)\r\n                                              setShowDatePicker(null)\r\n                                            }\r\n                                          }}\r\n                                        >\r\n                                          {d.day}\r\n                                        </button>\r\n                                      )\r\n                                    })\r\n                                  })()}\r\n                                </div>\r\n                              </div>\r\n                            </motion.div>\r\n                          </Portal>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n                    {errors.endDate && <span className=\"text-xs text-red-400\">{errors.endDate}</span>}\r\n                  </div>\r\n\r\n                  {/* Progress Row - Compact */}\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <Clock className=\"w-4 h-4\" style={{ color: themeColors.textTertiary }} />\r\n                    <div className=\"flex items-center gap-3 flex-1\">\r\n                      <input\r\n                        type=\"range\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        step=\"5\"\r\n                        value={formData.progress}\r\n                        onChange={(e) => handleChange('progress', parseInt(e.target.value))}\r\n                        className=\"flex-1 h-1.5 rounded-full appearance-none cursor-pointer\"\r\n                        style={{\r\n                          backgroundColor: themeColors.bgSecondary,\r\n                          accentColor: formData.progress < 30 ? '#EF4444' : formData.progress < 70 ? '#F59E0B' : '#10B981',\r\n                        }}\r\n                        disabled={isLoading}\r\n                      />\r\n                      <span\r\n                        className=\"text-xs font-medium px-2 py-0.5 rounded-full min-w-[45px] text-center\"\r\n                        style={{\r\n                          backgroundColor: `${formData.progress < 30 ? '#EF4444' : formData.progress < 70 ? '#F59E0B' : '#10B981'}20`,\r\n                          color: formData.progress < 30 ? '#EF4444' : formData.progress < 70 ? '#F59E0B' : '#10B981',\r\n                        }}\r\n                      >\r\n                        {formData.progress}%\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Advanced Options - Collapsible */}\n                  {/* v0.17.227: Attachments moved inside advanced options for cleaner form */}\r\n                  <div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowAdvanced(!showAdvanced)}\r\n                      className=\"flex items-center gap-2 text-xs w-full py-2 transition-colors\"\r\n                      style={{ color: themeColors.textTertiary }}\r\n                    >\r\n                      <ChevronDown className={`w-3 h-3 transition-transform ${showAdvanced ? 'rotate-180' : ''}`} />\r\n                      Opciones avanzadas\r\n                    </button>\r\n\r\n                    <AnimatePresence>\r\n                      {showAdvanced && (\r\n                        <motion.div\r\n                          initial={{ height: 0, opacity: 0 }}\r\n                          animate={{ height: 'auto', opacity: 1 }}\r\n                          exit={{ height: 0, opacity: 0 }}\r\n                          className=\"overflow-hidden\"\r\n                        >\r\n                          <div className=\"pt-3 space-y-3\">\n                            {/* v0.17.227: Attachments Section - moved here for cleaner form */}\n                            {(onUploadAttachments || attachments.length > 0 || mode === 'create') && (\n                              <div>\n                                <div className=\"flex items-center gap-2 mb-2\">\n                                  <svg\n                                    width=\"16\"\n                                    height=\"16\"\n                                    viewBox=\"0 0 24 24\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    strokeWidth=\"2\"\n                                    style={{ color: themeColors.textTertiary }}\n                                  >\n                                    <path d=\"M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48\" />\n                                  </svg>\n                                  <span className=\"text-xs\" style={{ color: themeColors.textTertiary }}>\n                                    Adjuntos {mode === 'create'\n                                      ? (pendingFiles.length > 0 && `(${pendingFiles.length})`)\n                                      : (attachments.length > 0 && `(${attachments.length})`)}\n                                  </span>\n                                </div>\n                                {mode === 'create' ? (\n                                  <AttachmentUploader\n                                    cardId=\"pending\"\n                                    attachments={pendingFiles.map((file, idx) => ({\n                                      id: `pending-${idx}`,\n                                      cardId: 'pending',\n                                      name: file.name,\n                                      size: file.size,\n                                      type: file.type,\n                                      url: URL.createObjectURL(file),\n                                      uploadedAt: new Date().toISOString(),\n                                      uploadedBy: 'current-user',\n                                    }))}\n                                    onUpload={(files) => setPendingFiles(prev => [...prev, ...files])}\n                                    onDelete={(id) => {\n                                      const idx = parseInt(id.replace('pending-', ''), 10)\n                                      setPendingFiles(prev => prev.filter((_, i) => i !== idx))\n                                    }}\n                                    maxSizeMB={10}\n                                    maxFiles={20}\n                                  />\n                                ) : (\n                                  <AttachmentUploader\n                                    cardId={task?.id || 'new'}\n                                    attachments={attachments}\n                                    onUpload={onUploadAttachments && task?.id ? (files) => onUploadAttachments(task.id, files) : undefined}\n                                    onDelete={onDeleteAttachment}\n                                    maxSizeMB={10}\n                                    maxFiles={20}\n                                  />\n                                )}\n                                {mode === 'create' && pendingFiles.length > 0 && (\n                                  <p className=\"text-xs mt-1\" style={{ color: themeColors.textTertiary }}>\n                                    {pendingFiles.length} archivo(s) se subirn al crear la tarea\n                                  </p>\n                                )}\n                              </div>\n                            )}\n\n\r\n                            {/* Milestone */}\r\n                            <label className=\"flex items-center gap-3 cursor-pointer p-2 rounded-lg transition-colors hover:bg-white/5\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={formData.isMilestone}\r\n                                onChange={(e) => handleChange('isMilestone', e.target.checked)}\r\n                                className=\"w-4 h-4 rounded\"\r\n                                style={{ accentColor: themeColors.accent }}\r\n                                disabled={isLoading}\r\n                              />\r\n                              <MilestoneIcon className=\"w-4 h-4 text-yellow-500\" />\r\n                              <span className=\"text-sm\" style={{ color: themeColors.textPrimary }}>Marcar como hito</span>\r\n                            </label>\r\n\r\n                            {/* Dependencies */}\r\n                            {availableTasks.length > 0 && (\r\n                              <div>\r\n                                <label className=\"flex items-center gap-2 text-xs mb-2\" style={{ color: themeColors.textTertiary }}>\r\n                                  <Link2 className=\"w-3.5 h-3.5\" />\r\n                                  Dependencias\r\n                                </label>\r\n                                <div className=\"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto p-2 rounded-lg\" style={{ backgroundColor: themeColors.bgSecondary }}>\r\n                                  {availableTasks.filter(t => t.id !== task?.id).map((t) => {\r\n                                    const isSelected = formData.dependencies?.includes(t.id)\r\n                                    return (\r\n                                      <button\r\n                                        key={t.id}\r\n                                        type=\"button\"\r\n                                        onClick={() => {\r\n                                          const newDeps = isSelected\r\n                                            ? (formData.dependencies || []).filter(id => id !== t.id)\r\n                                            : [...(formData.dependencies || []), t.id]\r\n                                          handleChange('dependencies', newDeps)\r\n                                        }}\r\n                                        className=\"px-2 py-1 rounded-full text-xs transition-colors\"\r\n                                        style={{\r\n                                          backgroundColor: isSelected ? `${themeColors.accent}30` : themeColors.bgPrimary,\r\n                                          color: isSelected ? themeColors.accent : themeColors.textSecondary,\r\n                                          border: `1px solid ${isSelected ? themeColors.accent : themeColors.borderLight}`,\r\n                                        }}\r\n                                        disabled={isLoading}\r\n                                      >\r\n                                        {t.name}\r\n                                      </button>\r\n                                    )\r\n                                  })}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </motion.div>\r\n                      )}\r\n                    </AnimatePresence>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Footer - Simplified */}\r\n                <div className=\"flex items-center justify-end gap-2 px-5 py-3\" style={{ borderTop: `1px solid ${themeColors.border}` }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={onClose}\r\n                    className=\"px-4 py-2 text-sm rounded-lg transition-colors\"\r\n                    style={{ color: themeColors.textSecondary }}\r\n                    onMouseEnter={(e) => (e.currentTarget.style.backgroundColor = themeColors.hoverBg)}\r\n                    onMouseLeave={(e) => (e.currentTarget.style.backgroundColor = 'transparent')}\r\n                    disabled={isLoading}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={isLoading}\r\n                    className=\"px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-2\"\r\n                    style={{ backgroundColor: themeColors.accent, color: '#FFF' }}\r\n                    onMouseEnter={(e) => !isLoading && (e.currentTarget.style.opacity = '0.9')}\r\n                    onMouseLeave={(e) => !isLoading && (e.currentTarget.style.opacity = '1')}\r\n                  >\r\n                    {isLoading ? (\r\n                      <><div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />Guardando...</>\r\n                    ) : (\r\n                      <>{mode === 'create' ? 'Crear tarea' : 'Guardar'}</>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n","/**\r\n * AI Command Parser for Gantt Chart\r\n * Parses natural language commands and converts them to task operations\r\n *\r\n * This module provides utilities for parsing AI responses and generating\r\n * prompts for natural language task editing.\r\n *\r\n * @version 0.14.0\r\n */\r\n\r\nimport { Task, AICommandResult } from './types';\r\n\r\n/**\r\n * System prompt for the AI model to understand Gantt task commands\r\n */\r\nexport const GANTT_AI_SYSTEM_PROMPT = `You are a Gantt chart AI assistant. You help users edit project tasks using natural language commands.\r\n\r\nAVAILABLE COMMANDS:\r\n1. move_task - Move a task to a different date\r\n2. resize_task - Change task duration (extend/shorten)\r\n3. rename_task - Rename a task\r\n4. delete_task - Delete a task\r\n5. create_task - Create a new task\r\n6. link_tasks - Create dependency between tasks\r\n7. unlink_tasks - Remove dependency\r\n8. assign_task - Assign users to task\r\n9. set_progress - Update task progress (0-100%)\r\n10. set_status - Change task status (todo, in-progress, completed)\r\n\r\nRESPONSE FORMAT (JSON):\r\n{\r\n  \"type\": \"command_type\",\r\n  \"taskId\": \"id of the task to modify (if found)\",\r\n  \"taskName\": \"name of the task mentioned\",\r\n  \"updates\": { /* partial task updates */ },\r\n  \"newTask\": { /* for create_task only */ },\r\n  \"dependencyFrom\": \"source task id (for link/unlink)\",\r\n  \"dependencyTo\": \"target task id (for link/unlink)\",\r\n  \"message\": \"Human-readable response explaining what was done\",\r\n  \"success\": true/false,\r\n  \"error\": \"error message if failed\"\r\n}\r\n\r\nEXAMPLES:\r\n- \"Move Design to next Monday\" -> move_task with startDate update\r\n- \"Extend Testing by 3 days\" -> resize_task with endDate update\r\n- \"Rename 'Old Task' to 'New Task'\" -> rename_task with name update\r\n- \"Set Development progress to 50%\" -> set_progress with progress: 50\r\n- \"Link Design to Development\" -> link_tasks\r\n- \"Create a new task called 'Review'\" -> create_task\r\n\r\nTASK DATA FORMAT:\r\nTasks have: id, name, startDate, endDate, progress, status, dependencies[], assignees[]\r\n\r\nAlways try to match task names case-insensitively and handle partial matches.\r\nIf you can't find a task by name, search through the provided task list.\r\nIf ambiguous, ask for clarification in the message field.`;\r\n\r\n/**\r\n * Generate the user prompt with current tasks context\r\n */\r\nexport function generateTasksContext(tasks: Task[]): string {\r\n  const flatTasks = flattenTasks(tasks);\r\n  const taskList = flatTasks\r\n    .map((t) => {\r\n      const start = t.startDate ? t.startDate.toISOString().split('T')[0] : 'no date';\r\n      const end = t.endDate ? t.endDate.toISOString().split('T')[0] : 'no date';\r\n      const deps = t.dependencies?.length ? `deps: [${t.dependencies.join(', ')}]` : '';\r\n      return `- ${t.id}: \"${t.name}\" (${start} to ${end}, ${t.progress}%, ${t.status || 'todo'}) ${deps}`;\r\n    })\r\n    .join('\\n');\r\n\r\n  return `CURRENT TASKS:\\n${taskList}\\n\\nToday's date: ${new Date().toISOString().split('T')[0]}`;\r\n}\r\n\r\n/**\r\n * Flatten nested tasks into a single array\r\n */\r\nfunction flattenTasks(tasks: Task[]): Task[] {\r\n  const result: Task[] = [];\r\n  const flatten = (taskList: Task[]) => {\r\n    for (const task of taskList) {\r\n      result.push(task);\r\n      if (task.subtasks?.length) {\r\n        flatten(task.subtasks);\r\n      }\r\n    }\r\n  };\r\n  flatten(tasks);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Find a task by name (case-insensitive, partial match)\r\n */\r\nexport function findTaskByName(tasks: Task[], name: string): Task | undefined {\r\n  const flatTasks = flattenTasks(tasks);\r\n  const normalizedName = name.toLowerCase().trim();\r\n\r\n  // Exact match first\r\n  const exact = flatTasks.find((t) => t.name.toLowerCase() === normalizedName);\r\n  if (exact) return exact;\r\n\r\n  // Partial match\r\n  const partial = flatTasks.find((t) => t.name.toLowerCase().includes(normalizedName));\r\n  if (partial) return partial;\r\n\r\n  // Fuzzy match (contains all words)\r\n  const words = normalizedName.split(/\\s+/);\r\n  return flatTasks.find((t) => {\r\n    const taskName = t.name.toLowerCase();\r\n    return words.every((word) => taskName.includes(word));\r\n  });\r\n}\r\n\r\n/**\r\n * Parse date from natural language\r\n */\r\nexport function parseNaturalDate(text: string, referenceDate = new Date()): Date | null {\r\n  const normalized = text.toLowerCase().trim();\r\n  const today = new Date(referenceDate);\r\n  today.setHours(0, 0, 0, 0);\r\n\r\n  // Today\r\n  if (normalized === 'today' || normalized === 'hoy') {\r\n    return today;\r\n  }\r\n\r\n  // Tomorrow\r\n  if (normalized === 'tomorrow' || normalized === 'maana') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() + 1);\r\n    return date;\r\n  }\r\n\r\n  // Yesterday\r\n  if (normalized === 'yesterday' || normalized === 'ayer') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() - 1);\r\n    return date;\r\n  }\r\n\r\n  // Next week\r\n  if (normalized === 'next week' || normalized === 'la prxima semana') {\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() + 7);\r\n    return date;\r\n  }\r\n\r\n  // Day of week (next Monday, next Tuesday, etc.)\r\n  const dayMatch = normalized.match(/(?:next\\s+)?(monday|tuesday|wednesday|thursday|friday|saturday|sunday|lunes|martes|mircoles|miercoles|jueves|viernes|sbado|sabado|domingo)/i);\r\n  if (dayMatch) {\r\n    const dayNames: Record<string, number> = {\r\n      sunday: 0, domingo: 0,\r\n      monday: 1, lunes: 1,\r\n      tuesday: 2, martes: 2,\r\n      wednesday: 3, mircoles: 3, miercoles: 3,\r\n      thursday: 4, jueves: 4,\r\n      friday: 5, viernes: 5,\r\n      saturday: 6, sbado: 6, sabado: 6,\r\n    };\r\n    const targetDay = dayNames[dayMatch[1]!.toLowerCase()];\r\n    if (targetDay !== undefined) {\r\n      const date = new Date(today);\r\n      const currentDay = date.getDay();\r\n      let daysToAdd = targetDay - currentDay;\r\n      if (daysToAdd <= 0) daysToAdd += 7; // Always next occurrence\r\n      date.setDate(date.getDate() + daysToAdd);\r\n      return date;\r\n    }\r\n  }\r\n\r\n  // In X days/weeks/months\r\n  const inMatch = normalized.match(/in\\s+(\\d+)\\s+(day|week|month|da|dias|semana|semanas|mes|meses)s?/i);\r\n  if (inMatch && inMatch[1] && inMatch[2]) {\r\n    const amount = parseInt(inMatch[1], 10);\r\n    const unit = inMatch[2].toLowerCase();\r\n    const date = new Date(today);\r\n\r\n    if (unit === 'day' || unit === 'da' || unit === 'dias') {\r\n      date.setDate(date.getDate() + amount);\r\n    } else if (unit === 'week' || unit === 'semana' || unit === 'semanas') {\r\n      date.setDate(date.getDate() + amount * 7);\r\n    } else if (unit === 'month' || unit === 'mes' || unit === 'meses') {\r\n      date.setMonth(date.getMonth() + amount);\r\n    }\r\n    return date;\r\n  }\r\n\r\n  // ISO date (YYYY-MM-DD)\r\n  const isoMatch = normalized.match(/(\\d{4})-(\\d{2})-(\\d{2})/);\r\n  if (isoMatch) {\r\n    return new Date(normalized);\r\n  }\r\n\r\n  // DD/MM/YYYY or MM/DD/YYYY\r\n  const dateMatch = normalized.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\r\n  if (dateMatch && dateMatch[1] && dateMatch[2] && dateMatch[3]) {\r\n    // Assume DD/MM/YYYY for non-US locales\r\n    const day = parseInt(dateMatch[1], 10);\r\n    const month = parseInt(dateMatch[2], 10) - 1;\r\n    const year = parseInt(dateMatch[3], 10);\r\n    return new Date(year, month, day);\r\n  }\r\n\r\n  // Spanish date format: \"1 de diciembre de 2025\", \"15 de enero\", \"20 de marzo de 2024\"\r\n  const spanishMonths: Record<string, number> = {\r\n    enero: 0, febrero: 1, marzo: 2, abril: 3, mayo: 4, junio: 5,\r\n    julio: 6, agosto: 7, septiembre: 8, octubre: 9, noviembre: 10, diciembre: 11,\r\n  };\r\n  const spanishDateMatch = normalized.match(/(\\d{1,2})\\s+de\\s+(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)(?:\\s+de\\s+(\\d{4}))?/i);\r\n  if (spanishDateMatch && spanishDateMatch[1] && spanishDateMatch[2]) {\r\n    const day = parseInt(spanishDateMatch[1], 10);\r\n    const month = spanishMonths[spanishDateMatch[2].toLowerCase()];\r\n    const year = spanishDateMatch[3] ? parseInt(spanishDateMatch[3], 10) : today.getFullYear();\r\n    if (month !== undefined) {\r\n      return new Date(year, month, day);\r\n    }\r\n  }\r\n\r\n  // English date format: \"December 1, 2025\", \"January 15\", \"March 20 2024\"\r\n  const englishMonths: Record<string, number> = {\r\n    january: 0, february: 1, march: 2, april: 3, may: 4, june: 5,\r\n    july: 6, august: 7, september: 8, october: 9, november: 10, december: 11,\r\n  };\r\n  const englishDateMatch = normalized.match(/(january|february|march|april|may|june|july|august|september|october|november|december)\\s+(\\d{1,2})(?:,?\\s+(\\d{4}))?/i);\r\n  if (englishDateMatch && englishDateMatch[1] && englishDateMatch[2]) {\r\n    const month = englishMonths[englishDateMatch[1].toLowerCase()];\r\n    const day = parseInt(englishDateMatch[2], 10);\r\n    const year = englishDateMatch[3] ? parseInt(englishDateMatch[3], 10) : today.getFullYear();\r\n    if (month !== undefined) {\r\n      return new Date(year, month, day);\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse duration from natural language\r\n */\r\nexport function parseNaturalDuration(text: string): number | null {\r\n  const normalized = text.toLowerCase().trim();\r\n\r\n  // X days/weeks/months\r\n  const match = normalized.match(/(\\d+)\\s*(day|week|month|da|dias|semana|semanas|mes|meses)s?/i);\r\n  if (match && match[1] && match[2]) {\r\n    const amount = parseInt(match[1], 10);\r\n    const unit = match[2].toLowerCase();\r\n\r\n    if (unit === 'day' || unit === 'da' || unit === 'dias') {\r\n      return amount;\r\n    } else if (unit === 'week' || unit === 'semana' || unit === 'semanas') {\r\n      return amount * 7;\r\n    } else if (unit === 'month' || unit === 'mes' || unit === 'meses') {\r\n      return amount * 30;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse progress percentage from natural language\r\n */\r\nexport function parseProgress(text: string): number | null {\r\n  const match = text.match(/(\\d+)(?:\\s*%)?/);\r\n  if (match && match[1]) {\r\n    const value = parseInt(match[1], 10);\r\n    return Math.max(0, Math.min(100, value));\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * Parse task status from natural language\r\n */\r\nexport function parseStatus(text: string): 'todo' | 'in-progress' | 'completed' | null {\r\n  const normalized = text.toLowerCase().trim();\r\n\r\n  if (normalized.includes('todo') || normalized.includes('pendiente') || normalized.includes('por hacer')) {\r\n    return 'todo';\r\n  }\r\n  if (normalized.includes('in progress') || normalized.includes('in-progress') || normalized.includes('en progreso') || normalized.includes('working') || normalized.includes('trabajando')) {\r\n    return 'in-progress';\r\n  }\r\n  if (normalized.includes('done') || normalized.includes('complete') || normalized.includes('finished') || normalized.includes('completado') || normalized.includes('terminado') || normalized.includes('hecho')) {\r\n    return 'completed';\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Local command parser (for offline/simple commands without AI)\r\n * This can handle basic commands without needing an AI API call\r\n */\r\nexport function parseLocalCommand(command: string, tasks: Task[]): AICommandResult | null {\r\n  const normalized = command.toLowerCase().trim();\r\n\r\n  // Move task pattern: \"move X to Y\" or \"mueve la tarea X a la fecha Y\"\r\n  // Handles: \"move Task to Monday\", \"mover Diseo a prximo lunes\", \"mueve la tarea Fase 1 a la fecha 1 de diciembre\"\r\n  const moveMatch = normalized.match(/(?:move|mover|mueve)\\s+(?:la\\s+tarea\\s+)?[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|para)\\s+(?:la\\s+fecha\\s+)?(.+)/i);\r\n  if (moveMatch && moveMatch[1] && moveMatch[2]) {\r\n    const taskName = moveMatch[1].trim();\r\n    const dateText = moveMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const newDate = parseNaturalDate(dateText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'move_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\". Please check the task name and try again.`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (!newDate) {\r\n      return {\r\n        type: 'move_task',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the date \"${dateText}\". Try using formats like \"next Monday\", \"in 3 days\", or \"2024-01-15\".`,\r\n        success: false,\r\n        error: 'Invalid date',\r\n      };\r\n    }\r\n\r\n    // Calculate new end date maintaining duration\r\n    const duration = task.startDate && task.endDate\r\n      ? Math.round((task.endDate.getTime() - task.startDate.getTime()) / (1000 * 60 * 60 * 24))\r\n      : 1;\r\n    const newEndDate = new Date(newDate);\r\n    newEndDate.setDate(newEndDate.getDate() + duration);\r\n\r\n    return {\r\n      type: 'move_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: {\r\n        startDate: newDate,\r\n        endDate: newEndDate,\r\n      },\r\n      message: `Moved \"${task.name}\" to ${newDate.toLocaleDateString()}.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Extend task pattern: \"extend X by Y days\"\r\n  const extendMatch = normalized.match(/(?:extend|extender|extiende|alargar)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:by|por)\\s+(.+)/i);\r\n  if (extendMatch && extendMatch[1] && extendMatch[2]) {\r\n    const taskName = extendMatch[1].trim();\r\n    const durationText = extendMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const days = parseNaturalDuration(durationText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'resize_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (!days || !task.endDate) {\r\n      return {\r\n        type: 'resize_task',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the duration \"${durationText}\".`,\r\n        success: false,\r\n        error: 'Invalid duration',\r\n      };\r\n    }\r\n\r\n    const newEndDate = new Date(task.endDate);\r\n    newEndDate.setDate(newEndDate.getDate() + days);\r\n\r\n    return {\r\n      type: 'resize_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { endDate: newEndDate },\r\n      message: `Extended \"${task.name}\" by ${days} days. New end date: ${newEndDate.toLocaleDateString()}.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Set progress pattern: \"set X progress to Y%\"\r\n  const progressMatch = normalized.match(/(?:set|establecer|poner)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:progress|progreso)\\s+(?:to|a|en)\\s+(.+)/i);\r\n  if (progressMatch && progressMatch[1] && progressMatch[2]) {\r\n    const taskName = progressMatch[1].trim();\r\n    const progressText = progressMatch[2].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n    const progress = parseProgress(progressText);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'set_progress',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    if (progress === null) {\r\n      return {\r\n        type: 'set_progress',\r\n        taskId: task.id,\r\n        taskName: task.name,\r\n        message: `Could not parse the progress value \"${progressText}\".`,\r\n        success: false,\r\n        error: 'Invalid progress',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'set_progress',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { progress },\r\n      message: `Set \"${task.name}\" progress to ${progress}%.`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Rename pattern: \"rename X to Y\"\r\n  const renameMatch = normalized.match(/(?:rename|renombrar|cambiar nombre de)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|por)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (renameMatch && renameMatch[1] && renameMatch[2]) {\r\n    const oldName = renameMatch[1].trim();\r\n    const newName = renameMatch[2].trim();\r\n    const task = findTaskByName(tasks, oldName);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'rename_task',\r\n        taskName: oldName,\r\n        message: `Could not find a task named \"${oldName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'rename_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      updates: { name: newName },\r\n      message: `Renamed \"${task.name}\" to \"${newName}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Link tasks pattern: \"link X to Y\"\r\n  const linkMatch = normalized.match(/(?:link|vincular|conectar)\\s+[\"\"\"]?(.+?)[\"\"\"]?\\s+(?:to|a|con)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (linkMatch && linkMatch[1] && linkMatch[2]) {\r\n    const fromName = linkMatch[1].trim();\r\n    const toName = linkMatch[2].trim();\r\n    const fromTask = findTaskByName(tasks, fromName);\r\n    const toTask = findTaskByName(tasks, toName);\r\n\r\n    if (!fromTask) {\r\n      return {\r\n        type: 'link_tasks',\r\n        taskName: fromName,\r\n        message: `Could not find a task named \"${fromName}\".`,\r\n        success: false,\r\n        error: 'Source task not found',\r\n      };\r\n    }\r\n\r\n    if (!toTask) {\r\n      return {\r\n        type: 'link_tasks',\r\n        taskName: toName,\r\n        message: `Could not find a task named \"${toName}\".`,\r\n        success: false,\r\n        error: 'Target task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'link_tasks',\r\n      taskId: toTask.id,\r\n      taskName: toTask.name,\r\n      dependencyFrom: fromTask.id,\r\n      dependencyTo: toTask.id,\r\n      message: `Linked \"${fromTask.name}\"  \"${toTask.name}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // Delete pattern: \"delete X\"\r\n  const deleteMatch = normalized.match(/(?:delete|eliminar|borrar|remove|quitar)\\s+[\"\"\"]?(.+?)[\"\"\"]?$/i);\r\n  if (deleteMatch && deleteMatch[1]) {\r\n    const taskName = deleteMatch[1].trim();\r\n    const task = findTaskByName(tasks, taskName);\r\n\r\n    if (!task) {\r\n      return {\r\n        type: 'delete_task',\r\n        taskName,\r\n        message: `Could not find a task named \"${taskName}\".`,\r\n        success: false,\r\n        error: 'Task not found',\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'delete_task',\r\n      taskId: task.id,\r\n      taskName: task.name,\r\n      message: `Deleted \"${task.name}\".`,\r\n      success: true,\r\n    };\r\n  }\r\n\r\n  // No local pattern matched - return null to indicate AI should handle it\r\n  return null;\r\n}\r\n\r\n/**\r\n * Validate and sanitize AI response\r\n */\r\nexport function validateAIResponse(response: unknown): AICommandResult {\r\n  if (!response || typeof response !== 'object') {\r\n    return {\r\n      type: 'unknown',\r\n      message: 'Invalid response from AI',\r\n      success: false,\r\n      error: 'Invalid response format',\r\n    };\r\n  }\r\n\r\n  const r = response as Record<string, unknown>;\r\n\r\n  return {\r\n    type: (r.type as AICommandResult['type']) || 'unknown',\r\n    taskId: typeof r.taskId === 'string' ? r.taskId : undefined,\r\n    taskName: typeof r.taskName === 'string' ? r.taskName : undefined,\r\n    updates: r.updates as Partial<Task> | undefined,\r\n    newTask: r.newTask as Task | undefined,\r\n    dependencyFrom: typeof r.dependencyFrom === 'string' ? r.dependencyFrom : undefined,\r\n    dependencyTo: typeof r.dependencyTo === 'string' ? r.dependencyTo : undefined,\r\n    message: typeof r.message === 'string' ? r.message : 'Command processed',\r\n    success: typeof r.success === 'boolean' ? r.success : false,\r\n    error: typeof r.error === 'string' ? r.error : undefined,\r\n  };\r\n}\r\n","/**\r\n * Type adapters for converting between ASAKAA Card types and Gantt Task types\r\n * @module Gantt/adapters\r\n */\r\n\r\nimport type { Card } from '../../types'\r\nimport type { Task, Assignee } from './types'\r\n\r\n/**\r\n * Maps ASAKAA CardStatus to Gantt task status\r\n */\r\nfunction mapCardStatusToTaskStatus(\r\n  status?: string\r\n): 'todo' | 'in-progress' | 'completed' | undefined {\r\n  if (!status) return undefined\r\n\r\n  switch (status.toUpperCase()) {\r\n    case 'TODO':\r\n    case 'BLOCKED':\r\n      return 'todo'\r\n    case 'IN_PROGRESS':\r\n    case 'REVIEW':\r\n      return 'in-progress'\r\n    case 'DONE':\r\n      return 'completed'\r\n    default:\r\n      return 'todo'\r\n  }\r\n}\r\n\r\n/**\r\n * Maps Gantt task status to ASAKAA CardStatus\r\n * v0.17.54: Updated to accept string for custom statuses\r\n */\r\nfunction mapTaskStatusToCardStatus(\r\n  status?: string\r\n): string {\r\n  // Default statuses map to card statuses\r\n  switch (status) {\r\n    case 'todo':\r\n      return 'TODO'\r\n    case 'in-progress':\r\n      return 'IN_PROGRESS'\r\n    case 'completed':\r\n      return 'DONE'\r\n    default:\r\n      // v0.17.54: For custom statuses, return as-is (column ID)\r\n      return status || 'TODO'\r\n  }\r\n}\r\n\r\n/**\r\n * Converts an ASAKAA Card to a Gantt Task\r\n *\r\n * @param card - ASAKAA Card object\r\n * @param allCards - All cards in the board (for resolving subtasks)\r\n * @param users - Available users for assignee mapping\r\n * @returns Gantt Task object\r\n */\r\nexport function cardToGanttTask(\r\n  card: Card,\r\n  allCards: Card[] = [],\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Task {\r\n  // Map assignees\r\n  const assignees: Assignee[] | undefined = card.assignedUserIds\r\n    ?.map((userId) => {\r\n      const user = users.find((u) => u.id === userId)\r\n      if (!user) return null\r\n      return {\r\n        name: user.name,\r\n        initials: user.initials,\r\n        color: user.color,\r\n      }\r\n    })\r\n    .filter((a): a is Assignee => a !== null)\r\n\r\n  // Find subtasks (cards that reference this card as parent)\r\n  const subtasks: Task[] | undefined = allCards\r\n    .filter((c) => c.metadata?.parentCardId === card.id)\r\n    .map((c) => cardToGanttTask(c, allCards, users))\r\n\r\n  // Extract dependency IDs\r\n  let dependencies: string[] | undefined\r\n  if (card.dependencies) {\r\n    if (typeof card.dependencies[0] === 'string') {\r\n      // Legacy format: string[]\r\n      dependencies = card.dependencies as string[]\r\n    } else {\r\n      // New format: Dependency[] - only use finish-to-start\r\n      dependencies = (card.dependencies as any[])\r\n        .filter((dep) => dep.type === 'finish-to-start')\r\n        .map((dep) => dep.taskId)\r\n    }\r\n  }\r\n\r\n  // Parse dates (handle both Date and string) - allow undefined for tasks without dates\r\n  const parseDate = (date: Date | string | undefined): Date | undefined => {\r\n    if (!date) return undefined\r\n    return typeof date === 'string' ? new Date(date) : date\r\n  }\r\n\r\n  const startDate = parseDate(card.startDate)\r\n  const endDate = parseDate(card.endDate)\r\n\r\n  // Determine if this is a milestone (0 or 1 day duration, or explicitly marked)\r\n  const isMilestone = card.metadata?.isMilestone === true ||\r\n    (startDate && endDate && Math.abs(endDate.getTime() - startDate.getTime()) <= 86400000)\r\n\r\n  return {\r\n    id: card.id,\r\n    name: card.title,\r\n    startDate,\r\n    endDate,\r\n    progress: card.progress || 0,\r\n    status: mapCardStatusToTaskStatus(card.metadata?.status as string),\r\n    assignees: assignees?.length ? assignees : undefined,\r\n    dependencies: dependencies?.length ? dependencies : undefined,\r\n    subtasks: subtasks?.length ? subtasks : undefined,\r\n    isExpanded: card.metadata?.isExpanded === true,\r\n    isMilestone,\r\n    isCriticalPath: card.metadata?.isCriticalPath === true,\r\n  }\r\n}\r\n\r\n/**\r\n * Converts a Gantt Task back to an ASAKAA Card (partial update)\r\n * Note: This only returns the fields that Gantt can modify\r\n *\r\n * @param task - Gantt Task object\r\n * @param users - Available users for reverse mapping assignees to userIds\r\n * @returns Partial Card update object\r\n */\r\nexport function ganttTaskToCardUpdate(\r\n  task: Task,\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Partial<Card> {\r\n  // Convert assignees back to userIds\r\n  let assignedUserIds: string[] | undefined\r\n  if (task.assignees && task.assignees.length > 0) {\r\n    assignedUserIds = task.assignees\r\n      .map((assignee) => {\r\n        // Find user by name or initials\r\n        const user = users.find(\r\n          (u) => u.name === assignee.name || u.initials === assignee.initials\r\n        )\r\n        return user?.id\r\n      })\r\n      .filter((id): id is string => id !== undefined)\r\n  }\r\n\r\n  return {\r\n    id: task.id,\r\n    title: task.name,\r\n    startDate: task.startDate,\r\n    endDate: task.endDate,\r\n    progress: task.progress,\r\n    assignedUserIds: assignedUserIds?.length ? assignedUserIds : undefined,\r\n    metadata: {\r\n      status: mapTaskStatusToCardStatus(task.status),\r\n      isExpanded: task.isExpanded,\r\n      isMilestone: task.isMilestone,\r\n      isCriticalPath: task.isCriticalPath,\r\n    },\r\n  }\r\n}\r\n\r\n/**\r\n * Converts an array of Cards to an array of Gantt Tasks\r\n *\r\n * @param cards - Array of ASAKAA Card objects\r\n * @param users - Available users for assignee mapping\r\n * @returns Array of Gantt Task objects\r\n */\r\nexport function cardsToGanttTasks(\r\n  cards: Card[],\r\n  users: Array<{ id: string; name: string; initials: string; color: string }> = []\r\n): Task[] {\r\n  // Filter out cards that are subtasks (have parentCardId)\r\n  const topLevelCards = cards.filter((c) => !c.metadata?.parentCardId)\r\n\r\n  return topLevelCards.map((card) => cardToGanttTask(card, cards, users))\r\n}\r\n","/**\r\n * Internationalization (i18n) for ListView\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { ListViewTranslations } from './types';\r\n\r\nexport type ListViewSupportedLocale = 'en' | 'es';\r\n\r\n/**\r\n * English translations\r\n */\r\nexport const en: ListViewTranslations = {\r\n  columns: {\r\n    name: 'Task Name',\r\n    startDate: 'Start Date',\r\n    endDate: 'End Date',\r\n    progress: 'Progress',\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    priority: 'Priority',\r\n    actions: 'Actions',\r\n  },\r\n\r\n  toolbar: {\r\n    search: 'Search',\r\n    searchPlaceholder: 'Search tasks...',\r\n    filter: 'Filter',\r\n    clearFilters: 'Clear Filters',\r\n    export: 'Export',\r\n    columns: 'Columns',\r\n    newTask: 'New Task',\r\n  },\r\n\r\n  filters: {\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    dateRange: 'Date Range',\r\n    showCompleted: 'Show Completed',\r\n    all: 'All',\r\n    none: 'None',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Edit',\r\n    delete: 'Delete',\r\n    duplicate: 'Duplicate',\r\n    viewDetails: 'View Details',\r\n  },\r\n\r\n  empty: {\r\n    noTasks: 'No tasks yet',\r\n    noResults: 'No tasks match your filters',\r\n    addFirstTask: 'Add your first task',\r\n  },\r\n\r\n  pagination: {\r\n    showing: 'Showing',\r\n    of: 'of',\r\n    tasks: 'tasks',\r\n    previous: 'Previous',\r\n    next: 'Next',\r\n  },\r\n\r\n  bulk: {\r\n    selected: 'selected',\r\n    delete: 'Delete',\r\n    move: 'Move to',\r\n    assignTo: 'Assign to',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: ListViewTranslations = {\r\n  columns: {\r\n    name: 'Nombre de Tarea',\r\n    startDate: 'Fecha Inicio',\r\n    endDate: 'Fecha Fin',\r\n    progress: 'Progreso',\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    priority: 'Prioridad',\r\n    actions: 'Acciones',\r\n  },\r\n\r\n  toolbar: {\r\n    search: 'Buscar',\r\n    searchPlaceholder: 'Buscar tareas...',\r\n    filter: 'Filtrar',\r\n    clearFilters: 'Limpiar Filtros',\r\n    export: 'Exportar',\r\n    columns: 'Columnas',\r\n    newTask: 'Nueva Tarea',\r\n  },\r\n\r\n  filters: {\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    dateRange: 'Rango de Fechas',\r\n    showCompleted: 'Mostrar Completadas',\r\n    all: 'Todos',\r\n    none: 'Ninguno',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  actions: {\r\n    edit: 'Editar',\r\n    delete: 'Eliminar',\r\n    duplicate: 'Duplicar',\r\n    viewDetails: 'Ver Detalles',\r\n  },\r\n\r\n  empty: {\r\n    noTasks: 'Sin tareas an',\r\n    noResults: 'Ninguna tarea coincide con los filtros',\r\n    addFirstTask: 'Agrega tu primera tarea',\r\n  },\r\n\r\n  pagination: {\r\n    showing: 'Mostrando',\r\n    of: 'de',\r\n    tasks: 'tareas',\r\n    previous: 'Anterior',\r\n    next: 'Siguiente',\r\n  },\r\n\r\n  bulk: {\r\n    selected: 'seleccionadas',\r\n    delete: 'Eliminar',\r\n    move: 'Mover a',\r\n    assignTo: 'Asignar a',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const listViewTranslations: Record<ListViewSupportedLocale, ListViewTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n */\r\nexport function getListViewTranslations(locale: ListViewSupportedLocale | string): ListViewTranslations {\r\n  return listViewTranslations[locale as ListViewSupportedLocale] || listViewTranslations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n */\r\nexport function mergeListViewTranslations(\r\n  locale: ListViewSupportedLocale | string,\r\n  customTranslations?: Partial<ListViewTranslations>\r\n): ListViewTranslations {\r\n  const base = getListViewTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    columns: { ...base.columns, ...customTranslations.columns },\r\n    toolbar: { ...base.toolbar, ...customTranslations.toolbar },\r\n    filters: { ...base.filters, ...customTranslations.filters },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    actions: { ...base.actions, ...customTranslations.actions },\r\n    empty: { ...base.empty, ...customTranslations.empty },\r\n    pagination: { ...base.pagination, ...customTranslations.pagination },\r\n    bulk: { ...base.bulk, ...customTranslations.bulk },\r\n  };\r\n}\r\n","/**\r\n * StatusCell - Status dropdown cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { CheckCircle2, Circle, PlayCircle, ChevronDown } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface StatusCellProps {\r\n  value: string;\r\n  onChange?: (value: string) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n  translations: {\r\n    todo: string;\r\n    inProgress: string;\r\n    completed: string;\r\n  };\r\n  disabled?: boolean;\r\n}\r\n\r\nconst STATUS_OPTIONS = [\r\n  { value: 'todo', icon: Circle, color: 'text-gray-400' },\r\n  { value: 'in-progress', icon: PlayCircle, color: 'text-blue-500' },\r\n  { value: 'completed', icon: CheckCircle2, color: 'text-green-500' },\r\n];\r\n\r\nexport function StatusCell({\r\n  value,\r\n  onChange,\r\n  isDark,\r\n  translations,\r\n  disabled = false,\r\n}: StatusCellProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  // Close on click outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const defaultStatus = STATUS_OPTIONS[0]!;\r\n  const currentStatus = STATUS_OPTIONS.find(s => s.value === value) ?? defaultStatus;\r\n  const Icon = currentStatus.icon;\r\n\r\n  const getLabel = (statusValue: string) => {\r\n    switch (statusValue) {\r\n      case 'completed': return translations.completed;\r\n      case 'in-progress': return translations.inProgress;\r\n      default: return translations.todo;\r\n    }\r\n  };\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Icon className={cn('w-4 h-4', currentStatus.color)} />\r\n        <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n          {getLabel(value)}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-2 px-2 py-1 rounded transition-colors',\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n        )}\r\n      >\r\n        <Icon className={cn('w-4 h-4', currentStatus.color)} />\r\n        <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n          {getLabel(value)}\r\n        </span>\r\n        <ChevronDown className={cn('w-3 h-3', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute z-50 top-full left-0 mt-1 py-1 rounded-lg shadow-lg border min-w-[140px]',\r\n            isDark ? 'bg-[#1F2937] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {STATUS_OPTIONS.map((option) => {\r\n            const OptionIcon = option.icon;\r\n            return (\r\n              <button\r\n                key={option.value}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onChange(option.value);\r\n                  setIsOpen(false);\r\n                }}\r\n                className={cn(\r\n                  'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\r\n                  isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                  value === option.value && (isDark ? 'bg-white/5' : 'bg-gray-50')\r\n                )}\r\n              >\r\n                <OptionIcon className={cn('w-4 h-4', option.color)} />\r\n                <span className={isDark ? 'text-white' : 'text-gray-900'}>\r\n                  {getLabel(option.value)}\r\n                </span>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * PriorityCell - Priority selector cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Flag, ChevronDown } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface PriorityCellProps {\r\n  value?: string;\r\n  onChange?: (value: string) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst PRIORITY_OPTIONS = [\r\n  { value: 'urgent', label: { en: 'Urgent', es: 'Urgente' }, color: 'text-red-500', bg: 'bg-red-500' },\r\n  { value: 'high', label: { en: 'High', es: 'Alta' }, color: 'text-orange-500', bg: 'bg-orange-500' },\r\n  { value: 'medium', label: { en: 'Medium', es: 'Media' }, color: 'text-yellow-500', bg: 'bg-yellow-500' },\r\n  { value: 'low', label: { en: 'Low', es: 'Baja' }, color: 'text-blue-500', bg: 'bg-blue-500' },\r\n  { value: 'none', label: { en: 'None', es: 'Ninguna' }, color: 'text-gray-400', bg: 'bg-gray-400' },\r\n];\r\n\r\nexport function PriorityCell({\r\n  value = 'none',\r\n  onChange,\r\n  isDark,\r\n  locale,\r\n  disabled = false,\r\n}: PriorityCellProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const currentPriority = PRIORITY_OPTIONS.find(p => p.value === value) ?? PRIORITY_OPTIONS[4]!;\r\n  const lang = locale === 'es' ? 'es' : 'en';\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <Flag className={cn('w-4 h-4', currentPriority.color)} />\r\n        <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n          {currentPriority.label[lang]}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-2 px-2 py-1 rounded transition-colors',\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n        )}\r\n      >\r\n        <Flag className={cn('w-4 h-4', currentPriority.color)} />\r\n        <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n          {currentPriority.label[lang]}\r\n        </span>\r\n        <ChevronDown className={cn('w-3 h-3', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute z-50 top-full left-0 mt-1 py-1 rounded-lg shadow-lg border min-w-[120px]',\r\n            isDark ? 'bg-[#1F2937] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {PRIORITY_OPTIONS.map((option) => (\r\n            <button\r\n              key={option.value}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onChange(option.value);\r\n                setIsOpen(false);\r\n              }}\r\n              className={cn(\r\n                'w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors',\r\n                isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                value === option.value && (isDark ? 'bg-white/5' : 'bg-gray-50')\r\n              )}\r\n            >\r\n              <div className={cn('w-2 h-2 rounded-full', option.bg)} />\r\n              <span className={isDark ? 'text-white' : 'text-gray-900'}>\r\n                {option.label[lang]}\r\n              </span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * AssigneesCell - User assignment cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { User, Plus, X, Check } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\nimport type { AvailableUser } from '../types';\r\n\r\n// Local type that matches Task.assignees inline definition (includes avatar)\r\ninterface TaskAssignee {\r\n  name: string;\r\n  avatar?: string;\r\n  initials: string;\r\n  color: string;\r\n}\r\n\r\ninterface AssigneesCellProps {\r\n  value?: TaskAssignee[];\r\n  availableUsers?: AvailableUser[];\r\n  onChange?: (assignees: TaskAssignee[]) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nfunction getInitials(name: string): string {\r\n  return name\r\n    .split(' ')\r\n    .map(n => n[0])\r\n    .join('')\r\n    .toUpperCase()\r\n    .slice(0, 2);\r\n}\r\n\r\nfunction getAvatarColor(name: string): string {\r\n  const colors = [\r\n    'bg-blue-500', 'bg-green-500', 'bg-purple-500', 'bg-pink-500',\r\n    'bg-yellow-500', 'bg-red-500', 'bg-indigo-500', 'bg-teal-500'\r\n  ];\r\n  let hash = 0;\r\n  for (let i = 0; i < name.length; i++) {\r\n    hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n  return colors[Math.abs(hash) % colors.length] ?? 'bg-blue-500';\r\n}\r\n\r\nexport function AssigneesCell({\r\n  value = [],\r\n  availableUsers = [],\r\n  onChange,\r\n  isDark,\r\n  locale,\r\n  disabled = false,\r\n}: AssigneesCellProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [search, setSearch] = useState('');\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n        setSearch('');\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const filteredUsers = availableUsers.filter(u =>\r\n    u.name.toLowerCase().includes(search.toLowerCase()) ||\r\n    u.email?.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  // Check if user is assigned by name (since Assignee type uses name, not id)\r\n  const isAssigned = (userName: string) => value.some(a => a.name === userName);\r\n\r\n  const handleToggleUser = (user: AvailableUser) => {\r\n    if (!onChange) return;\r\n\r\n    if (isAssigned(user.name)) {\r\n      onChange(value.filter(a => a.name !== user.name));\r\n    } else {\r\n      // Convert AvailableUser to TaskAssignee format\r\n      const newAssignee: TaskAssignee = {\r\n        name: user.name,\r\n        initials: getInitials(user.name),\r\n        color: user.color || getAvatarColor(user.name).replace('bg-', '').replace('-500', ''),\r\n        avatar: user.avatarUrl,\r\n      };\r\n      onChange([...value, newAssignee]);\r\n    }\r\n  };\r\n\r\n  // Display mode (no onChange or disabled)\r\n  if (disabled || !onChange) {\r\n    if (value.length === 0) {\r\n      return (\r\n        <span className={cn('text-sm', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n          -\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"flex items-center -space-x-2\">\r\n        {value.slice(0, 3).map((assignee, idx) => (\r\n          <div\r\n            key={`${assignee.name}-${idx}`}\r\n            className={cn(\r\n              'w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium text-white border-2',\r\n              isDark ? 'border-[#0F1117]' : 'border-white',\r\n              !assignee.avatar && getAvatarColor(assignee.name)\r\n            )}\r\n            style={assignee.color && !assignee.avatar ? { backgroundColor: assignee.color } : undefined}\r\n            title={assignee.name}\r\n          >\r\n            {assignee.avatar ? (\r\n              <img src={assignee.avatar} alt={assignee.name} className=\"w-full h-full rounded-full object-cover\" />\r\n            ) : (\r\n              assignee.initials || getInitials(assignee.name)\r\n            )}\r\n          </div>\r\n        ))}\r\n        {value.length > 3 && (\r\n          <div\r\n            className={cn(\r\n              'w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium border-2',\r\n              isDark ? 'bg-[#374151] border-[#0F1117] text-white' : 'bg-gray-200 border-white text-gray-600'\r\n            )}\r\n          >\r\n            +{value.length - 3}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-1 px-2 py-1 rounded transition-colors',\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n        )}\r\n      >\r\n        {value.length === 0 ? (\r\n          <>\r\n            <User className={cn('w-4 h-4', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n            <Plus className={cn('w-3 h-3', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n          </>\r\n        ) : (\r\n          <div className=\"flex items-center -space-x-1\">\r\n            {value.slice(0, 2).map((assignee, idx) => (\r\n              <div\r\n                key={`${assignee.name}-${idx}`}\r\n                className={cn(\r\n                  'w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-medium text-white border',\r\n                  isDark ? 'border-[#0F1117]' : 'border-white',\r\n                  !assignee.avatar && getAvatarColor(assignee.name)\r\n                )}\r\n                style={assignee.color && !assignee.avatar ? { backgroundColor: assignee.color } : undefined}\r\n              >\r\n                {assignee.avatar ? (\r\n                  <img src={assignee.avatar} alt={assignee.name} className=\"w-full h-full rounded-full object-cover\" />\r\n                ) : (\r\n                  assignee.initials || getInitials(assignee.name)\r\n                )}\r\n              </div>\r\n            ))}\r\n            {value.length > 2 && (\r\n              <span className={cn('text-xs ml-1', isDark ? 'text-[#9CA3AF]' : 'text-gray-500')}>\r\n                +{value.length - 2}\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute z-50 top-full left-0 mt-1 rounded-lg shadow-lg border w-64',\r\n            isDark ? 'bg-[#1F2937] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {/* Search */}\r\n          <div className=\"p-2 border-b\" style={{ borderColor: isDark ? 'rgba(255,255,255,0.1)' : '#E5E7EB' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              placeholder={locale === 'es' ? 'Buscar usuario...' : 'Search user...'}\r\n              className={cn(\r\n                'w-full px-3 py-1.5 text-sm rounded border outline-none',\r\n                isDark\r\n                  ? 'bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]'\r\n                  : 'bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400'\r\n              )}\r\n              onClick={(e) => e.stopPropagation()}\r\n            />\r\n          </div>\r\n\r\n          {/* User list */}\r\n          <div className=\"max-h-48 overflow-y-auto py-1\">\r\n            {filteredUsers.length === 0 ? (\r\n              <p className={cn('px-3 py-2 text-sm', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n                {locale === 'es' ? 'No se encontraron usuarios' : 'No users found'}\r\n              </p>\r\n            ) : (\r\n              filteredUsers.map((user) => (\r\n                <button\r\n                  key={user.id}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleToggleUser(user);\r\n                  }}\r\n                  className={cn(\r\n                    'w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors',\r\n                    isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n                  )}\r\n                >\r\n                  <div\r\n                    className={cn(\r\n                      'w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium text-white',\r\n                      !user.avatarUrl && getAvatarColor(user.name)\r\n                    )}\r\n                  >\r\n                    {user.avatarUrl ? (\r\n                      <img src={user.avatarUrl} alt={user.name} className=\"w-full h-full rounded-full object-cover\" />\r\n                    ) : (\r\n                      getInitials(user.name)\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1 text-left\">\r\n                    <div className={isDark ? 'text-white' : 'text-gray-900'}>{user.name}</div>\r\n                    {user.email && (\r\n                      <div className={cn('text-xs', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n                        {user.email}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  {isAssigned(user.name) && (\r\n                    <Check className=\"w-4 h-4 text-green-500\" />\r\n                  )}\r\n                </button>\r\n              ))\r\n            )}\r\n          </div>\r\n\r\n          {/* Selected users */}\r\n          {value.length > 0 && (\r\n            <div className=\"p-2 border-t flex flex-wrap gap-1\" style={{ borderColor: isDark ? 'rgba(255,255,255,0.1)' : '#E5E7EB' }}>\r\n              {value.map((assignee, idx) => (\r\n                <span\r\n                  key={`${assignee.name}-${idx}`}\r\n                  className={cn(\r\n                    'inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full',\r\n                    isDark ? 'bg-white/10 text-white' : 'bg-gray-100 text-gray-700'\r\n                  )}\r\n                >\r\n                  {assignee.name}\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onChange(value.filter(a => a.name !== assignee.name));\r\n                    }}\r\n                    className=\"hover:text-red-500\"\r\n                  >\r\n                    <X className=\"w-3 h-3\" />\r\n                  </button>\r\n                </span>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * DateCell - Date picker cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Calendar, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface DateCellProps {\r\n  value?: Date | string;\r\n  onChange?: (value: Date) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst MONTH_NAMES = {\r\n  en: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n  es: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],\r\n};\r\n\r\nconst DAY_NAMES = {\r\n  en: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\r\n  es: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'S'],\r\n};\r\n\r\nexport function DateCell({\r\n  value,\r\n  onChange,\r\n  isDark,\r\n  locale,\r\n  disabled = false,\r\n}: DateCellProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [viewDate, setViewDate] = useState(() => {\r\n    if (value) {\r\n      const d = value instanceof Date ? value : new Date(value);\r\n      return new Date(d.getFullYear(), d.getMonth(), 1);\r\n    }\r\n    return new Date(new Date().getFullYear(), new Date().getMonth(), 1);\r\n  });\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const dateValue = value ? (value instanceof Date ? value : new Date(value)) : null;\r\n  const lang = locale === 'es' ? 'es' : 'en';\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  const formatDate = (date: Date | null) => {\r\n    if (!date) return '-';\r\n    return date.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n    });\r\n  };\r\n\r\n  const getDaysInMonth = (year: number, month: number) => {\r\n    return new Date(year, month + 1, 0).getDate();\r\n  };\r\n\r\n  const getFirstDayOfMonth = (year: number, month: number) => {\r\n    return new Date(year, month, 1).getDay();\r\n  };\r\n\r\n  const renderCalendar = () => {\r\n    const year = viewDate.getFullYear();\r\n    const month = viewDate.getMonth();\r\n    const daysInMonth = getDaysInMonth(year, month);\r\n    const firstDay = getFirstDayOfMonth(year, month);\r\n    const today = new Date();\r\n\r\n    const days: React.ReactNode[] = [];\r\n\r\n    // Empty cells for days before the first day\r\n    for (let i = 0; i < firstDay; i++) {\r\n      days.push(<div key={`empty-${i}`} className=\"w-8 h-8\" />);\r\n    }\r\n\r\n    // Day cells\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      const date = new Date(year, month, day);\r\n      const isSelected = dateValue &&\r\n        dateValue.getDate() === day &&\r\n        dateValue.getMonth() === month &&\r\n        dateValue.getFullYear() === year;\r\n      const isToday =\r\n        today.getDate() === day &&\r\n        today.getMonth() === month &&\r\n        today.getFullYear() === year;\r\n\r\n      days.push(\r\n        <button\r\n          key={day}\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onChange?.(date);\r\n            setIsOpen(false);\r\n          }}\r\n          className={cn(\r\n            'w-8 h-8 rounded-full text-sm transition-colors',\r\n            isSelected\r\n              ? 'bg-[#3B82F6] text-white'\r\n              : isToday\r\n                ? isDark ? 'bg-white/10 text-white' : 'bg-gray-100 text-gray-900'\r\n                : isDark ? 'hover:bg-white/10 text-white' : 'hover:bg-gray-100 text-gray-900'\r\n          )}\r\n        >\r\n          {day}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return days;\r\n  };\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n        {formatDate(dateValue)}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-2 px-2 py-1 rounded transition-colors',\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n        )}\r\n      >\r\n        <Calendar className={cn('w-4 h-4', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n        <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n          {formatDate(dateValue)}\r\n        </span>\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute z-50 top-full left-0 mt-1 p-3 rounded-lg shadow-lg border',\r\n            isDark ? 'bg-[#1F2937] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {/* Month/Year header */}\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setViewDate(new Date(viewDate.getFullYear(), viewDate.getMonth() - 1, 1));\r\n              }}\r\n              className={cn('p-1 rounded', isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100')}\r\n            >\r\n              <ChevronLeft className={cn('w-4 h-4', isDark ? 'text-white' : 'text-gray-600')} />\r\n            </button>\r\n            <span className={cn('text-sm font-medium', isDark ? 'text-white' : 'text-gray-900')}>\r\n              {MONTH_NAMES[lang][viewDate.getMonth()]} {viewDate.getFullYear()}\r\n            </span>\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setViewDate(new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 1));\r\n              }}\r\n              className={cn('p-1 rounded', isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100')}\r\n            >\r\n              <ChevronRight className={cn('w-4 h-4', isDark ? 'text-white' : 'text-gray-600')} />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Day names */}\r\n          <div className=\"grid grid-cols-7 gap-1 mb-1\">\r\n            {DAY_NAMES[lang].map((day) => (\r\n              <div\r\n                key={day}\r\n                className={cn('w-8 h-6 text-xs flex items-center justify-center', isDark ? 'text-[#6B7280]' : 'text-gray-400')}\r\n              >\r\n                {day}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Calendar grid */}\r\n          <div className=\"grid grid-cols-7 gap-1\">\r\n            {renderCalendar()}\r\n          </div>\r\n\r\n          {/* Quick options */}\r\n          <div className=\"mt-3 pt-3 border-t flex gap-2\" style={{ borderColor: isDark ? 'rgba(255,255,255,0.1)' : '#E5E7EB' }}>\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                onChange?.(new Date());\r\n                setIsOpen(false);\r\n              }}\r\n              className={cn(\r\n                'flex-1 py-1.5 text-xs rounded',\r\n                isDark ? 'bg-white/10 text-white hover:bg-white/20' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              )}\r\n            >\r\n              {locale === 'es' ? 'Hoy' : 'Today'}\r\n            </button>\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                const tomorrow = new Date();\r\n                tomorrow.setDate(tomorrow.getDate() + 1);\r\n                onChange?.(tomorrow);\r\n                setIsOpen(false);\r\n              }}\r\n              className={cn(\r\n                'flex-1 py-1.5 text-xs rounded',\r\n                isDark ? 'bg-white/10 text-white hover:bg-white/20' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              )}\r\n            >\r\n              {locale === 'es' ? 'Maana' : 'Tomorrow'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ProgressCell - Progress bar cell for ListView\r\n */\r\n\r\nimport { cn } from '../../../utils';\r\n\r\ninterface ProgressCellProps {\r\n  value: number;\r\n  onChange?: (value: number) => void;\r\n  isDark: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function ProgressCell({\r\n  value = 0,\r\n  onChange,\r\n  isDark,\r\n  disabled = false,\r\n}: ProgressCellProps) {\r\n  const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (disabled || !onChange) return;\r\n\r\n    e.stopPropagation();\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const percentage = Math.round((x / rect.width) * 100);\r\n    const clampedValue = Math.max(0, Math.min(100, percentage));\r\n    onChange(clampedValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-2 w-full\">\r\n      <div\r\n        onClick={handleClick}\r\n        className={cn(\r\n          'flex-1 h-2 rounded-full overflow-hidden',\r\n          isDark ? 'bg-white/10' : 'bg-gray-200',\r\n          !disabled && onChange && 'cursor-pointer'\r\n        )}\r\n      >\r\n        <div\r\n          className={cn(\r\n            'h-full rounded-full transition-all',\r\n            value === 100 ? 'bg-green-500' : 'bg-[#3B82F6]'\r\n          )}\r\n          style={{ width: `${value}%` }}\r\n        />\r\n      </div>\r\n      <span className={cn('text-xs w-8 text-right', isDark ? 'text-[#9CA3AF]' : 'text-gray-500')}>\r\n        {value}%\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * TextCell - Editable text cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface TextCellProps {\r\n  value?: string;\r\n  onChange?: (value: string) => void;\r\n  isDark: boolean;\r\n  placeholder?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function TextCell({\r\n  value = '',\r\n  onChange,\r\n  isDark,\r\n  placeholder = '-',\r\n  disabled = false,\r\n}: TextCellProps) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(value);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus();\r\n      inputRef.current.select();\r\n    }\r\n  }, [isEditing]);\r\n\r\n  useEffect(() => {\r\n    setEditValue(value);\r\n  }, [value]);\r\n\r\n  const handleSave = () => {\r\n    if (editValue !== value) {\r\n      onChange?.(editValue);\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSave();\r\n    } else if (e.key === 'Escape') {\r\n      setEditValue(value);\r\n      setIsEditing(false);\r\n    }\r\n  };\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <span className={cn('text-sm truncate', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n        {value || placeholder}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={editValue}\r\n        onChange={(e) => setEditValue(e.target.value)}\r\n        onBlur={handleSave}\r\n        onKeyDown={handleKeyDown}\r\n        onClick={(e) => e.stopPropagation()}\r\n        className={cn(\r\n          'w-full px-2 py-1 text-sm rounded border outline-none',\r\n          isDark\r\n            ? 'bg-white/5 border-[#3B82F6] text-white'\r\n            : 'bg-white border-[#3B82F6] text-gray-900'\r\n        )}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        setIsEditing(true);\r\n      }}\r\n      className={cn(\r\n        'text-sm truncate text-left w-full px-2 py-1 rounded transition-colors',\r\n        isDark ? 'text-[#94A3B8] hover:bg-white/10' : 'text-gray-500 hover:bg-gray-100',\r\n        !value && (isDark ? 'text-[#6B7280]' : 'text-gray-400')\r\n      )}\r\n    >\r\n      {value || placeholder}\r\n    </button>\r\n  );\r\n}\r\n","/**\r\n * NumberCell - Editable number cell for ListView\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface NumberCellProps {\r\n  value?: number;\r\n  onChange?: (value: number) => void;\r\n  isDark: boolean;\r\n  placeholder?: string;\r\n  min?: number;\r\n  max?: number;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function NumberCell({\r\n  value,\r\n  onChange,\r\n  isDark,\r\n  placeholder = '-',\r\n  min,\r\n  max,\r\n  disabled = false,\r\n}: NumberCellProps) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(value?.toString() || '');\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus();\r\n      inputRef.current.select();\r\n    }\r\n  }, [isEditing]);\r\n\r\n  useEffect(() => {\r\n    setEditValue(value?.toString() || '');\r\n  }, [value]);\r\n\r\n  const handleSave = () => {\r\n    const numValue = parseFloat(editValue);\r\n    if (!isNaN(numValue)) {\r\n      let finalValue = numValue;\r\n      if (min !== undefined) finalValue = Math.max(min, finalValue);\r\n      if (max !== undefined) finalValue = Math.min(max, finalValue);\r\n      if (finalValue !== value) {\r\n        onChange?.(finalValue);\r\n      }\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSave();\r\n    } else if (e.key === 'Escape') {\r\n      setEditValue(value?.toString() || '');\r\n      setIsEditing(false);\r\n    }\r\n  };\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n        {value !== undefined ? value : placeholder}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <input\r\n        ref={inputRef}\r\n        type=\"number\"\r\n        value={editValue}\r\n        onChange={(e) => setEditValue(e.target.value)}\r\n        onBlur={handleSave}\r\n        onKeyDown={handleKeyDown}\r\n        onClick={(e) => e.stopPropagation()}\r\n        min={min}\r\n        max={max}\r\n        className={cn(\r\n          'w-full px-2 py-1 text-sm rounded border outline-none',\r\n          isDark\r\n            ? 'bg-white/5 border-[#3B82F6] text-white'\r\n            : 'bg-white border-[#3B82F6] text-gray-900'\r\n        )}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        setIsEditing(true);\r\n      }}\r\n      className={cn(\r\n        'text-sm text-left w-full px-2 py-1 rounded transition-colors',\r\n        isDark ? 'text-[#94A3B8] hover:bg-white/10' : 'text-gray-500 hover:bg-gray-100',\r\n        value === undefined && (isDark ? 'text-[#6B7280]' : 'text-gray-400')\r\n      )}\r\n    >\r\n      {value !== undefined ? value : placeholder}\r\n    </button>\r\n  );\r\n}\r\n","/**\r\n * DropdownCell - Dropdown/select cell for ListView custom fields\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { ChevronDown, Check } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface DropdownCellProps {\r\n  value?: string;\r\n  options: string[];\r\n  onChange?: (value: string) => void;\r\n  isDark: boolean;\r\n  placeholder?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function DropdownCell({\r\n  value,\r\n  options = [],\r\n  onChange,\r\n  isDark,\r\n  placeholder = '-',\r\n  disabled = false,\r\n}: DropdownCellProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, [isOpen]);\r\n\r\n  if (disabled || !onChange) {\r\n    return (\r\n      <span className={cn('text-sm', isDark ? 'text-[#94A3B8]' : 'text-gray-500')}>\r\n        {value || placeholder}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-2 px-2 py-1 rounded transition-colors min-w-[80px]',\r\n          isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n        )}\r\n      >\r\n        <span className={cn(\r\n          'text-sm flex-1 text-left truncate',\r\n          isDark ? 'text-[#94A3B8]' : 'text-gray-500',\r\n          !value && (isDark ? 'text-[#6B7280]' : 'text-gray-400')\r\n        )}>\r\n          {value || placeholder}\r\n        </span>\r\n        <ChevronDown className={cn('w-3 h-3 flex-shrink-0', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute z-50 top-full left-0 mt-1 py-1 rounded-lg shadow-lg border min-w-[120px] max-h-48 overflow-y-auto',\r\n            isDark ? 'bg-[#1F2937] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {options.length === 0 ? (\r\n            <p className={cn('px-3 py-2 text-sm', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n              No options\r\n            </p>\r\n          ) : (\r\n            options.map((option) => (\r\n              <button\r\n                key={option}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onChange(option);\r\n                  setIsOpen(false);\r\n                }}\r\n                className={cn(\r\n                  'w-full flex items-center justify-between gap-2 px-3 py-2 text-sm transition-colors',\r\n                  isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                  value === option && (isDark ? 'bg-white/5' : 'bg-gray-50')\r\n                )}\r\n              >\r\n                <span className={isDark ? 'text-white' : 'text-gray-900'}>\r\n                  {option}\r\n                </span>\r\n                {value === option && (\r\n                  <Check className=\"w-4 h-4 text-[#3B82F6]\" />\r\n                )}\r\n              </button>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * CheckboxCell - Checkbox/toggle cell for ListView custom fields\r\n */\r\n\r\nimport { Check } from 'lucide-react';\r\nimport { cn } from '../../../utils';\r\n\r\ninterface CheckboxCellProps {\r\n  value?: boolean;\r\n  onChange?: (value: boolean) => void;\r\n  isDark: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function CheckboxCell({\r\n  value = false,\r\n  onChange,\r\n  isDark,\r\n  disabled = false,\r\n}: CheckboxCellProps) {\r\n  const handleClick = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    if (!disabled && onChange) {\r\n      onChange(!value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handleClick}\r\n      disabled={disabled || !onChange}\r\n      className={cn(\r\n        'w-5 h-5 rounded border-2 flex items-center justify-center transition-colors',\r\n        value\r\n          ? 'bg-[#3B82F6] border-[#3B82F6]'\r\n          : isDark\r\n            ? 'border-[#4B5563] hover:border-[#6B7280]'\r\n            : 'border-gray-300 hover:border-gray-400',\r\n        (disabled || !onChange) && 'opacity-50 cursor-not-allowed'\r\n      )}\r\n    >\r\n      {value && <Check className=\"w-3 h-3 text-white\" />}\r\n    </button>\r\n  );\r\n}\r\n","/**\r\n * TagsCell - Tags display cell for ListView\r\n */\r\n\r\nimport { cn } from '../../../utils';\r\nimport type { TaskTag } from '../../Gantt/types';\r\n\r\ninterface TagsCellProps {\r\n  value?: TaskTag[];\r\n  isDark: boolean;\r\n  maxVisible?: number;\r\n}\r\n\r\nexport function TagsCell({\r\n  value = [],\r\n  isDark,\r\n  maxVisible = 2,\r\n}: TagsCellProps) {\r\n  if (value.length === 0) {\r\n    return (\r\n      <span className={cn('text-sm', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n        -\r\n      </span>\r\n    );\r\n  }\r\n\r\n  const visibleTags = value.slice(0, maxVisible);\r\n  const remainingCount = value.length - maxVisible;\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1 flex-wrap\">\r\n      {visibleTags.map((tag) => (\r\n        <span\r\n          key={tag.id}\r\n          className=\"inline-flex items-center px-2 py-0.5 text-xs rounded-full\"\r\n          style={{\r\n            backgroundColor: tag.color ? `${tag.color}20` : isDark ? 'rgba(255,255,255,0.1)' : '#F3F4F6',\r\n            color: tag.color || (isDark ? '#9CA3AF' : '#6B7280'),\r\n          }}\r\n        >\r\n          {tag.name}\r\n        </span>\r\n      ))}\r\n      {remainingCount > 0 && (\r\n        <span\r\n          className={cn(\r\n            'inline-flex items-center px-2 py-0.5 text-xs rounded-full',\r\n            isDark ? 'bg-white/10 text-[#9CA3AF]' : 'bg-gray-100 text-gray-500'\r\n          )}\r\n        >\r\n          +{remainingCount}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * TableContextMenu - Context menu for ListView\r\n * @version 0.18.0\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Edit3,\r\n  Copy,\r\n  Trash2,\r\n  CheckCircle2,\r\n  PlayCircle,\r\n  Circle,\r\n  Flag,\r\n  Users,\r\n  EyeOff,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  ChevronRight,\r\n} from 'lucide-react';\r\nimport { cn } from '../../utils';\r\nimport type { Task } from '../Gantt/types';\r\nimport type { AvailableUser, ContextMenuState } from './types';\r\n\r\n// Local type that matches Task.assignees inline definition (includes avatar)\r\ninterface TaskAssignee {\r\n  name: string;\r\n  avatar?: string;\r\n  initials: string;\r\n  color: string;\r\n}\r\n\r\n// Helper to get initials from name\r\nfunction getInitials(name: string): string {\r\n  return name\r\n    .split(' ')\r\n    .map(n => n[0])\r\n    .join('')\r\n    .toUpperCase()\r\n    .slice(0, 2);\r\n}\r\n\r\n// Helper to get color from name\r\nfunction getAvatarColor(name: string): string {\r\n  const colors = ['blue', 'green', 'purple', 'pink', 'yellow', 'red', 'indigo', 'teal'] as const;\r\n  let hash = 0;\r\n  for (let i = 0; i < name.length; i++) {\r\n    hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n  return colors[Math.abs(hash) % colors.length] ?? 'blue';\r\n}\r\n\r\ninterface TableContextMenuProps {\r\n  state: ContextMenuState;\r\n  onClose: () => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n  // Task actions\r\n  onTaskEdit?: (task: Task) => void;\r\n  onTaskDuplicate?: (task: Task) => void;\r\n  onTaskDelete?: (taskId: string) => void;\r\n  onTaskUpdate?: (task: Task) => void;\r\n  // Column actions\r\n  onColumnHide?: (columnId: string) => void;\r\n  onColumnSort?: (columnId: string, direction: 'asc' | 'desc') => void;\r\n  // Users for assignment\r\n  availableUsers?: AvailableUser[];\r\n}\r\n\r\ninterface MenuItem {\r\n  id: string;\r\n  label: string;\r\n  icon: React.ReactNode;\r\n  onClick?: () => void;\r\n  submenu?: MenuItem[];\r\n  separator?: boolean;\r\n  danger?: boolean;\r\n}\r\n\r\nexport function TableContextMenu({\r\n  state,\r\n  onClose,\r\n  isDark,\r\n  locale,\r\n  onTaskEdit,\r\n  onTaskDuplicate,\r\n  onTaskDelete,\r\n  onTaskUpdate,\r\n  onColumnHide,\r\n  onColumnSort,\r\n  availableUsers = [],\r\n}: TableContextMenuProps) {\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const t = locale === 'es' ? translations.es : translations.en;\r\n\r\n  // Close on click outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [onClose]);\r\n\r\n  if (!state.isOpen) return null;\r\n\r\n  // Build menu items based on context type\r\n  const getTaskMenuItems = (): MenuItem[] => {\r\n    if (!state.task) return [];\r\n\r\n    const items: MenuItem[] = [];\r\n\r\n    // Edit\r\n    if (onTaskEdit) {\r\n      items.push({\r\n        id: 'edit',\r\n        label: t.edit,\r\n        icon: <Edit3 className=\"w-4 h-4\" />,\r\n        onClick: () => {\r\n          onTaskEdit(state.task!);\r\n          onClose();\r\n        },\r\n      });\r\n    }\r\n\r\n    items.push({ id: 'sep1', label: '', icon: null, separator: true });\r\n\r\n    // Change status submenu\r\n    if (onTaskUpdate) {\r\n      items.push({\r\n        id: 'status',\r\n        label: t.changeStatus,\r\n        icon: <CheckCircle2 className=\"w-4 h-4\" />,\r\n        submenu: [\r\n          {\r\n            id: 'status-todo',\r\n            label: t.todo,\r\n            icon: <Circle className=\"w-4 h-4 text-gray-400\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, status: 'todo', progress: 0 });\r\n              onClose();\r\n            },\r\n          },\r\n          {\r\n            id: 'status-in-progress',\r\n            label: t.inProgress,\r\n            icon: <PlayCircle className=\"w-4 h-4 text-blue-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, status: 'in-progress', progress: state.task!.progress || 50 });\r\n              onClose();\r\n            },\r\n          },\r\n          {\r\n            id: 'status-completed',\r\n            label: t.completed,\r\n            icon: <CheckCircle2 className=\"w-4 h-4 text-green-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, status: 'completed', progress: 100 });\r\n              onClose();\r\n            },\r\n          },\r\n        ],\r\n      });\r\n\r\n      // Change priority submenu\r\n      items.push({\r\n        id: 'priority',\r\n        label: t.changePriority,\r\n        icon: <Flag className=\"w-4 h-4\" />,\r\n        submenu: [\r\n          {\r\n            id: 'priority-urgent',\r\n            label: t.urgent,\r\n            icon: <div className=\"w-3 h-3 rounded-full bg-red-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, priority: 'urgent' });\r\n              onClose();\r\n            },\r\n          },\r\n          {\r\n            id: 'priority-high',\r\n            label: t.high,\r\n            icon: <div className=\"w-3 h-3 rounded-full bg-orange-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, priority: 'high' });\r\n              onClose();\r\n            },\r\n          },\r\n          {\r\n            id: 'priority-medium',\r\n            label: t.medium,\r\n            icon: <div className=\"w-3 h-3 rounded-full bg-yellow-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, priority: 'medium' });\r\n              onClose();\r\n            },\r\n          },\r\n          {\r\n            id: 'priority-low',\r\n            label: t.low,\r\n            icon: <div className=\"w-3 h-3 rounded-full bg-blue-500\" />,\r\n            onClick: () => {\r\n              onTaskUpdate({ ...state.task!, priority: 'low' });\r\n              onClose();\r\n            },\r\n          },\r\n        ],\r\n      });\r\n\r\n      // Assign user submenu (if users available)\r\n      if (availableUsers.length > 0) {\r\n        items.push({\r\n          id: 'assign',\r\n          label: t.assignUser,\r\n          icon: <Users className=\"w-4 h-4\" />,\r\n          submenu: availableUsers.slice(0, 5).map((user) => ({\r\n            id: `assign-${user.id}`,\r\n            label: user.name,\r\n            icon: (\r\n              <div\r\n                className=\"w-5 h-5 rounded-full flex items-center justify-center text-[10px] text-white bg-blue-500\"\r\n              >\r\n                {user.name.charAt(0).toUpperCase()}\r\n              </div>\r\n            ),\r\n            onClick: () => {\r\n              const currentAssignees = state.task!.assignees || [];\r\n              // Check if user is already assigned by name\r\n              const isAlreadyAssigned = currentAssignees.some(a => a.name === user.name);\r\n              const newAssignees: TaskAssignee[] = isAlreadyAssigned\r\n                ? currentAssignees.filter(a => a.name !== user.name)\r\n                : [...currentAssignees, {\r\n                    name: user.name,\r\n                    initials: getInitials(user.name),\r\n                    color: user.color || getAvatarColor(user.name),\r\n                    avatar: user.avatarUrl,\r\n                  }];\r\n              onTaskUpdate({ ...state.task!, assignees: newAssignees });\r\n              onClose();\r\n            },\r\n          })),\r\n        });\r\n      }\r\n    }\r\n\r\n    items.push({ id: 'sep2', label: '', icon: null, separator: true });\r\n\r\n    // Duplicate\r\n    if (onTaskDuplicate) {\r\n      items.push({\r\n        id: 'duplicate',\r\n        label: t.duplicate,\r\n        icon: <Copy className=\"w-4 h-4\" />,\r\n        onClick: () => {\r\n          onTaskDuplicate(state.task!);\r\n          onClose();\r\n        },\r\n      });\r\n    }\r\n\r\n    // Delete\r\n    if (onTaskDelete) {\r\n      items.push({\r\n        id: 'delete',\r\n        label: t.delete,\r\n        icon: <Trash2 className=\"w-4 h-4\" />,\r\n        danger: true,\r\n        onClick: () => {\r\n          onTaskDelete(state.task!.id);\r\n          onClose();\r\n        },\r\n      });\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  const getHeaderMenuItems = (): MenuItem[] => {\r\n    if (!state.columnId) return [];\r\n\r\n    const items: MenuItem[] = [];\r\n\r\n    // Sort options\r\n    if (onColumnSort) {\r\n      items.push({\r\n        id: 'sort-asc',\r\n        label: t.sortAsc,\r\n        icon: <ArrowUp className=\"w-4 h-4\" />,\r\n        onClick: () => {\r\n          onColumnSort(state.columnId!, 'asc');\r\n          onClose();\r\n        },\r\n      });\r\n      items.push({\r\n        id: 'sort-desc',\r\n        label: t.sortDesc,\r\n        icon: <ArrowDown className=\"w-4 h-4\" />,\r\n        onClick: () => {\r\n          onColumnSort(state.columnId!, 'desc');\r\n          onClose();\r\n        },\r\n      });\r\n    }\r\n\r\n    // Hide column (not for name column)\r\n    if (onColumnHide && state.columnId !== 'name') {\r\n      items.push({ id: 'sep-hide', label: '', icon: null, separator: true });\r\n      items.push({\r\n        id: 'hide',\r\n        label: t.hideColumn,\r\n        icon: <EyeOff className=\"w-4 h-4\" />,\r\n        onClick: () => {\r\n          onColumnHide(state.columnId!);\r\n          onClose();\r\n        },\r\n      });\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  const menuItems = state.type === 'task' ? getTaskMenuItems() : getHeaderMenuItems();\r\n\r\n  // Calculate position to avoid viewport overflow\r\n  const menuStyle: React.CSSProperties = {\r\n    position: 'fixed',\r\n    left: state.x,\r\n    top: state.y,\r\n    zIndex: 9999,\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={menuRef}\r\n      style={menuStyle}\r\n      className={cn(\r\n        'py-1 rounded-lg shadow-xl border min-w-[180px]',\r\n        isDark ? 'bg-[#0F1117] border-white/10' : 'bg-white border-gray-200'\r\n      )}\r\n    >\r\n      {menuItems.map((item) => {\r\n        if (item.separator) {\r\n          return (\r\n            <div\r\n              key={item.id}\r\n              className={cn('my-1 h-px', isDark ? 'bg-white/10' : 'bg-gray-200')}\r\n            />\r\n          );\r\n        }\r\n\r\n        if (item.submenu) {\r\n          return (\r\n            <SubmenuItem\r\n              key={item.id}\r\n              item={item}\r\n              isDark={isDark}\r\n            />\r\n          );\r\n        }\r\n\r\n        return (\r\n          <button\r\n            key={item.id}\r\n            onClick={item.onClick}\r\n            className={cn(\r\n              'w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors',\r\n              isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n              item.danger\r\n                ? 'text-red-500 hover:text-red-600'\r\n                : isDark ? 'text-white' : 'text-gray-700'\r\n            )}\r\n          >\r\n            <span className={cn(item.danger ? 'text-red-500' : isDark ? 'text-[#9CA3AF]' : 'text-gray-400')}>\r\n              {item.icon}\r\n            </span>\r\n            {item.label}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Submenu component with hover behavior\r\nfunction SubmenuItem({ item, isDark }: { item: MenuItem; isDark: boolean }) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const timeoutRef = useRef<NodeJS.Timeout>();\r\n\r\n  const handleMouseEnter = () => {\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    timeoutRef.current = setTimeout(() => setIsOpen(false), 150);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"relative\"\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <button\r\n        className={cn(\r\n          'w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors',\r\n          isDark ? 'hover:bg-white/10 text-white' : 'hover:bg-gray-100 text-gray-700'\r\n        )}\r\n      >\r\n        <span className={isDark ? 'text-[#9CA3AF]' : 'text-gray-400'}>\r\n          {item.icon}\r\n        </span>\r\n        <span className=\"flex-1\">{item.label}</span>\r\n        <ChevronRight className={cn('w-4 h-4', isDark ? 'text-[#6B7280]' : 'text-gray-400')} />\r\n      </button>\r\n\r\n      {isOpen && item.submenu && (\r\n        <div\r\n          className={cn(\r\n            'absolute left-full top-0 ml-1 py-1 rounded-lg shadow-xl border min-w-[160px]',\r\n            isDark ? 'bg-[#0F1117] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {item.submenu.map((subItem) => (\r\n            <button\r\n              key={subItem.id}\r\n              onClick={subItem.onClick}\r\n              className={cn(\r\n                'w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors',\r\n                isDark ? 'hover:bg-white/10 text-white' : 'hover:bg-gray-100 text-gray-700'\r\n              )}\r\n            >\r\n              <span className={isDark ? 'text-[#9CA3AF]' : 'text-gray-400'}>\r\n                {subItem.icon}\r\n              </span>\r\n              {subItem.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Translations\r\nconst translations = {\r\n  en: {\r\n    edit: 'Edit',\r\n    changeStatus: 'Change status',\r\n    changePriority: 'Change priority',\r\n    assignUser: 'Assign user',\r\n    duplicate: 'Duplicate',\r\n    delete: 'Delete',\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n    urgent: 'Urgent',\r\n    high: 'High',\r\n    medium: 'Medium',\r\n    low: 'Low',\r\n    sortAsc: 'Sort A  Z',\r\n    sortDesc: 'Sort Z  A',\r\n    hideColumn: 'Hide column',\r\n  },\r\n  es: {\r\n    edit: 'Editar',\r\n    changeStatus: 'Cambiar estado',\r\n    changePriority: 'Cambiar prioridad',\r\n    assignUser: 'Asignar usuario',\r\n    duplicate: 'Duplicar',\r\n    delete: 'Eliminar',\r\n    todo: 'Pendiente',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n    urgent: 'Urgente',\r\n    high: 'Alta',\r\n    medium: 'Media',\r\n    low: 'Baja',\r\n    sortAsc: 'Ordenar A  Z',\r\n    sortDesc: 'Ordenar Z  A',\r\n    hideColumn: 'Ocultar columna',\r\n  },\r\n};\r\n","/**\r\n * ColumnSelector - Panel for adding/removing columns in ListView\r\n * @version 0.18.0\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  X,\r\n  Search,\r\n  Plus,\r\n  Check,\r\n  Type,\r\n  Hash,\r\n  Calendar,\r\n  ChevronDown,\r\n  CheckSquare,\r\n  CircleDot,\r\n  Flag,\r\n  Users,\r\n  CalendarCheck,\r\n  BarChart,\r\n  Tag,\r\n} from 'lucide-react';\r\nimport { cn } from '../../utils';\r\nimport type { TableColumn, CustomFieldDefinition, ColumnType } from './types';\r\n\r\ninterface ColumnSelectorProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  columns: TableColumn[];\r\n  customFields?: CustomFieldDefinition[];\r\n  onColumnsChange: (columns: TableColumn[]) => void;\r\n  /** Callback to open create custom field modal */\r\n  onCreateCustomField?: () => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n}\r\n\r\n// Icon mapping for column types\r\nconst COLUMN_ICONS: Record<ColumnType, React.ReactNode> = {\r\n  name: <Type className=\"w-4 h-4\" />,\r\n  status: <CircleDot className=\"w-4 h-4\" />,\r\n  priority: <Flag className=\"w-4 h-4\" />,\r\n  assignees: <Users className=\"w-4 h-4\" />,\r\n  startDate: <Calendar className=\"w-4 h-4\" />,\r\n  endDate: <CalendarCheck className=\"w-4 h-4\" />,\r\n  progress: <BarChart className=\"w-4 h-4\" />,\r\n  tags: <Tag className=\"w-4 h-4\" />,\r\n  text: <Type className=\"w-4 h-4\" />,\r\n  number: <Hash className=\"w-4 h-4\" />,\r\n  date: <Calendar className=\"w-4 h-4\" />,\r\n  dropdown: <ChevronDown className=\"w-4 h-4\" />,\r\n  checkbox: <CheckSquare className=\"w-4 h-4\" />,\r\n};\r\n\r\n// Standard fields that are always available\r\nconst STANDARD_COLUMNS: ColumnType[] = ['name', 'status', 'priority', 'assignees', 'startDate', 'endDate', 'progress', 'tags'];\r\n\r\nexport function ColumnSelector({\r\n  isOpen,\r\n  onClose,\r\n  columns,\r\n  customFields = [],\r\n  onColumnsChange,\r\n  onCreateCustomField,\r\n  isDark,\r\n  locale,\r\n}: ColumnSelectorProps) {\r\n  const [search, setSearch] = useState('');\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n  const t = locale === 'es' ? translations.es : translations.en;\r\n\r\n  // Close on click outside (with delay to prevent immediate close)\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    // Small delay to prevent immediate close from the same click that opened it\r\n    const timeoutId = setTimeout(() => {\r\n      const handleClickOutside = (e: MouseEvent) => {\r\n        if (panelRef.current && !panelRef.current.contains(e.target as Node)) {\r\n          onClose();\r\n        }\r\n      };\r\n\r\n      const handleEscape = (e: KeyboardEvent) => {\r\n        if (e.key === 'Escape') onClose();\r\n      };\r\n\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      document.addEventListener('keydown', handleEscape);\r\n\r\n      // Store cleanup in ref for effect cleanup\r\n      (panelRef as any)._cleanup = () => {\r\n        document.removeEventListener('mousedown', handleClickOutside);\r\n        document.removeEventListener('keydown', handleEscape);\r\n      };\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      if ((panelRef as any)._cleanup) {\r\n        (panelRef as any)._cleanup();\r\n      }\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const getColumnLabel = (type: ColumnType): string => {\r\n    return t.columns[type] || type;\r\n  };\r\n\r\n  const toggleColumnVisibility = (columnId: string) => {\r\n    // Don't allow hiding the name column\r\n    if (columnId === 'name') return;\r\n\r\n    const newColumns = columns.map((col) =>\r\n      col.id === columnId ? { ...col, visible: !col.visible } : col\r\n    );\r\n    onColumnsChange(newColumns);\r\n  };\r\n\r\n  const addColumn = (type: ColumnType, customFieldId?: string) => {\r\n    // Check if column already exists\r\n    const existingColumn = columns.find(\r\n      (col) => col.type === type && (!customFieldId || col.customFieldId === customFieldId)\r\n    );\r\n\r\n    if (existingColumn) {\r\n      // Just make it visible\r\n      toggleColumnVisibility(existingColumn.id);\r\n      return;\r\n    }\r\n\r\n    // Create new column\r\n    const newColumn: TableColumn = {\r\n      id: customFieldId || type,\r\n      type,\r\n      label: customFieldId\r\n        ? customFields.find((f) => f.id === customFieldId)?.name || type\r\n        : getColumnLabel(type),\r\n      width: 120,\r\n      visible: true,\r\n      sortable: true,\r\n      resizable: true,\r\n      customFieldId,\r\n    };\r\n\r\n    onColumnsChange([...columns, newColumn]);\r\n  };\r\n\r\n  // Filter columns by search\r\n  const filteredStandardColumns = STANDARD_COLUMNS.filter((type) =>\r\n    getColumnLabel(type).toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  const filteredCustomFields = customFields.filter((field) =>\r\n    field.name.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div\r\n      ref={panelRef}\r\n      className={cn(\r\n        'absolute right-0 top-full mt-1 w-72 rounded-lg shadow-xl border z-50',\r\n        isDark ? 'bg-[#0F1117] border-white/10' : 'bg-white border-gray-200'\r\n      )}\r\n    >\r\n      {/* Header */}\r\n      <div className={cn(\r\n        'flex items-center justify-between px-4 py-3 border-b',\r\n        isDark ? 'border-white/10' : 'border-gray-200'\r\n      )}>\r\n        <h3 className={cn('font-medium', isDark ? 'text-white' : 'text-gray-900')}>\r\n          {t.title}\r\n        </h3>\r\n        <button\r\n          onClick={onClose}\r\n          className={cn('p-1 rounded', isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100')}\r\n        >\r\n          <X className={cn('w-4 h-4', isDark ? 'text-[#9CA3AF]' : 'text-gray-400')} />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"p-3\">\r\n        <div className=\"relative\">\r\n          <Search className={cn(\r\n            'absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4',\r\n            isDark ? 'text-[#6B7280]' : 'text-gray-400'\r\n          )} />\r\n          <input\r\n            type=\"text\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            placeholder={t.searchPlaceholder}\r\n            className={cn(\r\n              'w-full pl-9 pr-3 py-2 text-sm rounded-lg border outline-none',\r\n              isDark\r\n                ? 'bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]'\r\n                : 'bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400'\r\n            )}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Standard Fields */}\r\n      <div className=\"px-3 pb-2\">\r\n        <h4 className={cn('text-xs font-medium uppercase tracking-wider mb-2', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n          {t.standardFields}\r\n        </h4>\r\n        <div className=\"space-y-1\">\r\n          {filteredStandardColumns.map((type) => {\r\n            const column = columns.find((c) => c.type === type && !c.customFieldId);\r\n            const isVisible = column?.visible ?? false;\r\n            const isName = type === 'name';\r\n\r\n            return (\r\n              <button\r\n                key={type}\r\n                onClick={() => {\r\n                  if (isName) return;\r\n                  // If column exists, toggle visibility. If not, add it.\r\n                  if (column) {\r\n                    toggleColumnVisibility(column.id);\r\n                  } else {\r\n                    addColumn(type);\r\n                  }\r\n                }}\r\n                disabled={isName}\r\n                className={cn(\r\n                  'w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors',\r\n                  isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                  isName && 'opacity-50 cursor-not-allowed'\r\n                )}\r\n              >\r\n                <div className={cn(\r\n                  'w-5 h-5 rounded border flex items-center justify-center',\r\n                  isVisible\r\n                    ? 'bg-[#3B82F6] border-[#3B82F6]'\r\n                    : isDark ? 'border-[#4B5563]' : 'border-gray-300'\r\n                )}>\r\n                  {isVisible && <Check className=\"w-3 h-3 text-white\" />}\r\n                </div>\r\n                <span className={isDark ? 'text-[#9CA3AF]' : 'text-gray-400'}>\r\n                  {COLUMN_ICONS[type]}\r\n                </span>\r\n                <span className={isDark ? 'text-white' : 'text-gray-900'}>\r\n                  {getColumnLabel(type)}\r\n                </span>\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Custom Fields */}\r\n      {filteredCustomFields.length > 0 && (\r\n        <div className=\"px-3 pb-2\">\r\n          <h4 className={cn('text-xs font-medium uppercase tracking-wider mb-2', isDark ? 'text-[#6B7280]' : 'text-gray-400')}>\r\n            {t.customFields}\r\n          </h4>\r\n          <div className=\"space-y-1\">\r\n            {filteredCustomFields.map((field) => {\r\n              const column = columns.find((c) => c.customFieldId === field.id);\r\n              const isVisible = column?.visible ?? false;\r\n\r\n              return (\r\n                <button\r\n                  key={field.id}\r\n                  onClick={() => addColumn(field.type as ColumnType, field.id)}\r\n                  className={cn(\r\n                    'w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors',\r\n                    isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100'\r\n                  )}\r\n                >\r\n                  <div className={cn(\r\n                    'w-5 h-5 rounded border flex items-center justify-center',\r\n                    isVisible\r\n                      ? 'bg-[#3B82F6] border-[#3B82F6]'\r\n                      : isDark ? 'border-[#4B5563]' : 'border-gray-300'\r\n                  )}>\r\n                    {isVisible && <Check className=\"w-3 h-3 text-white\" />}\r\n                  </div>\r\n                  <span className={isDark ? 'text-[#9CA3AF]' : 'text-gray-400'}>\r\n                    {COLUMN_ICONS[field.type as ColumnType] || <Type className=\"w-4 h-4\" />}\r\n                  </span>\r\n                  <span className={isDark ? 'text-white' : 'text-gray-900'}>\r\n                    {field.name}\r\n                  </span>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Create Custom Field Button */}\r\n      {onCreateCustomField && (\r\n        <div className={cn('p-3 border-t', isDark ? 'border-white/10' : 'border-gray-200')}>\r\n          <button\r\n            onClick={onCreateCustomField}\r\n            className={cn(\r\n              'w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors',\r\n              isDark\r\n                ? 'bg-[#3B82F6]/20 text-[#3B82F6] hover:bg-[#3B82F6]/30'\r\n                : 'bg-blue-50 text-blue-600 hover:bg-blue-100'\r\n            )}\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            {t.createField}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Translations\r\nconst translations = {\r\n  en: {\r\n    title: 'Columns',\r\n    searchPlaceholder: 'Search fields...',\r\n    standardFields: 'Standard Fields',\r\n    customFields: 'Custom Fields',\r\n    createField: 'Create custom field',\r\n    columns: {\r\n      name: 'Name',\r\n      status: 'Status',\r\n      priority: 'Priority',\r\n      assignees: 'Assignees',\r\n      startDate: 'Start Date',\r\n      endDate: 'End Date',\r\n      progress: 'Progress',\r\n      tags: 'Tags',\r\n      text: 'Text',\r\n      number: 'Number',\r\n      date: 'Date',\r\n      dropdown: 'Dropdown',\r\n      checkbox: 'Checkbox',\r\n    } as Record<ColumnType, string>,\r\n  },\r\n  es: {\r\n    title: 'Columnas',\r\n    searchPlaceholder: 'Buscar campos...',\r\n    standardFields: 'Campos Estndar',\r\n    customFields: 'Campos Personalizados',\r\n    createField: 'Crear campo personalizado',\r\n    columns: {\r\n      name: 'Nombre',\r\n      status: 'Estado',\r\n      priority: 'Prioridad',\r\n      assignees: 'Asignados',\r\n      startDate: 'Fecha Inicio',\r\n      endDate: 'Fecha Fin',\r\n      progress: 'Progreso',\r\n      tags: 'Etiquetas',\r\n      text: 'Texto',\r\n      number: 'Nmero',\r\n      date: 'Fecha',\r\n      dropdown: 'Lista',\r\n      checkbox: 'Casilla',\r\n    } as Record<ColumnType, string>,\r\n  },\r\n};\r\n","/**\r\n * CreateFieldModal - Modal for creating custom fields\r\n * @version 0.18.0\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { X, Type, Hash, Calendar, ChevronDown, CheckSquare, Plus, Trash2 } from 'lucide-react';\r\nimport { cn } from '../../utils';\r\nimport type { CustomFieldDefinition } from './types';\r\n\r\ninterface CreateFieldModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSave: (field: Omit<CustomFieldDefinition, 'id' | 'projectId'>) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n}\r\n\r\ntype FieldType = CustomFieldDefinition['type'];\r\n\r\nconst FIELD_TYPES: Array<{ type: FieldType; icon: React.ReactNode }> = [\r\n  { type: 'text', icon: <Type className=\"w-5 h-5\" /> },\r\n  { type: 'number', icon: <Hash className=\"w-5 h-5\" /> },\r\n  { type: 'date', icon: <Calendar className=\"w-5 h-5\" /> },\r\n  { type: 'dropdown', icon: <ChevronDown className=\"w-5 h-5\" /> },\r\n  { type: 'checkbox', icon: <CheckSquare className=\"w-5 h-5\" /> },\r\n];\r\n\r\nexport function CreateFieldModal({\r\n  isOpen,\r\n  onClose,\r\n  onSave,\r\n  isDark,\r\n  locale,\r\n}: CreateFieldModalProps) {\r\n  const [name, setName] = useState('');\r\n  const [type, setType] = useState<FieldType>('text');\r\n  const [options, setOptions] = useState<string[]>(['']);\r\n  const t = locale === 'es' ? translations.es : translations.en;\r\n\r\n  // Reset form when modal opens\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setName('');\r\n      setType('text');\r\n      setOptions(['']);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Handle escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape);\r\n    }\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen, onClose]);\r\n\r\n  const handleSave = () => {\r\n    if (!name.trim()) return;\r\n\r\n    const field: Omit<CustomFieldDefinition, 'id' | 'projectId'> = {\r\n      name: name.trim(),\r\n      type,\r\n    };\r\n\r\n    if (type === 'dropdown') {\r\n      field.options = options.filter((opt) => opt.trim());\r\n    }\r\n\r\n    onSave(field);\r\n    onClose();\r\n  };\r\n\r\n  const addOption = () => {\r\n    setOptions([...options, '']);\r\n  };\r\n\r\n  const updateOption = (index: number, value: string) => {\r\n    const newOptions = [...options];\r\n    newOptions[index] = value;\r\n    setOptions(newOptions);\r\n  };\r\n\r\n  const removeOption = (index: number) => {\r\n    if (options.length > 1) {\r\n      setOptions(options.filter((_, i) => i !== index));\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"absolute inset-0 bg-black/50\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div\r\n        className={cn(\r\n          'relative w-full max-w-md rounded-xl shadow-2xl border',\r\n          isDark ? 'bg-[#0F1117] border-white/10' : 'bg-white border-gray-200'\r\n        )}\r\n      >\r\n        {/* Header */}\r\n        <div className={cn(\r\n          'flex items-center justify-between px-6 py-4 border-b',\r\n          isDark ? 'border-white/10' : 'border-gray-200'\r\n        )}>\r\n          <h2 className={cn('text-lg font-semibold', isDark ? 'text-white' : 'text-gray-900')}>\r\n            {t.title}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className={cn('p-1 rounded', isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100')}\r\n          >\r\n            <X className={cn('w-5 h-5', isDark ? 'text-[#9CA3AF]' : 'text-gray-400')} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Field Name */}\r\n          <div>\r\n            <label className={cn('block text-sm font-medium mb-2', isDark ? 'text-white' : 'text-gray-900')}>\r\n              {t.fieldName}\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              placeholder={t.fieldNamePlaceholder}\r\n              className={cn(\r\n                'w-full px-4 py-2.5 rounded-lg border outline-none focus:ring-2 focus:ring-[#3B82F6]/30',\r\n                isDark\r\n                  ? 'bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]'\r\n                  : 'bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400'\r\n              )}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          {/* Field Type */}\r\n          <div>\r\n            <label className={cn('block text-sm font-medium mb-2', isDark ? 'text-white' : 'text-gray-900')}>\r\n              {t.fieldType}\r\n            </label>\r\n            <div className=\"grid grid-cols-5 gap-2\">\r\n              {FIELD_TYPES.map((ft) => (\r\n                <button\r\n                  key={ft.type}\r\n                  onClick={() => setType(ft.type)}\r\n                  className={cn(\r\n                    'flex flex-col items-center gap-1 p-3 rounded-lg border transition-colors',\r\n                    type === ft.type\r\n                      ? 'border-[#3B82F6] bg-[#3B82F6]/10'\r\n                      : isDark\r\n                        ? 'border-white/10 hover:border-white/20'\r\n                        : 'border-gray-200 hover:border-gray-300'\r\n                  )}\r\n                >\r\n                  <span className={type === ft.type ? 'text-[#3B82F6]' : isDark ? 'text-[#9CA3AF]' : 'text-gray-400'}>\r\n                    {ft.icon}\r\n                  </span>\r\n                  <span className={cn(\r\n                    'text-xs',\r\n                    type === ft.type\r\n                      ? 'text-[#3B82F6]'\r\n                      : isDark ? 'text-[#9CA3AF]' : 'text-gray-500'\r\n                  )}>\r\n                    {t.types[ft.type]}\r\n                  </span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Dropdown Options */}\r\n          {type === 'dropdown' && (\r\n            <div>\r\n              <label className={cn('block text-sm font-medium mb-2', isDark ? 'text-white' : 'text-gray-900')}>\r\n                {t.options}\r\n              </label>\r\n              <div className=\"space-y-2\">\r\n                {options.map((option, index) => (\r\n                  <div key={index} className=\"flex items-center gap-2\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={option}\r\n                      onChange={(e) => updateOption(index, e.target.value)}\r\n                      placeholder={`${t.option} ${index + 1}`}\r\n                      className={cn(\r\n                        'flex-1 px-3 py-2 rounded-lg border outline-none focus:ring-2 focus:ring-[#3B82F6]/30',\r\n                        isDark\r\n                          ? 'bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]'\r\n                          : 'bg-gray-50 border-gray-200 text-gray-900 placeholder:text-gray-400'\r\n                      )}\r\n                    />\r\n                    {options.length > 1 && (\r\n                      <button\r\n                        onClick={() => removeOption(index)}\r\n                        className={cn(\r\n                          'p-2 rounded-lg transition-colors',\r\n                          isDark ? 'hover:bg-white/10 text-[#9CA3AF]' : 'hover:bg-gray-100 text-gray-400'\r\n                        )}\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n                <button\r\n                  onClick={addOption}\r\n                  className={cn(\r\n                    'flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-colors',\r\n                    isDark\r\n                      ? 'text-[#3B82F6] hover:bg-white/10'\r\n                      : 'text-blue-600 hover:bg-gray-100'\r\n                  )}\r\n                >\r\n                  <Plus className=\"w-4 h-4\" />\r\n                  {t.addOption}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className={cn(\r\n          'flex items-center justify-end gap-3 px-6 py-4 border-t',\r\n          isDark ? 'border-white/10' : 'border-gray-200'\r\n        )}>\r\n          <button\r\n            onClick={onClose}\r\n            className={cn(\r\n              'px-4 py-2 text-sm font-medium rounded-lg transition-colors',\r\n              isDark\r\n                ? 'text-[#9CA3AF] hover:bg-white/10'\r\n                : 'text-gray-600 hover:bg-gray-100'\r\n            )}\r\n          >\r\n            {t.cancel}\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={!name.trim()}\r\n            className={cn(\r\n              'px-4 py-2 text-sm font-medium rounded-lg transition-colors',\r\n              'bg-[#3B82F6] text-white hover:bg-[#2563EB]',\r\n              !name.trim() && 'opacity-50 cursor-not-allowed'\r\n            )}\r\n          >\r\n            {t.create}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Translations\r\nconst translations = {\r\n  en: {\r\n    title: 'Create Custom Field',\r\n    fieldName: 'Field Name',\r\n    fieldNamePlaceholder: 'Enter field name...',\r\n    fieldType: 'Field Type',\r\n    options: 'Options',\r\n    option: 'Option',\r\n    addOption: 'Add option',\r\n    cancel: 'Cancel',\r\n    create: 'Create Field',\r\n    types: {\r\n      text: 'Text',\r\n      number: 'Number',\r\n      date: 'Date',\r\n      dropdown: 'Dropdown',\r\n      checkbox: 'Checkbox',\r\n    },\r\n  },\r\n  es: {\r\n    title: 'Crear Campo Personalizado',\r\n    fieldName: 'Nombre del Campo',\r\n    fieldNamePlaceholder: 'Ingresa el nombre...',\r\n    fieldType: 'Tipo de Campo',\r\n    options: 'Opciones',\r\n    option: 'Opcin',\r\n    addOption: 'Agregar opcin',\r\n    cancel: 'Cancelar',\r\n    create: 'Crear Campo',\r\n    types: {\r\n      text: 'Texto',\r\n      number: 'Nmero',\r\n      date: 'Fecha',\r\n      dropdown: 'Lista',\r\n      checkbox: 'Casilla',\r\n    },\r\n  },\r\n};\r\n","/**\r\n * StatusFilter - Dropdown filter for task status in ListView\r\n * Allows filtering by: All, Completed, In Progress, To Do/Pending\r\n * Also includes \"Hide Completed\" toggle\r\n * @version 0.18.0\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Filter, Check, CheckCircle2, PlayCircle, Circle, EyeOff } from 'lucide-react';\r\nimport { cn } from '../../utils';\r\n\r\nexport type StatusFilterValue = 'all' | 'completed' | 'in-progress' | 'todo';\r\n\r\ninterface StatusFilterProps {\r\n  value: StatusFilterValue;\r\n  hideCompleted: boolean;\r\n  onChange: (value: StatusFilterValue) => void;\r\n  onHideCompletedChange: (hide: boolean) => void;\r\n  isDark: boolean;\r\n  locale: string;\r\n}\r\n\r\nconst translations = {\r\n  en: {\r\n    filters: 'Filters',\r\n    filterByStatus: 'FILTER BY STATUS',\r\n    showAll: 'Show All',\r\n    completed: 'Completed',\r\n    inProgress: 'In Progress',\r\n    toDo: 'To Do / Pending',\r\n    hideCompleted: 'Hide Completed Tasks',\r\n  },\r\n  es: {\r\n    filters: 'Filtros',\r\n    filterByStatus: 'FILTRAR POR ESTADO',\r\n    showAll: 'Mostrar Todo',\r\n    completed: 'Completadas',\r\n    inProgress: 'En Progreso',\r\n    toDo: 'Por Hacer / Pendiente',\r\n    hideCompleted: 'Ocultar Tareas Completadas',\r\n  },\r\n};\r\n\r\nexport function StatusFilter({\r\n  value,\r\n  hideCompleted,\r\n  onChange,\r\n  onHideCompletedChange,\r\n  isDark,\r\n  locale,\r\n}: StatusFilterProps) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const t = locale === 'es' ? translations.es : translations.en;\r\n\r\n  // Close on click outside\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const timeoutId = setTimeout(() => {\r\n      const handleClickOutside = (e: MouseEvent) => {\r\n        if (dropdownRef.current && !dropdownRef.current.contains(e.target as Node)) {\r\n          setIsOpen(false);\r\n        }\r\n      };\r\n\r\n      const handleEscape = (e: KeyboardEvent) => {\r\n        if (e.key === 'Escape') setIsOpen(false);\r\n      };\r\n\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      document.addEventListener('keydown', handleEscape);\r\n\r\n      (dropdownRef as any)._cleanup = () => {\r\n        document.removeEventListener('mousedown', handleClickOutside);\r\n        document.removeEventListener('keydown', handleEscape);\r\n      };\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      if ((dropdownRef as any)._cleanup) {\r\n        (dropdownRef as any)._cleanup();\r\n      }\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const options: Array<{ value: StatusFilterValue; label: string; icon: React.ReactNode; color: string }> = [\r\n    { value: 'all', label: t.showAll, icon: <div className=\"w-4 h-4 rounded-full border-2 border-[#3B82F6] bg-[#3B82F6]\" />, color: 'text-[#3B82F6]' },\r\n    { value: 'completed', label: t.completed, icon: <CheckCircle2 className=\"w-4 h-4\" />, color: 'text-green-500' },\r\n    { value: 'in-progress', label: t.inProgress, icon: <PlayCircle className=\"w-4 h-4\" />, color: 'text-blue-500' },\r\n    { value: 'todo', label: t.toDo, icon: <Circle className=\"w-4 h-4\" />, color: 'text-gray-400' },\r\n  ];\r\n\r\n  const hasActiveFilter = value !== 'all' || hideCompleted;\r\n\r\n  return (\r\n    <div ref={dropdownRef} className=\"relative\">\r\n      {/* Filter Button */}\r\n      <button\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          setIsOpen(prev => !prev);\r\n        }}\r\n        className={cn(\r\n          'flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors border',\r\n          isDark\r\n            ? 'border-white/10 hover:bg-white/10 text-white'\r\n            : 'border-gray-200 hover:bg-gray-100 text-gray-700',\r\n          hasActiveFilter && (isDark ? 'bg-[#3B82F6]/20 border-[#3B82F6]/50 text-[#3B82F6]' : 'bg-blue-50 border-blue-200 text-blue-600'),\r\n          isOpen && (isDark ? 'bg-white/10' : 'bg-gray-100')\r\n        )}\r\n      >\r\n        <Filter className=\"w-4 h-4\" />\r\n        {t.filters}\r\n        {hasActiveFilter && (\r\n          <span className={cn(\r\n            'w-2 h-2 rounded-full',\r\n            isDark ? 'bg-[#3B82F6]' : 'bg-blue-500'\r\n          )} />\r\n        )}\r\n      </button>\r\n\r\n      {/* Dropdown */}\r\n      {isOpen && (\r\n        <div\r\n          className={cn(\r\n            'absolute left-0 top-full mt-2 w-64 rounded-lg shadow-xl border z-50',\r\n            isDark ? 'bg-[#0F1117] border-white/10' : 'bg-white border-gray-200'\r\n          )}\r\n        >\r\n          {/* Header */}\r\n          <div className={cn(\r\n            'px-4 py-3 border-b',\r\n            isDark ? 'border-white/10' : 'border-gray-200'\r\n          )}>\r\n            <span className={cn(\r\n              'text-xs font-medium uppercase tracking-wider',\r\n              isDark ? 'text-[#6B7280]' : 'text-gray-400'\r\n            )}>\r\n              {t.filterByStatus}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Options */}\r\n          <div className=\"py-2\">\r\n            {options.map((option) => (\r\n              <button\r\n                key={option.value}\r\n                onClick={() => {\r\n                  onChange(option.value);\r\n                  // If selecting a specific status, disable hide completed\r\n                  if (option.value !== 'all') {\r\n                    onHideCompletedChange(false);\r\n                  }\r\n                }}\r\n                className={cn(\r\n                  'w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors',\r\n                  isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                  value === option.value && (isDark ? 'bg-white/5' : 'bg-gray-50')\r\n                )}\r\n              >\r\n                <span className={option.color}>\r\n                  {option.icon}\r\n                </span>\r\n                <span className={cn(\r\n                  'flex-1 text-left',\r\n                  isDark ? 'text-white' : 'text-gray-900'\r\n                )}>\r\n                  {option.label}\r\n                </span>\r\n                {value === option.value && (\r\n                  <Check className={cn('w-4 h-4', isDark ? 'text-[#3B82F6]' : 'text-blue-500')} />\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Separator */}\r\n          <div className={cn(\r\n            'my-2 mx-4 h-px',\r\n            isDark ? 'bg-white/10' : 'bg-gray-200'\r\n          )} />\r\n\r\n          {/* Hide Completed Toggle */}\r\n          <div className=\"py-1\">\r\n            <button\r\n              onClick={() => {\r\n                onHideCompletedChange(!hideCompleted);\r\n                // If enabling hide completed, reset to show all\r\n                if (!hideCompleted) {\r\n                  onChange('all');\r\n                }\r\n              }}\r\n              className={cn(\r\n                'w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors',\r\n                isDark ? 'hover:bg-white/10' : 'hover:bg-gray-100',\r\n                hideCompleted && (isDark ? 'bg-white/5' : 'bg-gray-50')\r\n              )}\r\n            >\r\n              <EyeOff className={cn(\r\n                'w-4 h-4',\r\n                hideCompleted\r\n                  ? (isDark ? 'text-[#3B82F6]' : 'text-blue-500')\r\n                  : (isDark ? 'text-[#6B7280]' : 'text-gray-400')\r\n              )} />\r\n              <span className={cn(\r\n                'flex-1 text-left',\r\n                isDark ? 'text-white' : 'text-gray-900'\r\n              )}>\r\n                {t.hideCompleted}\r\n              </span>\r\n              {hideCompleted && (\r\n                <Check className={cn('w-4 h-4', isDark ? 'text-[#3B82F6]' : 'text-blue-500')} />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ListView Component\r\n * Professional list view for task management with dynamic columns\r\n * ClickUp-style features: column customization, context menu, custom fields\r\n * @version 0.18.0\r\n */\r\n\r\nimport { useState, useMemo, useCallback, useRef, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  List,\r\n  ChevronDown,\r\n  ChevronRight,\r\n  CheckCircle2,\r\n  Circle,\r\n  PlayCircle,\r\n  ArrowUpDown,\r\n  Search,\r\n  Plus,\r\n} from 'lucide-react';\r\nimport type { Task } from '../Gantt/types';\r\nimport type {\r\n  ListViewProps,\r\n  FlattenedTask,\r\n  TableColumn,\r\n  ContextMenuState,\r\n  CustomFieldDefinition,\r\n  CustomFieldValue,\r\n} from './types';\r\nimport { mergeListViewTranslations } from './i18n';\r\nimport { cn } from '../../utils';\r\n\r\n// Cell renderers\r\nimport { StatusCell } from './cells/StatusCell';\r\nimport { PriorityCell } from './cells/PriorityCell';\r\nimport { AssigneesCell } from './cells/AssigneesCell';\r\nimport { DateCell } from './cells/DateCell';\r\nimport { ProgressCell } from './cells/ProgressCell';\r\nimport { TextCell } from './cells/TextCell';\r\nimport { NumberCell } from './cells/NumberCell';\r\nimport { DropdownCell } from './cells/DropdownCell';\r\nimport { CheckboxCell } from './cells/CheckboxCell';\r\nimport { TagsCell } from './cells/TagsCell';\r\n\r\n// Components\r\nimport { TableContextMenu } from './TableContextMenu';\r\nimport { ColumnSelector } from './ColumnSelector';\r\nimport { CreateFieldModal } from './CreateFieldModal';\r\nimport { StatusFilter, type StatusFilterValue } from './StatusFilter';\r\n\r\ntype SortField = 'name' | 'startDate' | 'endDate' | 'progress' | 'status' | 'priority' | string;\r\ntype SortOrder = 'asc' | 'desc';\r\n\r\n// Default columns when none provided\r\nconst DEFAULT_COLUMNS: TableColumn[] = [\r\n  { id: 'name', type: 'name', label: 'Name', width: 300, visible: true, sortable: true, resizable: true },\r\n  { id: 'status', type: 'status', label: 'Status', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'startDate', type: 'startDate', label: 'Start Date', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'endDate', type: 'endDate', label: 'End Date', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'progress', type: 'progress', label: 'Progress', width: 100, visible: true, sortable: true, resizable: true },\r\n];\r\n\r\n/**\r\n * Flatten hierarchical tasks to flat list with level info\r\n */\r\nfunction flattenTasksWithLevel(tasks: Task[], level = 0): FlattenedTask[] {\r\n  const result: FlattenedTask[] = [];\r\n\r\n  for (const task of tasks) {\r\n    result.push({\r\n      ...task,\r\n      level,\r\n      hasChildren: (task.subtasks?.length || 0) > 0,\r\n      parentPath: [task.id],\r\n    });\r\n    if (task.subtasks?.length && task.isExpanded !== false) {\r\n      result.push(...flattenTasksWithLevel(task.subtasks, level + 1));\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Status Icon component\r\n */\r\nfunction StatusIcon({ status, progress }: { status?: string; progress?: number }) {\r\n  if (progress === 100 || status === 'completed') {\r\n    return <CheckCircle2 className=\"w-5 h-5 text-green-500\" />;\r\n  }\r\n  if ((progress && progress > 0) || status === 'in-progress') {\r\n    return <PlayCircle className=\"w-5 h-5 text-blue-500\" />;\r\n  }\r\n  return <Circle className=\"w-5 h-5 text-gray-400\" />;\r\n}\r\n\r\n/**\r\n * Main ListView Component\r\n */\r\nexport function ListView({\r\n  tasks,\r\n  config = {},\r\n  callbacks = {},\r\n  isLoading = false,\r\n  error,\r\n  className,\r\n  style,\r\n  availableUsers = [],\r\n  customFields = [],\r\n}: ListViewProps) {\r\n  const {\r\n    theme: themeName = 'dark',\r\n    locale = 'en',\r\n    customTranslations,\r\n    showSearch = true,\r\n    showHierarchy = true,\r\n    tableColumns,\r\n    allowColumnCustomization = true,\r\n    allowColumnResize = true,\r\n    enableContextMenu = true,\r\n  } = config;\r\n\r\n  const t = mergeListViewTranslations(locale, customTranslations);\r\n  const isDark = themeName === 'dark';\r\n\r\n  // State\r\n  const [sortField, setSortField] = useState<SortField>('startDate');\r\n  const [sortOrder, setSortOrder] = useState<SortOrder>('asc');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState<StatusFilterValue>('all');\r\n  const [hideCompleted, setHideCompleted] = useState(false);\r\n  const [columns, setColumns] = useState<TableColumn[]>(tableColumns || DEFAULT_COLUMNS);\r\n  const [showColumnSelector, setShowColumnSelector] = useState(false);\r\n  const [showCreateFieldModal, setShowCreateFieldModal] = useState(false);\r\n  const [contextMenu, setContextMenu] = useState<ContextMenuState>({\r\n    isOpen: false,\r\n    x: 0,\r\n    y: 0,\r\n    type: 'task',\r\n  });\r\n\r\n  // Column resize state\r\n  const [resizingColumn, setResizingColumn] = useState<string | null>(null);\r\n  const [resizeStartX, setResizeStartX] = useState(0);\r\n  const [resizeStartWidth, setResizeStartWidth] = useState(0);\r\n  const tableRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Sync columns with prop changes\r\n  useEffect(() => {\r\n    if (tableColumns) {\r\n      setColumns(tableColumns);\r\n    }\r\n  }, [tableColumns]);\r\n\r\n  // Build expanded tasks set from task.isExpanded props\r\n  const expandedTasks = useMemo(() => {\r\n    const expanded = new Set<string>();\r\n    function collectExpanded(taskList: Task[]) {\r\n      for (const task of taskList) {\r\n        if (task.subtasks?.length) {\r\n          if (task.isExpanded !== false) {\r\n            expanded.add(task.id);\r\n          }\r\n          collectExpanded(task.subtasks);\r\n        }\r\n      }\r\n    }\r\n    collectExpanded(tasks);\r\n    return expanded;\r\n  }, [tasks]);\r\n\r\n  // Get visible columns\r\n  const visibleColumns = useMemo(() => columns.filter(col => col.visible), [columns]);\r\n\r\n  // Toggle task expansion - delegates to parent via callback\r\n  const toggleExpand = useCallback((taskId: string) => {\r\n    callbacks.onTaskToggleExpand?.(taskId);\r\n  }, [callbacks]);\r\n\r\n  // Sort handler\r\n  const handleSort = useCallback((field: SortField) => {\r\n    if (sortField === field) {\r\n      setSortOrder(prev => prev === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortOrder('asc');\r\n    }\r\n    callbacks.onSortChange?.({ column: field as any, direction: sortOrder === 'asc' ? 'desc' : 'asc' });\r\n  }, [sortField, sortOrder, callbacks]);\r\n\r\n  // Column management\r\n  const handleColumnsChange = useCallback((newColumns: TableColumn[]) => {\r\n    setColumns(newColumns);\r\n    callbacks.onColumnsChange?.(newColumns);\r\n  }, [callbacks]);\r\n\r\n  const handleColumnHide = useCallback((columnId: string) => {\r\n    const newColumns = columns.map(col =>\r\n      col.id === columnId ? { ...col, visible: false } : col\r\n    );\r\n    handleColumnsChange(newColumns);\r\n  }, [columns, handleColumnsChange]);\r\n\r\n  const handleColumnSort = useCallback((columnId: string, direction: SortOrder) => {\r\n    setSortField(columnId);\r\n    setSortOrder(direction);\r\n  }, []);\r\n\r\n  // Context menu handlers\r\n  const handleContextMenu = useCallback((e: React.MouseEvent, task?: Task, columnId?: string) => {\r\n    if (!enableContextMenu) return;\r\n    e.preventDefault();\r\n    setContextMenu({\r\n      isOpen: true,\r\n      x: e.clientX,\r\n      y: e.clientY,\r\n      type: task ? 'task' : 'header',\r\n      task,\r\n      columnId,\r\n    });\r\n  }, [enableContextMenu]);\r\n\r\n  const closeContextMenu = useCallback(() => {\r\n    setContextMenu(prev => ({ ...prev, isOpen: false }));\r\n  }, []);\r\n\r\n  // Column resize handlers\r\n  const handleResizeStart = useCallback((e: React.MouseEvent, columnId: string) => {\r\n    if (!allowColumnResize) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const column = columns.find(c => c.id === columnId);\r\n    if (column) {\r\n      setResizingColumn(columnId);\r\n      setResizeStartX(e.clientX);\r\n      setResizeStartWidth(column.width);\r\n    }\r\n  }, [columns, allowColumnResize]);\r\n\r\n  useEffect(() => {\r\n    if (!resizingColumn) return;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const delta = e.clientX - resizeStartX;\r\n      const newWidth = Math.max(50, resizeStartWidth + delta);\r\n      const newColumns = columns.map(col =>\r\n        col.id === resizingColumn ? { ...col, width: newWidth } : col\r\n      );\r\n      setColumns(newColumns);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      if (resizingColumn) {\r\n        callbacks.onColumnsChange?.(columns);\r\n      }\r\n      setResizingColumn(null);\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [resizingColumn, resizeStartX, resizeStartWidth, columns, callbacks]);\r\n\r\n  // Custom field creation\r\n  const handleCreateCustomField = useCallback(async (field: Omit<CustomFieldDefinition, 'id' | 'projectId'>) => {\r\n    if (callbacks.onCreateCustomField) {\r\n      const fullField: CustomFieldDefinition = {\r\n        ...field,\r\n        id: `cf_${Date.now()}`,\r\n        projectId: '',\r\n      };\r\n      await callbacks.onCreateCustomField(fullField);\r\n    }\r\n    setShowCreateFieldModal(false);\r\n  }, [callbacks]);\r\n\r\n  // Helper to get task status\r\n  const getTaskStatus = useCallback((task: Task): 'completed' | 'in-progress' | 'todo' => {\r\n    if (task.progress === 100 || task.status === 'completed') return 'completed';\r\n    if ((task.progress && task.progress > 0) || task.status === 'in-progress') return 'in-progress';\r\n    return 'todo';\r\n  }, []);\r\n\r\n  // Filter and sort tasks\r\n  const displayTasks = useMemo(() => {\r\n    let flatTasks = flattenTasksWithLevel(tasks);\r\n\r\n    // Filter by search\r\n    if (searchQuery.trim()) {\r\n      const query = searchQuery.toLowerCase();\r\n      flatTasks = flatTasks.filter(task =>\r\n        task.name.toLowerCase().includes(query)\r\n      );\r\n    }\r\n\r\n    // Filter by status\r\n    if (statusFilter !== 'all') {\r\n      flatTasks = flatTasks.filter(task => getTaskStatus(task) === statusFilter);\r\n    }\r\n\r\n    // Hide completed tasks\r\n    if (hideCompleted) {\r\n      flatTasks = flatTasks.filter(task => getTaskStatus(task) !== 'completed');\r\n    }\r\n\r\n    // Sort\r\n    flatTasks.sort((a, b) => {\r\n      let aVal: string | number, bVal: string | number;\r\n\r\n      switch (sortField) {\r\n        case 'name':\r\n          aVal = a.name.toLowerCase();\r\n          bVal = b.name.toLowerCase();\r\n          break;\r\n        case 'startDate':\r\n          aVal = a.startDate?.getTime() || 0;\r\n          bVal = b.startDate?.getTime() || 0;\r\n          break;\r\n        case 'endDate':\r\n          aVal = a.endDate?.getTime() || 0;\r\n          bVal = b.endDate?.getTime() || 0;\r\n          break;\r\n        case 'progress':\r\n          aVal = a.progress || 0;\r\n          bVal = b.progress || 0;\r\n          break;\r\n        case 'status':\r\n          aVal = a.status || 'todo';\r\n          bVal = b.status || 'todo';\r\n          break;\r\n        case 'priority':\r\n          const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3, none: 4 };\r\n          aVal = priorityOrder[a.priority as keyof typeof priorityOrder] ?? 4;\r\n          bVal = priorityOrder[b.priority as keyof typeof priorityOrder] ?? 4;\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      if (aVal < bVal) return sortOrder === 'asc' ? -1 : 1;\r\n      if (aVal > bVal) return sortOrder === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n    return flatTasks;\r\n  }, [tasks, searchQuery, statusFilter, hideCompleted, sortField, sortOrder, getTaskStatus]);\r\n\r\n  // Render cell based on column type\r\n  const renderCell = useCallback((task: Task, column: TableColumn) => {\r\n    const handleUpdate = (updates: Partial<Task>) => {\r\n      callbacks.onTaskUpdate?.({ ...task, ...updates });\r\n    };\r\n\r\n    // Helper to get custom field value\r\n    const getCustomFieldValue = <T,>(fieldId: string | undefined): T | undefined => {\r\n      if (!fieldId) return undefined;\r\n      const taskWithFields = task as Task & { customFields?: CustomFieldValue[] };\r\n      return taskWithFields.customFields?.find((cf: CustomFieldValue) => cf.fieldId === fieldId)?.value as T | undefined;\r\n    };\r\n\r\n    // Helper to update custom field value\r\n    const updateCustomField = (fieldId: string | undefined, value: any) => {\r\n      if (!fieldId) return;\r\n      const taskWithFields = task as Task & { customFields?: CustomFieldValue[] };\r\n      const customFields: CustomFieldValue[] = [...(taskWithFields.customFields || [])];\r\n      const idx = customFields.findIndex((cf: CustomFieldValue) => cf.fieldId === fieldId);\r\n      if (idx >= 0) {\r\n        customFields[idx] = { fieldId, value };\r\n      } else {\r\n        customFields.push({ fieldId, value });\r\n      }\r\n      handleUpdate({ customFields } as any);\r\n    };\r\n\r\n    switch (column.type) {\r\n      case 'name':\r\n        return null; // Handled separately with expand/collapse logic\r\n\r\n      case 'status':\r\n        return (\r\n          <StatusCell\r\n            value={task.status || (task.progress === 100 ? 'completed' : task.progress && task.progress > 0 ? 'in-progress' : 'todo')}\r\n            onChange={(status) => {\r\n              const progress = status === 'completed' ? 100 : status === 'in-progress' ? 50 : 0;\r\n              handleUpdate({ status, progress });\r\n            }}\r\n            isDark={isDark}\r\n            locale={locale}\r\n            translations={t.status}\r\n          />\r\n        );\r\n\r\n      case 'priority':\r\n        return (\r\n          <PriorityCell\r\n            value={task.priority}\r\n            onChange={(priority) => handleUpdate({ priority: priority as any })}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n        );\r\n\r\n      case 'assignees':\r\n        return (\r\n          <AssigneesCell\r\n            value={task.assignees || []}\r\n            availableUsers={availableUsers}\r\n            onChange={(assignees) => handleUpdate({ assignees })}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n        );\r\n\r\n      case 'startDate':\r\n        return (\r\n          <DateCell\r\n            value={task.startDate}\r\n            onChange={(startDate) => handleUpdate({ startDate })}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n        );\r\n\r\n      case 'endDate':\r\n        return (\r\n          <DateCell\r\n            value={task.endDate}\r\n            onChange={(endDate) => handleUpdate({ endDate })}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n        );\r\n\r\n      case 'progress':\r\n        return (\r\n          <ProgressCell\r\n            value={task.progress || 0}\r\n            onChange={(progress) => {\r\n              const status = progress === 100 ? 'completed' : progress > 0 ? 'in-progress' : 'todo';\r\n              handleUpdate({ progress, status });\r\n            }}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      case 'tags':\r\n        return (\r\n          <TagsCell\r\n            value={task.tags || []}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      case 'text':\r\n        return (\r\n          <TextCell\r\n            value={getCustomFieldValue<string>(column.customFieldId) || ''}\r\n            onChange={(value) => updateCustomField(column.customFieldId, value)}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      case 'number':\r\n        return (\r\n          <NumberCell\r\n            value={getCustomFieldValue<number>(column.customFieldId) || 0}\r\n            onChange={(value) => updateCustomField(column.customFieldId, value)}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      case 'date':\r\n        const dateVal = getCustomFieldValue<Date | string>(column.customFieldId);\r\n        return (\r\n          <DateCell\r\n            value={dateVal ? new Date(dateVal) : undefined}\r\n            onChange={(date) => updateCustomField(column.customFieldId, date)}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n        );\r\n\r\n      case 'dropdown':\r\n        return (\r\n          <DropdownCell\r\n            value={getCustomFieldValue<string>(column.customFieldId) || ''}\r\n            options={column.options || []}\r\n            onChange={(value) => updateCustomField(column.customFieldId, value)}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      case 'checkbox':\r\n        return (\r\n          <CheckboxCell\r\n            value={getCustomFieldValue<boolean>(column.customFieldId) || false}\r\n            onChange={(checked) => updateCustomField(column.customFieldId, checked)}\r\n            isDark={isDark}\r\n          />\r\n        );\r\n\r\n      default:\r\n        return <span className={cn(\"text-sm\", isDark ? \"text-[#94A3B8]\" : \"text-gray-500\")}>-</span>;\r\n    }\r\n  }, [callbacks, isDark, locale, availableUsers, t]);\r\n\r\n  // Get column label with translations\r\n  const getColumnLabel = useCallback((column: TableColumn) => {\r\n    const labelMap: Record<string, string> = {\r\n      name: t.columns.name,\r\n      status: t.columns.status,\r\n      priority: t.columns.priority,\r\n      assignees: t.columns.assignees,\r\n      startDate: t.columns.startDate,\r\n      endDate: t.columns.endDate,\r\n      progress: t.columns.progress,\r\n    };\r\n    return labelMap[column.type] || column.label;\r\n  }, [t]);\r\n\r\n  // Calculate total width for grid\r\n  const totalWidth = useMemo(() => {\r\n    return visibleColumns.reduce((sum, col) => sum + col.width, 0) + (allowColumnCustomization ? 48 : 0);\r\n  }, [visibleColumns, allowColumnCustomization]);\r\n\r\n  // Loading state\r\n  if (isLoading) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"w-8 h-8 animate-spin rounded-full border-b-2 border-[#3B82F6]\" />\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.empty.noTasks}...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"flex flex-col items-center gap-4 max-w-md text-center\">\r\n          <div className=\"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center\">\r\n            <span className=\"text-red-500 text-2xl\"></span>\r\n          </div>\r\n          <div>\r\n            <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n              Error\r\n            </h3>\r\n            <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n              {typeof error === 'string' ? error : error.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Empty state\r\n  if (tasks.length === 0) {\r\n    return (\r\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\r\n        <div className=\"text-center max-w-md\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[#3B82F6]/10 flex items-center justify-center\">\r\n            <List className=\"w-8 h-8 text-[#3B82F6]\" />\r\n          </div>\r\n          <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\r\n            {t.empty.noTasks}\r\n          </h3>\r\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {t.empty.addFirstTask}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={tableRef}\r\n      className={cn(\r\n        \"flex-1 flex flex-col w-full h-full overflow-hidden\",\r\n        isDark ? \"bg-[#0F1117]\" : \"bg-white\",\r\n        resizingColumn && \"select-none\",\r\n        className\r\n      )}\r\n      style={style}\r\n    >\r\n      {/* Toolbar */}\r\n      <div className={cn(\"flex-shrink-0 px-6 py-4 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\r\n        <div className=\"flex items-center gap-4\">\r\n          {/* Status Filter */}\r\n          <StatusFilter\r\n            value={statusFilter}\r\n            hideCompleted={hideCompleted}\r\n            onChange={setStatusFilter}\r\n            onHideCompletedChange={setHideCompleted}\r\n            isDark={isDark}\r\n            locale={locale}\r\n          />\r\n\r\n          {/* Search */}\r\n          {showSearch && (\r\n            <div className=\"relative flex-1 max-w-md\">\r\n              <Search className={cn(\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n              <input\r\n                type=\"text\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder={t.toolbar.searchPlaceholder}\r\n                className={cn(\r\n                  \"w-full h-9 pl-10 pr-4 rounded-lg border outline-none focus:ring-2 focus:ring-[#3B82F6]/30\",\r\n                  isDark\r\n                    ? \"bg-white/5 border-white/10 text-white placeholder:text-[#6B7280]\"\r\n                    : \"bg-gray-100 border-gray-200 text-gray-900 placeholder:text-gray-400\"\r\n                )}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Task count */}\r\n          <div className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n            {displayTasks.length} {t.pagination.tasks}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table Container */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        <div style={{ minWidth: totalWidth }}>\r\n          {/* List Header */}\r\n          <div\r\n            className={cn(\r\n              \"flex-shrink-0 flex items-center border-b text-xs font-medium uppercase tracking-wider sticky top-0 z-10\",\r\n              isDark ? \"border-white/10 bg-[#0F1117]\" : \"border-gray-200 bg-gray-50\"\r\n            )}\r\n          >\r\n            {visibleColumns.map((column) => (\r\n              <div\r\n                key={column.id}\r\n                className={cn(\r\n                  \"relative flex items-center gap-2 px-4 py-3\",\r\n                  isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\"\r\n                )}\r\n                style={{ width: column.width, minWidth: column.minWidth }}\r\n                onContextMenu={(e) => handleContextMenu(e, undefined, column.id)}\r\n              >\r\n                {column.sortable ? (\r\n                  <button\r\n                    onClick={() => handleSort(column.id)}\r\n                    className=\"flex items-center gap-1 hover:text-[#3B82F6]\"\r\n                  >\r\n                    {getColumnLabel(column)}\r\n                    <ArrowUpDown className={cn(\r\n                      \"w-3 h-3\",\r\n                      sortField === column.id && \"text-[#3B82F6]\"\r\n                    )} />\r\n                  </button>\r\n                ) : (\r\n                  <span>{getColumnLabel(column)}</span>\r\n                )}\r\n\r\n                {/* Resize handle */}\r\n                {allowColumnResize && column.resizable && (\r\n                  <div\r\n                    className={cn(\r\n                      \"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize group\",\r\n                      \"hover:bg-[#3B82F6]\",\r\n                      resizingColumn === column.id && \"bg-[#3B82F6]\"\r\n                    )}\r\n                    onMouseDown={(e) => handleResizeStart(e, column.id)}\r\n                  />\r\n                )}\r\n              </div>\r\n            ))}\r\n\r\n            {/* Add column button */}\r\n            {allowColumnCustomization && (\r\n              <div className=\"relative flex items-center justify-center px-3 py-3\">\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setShowColumnSelector(prev => !prev);\r\n                  }}\r\n                  className={cn(\r\n                    \"p-1.5 rounded-lg transition-colors\",\r\n                    isDark\r\n                      ? \"hover:bg-white/10 text-[#9CA3AF] hover:text-white\"\r\n                      : \"hover:bg-gray-200 text-gray-400 hover:text-gray-600\",\r\n                    showColumnSelector && (isDark ? \"bg-white/10\" : \"bg-gray-200\")\r\n                  )}\r\n                  title={locale === 'es' ? 'Agregar columna' : 'Add column'}\r\n                >\r\n                  <Plus className=\"w-4 h-4\" />\r\n                </button>\r\n\r\n                {/* Column Selector - positioned relative to button */}\r\n                <ColumnSelector\r\n                  isOpen={showColumnSelector}\r\n                  onClose={() => setShowColumnSelector(false)}\r\n                  columns={columns}\r\n                  customFields={customFields}\r\n                  onColumnsChange={handleColumnsChange}\r\n                  onCreateCustomField={() => {\r\n                    setShowColumnSelector(false);\r\n                    setShowCreateFieldModal(true);\r\n                  }}\r\n                  isDark={isDark}\r\n                  locale={locale}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Task List */}\r\n          <AnimatePresence>\r\n            {displayTasks.map((task, index) => {\r\n              const isExpanded = expandedTasks.has(task.id);\r\n\r\n              return (\r\n                <motion.div\r\n                  key={task.id}\r\n                  initial={{ opacity: 0, y: -10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: -10 }}\r\n                  transition={{ delay: index * 0.02 }}\r\n                  className={cn(\r\n                    \"flex items-center border-b transition-colors\",\r\n                    isDark\r\n                      ? \"border-white/5 hover:bg-white/5\"\r\n                      : \"border-gray-100 hover:bg-gray-50\"\r\n                  )}\r\n                  onClick={() => callbacks.onTaskClick?.(task)}\r\n                  onDoubleClick={() => callbacks.onTaskDoubleClick?.(task)}\r\n                  onContextMenu={(e) => handleContextMenu(e, task)}\r\n                >\r\n                  {visibleColumns.map((column) => (\r\n                    <div\r\n                      key={column.id}\r\n                      className=\"flex items-center px-4 py-3 min-h-[52px]\"\r\n                      style={{ width: column.width, minWidth: column.minWidth }}\r\n                    >\r\n                      {column.type === 'name' ? (\r\n                        // Name column with hierarchy\r\n                        <div className=\"flex items-center gap-2 min-w-0 w-full\">\r\n                          {/* Indentation spacer for hierarchy levels */}\r\n                          {showHierarchy && task.level > 0 && (\r\n                            <div style={{ width: `${task.level * 24}px` }} className=\"flex-shrink-0\" />\r\n                          )}\r\n                          {showHierarchy && task.hasChildren && (\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                toggleExpand(task.id);\r\n                              }}\r\n                              className={cn(\"p-0.5 rounded flex-shrink-0\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-200\")}\r\n                            >\r\n                              {isExpanded ? (\r\n                                <ChevronDown className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n                              ) : (\r\n                                <ChevronRight className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-400\")} />\r\n                              )}\r\n                            </button>\r\n                          )}\r\n                          {showHierarchy && !task.hasChildren && <div className=\"w-5 flex-shrink-0\" />}\r\n\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              callbacks.onTaskUpdate?.({\r\n                                ...task,\r\n                                progress: task.progress === 100 ? 0 : 100,\r\n                                status: task.progress === 100 ? 'todo' : 'completed'\r\n                              });\r\n                            }}\r\n                            className=\"flex-shrink-0\"\r\n                          >\r\n                            <StatusIcon status={task.status} progress={task.progress} />\r\n                          </button>\r\n\r\n                          <span className={cn(\r\n                            \"truncate font-medium\",\r\n                            isDark ? \"text-white\" : \"text-gray-900\",\r\n                            task.progress === 100 && (isDark ? \"line-through text-[#6B7280]\" : \"line-through text-gray-400\")\r\n                          )}>\r\n                            {task.name}\r\n                          </span>\r\n                        </div>\r\n                      ) : (\r\n                        renderCell(task, column)\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n\r\n                  {/* Empty cell for add column button alignment */}\r\n                  {allowColumnCustomization && (\r\n                    <div className=\"w-12 flex-shrink-0\" />\r\n                  )}\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </AnimatePresence>\r\n\r\n          {/* Empty search state */}\r\n          {displayTasks.length === 0 && searchQuery && (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"text-center\">\r\n                <List className={cn(\"w-12 h-12 mx-auto mb-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\r\n                <p className={cn(isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\r\n                  {t.empty.noResults}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Context Menu */}\r\n      <TableContextMenu\r\n        state={contextMenu}\r\n        onClose={closeContextMenu}\r\n        isDark={isDark}\r\n        locale={locale}\r\n        onTaskEdit={callbacks.onTaskEdit}\r\n        onTaskDuplicate={callbacks.onTaskDuplicate}\r\n        onTaskDelete={callbacks.onTaskDelete}\r\n        onTaskUpdate={callbacks.onTaskUpdate}\r\n        onColumnHide={handleColumnHide}\r\n        onColumnSort={handleColumnSort}\r\n        availableUsers={availableUsers}\r\n      />\r\n\r\n      {/* Create Field Modal */}\r\n      <CreateFieldModal\r\n        isOpen={showCreateFieldModal}\r\n        onClose={() => setShowCreateFieldModal(false)}\r\n        onSave={handleCreateCustomField}\r\n        isDark={isDark}\r\n        locale={locale}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ListView;\r\n","/**\r\n * ListView Component Types\r\n * @version 0.18.0\r\n *\r\n * v0.18.0: Added dynamic columns, custom fields, context menu support\r\n */\r\n\r\nimport type { Task } from '../Gantt/types';\r\nimport type { User } from '../../types';\r\n\r\n/**\r\n * Sort direction for list columns\r\n */\r\nexport type SortDirection = 'asc' | 'desc';\r\n\r\n/**\r\n * Column types supported in ListView\r\n * - Standard: name, status, priority, assignees, startDate, endDate, progress, tags\r\n * - Custom: text, number, date, dropdown, checkbox\r\n */\r\nexport type ColumnType =\r\n  | 'name'        // Task name (always visible, first column)\r\n  | 'status'      // Todo/In Progress/Completed\r\n  | 'priority'    // Urgent/High/Medium/Low\r\n  | 'assignees'   // Assigned users\r\n  | 'startDate'   // Start date\r\n  | 'endDate'     // End date / Due date\r\n  | 'progress'    // Progress percentage\r\n  | 'tags'        // Task tags/labels\r\n  // Custom field types\r\n  | 'text'        // Custom text field\r\n  | 'number'      // Custom number field\r\n  | 'date'        // Custom date field\r\n  | 'dropdown'    // Custom dropdown/select\r\n  | 'checkbox';   // Custom checkbox/boolean\r\n\r\n/**\r\n * Table column configuration for dynamic columns\r\n */\r\nexport interface TableColumn {\r\n  /** Unique column identifier */\r\n  id: string;\r\n  /** Column type */\r\n  type: ColumnType;\r\n  /** Display label */\r\n  label: string;\r\n  /** Column width in pixels */\r\n  width: number;\r\n  /** Minimum width */\r\n  minWidth?: number;\r\n  /** Maximum width */\r\n  maxWidth?: number;\r\n  /** Is column visible */\r\n  visible: boolean;\r\n  /** Can be sorted */\r\n  sortable?: boolean;\r\n  /** Can be resized */\r\n  resizable?: boolean;\r\n  /** For custom fields - reference to field definition */\r\n  customFieldId?: string;\r\n  /** For dropdown type - available options */\r\n  options?: string[];\r\n}\r\n\r\n/**\r\n * Custom field definition for user-created fields\r\n */\r\nexport interface CustomFieldDefinition {\r\n  /** Unique field ID */\r\n  id: string;\r\n  /** Field display name */\r\n  name: string;\r\n  /** Field type */\r\n  type: 'text' | 'number' | 'date' | 'dropdown' | 'checkbox';\r\n  /** Options for dropdown type */\r\n  options?: string[];\r\n  /** Default value */\r\n  defaultValue?: string | number | boolean | Date;\r\n  /** Is field required */\r\n  required?: boolean;\r\n  /** Project this field belongs to */\r\n  projectId?: string;\r\n}\r\n\r\n/**\r\n * Custom field value stored on task\r\n */\r\nexport interface CustomFieldValue {\r\n  fieldId: string;\r\n  value: string | number | boolean | Date | null;\r\n}\r\n\r\n/**\r\n * Context menu action types\r\n */\r\nexport type ContextMenuAction =\r\n  | 'edit'\r\n  | 'changeStatus'\r\n  | 'changePriority'\r\n  | 'assignUser'\r\n  | 'duplicate'\r\n  | 'delete'\r\n  | 'sortAsc'\r\n  | 'sortDesc'\r\n  | 'hideColumn'\r\n  | 'moveLeft'\r\n  | 'moveRight';\r\n\r\n/**\r\n * Context menu state\r\n */\r\nexport interface ContextMenuState {\r\n  isOpen: boolean;\r\n  x: number;\r\n  y: number;\r\n  type: 'task' | 'header';\r\n  task?: Task;\r\n  columnId?: string;\r\n}\r\n\r\n/**\r\n * Sortable columns in the list view\r\n * @deprecated Use ColumnType instead\r\n */\r\nexport type ListSortColumn =\r\n  | 'name'\r\n  | 'startDate'\r\n  | 'endDate'\r\n  | 'progress'\r\n  | 'status'\r\n  | 'assignees'\r\n  | 'priority';\r\n\r\n/**\r\n * Sort configuration\r\n */\r\nexport interface ListSort {\r\n  column: ListSortColumn;\r\n  direction: SortDirection;\r\n}\r\n\r\n/**\r\n * Filter configuration for list view\r\n */\r\nexport interface ListFilter {\r\n  search?: string;\r\n  status?: Array<'todo' | 'in-progress' | 'completed'>;\r\n  assignees?: string[];\r\n  dateRange?: {\r\n    start: Date;\r\n    end: Date;\r\n  };\r\n  showCompleted?: boolean;\r\n}\r\n\r\n/**\r\n * Column configuration for list view\r\n */\r\nexport interface ListColumn {\r\n  id: ListSortColumn | 'actions';\r\n  label: string;\r\n  width: number;\r\n  minWidth?: number;\r\n  maxWidth?: number;\r\n  visible: boolean;\r\n  sortable: boolean;\r\n  resizable?: boolean;\r\n}\r\n\r\n/**\r\n * Theme configuration for list view\r\n */\r\nexport interface ListViewTheme {\r\n  // Backgrounds\r\n  bgPrimary: string;\r\n  bgSecondary: string;\r\n  bgHover: string;\r\n  bgSelected: string;\r\n  bgAlternate: string;\r\n\r\n  // Borders\r\n  border: string;\r\n  borderLight: string;\r\n\r\n  // Text\r\n  textPrimary: string;\r\n  textSecondary: string;\r\n  textMuted: string;\r\n\r\n  // Accent colors\r\n  accent: string;\r\n  accentHover: string;\r\n  accentLight: string;\r\n\r\n  // Status colors\r\n  statusTodo: string;\r\n  statusInProgress: string;\r\n  statusCompleted: string;\r\n\r\n  // Interactive\r\n  focusRing: string;\r\n  checkboxBg: string;\r\n  checkboxChecked: string;\r\n}\r\n\r\n/**\r\n * Permissions for list view operations\r\n */\r\nexport interface ListViewPermissions {\r\n  canCreateTask?: boolean;\r\n  canUpdateTask?: boolean;\r\n  canDeleteTask?: boolean;\r\n  canBulkSelect?: boolean;\r\n  canExport?: boolean;\r\n  canSort?: boolean;\r\n  canFilter?: boolean;\r\n  canReorder?: boolean;\r\n}\r\n\r\n/**\r\n * ListView configuration\r\n */\r\nexport interface ListViewConfig {\r\n  /** Theme: 'dark' | 'light' | 'neutral' */\r\n  theme?: 'dark' | 'light' | 'neutral';\r\n  /** Locale for i18n */\r\n  locale?: 'en' | 'es' | string;\r\n  /** Custom translations */\r\n  customTranslations?: Partial<ListViewTranslations>;\r\n  /** Enable row selection */\r\n  enableSelection?: boolean;\r\n  /** Enable multi-select with checkboxes */\r\n  enableMultiSelect?: boolean;\r\n  /** Show search bar */\r\n  showSearch?: boolean;\r\n  /** Show filters */\r\n  showFilters?: boolean;\r\n  /** Show hierarchy indentation */\r\n  showHierarchy?: boolean;\r\n  /** Columns to display (legacy) */\r\n  columns?: ListColumn[];\r\n  /** Row height in pixels */\r\n  rowHeight?: number;\r\n  /** Available users for filtering */\r\n  availableUsers?: User[];\r\n  /** Permissions */\r\n  permissions?: ListViewPermissions;\r\n  /** Enable virtual scrolling for large lists */\r\n  enableVirtualization?: boolean;\r\n  /** Items per page (0 = no pagination) */\r\n  pageSize?: number;\r\n\r\n  // v0.18.0: New column customization options\r\n  /** Dynamic table columns configuration */\r\n  tableColumns?: TableColumn[];\r\n  /** Allow user to add/remove/reorder columns via \"+\" button */\r\n  allowColumnCustomization?: boolean;\r\n  /** Allow user to resize columns by dragging */\r\n  allowColumnResize?: boolean;\r\n  /** Enable context menu on right-click */\r\n  enableContextMenu?: boolean;\r\n}\r\n\r\n/**\r\n * ListView translations\r\n */\r\nexport interface ListViewTranslations {\r\n  // Column headers\r\n  columns: {\r\n    name: string;\r\n    startDate: string;\r\n    endDate: string;\r\n    progress: string;\r\n    status: string;\r\n    assignees: string;\r\n    priority: string;\r\n    actions: string;\r\n  };\r\n\r\n  // Toolbar\r\n  toolbar: {\r\n    search: string;\r\n    searchPlaceholder: string;\r\n    filter: string;\r\n    clearFilters: string;\r\n    export: string;\r\n    columns: string;\r\n    newTask: string;\r\n  };\r\n\r\n  // Filters\r\n  filters: {\r\n    status: string;\r\n    assignees: string;\r\n    dateRange: string;\r\n    showCompleted: string;\r\n    all: string;\r\n    none: string;\r\n  };\r\n\r\n  // Status labels\r\n  status: {\r\n    todo: string;\r\n    inProgress: string;\r\n    completed: string;\r\n  };\r\n\r\n  // Actions\r\n  actions: {\r\n    edit: string;\r\n    delete: string;\r\n    duplicate: string;\r\n    viewDetails: string;\r\n  };\r\n\r\n  // Empty states\r\n  empty: {\r\n    noTasks: string;\r\n    noResults: string;\r\n    addFirstTask: string;\r\n  };\r\n\r\n  // Pagination\r\n  pagination: {\r\n    showing: string;\r\n    of: string;\r\n    tasks: string;\r\n    previous: string;\r\n    next: string;\r\n  };\r\n\r\n  // Bulk actions\r\n  bulk: {\r\n    selected: string;\r\n    delete: string;\r\n    move: string;\r\n    assignTo: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Callback functions for ListView\r\n */\r\nexport interface ListViewCallbacks {\r\n  /** Task click handler */\r\n  onTaskClick?: (task: Task) => void;\r\n  /** Task double-click handler */\r\n  onTaskDoubleClick?: (task: Task) => void;\r\n  /** Task update handler */\r\n  onTaskUpdate?: (task: Task) => void;\r\n  /** Task delete handler */\r\n  onTaskDelete?: (taskId: string) => void;\r\n  /** Task create handler */\r\n  onTaskCreate?: (parentId?: string) => void;\r\n  /** Bulk delete handler */\r\n  onBulkDelete?: (taskIds: string[]) => void;\r\n  /** Sort change handler */\r\n  onSortChange?: (sort: ListSort) => void;\r\n  /** Filter change handler */\r\n  onFilterChange?: (filter: ListFilter) => void;\r\n  /** Selection change handler */\r\n  onSelectionChange?: (selectedIds: string[]) => void;\r\n  /** Row expand/collapse handler */\r\n  onTaskToggleExpand?: (taskId: string) => void;\r\n  /** Export handler */\r\n  onExport?: (format: 'csv' | 'json' | 'excel') => void;\r\n\r\n  // v0.18.0: New callbacks for column customization and context menu\r\n  /** Columns configuration changed (visibility, order, width) */\r\n  onColumnsChange?: (columns: TableColumn[]) => void;\r\n  /** Task edit requested (from context menu) */\r\n  onTaskEdit?: (task: Task) => void;\r\n  /** Task duplicate requested (from context menu) */\r\n  onTaskDuplicate?: (task: Task) => void;\r\n  /** Create custom field */\r\n  onCreateCustomField?: (field: CustomFieldDefinition) => Promise<void>;\r\n}\r\n\r\n/**\r\n * Available user for assignment\r\n */\r\nexport interface AvailableUser {\r\n  id: string;\r\n  name: string;\r\n  email?: string;\r\n  avatarUrl?: string;\r\n  color?: string;\r\n}\r\n\r\n/**\r\n * Main ListView props\r\n */\r\nexport interface ListViewProps {\r\n  /** Tasks to display */\r\n  tasks: Task[];\r\n  /** Configuration */\r\n  config?: ListViewConfig;\r\n  /** Callbacks */\r\n  callbacks?: ListViewCallbacks;\r\n  /** Loading state */\r\n  isLoading?: boolean;\r\n  /** Error state */\r\n  error?: Error | string;\r\n  /** Custom CSS class */\r\n  className?: string;\r\n  /** Inline styles */\r\n  style?: React.CSSProperties;\r\n\r\n  // v0.18.0: New props for column customization\r\n  /** Available users for assignment in context menu */\r\n  availableUsers?: AvailableUser[];\r\n  /** Custom fields defined for this project */\r\n  customFields?: CustomFieldDefinition[];\r\n}\r\n\r\n/**\r\n * Flattened task with hierarchy info\r\n */\r\nexport interface FlattenedTask extends Task {\r\n  level: number;\r\n  hasChildren: boolean;\r\n  parentPath: string[];\r\n}\r\n\r\n/**\r\n * Default columns configuration\r\n * Used when no tableColumns are provided\r\n */\r\nexport const DEFAULT_TABLE_COLUMNS: TableColumn[] = [\r\n  { id: 'name', type: 'name', label: 'Name', width: 300, visible: true, sortable: true, resizable: true },\r\n  { id: 'status', type: 'status', label: 'Status', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'priority', type: 'priority', label: 'Priority', width: 100, visible: false, sortable: true, resizable: true },\r\n  { id: 'assignees', type: 'assignees', label: 'Assignees', width: 150, visible: false, sortable: false, resizable: true },\r\n  { id: 'startDate', type: 'startDate', label: 'Start Date', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'endDate', type: 'endDate', label: 'End Date', width: 120, visible: true, sortable: true, resizable: true },\r\n  { id: 'progress', type: 'progress', label: 'Progress', width: 100, visible: true, sortable: true, resizable: true },\r\n  { id: 'tags', type: 'tags', label: 'Tags', width: 150, visible: false, sortable: false, resizable: true },\r\n];\r\n\r\n/**\r\n * Standard field definitions (non-custom)\r\n * Used in column selector to show available fields\r\n */\r\nexport const STANDARD_FIELDS: Array<{ type: ColumnType; labelKey: string; icon: string }> = [\r\n  { type: 'name', labelKey: 'columns.name', icon: 'Type' },\r\n  { type: 'status', labelKey: 'columns.status', icon: 'CircleDot' },\r\n  { type: 'priority', labelKey: 'columns.priority', icon: 'Flag' },\r\n  { type: 'assignees', labelKey: 'columns.assignees', icon: 'Users' },\r\n  { type: 'startDate', labelKey: 'columns.startDate', icon: 'Calendar' },\r\n  { type: 'endDate', labelKey: 'columns.endDate', icon: 'CalendarCheck' },\r\n  { type: 'progress', labelKey: 'columns.progress', icon: 'BarChart' },\r\n  { type: 'tags', labelKey: 'columns.tags', icon: 'Tag' },\r\n];\r\n\r\n/**\r\n * Custom field type definitions\r\n * Used in \"Create Field\" modal\r\n */\r\nexport const CUSTOM_FIELD_TYPES: Array<{ type: CustomFieldDefinition['type']; labelKey: string; icon: string }> = [\r\n  { type: 'text', labelKey: 'customFields.text', icon: 'Type' },\r\n  { type: 'number', labelKey: 'customFields.number', icon: 'Hash' },\r\n  { type: 'date', labelKey: 'customFields.date', icon: 'Calendar' },\r\n  { type: 'dropdown', labelKey: 'customFields.dropdown', icon: 'ChevronDown' },\r\n  { type: 'checkbox', labelKey: 'customFields.checkbox', icon: 'CheckSquare' },\r\n];\r\n","/**\r\n * ListView Themes\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { ListViewTheme } from './types';\r\n\r\n/**\r\n * Dark theme for ListView\r\n */\r\nexport const darkTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#0d1117',\r\n  bgSecondary: '#161b22',\r\n  bgHover: '#21262d',\r\n  bgSelected: '#1f6feb20',\r\n  bgAlternate: '#0d111780',\r\n\r\n  // Borders\r\n  border: '#30363d',\r\n  borderLight: '#21262d',\r\n\r\n  // Text\r\n  textPrimary: '#c9d1d9',\r\n  textSecondary: '#8b949e',\r\n  textMuted: '#6e7681',\r\n\r\n  // Accent colors\r\n  accent: '#58a6ff',\r\n  accentHover: '#79b8ff',\r\n  accentLight: '#58a6ff20',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#f0883e',\r\n  statusCompleted: '#3fb950',\r\n\r\n  // Interactive\r\n  focusRing: '#58a6ff',\r\n  checkboxBg: '#21262d',\r\n  checkboxChecked: '#58a6ff',\r\n};\r\n\r\n/**\r\n * Light theme for ListView\r\n */\r\nexport const lightTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#ffffff',\r\n  bgSecondary: '#f6f8fa',\r\n  bgHover: '#f3f4f6',\r\n  bgSelected: '#dbeafe',\r\n  bgAlternate: '#f9fafb',\r\n\r\n  // Borders\r\n  border: '#d0d7de',\r\n  borderLight: '#e5e7eb',\r\n\r\n  // Text\r\n  textPrimary: '#24292f',\r\n  textSecondary: '#57606a',\r\n  textMuted: '#8b949e',\r\n\r\n  // Accent colors\r\n  accent: '#0969da',\r\n  accentHover: '#0550ae',\r\n  accentLight: '#dbeafe',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#bf8700',\r\n  statusCompleted: '#1a7f37',\r\n\r\n  // Interactive\r\n  focusRing: '#0969da',\r\n  checkboxBg: '#ffffff',\r\n  checkboxChecked: '#0969da',\r\n};\r\n\r\n/**\r\n * Neutral theme for ListView\r\n */\r\nexport const neutralTheme: ListViewTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#1a1a2e',\r\n  bgSecondary: '#16213e',\r\n  bgHover: '#1f3460',\r\n  bgSelected: '#0f4c7520',\r\n  bgAlternate: '#1a1a2e80',\r\n\r\n  // Borders\r\n  border: '#2a3f5f',\r\n  borderLight: '#1f3460',\r\n\r\n  // Text\r\n  textPrimary: '#e4e6eb',\r\n  textSecondary: '#a8b2c1',\r\n  textMuted: '#6b7280',\r\n\r\n  // Accent colors\r\n  accent: '#6366f1',\r\n  accentHover: '#818cf8',\r\n  accentLight: '#6366f120',\r\n\r\n  // Status colors\r\n  statusTodo: '#9ca3af',\r\n  statusInProgress: '#fbbf24',\r\n  statusCompleted: '#34d399',\r\n\r\n  // Interactive\r\n  focusRing: '#6366f1',\r\n  checkboxBg: '#1f3460',\r\n  checkboxChecked: '#6366f1',\r\n};\r\n\r\n/**\r\n * All available themes\r\n */\r\nexport const listViewThemes = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n} as const;\r\n\r\nexport type ListViewThemeName = keyof typeof listViewThemes;\r\n\r\n/**\r\n * Get theme by name\r\n */\r\nexport function getListViewTheme(themeName: ListViewThemeName): ListViewTheme {\r\n  return listViewThemes[themeName] || listViewThemes.dark;\r\n}\r\n","/**\r\n * Internationalization (i18n) for CalendarBoard\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { CalendarTranslations } from './types';\r\n\r\nexport type CalendarSupportedLocale = 'en' | 'es';\r\n\r\n/**\r\n * English translations\r\n */\r\nexport const en: CalendarTranslations = {\r\n  navigation: {\r\n    today: 'Today',\r\n    previous: 'Previous',\r\n    next: 'Next',\r\n    month: 'Month',\r\n    week: 'Week',\r\n    day: 'Day',\r\n  },\r\n\r\n  weekdays: {\r\n    sun: 'Sun',\r\n    mon: 'Mon',\r\n    tue: 'Tue',\r\n    wed: 'Wed',\r\n    thu: 'Thu',\r\n    fri: 'Fri',\r\n    sat: 'Sat',\r\n  },\r\n\r\n  weekdaysFull: {\r\n    sunday: 'Sunday',\r\n    monday: 'Monday',\r\n    tuesday: 'Tuesday',\r\n    wednesday: 'Wednesday',\r\n    thursday: 'Thursday',\r\n    friday: 'Friday',\r\n    saturday: 'Saturday',\r\n  },\r\n\r\n  months: {\r\n    january: 'January',\r\n    february: 'February',\r\n    march: 'March',\r\n    april: 'April',\r\n    may: 'May',\r\n    june: 'June',\r\n    july: 'July',\r\n    august: 'August',\r\n    september: 'September',\r\n    october: 'October',\r\n    november: 'November',\r\n    december: 'December',\r\n  },\r\n\r\n  status: {\r\n    todo: 'To Do',\r\n    inProgress: 'In Progress',\r\n    completed: 'Completed',\r\n  },\r\n\r\n  labels: {\r\n    allDay: 'All day',\r\n    moreEvents: '+{count} more',\r\n    noEvents: 'No tasks',\r\n    newTask: 'New Task',\r\n    viewAll: 'View all',\r\n    week: 'Week',\r\n  },\r\n\r\n  tooltips: {\r\n    progress: 'Progress',\r\n    status: 'Status',\r\n    assignees: 'Assignees',\r\n    duration: 'Duration',\r\n    days: 'days',\r\n  },\r\n};\r\n\r\n/**\r\n * Spanish translations\r\n */\r\nexport const es: CalendarTranslations = {\r\n  navigation: {\r\n    today: 'Hoy',\r\n    previous: 'Anterior',\r\n    next: 'Siguiente',\r\n    month: 'Mes',\r\n    week: 'Semana',\r\n    day: 'Da',\r\n  },\r\n\r\n  weekdays: {\r\n    sun: 'Dom',\r\n    mon: 'Lun',\r\n    tue: 'Mar',\r\n    wed: 'Mi',\r\n    thu: 'Jue',\r\n    fri: 'Vie',\r\n    sat: 'Sb',\r\n  },\r\n\r\n  weekdaysFull: {\r\n    sunday: 'Domingo',\r\n    monday: 'Lunes',\r\n    tuesday: 'Martes',\r\n    wednesday: 'Mircoles',\r\n    thursday: 'Jueves',\r\n    friday: 'Viernes',\r\n    saturday: 'Sbado',\r\n  },\r\n\r\n  months: {\r\n    january: 'Enero',\r\n    february: 'Febrero',\r\n    march: 'Marzo',\r\n    april: 'Abril',\r\n    may: 'Mayo',\r\n    june: 'Junio',\r\n    july: 'Julio',\r\n    august: 'Agosto',\r\n    september: 'Septiembre',\r\n    october: 'Octubre',\r\n    november: 'Noviembre',\r\n    december: 'Diciembre',\r\n  },\r\n\r\n  status: {\r\n    todo: 'Por Hacer',\r\n    inProgress: 'En Progreso',\r\n    completed: 'Completado',\r\n  },\r\n\r\n  labels: {\r\n    allDay: 'Todo el da',\r\n    moreEvents: '+{count} ms',\r\n    noEvents: 'Sin tareas',\r\n    newTask: 'Nueva Tarea',\r\n    viewAll: 'Ver todo',\r\n    week: 'Semana',\r\n  },\r\n\r\n  tooltips: {\r\n    progress: 'Progreso',\r\n    status: 'Estado',\r\n    assignees: 'Asignados',\r\n    duration: 'Duracin',\r\n    days: 'das',\r\n  },\r\n};\r\n\r\n/**\r\n * All available translations\r\n */\r\nexport const calendarTranslations: Record<CalendarSupportedLocale, CalendarTranslations> = {\r\n  en,\r\n  es,\r\n};\r\n\r\n/**\r\n * Get translations for a specific locale\r\n */\r\nexport function getCalendarTranslations(locale: CalendarSupportedLocale | string): CalendarTranslations {\r\n  return calendarTranslations[locale as CalendarSupportedLocale] || calendarTranslations.en;\r\n}\r\n\r\n/**\r\n * Merge custom translations with default translations\r\n */\r\nexport function mergeCalendarTranslations(\r\n  locale: CalendarSupportedLocale | string,\r\n  customTranslations?: Partial<CalendarTranslations>\r\n): CalendarTranslations {\r\n  const base = getCalendarTranslations(locale);\r\n\r\n  if (!customTranslations) {\r\n    return base;\r\n  }\r\n\r\n  return {\r\n    navigation: { ...base.navigation, ...customTranslations.navigation },\r\n    weekdays: { ...base.weekdays, ...customTranslations.weekdays },\r\n    weekdaysFull: { ...base.weekdaysFull, ...customTranslations.weekdaysFull },\r\n    months: { ...base.months, ...customTranslations.months },\r\n    status: { ...base.status, ...customTranslations.status },\r\n    labels: { ...base.labels, ...customTranslations.labels },\r\n    tooltips: { ...base.tooltips, ...customTranslations.tooltips },\r\n  };\r\n}\r\n\r\n/**\r\n * Get month names array based on locale\r\n */\r\nexport function getMonthNames(locale: CalendarSupportedLocale | string): string[] {\r\n  const t = getCalendarTranslations(locale);\r\n  return [\r\n    t.months.january,\r\n    t.months.february,\r\n    t.months.march,\r\n    t.months.april,\r\n    t.months.may,\r\n    t.months.june,\r\n    t.months.july,\r\n    t.months.august,\r\n    t.months.september,\r\n    t.months.october,\r\n    t.months.november,\r\n    t.months.december,\r\n  ];\r\n}\r\n\r\n/**\r\n * Get weekday names array based on locale and first day of week\r\n */\r\nexport function getWeekdayNames(\r\n  locale: CalendarSupportedLocale | string,\r\n  firstDayOfWeek: number = 0,\r\n  short: boolean = true\r\n): string[] {\r\n  const t = getCalendarTranslations(locale);\r\n  const weekdays = short\r\n    ? [t.weekdays.sun, t.weekdays.mon, t.weekdays.tue, t.weekdays.wed, t.weekdays.thu, t.weekdays.fri, t.weekdays.sat]\r\n    : [\r\n        t.weekdaysFull.sunday,\r\n        t.weekdaysFull.monday,\r\n        t.weekdaysFull.tuesday,\r\n        t.weekdaysFull.wednesday,\r\n        t.weekdaysFull.thursday,\r\n        t.weekdaysFull.friday,\r\n        t.weekdaysFull.saturday,\r\n      ];\r\n\r\n  // Rotate array to start from firstDayOfWeek\r\n  return [...weekdays.slice(firstDayOfWeek), ...weekdays.slice(0, firstDayOfWeek)];\r\n}\r\n","/**\n * CalendarBoard Component\n * Professional calendar view for task management\n * Based on SaaS ProjectCalendar component styles\n * @version 0.17.243\n */\n\nimport { useState, useMemo, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Calendar,\n  ChevronLeft,\n  ChevronRight,\n  ChevronDown,\n  Check,\n  CheckCircle2,\n  Circle,\n  PlayCircle,\n  X,\n  Flag,\n  User,\n  CalendarDays,\n  Clock,\n  Tag,\n  Link2,\n  FileText,\n  MessageSquare,\n  MoreHorizontal,\n  Sparkles,\n  Plus,\n  ListChecks,\n  Upload,\n  Maximize2,\n  Trash2,\n  File,\n  Image,\n  FileText as FileTextIcon,\n  Palette,\n  Diamond,\n  Send,\n} from 'lucide-react';\nimport type { Task } from '../Gantt/types';\nimport type { Attachment } from '../../types';\nimport type { CalendarBoardProps, CalendarDay } from './types';\nimport { mergeCalendarTranslations } from './i18n';\nimport { cn } from '../../utils';\nimport { TagPicker } from '../Gantt/TagPicker';\nimport { TASK_COLORS } from '../Gantt/ColorPicker';\n\n/**\n * Flatten hierarchical tasks to flat list\n */\nfunction flattenTasks(tasks: Task[]): Task[] {\n  const result: Task[] = [];\n\n  function traverse(taskList: Task[]) {\n    for (const task of taskList) {\n      result.push(task);\n      if (task.subtasks?.length) {\n        traverse(task.subtasks);\n      }\n    }\n  }\n\n  traverse(tasks);\n  return result;\n}\n\n/**\n * Check if a date falls within a task's date range\n */\nfunction isDateInTaskRange(date: Date, task: Task): boolean {\n  if (!task.startDate || !task.endDate) return false;\n\n  const dateOnly = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  const startOnly = new Date(task.startDate.getFullYear(), task.startDate.getMonth(), task.startDate.getDate());\n  const endOnly = new Date(task.endDate.getFullYear(), task.endDate.getMonth(), task.endDate.getDate());\n\n  return dateOnly >= startOnly && dateOnly <= endOnly;\n}\n\n/**\n * Status Icon component\n */\nfunction StatusIcon({ task }: { task: Task }) {\n  if (task.progress === 100 || task.status === 'completed') {\n    return <CheckCircle2 className=\"w-3 h-3 text-green-500 flex-shrink-0\" />;\n  }\n  if ((task.progress && task.progress > 0) || task.status === 'in-progress') {\n    return <PlayCircle className=\"w-3 h-3 text-blue-500 flex-shrink-0\" />;\n  }\n  return <Circle className=\"w-3 h-3 text-gray-400 flex-shrink-0\" />;\n}\n\n/**\n * Main CalendarBoard Component\n */\nexport function CalendarBoard({\n  tasks,\n  config = {},\n  callbacks = {},\n  initialDate,\n  isLoading = false,\n  error,\n  className,\n  style,\n  availableTags = [],\n  onCreateTag,\n  attachmentsByTask,\n  comments,\n  onAddComment,\n  currentUser,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  mentionableUsers: _mentionableUsers, // TODO: Implement MentionInput in CalendarBoard\n  onTaskOpen,\n}: CalendarBoardProps) {\n  const {\n    theme: themeName = 'dark',\n    locale = 'en',\n    customTranslations,\n  } = config;\n\n  const t = mergeCalendarTranslations(locale, customTranslations);\n  const isDark = themeName === 'dark';\n\n  // Theme object for TagPicker\n  const tagPickerTheme = {\n    textTertiary: isDark ? '#6B7280' : '#9CA3AF',\n    textSecondary: isDark ? '#9CA3AF' : '#6B7280',\n    textPrimary: isDark ? '#FFFFFF' : '#111827',\n    borderLight: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n    border: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',\n    bgPrimary: isDark ? '#1A1D25' : '#FFFFFF',\n    bgSecondary: isDark ? '#0F1117' : '#F9FAFB',\n    hoverBg: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)',\n  };\n\n  // State\n  const [currentDate, setCurrentDate] = useState(initialDate || new Date());\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n  const [selectedDay, setSelectedDay] = useState<CalendarDay | null>(null); // v0.17.83: For \"+X more\" popover\n  const [showDatePicker, setShowDatePicker] = useState<'start' | 'end' | null>(null); // v0.17.84: ClickUp style date picker\n  const [datePickerMonth, setDatePickerMonth] = useState(new Date()); // Current month in date picker\n  // v0.17.91: Track expanded cells - key is day index, value is number of visible tasks\n  const [expandedCells, setExpandedCells] = useState<Record<number, number>>({});\n  const DEFAULT_VISIBLE_TASKS = 4; // Show 4 tasks by default\n  const TASKS_INCREMENT = 3; // Show 3 more tasks each time user clicks \"more\"\n\n  // v0.17.92: Modal dropdown states for interactive editing\n  const [showStatusDropdown, setShowStatusDropdown] = useState(false);\n  const [showPriorityDropdown, setShowPriorityDropdown] = useState(false);\n  const [showAssigneesDropdown, setShowAssigneesDropdown] = useState(false);\n  const [editingProgress, setEditingProgress] = useState(false);\n\n  // v0.17.99: Quick create task popover state (per cell)\n  const [quickCreateCell, setQuickCreateCell] = useState<number | null>(null); // Which cell index has the popover open\n  const [quickCreateName, setQuickCreateName] = useState('');\n  // v0.17.104: Quick create functional dropdowns\n  const [quickCreatePriority, setQuickCreatePriority] = useState<Task['priority']>(undefined);\n  const [quickCreateAssignee, setQuickCreateAssignee] = useState<string | null>(null);\n  const [showQuickPriorityDropdown, setShowQuickPriorityDropdown] = useState(false);\n  const [showQuickAssigneeDropdown, setShowQuickAssigneeDropdown] = useState(false);\n  // v0.17.105: Quick create date picker\n  const [quickCreateDate, setQuickCreateDate] = useState<Date | null>(null);\n  const [showQuickDatePicker, setShowQuickDatePicker] = useState(false);\n  const [quickDatePickerMonth, setQuickDatePickerMonth] = useState(new Date());\n\n  // v0.17.241: Attachment states for modal\n  const [isDraggingFile, setIsDraggingFile] = useState(false);\n  const [isUploadingFiles, setIsUploadingFiles] = useState(false);\n\n  // v0.17.243: Dependencies states for modal\n  const [showDependenciesDropdown, setShowDependenciesDropdown] = useState(false);\n  const [dependencySearch, setDependencySearch] = useState('');\n\n  // v0.17.244: Color picker state for modal\n  const [showColorPicker, setShowColorPicker] = useState(false);\n\n  // v0.17.255: Comment input state (to match TaskDetailModal UI)\n  const [commentText, setCommentText] = useState('');\n  const [isSubmittingComment, setIsSubmittingComment] = useState(false);\n\n  // Navigate months\n  const goToPreviousMonth = useCallback(() => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\n  }, [currentDate]);\n\n  const goToNextMonth = useCallback(() => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\n  }, [currentDate]);\n\n  const goToToday = useCallback(() => {\n    setCurrentDate(new Date());\n  }, []);\n\n  // Generate calendar days\n  const calendarDays = useMemo((): CalendarDay[] => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n\n    const firstDayOfMonth = new Date(year, month, 1);\n    const lastDayOfMonth = new Date(year, month + 1, 0);\n\n    const startDay = firstDayOfMonth.getDay();\n    const daysInMonth = lastDayOfMonth.getDate();\n\n    const flatTaskList = flattenTasks(tasks);\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const days: CalendarDay[] = [];\n\n    // Previous month days\n    const prevMonthDays = startDay;\n    const prevMonthLastDay = new Date(year, month, 0).getDate();\n    for (let i = prevMonthDays - 1; i >= 0; i--) {\n      const date = new Date(year, month - 1, prevMonthLastDay - i);\n      days.push({\n        date,\n        isCurrentMonth: false,\n        isToday: false,\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\n          id: task.id,\n          title: task.name,\n          start: task.startDate!,\n          end: task.endDate!,\n          task,\n        })),\n      });\n    }\n\n    // Current month days\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(year, month, day);\n      const isToday = date.getTime() === today.getTime();\n      days.push({\n        date,\n        isCurrentMonth: true,\n        isToday,\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\n          id: task.id,\n          title: task.name,\n          start: task.startDate!,\n          end: task.endDate!,\n          task,\n        })),\n      });\n    }\n\n    // Next month days (fill to complete 6 rows)\n    const remainingDays = 42 - days.length;\n    for (let day = 1; day <= remainingDays; day++) {\n      const date = new Date(year, month + 1, day);\n      days.push({\n        date,\n        isCurrentMonth: false,\n        isToday: false,\n        isWeekend: date.getDay() === 0 || date.getDay() === 6,\n        events: flatTaskList.filter(t => isDateInTaskRange(date, t)).map(task => ({\n          id: task.id,\n          title: task.name,\n          start: task.startDate!,\n          end: task.endDate!,\n          task,\n        })),\n      });\n    }\n\n    return days;\n  }, [currentDate, tasks]);\n\n  // Day names\n  const dayNames = locale === 'es'\n    ? ['Dom', 'Lun', 'Mar', 'Mi', 'Jue', 'Vie', 'Sb']\n    : ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  // Month name\n  const monthName = currentDate.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\n    month: 'long',\n    year: 'numeric',\n  });\n\n  // v0.17.92: Update task field helper\n  const updateTaskField = useCallback((field: keyof Task, value: any) => {\n    if (!selectedTask) return;\n    const updatedTask = { ...selectedTask, [field]: value };\n    setSelectedTask(updatedTask);\n    callbacks.onTaskUpdate?.(updatedTask);\n  }, [selectedTask, callbacks]);\n\n  // v0.17.92: Update task status with progress sync\n  const updateTaskStatus = useCallback((status: string) => {\n    if (!selectedTask) return;\n    let progress = selectedTask.progress || 0;\n    if (status === 'completed') progress = 100;\n    else if (status === 'todo') progress = 0;\n    const updatedTask = { ...selectedTask, status, progress };\n    setSelectedTask(updatedTask);\n    callbacks.onTaskUpdate?.(updatedTask);\n    setShowStatusDropdown(false);\n  }, [selectedTask, callbacks]);\n\n  // v0.17.92: Update task dates\n  const updateTaskDates = useCallback((startDate: Date | undefined, endDate: Date | undefined) => {\n    if (!selectedTask) return;\n    const updatedTask = { ...selectedTask, startDate, endDate };\n    setSelectedTask(updatedTask);\n    callbacks.onTaskUpdate?.(updatedTask);\n  }, [selectedTask, callbacks]);\n\n  // v0.17.92: Close all dropdowns\n  const closeAllDropdowns = useCallback(() => {\n    setShowStatusDropdown(false);\n    setShowPriorityDropdown(false);\n    setShowAssigneesDropdown(false);\n    setShowDatePicker(null);\n    setShowDependenciesDropdown(false);\n    setDependencySearch('');\n    setShowColorPicker(false);\n  }, []);\n\n  // v0.17.241: Handle file drop for attachments\n  const handleFileDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(false);\n\n    if (!selectedTask || !callbacks.onUploadAttachments) return;\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length === 0) return;\n\n    setIsUploadingFiles(true);\n    try {\n      await callbacks.onUploadAttachments(selectedTask.id, files);\n    } finally {\n      setIsUploadingFiles(false);\n    }\n  }, [selectedTask, callbacks]);\n\n  // v0.17.241: Handle file input change\n  const handleFileInputChange = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (!selectedTask || !callbacks.onUploadAttachments || !e.target.files) return;\n\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n\n    setIsUploadingFiles(true);\n    try {\n      await callbacks.onUploadAttachments(selectedTask.id, files);\n    } finally {\n      setIsUploadingFiles(false);\n    }\n    e.target.value = '';\n  }, [selectedTask, callbacks]);\n\n  // v0.17.241: Handle drag events\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDraggingFile(false);\n  }, []);\n\n  // v0.17.241: Format file size\n  const formatFileSize = useCallback((bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  }, []);\n\n  // v0.17.241: Get file icon based on type\n  const getFileIcon = useCallback((mimeType: string) => {\n    if (mimeType.startsWith('image/')) return Image;\n    if (mimeType.includes('pdf') || mimeType.includes('document')) return FileTextIcon;\n    return File;\n  }, []);\n\n  // v0.17.241: Get current task attachments\n  const currentTaskAttachments: Attachment[] = useMemo(() => {\n    if (!selectedTask || !attachmentsByTask) return [];\n    return attachmentsByTask.get(selectedTask.id) || [];\n  }, [selectedTask, attachmentsByTask]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"w-8 h-8 animate-spin rounded-full border-b-2 border-[#3B82F6]\" />\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\n            {t.labels.noEvents}...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\n        <div className=\"flex flex-col items-center gap-4 max-w-md text-center\">\n          <div className=\"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center\">\n            <span className=\"text-red-500 text-2xl\"></span>\n          </div>\n          <div>\n            <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\n              Error\n            </h3>\n            <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\n              {typeof error === 'string' ? error : error.message}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state\n  if (tasks.length === 0) {\n    return (\n      <div className={cn(\"flex-1 flex items-center justify-center\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\n        <div className=\"text-center max-w-md\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[#3B82F6]/10 flex items-center justify-center\">\n            <Calendar className=\"w-8 h-8 text-[#3B82F6]\" />\n          </div>\n          <h3 className={cn(\"text-lg font-semibold mb-2\", isDark ? \"text-white\" : \"text-gray-900\")}>\n            {t.labels.noEvents}\n          </h3>\n          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\n            {t.labels.newTask}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn(\"flex-1 flex flex-col w-full h-full overflow-auto\", isDark ? \"bg-[#0F1117]\" : \"bg-white\", className)} style={style}>\n      {/* Calendar Header */}\n      <div className={cn(\"flex-shrink-0 px-6 py-4 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <h2 className={cn(\"text-xl font-semibold capitalize\", isDark ? \"text-white\" : \"text-gray-900\")}>\n              {monthName}\n            </h2>\n            <button\n              onClick={goToToday}\n              className={cn(\n                \"px-3 py-1.5 text-sm rounded-lg transition-colors\",\n                isDark\n                  ? \"bg-white/5 text-white hover:bg-white/10\"\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n              )}\n            >\n              {t.navigation.today}\n            </button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={goToPreviousMonth}\n              className={cn(\"p-2 rounded-lg transition-colors\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n            >\n              <ChevronLeft className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")} />\n            </button>\n            <button\n              onClick={goToNextMonth}\n              className={cn(\"p-2 rounded-lg transition-colors\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n            >\n              <ChevronRight className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Calendar Grid */}\n      <div className=\"flex-1 p-6 min-h-0\">\n        <div className=\"flex flex-col\">\n          {/* Day Headers */}\n          <div className=\"grid grid-cols-7 gap-px mb-2\">\n            {dayNames.map((day) => (\n              <div\n                key={day}\n                className={cn(\"py-2 text-center text-xs font-medium uppercase\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}\n              >\n                {day}\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar Days - v0.17.90: Auto-expanding rows to show all tasks like ClickUp */}\n          {/* v0.17.136: Improved grid border visibility - bg-white/10 for clearer borders */}\n          <div className={cn(\"grid grid-cols-7 auto-rows-min gap-px rounded-lg\", isDark ? \"bg-[#2D2D2D]\" : \"bg-gray-300\")}>\n            {calendarDays.map((day, index) => {\n              // v0.17.87: Weekend detection (Saturday=6, Sunday=0)\n              const isWeekend = day.date.getDay() === 0 || day.date.getDay() === 6;\n\n              return (\n              <div\n                key={index}\n                className={cn(\n                  \"min-h-[120px] p-2 transition-colors flex flex-col relative group\",\n                  // v0.17.136: ClickUp-style weekends - slightly lighter than weekdays\n                  isDark\n                    ? (isWeekend\n                        ? \"bg-[#1C1F26]\"  // ALL weekends: subtle lighter gray\n                        : (day.isCurrentMonth ? \"bg-[#13161B]\" : \"bg-[#0D0F13]\"))  // Weekdays: darker\n                    : (isWeekend\n                        ? \"bg-gray-100\"  // ALL weekends: same light gray\n                        : (day.isCurrentMonth ? \"bg-white\" : \"bg-gray-50\")),  // Weekdays vary\n                  day.isToday && \"ring-2 ring-[#3B82F6] ring-inset\"\n                )}\n              >\n                {/* v0.17.91: Show tasks with expandable \"more\" button like ClickUp */}\n                {(() => {\n                  const visibleCount = expandedCells[index] || DEFAULT_VISIBLE_TASKS;\n                  const visibleEvents = day.events.slice(0, visibleCount);\n                  const remainingCount = day.events.length - visibleCount;\n\n                  return (\n                    <div className=\"space-y-1 flex-1\">\n                      {visibleEvents.map((event) => (\n                        <div key={event.id} className=\"relative group\">\n                          <motion.button\n                            onClick={() => {\n                              setSelectedTask(event.task);\n                              callbacks.onEventClick?.(event);\n                              onTaskOpen?.(event.task.id);\n                            }}\n                            whileHover={{ scale: 1.02 }}\n                            className={cn(\n                              \"w-full flex items-center gap-1 px-1.5 py-0.5 rounded text-xs truncate\",\n                              event.task.progress === 100\n                                ? (isDark ? \"bg-green-500/20 text-green-400\" : \"bg-green-500/10 text-green-600\")\n                                : (isDark ? \"bg-[#3B82F6]/20 text-[#3B82F6]\" : \"bg-[#3B82F6]/10 text-[#3B82F6]\")\n                            )}\n                          >\n                            <StatusIcon task={event.task} />\n                            <span className=\"truncate\">{event.title}</span>\n                          </motion.button>\n                        </div>\n                      ))}\n                      {/* v0.17.91: \"+X MS\" / \"+X MORE\" button to expand cell */}\n                      {remainingCount > 0 && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setExpandedCells(prev => ({\n                              ...prev,\n                              [index]: visibleCount + TASKS_INCREMENT\n                            }));\n                          }}\n                          className={cn(\n                            \"text-xs px-1.5 py-0.5 hover:underline cursor-pointer font-medium\",\n                            isDark ? \"text-[#6B7280] hover:text-[#9CA3AF]\" : \"text-gray-400 hover:text-gray-600\"\n                          )}\n                        >\n                          +{remainingCount} {locale === 'es' ? 'MS' : 'MORE'}\n                        </button>\n                      )}\n                      {/* v0.17.91: \"MENOS\" / \"LESS\" button to collapse cell */}\n                      {visibleCount > DEFAULT_VISIBLE_TASKS && day.events.length > DEFAULT_VISIBLE_TASKS && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setExpandedCells(prev => ({\n                              ...prev,\n                              [index]: DEFAULT_VISIBLE_TASKS\n                            }));\n                          }}\n                          className={cn(\n                            \"text-xs px-1.5 py-0.5 hover:underline cursor-pointer font-medium\",\n                            isDark ? \"text-[#6B7280] hover:text-[#9CA3AF]\" : \"text-gray-400 hover:text-gray-600\"\n                          )}\n                        >\n                          {locale === 'es' ? 'MENOS' : 'LESS'}\n                        </button>\n                      )}\n                    </div>\n                  );\n                })()}\n\n                {/* v0.17.103: Day Number + Quick create button - bottom right like ClickUp */}\n                <div className=\"flex items-center justify-end gap-1.5 mt-1\">\n                  {/* v0.17.103: Quick create button with smart positioning */}\n                  {(() => {\n                    // Detect position: last 2 rows (index >= 28) open upward, last 2 columns (index % 7 >= 5) open left\n                    const isNearBottom = index >= 28;\n                    const isNearRight = index % 7 >= 5;\n\n                    return (\n                      <div className=\"relative\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            if (quickCreateCell === index) {\n                              setQuickCreateCell(null);\n                            } else {\n                              setQuickCreateCell(index);\n                              setQuickCreateName('');\n                              setQuickCreatePriority(undefined);\n                              setQuickCreateAssignee(null);\n                              setQuickCreateDate(null); // v0.17.105: Reset date (will use cell date by default)\n                              setShowQuickPriorityDropdown(false);\n                              setShowQuickAssigneeDropdown(false);\n                              setShowQuickDatePicker(false);\n                              setQuickDatePickerMonth(day.date); // Start with cell's month\n                            }\n                          }}\n                          className={cn(\n                            \"w-5 h-5 rounded flex items-center justify-center transition-all\",\n                            quickCreateCell === index\n                              ? \"opacity-100 bg-[#7C3AED] text-white\"\n                              : \"opacity-0 group-hover:opacity-100\",\n                            isDark\n                              ? \"hover:bg-[#7C3AED] text-[#6B7280] hover:text-white\"\n                              : \"hover:bg-[#7C3AED] text-gray-400 hover:text-white\"\n                          )}\n                        >\n                          <Plus className={cn(\"w-3.5 h-3.5 transition-transform\", quickCreateCell === index && \"rotate-45\")} />\n                        </button>\n\n                        {/* Quick create popover - smart positioning */}\n                        <AnimatePresence>\n                          {quickCreateCell === index && (\n                            <>\n                              <div\n                                className=\"fixed inset-0 z-40\"\n                                onClick={() => {\n                                  setQuickCreateCell(null);\n                                  setQuickCreateName('');\n                                  setQuickCreatePriority(undefined);\n                                  setQuickCreateAssignee(null);\n                                  setQuickCreateDate(null);\n                                  setShowQuickPriorityDropdown(false);\n                                  setShowQuickAssigneeDropdown(false);\n                                  setShowQuickDatePicker(false);\n                                }}\n                              />\n                              <motion.div\n                                initial={{ opacity: 0, y: isNearBottom ? -5 : 5, scale: 0.95 }}\n                                animate={{ opacity: 1, y: 0, scale: 1 }}\n                                exit={{ opacity: 0, y: isNearBottom ? -5 : 5, scale: 0.95 }}\n                                transition={{ duration: 0.12 }}\n                                className={cn(\n                                  \"absolute w-[320px] rounded-lg shadow-2xl z-50\",\n                                  // Vertical position: bottom or top\n                                  isNearBottom ? \"bottom-full mb-1\" : \"top-full mt-1\",\n                                  // Horizontal position: left or right\n                                  isNearRight ? \"right-0\" : \"left-0\",\n                                  isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                                )}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  // v0.17.107: Close any open dropdown when clicking inside the main popover\n                                  setShowQuickPriorityDropdown(false);\n                                  setShowQuickAssigneeDropdown(false);\n                                  setShowQuickDatePicker(false);\n                                }}\n                              >\n                                <div className=\"p-2.5\">\n                                  <input\n                                    type=\"text\"\n                                    value={quickCreateName}\n                                    onChange={(e) => setQuickCreateName(e.target.value)}\n                                    placeholder={locale === 'es' ? 'Escribe el nombre de la tarea o \"/\" para los comandos' : 'Type task name or \"/\" for commands'}\n                                    className={cn(\n                                      \"w-full bg-transparent text-sm outline-none placeholder:opacity-40\",\n                                      isDark ? \"text-white\" : \"text-gray-900\"\n                                    )}\n                                    autoFocus\n                                    onKeyDown={(e) => {\n                                      if (e.key === 'Enter' && quickCreateName.trim()) {\n                                        // v0.17.105: Include priority, assignee, and selected date in task creation\n                                        const selectedUser = config.availableUsers?.find(u => u.id === quickCreateAssignee);\n                                        const taskDate = quickCreateDate || day.date;\n                                        callbacks.onTaskCreate?.({\n                                          name: quickCreateName.trim(),\n                                          startDate: taskDate,\n                                          endDate: taskDate,\n                                          priority: quickCreatePriority,\n                                          assignees: selectedUser ? [selectedUser] : undefined,\n                                        });\n                                        setQuickCreateName('');\n                                        setQuickCreatePriority(undefined);\n                                        setQuickCreateAssignee(null);\n                                        setQuickCreateDate(null);\n                                        setQuickCreateCell(null);\n                                      }\n                                      if (e.key === 'Escape') {\n                                        setQuickCreateCell(null);\n                                        setQuickCreateName('');\n                                        setQuickCreatePriority(undefined);\n                                        setQuickCreateAssignee(null);\n                                        setQuickCreateDate(null);\n                                      }\n                                    }}\n                                  />\n                                </div>\n                                <div className={cn(\"px-2.5 py-2 flex items-center justify-between border-t\", isDark ? \"border-white/10\" : \"border-gray-100\")}>\n                                  <div className=\"flex items-center gap-1\">\n                                    {/* v0.17.104: Priority dropdown - functional */}\n                                    <div className=\"relative\">\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setShowQuickPriorityDropdown(!showQuickPriorityDropdown);\n                                          setShowQuickAssigneeDropdown(false);\n                                        }}\n                                        className={cn(\n                                          \"p-1 rounded transition-colors\",\n                                          quickCreatePriority\n                                            ? quickCreatePriority === 'urgent' || quickCreatePriority === 'high'\n                                              ? \"text-red-400 bg-red-500/20\"\n                                              : quickCreatePriority === 'medium'\n                                                ? \"text-yellow-400 bg-yellow-500/20\"\n                                                : \"text-green-400 bg-green-500/20\"\n                                            : isDark ? \"hover:bg-white/10 text-[#6B7280]\" : \"hover:bg-gray-100 text-gray-400\"\n                                        )}\n                                      >\n                                        <Flag className=\"w-3.5 h-3.5\" />\n                                      </button>\n                                      {/* Priority Dropdown */}\n                                      <AnimatePresence>\n                                        {showQuickPriorityDropdown && (\n                                          <motion.div\n                                            initial={{ opacity: 0, y: -5 }}\n                                            animate={{ opacity: 1, y: 0 }}\n                                            exit={{ opacity: 0, y: -5 }}\n                                            className={cn(\n                                              \"absolute left-0 bottom-full mb-1 z-[60] rounded-lg shadow-xl overflow-hidden min-w-[120px]\",\n                                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                                            )}\n                                            onClick={(e) => e.stopPropagation()}\n                                          >\n                                            {[\n                                              { id: 'urgent', label: locale === 'es' ? 'Urgente' : 'Urgent', color: 'bg-red-500' },\n                                              { id: 'high', label: locale === 'es' ? 'Alta' : 'High', color: 'bg-orange-500' },\n                                              { id: 'medium', label: locale === 'es' ? 'Media' : 'Medium', color: 'bg-yellow-500' },\n                                              { id: 'low', label: locale === 'es' ? 'Baja' : 'Low', color: 'bg-green-500' },\n                                              { id: undefined, label: locale === 'es' ? 'Sin prioridad' : 'No priority', color: 'bg-gray-400' },\n                                            ].map((priority) => (\n                                              <button\n                                                key={priority.id || 'none'}\n                                                onClick={() => {\n                                                  setQuickCreatePriority(priority.id as Task['priority']);\n                                                  setShowQuickPriorityDropdown(false);\n                                                }}\n                                                className={cn(\n                                                  \"w-full flex items-center gap-2 px-3 py-1.5 text-xs transition-colors text-left\",\n                                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                                  quickCreatePriority === priority.id && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                                )}\n                                              >\n                                                <span className={cn(\"w-2 h-2 rounded-full\", priority.color)} />\n                                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{priority.label}</span>\n                                              </button>\n                                            ))}\n                                          </motion.div>\n                                        )}\n                                      </AnimatePresence>\n                                    </div>\n\n                                    {/* v0.17.105: Date picker dropdown - ClickUp style */}\n                                    <div className=\"relative\">\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setShowQuickDatePicker(!showQuickDatePicker);\n                                          setShowQuickPriorityDropdown(false);\n                                          setShowQuickAssigneeDropdown(false);\n                                          setQuickDatePickerMonth(quickCreateDate || day.date);\n                                        }}\n                                        className={cn(\n                                          \"flex items-center gap-1 text-xs px-1.5 py-0.5 rounded transition-colors\",\n                                          quickCreateDate\n                                            ? \"bg-[#7C3AED]/20 text-[#7C3AED]\"\n                                            : isDark ? \"bg-white/5 text-[#9CA3AF] hover:bg-white/10\" : \"bg-gray-100 text-gray-500 hover:bg-gray-200\"\n                                        )}\n                                      >\n                                        <CalendarDays className=\"w-3 h-3\" />\n                                        {(quickCreateDate || day.date).toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' })}\n                                      </button>\n                                      {/* Date Picker Dropdown */}\n                                      <AnimatePresence>\n                                        {showQuickDatePicker && (\n                                          <motion.div\n                                            initial={{ opacity: 0, y: -5 }}\n                                            animate={{ opacity: 1, y: 0 }}\n                                            exit={{ opacity: 0, y: -5 }}\n                                            className={cn(\n                                              \"absolute left-0 bottom-full mb-1 z-[60] rounded-xl shadow-2xl overflow-hidden flex\",\n                                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                                            )}\n                                            onClick={(e) => e.stopPropagation()}\n                                          >\n                                            {/* Quick Options - Left Side */}\n                                            <div className={cn(\"w-40 py-2 border-r\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                                              {(() => {\n                                                const today = new Date();\n                                                const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1);\n                                                const nextSaturday = new Date(today); nextSaturday.setDate(today.getDate() + ((6 - today.getDay() + 7) % 7 || 7));\n                                                const nextMonday = new Date(today); nextMonday.setDate(today.getDate() + ((1 - today.getDay() + 7) % 7 || 7));\n                                                const twoWeeks = new Date(today); twoWeeks.setDate(today.getDate() + 14);\n                                                const fourWeeks = new Date(today); fourWeeks.setDate(today.getDate() + 28);\n\n                                                const quickOptions = [\n                                                  { label: locale === 'es' ? 'Hoy' : 'Today', date: today, display: today.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                                  { label: locale === 'es' ? 'Maana' : 'Tomorrow', date: tomorrow, display: tomorrow.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                                  { label: locale === 'es' ? 'Este fin de semana' : 'This weekend', date: nextSaturday, display: locale === 'es' ? 'sb.' : 'sat.' },\n                                                  { label: locale === 'es' ? 'Prxima semana' : 'Next week', date: nextMonday, display: locale === 'es' ? 'lun.' : 'mon.' },\n                                                  { label: locale === 'es' ? '2 semanas' : '2 weeks', date: twoWeeks, display: twoWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                                  { label: locale === 'es' ? '4 semanas' : '4 weeks', date: fourWeeks, display: fourWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                                ];\n\n                                                return quickOptions.map((option, i) => (\n                                                  <button\n                                                    key={i}\n                                                    className={cn(\n                                                      \"w-full flex items-center justify-between px-3 py-1.5 text-xs transition-colors\",\n                                                      isDark ? \"hover:bg-white/5 text-white\" : \"hover:bg-gray-50 text-gray-900\"\n                                                    )}\n                                                    onClick={() => {\n                                                      setQuickCreateDate(option.date);\n                                                      setShowQuickDatePicker(false);\n                                                    }}\n                                                  >\n                                                    <span>{option.label}</span>\n                                                    <span className={cn(\"text-[10px]\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                                      {option.display}\n                                                    </span>\n                                                  </button>\n                                                ));\n                                              })()}\n                                            </div>\n\n                                            {/* Calendar - Right Side */}\n                                            <div className=\"p-3\">\n                                              {/* Month Header */}\n                                              <div className=\"flex items-center justify-between mb-3\">\n                                                <span className={cn(\"text-xs font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                                  {quickDatePickerMonth.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'long', year: 'numeric' })}\n                                                </span>\n                                                <div className=\"flex items-center gap-0.5\">\n                                                  <button\n                                                    onClick={() => setQuickDatePickerMonth(new Date())}\n                                                    className={cn(\n                                                      \"px-1.5 py-0.5 rounded text-[10px] transition-colors\",\n                                                      isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\"\n                                                    )}\n                                                  >\n                                                    {locale === 'es' ? 'Hoy' : 'Today'}\n                                                  </button>\n                                                  <button\n                                                    onClick={() => setQuickDatePickerMonth(new Date(quickDatePickerMonth.getFullYear(), quickDatePickerMonth.getMonth() - 1))}\n                                                    className={cn(\"p-0.5 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                                  >\n                                                    <ChevronLeft className=\"w-3.5 h-3.5\" />\n                                                  </button>\n                                                  <button\n                                                    onClick={() => setQuickDatePickerMonth(new Date(quickDatePickerMonth.getFullYear(), quickDatePickerMonth.getMonth() + 1))}\n                                                    className={cn(\"p-0.5 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                                  >\n                                                    <ChevronRight className=\"w-3.5 h-3.5\" />\n                                                  </button>\n                                                </div>\n                                              </div>\n\n                                              {/* Weekday Headers */}\n                                              <div className=\"grid grid-cols-7 gap-0.5 mb-1\">\n                                                {(locale === 'es'\n                                                  ? ['do', 'lu', 'ma', 'mi', 'ju', 'vi', 's']\n                                                  : ['su', 'mo', 'tu', 'we', 'th', 'fr', 'sa']\n                                                ).map((d) => (\n                                                  <div key={d} className={cn(\"w-6 h-6 flex items-center justify-center text-[10px]\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                                    {d}\n                                                  </div>\n                                                ))}\n                                              </div>\n\n                                              {/* Calendar Days */}\n                                              <div className=\"grid grid-cols-7 gap-0.5\">\n                                                {(() => {\n                                                  const year = quickDatePickerMonth.getFullYear();\n                                                  const month = quickDatePickerMonth.getMonth();\n                                                  const firstDay = new Date(year, month, 1).getDay();\n                                                  const daysInMonth = new Date(year, month + 1, 0).getDate();\n                                                  const daysInPrevMonth = new Date(year, month, 0).getDate();\n                                                  const todayDate = new Date();\n                                                  const calDays = [];\n\n                                                  // Previous month days\n                                                  for (let i = firstDay - 1; i >= 0; i--) {\n                                                    calDays.push({ dayNum: daysInPrevMonth - i, isCurrentMonth: false, date: new Date(year, month - 1, daysInPrevMonth - i) });\n                                                  }\n                                                  // Current month days\n                                                  for (let i = 1; i <= daysInMonth; i++) {\n                                                    calDays.push({ dayNum: i, isCurrentMonth: true, date: new Date(year, month, i) });\n                                                  }\n                                                  // Next month days\n                                                  const remaining = 42 - calDays.length;\n                                                  for (let i = 1; i <= remaining; i++) {\n                                                    calDays.push({ dayNum: i, isCurrentMonth: false, date: new Date(year, month + 1, i) });\n                                                  }\n\n                                                  return calDays.map((d, i) => {\n                                                    const isToday = d.date.toDateString() === todayDate.toDateString();\n                                                    const isSelected = (quickCreateDate || day.date).toDateString() === d.date.toDateString();\n\n                                                    return (\n                                                      <button\n                                                        key={i}\n                                                        className={cn(\n                                                          \"w-6 h-6 rounded-full flex items-center justify-center text-[10px] transition-colors\",\n                                                          !d.isCurrentMonth && (isDark ? \"text-[#4B5563]\" : \"text-gray-300\"),\n                                                          d.isCurrentMonth && (isDark ? \"text-white\" : \"text-gray-900\"),\n                                                          isToday && \"ring-1 ring-[#3B82F6]\",\n                                                          isSelected && \"bg-[#7C3AED] text-white\",\n                                                          !isSelected && (isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")\n                                                        )}\n                                                        onClick={() => {\n                                                          setQuickCreateDate(d.date);\n                                                          setShowQuickDatePicker(false);\n                                                        }}\n                                                      >\n                                                        {d.dayNum}\n                                                      </button>\n                                                    );\n                                                  });\n                                                })()}\n                                              </div>\n                                            </div>\n                                          </motion.div>\n                                        )}\n                                      </AnimatePresence>\n                                    </div>\n\n                                    {/* v0.17.104: Assignee dropdown - functional */}\n                                    <div className=\"relative\">\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          setShowQuickAssigneeDropdown(!showQuickAssigneeDropdown);\n                                          setShowQuickPriorityDropdown(false);\n                                        }}\n                                        className={cn(\n                                          \"p-1 rounded transition-colors\",\n                                          quickCreateAssignee\n                                            ? \"text-[#7C3AED] bg-[#7C3AED]/20\"\n                                            : isDark ? \"hover:bg-white/10 text-[#6B7280]\" : \"hover:bg-gray-100 text-gray-400\"\n                                        )}\n                                      >\n                                        {quickCreateAssignee ? (\n                                          <div\n                                            className=\"w-4 h-4 rounded-full flex items-center justify-center text-white text-[8px] font-medium\"\n                                            style={{ backgroundColor: config.availableUsers?.find(u => u.id === quickCreateAssignee)?.color || '#7C3AED' }}\n                                          >\n                                            {config.availableUsers?.find(u => u.id === quickCreateAssignee)?.initials ||\n                                             config.availableUsers?.find(u => u.id === quickCreateAssignee)?.name?.slice(0, 2).toUpperCase()}\n                                          </div>\n                                        ) : (\n                                          <User className=\"w-3.5 h-3.5\" />\n                                        )}\n                                      </button>\n                                      {/* Assignee Dropdown */}\n                                      <AnimatePresence>\n                                        {showQuickAssigneeDropdown && (\n                                          <motion.div\n                                            initial={{ opacity: 0, y: -5 }}\n                                            animate={{ opacity: 1, y: 0 }}\n                                            exit={{ opacity: 0, y: -5 }}\n                                            className={cn(\n                                              \"absolute left-0 bottom-full mb-1 z-[60] rounded-lg shadow-xl overflow-hidden min-w-[160px] max-h-[200px] overflow-y-auto\",\n                                              isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                                            )}\n                                            onClick={(e) => e.stopPropagation()}\n                                          >\n                                            {/* Unassigned option */}\n                                            <button\n                                              onClick={() => {\n                                                setQuickCreateAssignee(null);\n                                                setShowQuickAssigneeDropdown(false);\n                                              }}\n                                              className={cn(\n                                                \"w-full flex items-center gap-2 px-3 py-1.5 text-xs transition-colors text-left\",\n                                                isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                                !quickCreateAssignee && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                              )}\n                                            >\n                                              <div className={cn(\"w-5 h-5 rounded-full flex items-center justify-center\", isDark ? \"bg-white/10\" : \"bg-gray-200\")}>\n                                                <User className=\"w-3 h-3 text-gray-400\" />\n                                              </div>\n                                              <span className={isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\"}>\n                                                {locale === 'es' ? 'Sin asignar' : 'Unassigned'}\n                                              </span>\n                                            </button>\n                                            {/* Available users */}\n                                            {config.availableUsers?.map((user) => (\n                                              <button\n                                                key={user.id}\n                                                onClick={() => {\n                                                  setQuickCreateAssignee(user.id);\n                                                  setShowQuickAssigneeDropdown(false);\n                                                }}\n                                                className={cn(\n                                                  \"w-full flex items-center gap-2 px-3 py-1.5 text-xs transition-colors text-left\",\n                                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                                  quickCreateAssignee === user.id && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                                )}\n                                              >\n                                                <div\n                                                  className=\"w-5 h-5 rounded-full flex items-center justify-center text-white text-[9px] font-medium\"\n                                                  style={{ backgroundColor: user.color || '#7C3AED' }}\n                                                >\n                                                  {user.initials || user.name?.slice(0, 2).toUpperCase()}\n                                                </div>\n                                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{user.name}</span>\n                                              </button>\n                                            ))}\n                                            {(!config.availableUsers || config.availableUsers.length === 0) && (\n                                              <div className={cn(\"px-3 py-2 text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                                {locale === 'es' ? 'No hay usuarios disponibles' : 'No users available'}\n                                              </div>\n                                            )}\n                                          </motion.div>\n                                        )}\n                                      </AnimatePresence>\n                                    </div>\n                                  </div>\n                                  <button\n                                    onClick={() => {\n                                      if (quickCreateName.trim()) {\n                                        // v0.17.105: Include priority, assignee, and selected date in task creation\n                                        const selectedUser = config.availableUsers?.find(u => u.id === quickCreateAssignee);\n                                        const taskDate = quickCreateDate || day.date;\n                                        callbacks.onTaskCreate?.({\n                                          name: quickCreateName.trim(),\n                                          startDate: taskDate,\n                                          endDate: taskDate,\n                                          priority: quickCreatePriority,\n                                          assignees: selectedUser ? [selectedUser] : undefined,\n                                        });\n                                        setQuickCreateName('');\n                                        setQuickCreatePriority(undefined);\n                                        setQuickCreateAssignee(null);\n                                        setQuickCreateDate(null);\n                                        setQuickCreateCell(null);\n                                      }\n                                    }}\n                                    disabled={!quickCreateName.trim()}\n                                    className={cn(\n                                      \"px-2.5 py-1 rounded text-xs font-medium transition-colors\",\n                                      quickCreateName.trim()\n                                        ? \"bg-[#7C3AED] hover:bg-[#6D28D9] text-white\"\n                                        : isDark ? \"bg-white/5 text-[#4B5563]\" : \"bg-gray-100 text-gray-400\"\n                                    )}\n                                  >\n                                    {locale === 'es' ? 'Guardar' : 'Save'}\n                                  </button>\n                                </div>\n                              </motion.div>\n                            </>\n                          )}\n                        </AnimatePresence>\n                      </div>\n                    );\n                  })()}\n\n                  {/* Day number */}\n                  <span className={cn(\n                    \"text-sm font-medium\",\n                    day.isToday\n                      ? \"text-[#3B82F6]\"\n                      : day.isCurrentMonth\n                        ? (isDark ? \"text-white\" : \"text-gray-900\")\n                        : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\")\n                  )}>\n                    {day.date.getDate()}\n                  </span>\n                </div>\n              </div>\n            );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* v0.17.83: Task Modal - ClickUp Style */}\n      <AnimatePresence>\n        {selectedTask && (\n          <>\n            {/* Overlay */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => { setSelectedTask(null); setCommentText(''); }}\n              className=\"fixed inset-0 bg-black/50 z-40\"\n            />\n            {/* Modal - v0.17.86: Full screen modal like ClickUp (90% of viewport) */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0.98 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.98 }}\n              className={cn(\n                \"fixed inset-4 md:inset-8 lg:inset-12 rounded-xl shadow-2xl z-50 flex overflow-hidden\",\n                isDark ? \"bg-[#1A1D25]\" : \"bg-white\"\n              )}\n            >\n              {/* Main Content */}\n              <div className=\"flex-1 flex flex-col overflow-hidden\">\n                {/* v0.17.96: Header - ClickUp style with breadcrumb */}\n                <div className={cn(\"px-6 py-3 border-b flex items-center gap-3\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                  <div className=\"flex items-center gap-2\">\n                    <Circle className={cn(\"w-4 h-4\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")} />\n                    <span className={cn(\"text-xs px-2 py-0.5 rounded\", isDark ? \"bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 text-gray-600\")}>\n                      {locale === 'es' ? 'Tarea' : 'Task'} \n                    </span>\n                    <span className={cn(\"text-xs font-mono\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                      {selectedTask.id.slice(0, 8)}\n                    </span>\n                    <button className={cn(\n                      \"flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium transition-colors\",\n                      isDark ? \"bg-purple-500/20 text-purple-400 hover:bg-purple-500/30\" : \"bg-purple-100 text-purple-700 hover:bg-purple-200\"\n                    )}>\n                      <Sparkles className=\"w-3 h-3\" />\n                      Ask AI\n                    </button>\n                  </div>\n                  <div className=\"flex-1\" />\n                  <button\n                    className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}\n                  >\n                    <Maximize2 className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}\n                  >\n                    <MoreHorizontal className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={() => { setSelectedTask(null); setCommentText(''); }}\n                    className={cn(\"p-1.5 rounded transition-colors\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n\n                {/* v0.17.96: Task Title - ClickUp style with checkbox */}\n                <div className=\"px-6 py-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <button\n                      onClick={() => {\n                        const newProgress = selectedTask.progress === 100 ? 0 : 100;\n                        const newStatus = newProgress === 100 ? 'completed' : 'todo';\n                        const updatedTask = { ...selectedTask, progress: newProgress, status: newStatus };\n                        setSelectedTask(updatedTask);\n                        callbacks.onTaskUpdate?.(updatedTask);\n                      }}\n                      className={cn(\n                        \"mt-1 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors\",\n                        selectedTask.progress === 100\n                          ? \"bg-green-500 border-green-500\"\n                          : isDark ? \"border-white/30 hover:border-white/50\" : \"border-gray-300 hover:border-gray-400\"\n                      )}\n                    >\n                      {selectedTask.progress === 100 && (\n                        <CheckCircle2 className=\"w-3 h-3 text-white\" />\n                      )}\n                    </button>\n                    <h2 className={cn(\n                      \"text-xl font-semibold flex-1\",\n                      selectedTask.progress === 100 ? \"line-through text-[#6B7280]\" : (isDark ? \"text-white\" : \"text-gray-900\")\n                    )}>\n                      {selectedTask.name}\n                    </h2>\n                  </div>\n                </div>\n\n                {/* Fields Grid - v0.17.85: overflow-visible for date picker popover */}\n                <div className=\"px-6 pb-6 flex-1 overflow-y-auto overflow-x-visible\">\n                  <div className=\"grid grid-cols-2 gap-x-12 gap-y-5\">\n                    {/* Status - v0.17.92: Interactive dropdown */}\n                    <div className=\"flex items-center gap-3 relative\">\n                      <CheckCircle2 className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Estado' : 'Status'}\n                      </span>\n                      <button\n                        onClick={() => {\n                          closeAllDropdowns();\n                          setShowStatusDropdown(!showStatusDropdown);\n                        }}\n                        className={cn(\n                          \"text-xs px-2 py-1 rounded font-medium cursor-pointer transition-all hover:ring-2 hover:ring-white/20\",\n                          selectedTask.progress === 100 || selectedTask.status === 'completed'\n                            ? \"bg-green-500/20 text-green-400\"\n                            : (selectedTask.progress && selectedTask.progress > 0) || selectedTask.status === 'in-progress'\n                              ? \"bg-blue-500/20 text-blue-400\"\n                              : isDark ? \"bg-white/10 text-white\" : \"bg-gray-100 text-gray-700\"\n                        )}\n                      >\n                        {selectedTask.progress === 100 || selectedTask.status === 'completed'\n                          ? (locale === 'es' ? 'COMPLETADO' : 'DONE')\n                          : (selectedTask.progress && selectedTask.progress > 0) || selectedTask.status === 'in-progress'\n                            ? (locale === 'es' ? 'EN PROGRESO' : 'IN PROGRESS')\n                            : (locale === 'es' ? 'POR HACER' : 'TO DO')}\n                      </button>\n                      {/* Status Dropdown */}\n                      <AnimatePresence>\n                        {showStatusDropdown && (\n                          <>\n                            {/* v0.17.95: Overlay to close status dropdown on click outside */}\n                            <div\n                              className=\"fixed inset-0 z-40\"\n                              onClick={() => setShowStatusDropdown(false)}\n                            />\n                            <motion.div\n                              initial={{ opacity: 0, y: -5 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -5 }}\n                              className={cn(\n                                \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[140px]\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                            >\n                              {[\n                                { id: 'todo', label: locale === 'es' ? 'Por hacer' : 'To Do', color: 'bg-white/10 text-white' },\n                                { id: 'in-progress', label: locale === 'es' ? 'En progreso' : 'In Progress', color: 'bg-blue-500/20 text-blue-400' },\n                                { id: 'completed', label: locale === 'es' ? 'Completado' : 'Done', color: 'bg-green-500/20 text-green-400' },\n                              ].map((status) => (\n                                <button\n                                key={status.id}\n                                onClick={() => updateTaskStatus(status.id)}\n                                className={cn(\n                                  \"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors text-left\",\n                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                  (selectedTask.status === status.id ||\n                                   (status.id === 'completed' && selectedTask.progress === 100) ||\n                                   (status.id === 'in-progress' && selectedTask.progress && selectedTask.progress > 0 && selectedTask.progress < 100) ||\n                                   (status.id === 'todo' && (!selectedTask.progress || selectedTask.progress === 0) && selectedTask.status !== 'in-progress' && selectedTask.status !== 'completed'))\n                                    && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                )}\n                              >\n                                <span className={cn(\"w-2 h-2 rounded-full\",\n                                  status.id === 'completed' ? \"bg-green-500\" :\n                                  status.id === 'in-progress' ? \"bg-blue-500\" :\n                                  \"bg-gray-400\"\n                                )} />\n                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{status.label}</span>\n                              </button>\n                            ))}\n                            </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n\n                    {/* Assignees - v0.17.238: Interactive picker */}\n                    <div className=\"flex items-center gap-3 relative\">\n                      <User className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Asignados' : 'Assignees'}\n                      </span>\n                      <button\n                        onClick={() => {\n                          setShowStatusDropdown(false);\n                          setShowPriorityDropdown(false);\n                          setShowDatePicker(null);\n                          setShowAssigneesDropdown(!showAssigneesDropdown);\n                        }}\n                        className={cn(\n                          \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                          isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                        )}\n                      >\n                        {selectedTask.assignees && selectedTask.assignees.length > 0 ? (\n                          <div className=\"flex items-center gap-1\">\n                            {selectedTask.assignees.slice(0, 3).map((assignee, i) => (\n                              <div\n                                key={i}\n                                className=\"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium\"\n                                style={{ backgroundColor: assignee.color || '#8B5CF6' }}\n                                title={assignee.name}\n                              >\n                                {assignee.initials || assignee.name.slice(0, 2).toUpperCase()}\n                              </div>\n                            ))}\n                            {selectedTask.assignees.length > 3 && (\n                              <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                +{selectedTask.assignees.length - 3}\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <span className={cn(\"text-sm\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                            {locale === 'es' ? 'Agregar' : 'Add'}\n                          </span>\n                        )}\n                        <ChevronDown className={cn(\"w-3 h-3\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      </button>\n\n                      {/* Assignees Dropdown */}\n                      <AnimatePresence>\n                        {showAssigneesDropdown && (\n                          <>\n                            <div\n                              className=\"fixed inset-0 z-40\"\n                              onClick={() => setShowAssigneesDropdown(false)}\n                            />\n                            <motion.div\n                              initial={{ opacity: 0, y: -5 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -5 }}\n                              className={cn(\n                                \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[200px] max-h-[280px] overflow-y-auto\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                            >\n                              {config.availableUsers && config.availableUsers.length > 0 ? (\n                                config.availableUsers.map((user) => {\n                                  const isSelected = selectedTask.assignees?.some(a => a.name === user.name);\n                                  return (\n                                    <button\n                                      key={user.id || user.name}\n                                      onClick={() => {\n                                        const currentAssignees = selectedTask.assignees || [];\n                                        let newAssignees: Task['assignees'];\n                                        if (isSelected) {\n                                          newAssignees = currentAssignees.filter(a => a.name !== user.name);\n                                        } else {\n                                          newAssignees = [...currentAssignees, {\n                                            name: user.name,\n                                            avatar: user.avatar,\n                                            initials: user.initials || user.name.slice(0, 2).toUpperCase(),\n                                            color: user.color || '#8B5CF6',\n                                          }];\n                                        }\n                                        updateTaskField('assignees', newAssignees);\n                                      }}\n                                      className={cn(\n                                        \"w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors\",\n                                        isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                        isSelected && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                      )}\n                                    >\n                                      {user.avatar ? (\n                                        <img\n                                          src={user.avatar}\n                                          alt={user.name}\n                                          className=\"w-6 h-6 rounded-full object-cover\"\n                                        />\n                                      ) : (\n                                        <div\n                                          className=\"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium\"\n                                          style={{ backgroundColor: user.color || '#8B5CF6' }}\n                                        >\n                                          {user.initials || user.name.slice(0, 2).toUpperCase()}\n                                        </div>\n                                      )}\n                                      <span className={cn(\"flex-1 text-left\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                        {user.name}\n                                      </span>\n                                      {isSelected && <Check className=\"w-4 h-4 text-green-500\" />}\n                                    </button>\n                                  );\n                                })\n                              ) : (\n                                <div className={cn(\"px-3 py-4 text-sm text-center\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                  {locale === 'es' ? 'No hay usuarios disponibles' : 'No users available'}\n                                </div>\n                              )}\n                            </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n\n                    {/* Dates - v0.17.84: ClickUp style date picker */}\n                    <div className=\"flex items-center gap-3 relative\">\n                      <CalendarDays className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Fechas' : 'Dates'}\n                      </span>\n                      <button\n                        onClick={() => {\n                          setShowDatePicker(showDatePicker ? null : 'start');\n                          setDatePickerMonth(selectedTask.startDate || new Date());\n                        }}\n                        className={cn(\n                          \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                          isDark ? \"bg-white/5 hover:bg-white/10 text-white\" : \"bg-gray-100 hover:bg-gray-200 text-gray-900\"\n                        )}\n                      >\n                        {selectedTask.startDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'short', day: 'numeric' }) || (locale === 'es' ? 'Inicio' : 'Start')}\n                        <span className={cn(\"mx-1\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}></span>\n                        {selectedTask.endDate?.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'short', day: 'numeric' }) || (locale === 'es' ? 'Fin' : 'End')}\n                        {(selectedTask.startDate || selectedTask.endDate) && (\n                          <X\n                            className=\"w-3.5 h-3.5 ml-1 opacity-50 hover:opacity-100\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              // Clear dates would go here\n                            }}\n                          />\n                        )}\n                      </button>\n\n                      {/* ClickUp Style Date Picker Popover */}\n                      <AnimatePresence>\n                        {showDatePicker && (\n                          <>\n                            {/* v0.17.93: Overlay to close date picker on click outside */}\n                            <div\n                              className=\"fixed inset-0 z-40\"\n                              onClick={() => setShowDatePicker(null)}\n                            />\n                            <motion.div\n                              initial={{ opacity: 0, y: -10 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -10 }}\n                              className={cn(\n                                \"absolute left-0 top-full mt-2 z-50 rounded-xl shadow-2xl overflow-hidden flex\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                              onClick={(e) => e.stopPropagation()}\n                            >\n                            {/* Quick Options - Left Side - v0.17.92: Functional quick dates */}\n                            <div className={cn(\"w-44 py-2 border-r\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                              {(() => {\n                                const today = new Date();\n                                const tomorrow = new Date(today); tomorrow.setDate(today.getDate() + 1);\n                                const nextSaturday = new Date(today); nextSaturday.setDate(today.getDate() + ((6 - today.getDay() + 7) % 7 || 7));\n                                const nextMonday = new Date(today); nextMonday.setDate(today.getDate() + ((1 - today.getDay() + 7) % 7 || 7));\n                                const nextWeekend = new Date(today); nextWeekend.setDate(today.getDate() + ((6 - today.getDay() + 7) % 7) + 7);\n                                const twoWeeks = new Date(today); twoWeeks.setDate(today.getDate() + 14);\n                                const fourWeeks = new Date(today); fourWeeks.setDate(today.getDate() + 28);\n\n                                const quickOptions = [\n                                  { label: locale === 'es' ? 'Hoy' : 'Today', date: today, display: today.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                  { label: locale === 'es' ? 'Maana' : 'Tomorrow', date: tomorrow, display: tomorrow.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { weekday: 'short' }).slice(0, 3) + '.' },\n                                  { label: locale === 'es' ? 'Este fin de semana' : 'This weekend', date: nextSaturday, display: locale === 'es' ? 'sb.' : 'sat.' },\n                                  { label: locale === 'es' ? 'Prxima semana' : 'Next week', date: nextMonday, display: locale === 'es' ? 'lun.' : 'mon.' },\n                                  { label: locale === 'es' ? 'Prximo fin de semana' : 'Next weekend', date: nextWeekend, display: nextWeekend.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                  { label: locale === 'es' ? '2 semanas' : '2 weeks', date: twoWeeks, display: twoWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                  { label: locale === 'es' ? '4 semanas' : '4 weeks', date: fourWeeks, display: fourWeeks.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { day: 'numeric', month: 'short' }) },\n                                ];\n\n                                return quickOptions.map((option, i) => (\n                                  <button\n                                    key={i}\n                                    className={cn(\n                                      \"w-full flex items-center justify-between px-3 py-2 text-sm transition-colors\",\n                                      isDark ? \"hover:bg-white/5 text-white\" : \"hover:bg-gray-50 text-gray-900\"\n                                    )}\n                                    onClick={() => {\n                                      // v0.17.92: Apply quick date selection\n                                      if (showDatePicker === 'start') {\n                                        const newEndDate = selectedTask.endDate && option.date > selectedTask.endDate\n                                          ? option.date\n                                          : selectedTask.endDate;\n                                        updateTaskDates(option.date, newEndDate);\n                                        setShowDatePicker('end');\n                                      } else {\n                                        const newStartDate = selectedTask.startDate && option.date < selectedTask.startDate\n                                          ? option.date\n                                          : selectedTask.startDate;\n                                        updateTaskDates(newStartDate, option.date);\n                                        setShowDatePicker(null);\n                                      }\n                                    }}\n                                  >\n                                    <span>{option.label}</span>\n                                    <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                      {option.display}\n                                    </span>\n                                  </button>\n                                ));\n                              })()}\n                              {/* Clear dates button */}\n                              <div className={cn(\"border-t mt-2 pt-2\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                                <button\n                                  onClick={() => {\n                                    updateTaskDates(undefined, undefined);\n                                    setShowDatePicker(null);\n                                  }}\n                                  className={cn(\n                                    \"w-full flex items-center justify-between px-3 py-2 text-sm transition-colors\",\n                                    isDark ? \"hover:bg-white/5 text-red-400\" : \"hover:bg-gray-50 text-red-500\"\n                                  )}\n                                >\n                                  <span>{locale === 'es' ? 'Quitar fechas' : 'Clear dates'}</span>\n                                  <X className=\"w-4 h-4 opacity-50\" />\n                                </button>\n                              </div>\n                            </div>\n\n                            {/* Calendar - Right Side */}\n                            <div className=\"p-4\">\n                              {/* v0.17.92: Selection indicator */}\n                              <div className={cn(\"text-xs mb-3 px-2 py-1 rounded\", isDark ? \"bg-white/5 text-[#9CA3AF]\" : \"bg-gray-100 text-gray-600\")}>\n                                {showDatePicker === 'start'\n                                  ? (locale === 'es' ? ' Selecciona fecha de inicio' : ' Select start date')\n                                  : (locale === 'es' ? ' Selecciona fecha de fin' : ' Select end date')}\n                              </div>\n                              {/* Month Header */}\n                              <div className=\"flex items-center justify-between mb-4\">\n                                <span className={cn(\"font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                  {datePickerMonth.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', { month: 'long', year: 'numeric' })}\n                                </span>\n                                <div className=\"flex items-center gap-1\">\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date())}\n                                    className={cn(\n                                      \"p-1 rounded text-sm transition-colors\",\n                                      isDark ? \"hover:bg-white/10 text-white\" : \"hover:bg-gray-100 text-gray-700\"\n                                    )}\n                                  >\n                                    {locale === 'es' ? 'Hoy' : 'Today'}\n                                  </button>\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() - 1))}\n                                    className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                  >\n                                    <ChevronLeft className=\"w-4 h-4\" />\n                                  </button>\n                                  <button\n                                    onClick={() => setDatePickerMonth(new Date(datePickerMonth.getFullYear(), datePickerMonth.getMonth() + 1))}\n                                    className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")}\n                                  >\n                                    <ChevronRight className=\"w-4 h-4\" />\n                                  </button>\n                                </div>\n                              </div>\n\n                              {/* Weekday Headers */}\n                              <div className=\"grid grid-cols-7 gap-1 mb-2\">\n                                {(locale === 'es'\n                                  ? ['do', 'lu', 'ma', 'mi', 'ju', 'vi', 's']\n                                  : ['su', 'mo', 'tu', 'we', 'th', 'fr', 'sa']\n                                ).map((day) => (\n                                  <div key={day} className={cn(\"w-8 h-8 flex items-center justify-center text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                    {day}\n                                  </div>\n                                ))}\n                              </div>\n\n                              {/* Calendar Days */}\n                              <div className=\"grid grid-cols-7 gap-1\">\n                                {(() => {\n                                  const year = datePickerMonth.getFullYear();\n                                  const month = datePickerMonth.getMonth();\n                                  const firstDay = new Date(year, month, 1).getDay();\n                                  const daysInMonth = new Date(year, month + 1, 0).getDate();\n                                  const daysInPrevMonth = new Date(year, month, 0).getDate();\n                                  const today = new Date();\n                                  const days = [];\n\n                                  // Previous month days\n                                  for (let i = firstDay - 1; i >= 0; i--) {\n                                    days.push({ day: daysInPrevMonth - i, isCurrentMonth: false, date: new Date(year, month - 1, daysInPrevMonth - i) });\n                                  }\n                                  // Current month days\n                                  for (let i = 1; i <= daysInMonth; i++) {\n                                    days.push({ day: i, isCurrentMonth: true, date: new Date(year, month, i) });\n                                  }\n                                  // Next month days\n                                  const remaining = 42 - days.length;\n                                  for (let i = 1; i <= remaining; i++) {\n                                    days.push({ day: i, isCurrentMonth: false, date: new Date(year, month + 1, i) });\n                                  }\n\n                                  return days.map((d, i) => {\n                                    const isToday = d.date.toDateString() === today.toDateString();\n                                    const isStartDate = selectedTask.startDate?.toDateString() === d.date.toDateString();\n                                    const isEndDate = selectedTask.endDate?.toDateString() === d.date.toDateString();\n                                    const isSelected = isStartDate || isEndDate;\n                                    const isInRange = selectedTask.startDate && selectedTask.endDate &&\n                                                      d.date >= selectedTask.startDate && d.date <= selectedTask.endDate;\n\n                                    return (\n                                      <button\n                                        key={i}\n                                        className={cn(\n                                          \"w-8 h-8 rounded-full flex items-center justify-center text-sm transition-colors\",\n                                          !d.isCurrentMonth && (isDark ? \"text-[#4B5563]\" : \"text-gray-300\"),\n                                          d.isCurrentMonth && (isDark ? \"text-white\" : \"text-gray-900\"),\n                                          isToday && \"ring-2 ring-[#3B82F6]\",\n                                          isStartDate && \"bg-[#3B82F6] text-white\",\n                                          isEndDate && !isStartDate && \"bg-[#7C3AED] text-white\",\n                                          isInRange && !isSelected && (isDark ? \"bg-[#7C3AED]/20\" : \"bg-purple-100\"),\n                                          !isSelected && (isDark ? \"hover:bg-white/10\" : \"hover:bg-gray-100\")\n                                        )}\n                                        onClick={() => {\n                                          // v0.17.92: Handle date selection - update start or end date\n                                          const clickedDate = new Date(d.date);\n                                          if (showDatePicker === 'start') {\n                                            // Setting start date\n                                            const newEndDate = selectedTask.endDate && clickedDate > selectedTask.endDate\n                                              ? clickedDate\n                                              : selectedTask.endDate;\n                                            updateTaskDates(clickedDate, newEndDate);\n                                            setShowDatePicker('end'); // Move to select end date\n                                          } else {\n                                            // Setting end date\n                                            const newStartDate = selectedTask.startDate && clickedDate < selectedTask.startDate\n                                              ? clickedDate\n                                              : selectedTask.startDate;\n                                            updateTaskDates(newStartDate, clickedDate);\n                                            setShowDatePicker(null);\n                                          }\n                                        }}\n                                      >\n                                        {d.day}\n                                      </button>\n                                    );\n                                  });\n                                })()}\n                              </div>\n                            </div>\n                          </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n\n                    {/* Priority - v0.17.92: Interactive dropdown */}\n                    <div className=\"flex items-center gap-3 relative\">\n                      <Flag className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Prioridad' : 'Priority'}\n                      </span>\n                      <button\n                        onClick={() => {\n                          closeAllDropdowns();\n                          setShowPriorityDropdown(!showPriorityDropdown);\n                        }}\n                        className={cn(\n                          \"text-xs px-2 py-1 rounded font-medium cursor-pointer transition-all hover:ring-2 hover:ring-white/20\",\n                          selectedTask.priority === 'high' || selectedTask.priority === 'urgent'\n                            ? \"bg-red-500/20 text-red-400\"\n                            : selectedTask.priority === 'medium'\n                              ? \"bg-yellow-500/20 text-yellow-400\"\n                              : selectedTask.priority === 'low'\n                                ? \"bg-green-500/20 text-green-400\"\n                                : isDark ? \"bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 text-gray-600\"\n                        )}\n                      >\n                        {selectedTask.priority\n                          ? (selectedTask.priority === 'high' || selectedTask.priority === 'urgent'\n                              ? (locale === 'es' ? 'Urgente' : 'Urgent')\n                              : selectedTask.priority === 'medium'\n                                ? (locale === 'es' ? 'Media' : 'Medium')\n                                : (locale === 'es' ? 'Baja' : 'Low'))\n                          : (locale === 'es' ? 'Sin prioridad' : 'No priority')}\n                      </button>\n                      {/* Priority Dropdown */}\n                      <AnimatePresence>\n                        {showPriorityDropdown && (\n                          <>\n                            {/* v0.17.95: Overlay to close priority dropdown on click outside */}\n                            <div\n                              className=\"fixed inset-0 z-40\"\n                              onClick={() => setShowPriorityDropdown(false)}\n                            />\n                            <motion.div\n                              initial={{ opacity: 0, y: -5 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -5 }}\n                              className={cn(\n                                \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[140px]\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                            >\n                              {[\n                              { id: 'urgent', label: locale === 'es' ? 'Urgente' : 'Urgent', color: 'bg-red-500' },\n                              { id: 'high', label: locale === 'es' ? 'Alta' : 'High', color: 'bg-orange-500' },\n                              { id: 'medium', label: locale === 'es' ? 'Media' : 'Medium', color: 'bg-yellow-500' },\n                              { id: 'low', label: locale === 'es' ? 'Baja' : 'Low', color: 'bg-green-500' },\n                              { id: undefined, label: locale === 'es' ? 'Sin prioridad' : 'No priority', color: 'bg-gray-400' },\n                            ].map((priority) => (\n                              <button\n                                key={priority.id || 'none'}\n                                onClick={() => {\n                                  updateTaskField('priority', priority.id as Task['priority']);\n                                  setShowPriorityDropdown(false);\n                                }}\n                                className={cn(\n                                  \"w-full flex items-center gap-2 px-3 py-2 text-sm transition-colors text-left\",\n                                  isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                  selectedTask.priority === priority.id && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                )}\n                              >\n                                <span className={cn(\"w-2 h-2 rounded-full\", priority.color)} />\n                                <span className={isDark ? \"text-white\" : \"text-gray-900\"}>{priority.label}</span>\n                              </button>\n                            ))}\n                            </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n\n                    {/* Duration */}\n                    <div className=\"flex items-center gap-3\">\n                      <Clock className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Duracin' : 'Duration'}\n                      </span>\n                      <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {selectedTask.startDate && selectedTask.endDate\n                          ? `${Math.ceil((selectedTask.endDate.getTime() - selectedTask.startDate.getTime()) / (1000 * 60 * 60 * 24))} ${locale === 'es' ? 'das' : 'days'}`\n                          : (locale === 'es' ? 'Sin definir' : 'Not set')}\n                      </span>\n                    </div>\n\n                    {/* Progress - v0.17.92: Interactive slider */}\n                    <div className=\"flex items-center gap-3\">\n                      <div className={cn(\"w-4 h-4 rounded-full border-2\", isDark ? \"border-[#6B7280]\" : \"border-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Progreso' : 'Progress'}\n                      </span>\n                      <div className=\"flex items-center gap-2 flex-1\">\n                        {editingProgress ? (\n                          <input\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"100\"\n                            step=\"5\"\n                            value={selectedTask.progress || 0}\n                            onChange={(e) => {\n                              const newProgress = parseInt(e.target.value);\n                              let newStatus = selectedTask.status;\n                              if (newProgress === 100) newStatus = 'completed';\n                              else if (newProgress > 0) newStatus = 'in-progress';\n                              else newStatus = 'todo';\n                              const updatedTask = { ...selectedTask, progress: newProgress, status: newStatus };\n                              setSelectedTask(updatedTask);\n                              callbacks.onTaskUpdate?.(updatedTask);\n                            }}\n                            onBlur={() => setEditingProgress(false)}\n                            className={cn(\n                              \"flex-1 max-w-[120px] h-2 rounded-full appearance-none cursor-pointer\",\n                              isDark ? \"bg-white/10\" : \"bg-gray-200\",\n                              \"[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-[#3B82F6] [&::-webkit-slider-thumb]:cursor-pointer\"\n                            )}\n                            autoFocus\n                          />\n                        ) : (\n                          <button\n                            onClick={() => setEditingProgress(true)}\n                            className={cn(\n                              \"flex-1 h-2 rounded-full overflow-hidden max-w-[120px] cursor-pointer hover:ring-2 hover:ring-white/20 transition-all\",\n                              isDark ? \"bg-white/10\" : \"bg-gray-200\"\n                            )}\n                          >\n                            <div\n                              className={cn(\n                                \"h-full rounded-full transition-all\",\n                                selectedTask.progress === 100 ? \"bg-green-500\" : \"bg-[#3B82F6]\"\n                              )}\n                              style={{ width: `${selectedTask.progress || 0}%` }}\n                            />\n                          </button>\n                        )}\n                        <span className={cn(\"text-sm font-medium min-w-[40px]\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                          {selectedTask.progress || 0}%\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Tags */}\n                    <div className=\"flex items-center gap-3\">\n                      <Tag className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Etiquetas' : 'Tags'}\n                      </span>\n                      <TagPicker\n                        selectedTags={selectedTask.tags || []}\n                        availableTags={availableTags}\n                        onChange={(newTags) => {\n                          updateTaskField('tags', newTags);\n                        }}\n                        onCreateTag={onCreateTag}\n                        theme={tagPickerTheme}\n                      />\n                    </div>\n\n                    {/* Dependencies */}\n                    <div className=\"flex items-start gap-3 relative\">\n                      <Link2 className={cn(\"w-4 h-4 mt-1.5\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24 mt-1\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Relaciones' : 'Relations'}\n                      </span>\n                      <div className=\"flex-1\">\n                        {/* Selected dependencies as chips */}\n                        {selectedTask.dependencies && selectedTask.dependencies.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1.5 mb-2\">\n                            {selectedTask.dependencies.map((depId) => {\n                              const depTask = tasks.find(t => t.id === depId);\n                              return (\n                                <span\n                                  key={depId}\n                                  className={cn(\n                                    \"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\",\n                                    isDark ? \"bg-blue-500/20 text-blue-400\" : \"bg-blue-100 text-blue-700\"\n                                  )}\n                                >\n                                  {depTask?.name || depId.slice(0, 8)}\n                                  <button\n                                    onClick={() => {\n                                      const newDeps = (selectedTask.dependencies || []).filter(id => id !== depId);\n                                      updateTaskField('dependencies', newDeps);\n                                    }}\n                                    className={cn(\n                                      \"ml-0.5 hover:bg-white/20 rounded-full p-0.5 transition-colors\"\n                                    )}\n                                  >\n                                    <X className=\"w-3 h-3\" />\n                                  </button>\n                                </span>\n                              );\n                            })}\n                          </div>\n                        )}\n\n                        {/* Add dependency button */}\n                        <button\n                          onClick={() => {\n                            closeAllDropdowns();\n                            setShowDependenciesDropdown(!showDependenciesDropdown);\n                          }}\n                          className={cn(\n                            \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                            isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                          )}\n                        >\n                          <Plus className=\"w-3.5 h-3.5\" />\n                          <span className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                            {locale === 'es' ? 'Agregar dependencia' : 'Add dependency'}\n                          </span>\n                        </button>\n\n                        {/* Dependencies Dropdown */}\n                        <AnimatePresence>\n                          {showDependenciesDropdown && (\n                            <>\n                              <div className=\"fixed inset-0 z-40\" onClick={() => {\n                                setShowDependenciesDropdown(false);\n                                setDependencySearch('');\n                              }} />\n                              <motion.div\n                                initial={{ opacity: 0, y: -5 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                exit={{ opacity: 0, y: -5 }}\n                                className={cn(\n                                  \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden min-w-[280px] max-h-[320px]\",\n                                  isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                                )}\n                              >\n                                {/* Search input */}\n                                <div className={cn(\"p-2 border-b\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                                  <input\n                                    type=\"text\"\n                                    value={dependencySearch}\n                                    onChange={(e) => setDependencySearch(e.target.value)}\n                                    placeholder={locale === 'es' ? 'Buscar tarea...' : 'Search task...'}\n                                    className={cn(\n                                      \"w-full px-3 py-2 rounded-md text-sm outline-none\",\n                                      isDark\n                                        ? \"bg-white/5 text-white placeholder:text-[#6B7280] focus:bg-white/10\"\n                                        : \"bg-gray-100 text-gray-900 placeholder:text-gray-400\"\n                                    )}\n                                    autoFocus\n                                  />\n                                </div>\n\n                                {/* Task list */}\n                                <div className=\"max-h-[240px] overflow-y-auto\">\n                                  {tasks.length > 0 ? (\n                                    tasks\n                                      .filter(t => t.id !== selectedTask.id)\n                                      .filter(t =>\n                                        dependencySearch === '' ||\n                                        t.name.toLowerCase().includes(dependencySearch.toLowerCase())\n                                      )\n                                      .map((depTask) => {\n                                        const isSelected = selectedTask.dependencies?.includes(depTask.id);\n                                        return (\n                                          <button\n                                            key={depTask.id}\n                                            onClick={() => {\n                                              const currentDeps = selectedTask.dependencies || [];\n                                              let newDeps: string[];\n                                              if (isSelected) {\n                                                newDeps = currentDeps.filter(id => id !== depTask.id);\n                                              } else {\n                                                newDeps = [...currentDeps, depTask.id];\n                                              }\n                                              updateTaskField('dependencies', newDeps);\n                                            }}\n                                            className={cn(\n                                              \"w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors text-left\",\n                                              isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\",\n                                              isSelected && (isDark ? \"bg-white/5\" : \"bg-gray-50\")\n                                            )}\n                                          >\n                                            <div\n                                              className={cn(\n                                                \"w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0\",\n                                                isSelected\n                                                  ? \"bg-blue-500 border-blue-500\"\n                                                  : isDark ? \"border-white/30\" : \"border-gray-300\"\n                                              )}\n                                            >\n                                              {isSelected && (\n                                                <Check className=\"w-3 h-3 text-white\" />\n                                              )}\n                                            </div>\n                                            <div className=\"flex-1 min-w-0\">\n                                              <span className={cn(\"block truncate\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                                {depTask.name}\n                                              </span>\n                                              <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                                {depTask.id.slice(0, 8)}\n                                              </span>\n                                            </div>\n                                          </button>\n                                        );\n                                      })\n                                  ) : (\n                                    <div className={cn(\"px-3 py-4 text-sm text-center\", isDark ? \"text-[#6B7280]\" : \"text-gray-500\")}>\n                                      {locale === 'es' ? 'No hay tareas disponibles' : 'No tasks available'}\n                                    </div>\n                                  )}\n                                </div>\n                              </motion.div>\n                            </>\n                          )}\n                        </AnimatePresence>\n                      </div>\n                    </div>\n\n                    {/* Color */}\n                    <div className=\"flex items-center gap-3 relative\">\n                      <Palette className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Color' : 'Color'}\n                      </span>\n                      <button\n                        onClick={() => {\n                          closeAllDropdowns();\n                          setShowColorPicker(!showColorPicker);\n                        }}\n                        className={cn(\n                          \"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors\",\n                          isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-100 hover:bg-gray-200\"\n                        )}\n                      >\n                        <div\n                          className=\"w-4 h-4 rounded-full\"\n                          style={{ backgroundColor: selectedTask.color || '#6366F1' }}\n                        />\n                        <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                          {TASK_COLORS.find(c => c.value === selectedTask.color)?.name || (locale === 'es' ? 'Azul' : 'Blue')}\n                        </span>\n                        <ChevronDown className={cn(\"w-3 h-3\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      </button>\n\n                      {/* Color Picker Dropdown */}\n                      <AnimatePresence>\n                        {showColorPicker && (\n                          <>\n                            <div className=\"fixed inset-0 z-40\" onClick={() => setShowColorPicker(false)} />\n                            <motion.div\n                              initial={{ opacity: 0, y: -5 }}\n                              animate={{ opacity: 1, y: 0 }}\n                              exit={{ opacity: 0, y: -5 }}\n                              className={cn(\n                                \"absolute left-32 top-full mt-1 z-50 rounded-lg shadow-xl overflow-hidden p-3\",\n                                isDark ? \"bg-[#1A1D25] border border-white/10\" : \"bg-white border border-gray-200\"\n                              )}\n                            >\n                              <div className=\"grid grid-cols-6 gap-1.5\">\n                                {TASK_COLORS.map((color) => {\n                                  const isSelected = selectedTask.color === color.value;\n                                  return (\n                                    <button\n                                      key={color.value}\n                                      onClick={() => {\n                                        updateTaskField('color', color.value);\n                                        setShowColorPicker(false);\n                                      }}\n                                      className={cn(\n                                        \"w-7 h-7 rounded-full flex items-center justify-center transition-all\",\n                                        isSelected && \"ring-2 ring-offset-2\",\n                                        isDark ? \"ring-offset-[#1A1D25]\" : \"ring-offset-white\"\n                                      )}\n                                      style={{\n                                        backgroundColor: color.value,\n                                        outlineColor: isSelected ? color.value : undefined,\n                                      }}\n                                      title={color.name}\n                                    >\n                                      {isSelected && (\n                                        <Check className=\"w-3.5 h-3.5 text-white\" />\n                                      )}\n                                    </button>\n                                  );\n                                })}\n                              </div>\n                            </motion.div>\n                          </>\n                        )}\n                      </AnimatePresence>\n                    </div>\n\n                    {/* Milestone */}\n                    <div className=\"flex items-center gap-3\">\n                      <Diamond className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <span className={cn(\"text-sm w-24\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                        {locale === 'es' ? 'Hito' : 'Milestone'}\n                      </span>\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedTask.isMilestone || false}\n                          onChange={(e) => updateTaskField('isMilestone' as any, e.target.checked)}\n                          className={cn(\n                            \"w-4 h-4 rounded border-2 cursor-pointer appearance-none transition-colors\",\n                            selectedTask.isMilestone\n                              ? \"bg-purple-500 border-purple-500\"\n                              : isDark ? \"border-white/30 bg-transparent\" : \"border-gray-300 bg-transparent\",\n                            \"checked:bg-purple-500 checked:border-purple-500\"\n                          )}\n                        />\n                        <span className={cn(\"text-sm\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                          {locale === 'es' ? 'Marcar como hito' : 'Mark as milestone'}\n                        </span>\n                      </label>\n                    </div>\n                  </div>\n\n                  {/* v0.17.239: Description section - functional textarea */}\n                  <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <FileText className={cn(\"w-4 h-4\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")} />\n                      <h3 className={cn(\"text-sm font-semibold\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {locale === 'es' ? 'Descripcin' : 'Description'}\n                      </h3>\n                    </div>\n                    <textarea\n                      value={(selectedTask as any).description || ''}\n                      onChange={(e) => updateTaskField('description' as any, e.target.value)}\n                      placeholder={locale === 'es' ? 'Agregar descripcin...' : 'Add description...'}\n                      className={cn(\n                        \"w-full min-h-[100px] px-3 py-2 rounded-lg text-sm resize-none outline-none transition-colors\",\n                        isDark\n                          ? \"bg-white/5 text-white placeholder:text-[#6B7280] focus:bg-white/10\"\n                          : \"bg-gray-100 text-gray-900 placeholder:text-gray-400 focus:bg-gray-200\"\n                      )}\n                    />\n                    <button className={cn(\n                      \"flex items-center gap-2 text-sm mt-2 transition-colors\",\n                      isDark ? \"text-purple-400 hover:text-purple-300\" : \"text-purple-600 hover:text-purple-700\"\n                    )}>\n                      <Sparkles className=\"w-4 h-4\" />\n                      {locale === 'es' ? 'Escribe con IA' : 'Write with AI'}\n                    </button>\n                  </div>\n\n                  {/* v0.17.96: Custom Fields section - ClickUp style */}\n                  <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                    <h3 className={cn(\"text-sm font-semibold mb-3\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {locale === 'es' ? 'Campos personalizados' : 'Custom fields'}\n                    </h3>\n                    <button className={cn(\n                      \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                      isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                    )}>\n                      <Plus className=\"w-4 h-4\" />\n                      {locale === 'es' ? 'Crea un campo en esta lista' : 'Create a field in this list'}\n                    </button>\n                  </div>\n\n                  {/* v0.17.96: Subtasks section - ClickUp style */}\n                  <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                    <h3 className={cn(\"text-sm font-semibold mb-3\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {locale === 'es' ? 'Agregar subtarea' : 'Add subtask'}\n                    </h3>\n                    {selectedTask.subtasks && selectedTask.subtasks.length > 0 && (\n                      <div className=\"space-y-2 mb-3\">\n                        {selectedTask.subtasks.map((subtask) => (\n                          <div key={subtask.id} className=\"flex items-center gap-2\">\n                            <div className={cn(\n                              \"w-4 h-4 rounded border flex items-center justify-center cursor-pointer\",\n                              subtask.progress === 100\n                                ? \"bg-green-500 border-green-500\"\n                                : isDark ? \"border-white/20 hover:border-white/40\" : \"border-gray-300 hover:border-gray-400\"\n                            )}>\n                              {subtask.progress === 100 && (\n                                <CheckCircle2 className=\"w-3 h-3 text-white\" />\n                              )}\n                            </div>\n                            <span className={cn(\n                              \"text-sm\",\n                              subtask.progress === 100\n                                ? \"line-through text-[#6B7280]\"\n                                : isDark ? \"text-white\" : \"text-gray-900\"\n                            )}>\n                              {subtask.name}\n                            </span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                    <button className={cn(\n                      \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                      isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                    )}>\n                      <Plus className=\"w-4 h-4\" />\n                      {locale === 'es' ? 'Add Tarea' : 'Add Task'}\n                    </button>\n                  </div>\n\n                  {/* v0.17.96: Checklists section - ClickUp style */}\n                  <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h3 className={cn(\"text-sm font-semibold\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                        {locale === 'es' ? 'Listas de control' : 'Checklists'}\n                      </h3>\n                      <button className={cn(\n                        \"p-1 rounded transition-colors\",\n                        isDark ? \"hover:bg-white/10 text-[#6B7280]\" : \"hover:bg-gray-100 text-gray-400\"\n                      )}>\n                        <Plus className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                    <button className={cn(\n                      \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors\",\n                      isDark ? \"bg-white/5 hover:bg-white/10 text-[#9CA3AF]\" : \"bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                    )}>\n                      <ListChecks className=\"w-4 h-4\" />\n                      {locale === 'es' ? 'Crear lista de control' : 'Create checklist'}\n                    </button>\n                  </div>\n\n                  {/* v0.17.241: Attachments section - Functional */}\n                  <div className={cn(\"mt-6 pt-4 border-t\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                    <h3 className={cn(\"text-sm font-semibold mb-3\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {locale === 'es' ? 'Adjuntos' : 'Attachments'}\n                      {currentTaskAttachments.length > 0 && (\n                        <span className={cn(\"ml-2 text-xs font-normal\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                          ({currentTaskAttachments.length})\n                        </span>\n                      )}\n                    </h3>\n\n                    {/* Existing attachments */}\n                    {currentTaskAttachments.length > 0 && (\n                      <div className=\"space-y-2 mb-4\">\n                        {currentTaskAttachments.map((attachment) => {\n                          const FileIcon = getFileIcon(attachment.type);\n                          const isImage = attachment.type.startsWith('image/');\n\n                          return (\n                            <div\n                              key={attachment.id}\n                              className={cn(\n                                \"flex items-center gap-3 p-2 rounded-lg group transition-colors\",\n                                isDark ? \"bg-white/5 hover:bg-white/10\" : \"bg-gray-50 hover:bg-gray-100\"\n                              )}\n                            >\n                              {/* Thumbnail or icon */}\n                              {isImage && attachment.thumbnailUrl ? (\n                                <img\n                                  src={attachment.thumbnailUrl}\n                                  alt={attachment.name}\n                                  className=\"w-10 h-10 rounded object-cover\"\n                                />\n                              ) : (\n                                <div className={cn(\n                                  \"w-10 h-10 rounded flex items-center justify-center\",\n                                  isDark ? \"bg-white/10\" : \"bg-gray-200\"\n                                )}>\n                                  <FileIcon className={cn(\"w-5 h-5\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")} />\n                                </div>\n                              )}\n\n                              {/* File info */}\n                              <div className=\"flex-1 min-w-0\">\n                                <a\n                                  href={attachment.url}\n                                  target=\"_blank\"\n                                  rel=\"noopener noreferrer\"\n                                  className={cn(\n                                    \"text-sm font-medium truncate block hover:underline\",\n                                    isDark ? \"text-white\" : \"text-gray-900\"\n                                  )}\n                                >\n                                  {attachment.name}\n                                </a>\n                                <p className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                  {formatFileSize(attachment.size)}\n                                </p>\n                              </div>\n\n                              {/* Delete button */}\n                              {callbacks.onDeleteAttachment && (\n                                <button\n                                  onClick={() => callbacks.onDeleteAttachment?.(attachment.id)}\n                                  className={cn(\n                                    \"p-1.5 rounded opacity-0 group-hover:opacity-100 transition-all\",\n                                    isDark ? \"hover:bg-red-500/20 text-red-400\" : \"hover:bg-red-100 text-red-500\"\n                                  )}\n                                  title={locale === 'es' ? 'Eliminar' : 'Delete'}\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </button>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n\n                    {/* Drop zone */}\n                    <div\n                      onDragOver={handleDragOver}\n                      onDragLeave={handleDragLeave}\n                      onDrop={handleFileDrop}\n                      className={cn(\n                        \"border-2 border-dashed rounded-lg p-6 text-center transition-all cursor-pointer relative\",\n                        isDraggingFile\n                          ? (isDark ? \"border-blue-500 bg-blue-500/10\" : \"border-blue-400 bg-blue-50\")\n                          : (isDark ? \"border-white/10 hover:border-white/20\" : \"border-gray-200 hover:border-gray-300\"),\n                        isUploadingFiles && \"pointer-events-none opacity-50\"\n                      )}\n                    >\n                      <input\n                        type=\"file\"\n                        multiple\n                        onChange={handleFileInputChange}\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                        disabled={!callbacks.onUploadAttachments || isUploadingFiles}\n                      />\n                      {isUploadingFiles ? (\n                        <>\n                          <div className=\"w-6 h-6 mx-auto mb-2 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n                          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                            {locale === 'es' ? 'Subiendo...' : 'Uploading...'}\n                          </p>\n                        </>\n                      ) : (\n                        <>\n                          <Upload className={cn(\n                            \"w-6 h-6 mx-auto mb-2\",\n                            isDraggingFile ? \"text-blue-500\" : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\")\n                          )} />\n                          <p className={cn(\"text-sm\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-500\")}>\n                            {isDraggingFile\n                              ? (locale === 'es' ? 'Suelta los archivos aqu' : 'Drop files here')\n                              : (locale === 'es'\n                                  ? <>Suelta tus archivos aqu o <span className=\"underline\">haz clic para subir</span></>\n                                  : <>Drop your files here or <span className=\"underline\">click to upload</span></>\n                                )\n                            }\n                          </p>\n                          {!callbacks.onUploadAttachments && (\n                            <p className={cn(\"text-xs mt-1\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                              {locale === 'es' ? 'Upload no disponible' : 'Upload not available'}\n                            </p>\n                          )}\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Activity Panel - Right Sidebar - v0.17.256: Matching TaskDetailModal UI */}\n              <div className={cn(\n                \"w-80 border-l flex flex-col\",\n                isDark ? \"border-white/10 bg-[#0F1117]\" : \"border-gray-200 bg-gray-50\"\n              )}>\n                {/* Activity Header */}\n                <div className={cn(\n                  \"px-4 py-3 border-b\",\n                  isDark ? \"border-white/10\" : \"border-gray-200\"\n                )}>\n                  <h3 className={cn(\n                    \"text-sm font-semibold\",\n                    isDark ? \"text-white\" : \"text-gray-900\"\n                  )}>\n                    {locale === 'es' ? 'Actividad' : 'Activity'}\n                    {comments && comments.length > 0 && (\n                      <span className={cn(\"ml-2 text-xs font-normal\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                        ({comments.length})\n                      </span>\n                    )}\n                  </h3>\n                </div>\n\n                {/* Activity Content - Comments List */}\n                <div className=\"flex-1 overflow-y-auto p-4\">\n                  {comments && comments.length > 0 ? (\n                    <div className=\"space-y-4\">\n                      {comments.map((comment) => {\n                        const timeAgo = (() => {\n                          const now = new Date();\n                          const commentDate = new Date(comment.createdAt);\n                          const diffMs = now.getTime() - commentDate.getTime();\n                          const diffMins = Math.floor(diffMs / 60000);\n                          const diffHours = Math.floor(diffMins / 60);\n                          const diffDays = Math.floor(diffHours / 24);\n                          if (diffMins < 1) return locale === 'es' ? 'ahora' : 'now';\n                          if (diffMins < 60) return locale === 'es' ? `hace ${diffMins}m` : `${diffMins}m ago`;\n                          if (diffHours < 24) return locale === 'es' ? `hace ${diffHours}h` : `${diffHours}h ago`;\n                          return locale === 'es' ? `hace ${diffDays}d` : `${diffDays}d ago`;\n                        })();\n                        return (\n                          <div key={comment.id} className=\"flex gap-3\">\n                            {/* Avatar */}\n                            <div\n                              className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\n                              style={{ backgroundColor: '#8B5CF6' }}\n                            >\n                              {comment.user?.name?.slice(0, 2).toUpperCase() || 'U'}\n                            </div>\n                            {/* Comment Content */}\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className={cn(\"text-sm font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                                  {comment.user?.name || (locale === 'es' ? 'Usuario' : 'User')}\n                                </span>\n                                <span className={cn(\"text-xs\", isDark ? \"text-[#6B7280]\" : \"text-gray-400\")}>\n                                  {timeAgo}\n                                </span>\n                              </div>\n                              <p className={cn(\"text-sm break-words\", isDark ? \"text-[#9CA3AF]\" : \"text-gray-600\")}>\n                                {comment.content}\n                              </p>\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  ) : (\n                    /* Empty State */\n                    <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                      <MessageSquare className={cn(\n                        \"w-10 h-10 mb-3\",\n                        isDark ? \"text-[#3B4252]\" : \"text-gray-300\"\n                      )} />\n                      <p className={cn(\n                        \"text-sm\",\n                        isDark ? \"text-[#6B7280]\" : \"text-gray-500\"\n                      )}>\n                        {locale === 'es' ? 'Sin actividad reciente' : 'No recent activity'}\n                      </p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Comment Input - v0.17.256: Matching TaskDetailModal exactly */}\n                <div className={cn(\n                  \"p-4 border-t\",\n                  isDark ? \"border-white/10\" : \"border-gray-200\"\n                )}>\n                  <div className=\"flex items-start gap-2\">\n                    {/* Current User Avatar */}\n                    {currentUser && (\n                      <div\n                        className=\"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0\"\n                        style={{ backgroundColor: currentUser.color || '#8B5CF6' }}\n                      >\n                        {currentUser.name?.slice(0, 2).toUpperCase() || 'U'}\n                      </div>\n                    )}\n                    <div className={cn(\n                      \"flex-1 flex items-center gap-2 px-3 py-2 rounded-lg\",\n                      isDark ? \"bg-white/5\" : \"bg-white border border-gray-200\"\n                    )}>\n                      <input\n                        type=\"text\"\n                        value={commentText}\n                        onChange={(e) => setCommentText(e.target.value)}\n                        onKeyDown={async (e) => {\n                          if (e.key === 'Enter' && !e.shiftKey && selectedTask && commentText.trim() && onAddComment) {\n                            e.preventDefault();\n                            setIsSubmittingComment(true);\n                            try {\n                              await onAddComment(selectedTask.id, commentText.trim());\n                              setCommentText('');\n                            } finally {\n                              setIsSubmittingComment(false);\n                            }\n                          }\n                        }}\n                        placeholder={locale === 'es' ? 'Escribe un comentario...' : 'Write a comment...'}\n                        disabled={isSubmittingComment || !onAddComment}\n                        className={cn(\n                          \"flex-1 bg-transparent text-sm outline-none\",\n                          isDark ? \"text-white placeholder:text-[#6B7280]\" : \"text-gray-900 placeholder:text-gray-400\",\n                          (isSubmittingComment || !onAddComment) && \"opacity-50\"\n                        )}\n                      />\n                      <button\n                        onClick={async () => {\n                          if (selectedTask && commentText.trim() && onAddComment) {\n                            setIsSubmittingComment(true);\n                            try {\n                              await onAddComment(selectedTask.id, commentText.trim());\n                              setCommentText('');\n                            } finally {\n                              setIsSubmittingComment(false);\n                            }\n                          }\n                        }}\n                        disabled={isSubmittingComment || !commentText.trim() || !onAddComment}\n                        className={cn(\n                          \"p-1.5 rounded transition-colors\",\n                          commentText.trim() && onAddComment\n                            ? \"bg-blue-500 text-white hover:bg-blue-600\"\n                            : (isDark ? \"text-[#6B7280]\" : \"text-gray-400\"),\n                          isSubmittingComment && \"opacity-50 cursor-not-allowed\"\n                        )}\n                      >\n                        {isSubmittingComment ? (\n                          <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                        ) : (\n                          <Send className=\"w-4 h-4\" />\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* v0.17.83: Day Tasks Popover - Shows all tasks for a day */}\n      <AnimatePresence>\n        {selectedDay && (\n          <>\n            {/* Overlay */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              onClick={() => setSelectedDay(null)}\n              className=\"fixed inset-0 bg-black/30 z-40\"\n            />\n            {/* Popover */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95, y: 10 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.95, y: 10 }}\n              className={cn(\n                \"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[320px] max-h-[400px] rounded-xl shadow-2xl z-50 overflow-hidden\",\n                isDark ? \"bg-[#1A1D25]\" : \"bg-white\"\n              )}\n            >\n              <div className={cn(\"px-4 py-3 border-b flex items-center justify-between\", isDark ? \"border-white/10\" : \"border-gray-200\")}>\n                <span className={cn(\"font-medium\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                  {selectedDay.date.toLocaleDateString(locale === 'es' ? 'es-ES' : 'en-US', {\n                    weekday: 'long',\n                    month: 'long',\n                    day: 'numeric'\n                  })}\n                </span>\n                <button\n                  onClick={() => setSelectedDay(null)}\n                  className={cn(\"p-1 rounded\", isDark ? \"hover:bg-white/10 text-[#9CA3AF]\" : \"hover:bg-gray-100 text-gray-500\")}\n                >\n                  <X className=\"w-4 h-4\" />\n                </button>\n              </div>\n              <div className=\"p-3 max-h-[320px] overflow-y-auto space-y-2\">\n                {selectedDay.events.map((event) => (\n                  <button\n                    key={event.id}\n                    onClick={() => {\n                      setSelectedDay(null);\n                      setSelectedTask(event.task);\n                      onTaskOpen?.(event.task.id);\n                    }}\n                    className={cn(\n                      \"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-left transition-colors\",\n                      isDark ? \"hover:bg-white/5\" : \"hover:bg-gray-50\"\n                    )}\n                  >\n                    <StatusIcon task={event.task} />\n                    <span className={cn(\"text-sm truncate flex-1\", isDark ? \"text-white\" : \"text-gray-900\")}>\n                      {event.title}\n                    </span>\n                    {event.task.priority === 'high' || event.task.priority === 'urgent' ? (\n                      <Flag className=\"w-3.5 h-3.5 text-red-400\" />\n                    ) : null}\n                  </button>\n                ))}\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n    </div>\n  );\n}\n\nexport default CalendarBoard;\n","/**\r\n * CalendarBoard Themes\r\n * @version 0.17.0\r\n */\r\n\r\nimport type { CalendarTheme } from './types';\r\n\r\n/**\r\n * Dark theme for CalendarBoard\r\n */\r\nexport const darkTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#0d1117',\r\n  bgSecondary: '#161b22',\r\n  bgHover: '#21262d',\r\n  bgToday: '#1f6feb20',\r\n  bgWeekend: '#161b2280',\r\n  bgOtherMonth: '#0d111750',\r\n\r\n  // Borders\r\n  border: '#30363d',\r\n  borderLight: '#21262d',\r\n\r\n  // Text\r\n  textPrimary: '#c9d1d9',\r\n  textSecondary: '#8b949e',\r\n  textMuted: '#6e7681',\r\n  textToday: '#58a6ff',\r\n\r\n  // Accent colors\r\n  accent: '#58a6ff',\r\n  accentHover: '#79b8ff',\r\n  accentLight: '#58a6ff20',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#f0883e',\r\n  statusCompleted: '#3fb950',\r\n\r\n  // Interactive\r\n  focusRing: '#58a6ff',\r\n};\r\n\r\n/**\r\n * Light theme for CalendarBoard\r\n */\r\nexport const lightTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#ffffff',\r\n  bgSecondary: '#f6f8fa',\r\n  bgHover: '#f3f4f6',\r\n  bgToday: '#dbeafe',\r\n  bgWeekend: '#f9fafb',\r\n  bgOtherMonth: '#f3f4f680',\r\n\r\n  // Borders\r\n  border: '#d0d7de',\r\n  borderLight: '#e5e7eb',\r\n\r\n  // Text\r\n  textPrimary: '#24292f',\r\n  textSecondary: '#57606a',\r\n  textMuted: '#8b949e',\r\n  textToday: '#0969da',\r\n\r\n  // Accent colors\r\n  accent: '#0969da',\r\n  accentHover: '#0550ae',\r\n  accentLight: '#dbeafe',\r\n\r\n  // Status colors\r\n  statusTodo: '#8b949e',\r\n  statusInProgress: '#bf8700',\r\n  statusCompleted: '#1a7f37',\r\n\r\n  // Interactive\r\n  focusRing: '#0969da',\r\n};\r\n\r\n/**\r\n * Neutral theme for CalendarBoard\r\n */\r\nexport const neutralTheme: CalendarTheme = {\r\n  // Backgrounds\r\n  bgPrimary: '#1a1a2e',\r\n  bgSecondary: '#16213e',\r\n  bgHover: '#1f3460',\r\n  bgToday: '#6366f120',\r\n  bgWeekend: '#16213e80',\r\n  bgOtherMonth: '#1a1a2e50',\r\n\r\n  // Borders\r\n  border: '#2a3f5f',\r\n  borderLight: '#1f3460',\r\n\r\n  // Text\r\n  textPrimary: '#e4e6eb',\r\n  textSecondary: '#a8b2c1',\r\n  textMuted: '#6b7280',\r\n  textToday: '#818cf8',\r\n\r\n  // Accent colors\r\n  accent: '#6366f1',\r\n  accentHover: '#818cf8',\r\n  accentLight: '#6366f120',\r\n\r\n  // Status colors\r\n  statusTodo: '#9ca3af',\r\n  statusInProgress: '#fbbf24',\r\n  statusCompleted: '#34d399',\r\n\r\n  // Interactive\r\n  focusRing: '#6366f1',\r\n};\r\n\r\n/**\r\n * All available themes\r\n */\r\nexport const calendarThemes = {\r\n  dark: darkTheme,\r\n  light: lightTheme,\r\n  neutral: neutralTheme,\r\n} as const;\r\n\r\nexport type CalendarThemeName = keyof typeof calendarThemes;\r\n\r\n/**\r\n * Get theme by name\r\n */\r\nexport function getCalendarTheme(themeName: CalendarThemeName): CalendarTheme {\r\n  return calendarThemes[themeName] || calendarThemes.dark;\r\n}\r\n","/**\r\n * CardStack Component\r\n * Visual grouping of related cards with expand/collapse\r\n * @module components/CardStack\r\n */\r\n\r\nimport { useState, useMemo } from 'react'\r\nimport type { Card } from '../../types'\r\nimport type { CardStack as CardStackType } from '../../types/card-stack'\r\nimport { cn } from '../../utils'\r\nimport './card-stack.css'\r\n\r\nexport interface CardStackProps {\r\n  /** Stack configuration */\r\n  stack: CardStackType\r\n  /** All cards in the board */\r\n  cards: Card[]\r\n  /** Card render function */\r\n  renderCard?: (card: Card) => React.ReactNode\r\n  /** Click handler for individual cards */\r\n  onCardClick?: (card: Card) => void\r\n  /** Expand/collapse handler */\r\n  onToggleExpand?: (stackId: string) => void\r\n  /** Unstack handler (remove card from stack) */\r\n  onUnstack?: (stackId: string, cardId: string) => void\r\n  /** Delete entire stack handler */\r\n  onDeleteStack?: (stackId: string) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * CardStack - Collapsible group of related cards\r\n */\r\nexport function CardStack({\r\n  stack,\r\n  cards,\r\n  renderCard,\r\n  onCardClick,\r\n  onToggleExpand,\r\n  onUnstack,\r\n  onDeleteStack,\r\n  className,\r\n}: CardStackProps) {\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  // Get cards in this stack\r\n  const stackCards = useMemo(() => {\r\n    return cards.filter((card) => stack.cardIds.includes(card.id))\r\n  }, [cards, stack.cardIds])\r\n\r\n  // Calculate stack statistics\r\n  const stats = useMemo(() => {\r\n    const totalCards = stackCards.length\r\n    const uniqueAssignees = new Set(\r\n      stackCards.flatMap((c) => c.assignedUserIds || [])\r\n    ).size\r\n    const priorities = stackCards.map((c) => c.priority).filter(Boolean)\r\n    const labels = new Set(stackCards.flatMap((c) => c.labels || [])).size\r\n\r\n    return {\r\n      totalCards,\r\n      uniqueAssignees,\r\n      priorities,\r\n      labels,\r\n    }\r\n  }, [stackCards])\r\n\r\n  const handleToggle = () => {\r\n    onToggleExpand?.(stack.id)\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn('card-stack', !stack.isExpanded && 'card-stack-collapsed', className)}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      style={{\r\n        '--stack-color': stack.color || 'var(--color-accent-primary)',\r\n      } as React.CSSProperties}\r\n    >\r\n      {/* Stack Header */}\r\n      <div className=\"card-stack-header\" onClick={handleToggle}>\r\n        <div className=\"card-stack-header-left\">\r\n          {/* Expand/Collapse Icon */}\r\n          <button className=\"card-stack-toggle\" aria-label={stack.isExpanded ? 'Collapse' : 'Expand'}>\r\n            <svg\r\n              width=\"16\"\r\n              height=\"16\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              className={cn('card-stack-chevron', stack.isExpanded && 'expanded')}\r\n            >\r\n              <polyline points=\"6 9 12 15 18 9\" />\r\n            </svg>\r\n          </button>\r\n\r\n          {/* Stack Title */}\r\n          <h3 className=\"card-stack-title\">{stack.title}</h3>\r\n\r\n          {/* Stack Badge */}\r\n          <div className=\"card-stack-badge\">{stats.totalCards}</div>\r\n\r\n          {/* Strategy Badge */}\r\n          <div className=\"card-stack-strategy\">\r\n            {stack.strategy === 'ai-similarity' && ' AI'}\r\n            {stack.strategy === 'manual' && ' Manual'}\r\n            {stack.strategy === 'labels' && ' Labels'}\r\n            {stack.strategy === 'assignee' && ' Assignee'}\r\n            {stack.strategy === 'priority' && ' Priority'}\r\n            {stack.strategy === 'epic' && ' Epic'}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stack Actions */}\r\n        {isHovered && (\r\n          <div className=\"card-stack-actions\">\r\n            <button\r\n              className=\"card-stack-action\"\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                onDeleteStack?.(stack.id)\r\n              }}\r\n              aria-label=\"Delete stack\"\r\n            >\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <polyline points=\"3 6 5 6 21 6\" />\r\n                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Stack Summary (when collapsed) */}\r\n      {!stack.isExpanded && (\r\n        <div className=\"card-stack-summary\">\r\n          <div className=\"card-stack-summary-item\">\r\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" />\r\n              <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n            </svg>\r\n            <span>{stats.uniqueAssignees} assignees</span>\r\n          </div>\r\n          {stats.labels > 0 && (\r\n            <div className=\"card-stack-summary-item\">\r\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\" />\r\n                <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" />\r\n              </svg>\r\n              <span>{stats.labels} labels</span>\r\n            </div>\r\n          )}\r\n          {stack.confidence && (\r\n            <div className=\"card-stack-summary-item\">\r\n              <span className=\"card-stack-confidence\">{Math.round(stack.confidence * 100)}% match</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Stack Content (when expanded) */}\r\n      {stack.isExpanded && (\r\n        <div className=\"card-stack-content\">\r\n          {stackCards.length === 0 ? (\r\n            <div className=\"card-stack-empty\">\r\n              <p>No cards in this stack</p>\r\n              <span>Drag cards here or delete this stack</span>\r\n            </div>\r\n          ) : (\r\n            <div className=\"card-stack-cards\">\r\n              {stackCards.map((card) => (\r\n                <div key={card.id} className=\"card-stack-card-wrapper\">\r\n                  {renderCard ? (\r\n                    <div onClick={() => onCardClick?.(card)}>{renderCard(card)}</div>\r\n                  ) : (\r\n                    <div className=\"card-stack-default-card\" onClick={() => onCardClick?.(card)}>\r\n                      <h4>{card.title}</h4>\r\n                      {card.description && <p>{card.description.substring(0, 100)}...</p>}\r\n                    </div>\r\n                  )}\r\n                  {/* Unstack button */}\r\n                  <button\r\n                    className=\"card-stack-unstack-btn\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      onUnstack?.(stack.id, card.id)\r\n                    }}\r\n                    aria-label=\"Remove from stack\"\r\n                  >\r\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n                      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Card History & Time Travel Types\r\n * Tracks all changes to cards with full reproducibility\r\n * @module types/card-history\r\n */\r\n\r\nimport type { Card } from './index'\r\n\r\n/**\r\n * Types of events that can occur in a card's history\r\n */\r\nexport type CardHistoryEventType =\r\n  | 'created'\r\n  | 'status_changed'\r\n  | 'assignee_changed'\r\n  | 'priority_changed'\r\n  | 'moved'\r\n  | 'title_updated'\r\n  | 'description_updated'\r\n  | 'dates_changed'\r\n  | 'labels_changed'\r\n  | 'dependency_added'\r\n  | 'dependency_removed'\r\n  | 'comment_added'\r\n  | 'archived'\r\n  | 'restored'\r\n\r\n/**\r\n * Represents a single change in a card's history\r\n */\r\nexport interface CardHistoryEvent {\r\n  /** Unique event ID */\r\n  id: string\r\n  /** Card this event belongs to */\r\n  cardId: string\r\n  /** When the event occurred */\r\n  timestamp: Date\r\n  /** Type of change */\r\n  type: CardHistoryEventType\r\n  /** User who made the change */\r\n  userId: string\r\n  /** User display name (for UI) */\r\n  userName?: string\r\n  /** User avatar URL (for UI) */\r\n  userAvatar?: string\r\n  /** Detailed changes (before/after) */\r\n  changes: Record<string, { from: any; to: any }>\r\n  /** Additional context */\r\n  metadata?: {\r\n    /** Column names for moves */\r\n    fromColumn?: string\r\n    toColumn?: string\r\n    /** Comment text for comment events */\r\n    commentText?: string\r\n    /** Reason for change */\r\n    reason?: string\r\n    /** Related card IDs */\r\n    relatedCards?: string[]\r\n  }\r\n}\r\n\r\n/**\r\n * Filter configuration for history events\r\n */\r\nexport interface HistoryFilter {\r\n  /** Filter by event types */\r\n  types?: CardHistoryEventType[]\r\n  /** Filter by users */\r\n  users?: string[]\r\n  /** Filter by date range */\r\n  dateRange?: {\r\n    start: Date\r\n    end: Date\r\n  }\r\n  /** Search in change descriptions */\r\n  searchTerm?: string\r\n}\r\n\r\n/**\r\n * State for the replay/time-travel feature\r\n */\r\nexport interface ReplayState {\r\n  /** Current position in history (0 = oldest, length-1 = newest) */\r\n  currentIndex: number\r\n  /** Is replay actively playing */\r\n  isPlaying: boolean\r\n  /** Playback speed (1 = normal, 2 = 2x, etc.) */\r\n  speed: number\r\n  /** Card state at current index */\r\n  cardState: Card\r\n  /** Total number of events */\r\n  totalEvents: number\r\n  /** Can go back */\r\n  canGoBack: boolean\r\n  /** Can go forward */\r\n  canGoForward: boolean\r\n}\r\n\r\n/**\r\n * Configuration for history tracking\r\n */\r\nexport interface HistoryConfig {\r\n  /** Enable automatic history tracking */\r\n  enabled: boolean\r\n  /** Maximum events to store per card */\r\n  maxEventsPerCard: number\r\n  /** Auto-save interval in milliseconds */\r\n  autoSaveInterval: number\r\n  /** Store history in localStorage */\r\n  persistToStorage: boolean\r\n  /** Storage key prefix */\r\n  storagePrefix: string\r\n}\r\n\r\n/**\r\n * Timeline visualization configuration\r\n */\r\nexport interface TimelineConfig {\r\n  /** Show event icons */\r\n  showIcons: boolean\r\n  /** Show user avatars */\r\n  showAvatars: boolean\r\n  /** Group events by day */\r\n  groupByDay: boolean\r\n  /** Show relative times (e.g. \"2 hours ago\") */\r\n  useRelativeTime: boolean\r\n  /** Compact mode (less spacing) */\r\n  compact: boolean\r\n}\r\n\r\n/**\r\n * Snapshot of a card at a specific point in time\r\n */\r\nexport interface CardSnapshot {\r\n  /** When this snapshot was taken */\r\n  timestamp: Date\r\n  /** Complete card state */\r\n  cardState: Card\r\n  /** Event that triggered this snapshot */\r\n  eventId: string\r\n  /** Index in history */\r\n  index: number\r\n}\r\n\r\n/**\r\n * Statistics about a card's history\r\n */\r\nexport interface HistoryStats {\r\n  /** Total events */\r\n  totalEvents: number\r\n  /** Events by type */\r\n  eventsByType: Record<CardHistoryEventType, number>\r\n  /** Events by user */\r\n  eventsByUser: Record<string, number>\r\n  /** First event timestamp */\r\n  firstEvent?: Date\r\n  /** Last event timestamp */\r\n  lastEvent?: Date\r\n  /** Most active day */\r\n  mostActiveDay?: Date\r\n  /** Average events per day */\r\n  avgEventsPerDay: number\r\n  /** Time in each column (in milliseconds) */\r\n  timeInColumns: Record<string, number>\r\n}\r\n\r\n/**\r\n * Default history configuration\r\n */\r\nexport const DEFAULT_HISTORY_CONFIG: HistoryConfig = {\r\n  enabled: true,\r\n  maxEventsPerCard: 1000,\r\n  autoSaveInterval: 5000,\r\n  persistToStorage: true,\r\n  storagePrefix: 'asakaa-history',\r\n}\r\n\r\n/**\r\n * Default timeline configuration\r\n */\r\nexport const DEFAULT_TIMELINE_CONFIG: TimelineConfig = {\r\n  showIcons: true,\r\n  showAvatars: true,\r\n  groupByDay: true,\r\n  useRelativeTime: true,\r\n  compact: false,\r\n}\r\n\r\n/**\r\n * Helper to create a history event\r\n */\r\nexport function createHistoryEvent(\r\n  cardId: string,\r\n  type: CardHistoryEventType,\r\n  userId: string,\r\n  changes: Record<string, { from: any; to: any }>,\r\n  metadata?: CardHistoryEvent['metadata']\r\n): CardHistoryEvent {\r\n  return {\r\n    id: `${cardId}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n    cardId,\r\n    timestamp: new Date(),\r\n    type,\r\n    userId,\r\n    changes,\r\n    metadata,\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to format event description for UI\r\n */\r\nexport function formatEventDescription(event: CardHistoryEvent): string {\r\n  switch (event.type) {\r\n    case 'created':\r\n      return `Created card`\r\n    case 'status_changed':\r\n      return `Changed status from \"${event.changes.status?.from}\" to \"${event.changes.status?.to}\"`\r\n    case 'assignee_changed':\r\n      return `Changed assignee`\r\n    case 'priority_changed':\r\n      return `Changed priority from ${event.changes.priority?.from} to ${event.changes.priority?.to}`\r\n    case 'moved':\r\n      return `Moved from ${event.metadata?.fromColumn || 'unknown'} to ${event.metadata?.toColumn || 'unknown'}`\r\n    case 'title_updated':\r\n      return `Updated title`\r\n    case 'description_updated':\r\n      return `Updated description`\r\n    case 'dates_changed':\r\n      return `Changed dates`\r\n    case 'labels_changed':\r\n      return `Updated labels`\r\n    case 'dependency_added':\r\n      return `Added dependency`\r\n    case 'dependency_removed':\r\n      return `Removed dependency`\r\n    case 'comment_added':\r\n      return `Added comment`\r\n    case 'archived':\r\n      return `Archived card`\r\n    case 'restored':\r\n      return `Restored card`\r\n    default:\r\n      return `Updated card`\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to get icon for event type\r\n */\r\nexport function getEventIcon(type: CardHistoryEventType): string {\r\n  const icons: Record<CardHistoryEventType, string> = {\r\n    created: '',\r\n    status_changed: '',\r\n    assignee_changed: '',\r\n    priority_changed: '',\r\n    moved: '',\r\n    title_updated: '',\r\n    description_updated: '',\r\n    dates_changed: '',\r\n    labels_changed: '',\r\n    dependency_added: '',\r\n    dependency_removed: '',\r\n    comment_added: '',\r\n    archived: '',\r\n    restored: '',\r\n  }\r\n  return icons[type] || ''\r\n}\r\n\r\n/**\r\n * Helper to get color for event type\r\n */\r\nexport function getEventColor(type: CardHistoryEventType): string {\r\n  const colors: Record<CardHistoryEventType, string> = {\r\n    created: '#10b981',\r\n    status_changed: '#3b82f6',\r\n    assignee_changed: '#8b5cf6',\r\n    priority_changed: '#f59e0b',\r\n    moved: '#06b6d4',\r\n    title_updated: '#6366f1',\r\n    description_updated: '#6366f1',\r\n    dates_changed: '#ec4899',\r\n    labels_changed: '#14b8a6',\r\n    dependency_added: '#a855f7',\r\n    dependency_removed: '#ef4444',\r\n    comment_added: '#84cc16',\r\n    archived: '#6b7280',\r\n    restored: '#10b981',\r\n  }\r\n  return colors[type] || '#6b7280'\r\n}\r\n","/**\r\n * CardHistoryTimeline Component\r\n * Interactive timeline visualization of card history\r\n * @module components/CardHistory\r\n */\r\n\r\nimport { useState, useMemo, useRef, useEffect } from 'react'\r\nimport type {\r\n  CardHistoryEvent,\r\n  HistoryFilter,\r\n  TimelineConfig,\r\n  CardHistoryEventType,\r\n} from '../../types/card-history'\r\nimport {\r\n  DEFAULT_TIMELINE_CONFIG,\r\n  formatEventDescription,\r\n  getEventIcon,\r\n  getEventColor,\r\n} from '../../types/card-history'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardHistoryTimelineProps {\r\n  /** History events to display */\r\n  events: CardHistoryEvent[]\r\n  /** Current filter */\r\n  filter: HistoryFilter\r\n  /** Update filter */\r\n  onFilterChange: (filter: HistoryFilter) => void\r\n  /** Clear filter */\r\n  onClearFilter: () => void\r\n  /** Click on event */\r\n  onEventClick?: (event: CardHistoryEvent) => void\r\n  /** Selected event ID */\r\n  selectedEventId?: string\r\n  /** Timeline configuration */\r\n  config?: Partial<TimelineConfig>\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Timeline component showing card history\r\n */\r\nexport function CardHistoryTimeline({\r\n  events,\r\n  filter,\r\n  onFilterChange,\r\n  onClearFilter,\r\n  onEventClick,\r\n  selectedEventId,\r\n  config: customConfig,\r\n  className,\r\n}: CardHistoryTimelineProps) {\r\n  const config = useMemo(\r\n    () => ({ ...DEFAULT_TIMELINE_CONFIG, ...customConfig }),\r\n    [customConfig]\r\n  )\r\n\r\n  const [expandedEvents, setExpandedEvents] = useState<Set<string>>(new Set())\r\n  const timelineRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Group events by day if configured\r\n  const groupedEvents = useMemo(() => {\r\n    if (!config.groupByDay) {\r\n      return [{ date: null, events }]\r\n    }\r\n\r\n    const groups = new Map<string, CardHistoryEvent[]>()\r\n    events.forEach((event) => {\r\n      const dateKey = event.timestamp.toISOString().split('T')[0]!\r\n      const group = groups.get(dateKey)\r\n      if (!group) {\r\n        groups.set(dateKey, [event])\r\n      } else {\r\n        group.push(event)\r\n      }\r\n    })\r\n\r\n    return Array.from(groups.entries())\r\n      .sort((a, b) => b[0].localeCompare(a[0]))\r\n      .map(([dateStr, events]) => ({\r\n        date: new Date(dateStr),\r\n        events: events.sort(\r\n          (a, b) => b.timestamp.getTime() - a.timestamp.getTime()\r\n        ),\r\n      }))\r\n  }, [events, config.groupByDay])\r\n\r\n  // Get unique users and event types for filter\r\n  const { uniqueUsers, uniqueTypes } = useMemo(() => {\r\n    const users = new Set<string>()\r\n    const types = new Set<CardHistoryEventType>()\r\n    events.forEach((event) => {\r\n      users.add(event.userId)\r\n      types.add(event.type)\r\n    })\r\n    return {\r\n      uniqueUsers: Array.from(users),\r\n      uniqueTypes: Array.from(types),\r\n    }\r\n  }, [events])\r\n\r\n  // Toggle event expansion\r\n  const toggleEvent = (eventId: string) => {\r\n    setExpandedEvents((prev) => {\r\n      const next = new Set(prev)\r\n      if (next.has(eventId)) {\r\n        next.delete(eventId)\r\n      } else {\r\n        next.add(eventId)\r\n      }\r\n      return next\r\n    })\r\n  }\r\n\r\n  // Format relative time\r\n  const formatRelativeTime = (date: Date): string => {\r\n    const now = new Date()\r\n    const diffMs = now.getTime() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    const diffHours = Math.floor(diffMs / 3600000)\r\n    const diffDays = Math.floor(diffMs / 86400000)\r\n\r\n    if (diffMins < 1) return 'just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    if (diffDays < 7) return `${diffDays}d ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  // Active filter count\r\n  const activeFilterCount = useMemo(() => {\r\n    let count = 0\r\n    if (filter.types && filter.types.length > 0) count++\r\n    if (filter.users && filter.users.length > 0) count++\r\n    if (filter.dateRange) count++\r\n    if (filter.searchTerm) count++\r\n    return count\r\n  }, [filter])\r\n\r\n  // Scroll to selected event\r\n  useEffect(() => {\r\n    if (selectedEventId && timelineRef.current) {\r\n      const element = timelineRef.current.querySelector(\r\n        `[data-event-id=\"${selectedEventId}\"]`\r\n      )\r\n      if (element) {\r\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n      }\r\n    }\r\n  }, [selectedEventId])\r\n\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className={cn('history-timeline-empty', className)}>\r\n        <div className=\"history-timeline-empty-icon\"></div>\r\n        <p className=\"history-timeline-empty-text\">No history events yet</p>\r\n        <p className=\"history-timeline-empty-subtext\">\r\n          Changes to this card will appear here\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('history-timeline', config.compact && 'compact', className)}>\r\n      {/* Filter Bar */}\r\n      <div className=\"history-timeline-filters\">\r\n        <div className=\"history-timeline-filter-group\">\r\n          {/* Event Type Filter */}\r\n          <select\r\n            className=\"history-timeline-filter-select\"\r\n            value={filter.types?.[0] || ''}\r\n            onChange={(e) => {\r\n              const value = e.target.value\r\n              onFilterChange({\r\n                ...filter,\r\n                types: value ? [value as CardHistoryEventType] : undefined,\r\n              })\r\n            }}\r\n          >\r\n            <option value=\"\">All Events</option>\r\n            {uniqueTypes.map((type) => (\r\n              <option key={type} value={type}>\r\n                {getEventIcon(type)} {type.replace('_', ' ')}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* User Filter */}\r\n          {uniqueUsers.length > 1 && (\r\n            <select\r\n              className=\"history-timeline-filter-select\"\r\n              value={filter.users?.[0] || ''}\r\n              onChange={(e) => {\r\n                const value = e.target.value\r\n                onFilterChange({\r\n                  ...filter,\r\n                  users: value ? [value] : undefined,\r\n                })\r\n              }}\r\n            >\r\n              <option value=\"\">All Users</option>\r\n              {uniqueUsers.map((userId) => (\r\n                <option key={userId} value={userId}>\r\n                  {userId}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n\r\n          {/* Search */}\r\n          <input\r\n            type=\"text\"\r\n            className=\"history-timeline-filter-search\"\r\n            placeholder=\"Search history...\"\r\n            value={filter.searchTerm || ''}\r\n            onChange={(e) =>\r\n              onFilterChange({ ...filter, searchTerm: e.target.value })\r\n            }\r\n          />\r\n        </div>\r\n\r\n        {/* Clear Filter */}\r\n        {activeFilterCount > 0 && (\r\n          <button\r\n            className=\"history-timeline-filter-clear\"\r\n            onClick={onClearFilter}\r\n          >\r\n            Clear filters ({activeFilterCount})\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Timeline */}\r\n      <div className=\"history-timeline-container\" ref={timelineRef}>\r\n        {groupedEvents.map((group) => (\r\n          <div key={group.date?.toISOString() || 'all'} className=\"history-timeline-group\">\r\n            {/* Day Header */}\r\n            {config.groupByDay && group.date && (\r\n              <div className=\"history-timeline-day-header\">\r\n                <span className=\"history-timeline-day-date\">\r\n                  {group.date.toLocaleDateString('en-US', {\r\n                    month: 'short',\r\n                    day: 'numeric',\r\n                    year: 'numeric',\r\n                  })}\r\n                </span>\r\n                <span className=\"history-timeline-day-count\">\r\n                  {group.events.length} events\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Events */}\r\n            <div className=\"history-timeline-events\">\r\n              {group.events.map((event, eventIndex) => {\r\n                const isExpanded = expandedEvents.has(event.id)\r\n                const isSelected = selectedEventId === event.id\r\n                const eventColor = getEventColor(event.type)\r\n\r\n                return (\r\n                  <div\r\n                    key={event.id}\r\n                    data-event-id={event.id}\r\n                    className={cn(\r\n                      'history-timeline-event',\r\n                      isExpanded && 'expanded',\r\n                      isSelected && 'selected'\r\n                    )}\r\n                    onClick={() => onEventClick?.(event)}\r\n                  >\r\n                    {/* Timeline Line */}\r\n                    <div className=\"history-timeline-line\">\r\n                      {/* Event Dot */}\r\n                      <div\r\n                        className=\"history-timeline-dot\"\r\n                        style={{ backgroundColor: eventColor }}\r\n                      >\r\n                        {config.showIcons && (\r\n                          <span className=\"history-timeline-dot-icon\">\r\n                            {getEventIcon(event.type)}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Connecting Line */}\r\n                      {eventIndex < group.events.length - 1 && (\r\n                        <div\r\n                          className=\"history-timeline-connector\"\r\n                          style={{ borderColor: eventColor }}\r\n                        />\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Event Content */}\r\n                    <div className=\"history-timeline-event-content\">\r\n                      {/* Header */}\r\n                      <div className=\"history-timeline-event-header\">\r\n                        <div className=\"history-timeline-event-header-left\">\r\n                          {/* User Avatar */}\r\n                          {config.showAvatars && event.userAvatar && (\r\n                            <img\r\n                              src={event.userAvatar}\r\n                              alt={event.userName || event.userId}\r\n                              className=\"history-timeline-event-avatar\"\r\n                            />\r\n                          )}\r\n\r\n                          {/* Description */}\r\n                          <div className=\"history-timeline-event-description\">\r\n                            <span className=\"history-timeline-event-user\">\r\n                              {event.userName || event.userId}\r\n                            </span>\r\n                            <span className=\"history-timeline-event-action\">\r\n                              {formatEventDescription(event)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Time */}\r\n                        <div className=\"history-timeline-event-time\">\r\n                          {config.useRelativeTime\r\n                            ? formatRelativeTime(event.timestamp)\r\n                            : event.timestamp.toLocaleString()}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Changes Preview */}\r\n                      {Object.keys(event.changes).length > 0 && (\r\n                        <button\r\n                          className=\"history-timeline-event-toggle\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            toggleEvent(event.id)\r\n                          }}\r\n                        >\r\n                          {isExpanded ? '' : ''} Show changes\r\n                        </button>\r\n                      )}\r\n\r\n                      {/* Expanded Changes */}\r\n                      {isExpanded && (\r\n                        <div className=\"history-timeline-event-changes\">\r\n                          {Object.entries(event.changes).map(([key, change]) => (\r\n                            <div key={key} className=\"history-timeline-event-change\">\r\n                              <span className=\"history-timeline-event-change-key\">\r\n                                {key}:\r\n                              </span>\r\n                              <div className=\"history-timeline-event-change-values\">\r\n                                <span className=\"history-timeline-event-change-from\">\r\n                                  {JSON.stringify(change.from)}\r\n                                </span>\r\n                                <span className=\"history-timeline-event-change-arrow\">\r\n                                  \r\n                                </span>\r\n                                <span className=\"history-timeline-event-change-to\">\r\n                                  {JSON.stringify(change.to)}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n\r\n                          {/* Metadata */}\r\n                          {event.metadata && Object.keys(event.metadata).length > 0 && (\r\n                            <div className=\"history-timeline-event-metadata\">\r\n                              <div className=\"history-timeline-event-metadata-title\">\r\n                                Additional Info:\r\n                              </div>\r\n                              {Object.entries(event.metadata).map(([key, value]) => (\r\n                                <div key={key} className=\"history-timeline-event-metadata-item\">\r\n                                  <span className=\"history-timeline-event-metadata-key\">\r\n                                    {key}:\r\n                                  </span>\r\n                                  <span className=\"history-timeline-event-metadata-value\">\r\n                                    {JSON.stringify(value)}\r\n                                  </span>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * CardHistoryReplay Component\r\n * Video-player-style controls for replaying card history\r\n * @module components/CardHistory\r\n */\r\n\r\nimport { useMemo } from 'react'\r\nimport type { ReplayState, CardHistoryEvent } from '../../types/card-history'\r\nimport { getEventIcon, formatEventDescription } from '../../types/card-history'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardHistoryReplayProps {\r\n  /** Current replay state */\r\n  replayState: ReplayState | null\r\n  /** All history events */\r\n  events: CardHistoryEvent[]\r\n  /** Start replay */\r\n  onStartReplay: () => void\r\n  /** Stop replay */\r\n  onStopReplay: () => void\r\n  /** Toggle play/pause */\r\n  onTogglePlayback: () => void\r\n  /** Go to previous event */\r\n  onPrevious: () => void\r\n  /** Go to next event */\r\n  onNext: () => void\r\n  /** Go to specific event */\r\n  onGoToEvent: (index: number) => void\r\n  /** Change playback speed */\r\n  onSpeedChange: (speed: number) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Replay controls for time-travel functionality\r\n */\r\nexport function CardHistoryReplay({\r\n  replayState,\r\n  events,\r\n  onStartReplay,\r\n  onStopReplay,\r\n  onTogglePlayback,\r\n  onPrevious,\r\n  onNext,\r\n  onGoToEvent,\r\n  onSpeedChange,\r\n  className,\r\n}: CardHistoryReplayProps) {\r\n  // Available playback speeds\r\n  const speeds = [0.5, 1, 1.5, 2, 3]\r\n\r\n  // Current event\r\n  const currentEvent = useMemo(() => {\r\n    if (!replayState || events.length === 0) return null\r\n    return events[replayState.currentIndex]\r\n  }, [replayState, events])\r\n\r\n  // Progress percentage\r\n  const progress = useMemo(() => {\r\n    if (!replayState || replayState.totalEvents === 0) return 0\r\n    return (replayState.currentIndex / (replayState.totalEvents - 1)) * 100\r\n  }, [replayState])\r\n\r\n  // If no events, show empty state\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className={cn('history-replay-empty', className)}>\r\n        <div className=\"history-replay-empty-icon\"></div>\r\n        <p className=\"history-replay-empty-text\">No history to replay</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // If not in replay mode, show start button\r\n  if (!replayState) {\r\n    return (\r\n      <div className={cn('history-replay-start', className)}>\r\n        <button className=\"history-replay-start-button\" onClick={onStartReplay}>\r\n          <svg\r\n            className=\"history-replay-start-icon\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n          >\r\n            <polygon points=\"5 3 19 12 5 21 5 3\" />\r\n          </svg>\r\n          <span>Start Time Travel</span>\r\n        </button>\r\n        <p className=\"history-replay-start-hint\">\r\n          Replay {events.length} events from this card's history\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('history-replay', className)}>\r\n      {/* Current Event Display */}\r\n      <div className=\"history-replay-current-event\">\r\n        <div className=\"history-replay-event-icon\">\r\n          {currentEvent && getEventIcon(currentEvent.type)}\r\n        </div>\r\n        <div className=\"history-replay-event-info\">\r\n          <div className=\"history-replay-event-description\">\r\n            {currentEvent && formatEventDescription(currentEvent)}\r\n          </div>\r\n          <div className=\"history-replay-event-meta\">\r\n            <span className=\"history-replay-event-index\">\r\n              Event {replayState.currentIndex + 1} of {replayState.totalEvents}\r\n            </span>\r\n            <span className=\"history-replay-event-time\">\r\n              {currentEvent && currentEvent.timestamp.toLocaleString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"history-replay-progress-container\">\r\n        <input\r\n          type=\"range\"\r\n          className=\"history-replay-progress-slider\"\r\n          min=\"0\"\r\n          max={replayState.totalEvents - 1}\r\n          value={replayState.currentIndex}\r\n          onChange={(e) => onGoToEvent(parseInt(e.target.value))}\r\n        />\r\n        <div\r\n          className=\"history-replay-progress-fill\"\r\n          style={{ width: `${progress}%` }}\r\n        />\r\n        {/* Event markers on timeline */}\r\n        <div className=\"history-replay-progress-markers\">\r\n          {events.map((event, index) => (\r\n            <div\r\n              key={event.id}\r\n              className={cn(\r\n                'history-replay-progress-marker',\r\n                index === replayState.currentIndex && 'active'\r\n              )}\r\n              style={{\r\n                left: `${(index / (replayState.totalEvents - 1)) * 100}%`,\r\n              }}\r\n              onClick={() => onGoToEvent(index)}\r\n              title={formatEventDescription(event)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Playback Controls */}\r\n      <div className=\"history-replay-controls\">\r\n        {/* Previous Button */}\r\n        <button\r\n          className=\"history-replay-control-btn\"\r\n          onClick={onPrevious}\r\n          disabled={!replayState.canGoBack}\r\n          title=\"Previous event ()\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <polygon points=\"19 20 9 12 19 4 19 20\" />\r\n            <line x1=\"5\" y1=\"19\" x2=\"5\" y2=\"5\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Play/Pause Button */}\r\n        <button\r\n          className=\"history-replay-control-btn history-replay-control-play\"\r\n          onClick={onTogglePlayback}\r\n          title={replayState.isPlaying ? 'Pause (Space)' : 'Play (Space)'}\r\n        >\r\n          {replayState.isPlaying ? (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" />\r\n              <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" />\r\n            </svg>\r\n          ) : (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <polygon points=\"5 3 19 12 5 21 5 3\" />\r\n            </svg>\r\n          )}\r\n        </button>\r\n\r\n        {/* Next Button */}\r\n        <button\r\n          className=\"history-replay-control-btn\"\r\n          onClick={onNext}\r\n          disabled={!replayState.canGoForward}\r\n          title=\"Next event ()\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <polygon points=\"5 4 15 12 5 20 5 4\" />\r\n            <line x1=\"19\" y1=\"5\" x2=\"19\" y2=\"19\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Speed Control */}\r\n        <div className=\"history-replay-speed\">\r\n          <label className=\"history-replay-speed-label\">Speed:</label>\r\n          <div className=\"history-replay-speed-buttons\">\r\n            {speeds.map((speed) => (\r\n              <button\r\n                key={speed}\r\n                className={cn(\r\n                  'history-replay-speed-btn',\r\n                  replayState.speed === speed && 'active'\r\n                )}\r\n                onClick={() => onSpeedChange(speed)}\r\n              >\r\n                {speed}x\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stop Button */}\r\n        <button\r\n          className=\"history-replay-control-btn history-replay-stop\"\r\n          onClick={onStopReplay}\r\n          title=\"Stop replay (Esc)\"\r\n        >\r\n          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <rect x=\"6\" y=\"6\" width=\"12\" height=\"12\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Keyboard Shortcuts Hint */}\r\n      <div className=\"history-replay-shortcuts\">\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd>Space</kbd> Play/Pause\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd></kbd> Previous\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd></kbd> Next\r\n        </span>\r\n        <span className=\"history-replay-shortcut\">\r\n          <kbd>Esc</kbd> Stop\r\n        </span>\r\n      </div>\r\n\r\n      {/* Card State Preview */}\r\n      <div className=\"history-replay-card-preview\">\r\n        <div className=\"history-replay-card-preview-header\">\r\n          <span className=\"history-replay-card-preview-title\">\r\n            Card State at This Point\r\n          </span>\r\n          <span className=\"history-replay-card-preview-time\">\r\n            {currentEvent && currentEvent.timestamp.toLocaleDateString()}\r\n          </span>\r\n        </div>\r\n        <div className=\"history-replay-card-preview-content\">\r\n          <div className=\"history-replay-card-preview-field\">\r\n            <span className=\"history-replay-card-preview-label\">Title:</span>\r\n            <span className=\"history-replay-card-preview-value\">\r\n              {replayState.cardState.title}\r\n            </span>\r\n          </div>\r\n          {replayState.cardState.description && (\r\n            <div className=\"history-replay-card-preview-field\">\r\n              <span className=\"history-replay-card-preview-label\">Description:</span>\r\n              <span className=\"history-replay-card-preview-value\">\r\n                {replayState.cardState.description}\r\n              </span>\r\n            </div>\r\n          )}\r\n          <div className=\"history-replay-card-preview-field\">\r\n            <span className=\"history-replay-card-preview-label\">Priority:</span>\r\n            <span className=\"history-replay-card-preview-value\">\r\n              {replayState.cardState.priority || 'None'}\r\n            </span>\r\n          </div>\r\n          {replayState.cardState.labels && replayState.cardState.labels.length > 0 && (\r\n            <div className=\"history-replay-card-preview-field\">\r\n              <span className=\"history-replay-card-preview-label\">Labels:</span>\r\n              <div className=\"history-replay-card-preview-labels\">\r\n                {replayState.cardState.labels.map((label) => (\r\n                  <span key={label} className=\"history-replay-card-preview-label-tag\">\r\n                    {label}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Card Relationships & Graph Types\r\n * Force-directed graph visualization for card dependencies and relationships\r\n * @module types/card-relationships\r\n */\r\n\r\nimport type { Card } from './index'\r\n\r\n/**\r\n * Types of relationships between cards\r\n */\r\nexport type RelationshipType =\r\n  | 'blocks'        // This card blocks another card\r\n  | 'blocked_by'    // This card is blocked by another card\r\n  | 'depends_on'    // This card depends on another card\r\n  | 'required_by'   // This card is required by another card\r\n  | 'relates_to'    // General relationship\r\n  | 'duplicates'    // This card duplicates another card\r\n  | 'parent_of'     // Parent-child relationship\r\n  | 'child_of'      // Child-parent relationship\r\n  | 'similar_to'    // AI-detected similarity\r\n\r\n/**\r\n * Represents a relationship between two cards\r\n */\r\nexport interface CardRelationship {\r\n  /** Unique relationship ID */\r\n  id: string\r\n  /** Source card ID */\r\n  sourceId: string\r\n  /** Target card ID */\r\n  targetId: string\r\n  /** Type of relationship */\r\n  type: RelationshipType\r\n  /** Relationship strength (0-1, for AI-detected relationships) */\r\n  strength?: number\r\n  /** When relationship was created */\r\n  createdAt: Date\r\n  /** User who created the relationship */\r\n  createdBy?: string\r\n  /** Additional metadata */\r\n  metadata?: {\r\n    /** Reason for relationship */\r\n    reason?: string\r\n    /** Is this relationship auto-detected */\r\n    autoDetected?: boolean\r\n    /** Confidence score for auto-detected relationships */\r\n    confidence?: number\r\n  }\r\n}\r\n\r\n/**\r\n * Node in the relationship graph\r\n */\r\nexport interface GraphNode {\r\n  /** Card ID */\r\n  id: string\r\n  /** Card reference */\r\n  card: Card\r\n  /** X position (calculated by force simulation) */\r\n  x?: number\r\n  /** Y position (calculated by force simulation) */\r\n  y?: number\r\n  /** X velocity (for force simulation) */\r\n  vx?: number\r\n  /** Y velocity (for force simulation) */\r\n  vy?: number\r\n  /** Fixed position (prevent movement) */\r\n  fx?: number | null\r\n  /** Fixed position (prevent movement) */\r\n  fy?: number | null\r\n  /** Node degree (number of connections) */\r\n  degree?: number\r\n  /** Is this node on the critical path */\r\n  onCriticalPath?: boolean\r\n  /** Cluster ID (for grouping) */\r\n  clusterId?: string\r\n}\r\n\r\n/**\r\n * Edge in the relationship graph\r\n */\r\nexport interface GraphEdge {\r\n  /** Relationship ID */\r\n  id: string\r\n  /** Source node ID */\r\n  source: string | GraphNode\r\n  /** Target node ID */\r\n  target: string | GraphNode\r\n  /** Relationship type */\r\n  type: RelationshipType\r\n  /** Edge strength (for styling) */\r\n  strength?: number\r\n  /** Is this edge on the critical path */\r\n  onCriticalPath?: boolean\r\n}\r\n\r\n/**\r\n * Graph layout algorithms\r\n */\r\nexport type GraphLayout =\r\n  | 'force'        // Force-directed layout (D3 force simulation)\r\n  | 'hierarchical' // Top-down hierarchical layout\r\n  | 'circular'     // Circular layout\r\n  | 'radial'       // Radial layout from center node\r\n  | 'grid'         // Grid layout\r\n\r\n/**\r\n * Graph visualization configuration\r\n */\r\nexport interface GraphConfig {\r\n  /** Layout algorithm */\r\n  layout: GraphLayout\r\n  /** Width of the graph container */\r\n  width: number\r\n  /** Height of the graph container */\r\n  height: number\r\n  /** Enable node dragging */\r\n  enableDragging: boolean\r\n  /** Enable zoom and pan */\r\n  enableZoom: boolean\r\n  /** Show node labels */\r\n  showLabels: boolean\r\n  /** Show edge labels */\r\n  showEdgeLabels: boolean\r\n  /** Highlight critical path */\r\n  highlightCriticalPath: boolean\r\n  /** Node size */\r\n  nodeSize: number\r\n  /** Edge width */\r\n  edgeWidth: number\r\n  /** Animation duration */\r\n  animationDuration: number\r\n  /** Force simulation strength */\r\n  forceStrength: number\r\n  /** Link distance */\r\n  linkDistance: number\r\n  /** Charge strength (repulsion) */\r\n  chargeStrength: number\r\n  /** Center force strength */\r\n  centerForce: number\r\n  /** Color scheme */\r\n  colorScheme: 'status' | 'priority' | 'assignee' | 'cluster'\r\n}\r\n\r\n/**\r\n * Graph filters\r\n */\r\nexport interface GraphFilter {\r\n  /** Filter by relationship types */\r\n  types?: RelationshipType[]\r\n  /** Filter by card IDs */\r\n  cardIds?: string[]\r\n  /** Filter by columns */\r\n  columnIds?: string[]\r\n  /** Minimum relationship strength */\r\n  minStrength?: number\r\n  /** Show only critical path */\r\n  criticalPathOnly?: boolean\r\n  /** Maximum depth from selected node */\r\n  maxDepth?: number\r\n}\r\n\r\n/**\r\n * Critical path analysis result\r\n */\r\nexport interface CriticalPath {\r\n  /** Cards on the critical path */\r\n  cardIds: string[]\r\n  /** Relationships on the critical path */\r\n  relationshipIds: string[]\r\n  /** Total estimated time */\r\n  totalDuration: number\r\n  /** Bottleneck cards */\r\n  bottlenecks: string[]\r\n}\r\n\r\n/**\r\n * Graph statistics\r\n */\r\nexport interface GraphStats {\r\n  /** Total nodes */\r\n  totalNodes: number\r\n  /** Total edges */\r\n  totalEdges: number\r\n  /** Average degree */\r\n  averageDegree: number\r\n  /** Density (0-1) */\r\n  density: number\r\n  /** Number of clusters */\r\n  clusters: number\r\n  /** Isolated nodes (no connections) */\r\n  isolatedNodes: string[]\r\n  /** Hub nodes (most connections) */\r\n  hubNodes: Array<{ cardId: string; degree: number }>\r\n  /** Most common relationship type */\r\n  mostCommonRelationType: RelationshipType\r\n}\r\n\r\n/**\r\n * Graph interaction event\r\n */\r\nexport interface GraphInteraction {\r\n  /** Event type */\r\n  type: 'node-click' | 'node-hover' | 'edge-click' | 'edge-hover' | 'canvas-click'\r\n  /** Selected node */\r\n  node?: GraphNode\r\n  /** Selected edge */\r\n  edge?: GraphEdge\r\n  /** Mouse position */\r\n  position?: { x: number; y: number }\r\n}\r\n\r\n/**\r\n * Default graph configuration\r\n */\r\nexport const DEFAULT_GRAPH_CONFIG: GraphConfig = {\r\n  layout: 'force',\r\n  width: 1200,\r\n  height: 800,\r\n  enableDragging: true,\r\n  enableZoom: true,\r\n  showLabels: true,\r\n  showEdgeLabels: false,\r\n  highlightCriticalPath: true,\r\n  nodeSize: 40,\r\n  edgeWidth: 2,\r\n  animationDuration: 300,\r\n  forceStrength: 0.5,\r\n  linkDistance: 150,\r\n  chargeStrength: -300,\r\n  centerForce: 0.1,\r\n  colorScheme: 'status',\r\n}\r\n\r\n/**\r\n * Helper to create a relationship\r\n */\r\nexport function createRelationship(\r\n  sourceId: string,\r\n  targetId: string,\r\n  type: RelationshipType,\r\n  metadata?: CardRelationship['metadata']\r\n): CardRelationship {\r\n  return {\r\n    id: `${sourceId}-${targetId}-${type}-${Date.now()}`,\r\n    sourceId,\r\n    targetId,\r\n    type,\r\n    createdAt: new Date(),\r\n    metadata,\r\n  }\r\n}\r\n\r\n/**\r\n * Helper to get relationship color\r\n */\r\nexport function getRelationshipColor(type: RelationshipType): string {\r\n  const colors: Record<RelationshipType, string> = {\r\n    blocks: '#ef4444',\r\n    blocked_by: '#dc2626',\r\n    depends_on: '#f59e0b',\r\n    required_by: '#d97706',\r\n    relates_to: '#6b7280',\r\n    duplicates: '#8b5cf6',\r\n    parent_of: '#3b82f6',\r\n    child_of: '#2563eb',\r\n    similar_to: '#10b981',\r\n  }\r\n  return colors[type] || '#6b7280'\r\n}\r\n\r\n/**\r\n * Helper to get relationship label\r\n */\r\nexport function getRelationshipLabel(type: RelationshipType): string {\r\n  const labels: Record<RelationshipType, string> = {\r\n    blocks: 'Blocks',\r\n    blocked_by: 'Blocked by',\r\n    depends_on: 'Depends on',\r\n    required_by: 'Required by',\r\n    relates_to: 'Relates to',\r\n    duplicates: 'Duplicates',\r\n    parent_of: 'Parent of',\r\n    child_of: 'Child of',\r\n    similar_to: 'Similar to',\r\n  }\r\n  return labels[type] || type\r\n}\r\n\r\n/**\r\n * Helper to get relationship icon\r\n */\r\nexport function getRelationshipIcon(type: RelationshipType): string {\r\n  const icons: Record<RelationshipType, string> = {\r\n    blocks: '',\r\n    blocked_by: '',\r\n    depends_on: '',\r\n    required_by: '',\r\n    relates_to: '',\r\n    duplicates: '',\r\n    parent_of: '',\r\n    child_of: '',\r\n    similar_to: '',\r\n  }\r\n  return icons[type] || ''\r\n}\r\n\r\n/**\r\n * Helper to check if relationship is directional\r\n */\r\nexport function isDirectionalRelationship(type: RelationshipType): boolean {\r\n  return [\r\n    'blocks',\r\n    'blocked_by',\r\n    'depends_on',\r\n    'required_by',\r\n    'parent_of',\r\n    'child_of',\r\n  ].includes(type)\r\n}\r\n\r\n/**\r\n * Helper to get inverse relationship type\r\n */\r\nexport function getInverseRelationship(type: RelationshipType): RelationshipType | null {\r\n  const inverses: Partial<Record<RelationshipType, RelationshipType>> = {\r\n    blocks: 'blocked_by',\r\n    blocked_by: 'blocks',\r\n    depends_on: 'required_by',\r\n    required_by: 'depends_on',\r\n    parent_of: 'child_of',\r\n    child_of: 'parent_of',\r\n  }\r\n  return inverses[type] || null\r\n}\r\n\r\n/**\r\n * Calculate graph statistics\r\n */\r\nexport function calculateGraphStats(\r\n  nodes: GraphNode[],\r\n  edges: GraphEdge[]\r\n): GraphStats {\r\n  const totalNodes = nodes.length\r\n  const totalEdges = edges.length\r\n\r\n  // Calculate degrees\r\n  const degrees = new Map<string, number>()\r\n  edges.forEach((edge) => {\r\n    const sourceId = typeof edge.source === 'string' ? edge.source : edge.source.id\r\n    const targetId = typeof edge.target === 'string' ? edge.target : edge.target.id\r\n    degrees.set(sourceId, (degrees.get(sourceId) || 0) + 1)\r\n    degrees.set(targetId, (degrees.get(targetId) || 0) + 1)\r\n  })\r\n\r\n  const averageDegree = totalNodes > 0 ? Array.from(degrees.values()).reduce((a, b) => a + b, 0) / totalNodes : 0\r\n  const maxPossibleEdges = (totalNodes * (totalNodes - 1)) / 2\r\n  const density = maxPossibleEdges > 0 ? totalEdges / maxPossibleEdges : 0\r\n\r\n  // Find isolated nodes\r\n  const isolatedNodes = nodes\r\n    .filter((node) => !degrees.has(node.id))\r\n    .map((node) => node.id)\r\n\r\n  // Find hub nodes (top 5 most connected)\r\n  const hubNodes = Array.from(degrees.entries())\r\n    .map(([cardId, degree]) => ({ cardId, degree }))\r\n    .sort((a, b) => b.degree - a.degree)\r\n    .slice(0, 5)\r\n\r\n  // Most common relationship type\r\n  const typeCounts = new Map<RelationshipType, number>()\r\n  edges.forEach((edge) => {\r\n    typeCounts.set(edge.type, (typeCounts.get(edge.type) || 0) + 1)\r\n  })\r\n  const mostCommonRelationType = Array.from(typeCounts.entries()).sort((a, b) => b[1] - a[1])[0]?.[0] || 'relates_to'\r\n\r\n  return {\r\n    totalNodes,\r\n    totalEdges,\r\n    averageDegree,\r\n    density,\r\n    clusters: 0, // Would need clustering algorithm\r\n    isolatedNodes,\r\n    hubNodes,\r\n    mostCommonRelationType,\r\n  }\r\n}\r\n\r\n/**\r\n * Find critical path using topological sort and longest path\r\n */\r\nexport function findCriticalPath(\r\n  _cards: Card[],\r\n  relationships: CardRelationship[]\r\n): CriticalPath {\r\n  // Simple critical path: cards with most dependencies\r\n  const dependencyCounts = new Map<string, number>()\r\n\r\n  relationships.forEach((rel) => {\r\n    if (rel.type === 'blocks' || rel.type === 'depends_on') {\r\n      dependencyCounts.set(rel.targetId, (dependencyCounts.get(rel.targetId) || 0) + 1)\r\n    }\r\n  })\r\n\r\n  const sortedCards = Array.from(dependencyCounts.entries())\r\n    .sort((a, b) => b[1] - a[1])\r\n    .slice(0, 5)\r\n    .map((entry) => entry[0])\r\n\r\n  const criticalRelationships = relationships\r\n    .filter((rel) =>\r\n      sortedCards.includes(rel.sourceId) || sortedCards.includes(rel.targetId)\r\n    )\r\n    .map((rel) => rel.id)\r\n\r\n  return {\r\n    cardIds: sortedCards,\r\n    relationshipIds: criticalRelationships,\r\n    totalDuration: sortedCards.length * 5, // Estimate 5 days per card\r\n    bottlenecks: sortedCards.slice(0, 2),\r\n  }\r\n}\r\n","/**\r\n * CardRelationshipsGraph Component\r\n * Interactive force-directed graph visualization of card relationships\r\n * @module components/CardRelationships\r\n */\r\n\r\nimport { useRef, useEffect, useState, useCallback } from 'react'\r\nimport type {\r\n  GraphNode,\r\n  GraphEdge,\r\n  GraphConfig,\r\n  GraphFilter,\r\n  CriticalPath,\r\n  GraphStats,\r\n  GraphInteraction,\r\n} from '../../types/card-relationships'\r\nimport {\r\n  getRelationshipColor,\r\n  getRelationshipLabel,\r\n  getRelationshipIcon,\r\n  isDirectionalRelationship,\r\n} from '../../types/card-relationships'\r\nimport { cn } from '../../utils'\r\n\r\nexport interface CardRelationshipsGraphProps {\r\n  /** Graph nodes */\r\n  nodes: GraphNode[]\r\n  /** Graph edges */\r\n  edges: GraphEdge[]\r\n  /** Graph configuration */\r\n  config: GraphConfig\r\n  /** Current filter */\r\n  filter: GraphFilter\r\n  /** Update filter */\r\n  onFilterChange: (filter: GraphFilter) => void\r\n  /** Critical path */\r\n  criticalPath: CriticalPath | null\r\n  /** Graph statistics */\r\n  stats: GraphStats\r\n  /** Interaction callback */\r\n  onInteraction?: (interaction: GraphInteraction) => void\r\n  /** Custom className */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Simple force simulation (without D3.js dependency)\r\n */\r\ninterface SimulationNode extends GraphNode {\r\n  x: number\r\n  y: number\r\n  vx: number\r\n  vy: number\r\n}\r\n\r\nfunction runForceSimulation(\r\n  nodes: GraphNode[],\r\n  edges: GraphEdge[],\r\n  width: number,\r\n  height: number,\r\n  config: GraphConfig,\r\n  iterations: number = 100\r\n): SimulationNode[] {\r\n  // Initialize positions\r\n  const simNodes: SimulationNode[] = nodes.map((node) => ({\r\n    ...node,\r\n    x: node.x ?? width / 2 + Math.random() * 100 - 50,\r\n    y: node.y ?? height / 2 + Math.random() * 100 - 50,\r\n    vx: 0,\r\n    vy: 0,\r\n  }))\r\n\r\n  const nodeMap = new Map(simNodes.map((n) => [n.id, n]))\r\n\r\n  // Run simulation\r\n  for (let iter = 0; iter < iterations; iter++) {\r\n    const alpha = 1 - iter / iterations // Decay factor\r\n\r\n    // Apply forces\r\n    simNodes.forEach((node) => {\r\n      // Center force\r\n      const centerX = width / 2\r\n      const centerY = height / 2\r\n      node.vx += (centerX - node.x) * config.centerForce * alpha\r\n      node.vy += (centerY - node.y) * config.centerForce * alpha\r\n\r\n      // Repulsion force (charge)\r\n      simNodes.forEach((other) => {\r\n        if (node.id === other.id) return\r\n        const dx = node.x - other.x\r\n        const dy = node.y - other.y\r\n        const distance = Math.sqrt(dx * dx + dy * dy) || 1\r\n        const force = (config.chargeStrength * alpha) / (distance * distance)\r\n        node.vx += (dx / distance) * force\r\n        node.vy += (dy / distance) * force\r\n      })\r\n    })\r\n\r\n    // Link forces\r\n    edges.forEach((edge) => {\r\n      const source = nodeMap.get(\r\n        typeof edge.source === 'string' ? edge.source : edge.source.id\r\n      )\r\n      const target = nodeMap.get(\r\n        typeof edge.target === 'string' ? edge.target : edge.target.id\r\n      )\r\n      if (!source || !target) return\r\n\r\n      const dx = target.x - source.x\r\n      const dy = target.y - source.y\r\n      const distance = Math.sqrt(dx * dx + dy * dy) || 1\r\n      const force =\r\n        ((distance - config.linkDistance) / distance) * config.forceStrength * alpha\r\n\r\n      source.vx += dx * force\r\n      source.vy += dy * force\r\n      target.vx -= dx * force\r\n      target.vy -= dy * force\r\n    })\r\n\r\n    // Update positions\r\n    simNodes.forEach((node) => {\r\n      if (node.fx !== null && node.fx !== undefined) {\r\n        node.x = node.fx\r\n        node.vx = 0\r\n      } else {\r\n        node.x += node.vx\r\n      }\r\n\r\n      if (node.fy !== null && node.fy !== undefined) {\r\n        node.y = node.fy\r\n        node.vy = 0\r\n      } else {\r\n        node.y += node.vy\r\n      }\r\n\r\n      // Keep nodes in bounds\r\n      node.x = Math.max(config.nodeSize, Math.min(width - config.nodeSize, node.x))\r\n      node.y = Math.max(config.nodeSize, Math.min(height - config.nodeSize, node.y))\r\n\r\n      // Apply damping\r\n      node.vx *= 0.9\r\n      node.vy *= 0.9\r\n    })\r\n  }\r\n\r\n  return simNodes\r\n}\r\n\r\n/**\r\n * Graph visualization component\r\n */\r\nexport function CardRelationshipsGraph({\r\n  nodes,\r\n  edges,\r\n  config,\r\n  filter: _filter,\r\n  onFilterChange: _onFilterChange,\r\n  criticalPath,\r\n  stats,\r\n  onInteraction,\r\n  className,\r\n}: CardRelationshipsGraphProps) {\r\n  const svgRef = useRef<SVGSVGElement>(null)\r\n  const [simulatedNodes, setSimulatedNodes] = useState<SimulationNode[]>([])\r\n  const [draggingNode, setDraggingNode] = useState<string | null>(null)\r\n  const [hoveredNode, setHoveredNode] = useState<string | null>(null)\r\n  const [hoveredEdge, setHoveredEdge] = useState<string | null>(null)\r\n  const [zoom, setZoom] = useState(1)\r\n  const [pan, setPan] = useState({ x: 0, y: 0 })\r\n\r\n  // Run force simulation when nodes/edges change\r\n  useEffect(() => {\r\n    if (nodes.length === 0) return\r\n\r\n    const simulated = runForceSimulation(\r\n      nodes,\r\n      edges,\r\n      config.width,\r\n      config.height,\r\n      config,\r\n      150\r\n    )\r\n    setSimulatedNodes(simulated)\r\n  }, [nodes, edges, config])\r\n\r\n  // Handle node drag\r\n  const handleNodeMouseDown = useCallback(\r\n    (nodeId: string, e: React.MouseEvent) => {\r\n      if (!config.enableDragging) return\r\n      e.stopPropagation()\r\n      setDraggingNode(nodeId)\r\n    },\r\n    [config.enableDragging]\r\n  )\r\n\r\n  const handleMouseMove = useCallback(\r\n    (e: React.MouseEvent<SVGSVGElement>) => {\r\n      if (!draggingNode || !svgRef.current) return\r\n\r\n      const svg = svgRef.current\r\n      const rect = svg.getBoundingClientRect()\r\n      const x = (e.clientX - rect.left - pan.x) / zoom\r\n      const y = (e.clientY - rect.top - pan.y) / zoom\r\n\r\n      setSimulatedNodes((prev) =>\r\n        prev.map((node) =>\r\n          node.id === draggingNode ? { ...node, x, y, fx: x, fy: y } : node\r\n        )\r\n      )\r\n    },\r\n    [draggingNode, zoom, pan]\r\n  )\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setDraggingNode(null)\r\n  }, [])\r\n\r\n  // Handle node click\r\n  const handleNodeClick = useCallback(\r\n    (node: SimulationNode, e: React.MouseEvent) => {\r\n      e.stopPropagation()\r\n      onInteraction?.({\r\n        type: 'node-click',\r\n        node,\r\n        position: { x: e.clientX, y: e.clientY },\r\n      })\r\n    },\r\n    [onInteraction]\r\n  )\r\n\r\n  // Handle edge click\r\n  const handleEdgeClick = useCallback(\r\n    (edge: GraphEdge, e: React.MouseEvent) => {\r\n      e.stopPropagation()\r\n      onInteraction?.({\r\n        type: 'edge-click',\r\n        edge,\r\n        position: { x: e.clientX, y: e.clientY },\r\n      })\r\n    },\r\n    [onInteraction]\r\n  )\r\n\r\n  // Get node position\r\n  const getNodePosition = useCallback(\r\n    (nodeId: string): { x: number; y: number } => {\r\n      const node = simulatedNodes.find((n) => n.id === nodeId)\r\n      return node ? { x: node.x, y: node.y } : { x: 0, y: 0 }\r\n    },\r\n    [simulatedNodes]\r\n  )\r\n\r\n  // Get node color based on color scheme\r\n  const getNodeColor = useCallback(\r\n    (node: SimulationNode): string => {\r\n      if (node.onCriticalPath) return '#ef4444'\r\n\r\n      switch (config.colorScheme) {\r\n        case 'status':\r\n          return node.card.columnId === 'done' ? '#10b981' : '#3b82f6'\r\n        case 'priority':\r\n          const priority = node.card.priority\r\n          if (priority === 'URGENT') return '#ef4444' // urgent\r\n          if (priority === 'HIGH') return '#f59e0b' // high\r\n          if (priority === 'MEDIUM') return '#3b82f6' // medium\r\n          return '#6b7280' // low or none\r\n        case 'assignee':\r\n          return node.card.assigneeId ? '#8b5cf6' : '#6b7280'\r\n        default:\r\n          return '#3b82f6'\r\n      }\r\n    },\r\n    [config.colorScheme]\r\n  )\r\n\r\n  if (nodes.length === 0) {\r\n    return (\r\n      <div className={cn('relationships-graph-empty', className)}>\r\n        <div className=\"relationships-graph-empty-icon\"></div>\r\n        <p className=\"relationships-graph-empty-text\">No relationships to display</p>\r\n        <p className=\"relationships-graph-empty-subtext\">\r\n          Add relationships between cards to see the graph\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relationships-graph', className)}>\r\n      {/* Controls */}\r\n      <div className=\"relationships-graph-controls\">\r\n        <div className=\"relationships-graph-stats\">\r\n          <span className=\"relationships-graph-stat\">\r\n            <span className=\"relationships-graph-stat-value\">{stats.totalNodes}</span>\r\n            <span className=\"relationships-graph-stat-label\">Cards</span>\r\n          </span>\r\n          <span className=\"relationships-graph-stat\">\r\n            <span className=\"relationships-graph-stat-value\">{stats.totalEdges}</span>\r\n            <span className=\"relationships-graph-stat-label\">Relations</span>\r\n          </span>\r\n          {criticalPath && (\r\n            <span className=\"relationships-graph-stat relationships-graph-stat-critical\">\r\n              <span className=\"relationships-graph-stat-value\">\r\n                {criticalPath.cardIds.length}\r\n              </span>\r\n              <span className=\"relationships-graph-stat-label\">Critical Path</span>\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Zoom controls */}\r\n        {config.enableZoom && (\r\n          <div className=\"relationships-graph-zoom-controls\">\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => setZoom((z) => Math.min(z + 0.2, 3))}\r\n            >\r\n              +\r\n            </button>\r\n            <span className=\"relationships-graph-zoom-value\">{Math.round(zoom * 100)}%</span>\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => setZoom((z) => Math.max(z - 0.2, 0.5))}\r\n            >\r\n              \r\n            </button>\r\n            <button\r\n              className=\"relationships-graph-zoom-btn\"\r\n              onClick={() => {\r\n                setZoom(1)\r\n                setPan({ x: 0, y: 0 })\r\n              }}\r\n            >\r\n              Reset\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      <div className=\"relationships-graph-legend\">\r\n        {Array.from(new Set(edges.map((e) => e.type))).map((type) => (\r\n          <div key={type} className=\"relationships-graph-legend-item\">\r\n            <div\r\n              className=\"relationships-graph-legend-color\"\r\n              style={{ background: getRelationshipColor(type) }}\r\n            />\r\n            <span className=\"relationships-graph-legend-label\">\r\n              {getRelationshipIcon(type)} {getRelationshipLabel(type)}\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* SVG Canvas */}\r\n      <svg\r\n        ref={svgRef}\r\n        className=\"relationships-graph-canvas\"\r\n        width={config.width}\r\n        height={config.height}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        <g transform={`translate(${pan.x}, ${pan.y}) scale(${zoom})`}>\r\n          {/* Edges */}\r\n          <g className=\"relationships-graph-edges\">\r\n            {edges.map((edge) => {\r\n              const sourcePos = getNodePosition(\r\n                typeof edge.source === 'string' ? edge.source : edge.source.id\r\n              )\r\n              const targetPos = getNodePosition(\r\n                typeof edge.target === 'string' ? edge.target : edge.target.id\r\n              )\r\n\r\n              const isDirectional = isDirectionalRelationship(edge.type)\r\n              const isHovered = hoveredEdge === edge.id\r\n              const isCritical = edge.onCriticalPath\r\n\r\n              return (\r\n                <g\r\n                  key={edge.id}\r\n                  className={cn(\r\n                    'relationships-graph-edge',\r\n                    isHovered && 'hovered',\r\n                    isCritical && 'critical'\r\n                  )}\r\n                  onMouseEnter={() => setHoveredEdge(edge.id)}\r\n                  onMouseLeave={() => setHoveredEdge(null)}\r\n                  onClick={(e) => handleEdgeClick(edge, e)}\r\n                >\r\n                  <line\r\n                    x1={sourcePos.x}\r\n                    y1={sourcePos.y}\r\n                    x2={targetPos.x}\r\n                    y2={targetPos.y}\r\n                    stroke={getRelationshipColor(edge.type)}\r\n                    strokeWidth={isCritical ? config.edgeWidth * 2 : config.edgeWidth}\r\n                    strokeOpacity={isHovered ? 1 : 0.6}\r\n                    markerEnd={isDirectional ? 'url(#arrowhead)' : undefined}\r\n                  />\r\n                  {config.showEdgeLabels && isHovered && (\r\n                    <text\r\n                      x={(sourcePos.x + targetPos.x) / 2}\r\n                      y={(sourcePos.y + targetPos.y) / 2}\r\n                      className=\"relationships-graph-edge-label\"\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      {getRelationshipLabel(edge.type)}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              )\r\n            })}\r\n          </g>\r\n\r\n          {/* Nodes */}\r\n          <g className=\"relationships-graph-nodes\">\r\n            {simulatedNodes.map((node) => {\r\n              const isHovered = hoveredNode === node.id\r\n              const isCritical = node.onCriticalPath\r\n\r\n              return (\r\n                <g\r\n                  key={node.id}\r\n                  className={cn(\r\n                    'relationships-graph-node',\r\n                    isHovered && 'hovered',\r\n                    isCritical && 'critical'\r\n                  )}\r\n                  transform={`translate(${node.x}, ${node.y})`}\r\n                  onMouseDown={(e) => handleNodeMouseDown(node.id, e)}\r\n                  onMouseEnter={() => setHoveredNode(node.id)}\r\n                  onMouseLeave={() => setHoveredNode(null)}\r\n                  onClick={(e) => handleNodeClick(node, e)}\r\n                >\r\n                  <circle\r\n                    r={isCritical ? config.nodeSize * 1.2 : config.nodeSize}\r\n                    fill={getNodeColor(node)}\r\n                    stroke={isCritical ? '#fbbf24' : '#ffffff'}\r\n                    strokeWidth={isCritical ? 3 : 2}\r\n                    opacity={isHovered ? 1 : 0.9}\r\n                  />\r\n                  {config.showLabels && (\r\n                    <text\r\n                      y={config.nodeSize + 20}\r\n                      className=\"relationships-graph-node-label\"\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      {node.card.title.length > 20\r\n                        ? node.card.title.substring(0, 20) + '...'\r\n                        : node.card.title}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              )\r\n            })}\r\n          </g>\r\n        </g>\r\n\r\n        {/* Arrow marker for directional edges */}\r\n        <defs>\r\n          <marker\r\n            id=\"arrowhead\"\r\n            markerWidth=\"10\"\r\n            markerHeight=\"10\"\r\n            refX=\"9\"\r\n            refY=\"3\"\r\n            orient=\"auto\"\r\n            markerUnits=\"strokeWidth\"\r\n          >\r\n            <path d=\"M0,0 L0,6 L9,3 z\" fill=\"#6b7280\" />\r\n          </marker>\r\n        </defs>\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * Generate Plan Modal\r\n * AI-powered project plan generation\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\nimport type { GeneratedPlan } from '../../types'\r\n\r\nexport interface GeneratePlanModalProps {\r\n  /** Is modal open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Plan generated callback */\r\n  onPlanGenerated: (plan: GeneratedPlan) => void\r\n  /** Generate plan function (from useAI hook) */\r\n  onGeneratePlan: (prompt: string) => Promise<GeneratedPlan>\r\n  /** Is AI loading */\r\n  isLoading?: boolean\r\n}\r\n\r\nexport function GeneratePlanModal({\r\n  isOpen,\r\n  onClose,\r\n  onPlanGenerated,\r\n  onGeneratePlan,\r\n  isLoading: externalLoading,\r\n}: GeneratePlanModalProps) {\r\n  const [prompt, setPrompt] = useState('')\r\n  const [isGenerating, setIsGenerating] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [generatedPlan, setGeneratedPlan] = useState<GeneratedPlan | null>(null)\r\n  const inputRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n  const isLoading = isGenerating || externalLoading\r\n\r\n  // Focus input when modal opens\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus()\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        handleClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, isLoading])\r\n\r\n  const handleClose = () => {\r\n    if (!isLoading) {\r\n      setPrompt('')\r\n      setError(null)\r\n      setGeneratedPlan(null)\r\n      onClose()\r\n    }\r\n  }\r\n\r\n  const handleGenerate = async () => {\r\n    if (!prompt.trim() || isLoading) return\r\n\r\n    setIsGenerating(true)\r\n    setError(null)\r\n    setGeneratedPlan(null)\r\n\r\n    try {\r\n      const plan = await onGeneratePlan(prompt.trim())\r\n      setGeneratedPlan(plan)\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to generate plan')\r\n    } finally {\r\n      setIsGenerating(false)\r\n    }\r\n  }\r\n\r\n  const handleApplyPlan = () => {\r\n    if (generatedPlan) {\r\n      onPlanGenerated(generatedPlan)\r\n      handleClose()\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\r\n        onClick={handleClose}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\r\n        <div\r\n          className=\"w-full max-w-2xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(255, 255, 255, 0.15)',\r\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n          }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                <svg\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"text-blue-400\"\r\n                >\r\n                  <path\r\n                    d=\"M12 2L2 7L12 12L22 7L12 2Z\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                  <path\r\n                    d=\"M2 17L12 22L22 17\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                  <path\r\n                    d=\"M2 12L12 17L22 12\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                </svg>\r\n                Generate Project Plan with AI\r\n              </h2>\r\n              <p className=\"text-sm text-white/60 mt-1\">\r\n                Describe your project and let AI create a complete Kanban board\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={handleClose}\r\n              disabled={isLoading}\r\n              className=\"text-white/60 hover:text-white transition-colors disabled:opacity-50\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M18 6L6 18M6 6L18 18\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n            {!generatedPlan ? (\r\n              <>\r\n                {/* Input */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-white/90 mb-2\">\r\n                    Project Description\r\n                  </label>\r\n                  <textarea\r\n                    ref={inputRef}\r\n                    value={prompt}\r\n                    onChange={(e) => setPrompt(e.target.value)}\r\n                    placeholder=\"Example: Build a mobile app for tracking fitness goals with user authentication, workout logging, progress charts, and social features...\"\r\n                    className=\"w-full h-32 px-4 py-3 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/40 outline-none focus:border-blue-500/50 transition-all resize-none\"\r\n                    disabled={isLoading}\r\n                  />\r\n                  <p className=\"text-xs text-white/50 mt-2\">\r\n                    Be as specific as possible. Include features, technologies, and any special requirements.\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Error */}\r\n                {error && (\r\n                  <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Examples */}\r\n                <div className=\"border-t border-white/10 pt-4\">\r\n                  <p className=\"text-xs font-semibold text-white/70 uppercase tracking-wider mb-3\">\r\n                    Example Prompts\r\n                  </p>\r\n                  <div className=\"space-y-2\">\r\n                    {[\r\n                      'Build an e-commerce platform with product catalog, shopping cart, payment integration, and order tracking',\r\n                      'Create a task management app with team collaboration, real-time updates, file attachments, and notifications',\r\n                      'Develop a blog platform with markdown editor, SEO optimization, comments system, and analytics dashboard',\r\n                    ].map((example, i) => (\r\n                      <button\r\n                        key={i}\r\n                        onClick={() => setPrompt(example)}\r\n                        disabled={isLoading}\r\n                        className=\"w-full text-left px-3 py-2 rounded-lg text-xs text-white/70 hover:text-white hover:bg-white/5 transition-all border border-white/10 hover:border-white/20 disabled:opacity-50\"\r\n                      >\r\n                        {example}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {/* Generated Plan Preview */}\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center gap-2 text-green-400\">\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\r\n                      <path\r\n                        d=\"M4 10L8 14L16 6\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                    <span className=\"font-semibold\">Plan Generated Successfully!</span>\r\n                  </div>\r\n\r\n                  {/* Explanation */}\r\n                  {generatedPlan.explanation && (\r\n                    <div className=\"p-4 rounded-lg bg-blue-500/10 border border-blue-500/30\">\r\n                      <p className=\"text-sm text-white/90\">{generatedPlan.explanation}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Columns */}\r\n                  <div>\r\n                    <h3 className=\"text-sm font-semibold text-white/90 mb-2\">\r\n                      Columns ({generatedPlan.columns.length})\r\n                    </h3>\r\n                    <div className=\"flex gap-2 flex-wrap\">\r\n                      {generatedPlan.columns.map((col, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"px-3 py-1.5 rounded-lg bg-white/5 border border-white/20 text-sm text-white/80\"\r\n                        >\r\n                          {col.title}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Cards */}\r\n                  <div>\r\n                    <h3 className=\"text-sm font-semibold text-white/90 mb-2\">\r\n                      Tasks ({generatedPlan.cards.length})\r\n                    </h3>\r\n                    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                      {generatedPlan.cards.slice(0, 10).map((card, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"p-3 rounded-lg bg-white/5 border border-white/10\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between gap-2\">\r\n                            <div className=\"flex-1\">\r\n                              <p className=\"text-sm font-medium text-white/90\">{card.title}</p>\r\n                              {card.description && (\r\n                                <p className=\"text-xs text-white/60 mt-1 line-clamp-2\">\r\n                                  {card.description}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                            {card.priority && (\r\n                              <span\r\n                                className={`px-2 py-0.5 rounded text-xs font-semibold ${\r\n                                  card.priority === 'URGENT'\r\n                                    ? 'bg-red-500/20 text-red-400'\r\n                                    : card.priority === 'HIGH'\r\n                                    ? 'bg-orange-500/20 text-orange-400'\r\n                                    : card.priority === 'MEDIUM'\r\n                                    ? 'bg-yellow-500/20 text-yellow-400'\r\n                                    : 'bg-blue-500/20 text-blue-400'\r\n                                }`}\r\n                              >\r\n                                {card.priority}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {generatedPlan.cards.length > 10 && (\r\n                        <p className=\"text-xs text-white/50 text-center py-2\">\r\n                          +{generatedPlan.cards.length - 10} more tasks...\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              {isLoading && (\r\n                <div className=\"flex items-center gap-2 text-blue-400 text-sm\">\r\n                  <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\r\n                    <circle\r\n                      className=\"opacity-25\"\r\n                      cx=\"12\"\r\n                      cy=\"12\"\r\n                      r=\"10\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"4\"\r\n                      fill=\"none\"\r\n                    />\r\n                    <path\r\n                      className=\"opacity-75\"\r\n                      fill=\"currentColor\"\r\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                    />\r\n                  </svg>\r\n                  <span>Generating with AI...</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={handleClose}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80 disabled:opacity-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              {!generatedPlan ? (\r\n                <button\r\n                  onClick={handleGenerate}\r\n                  disabled={!prompt.trim() || isLoading}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  {isLoading ? 'Generating...' : 'Generate Plan'}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={handleApplyPlan}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #10B981 0%, #059669 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  Apply Plan to Board\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * AI Configuration\r\n * Central configuration for AI providers and models\r\n */\r\n\r\nexport interface AIConfig {\r\n  /** Provider (OpenAI or Anthropic) */\r\n  provider: 'openai' | 'anthropic'\r\n  /** API Key */\r\n  apiKey: string\r\n  /** Model to use */\r\n  model: string\r\n  /** Base URL (optional) */\r\n  baseURL?: string\r\n  /** Max tokens per request */\r\n  maxTokens?: number\r\n  /** Temperature (0-2) */\r\n  temperature?: number\r\n}\r\n\r\n/**\r\n * Supported AI Models\r\n */\r\nexport const AI_MODELS = {\r\n  // OpenAI Models\r\n  'gpt-4-turbo': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-4 Turbo',\r\n    contextWindow: 128000,\r\n    costPer1kInput: 0.01,\r\n    costPer1kOutput: 0.03,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'gpt-4': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-4',\r\n    contextWindow: 8192,\r\n    costPer1kInput: 0.03,\r\n    costPer1kOutput: 0.06,\r\n    supportsVision: false,\r\n    supportsJSON: true,\r\n  },\r\n  'gpt-3.5-turbo': {\r\n    provider: 'openai' as const,\r\n    name: 'GPT-3.5 Turbo',\r\n    contextWindow: 16385,\r\n    costPer1kInput: 0.0005,\r\n    costPer1kOutput: 0.0015,\r\n    supportsVision: false,\r\n    supportsJSON: true,\r\n  },\r\n\r\n  // Anthropic Models\r\n  'claude-3-5-sonnet-20241022': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3.5 Sonnet',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.003,\r\n    costPer1kOutput: 0.015,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'claude-3-opus-20240229': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3 Opus',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.015,\r\n    costPer1kOutput: 0.075,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n  'claude-3-haiku-20240307': {\r\n    provider: 'anthropic' as const,\r\n    name: 'Claude 3 Haiku',\r\n    contextWindow: 200000,\r\n    costPer1kInput: 0.00025,\r\n    costPer1kOutput: 0.00125,\r\n    supportsVision: true,\r\n    supportsJSON: true,\r\n  },\r\n} as const\r\n\r\nexport type AIModelKey = keyof typeof AI_MODELS\r\n\r\n/**\r\n * Default AI Configuration\r\n */\r\nexport const DEFAULT_AI_CONFIG: Partial<AIConfig> = {\r\n  model: 'claude-3-5-sonnet-20241022',\r\n  maxTokens: 4096,\r\n  temperature: 0.7,\r\n}\r\n\r\n/**\r\n * Rate Limits by Plan\r\n */\r\nexport const RATE_LIMITS = {\r\n  hobby: {\r\n    requestsPerMonth: 50,\r\n    maxConcurrent: 1,\r\n    maxTokensPerRequest: 4096,\r\n  },\r\n  pro: {\r\n    requestsPerMonth: 500,\r\n    maxConcurrent: 3,\r\n    maxTokensPerRequest: 8192,\r\n  },\r\n  enterprise: {\r\n    requestsPerMonth: 2000,\r\n    maxConcurrent: 10,\r\n    maxTokensPerRequest: 16384,\r\n  },\r\n} as const\r\n\r\n/**\r\n * Feature Flags for AI\r\n */\r\nexport const AI_FEATURES = {\r\n  generatePlan: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 2000,\r\n  },\r\n  predictRisks: {\r\n    enabled: true,\r\n    minPlanTier: 'pro' as const,\r\n    estimatedTokens: 1500,\r\n  },\r\n  suggestAssignee: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 800,\r\n  },\r\n  generateReport: {\r\n    enabled: true,\r\n    minPlanTier: 'enterprise' as const,\r\n    estimatedTokens: 3000,\r\n  },\r\n  generateSubtasks: {\r\n    enabled: true,\r\n    minPlanTier: 'hobby' as const,\r\n    estimatedTokens: 1000,\r\n  },\r\n} as const\r\n","/**\r\n * AI Cost Tracking\r\n * Calculate and track AI API usage costs\r\n */\r\n\r\nimport { AI_MODELS, type AIModelKey } from './config'\r\n\r\nexport interface AIOperation {\r\n  id: string\r\n  feature: 'generatePlan' | 'predictRisks' | 'suggestAssignee' | 'generateSubtasks' | 'estimateEffort'\r\n  model: AIModelKey\r\n  inputTokens: number\r\n  outputTokens: number\r\n  cost: number\r\n  duration: number\r\n  timestamp: Date\r\n  success: boolean\r\n  error?: string\r\n}\r\n\r\nexport interface UsageStats {\r\n  totalOperations: number\r\n  totalCost: number\r\n  totalInputTokens: number\r\n  totalOutputTokens: number\r\n  operationsByFeature: Record<string, number>\r\n  costsByFeature: Record<string, number>\r\n  averageDuration: number\r\n  successRate: number\r\n}\r\n\r\n/**\r\n * Calculate cost for an AI operation\r\n */\r\nexport function calculateCost(\r\n  model: AIModelKey,\r\n  inputTokens: number,\r\n  outputTokens: number\r\n): number {\r\n  const modelInfo = AI_MODELS[model]\r\n  if (!modelInfo) {\r\n    throw new Error(`Unknown model: ${model}`)\r\n  }\r\n\r\n  const inputCost = (inputTokens / 1000) * modelInfo.costPer1kInput\r\n  const outputCost = (outputTokens / 1000) * modelInfo.costPer1kOutput\r\n\r\n  return inputCost + outputCost\r\n}\r\n\r\n/**\r\n * Format cost as USD string\r\n */\r\nexport function formatCost(cost: number): string {\r\n  return `$${cost.toFixed(4)}`\r\n}\r\n\r\n/**\r\n * AI Usage Tracker\r\n * In-memory tracking of AI operations\r\n * In production, this would persist to a database\r\n */\r\nexport class AIUsageTracker {\r\n  private operations: AIOperation[] = []\r\n  private listeners: Array<(operation: AIOperation) => void> = []\r\n\r\n  /**\r\n   * Record a new AI operation\r\n   */\r\n  record(operation: Omit<AIOperation, 'id' | 'timestamp' | 'cost'>): AIOperation {\r\n    const cost = calculateCost(operation.model, operation.inputTokens, operation.outputTokens)\r\n\r\n    const fullOperation: AIOperation = {\r\n      ...operation,\r\n      id: `op_${Date.now()}_${Math.random().toString(36).substring(7)}`,\r\n      timestamp: new Date(),\r\n      cost,\r\n    }\r\n\r\n    this.operations.push(fullOperation)\r\n\r\n    // Notify listeners\r\n    this.listeners.forEach((listener) => listener(fullOperation))\r\n\r\n    // Keep only last 1000 operations in memory\r\n    if (this.operations.length > 1000) {\r\n      this.operations = this.operations.slice(-1000)\r\n    }\r\n\r\n    return fullOperation\r\n  }\r\n\r\n  /**\r\n   * Get usage statistics\r\n   */\r\n  getStats(timeRange?: { start: Date; end: Date }): UsageStats {\r\n    let operations = this.operations\r\n\r\n    // Filter by time range if provided\r\n    if (timeRange) {\r\n      operations = operations.filter(\r\n        (op) => op.timestamp >= timeRange.start && op.timestamp <= timeRange.end\r\n      )\r\n    }\r\n\r\n    const totalOperations = operations.length\r\n    const totalCost = operations.reduce((sum, op) => sum + op.cost, 0)\r\n    const totalInputTokens = operations.reduce((sum, op) => sum + op.inputTokens, 0)\r\n    const totalOutputTokens = operations.reduce((sum, op) => sum + op.outputTokens, 0)\r\n    const successfulOps = operations.filter((op) => op.success)\r\n    const totalDuration = operations.reduce((sum, op) => sum + op.duration, 0)\r\n\r\n    // Operations by feature\r\n    const operationsByFeature: Record<string, number> = {}\r\n    const costsByFeature: Record<string, number> = {}\r\n\r\n    operations.forEach((op) => {\r\n      operationsByFeature[op.feature] = (operationsByFeature[op.feature] || 0) + 1\r\n      costsByFeature[op.feature] = (costsByFeature[op.feature] || 0) + op.cost\r\n    })\r\n\r\n    return {\r\n      totalOperations,\r\n      totalCost,\r\n      totalInputTokens,\r\n      totalOutputTokens,\r\n      operationsByFeature,\r\n      costsByFeature,\r\n      averageDuration: totalOperations > 0 ? totalDuration / totalOperations : 0,\r\n      successRate: totalOperations > 0 ? successfulOps.length / totalOperations : 0,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get recent operations\r\n   */\r\n  getRecentOperations(limit = 10): AIOperation[] {\r\n    return this.operations.slice(-limit).reverse()\r\n  }\r\n\r\n  /**\r\n   * Check if usage is within limits\r\n   */\r\n  checkLimit(planTier: 'hobby' | 'pro' | 'enterprise', period: 'month' | 'day' = 'month'): {\r\n    used: number\r\n    limit: number\r\n    remaining: number\r\n    percentUsed: number\r\n    isExceeded: boolean\r\n  } {\r\n    const limits = {\r\n      hobby: { month: 50, day: 5 },\r\n      pro: { month: 500, day: 50 },\r\n      enterprise: { month: 2000, day: 200 },\r\n    }\r\n\r\n    const limit = limits[planTier][period]\r\n\r\n    // Calculate operations in the period\r\n    const now = new Date()\r\n    const start = new Date()\r\n    if (period === 'month') {\r\n      start.setMonth(now.getMonth() - 1)\r\n    } else {\r\n      start.setDate(now.getDate() - 1)\r\n    }\r\n\r\n    const periodOperations = this.operations.filter((op) => op.timestamp >= start).length\r\n\r\n    const remaining = Math.max(0, limit - periodOperations)\r\n    const percentUsed = (periodOperations / limit) * 100\r\n\r\n    return {\r\n      used: periodOperations,\r\n      limit,\r\n      remaining,\r\n      percentUsed,\r\n      isExceeded: periodOperations >= limit,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to operation events\r\n   */\r\n  subscribe(listener: (operation: AIOperation) => void): () => void {\r\n    this.listeners.push(listener)\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const index = this.listeners.indexOf(listener)\r\n      if (index > -1) {\r\n        this.listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all tracked operations\r\n   */\r\n  clear(): void {\r\n    this.operations = []\r\n  }\r\n\r\n  /**\r\n   * Export operations as JSON\r\n   */\r\n  export(): string {\r\n    return JSON.stringify(this.operations, null, 2)\r\n  }\r\n}\r\n\r\n/**\r\n * Global usage tracker instance\r\n */\r\nexport const aiUsageTracker = new AIUsageTracker()\r\n\r\n/**\r\n * Estimate cost for a feature before execution\r\n */\r\nexport function estimateFeatureCost(\r\n  feature: AIOperation['feature'],\r\n  model: AIModelKey = 'claude-3-5-sonnet-20241022'\r\n): { estimatedCost: string; estimatedTokens: number } {\r\n  // Rough estimates based on typical usage\r\n  const tokenEstimates = {\r\n    generatePlan: 2500,\r\n    predictRisks: 1800,\r\n    suggestAssignee: 1000,\r\n    generateSubtasks: 1200,\r\n    estimateEffort: 800,\r\n  }\r\n\r\n  const tokens = tokenEstimates[feature]\r\n  // Assume 60/40 split between input/output\r\n  const inputTokens = Math.floor(tokens * 0.6)\r\n  const outputTokens = Math.floor(tokens * 0.4)\r\n\r\n  const cost = calculateCost(model, inputTokens, outputTokens)\r\n\r\n  return {\r\n    estimatedCost: formatCost(cost),\r\n    estimatedTokens: tokens,\r\n  }\r\n}\r\n","/**\r\n * AI Usage Dashboard\r\n * Display AI usage statistics and costs\r\n */\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { aiUsageTracker, formatCost, type UsageStats } from '../../lib/ai/costs'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface AIUsageDashboardProps {\r\n  /** Is dashboard open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Current plan tier */\r\n  planTier?: 'hobby' | 'pro' | 'enterprise'\r\n}\r\n\r\nexport function AIUsageDashboard({\r\n  isOpen,\r\n  onClose,\r\n  planTier = 'hobby',\r\n}: AIUsageDashboardProps) {\r\n  const [stats, setStats] = useState<UsageStats>(aiUsageTracker.getStats())\r\n  const [limit, setLimit] = useState(aiUsageTracker.checkLimit(planTier))\r\n\r\n  // Update stats every second when open\r\n  useEffect(() => {\r\n    if (!isOpen) return\r\n\r\n    const interval = setInterval(() => {\r\n      setStats(aiUsageTracker.getStats())\r\n      setLimit(aiUsageTracker.checkLimit(planTier))\r\n    }, 1000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [isOpen, planTier])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, onClose])\r\n\r\n  if (!isOpen) return null\r\n\r\n  const recentOps = aiUsageTracker.getRecentOperations(5)\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      {/* Dashboard */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\r\n        <div\r\n          className=\"w-full max-w-3xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(255, 255, 255, 0.15)',\r\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n          }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-white\">AI Usage Dashboard</h2>\r\n              <p className=\"text-sm text-white/60 mt-1\">\r\n                Monitor your AI consumption and costs\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-white/60 hover:text-white transition-colors\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M18 6L6 18M6 6L18 18\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n            {/* Usage Limit */}\r\n            <div className=\"p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/30\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"text-sm font-semibold text-white/90\">\r\n                  Monthly Usage ({planTier.toUpperCase()})\r\n                </span>\r\n                <span className=\"text-sm font-bold text-white\">\r\n                  {limit.used} / {limit.limit}\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full h-2 bg-white/10 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full transition-all\"\r\n                  style={{\r\n                    width: `${Math.min(100, limit.percentUsed)}%`,\r\n                    background:\r\n                      limit.percentUsed > 90\r\n                        ? '#EF4444'\r\n                        : limit.percentUsed > 70\r\n                        ? '#F59E0B'\r\n                        : '#10B981',\r\n                  }}\r\n                />\r\n              </div>\r\n              <p className=\"text-xs text-white/60 mt-2\">\r\n                {limit.remaining} operations remaining this month\r\n              </p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              {/* Total Cost */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Total Cost\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-green-400 mt-1\">\r\n                  {formatCost(stats.totalCost)}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Total Operations */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Operations\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-blue-400 mt-1\">\r\n                  {stats.totalOperations}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Total Tokens */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Tokens Used\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-purple-400 mt-1\">\r\n                  {(stats.totalInputTokens + stats.totalOutputTokens).toLocaleString()}\r\n                </p>\r\n                <p className=\"text-xs text-white/50 mt-1\">\r\n                  {stats.totalInputTokens.toLocaleString()} in /{' '}\r\n                  {stats.totalOutputTokens.toLocaleString()} out\r\n                </p>\r\n              </div>\r\n\r\n              {/* Success Rate */}\r\n              <div className=\"p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-xs font-semibold text-white/60 uppercase tracking-wider\">\r\n                  Success Rate\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-green-400 mt-1\">\r\n                  {(stats.successRate * 100).toFixed(1)}%\r\n                </p>\r\n                <p className=\"text-xs text-white/50 mt-1\">\r\n                  Avg: {stats.averageDuration.toFixed(0)}ms\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Operations by Feature */}\r\n            <div>\r\n              <h3 className=\"text-sm font-semibold text-white/90 mb-3\">Usage by Feature</h3>\r\n              <div className=\"space-y-2\">\r\n                {Object.entries(stats.operationsByFeature).map(([feature, count]) => {\r\n                  const cost = stats.costsByFeature[feature] || 0\r\n                  const percent =\r\n                    stats.totalOperations > 0\r\n                      ? (count / stats.totalOperations) * 100\r\n                      : 0\r\n\r\n                  return (\r\n                    <div key={feature} className=\"p-3 rounded-lg bg-white/5 border border-white/10\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm font-medium text-white/90 capitalize\">\r\n                          {feature.replace(/([A-Z])/g, ' $1').trim()}\r\n                        </span>\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <span className=\"text-xs text-white/60\">{count} ops</span>\r\n                          <span className=\"text-xs font-semibold text-green-400\">\r\n                            {formatCost(cost)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"w-full h-1.5 bg-white/10 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className=\"h-full bg-blue-500\"\r\n                          style={{ width: `${percent}%` }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Recent Operations */}\r\n            <div>\r\n              <h3 className=\"text-sm font-semibold text-white/90 mb-3\">Recent Operations</h3>\r\n              {recentOps.length === 0 ? (\r\n                <p className=\"text-sm text-white/50 text-center py-8\">\r\n                  No operations yet. Start using AI features!\r\n                </p>\r\n              ) : (\r\n                <div className=\"space-y-2\">\r\n                  {recentOps.map((op) => (\r\n                    <div\r\n                      key={op.id}\r\n                      className=\"p-3 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between\"\r\n                    >\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-white/90 capitalize\">\r\n                          {op.feature.replace(/([A-Z])/g, ' $1').trim()}\r\n                        </p>\r\n                        <p className=\"text-xs text-white/50 mt-0.5\">\r\n                          {new Date(op.timestamp).toLocaleTimeString()} {' '}\r\n                          {op.duration}ms\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <span className=\"text-xs text-white/60\">\r\n                          {op.inputTokens + op.outputTokens} tokens\r\n                        </span>\r\n                        <span className=\"text-xs font-semibold text-green-400\">\r\n                          {formatCost(op.cost)}\r\n                        </span>\r\n                        <div\r\n                          className={`w-2 h-2 rounded-full ${\r\n                            op.success ? 'bg-green-400' : 'bg-red-400'\r\n                          }`}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\r\n            <p className=\"text-xs text-white/50\">\r\n              Costs are estimates. Actual API charges may vary.\r\n            </p>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * Generate Gantt Tasks Dialog\r\n * AI-powered Gantt task generation with cost control\r\n */\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Portal } from '../Portal'\r\n\r\nexport interface GanttTask {\r\n  id: string\r\n  name: string\r\n  start: string\r\n  end: string\r\n  duration: number\r\n  progress: number\r\n  dependencies: string[]\r\n  type: string\r\n  priority: 'high' | 'medium' | 'low'\r\n}\r\n\r\nexport interface GeneratedTasksResponse {\r\n  tasks: {\r\n    tasks: GanttTask[]\r\n  }\r\n  from_cache: boolean\r\n  tokens_used: number\r\n  mock_mode?: boolean\r\n  similarity?: number\r\n  tokens_saved?: number\r\n}\r\n\r\nexport interface GenerateGanttTasksDialogProps {\r\n  /** Is dialog open */\r\n  isOpen: boolean\r\n  /** Close handler */\r\n  onClose: () => void\r\n  /** Tasks generated callback */\r\n  onTasksGenerated: (tasks: GanttTask[]) => void\r\n  /** Generate tasks function (calls Supabase Edge Function) */\r\n  onGenerateTasks: (params: {\r\n    prompt: string\r\n    projectName?: string\r\n    startDate?: string\r\n    endDate?: string\r\n  }) => Promise<GeneratedTasksResponse>\r\n  /** Is AI loading */\r\n  isLoading?: boolean\r\n  /** Project ID (optional) */\r\n  projectId?: string\r\n  /** Project name (optional) */\r\n  projectName?: string\r\n}\r\n\r\nexport function GenerateGanttTasksDialog({\r\n  isOpen,\r\n  onClose,\r\n  onTasksGenerated,\r\n  onGenerateTasks,\r\n  isLoading: externalLoading,\r\n  projectName,\r\n}: GenerateGanttTasksDialogProps) {\r\n  const [prompt, setPrompt] = useState('')\r\n  const [startDate, setStartDate] = useState('')\r\n  const [endDate, setEndDate] = useState('')\r\n  const [isGenerating, setIsGenerating] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [generatedTasks, setGeneratedTasks] = useState<GanttTask[] | null>(null)\r\n  const [responseMetadata, setResponseMetadata] = useState<{\r\n    from_cache: boolean\r\n    tokens_used: number\r\n    mock_mode?: boolean\r\n    similarity?: number\r\n    tokens_saved?: number\r\n  } | null>(null)\r\n  const inputRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n  const isLoading = isGenerating || externalLoading\r\n\r\n  // Focus input when dialog opens\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus()\r\n    }\r\n  }, [isOpen])\r\n\r\n  // Close on escape\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && !isLoading) {\r\n        handleClose()\r\n      }\r\n    }\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape)\r\n      return () => document.removeEventListener('keydown', handleEscape)\r\n    }\r\n    return undefined\r\n  }, [isOpen, isLoading])\r\n\r\n  const handleClose = () => {\r\n    if (!isLoading) {\r\n      setPrompt('')\r\n      setStartDate('')\r\n      setEndDate('')\r\n      setError(null)\r\n      setGeneratedTasks(null)\r\n      setResponseMetadata(null)\r\n      onClose()\r\n    }\r\n  }\r\n\r\n  const handleGenerate = async () => {\r\n    if (!prompt.trim() || isLoading) return\r\n\r\n    setIsGenerating(true)\r\n    setError(null)\r\n    setGeneratedTasks(null)\r\n    setResponseMetadata(null)\r\n\r\n    try {\r\n      const response = await onGenerateTasks({\r\n        prompt: prompt.trim(),\r\n        projectName: projectName || 'Mi Proyecto',\r\n        startDate: startDate || undefined,\r\n        endDate: endDate || undefined,\r\n      })\r\n\r\n      setGeneratedTasks(response.tasks.tasks)\r\n      setResponseMetadata({\r\n        from_cache: response.from_cache,\r\n        tokens_used: response.tokens_used,\r\n        mock_mode: response.mock_mode,\r\n        similarity: response.similarity,\r\n        tokens_saved: response.tokens_saved,\r\n      })\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to generate tasks')\r\n    } finally {\r\n      setIsGenerating(false)\r\n    }\r\n  }\r\n\r\n  const handleApplyTasks = () => {\r\n    if (generatedTasks) {\r\n      onTasksGenerated(generatedTasks)\r\n      handleClose()\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  const similarity = responseMetadata?.similarity\r\n    ? ((responseMetadata.similarity || 0) * 100).toFixed(0)\r\n    : '0'\r\n\r\n  return (\r\n    <Portal>\r\n      {/* Backdrop */}\r\n      <div\r\n        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100000]\"\r\n        onClick={handleClose}\r\n      />\r\n\r\n      {/* Dialog */}\r\n      <div className=\"fixed inset-0 flex items-center justify-center z-[100001] p-4\">\r\n        <div\r\n          className=\"w-full max-w-3xl rounded-2xl shadow-2xl border max-h-[90vh] overflow-hidden flex flex-col\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #1f1f1f 0%, #1a1a1a 100%)',\r\n            borderColor: 'rgba(255, 255, 255, 0.15)',\r\n            boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.1)',\r\n          }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"px-6 py-4 border-b border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\r\n                <svg\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"text-blue-400\"\r\n                >\r\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\r\n                  <rect x=\"3\" y=\"9\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\r\n                  <rect x=\"3\" y=\"14\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\r\n                  <rect x=\"3\" y=\"19\" width=\"18\" height=\"2\" rx=\"1\" fill=\"currentColor\" />\r\n                </svg>\r\n                Generate Gantt Tasks with AI\r\n              </h2>\r\n              <p className=\"text-sm text-white/60 mt-1\">\r\n                Describe your project and let AI create a complete task timeline\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={handleClose}\r\n              disabled={isLoading}\r\n              className=\"text-white/60 hover:text-white transition-colors disabled:opacity-50\"\r\n            >\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path\r\n                  d=\"M18 6L6 18M6 6L18 18\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\r\n            {!generatedTasks ? (\r\n              <>\r\n                {/* Input Form */}\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-white/90 mb-2\">\r\n                    Project Description *\r\n                  </label>\r\n                  <textarea\r\n                    ref={inputRef}\r\n                    value={prompt}\r\n                    onChange={(e) => setPrompt(e.target.value)}\r\n                    placeholder=\"Example: Build a mobile app for tracking fitness goals with user authentication, workout logging, progress charts, and social features...\"\r\n                    className=\"w-full h-32 px-4 py-3 rounded-lg text-sm bg-white/5 border border-white/20 text-white placeholder-white/40 outline-none focus:border-blue-500/50 transition-all resize-none\"\r\n                    disabled={isLoading}\r\n                  />\r\n                  <p className=\"text-xs text-white/50 mt-2\">\r\n                    Be as specific as possible. Include features, technologies, and any special\r\n                    requirements.\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Date Inputs */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-white/90 mb-2\">\r\n                      Start Date (Optional)\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={startDate}\r\n                      onChange={(e) => setStartDate(e.target.value)}\r\n                      className=\"w-full px-4 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white outline-none focus:border-blue-500/50 transition-all\"\r\n                      disabled={isLoading}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-white/90 mb-2\">\r\n                      End Date (Optional)\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={endDate}\r\n                      onChange={(e) => setEndDate(e.target.value)}\r\n                      className=\"w-full px-4 py-2 rounded-lg text-sm bg-white/5 border border-white/20 text-white outline-none focus:border-blue-500/50 transition-all\"\r\n                      disabled={isLoading}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Error */}\r\n                {error && (\r\n                  <div className=\"p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm\">\r\n                    {error}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Examples */}\r\n                <div className=\"border-t border-white/10 pt-4\">\r\n                  <p className=\"text-xs font-semibold text-white/70 uppercase tracking-wider mb-3\">\r\n                    Example Prompts\r\n                  </p>\r\n                  <div className=\"space-y-2\">\r\n                    {[\r\n                      'Build an e-commerce platform with product catalog, shopping cart, payment integration, and order tracking',\r\n                      'Create a task management app with team collaboration, real-time updates, file attachments, and notifications',\r\n                      'Develop a blog platform with markdown editor, SEO optimization, comments system, and analytics dashboard',\r\n                    ].map((example, i) => (\r\n                      <button\r\n                        key={i}\r\n                        onClick={() => setPrompt(example)}\r\n                        disabled={isLoading}\r\n                        className=\"w-full text-left px-3 py-2 rounded-lg text-xs text-white/70 hover:text-white hover:bg-white/5 transition-all border border-white/10 hover:border-white/20 disabled:opacity-50\"\r\n                      >\r\n                        {example}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {/* Generated Tasks Preview */}\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center gap-2 text-green-400\">\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\r\n                      <path\r\n                        d=\"M4 10L8 14L16 6\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                    <span className=\"font-semibold\">Tasks Generated Successfully!</span>\r\n                  </div>\r\n\r\n                  {/* Metadata Badges */}\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {responseMetadata?.mock_mode && (\r\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-yellow-500/20 text-yellow-400 border border-yellow-500/30\">\r\n                        Mock Mode\r\n                      </span>\r\n                    )}\r\n                    {responseMetadata?.from_cache ? (\r\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-blue-500/20 text-blue-400 border border-blue-500/30\">\r\n                        From Cache ({similarity}% similar)\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-green-500/20 text-green-400 border border-green-500/30\">\r\n                        AI Generated\r\n                      </span>\r\n                    )}\r\n                    <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-purple-500/20 text-purple-400 border border-purple-500/30\">\r\n                      {responseMetadata?.tokens_used || 0} tokens\r\n                    </span>\r\n                    {responseMetadata?.tokens_saved && (\r\n                      <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-indigo-500/20 text-indigo-400 border border-indigo-500/30\">\r\n                        {responseMetadata.tokens_saved} tokens saved\r\n                      </span>\r\n                    )}\r\n                    <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-pink-500/20 text-pink-400 border border-pink-500/30\">\r\n                      {generatedTasks.length} tasks\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Tasks List */}\r\n                  <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                    {generatedTasks.map((task, i) => (\r\n                      <div\r\n                        key={task.id}\r\n                        className=\"p-3 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors\"\r\n                      >\r\n                        <div className=\"flex items-start justify-between gap-2\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                              <span className=\"text-xs text-white/50\">#{i + 1}</span>\r\n                              <p className=\"text-sm font-medium text-white/90\">{task.name}</p>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 text-xs text-white/60\">\r\n                              <span className=\"flex items-center gap-1\">\r\n                                <svg\r\n                                  width=\"12\"\r\n                                  height=\"12\"\r\n                                  viewBox=\"0 0 12 12\"\r\n                                  fill=\"none\"\r\n                                  className=\"text-white/40\"\r\n                                >\r\n                                  <rect\r\n                                    x=\"1\"\r\n                                    y=\"2\"\r\n                                    width=\"10\"\r\n                                    height=\"8\"\r\n                                    rx=\"1\"\r\n                                    stroke=\"currentColor\"\r\n                                  />\r\n                                  <path d=\"M1 4h10\" stroke=\"currentColor\" />\r\n                                </svg>\r\n                                {task.start}  {task.end}\r\n                              </span>\r\n                              <span>{task.duration} days</span>\r\n                              {task.dependencies.length > 0 && (\r\n                                <span className=\"text-blue-400\">\r\n                                  Depends: {task.dependencies.join(', ')}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <span\r\n                            className={`px-2 py-0.5 rounded text-xs font-semibold ${\r\n                              task.priority === 'high'\r\n                                ? 'bg-red-500/20 text-red-400'\r\n                                : task.priority === 'medium'\r\n                                ? 'bg-yellow-500/20 text-yellow-400'\r\n                                : 'bg-blue-500/20 text-blue-400'\r\n                            }`}\r\n                          >\r\n                            {task.priority}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"px-6 py-4 border-t border-white/10 flex items-center justify-between\">\r\n            <div>\r\n              {isLoading && (\r\n                <div className=\"flex items-center gap-2 text-blue-400 text-sm\">\r\n                  <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\r\n                    <circle\r\n                      className=\"opacity-25\"\r\n                      cx=\"12\"\r\n                      cy=\"12\"\r\n                      r=\"10\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"4\"\r\n                      fill=\"none\"\r\n                    />\r\n                    <path\r\n                      className=\"opacity-75\"\r\n                      fill=\"currentColor\"\r\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                    />\r\n                  </svg>\r\n                  <span>Generating with AI...</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={handleClose}\r\n                disabled={isLoading}\r\n                className=\"px-4 py-2 rounded-lg text-sm font-semibold transition-all hover:bg-white/10 text-white/80 disabled:opacity-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              {!generatedTasks ? (\r\n                <button\r\n                  onClick={handleGenerate}\r\n                  disabled={!prompt.trim() || isLoading}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  {isLoading ? 'Generating...' : 'Generate Tasks'}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={handleApplyTasks}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-semibold transition-all\"\r\n                  style={{\r\n                    background: 'linear-gradient(135deg, #10B981 0%, #059669 100%)',\r\n                    color: '#ffffff',\r\n                  }}\r\n                >\r\n                  Apply Tasks to Gantt\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n","/**\r\n * useKanbanState Hook\r\n * Optional hook for managing board state locally\r\n * Consumers can use this or manage state themselves\r\n * @module hooks/useKanbanState\r\n */\r\n\r\nimport { useState, useCallback } from 'react'\r\nimport { retryWithBackoff } from '../utils/retry'\r\nimport type { Board, BoardCallbacks, Card, Column } from '../types'\r\n\r\nexport interface UseKanbanStateOptions {\r\n  /** Initial board state */\r\n  initialBoard: Board\r\n  /** Persist changes (e.g., to localStorage, API) */\r\n  onPersist?: (board: Board) => void | Promise<void>\r\n  /** Enable optimistic updates (default: true) */\r\n  optimistic?: boolean\r\n}\r\n\r\nexport interface UseKanbanStateReturn {\r\n  /** Current board state */\r\n  board: Board\r\n  /** Callbacks for the KanbanBoard component */\r\n  callbacks: BoardCallbacks\r\n  /** Direct state setters (advanced usage) */\r\n  setBoard: React.Dispatch<React.SetStateAction<Board>>\r\n  /** Helper functions */\r\n  helpers: {\r\n    addCard: (card: Omit<Card, 'id'>) => string\r\n    addColumn: (column: Omit<Column, 'id' | 'cardIds'>) => string\r\n    deleteCard: (cardId: string) => void\r\n    deleteColumn: (columnId: string) => void\r\n    clearBoard: () => void\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for managing Kanban board state\r\n *\r\n * @example\r\n * ```tsx\r\n * const { board, callbacks } = useKanbanState({\r\n *   initialBoard: myBoard,\r\n *   onPersist: async (board) => {\r\n *     await api.updateBoard(board)\r\n *   }\r\n * })\r\n *\r\n * return <KanbanBoard board={board} callbacks={callbacks} />\r\n * ```\r\n */\r\nexport function useKanbanState({\r\n  initialBoard,\r\n  onPersist,\r\n}: UseKanbanStateOptions): UseKanbanStateReturn {\r\n  const [board, setBoard] = useState<Board>(initialBoard)\r\n\r\n  // Persist helper with retry logic\r\n  const persistBoard = useCallback(\r\n    (updatedBoard: Board) => {\r\n      if (onPersist) {\r\n        // Use retry logic for resilient persistence\r\n        retryWithBackoff(\r\n          () => Promise.resolve(onPersist(updatedBoard)),\r\n          {\r\n            maxAttempts: 3,\r\n            initialDelay: 1000,\r\n            onRetry: (error, attempt, delay) => {\r\n              console.warn(\r\n                `Retry attempt ${attempt} after ${delay}ms: ${error.message}`\r\n              )\r\n            },\r\n          }\r\n        ).then((result) => {\r\n          if (!result.success) {\r\n            console.error(\r\n              `Failed to persist board after ${result.attempts} attempts:`,\r\n              result.error\r\n            )\r\n            // TODO: Implement rollback or user notification\r\n          }\r\n        })\r\n      }\r\n    },\r\n    [onPersist]\r\n  )\r\n\r\n  // Move card to new position/column\r\n  const handleCardMove = useCallback(\r\n    async (cardId: string, targetColumnId: string, position: number) => {\r\n      setBoard((prev) => {\r\n        const card = prev.cards.find((c) => c.id === cardId)\r\n        if (!card) return prev\r\n\r\n        const sourceColumnId = card.columnId\r\n\r\n        // Update card\r\n        const updatedCard = {\r\n          ...card,\r\n          columnId: targetColumnId,\r\n          position,\r\n        }\r\n\r\n        // Update cards array\r\n        const updatedCards = prev.cards.map((c) =>\r\n          c.id === cardId ? updatedCard : c\r\n        )\r\n\r\n        // Update columns' cardIds\r\n        const updatedColumns = prev.columns.map((col) => {\r\n          if (col.id === sourceColumnId) {\r\n            // Remove from source column\r\n            return {\r\n              ...col,\r\n              cardIds: col.cardIds.filter((id) => id !== cardId),\r\n            }\r\n          } else if (col.id === targetColumnId) {\r\n            // Add to target column (maintain sort order)\r\n            const targetCards = updatedCards\r\n              .filter((c) => c.columnId === targetColumnId)\r\n              .sort((a, b) => a.position - b.position)\r\n            return {\r\n              ...col,\r\n              cardIds: targetCards.map((c) => c.id),\r\n            }\r\n          }\r\n          return col\r\n        })\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Update card properties\r\n  const handleCardUpdate = useCallback(\r\n    async (cardId: string, updates: Partial<Card>) => {\r\n      setBoard((prev) => {\r\n        const updatedCards = prev.cards.map((card) =>\r\n          card.id === cardId ? { ...card, ...updates } : card\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Create new card\r\n  const handleCardCreate = useCallback(\r\n    async (card: Omit<Card, 'id'>) => {\r\n      const newCardId = `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\n      setBoard((prev) => {\r\n        const newCard: Card = {\r\n          ...card,\r\n          id: newCardId,\r\n        }\r\n\r\n        // Add to column's cardIds\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === card.columnId\r\n            ? { ...col, cardIds: [...col.cardIds, newCardId] }\r\n            : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: [...prev.cards, newCard],\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Delete card\r\n  const handleCardDelete = useCallback(\r\n    async (cardId: string) => {\r\n      setBoard((prev) => {\r\n        const card = prev.cards.find((c) => c.id === cardId)\r\n        if (!card) return prev\r\n\r\n        // Remove from cards\r\n        const updatedCards = prev.cards.filter((c) => c.id !== cardId)\r\n\r\n        // Remove from column's cardIds\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === card.columnId\r\n            ? { ...col, cardIds: col.cardIds.filter((id) => id !== cardId) }\r\n            : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Create new column\r\n  const handleColumnCreate = useCallback(\r\n    async (column: Omit<Column, 'id' | 'cardIds'>) => {\r\n      const newColumnId = `col-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n\r\n      setBoard((prev) => {\r\n        const newColumn: Column = {\r\n          ...column,\r\n          id: newColumnId,\r\n          cardIds: [],\r\n        }\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          columns: [...prev.columns, newColumn],\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Update column\r\n  const handleColumnUpdate = useCallback(\r\n    async (columnId: string, updates: Partial<Column>) => {\r\n      setBoard((prev) => {\r\n        const updatedColumns = prev.columns.map((col) =>\r\n          col.id === columnId ? { ...col, ...updates } : col\r\n        )\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Delete column\r\n  const handleColumnDelete = useCallback(\r\n    async (columnId: string) => {\r\n      setBoard((prev) => {\r\n        // Remove all cards in this column\r\n        const updatedCards = prev.cards.filter((c) => c.columnId !== columnId)\r\n        const updatedColumns = prev.columns.filter((col) => col.id !== columnId)\r\n\r\n        const updatedBoard = {\r\n          ...prev,\r\n          cards: updatedCards,\r\n          columns: updatedColumns,\r\n        }\r\n\r\n        persistBoard(updatedBoard)\r\n        return updatedBoard\r\n      })\r\n    },\r\n    [persistBoard]\r\n  )\r\n\r\n  // Helper function to add card (convenience)\r\n  const addCard = useCallback(\r\n    (card: Omit<Card, 'id'>): string => {\r\n      const newCardId = `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n      handleCardCreate(card)\r\n      return newCardId\r\n    },\r\n    [handleCardCreate]\r\n  )\r\n\r\n  // Helper function to add column (convenience)\r\n  const addColumn = useCallback(\r\n    (column: Omit<Column, 'id' | 'cardIds'>): string => {\r\n      const newColumnId = `col-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n      handleColumnCreate(column)\r\n      return newColumnId\r\n    },\r\n    [handleColumnCreate]\r\n  )\r\n\r\n  // Helper function to clear board (for AI-generated plans)\r\n  const clearBoard = useCallback(() => {\r\n    setBoard((prev) => {\r\n      const updatedBoard = {\r\n        ...prev,\r\n        cards: [],\r\n        columns: [],\r\n      }\r\n\r\n      persistBoard(updatedBoard)\r\n      return updatedBoard\r\n    })\r\n  }, [persistBoard])\r\n\r\n  const callbacks: BoardCallbacks = {\r\n    onCardMove: handleCardMove,\r\n    onCardUpdate: handleCardUpdate,\r\n    onCardCreate: handleCardCreate,\r\n    onCardDelete: handleCardDelete,\r\n    onColumnCreate: handleColumnCreate,\r\n    onColumnUpdate: handleColumnUpdate,\r\n    onColumnDelete: handleColumnDelete,\r\n  }\r\n\r\n  return {\r\n    board,\r\n    callbacks,\r\n    setBoard,\r\n    helpers: {\r\n      addCard,\r\n      addColumn,\r\n      deleteCard: handleCardDelete,\r\n      deleteColumn: handleColumnDelete,\r\n      clearBoard,\r\n    },\r\n  }\r\n}\r\n","import { useMemo } from 'react'\r\nimport { useKanbanState } from './useKanbanState'\r\nimport type { Board, BoardCallbacks, User, KanbanBoardProps } from '../types'\r\n\r\nexport interface UseBoardOptions {\r\n  initialData: Board\r\n  availableUsers?: User[]\r\n  onSave?: (board: Board) => void | Promise<void>\r\n  saveDelay?: number\r\n}\r\n\r\nexport interface UseBoardReturn {\r\n  props: Pick<KanbanBoardProps, 'board' | 'callbacks' | 'availableUsers'>\r\n  board: Board\r\n  callbacks: BoardCallbacks\r\n  utils: {\r\n    addCard: (columnId: string, title: string, data?: Partial<any>) => void\r\n    addColumn: (title: string, position?: number) => void\r\n    reset: () => void\r\n  }\r\n}\r\n\r\n/**\r\n * Simplified hook for Kanban board state management\r\n *\r\n * @example\r\n * ```tsx\r\n * import { KanbanBoard, useBoard } from '@libxai/board'\r\n *\r\n * function App() {\r\n *   const board = useBoard({\r\n *     initialData: myData,\r\n *     onSave: (board) => localStorage.setItem('board', JSON.stringify(board))\r\n *   })\r\n *\r\n *   return <KanbanBoard {...board.props} />\r\n * }\r\n * ```\r\n */\r\nexport function useBoard({\r\n  initialData,\r\n  availableUsers = [],\r\n  onSave,\r\n}: UseBoardOptions): UseBoardReturn {\r\n  const { board, callbacks, helpers } = useKanbanState({\r\n    initialBoard: initialData,\r\n    onPersist: onSave,\r\n  })\r\n\r\n  const utils = useMemo(\r\n    () => ({\r\n      addCard: (columnId: string, title: string, data: Partial<any> = {}) => {\r\n        helpers.addCard({\r\n          title,\r\n          columnId,\r\n          position: board.cards.filter((c) => c.columnId === columnId).length,\r\n          ...data,\r\n        })\r\n      },\r\n      addColumn: (title: string, position?: number) => {\r\n        // Calculate next position based on highest existing position + 1000\r\n        const maxPosition = board.columns.length > 0\r\n          ? Math.max(...board.columns.map(col => col.position))\r\n          : 0\r\n\r\n        helpers.addColumn({\r\n          title,\r\n          position: position ?? (maxPosition + 1000),\r\n        })\r\n      },\r\n      reset: helpers.clearBoard,\r\n    }),\r\n    [board.cards, board.columns, helpers]\r\n  )\r\n\r\n  const props = useMemo(\r\n    () => ({\r\n      board,\r\n      callbacks,\r\n      availableUsers,\r\n    }),\r\n    [board, callbacks, availableUsers]\r\n  )\r\n\r\n  return {\r\n    props,\r\n    board,\r\n    callbacks,\r\n    utils,\r\n  }\r\n}\r\n","import { useState, useMemo, useCallback } from 'react'\r\nimport type { Card, Priority } from '../types'\r\n\r\nexport type DateFilter = 'all' | 'overdue' | 'today' | 'this-week' | 'custom'\r\nexport type SortBy = 'created' | 'priority' | 'dueDate' | 'title' | 'estimate' | 'none'\r\nexport type SortOrder = 'asc' | 'desc'\r\n\r\nexport interface FilterState {\r\n  dateFilter: DateFilter\r\n  dateRange?: { start: Date; end: Date }\r\n  priorities: Priority[]\r\n  assignees: string[]\r\n  labels: string[]\r\n  columns: string[]\r\n  search: string\r\n}\r\n\r\nexport interface SortState {\r\n  by: SortBy\r\n  order: SortOrder\r\n}\r\n\r\nexport interface UseFiltersOptions {\r\n  initialFilters?: Partial<FilterState>\r\n  initialSort?: Partial<SortState>\r\n  currentUserId?: string\r\n}\r\n\r\nexport interface UseFiltersReturn {\r\n  filters: FilterState\r\n  sort: SortState\r\n  setFilters: (filters: Partial<FilterState>) => void\r\n  setSort: (sort: Partial<SortState>) => void\r\n  resetFilters: () => void\r\n  filterMyTasks: () => void\r\n  filterOverdue: () => void\r\n  filterHighPriority: () => void\r\n  applyFilters: (cards: Card[]) => Card[]\r\n  hasActiveFilters: boolean\r\n}\r\n\r\nconst DEFAULT_FILTERS: FilterState = {\r\n  dateFilter: 'all',\r\n  priorities: [],\r\n  assignees: [],\r\n  labels: [],\r\n  columns: [],\r\n  search: '',\r\n}\r\n\r\nconst DEFAULT_SORT: SortState = {\r\n  by: 'none',\r\n  order: 'asc',\r\n}\r\n\r\n/**\r\n * Hook for filtering and sorting board cards\r\n *\r\n * @example\r\n * ```tsx\r\n * const { filters, setFilters, applyFilters, filterMyTasks } = useFilters({\r\n *   currentUserId: 'user-1'\r\n * })\r\n *\r\n * const filteredCards = applyFilters(board.cards)\r\n * ```\r\n */\r\nexport function useFilters({\r\n  initialFilters = {},\r\n  initialSort = {},\r\n  currentUserId,\r\n}: UseFiltersOptions = {}): UseFiltersReturn {\r\n  const [filters, setFiltersState] = useState<FilterState>({\r\n    ...DEFAULT_FILTERS,\r\n    ...initialFilters,\r\n  })\r\n\r\n  const [sort, setSortState] = useState<SortState>({\r\n    ...DEFAULT_SORT,\r\n    ...initialSort,\r\n  })\r\n\r\n  const setFilters = useCallback((newFilters: Partial<FilterState>) => {\r\n    setFiltersState((prev) => ({ ...prev, ...newFilters }))\r\n  }, [])\r\n\r\n  const setSort = useCallback((newSort: Partial<SortState>) => {\r\n    setSortState((prev) => ({ ...prev, ...newSort }))\r\n  }, [])\r\n\r\n  const resetFilters = useCallback(() => {\r\n    setFiltersState(DEFAULT_FILTERS)\r\n    setSortState(DEFAULT_SORT)\r\n  }, [])\r\n\r\n  const filterMyTasks = useCallback(() => {\r\n    if (!currentUserId) return\r\n    // Reset all filters before applying \"My Tasks\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      assignees: [currentUserId]\r\n    })\r\n  }, [currentUserId])\r\n\r\n  const filterOverdue = useCallback(() => {\r\n    // Reset all filters before applying \"Overdue\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      dateFilter: 'overdue'\r\n    })\r\n  }, [])\r\n\r\n  const filterHighPriority = useCallback(() => {\r\n    // Reset all filters before applying \"High Priority\"\r\n    setFiltersState({\r\n      ...DEFAULT_FILTERS,\r\n      priorities: ['HIGH', 'URGENT']\r\n    })\r\n  }, [])\r\n\r\n  const hasActiveFilters = useMemo(() => {\r\n    return (\r\n      filters.dateFilter !== 'all' ||\r\n      filters.priorities.length > 0 ||\r\n      filters.assignees.length > 0 ||\r\n      filters.labels.length > 0 ||\r\n      filters.columns.length > 0 ||\r\n      filters.search !== '' ||\r\n      sort.by !== 'none'\r\n    )\r\n  }, [filters, sort])\r\n\r\n  const applyFilters = useCallback(\r\n    (cards: Card[]): Card[] => {\r\n      let filtered = [...cards]\r\n\r\n      if (filters.search) {\r\n        const query = filters.search.toLowerCase()\r\n        filtered = filtered.filter(\r\n          (card) =>\r\n            card.title.toLowerCase().includes(query) ||\r\n            card.description?.toLowerCase().includes(query)\r\n        )\r\n      }\r\n\r\n      if (filters.dateFilter !== 'all') {\r\n        const now = new Date()\r\n\r\n        // Get today's date string in local timezone (YYYY-MM-DD format)\r\n        // This matches what the date input produces when user selects a date\r\n        const year = now.getFullYear()\r\n        const month = String(now.getMonth() + 1).padStart(2, '0')\r\n        const day = String(now.getDate()).padStart(2, '0')\r\n        const todayString = `${year}-${month}-${day}`\r\n\r\n        filtered = filtered.filter((card) => {\r\n          if (!card.endDate && !card.dueDate) return false\r\n\r\n          const dueDate = card.endDate || card.dueDate\r\n          if (!dueDate) return false\r\n\r\n          // Convert date to YYYY-MM-DD string for comparison\r\n          let dueDateString: string\r\n          if (typeof dueDate === 'string') {\r\n            // Already a string, extract YYYY-MM-DD part\r\n            const parts = dueDate.split('T')\r\n            dueDateString = parts[0] || dueDate\r\n          } else {\r\n            // Date object - convert to YYYY-MM-DD in UTC (how date inputs store dates)\r\n            const y = dueDate.getUTCFullYear()\r\n            const m = String(dueDate.getUTCMonth() + 1).padStart(2, '0')\r\n            const d = String(dueDate.getUTCDate()).padStart(2, '0')\r\n            dueDateString = `${y}-${m}-${d}`\r\n          }\r\n\r\n          switch (filters.dateFilter) {\r\n            case 'overdue':\r\n              return dueDateString < todayString\r\n            case 'today':\r\n              return dueDateString === todayString\r\n            case 'this-week':\r\n              // This week means from today until 7 days from now\r\n              const todayDate = new Date(todayString + 'T00:00:00')\r\n              const cardDueDate = new Date(dueDateString + 'T00:00:00')\r\n              const weekFromNow = new Date(todayDate)\r\n              weekFromNow.setDate(weekFromNow.getDate() + 7)\r\n              return cardDueDate >= todayDate && cardDueDate <= weekFromNow\r\n            case 'custom':\r\n              if (filters.dateRange) {\r\n                const due = typeof dueDate === 'string' ? new Date(dueDate) : dueDate\r\n                return (\r\n                  due >= filters.dateRange.start && due <= filters.dateRange.end\r\n                )\r\n              }\r\n              return true\r\n            default:\r\n              return true\r\n          }\r\n        })\r\n      }\r\n\r\n      if (filters.priorities.length > 0) {\r\n        filtered = filtered.filter(\r\n          (card) => card.priority && filters.priorities.includes(card.priority)\r\n        )\r\n      }\r\n\r\n      if (filters.assignees.length > 0) {\r\n        filtered = filtered.filter((card) => {\r\n          const cardAssignees = card.assignedUserIds || (card.assigneeId ? [card.assigneeId] : [])\r\n          return cardAssignees.some((id) => filters.assignees.includes(id))\r\n        })\r\n      }\r\n\r\n      if (filters.labels.length > 0) {\r\n        filtered = filtered.filter((card) => {\r\n          return (\r\n            card.labels &&\r\n            card.labels.some((label) => filters.labels.includes(label))\r\n          )\r\n        })\r\n      }\r\n\r\n      if (filters.columns.length > 0) {\r\n        filtered = filtered.filter((card) =>\r\n          filters.columns.includes(card.columnId)\r\n        )\r\n      }\r\n\r\n      if (sort.by !== 'none') {\r\n        filtered.sort((a, b) => {\r\n          let comparison = 0\r\n\r\n          switch (sort.by) {\r\n            case 'created':\r\n              const aCreated = a.createdAt ? new Date(a.createdAt).getTime() : 0\r\n              const bCreated = b.createdAt ? new Date(b.createdAt).getTime() : 0\r\n              comparison = aCreated - bCreated\r\n              break\r\n\r\n            case 'priority':\r\n              const priorityOrder = { URGENT: 4, HIGH: 3, MEDIUM: 2, LOW: 1 }\r\n              const aPriority = priorityOrder[a.priority || 'LOW']\r\n              const bPriority = priorityOrder[b.priority || 'LOW']\r\n              comparison = aPriority - bPriority\r\n              break\r\n\r\n            case 'dueDate':\r\n              const aDue = a.endDate || a.dueDate\r\n              const bDue = b.endDate || b.dueDate\r\n              if (!aDue) return 1\r\n              if (!bDue) return -1\r\n              const aTime = typeof aDue === 'string' ? new Date(aDue).getTime() : aDue.getTime()\r\n              const bTime = typeof bDue === 'string' ? new Date(bDue).getTime() : bDue.getTime()\r\n              comparison = aTime - bTime\r\n              break\r\n\r\n            case 'title':\r\n              comparison = a.title.localeCompare(b.title)\r\n              break\r\n\r\n            case 'estimate':\r\n              const aEst = a.estimatedTime || 0\r\n              const bEst = b.estimatedTime || 0\r\n              comparison = aEst - bEst\r\n              break\r\n\r\n            default:\r\n              comparison = 0\r\n          }\r\n\r\n          return sort.order === 'asc' ? comparison : -comparison\r\n        })\r\n      }\r\n\r\n      return filtered\r\n    },\r\n    [filters, sort]\r\n  )\r\n\r\n  return {\r\n    filters,\r\n    sort,\r\n    setFilters,\r\n    setSort,\r\n    resetFilters,\r\n    filterMyTasks,\r\n    filterOverdue,\r\n    filterHighPriority,\r\n    applyFilters,\r\n    hasActiveFilters,\r\n  }\r\n}\r\n","/**\r\n * useAI Hook\r\n * Optional AI features using Vercel AI SDK\r\n * Requires 'ai' package to be installed\r\n * @module hooks/useAI\r\n */\r\n\r\nimport { useCallback, useState } from 'react'\r\nimport type {\r\n  AICallbacks,\r\n  Board,\r\n  Card,\r\n  GeneratedPlan,\r\n  AssigneeSuggestion,\r\n  Insight,\r\n} from '../types'\r\n\r\nexport interface UseAIOptions {\r\n  /** API key for AI provider */\r\n  apiKey?: string\r\n  /** Model to use */\r\n  model?: 'gpt-4' | 'gpt-4-turbo' | 'claude-3-5-sonnet' | string\r\n  /** Custom API endpoint */\r\n  endpoint?: string\r\n  /** Base URL */\r\n  baseURL?: string\r\n}\r\n\r\nexport interface UseAIReturn extends AICallbacks {\r\n  /** Is AI available (SDK installed + API key provided) */\r\n  isAvailable: boolean\r\n  /** Is AI currently processing */\r\n  isLoading: boolean\r\n  /** Last error */\r\n  error: Error | null\r\n}\r\n\r\n// Try to import AI SDK (optional peer dependency)\r\nlet generateObject: any\r\nlet generateText: any\r\n\r\nif (typeof window !== 'undefined') {\r\n  try {\r\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n    const aiSDK = require('ai')\r\n    generateObject = aiSDK.generateObject\r\n    generateText = aiSDK.generateText\r\n  } catch {\r\n    // AI SDK not installed\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for AI features\r\n *\r\n * @example\r\n * ```tsx\r\n * const ai = useAI({\r\n *   apiKey: process.env.OPENAI_API_KEY,\r\n *   model: 'gpt-4-turbo'\r\n * })\r\n *\r\n * if (ai.isAvailable) {\r\n *   const plan = await ai.onGeneratePlan('Build a todo app')\r\n * }\r\n * ```\r\n */\r\nexport function useAI(options: UseAIOptions = {}): UseAIReturn {\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<Error | null>(null)\r\n\r\n  const isAvailable = Boolean(\r\n    generateObject && generateText && options.apiKey\r\n  )\r\n\r\n  // Generate plan from prompt\r\n  const onGeneratePlan = useCallback(\r\n    async (prompt: string): Promise<GeneratedPlan> => {\r\n      if (!isAvailable) {\r\n        throw new Error(\r\n          'AI features require the \"ai\" package and an API key. Install with: npm install ai'\r\n        )\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        // This is a placeholder - actual implementation would use generateObject\r\n        // with proper schema definition using Zod\r\n        console.log('Generating plan for:', prompt)\r\n\r\n        // Example structure (would use real AI SDK)\r\n        const result: GeneratedPlan = {\r\n          columns: [\r\n            {\r\n              title: 'To Do',\r\n              position: 1000,\r\n              cardIds: [],\r\n            },\r\n            {\r\n              title: 'In Progress',\r\n              position: 2000,\r\n              cardIds: [],\r\n            },\r\n            {\r\n              title: 'Done',\r\n              position: 3000,\r\n              cardIds: [],\r\n            },\r\n          ],\r\n          cards: [\r\n            {\r\n              title: 'Generated task from AI',\r\n              description: `Based on: ${prompt}`,\r\n              position: 1000,\r\n              columnId: 'temp-col-1',\r\n            },\r\n          ],\r\n          explanation: 'This is a sample plan. Real implementation would use AI SDK.',\r\n        }\r\n\r\n        return result\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to generate plan')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Suggest assignee for card\r\n  const onSuggestAssignee = useCallback(\r\n    async (card: Card): Promise<AssigneeSuggestion> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        // Placeholder implementation\r\n        console.log('Suggesting assignee for:', card.title)\r\n\r\n        return {\r\n          userId: 'user-123',\r\n          confidence: 0.85,\r\n          reasoning: 'Based on past performance and expertise',\r\n        }\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to suggest assignee')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Predict risks\r\n  const onPredictRisks = useCallback(\r\n    async (_boardState: Board): Promise<Insight[]> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Analyzing board for risks...')\r\n\r\n        // Placeholder insights\r\n        const insights: Insight[] = [\r\n          {\r\n            type: 'RISK_OVERLOAD',\r\n            severity: 'HIGH',\r\n            title: 'Column overload detected',\r\n            description: 'Too many cards in \"In Progress\"',\r\n            confidence: 0.9,\r\n            suggestedAction: 'Consider moving some cards back to \"To Do\"',\r\n          },\r\n        ]\r\n\r\n        return insights\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to predict risks')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Generate subtasks\r\n  const onGenerateSubtasks = useCallback(\r\n    async (card: Card): Promise<Omit<Card, 'id'>[]> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Generating subtasks for:', card.title)\r\n\r\n        return [\r\n          {\r\n            title: `Subtask 1 for: ${card.title}`,\r\n            position: card.position + 0.1,\r\n            columnId: card.columnId,\r\n          },\r\n          {\r\n            title: `Subtask 2 for: ${card.title}`,\r\n            position: card.position + 0.2,\r\n            columnId: card.columnId,\r\n          },\r\n        ]\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to generate subtasks')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  // Estimate effort\r\n  const onEstimateEffort = useCallback(\r\n    async (\r\n      card: Card\r\n    ): Promise<{ hours: number; confidence: number }> => {\r\n      if (!isAvailable) {\r\n        throw new Error('AI features not available')\r\n      }\r\n\r\n      setIsLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        console.log('Estimating effort for:', card.title)\r\n\r\n        return {\r\n          hours: 8,\r\n          confidence: 0.75,\r\n        }\r\n      } catch (err) {\r\n        const error =\r\n          err instanceof Error ? err : new Error('Failed to estimate effort')\r\n        setError(error)\r\n        throw error\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    },\r\n    [isAvailable]\r\n  )\r\n\r\n  return {\r\n    onGeneratePlan,\r\n    onSuggestAssignee,\r\n    onPredictRisks,\r\n    onGenerateSubtasks,\r\n    onEstimateEffort,\r\n    isAvailable,\r\n    isLoading,\r\n    error,\r\n  }\r\n}\r\n","/**\r\n * useSelectionState - React hook for selection state management\r\n * @module hooks/useSelectionState\r\n *\r\n * Replacement for Jotai's useAtom(selectionStateAtom)\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { selectionStore, type SelectionState } from '@libxai/core'\r\n\r\n/**\r\n * Hook return type\r\n */\r\nexport type UseSelectionStateReturn = [\r\n  state: SelectionState,\r\n  setState: (state: SelectionState) => void\r\n]\r\n\r\n/**\r\n * React hook for selection state\r\n *\r\n * Drop-in replacement for `useAtom(selectionStateAtom)`\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyComponent() {\r\n *   const [selectionState, setSelectionState] = useSelectionState()\r\n *\r\n *   const handleSelect = (cardId: string) => {\r\n *     setSelectionState({\r\n *       selectedCardIds: [cardId],\r\n *       lastSelectedCardId: cardId,\r\n *     })\r\n *   }\r\n *\r\n *   return (\r\n *     <div>\r\n *       {selectionState.selectedCardIds.length} cards selected\r\n *     </div>\r\n *   )\r\n * }\r\n * ```\r\n */\r\nexport function useSelectionState(): UseSelectionStateReturn {\r\n  const [state, setState] = useState<SelectionState>(() => selectionStore.getState())\r\n\r\n  useEffect(() => {\r\n    // Subscribe to store changes\r\n    const unsubscribe = selectionStore.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [])\r\n\r\n  const setSelectionState = useCallback((newState: SelectionState) => {\r\n    selectionStore.setState(newState)\r\n  }, [])\r\n\r\n  return [state, setSelectionState]\r\n}\r\n","/**\r\n * Multi-select hook for bulk operations\r\n * Supports keyboard modifiers (Cmd/Ctrl, Shift) for selection\r\n * @module hooks/useMultiSelect\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { useSelectionState } from './useSelectionState'\r\nimport type { Card } from '../types'\r\n\r\nexport interface UseMultiSelectReturn {\r\n  /** Selected card IDs */\r\n  selectedCardIds: string[]\r\n  /** Last selected card ID */\r\n  lastSelectedCardId: string | null\r\n  /** Check if a card is selected */\r\n  isCardSelected: (cardId: string) => boolean\r\n  /** Select a card */\r\n  selectCard: (cardId: string, event?: React.MouseEvent) => void\r\n  /** Deselect a card */\r\n  deselectCard: (cardId: string) => void\r\n  /** Clear all selections */\r\n  clearSelection: () => void\r\n  /** Select all cards */\r\n  selectAll: () => void\r\n  /** Toggle card selection */\r\n  toggleCard: (cardId: string) => void\r\n  /** Get selected cards */\r\n  getSelectedCards: () => Card[]\r\n}\r\n\r\nexport interface UseMultiSelectOptions {\r\n  /** Board cards (required for range selection and selectAll) */\r\n  cards: Card[]\r\n}\r\n\r\n/**\r\n * Hook for multi-select functionality\r\n *\r\n * @param options - Configuration options\r\n */\r\nexport function useMultiSelect(options: UseMultiSelectOptions): UseMultiSelectReturn {\r\n  const { cards } = options\r\n  const [selectionState, setSelectionState] = useSelectionState()\r\n\r\n  const isCardSelected = useCallback(\r\n    (cardId: string) => {\r\n      return selectionState.selectedCardIds.includes(cardId)\r\n    },\r\n    [selectionState.selectedCardIds]\r\n  )\r\n\r\n  const selectCard = useCallback(\r\n    (cardId: string, event?: React.MouseEvent) => {\r\n      if (!event) {\r\n        // Simple selection without modifiers\r\n        setSelectionState({\r\n          selectedCardIds: [cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n        return\r\n      }\r\n\r\n      const isCtrlOrCmd = event.ctrlKey || event.metaKey\r\n      const isShift = event.shiftKey\r\n\r\n      if (isCtrlOrCmd) {\r\n        // Cmd/Ctrl+Click: Toggle card selection\r\n        if (selectionState.selectedCardIds.includes(cardId)) {\r\n          setSelectionState({\r\n            selectedCardIds: selectionState.selectedCardIds.filter((id) => id !== cardId),\r\n            lastSelectedCardId: selectionState.lastSelectedCardId,\r\n          })\r\n        } else {\r\n          setSelectionState({\r\n            selectedCardIds: [...selectionState.selectedCardIds, cardId],\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        }\r\n      } else if (isShift && selectionState.lastSelectedCardId) {\r\n        // Shift+Click: Range selection within same column\r\n        const card = cards.find((c) => c.id === cardId)\r\n        const lastCard = cards.find((c) => c.id === selectionState.lastSelectedCardId)\r\n\r\n        if (card && lastCard && card.columnId === lastCard.columnId) {\r\n          // Get all cards in the column\r\n          const columnCards = cards\r\n            .filter((c) => c.columnId === card.columnId)\r\n            .sort((a, b) => a.position - b.position)\r\n\r\n          const startIndex = columnCards.findIndex((c) => c.id === selectionState.lastSelectedCardId)\r\n          const endIndex = columnCards.findIndex((c) => c.id === cardId)\r\n\r\n          const [minIndex, maxIndex] = startIndex < endIndex\r\n            ? [startIndex, endIndex]\r\n            : [endIndex, startIndex]\r\n\r\n          const rangeCardIds = columnCards\r\n            .slice(minIndex, maxIndex + 1)\r\n            .map((c) => c.id)\r\n\r\n          // Merge with existing selection\r\n          const newSelection = Array.from(\r\n            new Set([...selectionState.selectedCardIds, ...rangeCardIds])\r\n          )\r\n\r\n          setSelectionState({\r\n            selectedCardIds: newSelection,\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        } else {\r\n          // Different column or no last selection - treat as regular selection\r\n          setSelectionState({\r\n            selectedCardIds: [cardId],\r\n            lastSelectedCardId: cardId,\r\n          })\r\n        }\r\n      } else {\r\n        // Regular click: Replace selection\r\n        setSelectionState({\r\n          selectedCardIds: [cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n      }\r\n    },\r\n    [cards, selectionState, setSelectionState]\r\n  )\r\n\r\n  const deselectCard = useCallback(\r\n    (cardId: string) => {\r\n      setSelectionState({\r\n        selectedCardIds: selectionState.selectedCardIds.filter((id) => id !== cardId),\r\n        lastSelectedCardId: selectionState.lastSelectedCardId,\r\n      })\r\n    },\r\n    [selectionState, setSelectionState]\r\n  )\r\n\r\n  const clearSelection = useCallback(() => {\r\n    setSelectionState({\r\n      selectedCardIds: [],\r\n      lastSelectedCardId: null,\r\n    })\r\n  }, [setSelectionState])\r\n\r\n  const selectAll = useCallback(() => {\r\n    setSelectionState({\r\n      selectedCardIds: cards.map((card) => card.id),\r\n      lastSelectedCardId: cards[cards.length - 1]?.id || null,\r\n    })\r\n  }, [cards, setSelectionState])\r\n\r\n  const toggleCard = useCallback(\r\n    (cardId: string) => {\r\n      if (selectionState.selectedCardIds.includes(cardId)) {\r\n        deselectCard(cardId)\r\n      } else {\r\n        setSelectionState({\r\n          selectedCardIds: [...selectionState.selectedCardIds, cardId],\r\n          lastSelectedCardId: cardId,\r\n        })\r\n      }\r\n    },\r\n    [selectionState, deselectCard, setSelectionState]\r\n  )\r\n\r\n  const getSelectedCards = useCallback(() => {\r\n    return cards.filter((card) =>\r\n      selectionState.selectedCardIds.includes(card.id)\r\n    )\r\n  }, [cards, selectionState.selectedCardIds])\r\n\r\n  return {\r\n    selectedCardIds: selectionState.selectedCardIds,\r\n    lastSelectedCardId: selectionState.lastSelectedCardId,\r\n    isCardSelected,\r\n    selectCard,\r\n    deselectCard,\r\n    clearSelection,\r\n    selectAll,\r\n    toggleCard,\r\n    getSelectedCards,\r\n  }\r\n}\r\n","/**\r\n * Card Stack Types\r\n * Smart grouping of related cards within columns\r\n * @module types/card-stack\r\n */\r\n\r\nexport type StackingStrategy = 'manual' | 'ai-similarity' | 'labels' | 'assignee' | 'priority' | 'epic'\r\n\r\nexport interface CardStack {\r\n  /** Unique stack identifier */\r\n  id: string\r\n  /** Display title for the stack */\r\n  title: string\r\n  /** Cards contained in this stack */\r\n  cardIds: string[]\r\n  /** Column this stack belongs to */\r\n  columnId: string\r\n  /** How this stack was created */\r\n  strategy: StackingStrategy\r\n  /** Visual color for the stack */\r\n  color?: string\r\n  /** Whether stack is expanded or collapsed */\r\n  isExpanded: boolean\r\n  /** Position within the column */\r\n  position: number\r\n  /** Timestamp when stack was created */\r\n  createdAt: Date\r\n  /** AI confidence score (0-1) for auto-stacked groups */\r\n  confidence?: number\r\n}\r\n\r\nexport interface StackingConfig {\r\n  /** Enable automatic AI-powered stacking */\r\n  enableAutoStacking: boolean\r\n  /** Minimum confidence threshold for auto-stacking (0-1) */\r\n  autoStackConfidenceThreshold: number\r\n  /** Minimum cards required to form a stack */\r\n  minCardsPerStack: number\r\n  /** Enable manual drag-to-stack */\r\n  enableManualStacking: boolean\r\n  /** Show stack summaries (card count, assignees, etc.) */\r\n  showStackSummaries: boolean\r\n  /** Animation duration in ms */\r\n  animationDuration: number\r\n}\r\n\r\nexport interface StackSuggestion {\r\n  /** Suggested stack configuration */\r\n  stack: Omit<CardStack, 'id' | 'createdAt' | 'isExpanded' | 'position'>\r\n  /** Reason for suggestion */\r\n  reason: string\r\n  /** Confidence score (0-1) */\r\n  confidence: number\r\n}\r\n\r\nexport const DEFAULT_STACKING_CONFIG: StackingConfig = {\r\n  enableAutoStacking: true,\r\n  autoStackConfidenceThreshold: 0.7,\r\n  minCardsPerStack: 2,\r\n  enableManualStacking: true,\r\n  showStackSummaries: true,\r\n  animationDuration: 200,\r\n}\r\n","/**\r\n * useCardStacking Hook\r\n * Manages card stack state and AI-powered grouping suggestions\r\n * @module hooks/useCardStacking\r\n */\r\n\r\nimport { useState, useCallback, useMemo, useEffect } from 'react'\r\nimport type { Card } from '../types'\r\nimport type { CardStack, StackingConfig, StackSuggestion, StackingStrategy } from '../types/card-stack'\r\nimport { DEFAULT_STACKING_CONFIG } from '../types/card-stack'\r\n\r\nexport interface UseCardStackingOptions {\r\n  /** Board cards */\r\n  cards: Card[]\r\n  /** Configuration */\r\n  config?: Partial<StackingConfig>\r\n  /** AI service for similarity detection (optional) */\r\n  aiService?: {\r\n    findSimilar: (card: Card, candidates: Card[]) => Promise<{ card: Card; similarity: number }[]>\r\n  }\r\n}\r\n\r\nexport interface UseCardStackingResult {\r\n  /** All card stacks */\r\n  stacks: CardStack[]\r\n  /** Create a new stack */\r\n  createStack: (\r\n    title: string,\r\n    cardIds: string[],\r\n    columnId: string,\r\n    strategy: StackingStrategy,\r\n    color?: string\r\n  ) => void\r\n  /** Delete a stack */\r\n  deleteStack: (stackId: string) => void\r\n  /** Toggle stack expand/collapse */\r\n  toggleStack: (stackId: string) => void\r\n  /** Add card to stack */\r\n  addToStack: (stackId: string, cardId: string) => void\r\n  /** Remove card from stack */\r\n  removeFromStack: (stackId: string, cardId: string) => void\r\n  /** Get stacks for a specific column */\r\n  getStacksForColumn: (columnId: string) => CardStack[]\r\n  /** Get AI-powered stack suggestions */\r\n  getSuggestions: (columnId: string) => Promise<StackSuggestion[]>\r\n  /** Apply a suggestion */\r\n  applySuggestion: (suggestion: StackSuggestion) => void\r\n  /** Configuration */\r\n  config: StackingConfig\r\n}\r\n\r\n/**\r\n * Hook for managing card stacking\r\n */\r\nexport function useCardStacking(options: UseCardStackingOptions): UseCardStackingResult {\r\n  const { cards, config: userConfig, aiService } = options\r\n\r\n  // Merge config with defaults\r\n  const config = useMemo<StackingConfig>(\r\n    () => ({\r\n      ...DEFAULT_STACKING_CONFIG,\r\n      ...userConfig,\r\n    }),\r\n    [userConfig]\r\n  )\r\n\r\n  // Stack state\r\n  const [stacks, setStacks] = useState<CardStack[]>([])\r\n\r\n  // Create stack\r\n  const createStack = useCallback(\r\n    (title: string, cardIds: string[], columnId: string, strategy: StackingStrategy, color?: string) => {\r\n      if (cardIds.length < config.minCardsPerStack) {\r\n        console.warn(`Cannot create stack: minimum ${config.minCardsPerStack} cards required`)\r\n        return\r\n      }\r\n\r\n      const newStack: CardStack = {\r\n        id: `stack-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n        title,\r\n        cardIds,\r\n        columnId,\r\n        strategy,\r\n        color,\r\n        isExpanded: true,\r\n        position: stacks.filter((s) => s.columnId === columnId).length,\r\n        createdAt: new Date(),\r\n      }\r\n\r\n      setStacks((prev) => [...prev, newStack])\r\n    },\r\n    [config.minCardsPerStack, stacks]\r\n  )\r\n\r\n  // Delete stack\r\n  const deleteStack = useCallback((stackId: string) => {\r\n    setStacks((prev) => prev.filter((s) => s.id !== stackId))\r\n  }, [])\r\n\r\n  // Toggle expand/collapse\r\n  const toggleStack = useCallback((stackId: string) => {\r\n    setStacks((prev) =>\r\n      prev.map((s) => (s.id === stackId ? { ...s, isExpanded: !s.isExpanded } : s))\r\n    )\r\n  }, [])\r\n\r\n  // Add card to stack\r\n  const addToStack = useCallback((stackId: string, cardId: string) => {\r\n    setStacks((prev) =>\r\n      prev.map((s) => {\r\n        if (s.id === stackId && !s.cardIds.includes(cardId)) {\r\n          return { ...s, cardIds: [...s.cardIds, cardId] }\r\n        }\r\n        return s\r\n      })\r\n    )\r\n  }, [])\r\n\r\n  // Remove card from stack\r\n  const removeFromStack = useCallback(\r\n    (stackId: string, cardId: string) => {\r\n      setStacks((prev) =>\r\n        prev\r\n          .map((s) => {\r\n            if (s.id === stackId) {\r\n              const newCardIds = s.cardIds.filter((id) => id !== cardId)\r\n              // If stack has too few cards, delete it\r\n              if (newCardIds.length < config.minCardsPerStack) {\r\n                return null\r\n              }\r\n              return { ...s, cardIds: newCardIds }\r\n            }\r\n            return s\r\n          })\r\n          .filter((s): s is CardStack => s !== null)\r\n      )\r\n    },\r\n    [config.minCardsPerStack]\r\n  )\r\n\r\n  // Get stacks for column\r\n  const getStacksForColumn = useCallback(\r\n    (columnId: string) => {\r\n      return stacks.filter((s) => s.columnId === columnId).sort((a, b) => a.position - b.position)\r\n    },\r\n    [stacks]\r\n  )\r\n\r\n  // Generate AI suggestions\r\n  const getSuggestions = useCallback(\r\n    async (columnId: string): Promise<StackSuggestion[]> => {\r\n      const columnCards = cards.filter((c) => c.columnId === columnId)\r\n\r\n      if (columnCards.length < config.minCardsPerStack * 2) {\r\n        return []\r\n      }\r\n\r\n      const suggestions: StackSuggestion[] = []\r\n\r\n      // 1. Group by labels\r\n      const byLabels = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.labels && card.labels.length > 0) {\r\n          card.labels.forEach((label) => {\r\n            if (!byLabels.has(label)) {\r\n              byLabels.set(label, [])\r\n            }\r\n            byLabels.get(label)!.push(card)\r\n          })\r\n        }\r\n      })\r\n\r\n      byLabels.forEach((cards, label) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          suggestions.push({\r\n            stack: {\r\n              title: ` ${label}`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'labels',\r\n              color: '#3b82f6',\r\n            },\r\n            reason: `${cards.length} cards with label \"${label}\"`,\r\n            confidence: 0.85,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 2. Group by assignee\r\n      const byAssignee = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.assignedUserIds && card.assignedUserIds.length > 0) {\r\n          card.assignedUserIds.forEach((userId) => {\r\n            if (!byAssignee.has(userId)) {\r\n              byAssignee.set(userId, [])\r\n            }\r\n            byAssignee.get(userId)!.push(card)\r\n          })\r\n        }\r\n      })\r\n\r\n      byAssignee.forEach((cards, userId) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          suggestions.push({\r\n            stack: {\r\n              title: ` Assigned to user-${userId.slice(-4)}`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'assignee',\r\n              color: '#8b5cf6',\r\n            },\r\n            reason: `${cards.length} cards assigned to the same user`,\r\n            confidence: 0.8,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 3. Group by priority\r\n      const byPriority = new Map<string, Card[]>()\r\n      columnCards.forEach((card) => {\r\n        if (card.priority) {\r\n          if (!byPriority.has(card.priority)) {\r\n            byPriority.set(card.priority, [])\r\n          }\r\n          byPriority.get(card.priority)!.push(card)\r\n        }\r\n      })\r\n\r\n      byPriority.forEach((cards, priority) => {\r\n        if (cards.length >= config.minCardsPerStack) {\r\n          const priorityEmoji = {\r\n            low: '',\r\n            medium: '',\r\n            high: '',\r\n            urgent: '',\r\n          }[priority.toLowerCase()] || ''\r\n\r\n          suggestions.push({\r\n            stack: {\r\n              title: `${priorityEmoji} ${priority} Priority`,\r\n              cardIds: cards.map((c) => c.id),\r\n              columnId,\r\n              strategy: 'priority',\r\n              color: priority === 'high' || priority === 'urgent' ? '#ef4444' : '#10b981',\r\n            },\r\n            reason: `${cards.length} cards with ${priority} priority`,\r\n            confidence: 0.75,\r\n          })\r\n        }\r\n      })\r\n\r\n      // 4. AI-powered similarity (if available)\r\n      if (aiService && config.enableAutoStacking) {\r\n        // Find similar cards using AI\r\n        for (const card of columnCards) {\r\n          const similar = await aiService.findSimilar(card, columnCards)\r\n          const highSimilarity = similar.filter(\r\n            (s) => s.similarity >= config.autoStackConfidenceThreshold\r\n          )\r\n\r\n          if (highSimilarity.length >= config.minCardsPerStack - 1) {\r\n            const cardIds = [card.id, ...highSimilarity.map((s) => s.card.id)]\r\n            const avgConfidence =\r\n              highSimilarity.reduce((sum, s) => sum + s.similarity, 0) / highSimilarity.length\r\n\r\n            suggestions.push({\r\n              stack: {\r\n                title: ` Similar to \"${card.title.substring(0, 30)}${card.title.length > 30 ? '...' : ''}\"`,\r\n                cardIds,\r\n                columnId,\r\n                strategy: 'ai-similarity',\r\n                color: '#f59e0b',\r\n              },\r\n              reason: `AI detected ${highSimilarity.length + 1} similar tasks`,\r\n              confidence: avgConfidence,\r\n            })\r\n          }\r\n        }\r\n      }\r\n\r\n      // Filter by confidence threshold and remove duplicates\r\n      return suggestions\r\n        .filter((s) => s.confidence >= config.autoStackConfidenceThreshold)\r\n        .sort((a, b) => b.confidence - a.confidence)\r\n        .slice(0, 5) // Top 5 suggestions\r\n    },\r\n    [cards, config, aiService]\r\n  )\r\n\r\n  // Apply suggestion\r\n  const applySuggestion = useCallback(\r\n    (suggestion: StackSuggestion) => {\r\n      createStack(\r\n        suggestion.stack.title,\r\n        suggestion.stack.cardIds,\r\n        suggestion.stack.columnId,\r\n        suggestion.stack.strategy,\r\n        suggestion.stack.color\r\n      )\r\n    },\r\n    [createStack]\r\n  )\r\n\r\n  // Auto-stack on mount if enabled\r\n  useEffect(() => {\r\n    if (config.enableAutoStacking && stacks.length === 0) {\r\n      // Auto-stack each column\r\n      const columnIds = new Set(cards.map((c) => c.columnId))\r\n      columnIds.forEach(async (columnId) => {\r\n        const suggestions = await getSuggestions(columnId)\r\n        // Auto-apply highest confidence suggestion\r\n        const topSuggestion = suggestions[0]\r\n        if (suggestions.length > 0 && topSuggestion && topSuggestion.confidence >= 0.9) {\r\n          applySuggestion(topSuggestion)\r\n        }\r\n      })\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []) // Only on mount\r\n\r\n  return {\r\n    stacks,\r\n    createStack,\r\n    deleteStack,\r\n    toggleStack,\r\n    addToStack,\r\n    removeFromStack,\r\n    getStacksForColumn,\r\n    getSuggestions,\r\n    applySuggestion,\r\n    config,\r\n  }\r\n}\r\n","/**\r\n * BoardProvider - React Context Provider for BoardStore\r\n * @module adapters/react\r\n */\r\n\r\nimport React, { createContext, useContext, useEffect, useRef } from 'react'\r\nimport { BoardStore, type BoardState, type CardData, type ColumnData, type BoardData } from '@libxai/core'\r\n\r\n/**\r\n * Board Context\r\n */\r\ninterface BoardContextValue {\r\n  store: BoardStore\r\n}\r\n\r\nconst BoardContext = createContext<BoardContextValue | null>(null)\r\n\r\n/**\r\n * Board Provider Props\r\n */\r\nexport interface BoardProviderProps {\r\n  children: React.ReactNode\r\n  initialData?: {\r\n    board?: BoardData\r\n    columns?: ColumnData[]\r\n    cards?: CardData[]\r\n  }\r\n  onStateChange?: (state: BoardState) => void\r\n}\r\n\r\n/**\r\n * BoardProvider component\r\n *\r\n * Wraps your app with BoardStore context\r\n *\r\n * @example\r\n * ```tsx\r\n * <BoardProvider initialData={{ columns: [], cards: [] }}>\r\n *   <Board />\r\n * </BoardProvider>\r\n * ```\r\n */\r\nexport function BoardProvider({ children, initialData, onStateChange }: BoardProviderProps) {\r\n  // Create store only once\r\n  const storeRef = useRef<BoardStore>()\r\n\r\n  if (!storeRef.current) {\r\n    // Initialize store\r\n    const columnsMap = new Map()\r\n    const cardsMap = new Map()\r\n\r\n    // Load initial columns\r\n    initialData?.columns?.forEach(colData => {\r\n      const { Column } = require('@libxai/core')\r\n      columnsMap.set(colData.id, new Column(colData))\r\n    })\r\n\r\n    // Load initial cards\r\n    initialData?.cards?.forEach(cardData => {\r\n      const { Card } = require('@libxai/core')\r\n      cardsMap.set(cardData.id, new Card(cardData))\r\n    })\r\n\r\n    // Load initial board\r\n    let board = null\r\n    if (initialData?.board) {\r\n      const { Board } = require('@libxai/core')\r\n      board = new Board(initialData.board)\r\n    }\r\n\r\n    storeRef.current = new BoardStore({\r\n      board,\r\n      columns: columnsMap,\r\n      cards: cardsMap,\r\n    })\r\n  }\r\n\r\n  const store = storeRef.current\r\n\r\n  // Subscribe to state changes\r\n  useEffect(() => {\r\n    if (!onStateChange) return\r\n\r\n    return store.subscribeAll((_event) => {\r\n      onStateChange(store.getState())\r\n    })\r\n  }, [store, onStateChange])\r\n\r\n  return (\r\n    <BoardContext.Provider value={{ store }}>\r\n      {children}\r\n    </BoardContext.Provider>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access BoardStore from context\r\n *\r\n * @throws Error if used outside BoardProvider\r\n */\r\nexport function useBoardStore(): BoardStore {\r\n  const context = useContext(BoardContext)\r\n\r\n  if (!context) {\r\n    throw new Error('useBoardStore must be used within BoardProvider')\r\n  }\r\n\r\n  return context.store\r\n}\r\n","/**\r\n * useBoard - Main hook for board operations\r\n * @module adapters/react\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'react'\r\nimport { useBoardStore } from './BoardProvider'\r\nimport type { Board, Column, Card, CardData, ColumnData } from '@libxai/core'\r\n\r\n/**\r\n * Return type for useBoard hook\r\n */\r\nexport interface UseBoardReturn {\r\n  // State\r\n  board: Board | null\r\n  columns: Column[]\r\n  cards: Card[]\r\n\r\n  // Board operations\r\n  updateBoard: (changes: Partial<Omit<import('@libxai/core').BoardData, 'id' | 'createdAt'>>) => void\r\n\r\n  // Column operations\r\n  addColumn: (columnData: Omit<ColumnData, 'createdAt' | 'updatedAt'>) => void\r\n  updateColumn: (columnId: string, changes: Partial<Omit<ColumnData, 'id' | 'createdAt'>>) => void\r\n  deleteColumn: (columnId: string) => void\r\n  getColumn: (columnId: string) => Column | undefined\r\n\r\n  // Card operations\r\n  addCard: (cardData: Omit<CardData, 'createdAt' | 'updatedAt'>) => void\r\n  updateCard: (cardId: string, changes: Partial<Omit<CardData, 'id' | 'createdAt'>>) => void\r\n  deleteCard: (cardId: string) => void\r\n  moveCard: (cardId: string, toColumnId: string, newPosition: number) => void\r\n  getCard: (cardId: string) => Card | undefined\r\n  getCardsByColumn: (columnId: string) => Card[]\r\n}\r\n\r\n/**\r\n * Main hook for board operations\r\n *\r\n * Provides reactive state and methods for managing board, columns, and cards\r\n *\r\n * @example\r\n * ```tsx\r\n * function MyBoard() {\r\n *   const { board, columns, cards, addCard, moveCard } = useBoard()\r\n *\r\n *   return (\r\n *     <div>\r\n *       {columns.map(column => (\r\n *         <div key={column.id}>\r\n *           <h2>{column.title}</h2>\r\n *           {cards\r\n *             .filter(card => card.columnId === column.id)\r\n *             .map(card => (\r\n *               <div key={card.id}>{card.title}</div>\r\n *             ))}\r\n *         </div>\r\n *       ))}\r\n *     </div>\r\n *   )\r\n * }\r\n * ```\r\n */\r\nexport function useBoard(): UseBoardReturn {\r\n  const store = useBoardStore()\r\n\r\n  // Reactive state\r\n  const [board, setBoard] = useState<Board | null>(store.getBoard())\r\n  const [columns, setColumns] = useState<Column[]>(store.getAllColumns())\r\n  const [cards, setCards] = useState<Card[]>(store.getAllCards())\r\n\r\n  // Subscribe to store changes\r\n  useEffect(() => {\r\n    const unsubscribe = store.subscribeAll(() => {\r\n      setBoard(store.getBoard())\r\n      setColumns(store.getAllColumns())\r\n      setCards(store.getAllCards())\r\n    })\r\n\r\n    return unsubscribe\r\n  }, [store])\r\n\r\n  // Board operations\r\n  const updateBoard = useCallback(\r\n    (changes: Partial<Omit<import('@libxai/core').BoardData, 'id' | 'createdAt'>>) => {\r\n      store.updateBoard(changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  // Column operations\r\n  const addColumn = useCallback(\r\n    (columnData: Omit<ColumnData, 'createdAt' | 'updatedAt'>) => {\r\n      store.addColumn(columnData)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const updateColumn = useCallback(\r\n    (columnId: string, changes: Partial<Omit<ColumnData, 'id' | 'createdAt'>>) => {\r\n      store.updateColumn(columnId, changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const deleteColumn = useCallback(\r\n    (columnId: string) => {\r\n      store.deleteColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getColumn = useCallback(\r\n    (columnId: string) => {\r\n      return store.getColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  // Card operations\r\n  const addCard = useCallback(\r\n    (cardData: Omit<CardData, 'createdAt' | 'updatedAt'>) => {\r\n      store.addCard(cardData)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const updateCard = useCallback(\r\n    (cardId: string, changes: Partial<Omit<CardData, 'id' | 'createdAt'>>) => {\r\n      store.updateCard(cardId, changes)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const deleteCard = useCallback(\r\n    (cardId: string) => {\r\n      store.deleteCard(cardId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const moveCard = useCallback(\r\n    (cardId: string, toColumnId: string, newPosition: number) => {\r\n      store.moveCard(cardId, toColumnId, newPosition)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getCard = useCallback(\r\n    (cardId: string) => {\r\n      return store.getCard(cardId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  const getCardsByColumn = useCallback(\r\n    (columnId: string) => {\r\n      return store.getCardsByColumn(columnId)\r\n    },\r\n    [store]\r\n  )\r\n\r\n  return {\r\n    // State\r\n    board,\r\n    columns,\r\n    cards,\r\n\r\n    // Board operations\r\n    updateBoard,\r\n\r\n    // Column operations\r\n    addColumn,\r\n    updateColumn,\r\n    deleteColumn,\r\n    getColumn,\r\n\r\n    // Card operations\r\n    addCard,\r\n    updateCard,\r\n    deleteCard,\r\n    moveCard,\r\n    getCard,\r\n    getCardsByColumn,\r\n  }\r\n}\r\n","/**\r\n * useFilteredCards - Hook for filtering cards with memoization\r\n * @module adapters/react\r\n */\r\n\r\nimport { useMemo } from 'react'\r\nimport { useBoard } from './useBoard'\r\nimport type { Card, Priority, CardStatus } from '@libxai/core'\r\n\r\n/**\r\n * Filter options for cards\r\n */\r\nexport interface CardFilters {\r\n  searchQuery?: string\r\n  priorities?: Priority[]\r\n  statuses?: CardStatus[]\r\n  assignedUserIds?: string[]\r\n  labels?: string[]\r\n  columnIds?: string[]\r\n  isOverdue?: boolean\r\n}\r\n\r\n/**\r\n * Hook for filtered and sorted cards\r\n *\r\n * Automatically memoizes results for performance\r\n *\r\n * @param filters - Filter criteria\r\n * @returns Filtered cards array\r\n *\r\n * @example\r\n * ```tsx\r\n * function CardList() {\r\n *   const filteredCards = useFilteredCards({\r\n *     priorities: ['HIGH', 'URGENT'],\r\n *     isOverdue: true\r\n *   })\r\n *\r\n *   return <div>{filteredCards.length} urgent overdue tasks</div>\r\n * }\r\n * ```\r\n */\r\nexport function useFilteredCards(filters?: CardFilters): Card[] {\r\n  const { cards } = useBoard()\r\n\r\n  return useMemo(() => {\r\n    if (!filters) return cards\r\n\r\n    return cards.filter(card => {\r\n      // Search query (title + description)\r\n      if (filters.searchQuery) {\r\n        const query = filters.searchQuery.toLowerCase()\r\n        const matchesTitle = card.title.toLowerCase().includes(query)\r\n        const matchesDesc = card.description?.toLowerCase().includes(query)\r\n        if (!matchesTitle && !matchesDesc) return false\r\n      }\r\n\r\n      // Priority filter\r\n      if (filters.priorities && filters.priorities.length > 0) {\r\n        if (!card.priority || !filters.priorities.includes(card.priority)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Status filter\r\n      if (filters.statuses && filters.statuses.length > 0) {\r\n        if (!card.status || !filters.statuses.includes(card.status)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Assigned users filter\r\n      if (filters.assignedUserIds && filters.assignedUserIds.length > 0) {\r\n        const hasAssignedUser = filters.assignedUserIds.some(userId =>\r\n          card.isAssignedTo(userId)\r\n        )\r\n        if (!hasAssignedUser) return false\r\n      }\r\n\r\n      // Labels filter\r\n      if (filters.labels && filters.labels.length > 0) {\r\n        const hasLabel = filters.labels.some(label => card.hasLabel(label))\r\n        if (!hasLabel) return false\r\n      }\r\n\r\n      // Column filter\r\n      if (filters.columnIds && filters.columnIds.length > 0) {\r\n        if (!filters.columnIds.includes(card.columnId)) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Overdue filter\r\n      if (filters.isOverdue !== undefined) {\r\n        if (filters.isOverdue !== card.isOverdue()) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      return true\r\n    })\r\n  }, [cards, filters])\r\n}\r\n\r\n/**\r\n * Hook for sorted cards\r\n *\r\n * @param sortBy - Sort field\r\n * @param sortOrder - Sort order ('asc' | 'desc')\r\n * @returns Sorted cards array\r\n */\r\nexport function useSortedCards(\r\n  sortBy: 'title' | 'priority' | 'createdAt' | 'updatedAt' | 'position' = 'position',\r\n  sortOrder: 'asc' | 'desc' = 'asc'\r\n): Card[] {\r\n  const { cards } = useBoard()\r\n\r\n  return useMemo(() => {\r\n    const sorted = [...cards].sort((a, b) => {\r\n      let comparison = 0\r\n\r\n      switch (sortBy) {\r\n        case 'title':\r\n          comparison = a.title.localeCompare(b.title)\r\n          break\r\n        case 'priority': {\r\n          const priorityOrder = { URGENT: 4, HIGH: 3, MEDIUM: 2, LOW: 1 }\r\n          const aPriority = a.priority ? priorityOrder[a.priority] : 0\r\n          const bPriority = b.priority ? priorityOrder[b.priority] : 0\r\n          comparison = aPriority - bPriority\r\n          break\r\n        }\r\n        case 'createdAt':\r\n          comparison = a.createdAt.getTime() - b.createdAt.getTime()\r\n          break\r\n        case 'updatedAt':\r\n          comparison = a.updatedAt.getTime() - b.updatedAt.getTime()\r\n          break\r\n        case 'position':\r\n          comparison = a.position - b.position\r\n          break\r\n      }\r\n\r\n      return sortOrder === 'asc' ? comparison : -comparison\r\n    })\r\n\r\n    return sorted\r\n  }, [cards, sortBy, sortOrder])\r\n}\r\n","/**\r\n * Plugin Manager Implementation\r\n * Manages plugin lifecycle and execution\r\n * @module plugins/PluginManager\r\n */\r\n\r\nimport type { Plugin, PluginContext, IPluginManager } from './types'\r\nimport { logger } from '../utils/logger'\r\n\r\nexport class PluginManager implements IPluginManager {\r\n  private plugins: Map<string, Plugin> = new Map()\r\n  private enabled: Set<string> = new Set()\r\n  private config: Map<string, Record<string, any>> = new Map()\r\n  private context: PluginContext | null = null\r\n  private pluginLogger = logger.child('PluginManager')\r\n\r\n  /**\r\n   * Set plugin context (board state, callbacks, etc.)\r\n   */\r\n  setContext(context: PluginContext): void {\r\n    this.context = context\r\n  }\r\n\r\n  /**\r\n   * Register a plugin\r\n   */\r\n  register(plugin: Plugin): void {\r\n    // Validate plugin\r\n    if (!plugin.id || !plugin.name || !plugin.version) {\r\n      throw new Error('Plugin must have id, name, and version')\r\n    }\r\n\r\n    if (this.plugins.has(plugin.id)) {\r\n      this.pluginLogger.warn(`Plugin ${plugin.id} is already registered, overwriting...`)\r\n    }\r\n\r\n    // Check dependencies\r\n    if (plugin.dependencies) {\r\n      for (const depId of plugin.dependencies) {\r\n        if (!this.plugins.has(depId)) {\r\n          throw new Error(`Plugin ${plugin.id} depends on ${depId} which is not registered`)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Store plugin\r\n    this.plugins.set(plugin.id, plugin)\r\n\r\n    // Set default config\r\n    if (plugin.defaultConfig) {\r\n      this.config.set(plugin.id, { ...plugin.defaultConfig })\r\n    }\r\n\r\n    // Enable by default\r\n    this.enabled.add(plugin.id)\r\n\r\n    this.pluginLogger.info(`Plugin registered: ${plugin.name} v${plugin.version}`)\r\n\r\n    // Call onInit hook\r\n    if (plugin.onInit && this.context) {\r\n      Promise.resolve(plugin.onInit(this.context)).catch((error) => {\r\n        this.pluginLogger.error(`Failed to initialize plugin ${plugin.id}`, error, {\r\n          plugin: plugin.id,\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unregister a plugin\r\n   */\r\n  unregister(pluginId: string): void {\r\n    const plugin = this.plugins.get(pluginId)\r\n\r\n    if (!plugin) {\r\n      this.pluginLogger.warn(`Plugin ${pluginId} is not registered`)\r\n      return\r\n    }\r\n\r\n    // Call onDestroy hook\r\n    if (plugin.onDestroy) {\r\n      Promise.resolve(plugin.onDestroy()).catch((error) => {\r\n        this.pluginLogger.error(`Failed to destroy plugin ${pluginId}`, error)\r\n      })\r\n    }\r\n\r\n    this.plugins.delete(pluginId)\r\n    this.enabled.delete(pluginId)\r\n    this.config.delete(pluginId)\r\n\r\n    this.pluginLogger.info(`Plugin unregistered: ${plugin.name}`)\r\n  }\r\n\r\n  /**\r\n   * Get registered plugin\r\n   */\r\n  getPlugin(pluginId: string): Plugin | undefined {\r\n    return this.plugins.get(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Get all registered plugins\r\n   */\r\n  getPlugins(): Plugin[] {\r\n    return Array.from(this.plugins.values())\r\n  }\r\n\r\n  /**\r\n   * Check if plugin is registered\r\n   */\r\n  hasPlugin(pluginId: string): boolean {\r\n    return this.plugins.has(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Enable/disable plugin\r\n   */\r\n  setEnabled(pluginId: string, enabled: boolean): void {\r\n    if (!this.plugins.has(pluginId)) {\r\n      throw new Error(`Plugin ${pluginId} is not registered`)\r\n    }\r\n\r\n    if (enabled) {\r\n      this.enabled.add(pluginId)\r\n      this.pluginLogger.info(`Plugin enabled: ${pluginId}`)\r\n    } else {\r\n      this.enabled.delete(pluginId)\r\n      this.pluginLogger.info(`Plugin disabled: ${pluginId}`)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if plugin is enabled\r\n   */\r\n  isEnabled(pluginId: string): boolean {\r\n    return this.enabled.has(pluginId)\r\n  }\r\n\r\n  /**\r\n   * Get plugin config\r\n   */\r\n  getConfig<T = any>(pluginId: string, key: string): T | undefined {\r\n    const config = this.config.get(pluginId)\r\n    return config?.[key] as T | undefined\r\n  }\r\n\r\n  /**\r\n   * Set plugin config\r\n   */\r\n  setConfig(pluginId: string, key: string, value: any): void {\r\n    if (!this.config.has(pluginId)) {\r\n      this.config.set(pluginId, {})\r\n    }\r\n\r\n    const config = this.config.get(pluginId)!\r\n    config[key] = value\r\n\r\n    this.pluginLogger.debug(`Plugin config set: ${pluginId}.${key}`, { value })\r\n  }\r\n\r\n  /**\r\n   * Execute plugin hooks\r\n   */\r\n  async executeHook<T = any>(\r\n    hookName: keyof Plugin,\r\n    args: any[],\r\n    defaultValue?: T\r\n  ): Promise<T | undefined> {\r\n    let result: T | undefined = defaultValue\r\n\r\n    for (const plugin of this.plugins.values()) {\r\n      if (!this.enabled.has(plugin.id)) {\r\n        continue\r\n      }\r\n\r\n      const hook = plugin[hookName] as any\r\n\r\n      if (typeof hook === 'function') {\r\n        try {\r\n          const hookResult = await Promise.resolve(hook.apply(plugin, args))\r\n\r\n          // For transform hooks, use the result as input for next plugin\r\n          if (hookResult !== undefined) {\r\n            result = hookResult\r\n            args[0] = hookResult // Update first argument for next plugin\r\n          }\r\n        } catch (error) {\r\n          this.pluginLogger.error(`Plugin hook failed: ${plugin.id}.${hookName}`, error as Error, {\r\n            plugin: plugin.id,\r\n            hook: hookName,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  /**\r\n   * Execute plugin hooks in parallel\r\n   */\r\n  async executeHookParallel(hookName: keyof Plugin, args: any[]): Promise<void> {\r\n    const promises: Promise<any>[] = []\r\n\r\n    for (const plugin of this.plugins.values()) {\r\n      if (!this.enabled.has(plugin.id)) {\r\n        continue\r\n      }\r\n\r\n      const hook = plugin[hookName] as any\r\n\r\n      if (typeof hook === 'function') {\r\n        promises.push(\r\n          Promise.resolve(hook.apply(plugin, args)).catch((error) => {\r\n            this.pluginLogger.error(`Plugin hook failed: ${plugin.id}.${hookName}`, error as Error, {\r\n              plugin: plugin.id,\r\n              hook: hookName,\r\n            })\r\n          })\r\n        )\r\n      }\r\n    }\r\n\r\n    await Promise.all(promises)\r\n  }\r\n}\r\n\r\n/**\r\n * Global plugin manager instance\r\n */\r\nexport const pluginManager = new PluginManager()\r\n","/**\r\n * VirtualList - Virtual scrolling component for large lists\r\n * @module components/VirtualList\r\n */\r\n\r\nimport React, { useRef } from 'react'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\n\r\nexport interface VirtualListProps<T> {\r\n  /** Array of items to render */\r\n  items: T[]\r\n  /** Height of the scrollable container in pixels */\r\n  height: number | string\r\n  /** Estimated size of each item in pixels */\r\n  estimateSize: number\r\n  /** Render function for each item */\r\n  renderItem: (item: T, index: number) => React.ReactNode\r\n  /** Optional className for the container */\r\n  className?: string\r\n  /** Overscan count (number of items to render outside viewport) */\r\n  overscan?: number\r\n  /** Enable horizontal scrolling instead of vertical */\r\n  horizontal?: boolean\r\n  /** Optional gap between items in pixels */\r\n  gap?: number\r\n  /** Optional key extractor function */\r\n  getItemKey?: (item: T, index: number) => string | number\r\n}\r\n\r\n/**\r\n * VirtualList component for efficient rendering of large lists\r\n *\r\n * Uses @tanstack/react-virtual for windowing/virtualization\r\n *\r\n * @example\r\n * ```tsx\r\n * <VirtualList\r\n *   items={cards}\r\n *   height={600}\r\n *   estimateSize={100}\r\n *   renderItem={(card) => <CardComponent card={card} />}\r\n *   getItemKey={(card) => card.id}\r\n * />\r\n * ```\r\n */\r\nexport function VirtualList<T>({\r\n  items,\r\n  height,\r\n  estimateSize,\r\n  renderItem,\r\n  className = '',\r\n  overscan = 5,\r\n  horizontal = false,\r\n  gap = 0,\r\n  getItemKey,\r\n}: VirtualListProps<T>) {\r\n  const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n  const virtualizer = useVirtualizer({\r\n    count: items.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => estimateSize,\r\n    overscan,\r\n    horizontal,\r\n    gap,\r\n  })\r\n\r\n  const virtualItems = virtualizer.getVirtualItems()\r\n\r\n  const containerStyle: React.CSSProperties = {\r\n    height: typeof height === 'number' ? `${height}px` : height,\r\n    width: '100%',\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  }\r\n\r\n  const innerStyle: React.CSSProperties = horizontal\r\n    ? {\r\n        width: `${virtualizer.getTotalSize()}px`,\r\n        height: '100%',\r\n        position: 'relative',\r\n      }\r\n    : {\r\n        height: `${virtualizer.getTotalSize()}px`,\r\n        width: '100%',\r\n        position: 'relative',\r\n      }\r\n\r\n  return (\r\n    <div ref={parentRef} style={containerStyle} className={className}>\r\n      <div style={innerStyle}>\r\n        {virtualItems.map((virtualItem) => {\r\n          const item = items[virtualItem.index]\r\n          if (!item) return null\r\n          const key = getItemKey ? getItemKey(item, virtualItem.index) : virtualItem.index\r\n\r\n          const itemStyle: React.CSSProperties = {\r\n            position: 'absolute',\r\n            top: horizontal ? 0 : virtualItem.start,\r\n            left: horizontal ? virtualItem.start : 0,\r\n            width: horizontal ? virtualItem.size : '100%',\r\n            height: horizontal ? '100%' : virtualItem.size,\r\n          }\r\n\r\n          return (\r\n            <div key={key} style={itemStyle} data-index={virtualItem.index}>\r\n              {renderItem(item, virtualItem.index)}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook to access virtualizer instance for advanced use cases\r\n */\r\nexport function useVirtualList<T>(options: {\r\n  items: T[]\r\n  scrollElement: HTMLElement | null\r\n  estimateSize: number\r\n  overscan?: number\r\n  horizontal?: boolean\r\n  gap?: number\r\n}) {\r\n  return useVirtualizer({\r\n    count: options.items.length,\r\n    getScrollElement: () => options.scrollElement,\r\n    estimateSize: () => options.estimateSize,\r\n    overscan: options.overscan ?? 5,\r\n    horizontal: options.horizontal ?? false,\r\n    gap: options.gap ?? 0,\r\n  })\r\n}\r\n","/**\r\n * VirtualGrid - 2D virtual scrolling component for grid layouts\r\n * @module components/VirtualGrid\r\n */\r\n\r\nimport React, { useRef } from 'react'\r\nimport { useVirtualizer } from '@tanstack/react-virtual'\r\n\r\nexport interface VirtualGridProps<T> {\r\n  /** Array of items to render */\r\n  items: T[]\r\n  /** Height of the scrollable container in pixels */\r\n  height: number | string\r\n  /** Width of the scrollable container in pixels */\r\n  width?: number | string\r\n  /** Estimated width of each column in pixels */\r\n  estimateColumnWidth: number\r\n  /** Render function for each column */\r\n  renderColumn: (item: T, index: number) => React.ReactNode\r\n  /** Optional className for the container */\r\n  className?: string\r\n  /** Overscan count (number of columns to render outside viewport) */\r\n  overscan?: number\r\n  /** Optional gap between columns in pixels */\r\n  gap?: number\r\n  /** Optional key extractor function */\r\n  getItemKey?: (item: T, index: number) => string | number\r\n  /** Enable horizontal scrolling only */\r\n  horizontal?: boolean\r\n}\r\n\r\n/**\r\n * VirtualGrid component for efficient rendering of large horizontal lists/grids\r\n *\r\n * Optimized for Kanban boards with many columns\r\n *\r\n * @example\r\n * ```tsx\r\n * <VirtualGrid\r\n *   items={columns}\r\n *   height=\"100%\"\r\n *   estimateColumnWidth={320}\r\n *   renderColumn={(column) => <ColumnComponent column={column} />}\r\n *   getItemKey={(column) => column.id}\r\n * />\r\n * ```\r\n */\r\nexport function VirtualGrid<T>({\r\n  items,\r\n  height,\r\n  width = '100%',\r\n  estimateColumnWidth,\r\n  renderColumn,\r\n  className = '',\r\n  overscan = 3,\r\n  gap = 16,\r\n  getItemKey,\r\n  horizontal = true,\r\n}: VirtualGridProps<T>) {\r\n  const parentRef = useRef<HTMLDivElement>(null)\r\n\r\n  const columnVirtualizer = useVirtualizer({\r\n    horizontal,\r\n    count: items.length,\r\n    getScrollElement: () => parentRef.current,\r\n    estimateSize: () => estimateColumnWidth,\r\n    overscan,\r\n    gap,\r\n  })\r\n\r\n  const virtualColumns = columnVirtualizer.getVirtualItems()\r\n\r\n  const containerStyle: React.CSSProperties = {\r\n    height: typeof height === 'number' ? `${height}px` : height,\r\n    width: typeof width === 'number' ? `${width}px` : width,\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  }\r\n\r\n  const innerStyle: React.CSSProperties = {\r\n    width: `${columnVirtualizer.getTotalSize()}px`,\r\n    height: '100%',\r\n    position: 'relative',\r\n  }\r\n\r\n  return (\r\n    <div ref={parentRef} style={containerStyle} className={className}>\r\n      <div style={innerStyle}>\r\n        {virtualColumns.map((virtualColumn) => {\r\n          const item = items[virtualColumn.index]\r\n          if (!item) return null\r\n          const key = getItemKey ? getItemKey(item, virtualColumn.index) : virtualColumn.index\r\n\r\n          const columnStyle: React.CSSProperties = {\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: virtualColumn.start,\r\n            width: virtualColumn.size,\r\n            height: '100%',\r\n          }\r\n\r\n          return (\r\n            <div key={key} style={columnStyle} data-index={virtualColumn.index}>\r\n              {renderColumn(item, virtualColumn.index)}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Hook for advanced 2D virtualization with both rows and columns\r\n */\r\nexport function useVirtualGrid<T>(options: {\r\n  items: T[]\r\n  scrollElement: HTMLElement | null\r\n  estimateColumnWidth: number\r\n  estimateRowHeight?: number\r\n  overscan?: number\r\n  gap?: number\r\n}) {\r\n  const columnVirtualizer = useVirtualizer({\r\n    horizontal: true,\r\n    count: options.items.length,\r\n    getScrollElement: () => options.scrollElement,\r\n    estimateSize: () => options.estimateColumnWidth,\r\n    overscan: options.overscan ?? 3,\r\n    gap: options.gap ?? 0,\r\n  })\r\n\r\n  return {\r\n    columnVirtualizer,\r\n    virtualColumns: columnVirtualizer.getVirtualItems(),\r\n    totalWidth: columnVirtualizer.getTotalSize(),\r\n  }\r\n}\r\n\r\n/**\r\n * Utility to determine if grid should use virtualization\r\n */\r\nexport function shouldVirtualizeGrid(columnCount: number, threshold = 10): boolean {\r\n  return columnCount > threshold\r\n}\r\n","/**\r\n * Design Tokens - Centralized design system tokens\r\n * @module tokens/design-tokens\r\n */\r\n\r\n/**\r\n * Spacing tokens (in pixels)\r\n */\r\nexport const spacing = {\r\n  none: 0,\r\n  xs: 4,\r\n  sm: 8,\r\n  md: 12,\r\n  lg: 16,\r\n  xl: 20,\r\n  '2xl': 24,\r\n  '3xl': 32,\r\n  '4xl': 40,\r\n  '5xl': 48,\r\n  '6xl': 64,\r\n} as const\r\n\r\n/**\r\n * Border radius tokens (in pixels)\r\n */\r\nexport const borderRadius = {\r\n  none: 0,\r\n  sm: 4,\r\n  md: 8,\r\n  lg: 12,\r\n  xl: 16,\r\n  '2xl': 20,\r\n  full: 9999,\r\n} as const\r\n\r\n/**\r\n * Font size tokens (in pixels)\r\n */\r\nexport const fontSize = {\r\n  xs: 12,\r\n  sm: 14,\r\n  base: 16,\r\n  lg: 18,\r\n  xl: 20,\r\n  '2xl': 24,\r\n  '3xl': 30,\r\n  '4xl': 36,\r\n  '5xl': 48,\r\n} as const\r\n\r\n/**\r\n * Font weight tokens\r\n */\r\nexport const fontWeight = {\r\n  light: 300,\r\n  normal: 400,\r\n  medium: 500,\r\n  semibold: 600,\r\n  bold: 700,\r\n  extrabold: 800,\r\n} as const\r\n\r\n/**\r\n * Line height tokens\r\n */\r\nexport const lineHeight = {\r\n  none: 1,\r\n  tight: 1.25,\r\n  snug: 1.375,\r\n  normal: 1.5,\r\n  relaxed: 1.625,\r\n  loose: 2,\r\n} as const\r\n\r\n/**\r\n * Z-index layers\r\n */\r\nexport const zIndex = {\r\n  base: 0,\r\n  dropdown: 1000,\r\n  sticky: 1020,\r\n  fixed: 1030,\r\n  modalBackdrop: 1040,\r\n  modal: 1050,\r\n  popover: 1060,\r\n  tooltip: 1070,\r\n} as const\r\n\r\n/**\r\n * Transition durations (in milliseconds)\r\n */\r\nexport const duration = {\r\n  instant: 0,\r\n  fastest: 75,\r\n  faster: 100,\r\n  fast: 150,\r\n  normal: 200,\r\n  slow: 300,\r\n  slower: 400,\r\n  slowest: 500,\r\n} as const\r\n\r\n/**\r\n * Transition timing functions\r\n */\r\nexport const easing = {\r\n  linear: 'linear',\r\n  ease: 'ease',\r\n  easeIn: 'ease-in',\r\n  easeOut: 'ease-out',\r\n  easeInOut: 'ease-in-out',\r\n  // Custom cubic-bezier\r\n  smooth: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\r\n  sharp: 'cubic-bezier(0.4, 0.0, 0.6, 1)',\r\n  bounce: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\r\n} as const\r\n\r\n/**\r\n * Shadow tokens\r\n */\r\nexport const shadows = {\r\n  none: 'none',\r\n  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\r\n  base: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\r\n  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\r\n  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\r\n  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\r\n  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)',\r\n} as const\r\n\r\n/**\r\n * Opacity tokens\r\n */\r\nexport const opacity = {\r\n  0: 0,\r\n  5: 0.05,\r\n  10: 0.1,\r\n  20: 0.2,\r\n  30: 0.3,\r\n  40: 0.4,\r\n  50: 0.5,\r\n  60: 0.6,\r\n  70: 0.7,\r\n  80: 0.8,\r\n  90: 0.9,\r\n  100: 1,\r\n} as const\r\n\r\n/**\r\n * Kanban-specific tokens\r\n */\r\nexport const kanban = {\r\n  column: {\r\n    width: 320,\r\n    minWidth: 280,\r\n    maxWidth: 400,\r\n    gap: 16,\r\n    padding: 12,\r\n    headerHeight: 48,\r\n  },\r\n  card: {\r\n    minHeight: 80,\r\n    maxHeight: 400,\r\n    padding: 12,\r\n    gap: 8,\r\n  },\r\n  board: {\r\n    padding: 16,\r\n    gap: 16,\r\n  },\r\n} as const\r\n\r\n/**\r\n * Gantt-specific tokens\r\n */\r\nexport const gantt = {\r\n  timeline: {\r\n    headerHeight: 60,\r\n    rowHeight: 44,\r\n    minRowHeight: 32,\r\n    maxRowHeight: 80,\r\n    taskPadding: 4,\r\n    gridLineWidth: 1,\r\n  },\r\n  task: {\r\n    height: 28,\r\n    minHeight: 20,\r\n    maxHeight: 40,\r\n    borderRadius: 4,\r\n    padding: 6,\r\n  },\r\n  dependency: {\r\n    lineWidth: 2,\r\n    arrowSize: 8,\r\n  },\r\n  scale: {\r\n    day: {\r\n      columnWidth: 40,\r\n      minColumnWidth: 30,\r\n      maxColumnWidth: 60,\r\n    },\r\n    week: {\r\n      columnWidth: 80,\r\n      minColumnWidth: 60,\r\n      maxColumnWidth: 120,\r\n    },\r\n    month: {\r\n      columnWidth: 120,\r\n      minColumnWidth: 80,\r\n      maxColumnWidth: 200,\r\n    },\r\n    quarter: {\r\n      columnWidth: 200,\r\n      minColumnWidth: 150,\r\n      maxColumnWidth: 300,\r\n    },\r\n  },\r\n  milestone: {\r\n    size: 16,\r\n    rotation: 45, // degrees\r\n  },\r\n} as const\r\n\r\n/**\r\n * Combined design tokens\r\n */\r\nexport const designTokens = {\r\n  spacing,\r\n  borderRadius,\r\n  fontSize,\r\n  fontWeight,\r\n  lineHeight,\r\n  zIndex,\r\n  duration,\r\n  easing,\r\n  shadows,\r\n  opacity,\r\n  kanban,\r\n  gantt,\r\n} as const\r\n\r\n/**\r\n * Type helpers\r\n */\r\nexport type SpacingToken = keyof typeof spacing\r\nexport type BorderRadiusToken = keyof typeof borderRadius\r\nexport type FontSizeToken = keyof typeof fontSize\r\nexport type FontWeightToken = keyof typeof fontWeight\r\nexport type LineHeightToken = keyof typeof lineHeight\r\nexport type ZIndexToken = keyof typeof zIndex\r\nexport type DurationToken = keyof typeof duration\r\nexport type EasingToken = keyof typeof easing\r\nexport type ShadowToken = keyof typeof shadows\r\nexport type OpacityToken = keyof typeof opacity\r\n\r\n/**\r\n * Design token value types\r\n */\r\nexport type DesignTokens = typeof designTokens\r\nexport type TokenValue = string | number\r\n\r\n/**\r\n * Utility to get token value with fallback\r\n */\r\nexport function getToken<T extends TokenValue>(\r\n  tokens: Record<string, T>,\r\n  key: string,\r\n  fallback: T\r\n): T {\r\n  return tokens[key] ?? fallback\r\n}\r\n","/**\r\n * CSS Custom Properties Generator\r\n * Generates CSS variables from design tokens\r\n * @module tokens/css-generator\r\n */\r\n\r\nimport { designTokens } from './design-tokens'\r\nimport type { TokenValue } from './design-tokens'\r\n\r\n/**\r\n * Convert a nested object to flat CSS custom properties\r\n */\r\nfunction flattenTokens(\r\n  obj: Record<string, unknown>,\r\n  prefix = '',\r\n  result: Record<string, TokenValue> = {}\r\n): Record<string, TokenValue> {\r\n  for (const [key, value] of Object.entries(obj)) {\r\n    const newKey = prefix ? `${prefix}-${key}` : key\r\n\r\n    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r\n      flattenTokens(value as Record<string, unknown>, newKey, result)\r\n    } else if (typeof value === 'string' || typeof value === 'number') {\r\n      result[newKey] = value\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n/**\r\n * Format token value for CSS\r\n */\r\nfunction formatCSSValue(value: TokenValue): string {\r\n  if (typeof value === 'number') {\r\n    // Check if it's likely a pixel value\r\n    if (value > 0 && value < 1000) {\r\n      return `${value}px`\r\n    }\r\n    return value.toString()\r\n  }\r\n  return value\r\n}\r\n\r\n/**\r\n * Generate CSS custom properties from design tokens\r\n */\r\nexport function generateCSSVariables(prefix = 'asakaa'): string {\r\n  const flatTokens = flattenTokens(designTokens)\r\n  const cssVars: string[] = []\r\n\r\n  for (const [key, value] of Object.entries(flatTokens)) {\r\n    const varName = `--${prefix}-${key}`\r\n    const varValue = formatCSSValue(value)\r\n    cssVars.push(`  ${varName}: ${varValue};`)\r\n  }\r\n\r\n  return `:root {\\n${cssVars.join('\\n')}\\n}`\r\n}\r\n\r\n/**\r\n * Generate CSS custom properties for a specific theme\r\n */\r\nexport interface ThemeColors {\r\n  // Background colors\r\n  background: {\r\n    primary: string\r\n    secondary: string\r\n    tertiary: string\r\n    card: string\r\n    hover: string\r\n    active: string\r\n  }\r\n  // Text colors\r\n  text: {\r\n    primary: string\r\n    secondary: string\r\n    tertiary: string\r\n    disabled: string\r\n    inverse: string\r\n  }\r\n  // Border colors\r\n  border: {\r\n    default: string\r\n    hover: string\r\n    focus: string\r\n    active: string\r\n  }\r\n  // Status colors\r\n  status: {\r\n    success: string\r\n    warning: string\r\n    error: string\r\n    info: string\r\n  }\r\n  // Priority colors\r\n  priority: {\r\n    low: string\r\n    medium: string\r\n    high: string\r\n    urgent: string\r\n  }\r\n  // Interactive colors\r\n  interactive: {\r\n    primary: string\r\n    primaryHover: string\r\n    primaryActive: string\r\n    secondary: string\r\n    secondaryHover: string\r\n    secondaryActive: string\r\n  }\r\n  // Gantt-specific colors\r\n  gantt: {\r\n    gridLine: string\r\n    todayLine: string\r\n    taskBackground: string\r\n    taskBorder: string\r\n    criticalPath: string\r\n    milestone: string\r\n    dependency: string\r\n    weekend: string\r\n  }\r\n}\r\n\r\n/**\r\n * Generate theme CSS variables\r\n */\r\nexport function generateThemeVariables(\r\n  theme: ThemeColors,\r\n  prefix = 'asakaa'\r\n): string {\r\n  const cssVars: string[] = []\r\n\r\n  // Flatten theme colors\r\n  const flatColors = flattenTokens(theme as unknown as Record<string, unknown>)\r\n\r\n  for (const [key, value] of Object.entries(flatColors)) {\r\n    const varName = `--${prefix}-color-${key}`\r\n    cssVars.push(`  ${varName}: ${value};`)\r\n  }\r\n\r\n  return `:root {\\n${cssVars.join('\\n')}\\n}`\r\n}\r\n\r\n/**\r\n * Dark theme colors\r\n */\r\nexport const darkTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#1a1a1a',\r\n    secondary: '#2a2a2a',\r\n    tertiary: '#3a3a3a',\r\n    card: '#2d2d2d',\r\n    hover: '#353535',\r\n    active: '#404040',\r\n  },\r\n  text: {\r\n    primary: '#ffffff',\r\n    secondary: '#b0b0b0',\r\n    tertiary: '#808080',\r\n    disabled: '#606060',\r\n    inverse: '#1a1a1a',\r\n  },\r\n  border: {\r\n    default: '#404040',\r\n    hover: '#505050',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#22c55e',\r\n    warning: '#f59e0b',\r\n    error: '#ef4444',\r\n    info: '#3b82f6',\r\n  },\r\n  priority: {\r\n    low: '#6b7280',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#6b7280',\r\n    secondaryHover: '#4b5563',\r\n    secondaryActive: '#374151',\r\n  },\r\n  gantt: {\r\n    gridLine: '#404040',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#6b7280',\r\n    weekend: '#2a2a2a',\r\n  },\r\n}\r\n\r\n/**\r\n * Light theme colors\r\n */\r\nexport const lightTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#ffffff',\r\n    secondary: '#f9fafb',\r\n    tertiary: '#f3f4f6',\r\n    card: '#ffffff',\r\n    hover: '#f3f4f6',\r\n    active: '#e5e7eb',\r\n  },\r\n  text: {\r\n    primary: '#111827',\r\n    secondary: '#6b7280',\r\n    tertiary: '#9ca3af',\r\n    disabled: '#d1d5db',\r\n    inverse: '#ffffff',\r\n  },\r\n  border: {\r\n    default: '#e5e7eb',\r\n    hover: '#d1d5db',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#16a34a',\r\n    warning: '#d97706',\r\n    error: '#dc2626',\r\n    info: '#2563eb',\r\n  },\r\n  priority: {\r\n    low: '#9ca3af',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#6b7280',\r\n    secondaryHover: '#4b5563',\r\n    secondaryActive: '#374151',\r\n  },\r\n  gantt: {\r\n    gridLine: '#e5e7eb',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#6b7280',\r\n    weekend: '#f9fafb',\r\n  },\r\n}\r\n\r\n/**\r\n * Neutral theme colors\r\n */\r\nexport const neutralTheme: ThemeColors = {\r\n  background: {\r\n    primary: '#18181b',\r\n    secondary: '#27272a',\r\n    tertiary: '#3f3f46',\r\n    card: '#27272a',\r\n    hover: '#3f3f46',\r\n    active: '#52525b',\r\n  },\r\n  text: {\r\n    primary: '#fafafa',\r\n    secondary: '#a1a1aa',\r\n    tertiary: '#71717a',\r\n    disabled: '#52525b',\r\n    inverse: '#18181b',\r\n  },\r\n  border: {\r\n    default: '#3f3f46',\r\n    hover: '#52525b',\r\n    focus: '#0ea5e9',\r\n    active: '#0284c7',\r\n  },\r\n  status: {\r\n    success: '#22c55e',\r\n    warning: '#f59e0b',\r\n    error: '#ef4444',\r\n    info: '#3b82f6',\r\n  },\r\n  priority: {\r\n    low: '#71717a',\r\n    medium: '#3b82f6',\r\n    high: '#f59e0b',\r\n    urgent: '#ef4444',\r\n  },\r\n  interactive: {\r\n    primary: '#0ea5e9',\r\n    primaryHover: '#0284c7',\r\n    primaryActive: '#0369a1',\r\n    secondary: '#71717a',\r\n    secondaryHover: '#52525b',\r\n    secondaryActive: '#3f3f46',\r\n  },\r\n  gantt: {\r\n    gridLine: '#3f3f46',\r\n    todayLine: '#0ea5e9',\r\n    taskBackground: '#3b82f6',\r\n    taskBorder: '#2563eb',\r\n    criticalPath: '#ef4444',\r\n    milestone: '#3b82f6',\r\n    dependency: '#71717a',\r\n    weekend: '#27272a',\r\n  },\r\n}\r\n\r\n/**\r\n * Generate complete CSS with all tokens and theme\r\n */\r\nexport function generateCompleteCSS(\r\n  theme: ThemeColors = darkTheme,\r\n  prefix = 'asakaa'\r\n): string {\r\n  const tokenVars = generateCSSVariables(prefix)\r\n  const themeVars = generateThemeVariables(theme, prefix)\r\n\r\n  return `${tokenVars}\\n\\n${themeVars}`\r\n}\r\n\r\n/**\r\n * Export CSS to file content\r\n */\r\nexport function exportTokensToCSS(): string {\r\n  return `/**\r\n * ASAKAA Design Tokens\r\n * Auto-generated from design-tokens.ts\r\n * Do not edit this file directly\r\n */\r\n\r\n${generateCompleteCSS(darkTheme)}\r\n\r\n/* Light theme */\r\n[data-theme=\"light\"] {\r\n${generateThemeVariables(lightTheme, 'asakaa')\r\n  .split('\\n')\r\n  .slice(1, -1)\r\n  .join('\\n')}\r\n}\r\n\r\n/* Neutral theme */\r\n[data-theme=\"neutral\"] {\r\n${generateThemeVariables(neutralTheme, 'asakaa')\r\n  .split('\\n')\r\n  .slice(1, -1)\r\n  .join('\\n')}\r\n}\r\n`\r\n}\r\n","/**\r\n * Theme Switcher Component\r\n * ASAKAA v0.5.0\r\n */\r\n\r\nimport { useTheme } from './ThemeProvider'\r\nimport type { ThemeName } from './types'\r\nimport './theme-switcher.css'\r\n\r\nexport interface ThemeSwitcherProps {\r\n  /** Show labels for each theme */\r\n  showLabels?: boolean\r\n  /** Compact mode (icon-only) */\r\n  compact?: boolean\r\n  /** Custom class name */\r\n  className?: string\r\n}\r\n\r\n// Theme Icon Components with explicit SVG\r\nconst ThemeIcon = ({ theme }: { theme: ThemeName }) => {\r\n  switch (theme) {\r\n    case 'dark':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M13.5 8.5C13.5 11.2614 11.2614 13.5 8.5 13.5C5.73858 13.5 3.5 11.2614 3.5 8.5C3.5 5.73858 5.73858 3.5 8.5 3.5C8.66667 3.5 8.83074 3.50926 8.99199 3.52734C8.10635 4.35233 7.5 5.53318 7.5 6.85C7.5 9.33579 9.49421 11.33 11.98 11.33C12.5933 11.33 13.1751 11.2075 13.7069 10.9844C13.5698 11.8951 13.2042 12.7349 12.6674 13.4367\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n    case 'light':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <circle cx=\"8\" cy=\"8\" r=\"3\" stroke=\"currentColor\" strokeWidth=\"1.5\"/>\r\n          <path d=\"M8 1V2M8 14V15M15 8H14M2 8H1M12.5 12.5L11.8 11.8M4.2 4.2L3.5 3.5M12.5 3.5L11.8 4.2M4.2 11.8L3.5 12.5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\"/>\r\n        </svg>\r\n      )\r\n    case 'neutral':\r\n      return (\r\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <circle cx=\"8\" cy=\"8\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"1.5\"/>\r\n          <path d=\"M5 8L8 8L8 5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n        </svg>\r\n      )\r\n  }\r\n}\r\n\r\nexport function ThemeSwitcher({ showLabels = true, compact = false, className = '' }: ThemeSwitcherProps) {\r\n  const { theme: currentTheme, setTheme, themes } = useTheme()\r\n\r\n  return (\r\n    <div className={`theme-switcher ${compact ? 'theme-switcher--compact' : ''} ${className}`}>\r\n      {Object.entries(themes).map(([key, themeData]) => {\r\n        const themeName = key as ThemeName\r\n        const isActive = themeName === currentTheme\r\n\r\n        return (\r\n          <button\r\n            key={themeName}\r\n            onClick={() => setTheme(themeName)}\r\n            className={`theme-switcher__button ${isActive ? 'theme-switcher__button--active' : ''}`}\r\n            aria-label={`Switch to ${themeData.displayName} theme`}\r\n            aria-pressed={isActive}\r\n            title={themeData.displayName}\r\n          >\r\n            <span className=\"theme-switcher__icon\" aria-hidden=\"true\">\r\n              <ThemeIcon theme={themeName} />\r\n            </span>\r\n            {showLabels && !compact && <span className=\"theme-switcher__label\">{themeData.displayName}</span>}\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n"]}